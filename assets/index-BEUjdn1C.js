(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();var Ve,C,Ln,kn,ve,Gt,$n,On,In,Pt,kt,$t,En,Je={},Tn=[],Ir=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ze=Array.isArray;function le(e,t){for(var n in t)e[n]=t[n];return e}function At(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function oe(e,t,n){var a,l,s,c={};for(s in t)s=="key"?a=t[s]:s=="ref"?l=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?Ve.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return Pe(e,c,a,l,null)}function Pe(e,t,n,a,l){var s={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++Ln,__i:-1,__u:0};return l==null&&C.vnode!=null&&C.vnode(s),s}function Er(){return{current:null}}function K(e){return e.children}function ae(e,t){this.props=e,this.context=t}function Se(e,t){if(t==null)return e.__?Se(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Se(e):null}function Dn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Dn(e)}}function Ot(e){(!e.__d&&(e.__d=!0)&&ve.push(e)&&!nt.__r++||Gt!=C.debounceRendering)&&((Gt=C.debounceRendering)||$n)(nt)}function nt(){for(var e,t,n,a,l,s,c,o=1;ve.length;)ve.length>o&&ve.sort(On),e=ve.shift(),o=ve.length,e.__d&&(n=void 0,l=(a=(t=e).__v).__e,s=[],c=[],t.__P&&((n=le({},a)).__v=a.__v+1,C.vnode&&C.vnode(n),Rt(t.__P,n,a,t.__n,t.__P.namespaceURI,32&a.__u?[l]:null,s,l??Se(a),!!(32&a.__u),c),n.__v=a.__v,n.__.__k[n.__i]=n,Fn(s,n,c),n.__e!=l&&Dn(n)));nt.__r=0}function jn(e,t,n,a,l,s,c,o,u,i,f){var d,p,m,y,L,$,S=a&&a.__k||Tn,b=t.length;for(u=Tr(n,t,S,u,b),d=0;d<b;d++)(m=n.__k[d])!=null&&(p=m.__i==-1?Je:S[m.__i]||Je,m.__i=d,$=Rt(e,m,p,l,s,c,o,u,i,f),y=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&Jt(p.ref,null,m),f.push(m.ref,m.__c||y,m)),L==null&&y!=null&&(L=y),4&m.__u||p.__k===m.__k?u=Mn(m,u,e):typeof m.type=="function"&&$!==void 0?u=$:y&&(u=y.nextSibling),m.__u&=-7);return n.__e=L,u}function Tr(e,t,n,a,l){var s,c,o,u,i,f=n.length,d=f,p=0;for(e.__k=new Array(l),s=0;s<l;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(u=s+p,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?Pe(null,c,null,null,null):ze(c)?Pe(K,{children:c},null,null,null):c.constructor==null&&c.__b>0?Pe(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,o=null,(i=c.__i=Dr(c,n,u,d))!=-1&&(d--,(o=n[i])&&(o.__u|=2)),o==null||o.__v==null?(i==-1&&(l>f?p--:l<f&&p++),typeof c.type!="function"&&(c.__u|=4)):i!=u&&(i==u-1?p--:i==u+1?p++:(i>u?p--:p++,c.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<f;s++)(o=n[s])!=null&&!(2&o.__u)&&(o.__e==a&&(a=Se(o)),An(o,o));return a}function Mn(e,t,n){var a,l;if(typeof e.type=="function"){for(a=e.__k,l=0;a&&l<a.length;l++)a[l]&&(a[l].__=e,t=Mn(a[l],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Se(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ie(e,t){return t=t||[],e==null||typeof e=="boolean"||(ze(e)?e.some(function(n){ie(n,t)}):t.push(e)),t}function Dr(e,t,n,a){var l,s,c,o=e.key,u=e.type,i=t[n],f=i!=null&&(2&i.__u)==0;if(i===null&&e.key==null||f&&o==i.key&&u==i.type)return n;if(a>(f?1:0)){for(l=n-1,s=n+1;l>=0||s<t.length;)if((i=t[c=l>=0?l--:s++])!=null&&!(2&i.__u)&&o==i.key&&u==i.type)return c}return-1}function Yt(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ir.test(t)?n:n+"px"}function Be(e,t,n,a,l){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||Yt(e.style,t,"");if(n)for(t in n)a&&n[t]==a[t]||Yt(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(In,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?a?n.u=a.u:(n.u=Pt,e.addEventListener(t,s?$t:kt,s)):e.removeEventListener(t,s?$t:kt,s);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Zt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Pt++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function Rt(e,t,n,a,l,s,c,o,u,i){var f,d,p,m,y,L,$,S,b,Y,k,x,P,j,re,U,O,H=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),s=[o=t.__e=n.__e]),(f=C.__b)&&f(t);e:if(typeof H=="function")try{if(S=t.props,b="prototype"in H&&H.prototype.render,Y=(f=H.contextType)&&a[f.__c],k=f?Y?Y.props.value:f.__:a,n.__c?$=(d=t.__c=n.__c).__=d.__E:(b?t.__c=d=new H(S,k):(t.__c=d=new ae(S,k),d.constructor=H,d.render=Mr),Y&&Y.sub(d),d.props=S,d.state||(d.state={}),d.context=k,d.__n=a,p=d.__d=!0,d.__h=[],d._sb=[]),b&&d.__s==null&&(d.__s=d.state),b&&H.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=le({},d.__s)),le(d.__s,H.getDerivedStateFromProps(S,d.__s))),m=d.props,y=d.state,d.__v=t,p)b&&H.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),b&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(b&&H.getDerivedStateFromProps==null&&S!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(S,k),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(S,d.__s,k)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=S,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(ee){ee&&(ee.__=t)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&c.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(S,d.__s,k),b&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,y,L)})}if(d.context=k,d.props=S,d.__P=e,d.__e=!1,P=C.__r,j=0,b){for(d.state=d.__s,d.__d=!1,P&&P(t),f=d.render(d.props,d.state,d.context),re=0;re<d._sb.length;re++)d.__h.push(d._sb[re]);d._sb=[]}else do d.__d=!1,P&&P(t),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++j<25);d.state=d.__s,d.getChildContext!=null&&(a=le(le({},a),d.getChildContext())),b&&!p&&d.getSnapshotBeforeUpdate!=null&&(L=d.getSnapshotBeforeUpdate(m,y)),U=f,f!=null&&f.type===K&&f.key==null&&(U=Pn(f.props.children)),o=jn(e,ze(U)?U:[U],t,n,a,l,s,c,o,u,i),d.base=t.__e,t.__u&=-161,d.__h.length&&c.push(d),$&&(d.__E=d.__=null)}catch(ee){if(t.__v=null,u||s!=null)if(ee.then){for(t.__u|=u?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,t.__e=o}else{for(O=s.length;O--;)At(s[O]);It(t)}else t.__e=n.__e,t.__k=n.__k,ee.then||It(t);C.__e(ee,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):o=t.__e=jr(n.__e,t,n,a,l,s,c,u,i);return(f=C.diffed)&&f(t),128&t.__u?void 0:o}function It(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(It)}function Fn(e,t,n){for(var a=0;a<n.length;a++)Jt(n[a],n[++a],n[++a]);C.__c&&C.__c(t,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(s){s.call(l)})}catch(s){C.__e(s,l.__v)}})}function Pn(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ze(e)?e.map(Pn):le({},e)}function jr(e,t,n,a,l,s,c,o,u){var i,f,d,p,m,y,L,$=n.props,S=t.props,b=t.type;if(b=="svg"?l="http://www.w3.org/2000/svg":b=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),s!=null){for(i=0;i<s.length;i++)if((m=s[i])&&"setAttribute"in m==!!b&&(b?m.localName==b:m.nodeType==3)){e=m,s[i]=null;break}}if(e==null){if(b==null)return document.createTextNode(S);e=document.createElementNS(l,b,S.is&&S),o&&(C.__m&&C.__m(t,s),o=!1),s=null}if(b==null)$===S||o&&e.data==S||(e.data=S);else{if(s=s&&Ve.call(e.childNodes),$=n.props||Je,!o&&s!=null)for($={},i=0;i<e.attributes.length;i++)$[(m=e.attributes[i]).name]=m.value;for(i in $)if(m=$[i],i!="children"){if(i=="dangerouslySetInnerHTML")d=m;else if(!(i in S)){if(i=="value"&&"defaultValue"in S||i=="checked"&&"defaultChecked"in S)continue;Be(e,i,null,m,l)}}for(i in S)m=S[i],i=="children"?p=m:i=="dangerouslySetInnerHTML"?f=m:i=="value"?y=m:i=="checked"?L=m:o&&typeof m!="function"||$[i]===m||Be(e,i,m,$[i],l);if(f)o||d&&(f.__html==d.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(d&&(e.innerHTML=""),jn(t.type=="template"?e.content:e,ze(p)?p:[p],t,n,a,b=="foreignObject"?"http://www.w3.org/1999/xhtml":l,s,c,s?s[0]:n.__k&&Se(n,0),o,u),s!=null)for(i=s.length;i--;)At(s[i]);o||(i="value",b=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[i]||b=="progress"&&!y||b=="option"&&y!=$[i])&&Be(e,i,y,$[i],l),i="checked",L!=null&&L!=e[i]&&Be(e,i,L,$[i],l))}return e}function Jt(e,t,n){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&t==null||(e.__u=e(t))}else e.current=t}catch(l){C.__e(l,n)}}function An(e,t,n){var a,l;if(C.unmount&&C.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||Jt(a,null,t)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(s){C.__e(s,t)}a.base=a.__P=null}if(a=e.__k)for(l=0;l<a.length;l++)a[l]&&An(a[l],t,n||typeof e.type!="function");n||At(e.__e),e.__c=e.__=e.__e=void 0}function Mr(e,t,n){return this.constructor(e,n)}function Le(e,t,n){var a,l,s,c;t==document&&(t=document.documentElement),C.__&&C.__(e,t),l=(a=typeof n=="function")?null:n&&n.__k||t.__k,s=[],c=[],Rt(t,e=(!a&&n||t).__k=oe(K,null,[e]),l||Je,Je,t.namespaceURI,!a&&n?[n]:l?null:t.firstChild?Ve.call(t.childNodes):null,s,!a&&n?n:l?l.__e:t.firstChild,a,c),Fn(s,e,c)}function Rn(e,t){Le(e,t,Rn)}function Fr(e,t,n){var a,l,s,c,o=le({},e.props);for(s in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)s=="key"?a=t[s]:s=="ref"?l=t[s]:o[s]=t[s]===void 0&&c!=null?c[s]:t[s];return arguments.length>2&&(o.children=arguments.length>3?Ve.call(arguments,2):n),Pe(e.type,o,a||e.key,l||e.ref,null)}function Pr(e){function t(n){var a,l;return this.getChildContext||(a=new Set,(l={})[t.__c]=this,this.getChildContext=function(){return l},this.componentWillUnmount=function(){a=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&a.forEach(function(c){c.__e=!0,Ot(c)})},this.sub=function(s){a.add(s);var c=s.componentWillUnmount;s.componentWillUnmount=function(){a&&a.delete(s),c&&c.call(s)}}),n.children}return t.__c="__cC"+En++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,a){return n.children(a)}).contextType=t,t}Ve=Tn.slice,C={__e:function(e,t,n,a){for(var l,s,c;t=t.__;)if((l=t.__c)&&!l.__)try{if((s=l.constructor)&&s.getDerivedStateFromError!=null&&(l.setState(s.getDerivedStateFromError(e)),c=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,a||{}),c=l.__d),c)return l.__E=l}catch(o){e=o}throw e}},Ln=0,kn=function(e){return e!=null&&e.constructor==null},ae.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=le({},this.state),typeof e=="function"&&(e=e(le({},n),this.props)),e&&le(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ot(this))},ae.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ot(this))},ae.prototype.render=K,ve=[],$n=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,On=function(e,t){return e.__v.__b-t.__v.__b},nt.__r=0,In=/(PointerCapture)$|Capture$/i,Pt=0,kt=Zt(!1),$t=Zt(!0),En=0;var Ar=0;function r(e,t,n,a,l,s){t||(t={});var c,o,u=t;if("ref"in u)for(o in u={},t)o=="ref"?c=t[o]:u[o]=t[o];var i={type:e,props:u,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ar,__i:-1,__u:0,__source:l,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(o in c)u[o]===void 0&&(u[o]=c[o]);return C.vnode&&C.vnode(i),i}var pe,R,vt,Qt,ke=0,Jn=[],V=C,Xt=V.__b,en=V.__r,tn=V.diffed,nn=V.__c,rn=V.unmount,an=V.__;function Ie(e,t){V.__h&&V.__h(R,e,ke||t),ke=0;var n=R.__H||(R.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function _e(e){return ke=1,Ut(Kn,e)}function Ut(e,t,n){var a=Ie(pe++,2);if(a.t=e,!a.__c&&(a.__=[n?n(t):Kn(void 0,t),function(o){var u=a.__N?a.__N[0]:a.__[0],i=a.t(u,o);u!==i&&(a.__N=[i,a.__[1]],a.__c.setState({}))}],a.__c=R,!R.__f)){var l=function(o,u,i){if(!a.__c.__H)return!0;var f=a.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!s||s.call(this,o,u,i);var d=a.__c.props!==o;return f.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(d=!0)}}),s&&s.call(this,o,u,i)||d};R.__f=!0;var s=R.shouldComponentUpdate,c=R.componentWillUpdate;R.componentWillUpdate=function(o,u,i){if(this.__e){var f=s;s=void 0,l(o,u,i),s=f}c&&c.call(this,o,u,i)},R.shouldComponentUpdate=l}return a.__N||a.__}function Q(e,t){var n=Ie(pe++,3);!V.__s&&Vt(n.__H,t)&&(n.__=e,n.u=t,R.__H.__h.push(n))}function We(e,t){var n=Ie(pe++,4);!V.__s&&Vt(n.__H,t)&&(n.__=e,n.u=t,R.__h.push(n))}function A(e){return ke=5,X(function(){return{current:e}},[])}function Un(e,t,n){ke=6,We(function(){if(typeof e=="function"){var a=e(t());return function(){e(null),a&&typeof a=="function"&&a()}}if(e)return e.current=t(),function(){return e.current=null}},n==null?n:n.concat(e))}function X(e,t){var n=Ie(pe++,7);return Vt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function $e(e,t){return ke=8,X(function(){return e},t)}function Vn(e){var t=R.context[e.__c],n=Ie(pe++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(R)),t.props.value):e.__}function zn(e,t){V.useDebugValue&&V.useDebugValue(t?t(e):e)}function Wn(){var e=Ie(pe++,11);if(!e.__){for(var t=R.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Rr(){for(var e;e=Jn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Qe),e.__H.__h.forEach(Et),e.__H.__h=[]}catch(t){e.__H.__h=[],V.__e(t,e.__v)}}V.__b=function(e){R=null,Xt&&Xt(e)},V.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),an&&an(e,t)},V.__r=function(e){en&&en(e),pe=0;var t=(R=e.__c).__H;t&&(vt===R?(t.__h=[],R.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Qe),t.__h.forEach(Et),t.__h=[],pe=0)),vt=R},V.diffed=function(e){tn&&tn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Jn.push(t)!==1&&Qt===V.requestAnimationFrame||((Qt=V.requestAnimationFrame)||Jr)(Rr)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),vt=R=null},V.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Qe),n.__h=n.__h.filter(function(a){return!a.__||Et(a)})}catch(a){t.some(function(l){l.__h&&(l.__h=[])}),t=[],V.__e(a,n.__v)}}),nn&&nn(e,t)},V.unmount=function(e){rn&&rn(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(a){try{Qe(a)}catch(l){t=l}}),n.__H=void 0,t&&V.__e(t,n.__v))};var ln=typeof requestAnimationFrame=="function";function Jr(e){var t,n=function(){clearTimeout(a),ln&&cancelAnimationFrame(t),setTimeout(e)},a=setTimeout(n,35);ln&&(t=requestAnimationFrame(n))}function Qe(e){var t=R,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),R=t}function Et(e){var t=R;e.__c=e.__(),R=t}function Vt(e,t){return!e||e.length!==t.length||t.some(function(n,a){return n!==e[a]})}function Kn(e,t){return typeof t=="function"?t(e):t}var Ur=Symbol.for("preact-signals");function zt(){if(we>1)we--;else{for(var e,t=!1;Ae!==void 0;){var n=Ae;for(Ae=void 0,Tt++;n!==void 0;){var a=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Bn(n))try{n.c()}catch(l){t||(e=l,t=!0)}n=a}}if(Tt=0,we--,t)throw e}}var D=void 0;function Hn(e){var t=D;D=void 0;try{return e()}finally{D=t}}var Ae=void 0,we=0,Tt=0,rt=0;function qn(e){if(D!==void 0){var t=e.n;if(t===void 0||t.t!==D)return t={i:0,S:e,p:D.s,n:void 0,t:D,e:void 0,x:void 0,r:t},D.s!==void 0&&(D.s.n=t),D.s=t,e.n=t,32&D.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=D.s,t.n=void 0,D.s.n=t,D.s=t),t}}function Z(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched}Z.prototype.brand=Ur;Z.prototype.h=function(){return!0};Z.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n!==void 0?n.e=e:Hn(function(){var a;(a=t.W)==null||a.call(t)}))};Z.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,a=e.x;n!==void 0&&(n.x=a,e.e=void 0),a!==void 0&&(a.e=n,e.x=void 0),e===this.t&&(this.t=a,a===void 0&&Hn(function(){var l;(l=t.Z)==null||l.call(t)}))}};Z.prototype.subscribe=function(e){var t=this;return Kt(function(){var n=t.value,a=D;D=void 0;try{e(n)}finally{D=a}})};Z.prototype.valueOf=function(){return this.value};Z.prototype.toString=function(){return this.value+""};Z.prototype.toJSON=function(){return this.value};Z.prototype.peek=function(){var e=D;D=void 0;try{return this.value}finally{D=e}};Object.defineProperty(Z.prototype,"value",{get:function(){var e=qn(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(Tt>100)throw new Error("Cycle detected");this.v=e,this.i++,rt++,we++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{zt()}}}});function ne(e,t){return new Z(e,t)}function Bn(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Gn(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Yn(e){for(var t=e.s,n=void 0;t!==void 0;){var a=t.p;t.i===-1?(t.S.U(t),a!==void 0&&(a.n=t.n),t.n!==void 0&&(t.n.p=a)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=a}e.s=n}function be(e,t){Z.call(this,void 0),this.x=e,this.s=void 0,this.g=rt-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched}be.prototype=new Z;be.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===rt))return!0;if(this.g=rt,this.f|=1,this.i>0&&!Bn(this))return this.f&=-2,!0;var e=D;try{Gn(this),D=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return D=e,Yn(this),this.f&=-2,!0};be.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}Z.prototype.S.call(this,e)};be.prototype.U=function(e){if(this.t!==void 0&&(Z.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};be.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Object.defineProperty(be.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=qn(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function ce(e,t){return new be(e,t)}function Zn(e){var t=e.u;if(e.u=void 0,typeof t=="function"){we++;var n=D;D=void 0;try{t()}catch(a){throw e.f&=-2,e.f|=8,Wt(e),a}finally{D=n,zt()}}}function Wt(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Zn(e)}function Vr(e){if(D!==this)throw new Error("Out-of-order effect");Yn(this),D=e,this.f&=-2,8&this.f&&Wt(this),zt()}function Ee(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Ee.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};Ee.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Zn(this),Gn(this),we++;var e=D;return D=this,Vr.bind(this,e)};Ee.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ae,Ae=this)};Ee.prototype.d=function(){this.f|=8,1&this.f||Wt(this)};Ee.prototype.dispose=function(){this.d()};function Kt(e){var t=new Ee(e);try{t.c()}catch(a){throw t.d(),a}var n=t.d.bind(t);return n[Symbol.dispose]=n,n}var ct,gt;function Te(e,t){C[e]=t.bind(null,C[e]||function(){})}function at(e){gt&&gt(),gt=e&&e.S()}function Qn(e){var t=this,n=e.data,a=T(n);a.value=n;var l=X(function(){for(var s=t.__v;s=s.__;)if(s.__c){s.__c.__$f|=4;break}return t.__$u.c=function(){var c,o=t.__$u.S(),u=l.value;o(),kn(u)||((c=t.base)==null?void 0:c.nodeType)!==3?(t.__$f|=1,t.setState({})):t.base.data=u},ce(function(){var c=a.value.value;return c===0?0:c===!0?"":c||""})},[]);return l.value}Qn.displayName="_st";Object.defineProperties(Z.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Qn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Te("__b",function(e,t){if(typeof t.type=="string"){var n,a=t.props;for(var l in a)if(l!=="children"){var s=a[l];s instanceof Z&&(n||(t.__np=n={}),n[l]=s,a[l]=s.peek())}}e(t)});Te("__r",function(e,t){at();var n,a=t.__c;a&&(a.__$f&=-2,(n=a.__$u)===void 0&&(a.__$u=n=function(l){var s;return Kt(function(){s=this}),s.c=function(){a.__$f|=1,a.setState({})},s}())),ct=a,at(n),e(t)});Te("__e",function(e,t,n,a){at(),ct=void 0,e(t,n,a)});Te("diffed",function(e,t){at(),ct=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var a=t.__np,l=t.props;if(a){var s=n.U;if(s)for(var c in s){var o=s[c];o!==void 0&&!(c in a)&&(o.d(),s[c]=void 0)}else n.U=s={};for(var u in a){var i=s[u],f=a[u];i===void 0?(i=zr(n,u,f,l),s[u]=i):i.o(f,l)}}}e(t)});function zr(e,t,n,a){var l=t in e&&e.ownerSVGElement===void 0,s=ne(n);return{o:function(c,o){s.value=c,a=o},d:Kt(function(){var c=s.value.value;a[t]!==c&&(a[t]=c,l?e[t]=c:c?e.setAttribute(t,c):e.removeAttribute(t))})}}Te("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var a=n.U;if(a){n.U=void 0;for(var l in a){var s=a[l];s&&s.d()}}}}else{var c=t.__c;if(c){var o=c.__$u;o&&(c.__$u=void 0,o.d())}}e(t)});Te("__h",function(e,t,n,a){(a<3||a===9)&&(t.__$f|=2),e(t,n,a)});ae.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,a=n&&n.s!==void 0;for(var l in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(a||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(a||4&this.__$f)||3&this.__$f)return!0;for(var s in e)if(s!=="__source"&&e[s]!==this.props[s])return!0;for(var c in this.props)if(!(c in e))return!0;return!1};function T(e){return X(function(){return ne(e)},[])}function W(e){var t=A(e);return t.current=e,ct.__$f|=4,X(function(){return ce(function(){return t.current()})},[])}const Wr=e=>{try{return[JSON.parse(e),null]}catch(t){return[null,t instanceof Error?t.message:"Parse error"]}},ut=e=>{const t=new Set,n=l=>{l&&typeof l=="string"&&t.add(l)},a=l=>{for(const s of l||[]){s.id&&n(s.id);for(const c of s.items||[])c.id&&n(c.id),c.legendDescription&&n(c.legendDescription)}};return a(e.weatherFeatures),a(e.features),t},Xn=e=>{const t=new Set,n=a=>{for(const l of a||[])for(const s of l.items||[])for(const c of s.layersIds||[])t.add(c)};return n(e.weatherFeatures),n(e.features),t},Ht=(e,t)=>{const n=[],a=(l,s)=>{l.forEach((c,o)=>{(c.items||[]).forEach((u,i)=>{(u.layersIds||[]).includes(t)&&n.push({featureType:s,featureIndex:o,featureName:c.name||c.id||`${s} ${o+1}`,itemIndex:i,itemName:u.name||u.id||`Item ${i+1}`})})})};return a(e.weatherFeatures,"weatherFeatures"),a(e.features,"features"),n},Kr=(e,t,n="application/json")=>{const a=new Blob([t],{type:n}),l=URL.createObjectURL(a),s=document.createElement("a");s.href=l,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l)},qt=()=>({weatherFeatures:[],features:[],layers:[],intl:{en:{},da:{},nb:{},sv:{}}}),Dt=e=>{if(!e||typeof e!="object")return qt();if(e.map_layers&&typeof e.map_layers=="object"){const t=e.map_layers;return on({weatherFeatures:t.weatherFeatures||[],features:t.features||[],layers:t.layers||[],intl:t.intl||{en:{},da:{},nb:{},sv:{}}})}return on({weatherFeatures:e.weatherFeatures||[],features:e.features||[],layers:e.layers||[],intl:e.intl||{en:{},da:{},nb:{},sv:{}}})},Hr=new Set(["id","name","showLegend","legendUrl","legendDescription","layersIds"]),qr=new Set(["id","name","presentation","mutuallyExclusive","items"]),Br=new Set(["id","layers","category","copyright","country"]),Gr=new Set(["type","source","zIndex","refreshInterval","options"]);function Yr(e){const t={};for(const n of Object.keys(e))Hr.has(n)&&(t[n]=e[n]);return t}function sn(e){const t={};for(const n of Object.keys(e))qr.has(n)&&(n==="items"&&Array.isArray(e.items)?t.items=e.items.map(Yr):t[n]=e[n]);return t}function Zr(e){const t={};for(const n of Object.keys(e))Gr.has(n)&&(t[n]=e[n]);return t}function Qr(e){const t={};for(const n of Object.keys(e))Br.has(n)&&(n==="layers"&&Array.isArray(e.layers)?t.layers=e.layers.map(Zr):t[n]=e[n]);return t}const on=e=>({weatherFeatures:(e.weatherFeatures||[]).map(sn),features:(e.features||[]).map(sn),layers:(e.layers||[]).map(Qr),intl:e.intl||{en:{},da:{},nb:{},sv:{}}}),er="hemswx-map-editor-settings",Xr={customLogicLayers:new Set(["aviation_obstacle"]),nonTranslatableKeys:new Set},ea=()=>{try{const e=localStorage.getItem(er);if(e){const t=JSON.parse(e);return{customLogicLayers:new Set(t.customLogicLayers||["aviation_obstacle"]),nonTranslatableKeys:new Set(t.nonTranslatableKeys||[])}}}catch(e){console.warn("Failed to load settings:",e)}return{...Xr}},dt=e=>{try{const t={customLogicLayers:Array.from(e.customLogicLayers),nonTranslatableKeys:Array.from(e.nonTranslatableKeys)};localStorage.setItem(er,JSON.stringify(t))}catch(t){console.warn("Failed to save settings:",t)}},q=ne(ea());ce(()=>q.value.customLogicLayers);const ta=e=>{const t=new Set(q.value.customLogicLayers);t.add(e);const n={...q.value,customLogicLayers:t};q.value=n,dt(n)},na=e=>{const t=new Set(q.value.customLogicLayers);t.delete(e);const n={...q.value,customLogicLayers:t};q.value=n,dt(n)},lt=e=>q.value.customLogicLayers.has(e),ra=e=>{lt(e)?na(e):ta(e)};ce(()=>q.value.nonTranslatableKeys);const aa=e=>{const t=new Set(q.value.nonTranslatableKeys);t.add(e);const n={...q.value,nonTranslatableKeys:t};q.value=n,dt(n)},tr=e=>{const t=new Set(q.value.nonTranslatableKeys);t.delete(e);const n={...q.value,nonTranslatableKeys:t};q.value=n,dt(n)},Oe=e=>q.value.nonTranslatableKeys.has(e),la=e=>{Oe(e)?tr(e):aa(e)},sa=e=>{const[t,n]=Wr(e);if(n)return{valid:!1,errors:[`JSON Parse Error: ${n}`],warnings:[]};const a=[],l=[];if(!t||typeof t!="object")return a.push("Root must be an object"),{valid:!1,errors:a,warnings:l};const s=["weatherFeatures","features","layers"];for(const o of s)Array.isArray(t[o])||a.push(`Missing or invalid '${o}' array`);if(!t.intl||typeof t.intl!="object")a.push("Missing or invalid 'intl' object");else{const o=["en","da","nb","sv"];for(const u of o)(!t.intl[u]||typeof t.intl[u]!="object")&&l.push(`Missing or invalid '${u}' translations`)}[...t.weatherFeatures||[],...t.features||[]].forEach((o,u)=>{const i=u<(t.weatherFeatures?.length||0)?"weatherFeature":"feature",f=u<(t.weatherFeatures?.length||0)?u:u-(t.weatherFeatures?.length||0);(!o.presentation||!["single","multiple"].includes(o.presentation))&&a.push(`${i} ${f+1}: presentation field is required and must be "single" or "multiple"`),!o.items||!Array.isArray(o.items)?a.push(`${i} ${f+1}: items field is required and must be an array`):o.items.forEach((d,p)=>{(!d.id||typeof d.id!="string"||d.id.trim()==="")&&a.push(`${i} ${f+1}, item ${p+1}: id is required and cannot be empty`),(!d.name||typeof d.name!="string"||d.name.trim()==="")&&a.push(`${i} ${f+1}, item ${p+1}: name is required and cannot be empty`),(!d.layersIds||!Array.isArray(d.layersIds)||d.layersIds.length===0)&&a.push(`${i} ${f+1}, item ${p+1}: layersIds is required and must be a non-empty array`)})}),t.layers&&Array.isArray(t.layers)&&t.layers.forEach((o,u)=>{(!o.id||typeof o.id!="string"||o.id.trim()==="")&&a.push(`layer ${u+1}: id is required and cannot be empty`),!o.layers||!Array.isArray(o.layers)||o.layers.length===0?a.push(`layer ${u+1}: layers field is required and must be a non-empty array`):o.layers.forEach((i,f)=>{(!i.type||typeof i.type!="string")&&a.push(`layer ${u+1}, sublayer ${f+1}: type is required`),(!i.source||typeof i.source!="string"||i.source.trim()==="")&&a.push(`layer ${u+1}, sublayer ${f+1}: source is required and cannot be empty`)})});try{const o=Xn(t),u=new Set((t.layers||[]).map(f=>f.id).filter(Boolean)),i=[...o].filter(f=>!u.has(f));i.length>0&&l.push(`Missing layer definitions: ${i.join(", ")}`)}catch{l.push("Could not validate layer references")}return{valid:a.length===0,errors:a,warnings:l}},nr=e=>{try{const t=Xn(e),n=new Set((e.layers||[]).map(f=>f.id)),a=q.value.customLogicLayers,l=new Set([...t,...a]),s=[...t].filter(f=>!n.has(f)),c=[...n].filter(f=>!l.has(f)),o=ut(e),u=Object.keys(e.intl||{}),i={};for(const f of u){const d=e.intl[f]||{};i[f]=[...o].filter(p=>!(p in d))}return{missingLayers:s,unusedLayers:c,missingIntl:i,weatherFeatureCount:e.weatherFeatures?.length||0,featureCount:e.features?.length||0,layerCount:e.layers?.length||0,languageCount:u.length}}catch(t){return console.warn("Error computing stats:",t),{missingLayers:[],unusedLayers:[],missingIntl:{},weatherFeatureCount:0,featureCount:0,layerCount:0,languageCount:0}}},ia=e=>{const t=nr(e);return`WF: ${t.weatherFeatureCount} • F: ${t.featureCount} • Layers: ${t.layerCount} • Langs: ${t.languageCount}`},J=["en","da","nb","sv"],yt=(e,t)=>{const n={...e};n.intl||(n.intl={en:{},da:{},nb:{},sv:{}});const a=[];return t.id?.trim()&&a.push({key:t.id,defaultValue:t.name?.trim()||t.id}),(t.items||[]).forEach(l=>{l.id?.trim()&&a.push({key:l.id,defaultValue:l.name?.trim()||l.id}),l.legendDescription?.trim()&&a.push({key:l.legendDescription,defaultValue:l.legendDescription})}),J.forEach(l=>{n.intl[l]||(n.intl[l]={}),a.forEach(({key:s,defaultValue:c})=>{n.intl[l][s]||(l==="en"?n.intl[l][s]=c:n.intl[l][s]=n.intl.en[s]||c)})}),n},oa=e=>{const t={...e},n=t.intl?.en||{},a={},l=(o,u)=>{!a[o]&&u&&(a[o]=u)},s=o=>{for(const u of o||[]){u.id&&u.name&&l(u.id,u.name);for(const i of u.items||[])i.id&&i.name&&l(i.id,i.name),i.legendDescription&&l(i.legendDescription,n[i.legendDescription]||i.legendDescription)}};s(t.weatherFeatures),s(t.features);const c=new Set([...ut(t)]);return t.intl||(t.intl={en:{},da:{},nb:{},sv:{}}),J.forEach(o=>{const u=t.intl[o]||{},i={};c.forEach(f=>{u[f]?i[f]=u[f]:o==="en"&&a[f]?i[f]=a[f]:n[f]?i[f]=n[f]:i[f]=f}),t.intl[o]=i}),t},rr=["wms","tiled","mapImage","portalItem","vectorTiled","feature"],de=e=>{const t={type:e,source:"",zIndex:0,options:{opacity:1}};switch(e){case"wms":return{...t,source:"https://example.com/wms",options:{layerNames:["layer1"],opacity:1}};case"tiled":return{...t,source:"https://example.com/tiles/{z}/{y}/{x}.png"};case"vectorTiled":return{...t,source:"https://example.com/vectortiles/{z}/{y}/{x}.pbf"};case"mapImage":return{...t,source:"https://example.com/arcgis/rest/services/MapServer"};case"feature":return{...t,source:"https://example.com/arcgis/rest/services/FeatureServer/0"};case"portalItem":return{...t,source:"portal-item-id",options:{layerId:0,opacity:1}};default:return t}},Ge=(e,t)=>{const n={...e},a=n.layers.findIndex(l=>l.id===t.id);return a>=0?(n.layers=[...n.layers],n.layers[a]=t):n.layers=[...n.layers,t],n},_=ne(qt()),je=ne(!1),st=ne({type:null,index:-1}),ge=ne({index:-1});ne({});ne({weatherFeatures:{},features:{}});const he=ne("workspace"),ar=ne("json");ne("en");const Xe=ne(null),cn=e=>{Xe.value=e,he.value="internationalization"};ce(()=>JSON.stringify(_.value,null,2));const ca=ce(()=>nr(_.value)),ua=ce(()=>ia(_.value));ce(()=>{const e=st.value;return e.type===null||e.index<0?null:_.value[e.type][e.index]||null});ce(()=>{const e=ge.value;return e.index<0?null:_.value.layers[e.index]||null});const z=e=>{_.value=e,je.value=!0;try{localStorage.setItem("hemswx-last-json-data",JSON.stringify(e))}catch(a){console.warn("Failed to save JSON data to localStorage:",a)}const t=st.value;if(t.type&&t.index>=0){const a=e[t.type];t.index>=a.length&&(st.value={type:null,index:-1})}const n=ge.value;n.index>=0&&n.index>=e.layers.length&&(ge.value={index:-1})},da=()=>{try{const e=localStorage.getItem("hemswx-last-json-data");if(e){const t=JSON.parse(e);return z(t),se("✅ Last session data loaded"),!0}}catch(e){console.warn("Failed to load JSON data from localStorage:",e)}return!1},se=e=>{},fa=(e,t)=>{st.value={type:e,index:t},ar.value="feature"},pa=e=>{ge.value={index:e},ar.value="layer"},lr=()=>{const e=oa(_.value);z(e)},ma=e=>{const t={..._.value};t.layers=t.layers.filter((a,l)=>l!==e),z(t);const n=ge.value;n.index===e?ge.value={index:-1}:n.index>e&&(ge.value={index:n.index-1})},_t=(e,t)=>{const n={..._.value},a=n.layers.findIndex(l=>l.id===e);a!==-1&&(n.layers=n.layers.map((l,s)=>s===a?{...l,...t}:l),z(n))},ha=e=>_.value.layers.find(t=>t.id===e);function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?un(Object(n),!0).forEach(function(a){va(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ga(e,t){if(e==null)return{};var n={},a=Object.keys(e),l,s;for(s=0;s<a.length;s++)l=a[s],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function ya(e,t){if(e==null)return{};var n=ga(e,t),a,l;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _a(e,t){return ba(e)||xa(e,t)||Na(e,t)||wa()}function ba(e){if(Array.isArray(e))return e}function xa(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,l=!1,s=void 0;try{for(var c=e[Symbol.iterator](),o;!(a=(o=c.next()).done)&&(n.push(o.value),!(t&&n.length===t));a=!0);}catch(u){l=!0,s=u}finally{try{!a&&c.return!=null&&c.return()}finally{if(l)throw s}}return n}}function Na(e,t){if(e){if(typeof e=="string")return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}}function fn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function wa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pn(Object(n),!0).forEach(function(a){Ca(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Sa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(a){return t.reduceRight(function(l,s){return s(l)},a)}}function Me(e){return function t(){for(var n=this,a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return l.length>=e.length?e.apply(this,l):function(){for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];return t.apply(n,[].concat(l,o))}}}function it(e){return{}.toString.call(e).includes("Object")}function La(e){return!Object.keys(e).length}function Ue(e){return typeof e=="function"}function ka(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $a(e,t){return it(t)||fe("changeType"),Object.keys(t).some(function(n){return!ka(e,n)})&&fe("changeField"),t}function Oa(e){Ue(e)||fe("selectorType")}function Ia(e){Ue(e)||it(e)||fe("handlerType"),it(e)&&Object.values(e).some(function(t){return!Ue(t)})&&fe("handlersType")}function Ea(e){e||fe("initialIsRequired"),it(e)||fe("initialType"),La(e)&&fe("initialContent")}function Ta(e,t){throw new Error(e[t]||e.default)}var Da={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},fe=Me(Ta)(Da),Ye={changes:$a,selector:Oa,handler:Ia,initial:Ea};function ja(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ye.initial(e),Ye.handler(t);var n={current:e},a=Me(Pa)(n,t),l=Me(Fa)(n),s=Me(Ye.changes)(e),c=Me(Ma)(n);function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Ye.selector(i),i(n.current)}function u(i){Sa(a,l,s,c)(i)}return[o,u]}function Ma(e,t){return Ue(t)?t(e.current):t}function Fa(e,t){return e.current=mn(mn({},e.current),t),t}function Pa(e,t,n){return Ue(t)?t(e.current):Object.keys(n).forEach(function(a){var l;return(l=t[a])===null||l===void 0?void 0:l.call(t,e.current[a])}),n}var Aa={create:ja},Ra={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Ja(e){return function t(){for(var n=this,a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return l.length>=e.length?e.apply(this,l):function(){for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];return t.apply(n,[].concat(l,o))}}}function Ua(e){return{}.toString.call(e).includes("Object")}function Va(e){return e||hn("configIsRequired"),Ua(e)||hn("configType"),e.urls?(za(),{paths:{vs:e.urls.monacoBase}}):e}function za(){console.warn(sr.deprecation)}function Wa(e,t){throw new Error(e[t]||e.default)}var sr={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},hn=Ja(Wa)(sr),Ka={config:Va},Ha=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return function(l){return n.reduceRight(function(s,c){return c(s)},l)}};function ir(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],ir(e[n],t[n]))}),dn(dn({},e),t)}var qa={type:"cancelation",msg:"operation is manually canceled"};function bt(e){var t=!1,n=new Promise(function(a,l){e.then(function(s){return t?l(qa):a(s)}),e.catch(l)});return n.cancel=function(){return t=!0},n}var Ba=Aa.create({config:Ra,isInitialized:!1,resolve:null,reject:null,monaco:null}),or=_a(Ba,2),Ke=or[0],ft=or[1];function Ga(e){var t=Ka.config(e),n=t.monaco,a=ya(t,["monaco"]);ft(function(l){return{config:ir(l.config,a),monaco:n}})}function Ya(){var e=Ke(function(t){var n=t.monaco,a=t.isInitialized,l=t.resolve;return{monaco:n,isInitialized:a,resolve:l}});if(!e.isInitialized){if(ft({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),bt(xt);if(window.monaco&&window.monaco.editor)return cr(window.monaco),e.resolve(window.monaco),bt(xt);Ha(Za,Xa)(el)}return bt(xt)}function Za(e){return document.body.appendChild(e)}function Qa(e){var t=document.createElement("script");return e&&(t.src=e),t}function Xa(e){var t=Ke(function(a){var l=a.config,s=a.reject;return{config:l,reject:s}}),n=Qa("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function el(){var e=Ke(function(n){var a=n.config,l=n.resolve,s=n.reject;return{config:a,resolve:l,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){cr(n),e.resolve(n)},function(n){e.reject(n)})}function cr(e){Ke().monaco||ft({monaco:e})}function tl(){return Ke(function(e){var t=e.monaco;return t})}var xt=new Promise(function(e,t){return ft({resolve:e,reject:t})}),ur={config:Ga,init:Ya,__getMonacoInstance:tl};function dr(e,t){for(var n in t)e[n]=t[n];return e}function jt(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var a in t)if(a!=="__source"&&e[a]!==t[a])return!0;return!1}function fr(e,t){var n=t(),a=_e({t:{__:n,u:t}}),l=a[0].t,s=a[1];return We(function(){l.__=n,l.u=t,Nt(l)&&s({t:l})},[e,n,t]),Q(function(){return Nt(l)&&s({t:l}),e(function(){Nt(l)&&s({t:l})})},[e]),n}function Nt(e){var t,n,a=e.u,l=e.__;try{var s=a();return!((t=l)===(n=s)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}function pr(e){e()}function mr(e){return e}function hr(){return[!1,pr]}var vr=We;function Mt(e,t){this.props=e,this.context=t}function pt(e,t){function n(l){var s=this.props.ref,c=s==l.ref;return!c&&s&&(s.call?s(null):s.current=null),t?!t(this.props,l)||!c:jt(this.props,l)}function a(l){return this.shouldComponentUpdate=n,oe(e,l)}return a.displayName="Memo("+(e.displayName||e.name)+")",a.prototype.isReactComponent=!0,a.__f=!0,a}(Mt.prototype=new ae).isPureReactComponent=!0,Mt.prototype.shouldComponentUpdate=function(e,t){return jt(this.props,e)||jt(this.state,t)};var vn=C.__b;C.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),vn&&vn(e)};var nl=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function rl(e){function t(n){var a=dr({},n);return delete a.ref,e(a,n.ref||null)}return t.$$typeof=nl,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var gn=function(e,t){return e==null?null:ie(ie(e).map(t))},al={map:gn,forEach:gn,count:function(e){return e?ie(e).length:0},only:function(e){var t=ie(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:ie},ll=C.__e;C.__e=function(e,t,n,a){if(e.then){for(var l,s=t;s=s.__;)if((l=s.__c)&&l.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),l.__c(e,t)}ll(e,t,n,a)};var yn=C.unmount;function gr(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(a){typeof a.__c=="function"&&a.__c()}),e.__c.__H=null),(e=dr({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(a){return gr(a,t,n)})),e}function yr(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(a){return yr(a,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function et(){this.__u=0,this.o=null,this.__b=null}function _r(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function sl(e){var t,n,a;function l(s){if(t||(t=e()).then(function(c){n=c.default||c},function(c){a=c}),a)throw a;if(!n)throw t;return oe(n,s)}return l.displayName="Lazy",l.__f=!0,l}function Fe(){this.i=null,this.l=null}C.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),yn&&yn(e)},(et.prototype=new ae).__c=function(e,t){var n=t.__c,a=this;a.o==null&&(a.o=[]),a.o.push(n);var l=_r(a.__v),s=!1,c=function(){s||(s=!0,n.__R=null,l?l(o):o())};n.__R=c;var o=function(){if(!--a.__u){if(a.state.__a){var u=a.state.__a;a.__v.__k[0]=yr(u,u.__c.__P,u.__c.__O)}var i;for(a.setState({__a:a.__b=null});i=a.o.pop();)i.forceUpdate()}};a.__u++||32&t.__u||a.setState({__a:a.__b=a.__v.__k[0]}),e.then(c,c)},et.prototype.componentWillUnmount=function(){this.o=[]},et.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),a=this.__v.__k[0].__c;this.__v.__k[0]=gr(this.__b,n,a.__O=a.__P)}this.__b=null}var l=t.__a&&oe(K,null,e.fallback);return l&&(l.__u&=-33),[oe(K,null,t.__a?null:e.children),l]};var _n=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function il(e){return this.getChildContext=function(){return e.context},e.children}function ol(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){Le(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var a=t.__v;a!==null&&!a.__m&&a.__!==null;)a=a.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:a.__m},contains:function(){return!0},insertBefore:function(l,s){this.childNodes.push(l),t.h.insertBefore(l,s)},removeChild:function(l){this.childNodes.splice(this.childNodes.indexOf(l)>>>1,1),t.h.removeChild(l)}}}Le(oe(il,{context:t.context},e.__v),t.v)}function cl(e,t){var n=oe(ol,{__v:e,h:t});return n.containerInfo=t,n}(Fe.prototype=new ae).__a=function(e){var t=this,n=_r(t.__v),a=t.l.get(e);return a[0]++,function(l){var s=function(){t.props.revealOrder?(a.push(l),_n(t,e,a)):l()};n?n(s):s()}},Fe.prototype.render=function(e){this.i=null,this.l=new Map;var t=ie(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Fe.prototype.componentDidUpdate=Fe.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){_n(e,n,t)})};var br=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ul=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,dl=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,fl=/[A-Z0-9]/g,pl=typeof document<"u",ml=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function hl(e,t,n){return t.__k==null&&(t.textContent=""),Le(e,t),typeof n=="function"&&n(),e?e.__c:null}function vl(e,t,n){return Rn(e,t),typeof n=="function"&&n(),e?e.__c:null}ae.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ae.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var bn=C.event;function gl(){}function yl(){return this.cancelBubble}function _l(){return this.defaultPrevented}C.event=function(e){return bn&&(e=bn(e)),e.persist=gl,e.isPropagationStopped=yl,e.isDefaultPrevented=_l,e.nativeEvent=e};var Bt,bl={enumerable:!1,configurable:!0,get:function(){return this.class}},xn=C.vnode;C.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,a=t.type,l={},s=a.indexOf("-")===-1;for(var c in n){var o=n[c];if(!(c==="value"&&"defaultValue"in n&&o==null||pl&&c==="children"&&a==="noscript"||c==="class"||c==="className")){var u=c.toLowerCase();c==="defaultValue"&&"value"in n&&n.value==null?c="value":c==="download"&&o===!0?o="":u==="translate"&&o==="no"?o=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?c="ondblclick":u!=="onchange"||a!=="input"&&a!=="textarea"||ml(n.type)?u==="onfocus"?c="onfocusin":u==="onblur"?c="onfocusout":dl.test(c)&&(c=u):u=c="oninput":s&&ul.test(c)?c=c.replace(fl,"-$&").toLowerCase():o===null&&(o=void 0),u==="oninput"&&l[c=u]&&(c="oninputCapture"),l[c]=o}}a=="select"&&l.multiple&&Array.isArray(l.value)&&(l.value=ie(n.children).forEach(function(i){i.props.selected=l.value.indexOf(i.props.value)!=-1})),a=="select"&&l.defaultValue!=null&&(l.value=ie(n.children).forEach(function(i){i.props.selected=l.multiple?l.defaultValue.indexOf(i.props.value)!=-1:l.defaultValue==i.props.value})),n.class&&!n.className?(l.class=n.class,Object.defineProperty(l,"className",bl)):(n.className&&!n.class||n.class&&n.className)&&(l.class=l.className=n.className),t.props=l}(e),e.$$typeof=br,xn&&xn(e)};var Nn=C.__r;C.__r=function(e){Nn&&Nn(e),Bt=e.__c};var wn=C.diffed;C.diffed=function(e){wn&&wn(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),Bt=null};var xl={ReactCurrentDispatcher:{current:{readContext:function(e){return Bt.__n[e.__c].props.value},useCallback:$e,useContext:Vn,useDebugValue:zn,useDeferredValue:mr,useEffect:Q,useId:Wn,useImperativeHandle:Un,useInsertionEffect:vr,useLayoutEffect:We,useMemo:X,useReducer:Ut,useRef:A,useState:_e,useSyncExternalStore:fr,useTransition:hr}}};function Nl(e){return oe.bind(null,e)}function mt(e){return!!e&&e.$$typeof===br}function wl(e){return mt(e)&&e.type===K}function Cl(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Sl(e){return mt(e)?Fr.apply(null,arguments):e}function Ll(e){return!!e.__k&&(Le(null,e),!0)}function kl(e){return e&&(e.base||e.nodeType===1&&e)||null}var $l=function(e,t){return e(t)},Ol=function(e,t){return e(t)},Il=K,El=mt,Ce={useState:_e,useId:Wn,useReducer:Ut,useEffect:Q,useLayoutEffect:We,useInsertionEffect:vr,useTransition:hr,useDeferredValue:mr,useSyncExternalStore:fr,startTransition:pr,useRef:A,useImperativeHandle:Un,useMemo:X,useCallback:$e,useContext:Vn,useDebugValue:zn,version:"18.3.1",Children:al,render:hl,hydrate:vl,unmountComponentAtNode:Ll,createPortal:cl,createElement:oe,createContext:Pr,createFactory:Nl,cloneElement:Sl,createRef:Er,Fragment:K,isValidElement:mt,isElement:El,isFragment:wl,isMemo:Cl,findDOMNode:kl,Component:ae,PureComponent:Mt,memo:pt,forwardRef:rl,flushSync:Ol,unstable_batchedUpdates:$l,StrictMode:Il,Suspense:et,SuspenseList:Fe,lazy:sl,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:xl},Tl={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},wt=Tl,Dl={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},jl=Dl;function Ml({children:e}){return Ce.createElement("div",{style:jl.container},e)}var Fl=Ml,Pl=Fl;function Al({width:e,height:t,isEditorReady:n,loading:a,_ref:l,className:s,wrapperProps:c}){return Ce.createElement("section",{style:{...wt.wrapper,width:e,height:t},...c},!n&&Ce.createElement(Pl,null,a),Ce.createElement("div",{ref:l,style:{...wt.fullWidth,...!n&&wt.hide},className:s}))}var Rl=Al,xr=pt(Rl);function Jl(e){Q(e,[])}var Nr=Jl;function Ul(e,t,n=!0){let a=A(!0);Q(a.current||!n?()=>{a.current=!1}:e,t)}var te=Ul;function Re(){}function Ne(e,t,n,a){return Vl(e,a)||zl(e,t,n,a)}function Vl(e,t){return e.editor.getModel(wr(e,t))}function zl(e,t,n,a){return e.editor.createModel(t,n,a?wr(e,a):void 0)}function wr(e,t){return e.Uri.parse(t)}function Wl({original:e,modified:t,language:n,originalLanguage:a,modifiedLanguage:l,originalModelPath:s,modifiedModelPath:c,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:u=!1,theme:i="light",loading:f="Loading...",options:d={},height:p="100%",width:m="100%",className:y,wrapperProps:L={},beforeMount:$=Re,onMount:S=Re}){let[b,Y]=_e(!1),[k,x]=_e(!0),P=A(null),j=A(null),re=A(null),U=A(S),O=A($),H=A(!1);Nr(()=>{let M=ur.init();return M.then(B=>(j.current=B)&&x(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>P.current?me():M.cancel()}),te(()=>{if(P.current&&j.current){let M=P.current.getOriginalEditor(),B=Ne(j.current,e||"",a||n||"text",s||"");B!==M.getModel()&&M.setModel(B)}},[s],b),te(()=>{if(P.current&&j.current){let M=P.current.getModifiedEditor(),B=Ne(j.current,t||"",l||n||"text",c||"");B!==M.getModel()&&M.setModel(B)}},[c],b),te(()=>{let M=P.current.getModifiedEditor();M.getOption(j.current.editor.EditorOption.readOnly)?M.setValue(t||""):t!==M.getValue()&&(M.executeEdits("",[{range:M.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),M.pushUndoStop())},[t],b),te(()=>{P.current?.getModel()?.original.setValue(e||"")},[e],b),te(()=>{let{original:M,modified:B}=P.current.getModel();j.current.editor.setModelLanguage(M,a||n||"text"),j.current.editor.setModelLanguage(B,l||n||"text")},[n,a,l],b),te(()=>{j.current?.editor.setTheme(i)},[i],b),te(()=>{P.current?.updateOptions(d)},[d],b);let ee=$e(()=>{if(!j.current)return;O.current(j.current);let M=Ne(j.current,e||"",a||n||"text",s||""),B=Ne(j.current,t||"",l||n||"text",c||"");P.current?.setModel({original:M,modified:B})},[n,t,l,e,a,s,c]),xe=$e(()=>{!H.current&&re.current&&(P.current=j.current.editor.createDiffEditor(re.current,{automaticLayout:!0,...d}),ee(),j.current?.editor.setTheme(i),Y(!0),H.current=!0)},[d,i,ee]);Q(()=>{b&&U.current(P.current,j.current)},[b]),Q(()=>{!k&&!b&&xe()},[k,b,xe]);function me(){let M=P.current?.getModel();o||M?.original?.dispose(),u||M?.modified?.dispose(),P.current?.dispose()}return Ce.createElement(xr,{width:m,height:p,isEditorReady:b,loading:f,_ref:re,className:y,wrapperProps:L})}var Kl=Wl;pt(Kl);function Hl(e){let t=A();return Q(()=>{t.current=e},[e]),t.current}var ql=Hl,Ze=new Map;function Bl({defaultValue:e,defaultLanguage:t,defaultPath:n,value:a,language:l,path:s,theme:c="light",line:o,loading:u="Loading...",options:i={},overrideServices:f={},saveViewState:d=!0,keepCurrentModel:p=!1,width:m="100%",height:y="100%",className:L,wrapperProps:$={},beforeMount:S=Re,onMount:b=Re,onChange:Y,onValidate:k=Re}){let[x,P]=_e(!1),[j,re]=_e(!0),U=A(null),O=A(null),H=A(null),ee=A(b),xe=A(S),me=A(),M=A(a),B=ql(s),He=A(!1),De=A(!1);Nr(()=>{let v=ur.init();return v.then(g=>(U.current=g)&&re(!1)).catch(g=>g?.type!=="cancelation"&&console.error("Monaco initialization: error:",g)),()=>O.current?h():v.cancel()}),te(()=>{let v=Ne(U.current,e||a||"",t||l||"",s||n||"");v!==O.current?.getModel()&&(d&&Ze.set(B,O.current?.saveViewState()),O.current?.setModel(v),d&&O.current?.restoreViewState(Ze.get(s)))},[s],x),te(()=>{O.current?.updateOptions(i)},[i],x),te(()=>{!O.current||a===void 0||(O.current.getOption(U.current.editor.EditorOption.readOnly)?O.current.setValue(a):a!==O.current.getValue()&&(De.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),O.current.pushUndoStop(),De.current=!1))},[a],x),te(()=>{let v=O.current?.getModel();v&&l&&U.current?.editor.setModelLanguage(v,l)},[l],x),te(()=>{o!==void 0&&O.current?.revealLine(o)},[o],x),te(()=>{U.current?.editor.setTheme(c)},[c],x);let qe=$e(()=>{if(!(!H.current||!U.current)&&!He.current){xe.current(U.current);let v=s||n,g=Ne(U.current,a||e||"",t||l||"",v||"");O.current=U.current?.editor.create(H.current,{model:g,automaticLayout:!0,...i},f),d&&O.current.restoreViewState(Ze.get(v)),U.current.editor.setTheme(c),o!==void 0&&O.current.revealLine(o),P(!0),He.current=!0}},[e,t,n,a,l,s,i,f,d,c,o]);Q(()=>{x&&ee.current(O.current,U.current)},[x]),Q(()=>{!j&&!x&&qe()},[j,x,qe]),M.current=a,Q(()=>{x&&Y&&(me.current?.dispose(),me.current=O.current?.onDidChangeModelContent(v=>{De.current||Y(O.current.getValue(),v)}))},[x,Y]),Q(()=>{if(x){let v=U.current.editor.onDidChangeMarkers(g=>{let N=O.current.getModel()?.uri;if(N&&g.find(I=>I.path===N.path)){let I=U.current.editor.getModelMarkers({resource:N});k?.(I)}});return()=>{v?.dispose()}}return()=>{}},[x,k]);function h(){me.current?.dispose(),p?d&&Ze.set(s,O.current.saveViewState()):O.current.getModel()?.dispose(),O.current.dispose()}return Ce.createElement(xr,{width:m,height:y,isEditorReady:x,loading:u,_ref:H,className:L,wrapperProps:$})}var Gl=Bl,Yl=pt(Gl),Cr=Yl;function Zl({title:e="JSON Editor",value:t,onChange:n,placeholder:a="{}",readOnly:l=!1,height:s="400px"}){const c=A(null),o=A(null),u=T(!0),i=T(""),f=T(!1),d=W(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0),p=W(()=>d.value?"Cmd":"Ctrl"),m=(k,x)=>k==="opacity"&&typeof x=="number"?parseFloat(x.toFixed(1)):x,y=W(()=>{try{return t==null?"":JSON.stringify(t,m,2).replace(/"opacity":\s*(\d+)(?!\.)/g,'"opacity": $1.0')}catch{return""}}),L=(k,x)=>{c.current=k,o.current=x,x.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!1,schemas:[],enableSchemaRequest:!1}),k.updateOptions({minimap:{enabled:!1},fontSize:12,tabSize:2,insertSpaces:!0,wordWrap:"on",lineNumbers:"on",folding:!0,bracketPairColorization:{enabled:!0},autoIndent:"full",formatOnPaste:!0,formatOnType:!0}),k.addCommand(x.KeyMod.CtrlCmd|x.KeyCode.KeyS,()=>{S()}),k.addCommand(x.KeyMod.CtrlCmd|x.KeyMod.Shift|x.KeyCode.KeyF,()=>{b()})},$=k=>{if(!(l||!k))try{const x=JSON.parse(k);u.value=!0,i.value="",n(x)}catch(x){u.value=!1,i.value=x instanceof Error?x.message:"Invalid JSON"}},S=()=>{if(!c.current||l)return;const k=c.current.getValue();$(k)},b=async()=>{if(!(!c.current||!o.current||l)){f.value=!0;try{const k=c.current.getValue(),x=JSON.parse(k),j=JSON.stringify(x,m,2).replace(/"opacity":\s*(\d+)(?!\.)/g,'"opacity": $1.0');c.current.setValue(j),n(x),u.value=!0,i.value=""}catch{await c.current.getAction("editor.action.formatDocument")?.run()}finally{f.value=!1}}};return r("div",{className:"flex flex-col h-full min-h-0",children:[r("div",{className:"flex flex-wrap gap-2 mb-3 items-center flex-shrink-0",children:[r("span",{className:"text-slate-500",children:e}),r("div",{className:"ml-auto flex gap-2",children:!l&&r(K,{children:[r("button",{className:"btn small",onClick:()=>{if(!c.current)return;const k=c.current.getValue();try{return JSON.parse(k),u.value=!0,i.value="",!0}catch(x){return u.value=!1,i.value=x instanceof Error?x.message:"Invalid JSON",!1}},title:"Validate JSON",children:"Validate"}),r("button",{className:"btn small",onClick:b,disabled:f.value,title:`Format JSON (${p.value}+Shift+F)`,children:f.value?"Formatting...":"Format"})]})})]}),!u.value&&i.value&&r("div",{className:"bg-red-900/30 border border-red-500/50 rounded p-2 mb-2 flex-shrink-0",children:r("div",{className:"text-red-300 text-xs",children:[r("span",{className:"font-medium",children:"JSON Error:"})," ",i.value]})}),u.value&&!l&&r("div",{className:"bg-green-900/30 border border-green-500/50 rounded p-2 mb-2 flex-shrink-0",children:r("div",{className:"text-green-300 text-xs",children:["✓ Valid JSON - Press ",p.value,"+S to save changes"]})}),r("div",{className:"flex-1 min-h-0 border border-slate-600 rounded overflow-hidden",children:r(Cr,{height:s,language:"json",theme:"vs-dark",value:y.value||a,onChange:$,onMount:L,options:{readOnly:l,contextmenu:!0,automaticLayout:!0},loading:r("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Loading JSON Editor..."})})}),r("div",{className:"text-xs text-slate-500 mt-2 flex-shrink-0",children:l?"Read-only JSON view":r(K,{children:[r("span",{className:"font-medium",children:"Shortcuts:"})," ",p.value,"+S to save • ",p.value,"+Shift+F to format • Auto-validation enabled"]})})]})}const tt=e=>{const t=[],n=[];return e.presentation?["single","multiple"].includes(e.presentation)||t.push('presentation must be "single" or "multiple"'):t.push("presentation field is required"),e.items?Array.isArray(e.items)?e.items.length===0?n.push("items array is empty - feature will not be functional"):e.items.forEach((a,l)=>{const s=Ql(a);t.push(...s.errors.map(c=>`Item ${l+1}: ${c}`)),n.push(...s.warnings.map(c=>`Item ${l+1}: ${c}`))}):t.push("items must be an array"):t.push("items field is required"),{valid:t.length===0,errors:t,warnings:n}},Ql=e=>{const t=[],n=[];return e.id?typeof e.id!="string"?t.push("id must be a string"):e.id.trim()===""&&t.push("id cannot be empty or whitespace only"):t.push("id is required"),e.name?typeof e.name!="string"?t.push("name must be a string"):e.name.trim()===""&&t.push("name cannot be empty or whitespace only"):t.push("name is required"),e.layersIds?Array.isArray(e.layersIds)?e.layersIds.length===0?t.push("layersIds must contain at least one layer ID"):e.layersIds.forEach((a,l)=>{(!a||typeof a!="string"||a.trim()==="")&&t.push(`layersIds[${l}] must be a non-empty string`)}):t.push("layersIds must be an array"):t.push("layersIds is required"),e.showLegend!==void 0&&typeof e.showLegend!="boolean"&&t.push("showLegend must be a boolean"),e.legendUrl!==void 0&&(typeof e.legendUrl!="string"?t.push("legendUrl must be a string"):e.legendUrl.trim()===""&&n.push("legendUrl is empty - consider removing it")),e.legendDescription!==void 0&&(typeof e.legendDescription!="string"?t.push("legendDescription must be a string"):e.legendDescription.trim()===""&&n.push("legendDescription is empty - consider removing it")),{valid:t.length===0,errors:t,warnings:n}},Xl=e=>{const t=[],n=[];return e.type?["wms","tiled","mapImage","portalItem","vectorTiled","feature"].includes(e.type)||t.push("type must be one of: wms, tiled, mapImage, portalItem, vectorTiled, feature"):t.push("type is required"),e.source?typeof e.source!="string"?t.push("source must be a string"):e.source.trim()===""&&t.push("source cannot be empty"):t.push("source is required"),e.zIndex!==void 0&&(typeof e.zIndex!="number"?t.push("zIndex must be a number"):Number.isInteger(e.zIndex)||t.push("zIndex must be an integer")),e.refreshInterval!==void 0&&(typeof e.refreshInterval!="number"?t.push("refreshInterval must be a number"):e.refreshInterval<0?t.push("refreshInterval must be non-negative"):Number.isInteger(e.refreshInterval)||t.push("refreshInterval must be an integer (milliseconds)")),e.options?.opacity!==void 0&&(typeof e.options.opacity!="number"?t.push("opacity (in options) must be a number"):(e.options.opacity<0||e.options.opacity>1)&&t.push("opacity must be between 0.0 and 1.0")),{valid:t.length===0,errors:t,warnings:n}},Ft=e=>{const t=[],n=[];return e.id?typeof e.id!="string"?t.push("id must be a string"):e.id.trim()===""&&t.push("id cannot be empty"):t.push("id is required"),e.layers?Array.isArray(e.layers)?e.layers.length===0?t.push("layers array cannot be empty"):e.layers.forEach((a,l)=>{const s=Xl(a);t.push(...s.errors.map(c=>`Layer ${l+1}: ${c}`)),n.push(...s.warnings.map(c=>`Layer ${l+1}: ${c}`))}):t.push("layers must be an array"):t.push("layers field is required"),{valid:t.length===0,errors:t,warnings:n}};function ye({title:e,defaultOpen:t=!0,badge:n,badgeColor:a="bg-slate-600",children:l,actions:s}){const c=T(t);return r("div",{className:"border border-slate-700 rounded-lg overflow-hidden mb-3",children:[r("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-800 cursor-pointer hover:bg-slate-750 select-none",onClick:()=>c.value=!c.value,children:[r("span",{className:"text-slate-400 text-xs w-4",children:c.value?"▼":"▶"}),r("span",{className:"font-medium text-sm text-slate-200 flex-1",children:e}),n!==void 0&&r("span",{className:`text-xs px-2 py-0.5 rounded ${a}`,children:n}),s&&r("div",{className:"flex gap-1",onClick:o=>o.stopPropagation(),children:s})]}),c.value&&r("div",{className:"p-3 bg-slate-900/50",children:l})]})}function Ct({label:e,sublabel:t,isSelected:n,level:a=0,onClick:l,onDelete:s,badges:c=[],isDragging:o=!1,children:u}){const i=T(!1),f=!!u;return r("div",{children:[r("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-all ${n?"bg-blue-600 text-white":"hover:bg-slate-700 text-slate-300"} ${o?"opacity-50":""}`,style:{paddingLeft:`${8+a*16}px`},onClick:l,children:[f&&r("span",{className:"text-xs w-4 text-slate-400 hover:text-white",onClick:d=>{d.stopPropagation(),i.value=!i.value},children:i.value?"▼":"▶"}),!f&&r("span",{className:"w-4"}),r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"text-sm truncate",children:e||"(unnamed)"}),t&&r("div",{className:"text-xs text-slate-500 truncate",children:t})]}),c.map((d,p)=>r("span",{className:`text-xs px-1.5 py-0.5 rounded ${d.color}`,children:d.text},p)),s&&r("button",{className:"text-red-400 hover:text-red-300 text-sm px-1 opacity-0 group-hover:opacity-100",onClick:d=>{d.stopPropagation(),s()},title:"Delete",children:"×"})]}),f&&i.value&&r("div",{className:"ml-2",children:u})]})}function es({selection:e,onSelectFeature:t,onSelectLayer:n,onNewFeature:a}){const l=W(()=>_.value.weatherFeatures||[]),s=W(()=>_.value.features||[]),c=W(()=>_.value.layers||[]),o=i=>i.name?.trim()?i.name:i.presentation==="single"&&i.items?.[0]?.name?.trim()?i.items[0].name:i.id||"Unnamed",u=i=>{const f=[];if(i.id?.trim()&&f.push(i.id),i.items?.forEach(L=>{L.id?.trim()&&f.push(L.id)}),f.length===0)return{percent:100,allLocked:!1};f.filter(L=>Oe(L));const d=f.filter(L=>!Oe(L));if(d.length===0)return{percent:100,allLocked:!0};let p=0,m=0;return d.forEach(L=>{J.forEach($=>{m++,_.value.intl?.[$]?.[L]?.trim()&&p++})}),{percent:m>0?Math.round(p/m*100):100,allLocked:!1}};return r("div",{className:"w-full h-full bg-slate-800 border border-slate-700 rounded-xl p-3 flex flex-col overflow-hidden",children:[r("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-slate-700",children:[r("h2",{className:"text-sm font-medium text-slate-300",children:"Navigator"}),r("button",{className:"btn tiny primary",onClick:()=>a("weatherFeatures"),title:"New Weather Feature",children:"+ Feature"})]}),r("div",{className:"flex-1 overflow-auto space-y-1",children:[r(ye,{title:"Weather Features",badge:l.value.length,badgeColor:"bg-blue-600",actions:r("button",{className:"btn tiny ghost",onClick:i=>{i.stopPropagation(),a("weatherFeatures")},title:"Add weather feature",children:"+"}),children:l.value.length===0?r("div",{className:"text-slate-500 text-xs text-center py-2",children:"No weather features"}):r("div",{className:"space-y-0.5",children:l.value.map((i,f)=>{const d=e?.type==="feature"&&e.featureType==="weatherFeatures"&&e.index===f,{percent:p,allLocked:m}=u(i);return r(Ct,{label:o(i),sublabel:`${i.items?.length||0} item(s) • ${i.presentation}`,isSelected:d,onClick:()=>t("weatherFeatures",f),badges:[m?{text:"🔒",color:"bg-slate-600"}:{text:`${p}%`,color:p===100?"bg-green-600":p>50?"bg-yellow-600":"bg-red-600"}]},`weather-${f}`)})})}),r(ye,{title:"General Features",badge:s.value.length,badgeColor:"bg-purple-600",actions:r("button",{className:"btn tiny ghost",onClick:i=>{i.stopPropagation(),a("features")},title:"Add general feature",children:"+"}),children:s.value.length===0?r("div",{className:"text-slate-500 text-xs text-center py-2",children:"No general features"}):r("div",{className:"space-y-0.5",children:s.value.map((i,f)=>{const d=e?.type==="feature"&&e.featureType==="features"&&e.index===f,{percent:p,allLocked:m}=u(i);return r(Ct,{label:o(i),sublabel:`${i.items?.length||0} item(s) • ${i.presentation}`,isSelected:d,onClick:()=>t("features",f),badges:[m?{text:"🔒",color:"bg-slate-600"}:{text:`${p}%`,color:p===100?"bg-green-600":p>50?"bg-yellow-600":"bg-red-600"}]},`general-${f}`)})})}),r(ye,{title:"Layers",badge:c.value.length,badgeColor:"bg-emerald-600",children:c.value.length===0?r("div",{className:"text-slate-500 text-xs text-center py-2",children:"No layers defined"}):r("div",{className:"space-y-0.5",children:c.value.map((i,f)=>{const d=e?.type==="layer"&&e.index===f,p=Ht(_.value,i.id),m=lt(i.id);return r(Ct,{label:i.id,sublabel:`${i.layers?.length||0} sublayer(s)`,isSelected:d,onClick:()=>n(f),badges:[...p.length>0?[{text:`${p.length} ref`,color:"bg-slate-600"}]:[],...p.length===0&&!m?[{text:"unused",color:"bg-orange-600"}]:[],...m?[{text:"code",color:"bg-blue-600"}]:[]]},`layer-${f}`)})})})]})]})}function Sr({validation:e,className:t=""}){return!e||e.errors.length===0&&e.warnings.length===0?null:r("div",{className:`space-y-2 ${t}`,children:[e.errors.length>0&&r("div",{className:"bg-red-900/20 border border-red-700/30 rounded p-2",children:[r("div",{className:"flex items-center gap-2 text-red-400 text-sm font-medium mb-1",children:[r("span",{children:"❌"}),r("span",{children:["Errors (",e.errors.length,")"]})]}),r("div",{className:"space-y-1",children:e.errors.map((n,a)=>r("div",{className:"text-red-300 text-xs",children:["• ",n]},a))})]}),e.warnings.length>0&&r("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded p-2",children:[r("div",{className:"flex items-center gap-2 text-yellow-400 text-sm font-medium mb-1",children:[r("span",{children:"⚠️"}),r("span",{children:["Warnings (",e.warnings.length,")"]})]}),r("div",{className:"space-y-1",children:e.warnings.map((n,a)=>r("div",{className:"text-yellow-300 text-xs",children:["• ",n]},a))})]})]})}function ts({layers:e,excludeIds:t=[],data:n,onSelect:a,onCreateNew:l}){const s=T(!1),c=T(""),o=W(()=>e.filter(m=>!t.includes(m.id))),u=W(()=>{const m=c.value.toLowerCase().trim();return m?o.value.filter(y=>{const L=y.id.toLowerCase().includes(m),$=i(y.id)?.toLowerCase().includes(m),S=y.layers?.some(b=>b.source?.toLowerCase().includes(m)||b.type?.toLowerCase().includes(m));return L||$||S}):o.value}),i=m=>n.intl?.en?.[m]||null,f=m=>!m.layers||m.layers.length===0?"No sublayers":[...new Set(m.layers.map(L=>L.type.toUpperCase()))].join(", "),d=m=>!m.layers||m.layers.length===0?null:m.layers[0].source||null,p=m=>Ht(n,m);return r(K,{children:[r("div",{className:"flex gap-2",children:[r("button",{type:"button",className:"btn small flex-1",onClick:()=>s.value=!0,disabled:o.value.length===0,children:o.value.length===0?"No layers available":`Pick from ${o.value.length} layer(s)...`}),r("button",{type:"button",className:"btn small primary",onClick:l,children:"+ New Layer"})]}),s.value&&r("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>s.value=!1,children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[600px] max-w-[90vw] max-h-[80vh] flex flex-col shadow-2xl",onClick:m=>m.stopPropagation(),children:[r("div",{className:"p-4 border-b border-slate-700",children:[r("div",{className:"flex items-center justify-between mb-3",children:[r("h3",{className:"text-lg font-medium text-white",children:"Select Layer"}),r("button",{className:"text-slate-400 hover:text-white text-xl leading-none",onClick:()=>s.value=!1,children:"×"})]}),r("input",{type:"text",className:"form-input w-full",placeholder:"Search by ID, name, type, or source...",value:c.value,onInput:m=>c.value=m.target.value,autoFocus:!0})]}),r("div",{className:"flex-1 overflow-auto p-2",children:u.value.length===0?r("div",{className:"p-8 text-center text-slate-500",children:c.value?`No layers match "${c.value}"`:"No layers available"}):r("div",{className:"space-y-1",children:u.value.map(m=>{const y=i(m.id),L=d(m),$=p(m.id);return r("button",{type:"button",className:"w-full px-3 py-2.5 text-left hover:bg-slate-700 rounded-lg transition-colors",onClick:()=>{a(m.id),s.value=!1,c.value=""},children:[r("div",{className:"flex items-center justify-between gap-2 mb-1",children:[r("span",{className:"font-mono text-sm text-blue-400 truncate",children:m.id}),r("span",{className:"text-xs px-1.5 py-0.5 bg-slate-600 rounded text-slate-300 flex-shrink-0",children:f(m)})]}),y&&r("div",{className:"text-sm text-white mb-1",children:y}),L&&r("div",{className:"text-xs text-slate-500 truncate mb-1",children:L}),r("div",{className:"text-xs",children:$.length===0?r("span",{className:"text-orange-400",children:"Not used by any feature"}):r("span",{className:"text-green-400",children:["Used by: ",$.map(S=>S.featureName||S.itemName).slice(0,3).join(", "),$.length>3&&` +${$.length-3} more`]})})]},m.id)})})}),r("div",{className:"p-3 border-t border-slate-700 flex items-center justify-between",children:[r("span",{className:"text-xs text-slate-500",children:[u.value.length," of ",o.value.length," layer(s)"]}),r("button",{className:"btn small primary",onClick:()=>{s.value=!1,l()},children:"+ Create New Layer"})]})]})})]})}const Cn=["opacity","layerNames","layerId"];function ns({value:e,onChange:t,className:n=""}){const a=Math.round(e*100);return r("div",{className:`flex items-center gap-2 ${n}`,children:[r("input",{type:"range",min:"0",max:"100",value:a,onChange:l=>{const s=parseInt(l.target.value)/100;t(Math.round(s*100)/100)},className:"flex-1 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-blue-500"}),r("span",{className:"text-xs text-slate-400 w-10 text-right",children:[a,"%"]})]})}function rs({options:e,onChange:t}){const n=Object.entries(e).filter(([o])=>!Cn.includes(o)),a=()=>{const o=`param_${Date.now()}`;t({...e,[o]:""})},l=(o,u)=>{if(u===o||Cn.includes(u))return;const i={...e},f=i[o];delete i[o],i[u]=f,t(i)},s=(o,u)=>{let i=u;u==="true"?i=!0:u==="false"?i=!1:!isNaN(Number(u))&&u.trim()!==""&&(i=Number(u)),t({...e,[o]:i})},c=o=>{const u={...e};delete u[o],t(u)};return r("div",{className:"form-group mt-3",children:[r("div",{className:"flex items-center justify-between mb-2",children:[r("label",{className:"form-label text-xs mb-0",children:"Custom Options"}),r("button",{className:"btn tiny",onClick:a,children:"+ Add"})]}),n.length===0?r("div",{className:"text-xs text-slate-500 italic",children:"No custom options"}):r("div",{className:"space-y-1",children:n.map(([o,u])=>r("div",{className:"flex gap-1 items-center",children:[r("input",{type:"text",className:"form-input text-xs flex-1",value:o,onChange:i=>l(o,i.target.value),placeholder:"key"}),r("input",{type:"text",className:"form-input text-xs flex-1",value:String(u),onChange:i=>s(o,i.target.value),placeholder:"value"}),r("button",{className:"btn tiny danger",onClick:()=>c(o),children:"×"})]},o))})]})}const ot=[{id:"wms",name:"WMS Layer",type:"wms",description:"Web Map Service"},{id:"arcgis-feature",name:"ArcGIS Feature",type:"feature",description:"Feature Service"},{id:"arcgis-map",name:"ArcGIS Map Image",type:"mapImage",description:"Map Server"},{id:"portal",name:"Portal Item",type:"portalItem",description:"ArcGIS Online"},{id:"tiled",name:"Tiled Layer",type:"tiled",description:"Tile Service"},{id:"vector",name:"Vector Tiles",type:"vectorTiled",description:"Vector Tile Service"}];function as({layer:e,onUpdate:t,onUpdateSublayer:n}){const a=W(()=>Ft(e)),l=W(()=>Ht(_.value,e.id));return r("div",{className:"space-y-4",children:[r(Sr,{validation:a.value,className:"mb-4"}),r(ye,{title:"Layer Information",defaultOpen:!0,children:[r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Layer ID"}),r("input",{type:"text",className:"form-input",value:e.id||"",onChange:s=>t({id:s.target.value}),placeholder:"unique_layer_id"})]}),e.id&&r("div",{className:"mt-3",children:[r("label",{className:"form-label",children:"Usage"}),r("div",{className:"text-sm text-slate-400",children:l.value.length===0?r("span",{className:"text-orange-400",children:"Not referenced by any feature"}):r("div",{className:"space-y-1",children:l.value.map((s,c)=>r("div",{children:[s.featureName," → ",s.itemName]},c))})})]}),r("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Category"}),r("input",{type:"text",className:"form-input",value:e.category||"",onChange:s=>t({category:s.target.value||void 0}),placeholder:"e.g. weather"})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Copyright"}),r("input",{type:"text",className:"form-input",value:e.copyright||"",onChange:s=>t({copyright:s.target.value||void 0}),placeholder:"e.g. SMHI"})]})]}),r("div",{className:"form-group mt-3",children:[r("label",{className:"form-label",children:"Country Restriction"}),r("div",{className:"flex flex-wrap gap-1 mb-2",children:[(e.country||[]).map((s,c)=>r("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-700 rounded text-xs",children:[s,r("button",{className:"text-red-400 hover:text-red-300",onClick:()=>{const o=[...e.country||[]];o.splice(c,1),t({country:o.length>0?o:void 0})},children:"×"})]},c)),(!e.country||e.country.length===0)&&r("span",{className:"text-slate-500 text-xs",children:"No restriction (all countries)"})]}),r("div",{className:"flex gap-1",children:["no","se","dk"].map(s=>r("button",{className:`btn tiny ${(e.country||[]).includes(s)?"primary":""}`,onClick:()=>{const c=e.country||[];if(c.includes(s)){const o=c.filter(u=>u!==s);t({country:o.length>0?o:void 0})}else t({country:[...c,s]})},children:s.toUpperCase()},s))})]})]}),r(ye,{title:"Sublayers",badge:e.layers?.length||0,actions:r("div",{className:"flex gap-1",children:ot.slice(0,3).map(s=>r("button",{className:"btn tiny",onClick:()=>{const c=[...e.layers||[]];c.push(de(s.type)),t({layers:c})},title:`Add ${s.name}`,children:["+ ",s.type.toUpperCase()]},s.id))}),children:[(e.layers||[]).map((s,c)=>r("div",{className:"border border-slate-600 rounded-lg p-3 mb-3 bg-slate-800/50",children:[r("div",{className:"flex items-center justify-between mb-3",children:[r("span",{className:"text-sm font-medium text-slate-300",children:["#",c+1," ",s.type.toUpperCase()]}),r("button",{className:"btn tiny danger",onClick:()=>{const o=[...e.layers||[]];o.splice(c,1),t({layers:o})},children:"Remove"})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Type"}),r("select",{className:"form-select text-sm",value:s.type,onChange:o=>{const u=o.target.value,i=de(u);n(c,{type:u,options:{opacity:s.options?.opacity||1,...u==="wms"?{layerNames:i.options?.layerNames}:{},...u==="portalItem"?{layerId:i.options?.layerId}:{}}})},children:rr.map(o=>r("option",{value:o,children:o.toUpperCase()},o))})]}),r("div",{className:"form-group mt-3",children:[r("label",{className:"form-label text-xs",children:"Opacity"}),r(ns,{value:s.options?.opacity??1,onChange:o=>{n(c,{options:{...s.options,opacity:o}})}})]}),r("div",{className:"form-group mt-3",children:[r("label",{className:"form-label text-xs",children:"Source URL/ID"}),r("input",{type:"text",className:"form-input text-sm",value:s.source||"",onChange:o=>n(c,{source:o.target.value}),placeholder:s.type==="portalItem"?"Portal Item ID":s.type==="wms"?"https://example.com/wms":"https://example.com/service"})]}),r("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Z-Index"}),r("input",{type:"number",className:"form-input text-sm",value:s.zIndex||0,onChange:o=>n(c,{zIndex:parseInt(o.target.value)||0})})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Refresh (ms)"}),r("input",{type:"number",className:"form-input text-sm",value:s.refreshInterval||"",onChange:o=>{const u=o.target.value;n(c,{refreshInterval:u?parseInt(u):void 0})},placeholder:"60000"})]})]}),s.type==="wms"&&r("div",{className:"form-group mt-3",children:[r("label",{className:"form-label text-xs",children:["WMS Layer Names ",r("span",{className:"text-red-400",children:"*"})]}),r("div",{className:"space-y-1",children:[(s.options?.layerNames||[]).map((o,u)=>r("div",{className:"flex gap-1",children:[r("input",{type:"text",className:"form-input text-sm flex-1",value:o,onChange:i=>{const f=[...s.options?.layerNames||[]];f[u]=i.target.value,n(c,{options:{...s.options,layerNames:f}})}}),(s.options?.layerNames?.length||0)>1&&r("button",{className:"btn tiny danger",onClick:()=>{const i=[...s.options?.layerNames||[]];i.splice(u,1),n(c,{options:{...s.options,layerNames:i}})},children:"×"})]},u)),r("button",{className:"btn tiny",onClick:()=>{const o=[...s.options?.layerNames||[],""];n(c,{options:{...s.options,layerNames:o}})},children:"+ Add Layer Name"})]})]}),s.type==="portalItem"&&r("div",{className:"form-group mt-3",children:[r("label",{className:"form-label text-xs",children:"Portal Layer ID"}),r("input",{type:"number",className:"form-input text-sm",value:s.options?.layerId??0,onChange:o=>{n(c,{options:{...s.options,layerId:parseInt(o.target.value)||0}})}})]}),r(rs,{options:s.options||{},onChange:o=>n(c,{options:o})})]},c)),(e.layers?.length||0)===0&&r("div",{className:"text-center py-4 border border-dashed border-slate-600 rounded",children:[r("p",{className:"text-slate-500 text-sm mb-3",children:"No sublayers. Choose a template:"}),r("div",{className:"flex flex-wrap gap-2 justify-center",children:ot.map(s=>r("button",{className:"btn small",onClick:()=>{t({layers:[de(s.type)]})},children:s.name},s.id))})]})]})]})}const Sn=["opacity","layerNames","layerId"];function ls({layerId:e,onClose:t}){const n=T(0),a=W(()=>e?ha(e):null);if(Q(()=>{n.value=0},[e]),!e||!a.value)return null;const l=a.value,s=(u,i)=>{const f=[...l.layers||[]];f[u]={...f[u],...i},_t(e,{layers:f})},c=u=>{const i=[...l.layers||[],de(u)];_t(e,{layers:i}),n.value=i.length-1},o=u=>{const i=l.layers.filter((f,d)=>d!==u);_t(e,{layers:i}),n.value===u&&(n.value=i.length>0?0:null)};return r("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[650px] max-w-[95vw] max-h-[90vh] flex flex-col shadow-2xl",onClick:u=>u.stopPropagation(),children:[r("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[r("div",{children:[r("h3",{className:"text-lg font-medium text-white",children:"Edit Layer"}),r("div",{className:"text-sm text-blue-400",children:e})]}),r("button",{className:"text-slate-400 hover:text-white text-xl leading-none px-2",onClick:t,children:"×"})]}),r("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center justify-between",children:[r("label",{className:"form-label text-sm",children:["Sublayers (",l.layers?.length||0,")"]}),r("div",{className:"flex gap-1",children:ot.slice(0,3).map(u=>r("button",{type:"button",className:"text-[10px] px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-slate-300",onClick:()=>c(u.type),title:u.description,children:["+ ",u.type.toUpperCase()]},u.type))})]}),(l.layers||[]).map((u,i)=>r(ss,{index:i,sublayer:u,isExpanded:n.value===i,onToggle:()=>n.value=n.value===i?null:i,onUpdate:f=>s(i,f),onRemove:()=>o(i)},i)),(l.layers?.length||0)===0&&r("div",{className:"text-center py-6 border border-dashed border-slate-600 rounded-lg",children:[r("p",{className:"text-slate-500 text-sm mb-2",children:"No sublayers defined"}),r("button",{className:"btn small primary",onClick:()=>c("wms"),children:"Add First Sublayer"})]})]})}),r("div",{className:"p-4 border-t border-slate-700 flex gap-2 justify-end",children:r("button",{className:"btn primary",onClick:t,children:"Done"})})]})})}function ss({index:e,sublayer:t,isExpanded:n,onToggle:a,onUpdate:l,onRemove:s}){const c=(o,u)=>{l({options:{...t.options,[o]:u}})};return r("div",{className:"border border-slate-700 rounded-lg bg-slate-900/50 overflow-hidden",children:[r("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-slate-700/50 transition-colors",onClick:a,children:[r("span",{className:"font-medium text-sm text-slate-300 flex items-center gap-2",children:[r("span",{className:"text-slate-500",children:["#",e+1]}),r("span",{className:"uppercase text-blue-400",children:t.type}),t.source&&r("span",{className:"text-slate-500 text-xs truncate max-w-[200px]",children:t.source.length>40?"..."+t.source.slice(-40):t.source})]}),r("span",{className:"text-slate-500",children:n?"▼":"▶"})]}),n&&r("div",{className:"p-3 pt-0 space-y-3 border-t border-slate-700",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Type"}),r("select",{className:"form-select",value:t.type,onChange:o=>{const u=o.target.value,i=de(u);l({type:u,options:{opacity:t.options?.opacity||1,...u==="wms"?{layerNames:i.options?.layerNames}:{},...u==="portalItem"?{layerId:i.options?.layerId}:{}}})},children:rr.map(o=>r("option",{value:o,children:o.toUpperCase()},o))})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:["Source URL/ID ",r("span",{className:"text-red-400",children:"*"})]}),r("input",{type:"text",className:"form-input",value:t.source||"",onChange:o=>l({source:o.target.value}),placeholder:t.type==="portalItem"?"Portal Item ID":"https://..."})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Opacity"}),r("div",{className:"flex items-center gap-3",children:[r("input",{type:"range",min:"0",max:"100",value:Math.round((t.options?.opacity??1)*100),onChange:o=>{const u=parseInt(o.target.value)/100;c("opacity",Math.round(u*100)/100)},className:"flex-1 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-blue-500"}),r("span",{className:"text-sm text-slate-400 w-12 text-right",children:[Math.round((t.options?.opacity??1)*100),"%"]})]})]}),r("div",{className:"grid grid-cols-2 gap-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Z-Index"}),r("input",{type:"number",className:"form-input",value:t.zIndex||0,onChange:o=>l({zIndex:parseInt(o.target.value)||0})})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Refresh (ms)"}),r("input",{type:"number",className:"form-input",value:t.refreshInterval||"",onChange:o=>{const u=o.target.value;l({refreshInterval:u?parseInt(u):void 0})},placeholder:"60000"})]})]}),t.type==="wms"&&r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:["WMS Layer Names ",r("span",{className:"text-red-400",children:"*"})]}),r("div",{className:"space-y-1",children:[(t.options?.layerNames||[]).map((o,u)=>r("div",{className:"flex gap-1",children:[r("input",{type:"text",className:"form-input text-sm flex-1",value:o,onChange:i=>{const f=[...t.options?.layerNames||[]];f[u]=i.target.value,c("layerNames",f)},placeholder:"layer_name"}),(t.options?.layerNames?.length||0)>1&&r("button",{type:"button",className:"text-red-400 hover:text-red-300 px-2",onClick:()=>{const i=[...t.options?.layerNames||[]];i.splice(u,1),c("layerNames",i)},children:"×"})]},u)),r("button",{type:"button",className:"text-xs text-blue-400 hover:text-blue-300",onClick:()=>{const o=[...t.options?.layerNames||[],""];c("layerNames",o)},children:"+ Add Layer Name"})]})]}),t.type==="portalItem"&&r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Portal Layer ID"}),r("input",{type:"number",className:"form-input",value:t.options?.layerId??0,onChange:o=>{c("layerId",parseInt(o.target.value)||0)}})]}),r(is,{options:t.options||{},onChange:o=>l({options:o})}),r("div",{className:"flex justify-end pt-2 border-t border-slate-700",children:r("button",{type:"button",className:"text-xs text-red-400 hover:text-red-300",onClick:s,children:"Remove Sublayer"})})]})]})}function is({options:e,onChange:t}){const n=Object.entries(e).filter(([o])=>!Sn.includes(o)),a=()=>{const o=`param_${Date.now()}`;t({...e,[o]:""})},l=(o,u)=>{if(u===o||Sn.includes(u))return;const i={...e},f=i[o];delete i[o],i[u]=f,t(i)},s=(o,u)=>{let i=u;u==="true"?i=!0:u==="false"?i=!1:!isNaN(Number(u))&&u.trim()!==""&&(i=Number(u)),t({...e,[o]:i})},c=o=>{const u={...e};delete u[o],t(u)};return r("div",{className:"form-group",children:[r("div",{className:"flex items-center justify-between mb-1",children:[r("label",{className:"form-label text-xs mb-0",children:"Custom Options"}),r("button",{type:"button",className:"text-xs text-blue-400 hover:text-blue-300",onClick:a,children:"+ Add"})]}),n.length===0?r("div",{className:"text-xs text-slate-600 italic",children:"No custom options"}):r("div",{className:"space-y-1",children:n.map(([o,u])=>r("div",{className:"flex gap-1 items-center",children:[r("input",{type:"text",className:"form-input text-xs flex-1",value:o,onChange:i=>l(o,i.target.value),placeholder:"key"}),r("input",{type:"text",className:"form-input text-xs flex-1",value:String(u),onChange:i=>s(o,i.target.value),placeholder:"value"}),r("button",{type:"button",className:"text-red-400 hover:text-red-300 px-1",onClick:()=>c(o),children:"×"})]},o))})]})}function St({translationKey:e,onClick:t}){const n=W(()=>_.value);if(!e?.trim())return null;if(Oe(e))return r("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-slate-600 text-slate-300 cursor-pointer hover:bg-slate-500 transition-colors",title:"Non-translatable key - click to edit",onClick:c=>{c.stopPropagation(),t?t():cn(e)},children:"🔒"});let a=0;J.forEach(c=>{n.value.intl?.[c]?.[e]?.trim()&&a++});const l=Math.round(a/J.length*100),s=l===100?"bg-green-600":l>50?"bg-yellow-600":"bg-red-600";return r("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-xs ${s} text-white cursor-pointer hover:opacity-80`,title:`${a}/${J.length} translations - click to edit`,onClick:c=>{c.stopPropagation(),t?t():cn(e)},children:[l,"%"]})}function os({translationKey:e,onClose:t}){const n=W(()=>_.value);if(!e)return null;const a=(l,s)=>{const c=JSON.parse(JSON.stringify(n.value));c.intl||(c.intl={en:{},da:{},nb:{},sv:{}}),c.intl[l]||(c.intl[l]={}),c.intl[l][e]=s,z(c)};return r("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:t,children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[500px] max-w-[95vw] shadow-2xl",onClick:l=>l.stopPropagation(),children:[r("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[r("div",{children:[r("h3",{className:"text-lg font-medium text-white",children:"Edit Translations"}),r("div",{className:"text-sm text-blue-400 mt-0.5",children:e})]}),r("button",{className:"text-slate-400 hover:text-white text-xl leading-none px-2",onClick:t,children:"×"})]}),r("div",{className:"p-4 space-y-3",children:J.map(l=>r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs flex items-center gap-2",children:[r("span",{className:"uppercase font-medium w-6",children:l}),r("span",{className:"text-slate-500",children:l==="en"?"English":l==="da"?"Danish":l==="nb"?"Norwegian":"Swedish"})]}),r("input",{type:"text",className:"form-input",value:n.value.intl?.[l]?.[e]||"",onChange:s=>a(l,s.target.value),placeholder:`Enter ${l.toUpperCase()} translation`,autoFocus:l==="en"})]},l))}),r("div",{className:"p-4 border-t border-slate-700 flex justify-end",children:r("button",{className:"btn primary",onClick:t,children:"Done"})})]})})}function Lt({translationKey:e,onClick:t}){return e?.trim()?r("button",{type:"button",className:"inline-flex items-center gap-1 px-1.5 py-0.5 text-[10px] bg-slate-700 hover:bg-slate-600 text-slate-300 rounded transition-colors",onClick:n=>{n.stopPropagation(),t()},title:"Edit translations",children:[r("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),"i18n"]}):null}function cs({item:e,itemIndex:t,layers:n,onUpdateItem:a,onOpenLayerCreator:l,onOpenLayerEditor:s}){return r("div",{className:"form-group mt-3",children:[r("label",{className:"form-label text-xs",children:["Assigned Layers",(e.layersIds?.length||0)===0&&r("span",{className:"text-red-400 ml-1",children:"(required)"})]}),r("div",{className:"space-y-1 mb-2",children:[(e.layersIds||[]).map((c,o)=>r("div",{className:"flex items-center gap-1",children:[r("button",{className:"flex-1 flex items-center gap-2 px-2 py-1.5 rounded text-xs text-left transition-colors bg-slate-700 hover:bg-slate-600",onClick:()=>s(c),children:[r("span",{className:"flex-1 text-blue-400",children:c}),r("span",{className:"text-[10px] text-slate-500",children:"click to edit"})]}),r("button",{className:"px-2 py-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/30 rounded",onClick:u=>{u.stopPropagation();const i=[...e.layersIds||[]];i.splice(o,1),a(t,{layersIds:i})},children:"×"})]},o)),(e.layersIds?.length||0)===0&&r("span",{className:"text-slate-500 text-xs",children:"No layers assigned"})]}),r(ts,{layers:n,excludeIds:e.layersIds||[],data:_.value,onSelect:c=>{a(t,{layersIds:[...e.layersIds||[],c]})},onCreateNew:()=>l(t)})]})}function us({feature:e,featureType:t,isNew:n,onUpdate:a,onUpdateItem:l,onRemoveItem:s,onFeatureTypeChange:c,onOpenLayerCreator:o}){const u=W(()=>_.value.layers||[]),i=W(()=>tt(e)),f=T(null),d=T(null);return r("div",{className:"space-y-4",children:[r(Sr,{validation:i.value,className:"mb-4"}),n&&c&&r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Feature Type"}),r("div",{className:"flex gap-2",children:[r("button",{className:`flex-1 px-3 py-2 rounded text-sm ${t==="weatherFeatures"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>c("weatherFeatures"),children:"Weather Feature"}),r("button",{className:`flex-1 px-3 py-2 rounded text-sm ${t==="features"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>c("features"),children:"General Feature"})]})]}),r(ye,{title:"Basic Information",defaultOpen:!0,children:[r("div",{className:"grid grid-cols-2 gap-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label flex items-center gap-2",children:["Feature ID",r(St,{translationKey:e.id||""}),r(Lt,{translationKey:e.id||"",onClick:()=>d.value=e.id||null})]}),r("input",{type:"text",className:"form-input",value:e.id||"",onChange:p=>a({id:p.target.value}),placeholder:"e.g. icing_index"})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Feature Name"}),r("input",{type:"text",className:"form-input",value:e.name||"",onChange:p=>a({name:p.target.value}),placeholder:"e.g. Icing Index"})]})]}),r("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Presentation"}),r("select",{className:"form-select",value:e.presentation||"single",onChange:p=>a({presentation:p.target.value}),children:[r("option",{value:"single",children:"Single"}),r("option",{value:"multiple",children:"Multiple"})]})]}),e.presentation==="multiple"&&r("div",{className:"form-group flex items-center",children:r("label",{className:"flex items-center gap-2 cursor-pointer",children:[r("input",{type:"checkbox",className:"form-checkbox",checked:e.mutuallyExclusive||!1,onChange:p=>a({mutuallyExclusive:p.target.checked})}),r("span",{className:"text-sm text-slate-300",children:"Mutually Exclusive"})]})})]})]}),r(ye,{title:"Items",badge:e.items?.length||0,actions:r("button",{className:"btn tiny primary",onClick:()=>{const p=[...e.items||[]];p.push({id:"",name:"",showLegend:!1,layersIds:[]}),a({items:p})},children:"+ Item"}),children:[(e.items||[]).map((p,m)=>r("div",{className:"border border-slate-600 rounded-lg p-3 mb-3 bg-slate-800/50",children:[r("div",{className:"flex items-center justify-between mb-3",children:[r("span",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:["Item #",m+1,": ",p.name||p.id||"(unnamed)",r(St,{translationKey:p.id||""})]}),(e.items?.length||0)>1&&r("button",{className:"btn tiny danger",onClick:()=>s(m,p),children:"Remove"})]}),r("div",{className:"grid grid-cols-2 gap-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs flex items-center gap-2",children:["Item ID",r(Lt,{translationKey:p.id||"",onClick:()=>d.value=p.id||null})]}),r("input",{type:"text",className:"form-input text-sm",value:p.id||"",onChange:y=>l(m,{id:y.target.value}),placeholder:"unique_item_id"})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Item Name"}),r("input",{type:"text",className:"form-input text-sm",value:p.name||"",onChange:y=>l(m,{name:y.target.value}),placeholder:"Display Name"})]})]}),r(cs,{item:p,itemIndex:m,layers:u.value,onUpdateItem:l,onOpenLayerCreator:o,onOpenLayerEditor:y=>f.value=y}),r("div",{className:"form-group mt-3",children:r("label",{className:"flex items-center gap-2 cursor-pointer",children:[r("input",{type:"checkbox",className:"form-checkbox",checked:p.showLegend||!1,onChange:y=>l(m,{showLegend:y.target.checked})}),r("span",{className:"text-sm text-slate-300",children:"Show Legend"})]})}),p.showLegend&&r("div",{className:"mt-2 space-y-2",children:r("div",{className:"grid grid-cols-2 gap-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Legend URL"}),r("input",{type:"text",className:"form-input text-sm",value:p.legendUrl||"",onChange:y=>l(m,{legendUrl:y.target.value}),placeholder:"https://..."})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs flex items-center gap-2",children:["Legend Description Key",r(St,{translationKey:p.legendDescription||""}),r(Lt,{translationKey:p.legendDescription||"",onClick:()=>d.value=p.legendDescription||null})]}),r("input",{type:"text",className:"form-input text-sm",value:p.legendDescription||"",onChange:y=>l(m,{legendDescription:y.target.value}),placeholder:"i18n.key"})]})]})})]},m)),(e.items?.length||0)===0&&r("div",{className:"text-center py-4 border border-dashed border-slate-600 rounded",children:[r("p",{className:"text-slate-500 text-sm mb-2",children:"No items defined"}),r("button",{className:"btn small primary",onClick:()=>{a({items:[{id:"",name:"",showLegend:!1,layersIds:[]}]})},children:"Add First Item"})]})]}),r(ls,{layerId:f.value,onClose:()=>f.value=null}),r(os,{translationKey:d.value,onClose:()=>d.value=null})]})}function ds({isOpen:e,onClose:t,onCreateLayer:n}){const a=T(""),l=T(de("wms"));if(!e)return null;const s=()=>{a.value="",l.value=de("wms")},c=()=>{const d=a.value.trim();d&&(n({id:d,layers:[l.value]}),s())},o=()=>{s(),t()},u=d=>{l.value={...l.value,...d}},i=(d,p)=>{l.value={...l.value,options:{...l.value.options,[d]:p}}},f=l.value;return r("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:o,children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[550px] max-w-[95vw] max-h-[90vh] flex flex-col shadow-2xl",onClick:d=>d.stopPropagation(),children:[r("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[r("h3",{className:"text-lg font-medium text-white",children:"Create New Layer"}),r("button",{className:"text-slate-400 hover:text-white text-xl leading-none",onClick:o,children:"×"})]}),r("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label",children:["Layer ID ",r("span",{className:"text-red-400",children:"*"})]}),r("input",{type:"text",className:"form-input",value:a.value,onInput:d=>a.value=d.target.value,placeholder:"unique_layer_id",autoFocus:!0})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Layer Type"}),r("div",{className:"grid grid-cols-3 gap-2",children:ot.map(d=>r("button",{type:"button",className:`px-2 py-2 rounded text-sm text-left ${f.type===d.type?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>{const p=de(d.type);l.value={...p,source:f.source,zIndex:f.zIndex,refreshInterval:f.refreshInterval,options:{...p.options,opacity:f.options?.opacity??1}}},children:[r("div",{className:"font-medium text-xs",children:d.name}),r("div",{className:"text-[10px] opacity-70",children:d.description})]},d.id))})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label",children:["Source URL/ID ",r("span",{className:"text-red-400",children:"*"})]}),r("input",{type:"text",className:"form-input",value:f.source||"",onInput:d=>u({source:d.target.value}),placeholder:f.type==="portalItem"?"Portal Item ID (e.g. abc123)":f.type==="wms"?"https://example.com/wms":"https://example.com/arcgis/rest/services/..."})]}),f.type==="wms"&&r("div",{className:"form-group",children:[r("label",{className:"form-label",children:["WMS Layer Names ",r("span",{className:"text-red-400",children:"*"})]}),r("div",{className:"space-y-1",children:[(f.options?.layerNames||[]).map((d,p)=>r("div",{className:"flex gap-1",children:[r("input",{type:"text",className:"form-input text-sm flex-1",value:d,onInput:m=>{const y=[...f.options?.layerNames||[]];y[p]=m.target.value,i("layerNames",y)},placeholder:"layer_name"}),(f.options?.layerNames?.length||0)>1&&r("button",{type:"button",className:"btn tiny danger",onClick:()=>{const m=[...f.options?.layerNames||[]];m.splice(p,1),i("layerNames",m)},children:"×"})]},p)),r("button",{type:"button",className:"btn tiny",onClick:()=>{const d=[...f.options?.layerNames||[],""];i("layerNames",d)},children:"+ Add Layer Name"})]})]}),f.type==="portalItem"&&r("div",{className:"form-group",children:[r("label",{className:"form-label",children:"Portal Layer ID"}),r("input",{type:"number",className:"form-input",value:f.options?.layerId??0,onInput:d=>i("layerId",parseInt(d.target.value)||0)})]}),r("div",{className:"grid grid-cols-3 gap-3",children:[r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Opacity"}),r("input",{type:"number",className:"form-input text-sm",min:"0",max:"1",step:"0.1",value:f.options?.opacity??1,onInput:d=>{const p=parseFloat(d.target.value);i("opacity",Math.max(0,Math.min(1,isNaN(p)?1:p)))}})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Z-Index"}),r("input",{type:"number",className:"form-input text-sm",value:f.zIndex||0,onInput:d=>u({zIndex:parseInt(d.target.value)||0})})]}),r("div",{className:"form-group",children:[r("label",{className:"form-label text-xs",children:"Refresh (ms)"}),r("input",{type:"number",className:"form-input text-sm",value:f.refreshInterval||"",onInput:d=>{const p=d.target.value;u({refreshInterval:p?parseInt(p):void 0})},placeholder:"60000"})]})]})]}),r("div",{className:"p-4 border-t border-slate-700 flex gap-2 justify-end",children:[r("button",{className:"btn ghost",onClick:o,children:"Cancel"}),r("button",{className:"btn primary",onClick:c,disabled:!a.value.trim()||!f.source?.trim(),children:"Create & Assign"})]})]})})}function Lr({isOpen:e,title:t,message:n,confirmLabel:a="Confirm",cancelLabel:l="Cancel",variant:s="default",onConfirm:c,onCancel:o}){return e?r("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100]",onClick:o,children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[400px] max-w-[90vw] shadow-2xl",onClick:i=>i.stopPropagation(),children:[r("div",{className:"p-4 border-b border-slate-700",children:r("h3",{className:"text-lg font-medium text-white",children:t})}),r("div",{className:"p-4",children:r("p",{className:"text-slate-300",children:n})}),r("div",{className:"p-4 border-t border-slate-700 flex justify-end gap-2",children:[r("button",{className:"px-4 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white text-sm transition-colors",onClick:o,children:l}),r("button",{className:`px-4 py-2 rounded text-white text-sm transition-colors ${{danger:"bg-red-600 hover:bg-red-700",warning:"bg-orange-600 hover:bg-orange-700",default:"bg-blue-600 hover:bg-blue-700"}[s]}`,onClick:c,children:a})]})]})}):null}function kr(){const e=T(!1),t=T(null);return{isOpen:e,config:t,confirm:s=>{t.value=s,e.value=!0},handleConfirm:()=>{t.value?.onConfirm(),e.value=!1,t.value=null},handleCancel:()=>{e.value=!1,t.value=null}}}const $r=200,fs=.4,ps=320,Or="hemswx-nav-width",ms=()=>{try{const e=localStorage.getItem(Or);if(e){const t=parseInt(e,10);if(!isNaN(t)&&t>=$r)return t}}catch{}return ps},hs=e=>{try{localStorage.setItem(Or,String(Math.round(e)))}catch{}};function vs(){const e=T("none"),t=T("form"),n=T(!1),a=T(null),l=T(null),s=T(null),c=T(null),o=T(ms()),u=T(!1),i=A(null),f=A(""),d=T(null),p=T(null),m=kr();Q(()=>{if(!n.value){if(a.value?.type==="feature"){const{featureType:h,index:v}=a.value,g=_.value[h]?.[v];if(g){const N=JSON.stringify(g);f.current!==N&&(l.value={feature:JSON.parse(N),featureType:h})}}else if(a.value?.type==="layer"){const h=_.value.layers?.[a.value.index];if(h){const v=JSON.stringify(h);f.current!==v&&(s.value=JSON.parse(v))}}}},[_.value]);const y=$e(h=>{h.preventDefault(),u.value=!0;const v=N=>{if(!i.current)return;const I=i.current.getBoundingClientRect(),w=I.width*fs,F=Math.min(w,Math.max($r,N.clientX-I.left));o.value=F},g=()=>{u.value=!1,hs(o.value),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",g)},[]),L=h=>h.name?.trim()?h.name:h.presentation==="single"&&h.items?.[0]?.name?.trim()?h.items[0].name:h.id||"Unnamed",$=(h,v)=>{const g=_.value[h]?.[v];g&&(a.value={type:"feature",featureType:h,index:v},fa(h,v),e.value="feature",n.value=!1,l.value={feature:JSON.parse(JSON.stringify(g)),featureType:h},s.value=null)},S=h=>{const v=_.value.layers?.[h];v&&(a.value={type:"layer",index:h},pa(h),e.value="layer",n.value=!1,s.value=JSON.parse(JSON.stringify(v)),l.value=null)},b=h=>{e.value="feature",n.value=!0,l.value={feature:{presentation:"single",items:[{id:"",name:"",showLegend:!1,layersIds:[]}]},featureType:h},a.value=null,s.value=null},Y=h=>{if(n.value||a.value?.type!=="feature"||!tt(h).valid)return;f.current=JSON.stringify(h);const g=yt(_.value,h),N=JSON.parse(JSON.stringify(g));N[a.value.featureType][a.value.index]=h,z(N)},k=h=>{if(n.value||a.value?.type!=="layer"||!Ft(h).valid)return;f.current=JSON.stringify(h);const g=Ge(_.value,h);z(g)},x=()=>{if(!l.value||!n.value)return;const{feature:h,featureType:v}=l.value,g=tt(h);if(!g.valid){se(g.errors[0]||"Invalid feature");return}const N=yt(_.value,h),I=JSON.parse(JSON.stringify(N));I[v].push(h),z(I);const w=I[v].length-1;a.value={type:"feature",featureType:v,index:w},n.value=!1},P=()=>{if(!s.value||!n.value)return;const h=Ft(s.value);if(!h.valid){se(h.errors[0]||"Invalid layer");return}const v=Ge(_.value,s.value);z(v);const g=v.layers.findIndex(N=>N.id===s.value.id);g>=0&&(a.value={type:"layer",index:g}),n.value=!1},j=()=>{if(n.value)e.value="none",l.value=null,s.value=null,a.value=null;else if(a.value?.type==="feature"){const{featureType:h,index:v}=a.value,g=_.value[h]?.[v];g&&(l.value={feature:JSON.parse(JSON.stringify(g)),featureType:h})}else if(a.value?.type==="layer"){const h=_.value.layers?.[a.value.index];h&&(s.value=JSON.parse(JSON.stringify(h)))}},re=()=>{if(a.value?.type!=="feature")return;const{featureType:h,index:v}=a.value,g=_.value[h][v],N=L(g),I=[];g.id&&I.push(g.id),g.items?.forEach(E=>{E.id&&I.push(E.id),E.legendDescription&&I.push(E.legendDescription)});const w=[];g.items?.forEach(E=>{E.layersIds?.forEach(G=>{w.includes(G)||w.push(G)})});const F=w.filter(E=>{let G=0;return[..._.value.weatherFeatures,..._.value.features].forEach(ue=>{ue.items?.forEach(ht=>{ht.layersIds?.includes(E)&&G++})}),G<=1});d.value={open:!0,featureType:h,index:v,featureName:N,translationKeys:I,layerIds:w,exclusiveLayerIds:F,deleteTranslations:!1,deleteLayers:!1}},U=()=>{if(!d.value)return;const{featureType:h,index:v,deleteTranslations:g,deleteLayers:N,translationKeys:I,exclusiveLayerIds:w}=d.value;let F=JSON.parse(JSON.stringify(_.value));g&&I.length>0&&["en","da","nb","sv"].forEach(G=>{F.intl?.[G]&&I.forEach(ue=>{delete F.intl[G][ue]})}),N&&w.length>0&&(F.layers=F.layers.filter(E=>!w.includes(E.id))),F[h]=F[h].filter((E,G)=>G!==v),z(F),d.value=null,a.value=null,e.value="none",l.value=null},O=(h,v)=>{const g=v.name||v.id||`Item #${h+1}`,N=[];v.id&&N.push(v.id),v.legendDescription&&N.push(v.legendDescription);const I=v.layersIds||[],w=I.filter(F=>{let E=0;return[..._.value.weatherFeatures,..._.value.features].forEach(G=>{G.items?.forEach(ue=>{ue.layersIds?.includes(F)&&E++})}),E<=1});if(N.length===0&&w.length===0){if(l.value){const F=[...l.value.feature.items];F.splice(h,1);const E={...l.value.feature,items:F};l.value={...l.value,feature:E},Y(E)}return}p.value={open:!0,itemIndex:h,itemName:g,translationKeys:N,layerIds:I,exclusiveLayerIds:w,deleteTranslations:!1,deleteLayers:!1}},H=()=>{if(!p.value||!l.value)return;const{itemIndex:h,deleteTranslations:v,deleteLayers:g,translationKeys:N,exclusiveLayerIds:I}=p.value;let w=JSON.parse(JSON.stringify(_.value));v&&N.length>0&&["en","da","nb","sv"].forEach(ue=>{w.intl?.[ue]&&N.forEach(ht=>{delete w.intl[ue][ht]})}),g&&I.length>0&&(w.layers=w.layers.filter(G=>!I.includes(G.id)));const F=[...l.value.feature.items];F.splice(h,1);const E={...l.value.feature,items:F};l.value={...l.value,feature:E},a.value?.type==="feature"&&!n.value&&(f.current=JSON.stringify(E),w[a.value.featureType][a.value.index]=E),z(w),p.value=null},ee=()=>{if(a.value?.type!=="layer")return;const h=_.value.layers[a.value.index],v=a.value.index;m.confirm({title:"Delete Layer",message:`Are you sure you want to delete layer "${h.id}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",onConfirm:()=>{ma(v),a.value=null,e.value="none",s.value=null}})},xe=()=>{if(!l.value||a.value?.type!=="feature")return;const h=l.value.feature;e.value="feature",n.value=!0,l.value={feature:{...JSON.parse(JSON.stringify(h)),id:h.id?`${h.id}_copy`:"",name:h.name?`${h.name} (Copy)`:"",items:h.items.map(v=>({...v,id:v.id?`${v.id}_copy`:"",name:v.name?`${v.name} (Copy)`:""}))},featureType:a.value.featureType},a.value=null},me=()=>{s.value&&(e.value="layer",n.value=!0,s.value={...JSON.parse(JSON.stringify(s.value)),id:`${s.value.id}_copy`},a.value=null)},M=h=>{if(!l.value)return;const v={...l.value.feature,...h};l.value={...l.value,feature:v},Y(v)},B=(h,v)=>{if(!l.value)return;const g=[...l.value.feature.items];g[h]={...g[h],...v};const N={...l.value.feature,items:g};l.value={...l.value,feature:N},Y(N)},He=h=>{if(!s.value)return;const v={...s.value,...h};s.value=v,k(v)},De=(h,v)=>{if(!s.value)return;const g=[...s.value.layers];g[h]={...g[h],...v};const N={...s.value,layers:g};s.value=N,k(N)},qe=h=>{const v=Ge(_.value,h);if(z(v),c.value!==null&&l.value){const g=[...l.value.feature.items],N=g[c.value];N.layersIds||(N.layersIds=[]),N.layersIds.includes(h.id)||(N.layersIds=[...N.layersIds,h.id]),l.value={...l.value,feature:{...l.value.feature,items:g}}}c.value=null,se(`Layer "${h.id}" created`)};return r("div",{ref:i,className:"flex h-full",children:[r("div",{style:{width:o.value},className:"flex-shrink-0",children:r(es,{selection:a.value,onSelectFeature:$,onSelectLayer:S,onNewFeature:b})}),r("div",{className:`w-1.5 cursor-col-resize flex-shrink-0 group hover:bg-blue-500/50 transition-colors ${u.value?"bg-blue-500/50":""}`,onMouseDown:y,children:r("div",{className:`w-0.5 h-full mx-auto ${u.value?"bg-blue-500":"bg-transparent group-hover:bg-blue-500"}`})}),r("div",{className:"flex-1 min-w-0 bg-slate-800 border border-slate-700 rounded-xl p-4 flex flex-col overflow-hidden ml-1.5",children:[r("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-slate-700",children:[r("div",{className:"flex items-center gap-4",children:[r("div",{children:[r("h2",{className:"text-lg font-medium text-white",children:e.value==="none"?"Select an item":n.value&&e.value==="feature"?"New Feature":n.value&&e.value==="layer"?"New Layer":e.value==="feature"?L(l.value.feature):e.value==="layer"?s.value.id||"Layer":"Select an item"}),e.value==="feature"&&l.value&&!n.value&&r("div",{className:"text-xs text-slate-400 mt-0.5",children:[l.value.featureType==="weatherFeatures"?"Weather Feature":"General Feature"," • ",l.value.feature.presentation]}),e.value==="layer"&&s.value&&!n.value&&r("div",{className:"text-xs text-slate-400 mt-0.5",children:[s.value.layers?.length||0," sublayer(s)"]})]}),e.value!=="none"&&r("div",{className:"flex gap-1 border-l border-slate-600 pl-4",children:[r("button",{className:`px-3 py-1 rounded text-xs transition-colors ${t.value==="form"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-200"}`,onClick:()=>t.value="form",children:"Form"}),r("button",{className:`px-3 py-1 rounded text-xs transition-colors ${t.value==="json"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-200"}`,onClick:()=>t.value="json",children:"JSON"})]})]}),r("div",{className:"flex gap-2",children:[e.value==="feature"&&r(K,{children:n.value?r(K,{children:[r("button",{className:"btn success small",onClick:x,children:"Create"}),r("button",{className:"btn ghost small",onClick:j,children:"Cancel"})]}):r(K,{children:[r("button",{className:"btn ghost small",onClick:j,children:"Revert"}),r("button",{className:"btn ghost small",onClick:xe,children:"Duplicate"}),r("button",{className:"btn danger small",onClick:re,children:"Delete"})]})}),e.value==="layer"&&r(K,{children:n.value?r(K,{children:[r("button",{className:"btn success small",onClick:P,children:"Create"}),r("button",{className:"btn ghost small",onClick:j,children:"Cancel"})]}):r(K,{children:[r("button",{className:"btn ghost small",onClick:j,children:"Revert"}),r("button",{className:"btn ghost small",onClick:me,children:"Duplicate"}),r("button",{className:"btn danger small",onClick:ee,children:"Delete"})]})})]})]}),r("div",{className:"flex-1 overflow-auto",children:[e.value==="none"&&r("div",{className:"flex items-center justify-center h-full text-slate-500",children:r("div",{className:"text-center",children:[r("p",{className:"mb-4",children:"Select a feature or layer from the navigator"}),r("div",{className:"flex gap-2 justify-center",children:[r("button",{className:"btn primary",onClick:()=>b("weatherFeatures"),children:"New Weather Feature"}),r("button",{className:"btn",onClick:()=>b("features"),children:"New General Feature"})]})]})}),t.value==="form"&&r(K,{children:[e.value==="feature"&&l.value&&r(us,{feature:l.value.feature,featureType:l.value.featureType,isNew:n.value,onUpdate:M,onUpdateItem:B,onRemoveItem:O,onFeatureTypeChange:n.value?h=>{l.value={...l.value,featureType:h}}:void 0,onOpenLayerCreator:h=>c.value=h}),e.value==="layer"&&s.value&&r(as,{layer:s.value,onUpdate:He,onUpdateSublayer:De})]}),t.value==="json"&&e.value!=="none"&&r("div",{className:"h-full flex flex-col",children:[r("div",{className:"text-xs text-slate-400 mb-2",children:"Edit JSON directly. Changes auto-save when valid."}),r("div",{className:"flex-1 border border-slate-600 rounded overflow-hidden",children:r(Cr,{height:"100%",language:"json",theme:"vs-dark",value:e.value==="feature"&&l.value?(()=>{const h=l.value.feature,v=new Set;h.items?.forEach(w=>{w.layersIds?.forEach(F=>v.add(F))});const g=_.value.layers.filter(w=>v.has(w.id)),N=new Set;h.id&&N.add(h.id),h.items?.forEach(w=>{w.id&&N.add(w.id),w.legendDescription&&N.add(w.legendDescription)});const I={};return["en","da","nb","sv"].forEach(w=>{I[w]={},N.forEach(F=>{_.value.intl?.[w]?.[F]&&(I[w][F]=_.value.intl[w][F])})}),JSON.stringify({feature:h,layers:g,intl:I},null,2)})():e.value==="layer"&&s.value?JSON.stringify(s.value,null,2):"{}",onChange:h=>{if(h)try{const v=JSON.parse(h);if(e.value==="feature"&&l.value){const g=v.feature||v,N=v.layers||[],I=v.intl;l.value={...l.value,feature:g};let w=JSON.parse(JSON.stringify(_.value));if(N.forEach(E=>{E.id&&(w=Ge(w,E))}),I&&(w.intl||(w.intl={en:{},da:{},nb:{},sv:{}}),["en","da","nb","sv"].forEach(E=>{I[E]&&(w.intl[E]||(w.intl[E]={}),Object.assign(w.intl[E],I[E]))})),tt(g).valid&&a.value?.type==="feature"&&!n.value){f.current=JSON.stringify(g);const E=yt(w,g),G=JSON.parse(JSON.stringify(E));G[a.value.featureType][a.value.index]=g,z(G)}else N.length>0||I?z(w):Y(g)}else e.value==="layer"&&s.value&&(s.value=v,k(v))}catch{}},options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",folding:!0,wordWrap:"on",bracketPairColorization:{enabled:!0},scrollBeyondLastLine:!1},loading:r("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Loading..."})})})]})]})]}),r(ds,{isOpen:c.value!==null,onClose:()=>c.value=null,onCreateLayer:qe}),p.value?.open&&r("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl p-6 max-w-md w-full mx-4 shadow-xl",children:[r("h3",{className:"text-lg font-medium text-white mb-4",children:['Remove "',p.value.itemName,'"?']}),r("div",{className:"space-y-3 mb-6",children:[p.value.translationKeys.length>0&&r("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[r("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:p.value.deleteTranslations,onChange:h=>{p.value={...p.value,deleteTranslations:h.target.checked}}}),r("div",{children:[r("div",{className:"text-sm text-white",children:"Also delete translations"}),r("div",{className:"text-xs text-slate-400 mt-1",children:[p.value.translationKeys.length," key(s): ",p.value.translationKeys.join(", ")]})]})]}),p.value.exclusiveLayerIds.length>0&&r("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[r("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:p.value.deleteLayers,onChange:h=>{p.value={...p.value,deleteLayers:h.target.checked}}}),r("div",{children:[r("div",{className:"text-sm text-white",children:"Also delete unused layers"}),r("div",{className:"text-xs text-slate-400 mt-1",children:[p.value.exclusiveLayerIds.length," layer(s) only used by this item: ",p.value.exclusiveLayerIds.slice(0,2).join(", "),p.value.exclusiveLayerIds.length>2&&` +${p.value.exclusiveLayerIds.length-2} more`]})]})]}),p.value.layerIds.length>0&&p.value.exclusiveLayerIds.length<p.value.layerIds.length&&r("div",{className:"text-xs text-slate-500 px-3",children:[p.value.layerIds.length-p.value.exclusiveLayerIds.length," layer(s) are used elsewhere and won't be deleted."]})]}),r("div",{className:"flex gap-2 justify-end",children:[r("button",{className:"btn ghost",onClick:()=>p.value=null,children:"Cancel"}),r("button",{className:"btn danger",onClick:H,children:"Remove"})]})]})}),d.value?.open&&r("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r("div",{className:"bg-slate-800 border border-slate-600 rounded-xl p-6 max-w-md w-full mx-4 shadow-xl",children:[r("h3",{className:"text-lg font-medium text-white mb-4",children:['Delete "',d.value.featureName,'"?']}),r("div",{className:"space-y-3 mb-6",children:[d.value.translationKeys.length>0&&r("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[r("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:d.value.deleteTranslations,onChange:h=>{d.value={...d.value,deleteTranslations:h.target.checked}}}),r("div",{children:[r("div",{className:"text-sm text-white",children:"Also delete translations"}),r("div",{className:"text-xs text-slate-400 mt-1",children:[d.value.translationKeys.length," key(s): ",d.value.translationKeys.slice(0,3).join(", "),d.value.translationKeys.length>3&&` +${d.value.translationKeys.length-3} more`]})]})]}),d.value.exclusiveLayerIds.length>0&&r("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[r("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:d.value.deleteLayers,onChange:h=>{d.value={...d.value,deleteLayers:h.target.checked}}}),r("div",{children:[r("div",{className:"text-sm text-white",children:"Also delete unused layers"}),r("div",{className:"text-xs text-slate-400 mt-1",children:[d.value.exclusiveLayerIds.length," layer(s) only used by this feature: ",d.value.exclusiveLayerIds.slice(0,2).join(", "),d.value.exclusiveLayerIds.length>2&&` +${d.value.exclusiveLayerIds.length-2} more`]})]})]}),d.value.layerIds.length>0&&d.value.exclusiveLayerIds.length<d.value.layerIds.length&&r("div",{className:"text-xs text-slate-500 px-3",children:[d.value.layerIds.length-d.value.exclusiveLayerIds.length," layer(s) are used by other features and won't be deleted."]})]}),r("div",{className:"flex gap-2 justify-end",children:[r("button",{className:"btn ghost",onClick:()=>d.value=null,children:"Cancel"}),r("button",{className:"btn danger",onClick:U,children:"Delete"})]})]})}),r(Lr,{isOpen:m.isOpen.value,title:m.config.value?.title||"",message:m.config.value?.message||"",confirmLabel:m.config.value?.confirmLabel,cancelLabel:m.config.value?.cancelLabel,variant:m.config.value?.variant,onConfirm:m.handleConfirm,onCancel:m.handleCancel})]})}function gs(){const e=W(()=>ca.value),t=e.value.missingLayers.length,n=e.value.unusedLayers.length,a=Object.entries(e.value.missingIntl).map(([l,s])=>({lang:l,count:s.length})).filter(l=>l.count>0);return!t&&!n&&a.length===0?null:r("div",{className:"fixed bottom-0 left-0 right-0 bg-slate-800 border-t border-slate-700 p-2 px-3 text-xs flex gap-3 items-center z-10",children:[t>0&&r("span",{className:`pill ${t>0?"bad":"ok"}`,children:["Missing layers: ",t]}),n>0&&r("span",{className:`pill ${n>0?"warn":"ok"}`,children:["Unused layers: ",n]}),a.map(({lang:l,count:s})=>r("span",{className:`pill ${s>0?"warn":"ok"}`,children:[l," missing: ",s]},l)),e.value.missingLayers.length>0&&r("div",{className:"text-slate-500 text-[10px]",children:["Missing: ",e.value.missingLayers.join(", ")]}),e.value.unusedLayers.length>0&&r("div",{className:"text-slate-500 text-[10px]",children:["Unused: ",e.value.unusedLayers.join(", ")]})]})}function ys(){const e=W(()=>_.value),t=T(""),n=T(!1),a=T("any"),l=X(()=>{try{return[...ut(e.value)].sort()}catch{return[]}},[e.value]),s=X(()=>{const o=t.value.toLowerCase().trim(),u=a.value,i=(f,d)=>{const p=e.value.intl?.[d]?.[f];return p===void 0||p===""};return l.filter(f=>{if(o){const d=f.toLowerCase().includes(o),p=J.some(m=>(e.value.intl?.[m]?.[f]||"").toLowerCase().includes(o));if(!d&&!p)return!1}if(n.value){if(u==="any"){if(!J.some(d=>i(f,d)))return!1}else if(!i(f,u))return!1}return!0})},[l,t.value,n.value,a.value,e.value]),c=(o,u,i)=>{const f={...e.value,intl:{...e.value.intl}};f.intl[u]={...f.intl[u]||{},[o]:i},z(f)};return l.length===0?r("div",{className:"p-4 text-center text-slate-500",children:"No translation keys found"}):r("div",{children:[r("div",{className:"flex gap-2 items-center mb-3",children:[r("button",{className:"btn small",onClick:lr,children:"Fill missing from EN"}),r("input",{type:"text",className:"form-input",placeholder:"Search keys or translations…",value:t.value,onInput:o=>t.value=o.target.value}),r("label",{className:"flex items-center gap-2 text-xs text-slate-400",children:[r("input",{type:"checkbox",checked:n.value,onChange:o=>n.value=o.target.checked}),"Show missing only"]}),r("select",{className:"form-select text-xs",value:a.value,onChange:o=>a.value=o.target.value,children:[r("option",{value:"any",children:"Any language"}),J.map(o=>r("option",{value:o,children:o.toUpperCase()},o))]})]}),r("div",{className:"overflow-auto",children:r("table",{className:"w-full text-sm border-collapse",children:[r("thead",{children:r("tr",{children:[r("th",{className:"text-left p-2 border-b border-slate-700 sticky top-0 bg-slate-800",children:"Key"}),J.map(o=>r("th",{className:"text-left p-2 border-b border-slate-700 sticky top-0 bg-slate-800",children:o.toUpperCase()},o))]})}),r("tbody",{children:s.map(o=>r("tr",{className:"align-top",children:[r("td",{className:"p-2 border-b border-slate-800 text-slate-300 whitespace-nowrap",children:o}),J.map(u=>r("td",{className:"p-2 border-b border-slate-800 min-w-[220px]",children:r("input",{type:"text",className:"form-input w-full",value:e.value.intl?.[u]?.[o]??"",onInput:i=>c(o,u,i.target.value),placeholder:`[${u}] ${o}`})},u))]},o))})]})})]})}function _s({translationKey:e,isSelected:t,onSelect:n}){const a=W(()=>_.value),l=Oe(e),s=X(()=>J.reduce((o,u)=>{const i=a.value.intl?.[u]?.[e];return o+(i===void 0||i===""?1:0)},0),[e,a.value]),c=X(()=>J.some(o=>{const u=a.value.intl?.[o]?.[e];return u!==void 0&&u!==""}),[e,a.value]);return r("div",{className:`feature-list-item ${t?"selected":""}`,onClick:n,children:[r("div",{className:"feature-info",children:[r("div",{className:"feature-name",children:e}),r("div",{className:"feature-details",children:l?"Uses item name directly":r(K,{children:[J.length-s,"/",J.length," languages",s>0&&` • ${s} missing`,!c&&" • No translations"]})})]}),r("div",{className:"feature-actions",children:l?r("span",{className:"pill",style:{background:"#475569"},children:"🔒"}):r(K,{children:[s>0&&r("span",{className:"pill warn",children:["Missing ",s]}),!c&&r("span",{className:"pill bad",children:"Empty"}),s===0&&c&&r("span",{className:"pill ok",children:"Complete"})]})})]})}function bs({title:e,keys:t,selectedKey:n,onSelectKey:a}){return r("details",{open:!0,className:"feature-category",children:[r("summary",{className:"feature-category-header",children:e}),r("div",{className:"feature-category-content",children:t.length===0?r("div",{className:"p-3 text-slate-500 text-center",children:["No ",e.toLowerCase()," found"]}):t.map(l=>r(_s,{translationKey:l,isSelected:n===l,onSelect:()=>a(l)},l))})]})}function xs({selectedKey:e,onSelectKey:t}){const n=W(()=>_.value),a=T(""),l=T(!1),s=T("any"),c=X(()=>{try{return[...ut(n.value)].sort()}catch{return[]}},[n.value]),o=X(()=>{const i=a.value.toLowerCase().trim(),f=s.value,d=(p,m)=>{const y=n.value.intl?.[m]?.[p];return y===void 0||y===""};return c.filter(p=>{if(i){const m=p.toLowerCase().includes(i),y=J.some(L=>(n.value.intl?.[L]?.[p]||"").toLowerCase().includes(i));if(!m&&!y)return!1}if(l.value){if(f==="any"){if(!J.some(m=>d(p,m)))return!1}else if(!d(p,f))return!1}return!0})},[c,a.value,l.value,s.value,n.value]),u=X(()=>{const i={"Weather Features":[],"General Features":[],Layers:[],Other:[]};return o.forEach(f=>{f.includes("weather")||f.includes("radar")||f.includes("wind")||f.includes("cloud")?i["Weather Features"].push(f):f.includes("layer")||f.includes("overlay")?i.Layers.push(f):f.includes("feature")||f.includes("item")?i["General Features"].push(f):i.Other.push(f)}),i},[o]);return c.length===0?r("div",{children:[r("div",{className:"mb-3",children:r("button",{className:"btn primary",disabled:!0,children:"No Translation Keys Found"})}),r("div",{className:"p-4 text-center text-slate-500",children:"Load a JSON file with translation keys to get started"})]}):r("div",{children:[r("div",{className:"mb-3",children:r("button",{className:"btn primary",onClick:lr,children:"🌐 Fill Missing from EN"})}),r("div",{className:"flex flex-col gap-2 items-stretch mb-3",children:[r("input",{type:"text",className:"form-input",placeholder:"Search keys or translations…",value:a.value,onInput:i=>a.value=i.target.value}),r("div",{className:"flex gap-2 items-center",children:[r("label",{className:"flex items-center gap-2 text-xs text-slate-400",children:[r("input",{type:"checkbox",checked:l.value,onChange:i=>l.value=i.target.checked}),"Show missing only"]}),r("select",{className:"form-select text-xs flex-1",value:s.value,onChange:i=>s.value=i.target.value,children:[r("option",{value:"any",children:"Any language"}),J.map(i=>r("option",{value:i,children:i.toUpperCase()},i))]})]})]}),r("div",{className:"feature-browser",children:Object.entries(u).map(([i,f])=>f.length>0&&r(bs,{title:i,keys:f,selectedKey:e,onSelectKey:t},i))})]})}function Ns({selectedKey:e}){const t=W(()=>_.value),n=kr(),a=X(()=>{if(!e)return null;const i={};return J.forEach(f=>{i[f]=t.value.intl?.[f]?.[e]??""}),i},[e,t.value]),l=X(()=>a?J.filter(i=>a[i]===void 0||a[i]===""):[],[a]),s=(i,f)=>{if(!e)return;const d={...t.value,intl:{...t.value.intl}};d.intl[i]={...d.intl[i]||{},[e]:f},z(d)},c=()=>{if(!e||!a)return;const i=a.en;if(!i)return;const f={...t.value,intl:{...t.value.intl}};l.forEach(d=>{f.intl[d]||(f.intl[d]={}),f.intl[d][e]=i}),z(f)},o=()=>{e&&n.confirm({title:"Clear Translations",message:`Are you sure you want to clear all translations for "${e}"? This action cannot be undone.`,confirmLabel:"Clear All",variant:"warning",onConfirm:()=>{const i={...t.value,intl:{...t.value.intl}};J.forEach(f=>{i.intl[f]&&i.intl[f][e]&&delete i.intl[f][e]}),z(i)}})};if(!e)return r("div",{className:"h-full flex flex-col",children:[r("div",{className:"mb-4",children:[r("h3",{className:"text-lg font-medium text-slate-200 mb-2",children:"Translation Editor"}),r("p",{className:"text-slate-500 text-sm",children:"Select a translation key from the left panel to edit its translations."})]}),r("div",{className:"flex-1 flex items-center justify-center",children:r("div",{className:"text-center text-slate-500",children:[r("div",{className:"text-6xl mb-4",children:"🌐"}),r("div",{className:"text-lg font-medium mb-2",children:"No Key Selected"}),r("div",{className:"text-sm",children:"Choose a translation key to start editing"})]})})]});if(!a)return r("div",{className:"h-full flex items-center justify-center",children:r("div",{className:"text-center text-slate-500",children:[r("div",{className:"text-6xl mb-4",children:"⚠️"}),r("div",{className:"text-lg font-medium mb-2",children:"Error Loading Translations"}),r("div",{className:"text-sm",children:"Unable to load translation data for this key"})]})});const u=Oe(e);return r("div",{className:"h-full flex flex-col",children:[r("div",{className:"mb-4",children:[r("h3",{className:"text-lg font-medium text-slate-200 mb-1",children:"Translation Editor"}),r("div",{className:"flex items-center gap-2",children:[r("code",{className:"inline text-slate-400",children:e}),u?r("span",{className:"pill",style:{background:"#475569"},children:"Non-translatable"}):l.length>0?r("span",{className:"pill warn",children:[l.length," missing"]}):r("span",{className:"pill ok",children:"Complete"})]})]}),r("div",{className:"mb-4 p-3 bg-slate-700/50 rounded-lg",children:r("label",{className:"flex items-center gap-3 cursor-pointer",children:[r("input",{type:"checkbox",className:"form-checkbox",checked:u,onChange:()=>la(e)}),r("div",{children:[r("div",{className:"text-sm text-white",children:"Non-translatable key"}),r("div",{className:"text-xs text-slate-400",children:"Mobile app will use the item name directly (no JSON translation needed)"})]})]})}),!u&&r("div",{className:"flex gap-2 mb-4",children:[l.length>0&&a.en&&r("button",{className:"btn small",onClick:c,children:"Fill missing from EN"}),r("button",{className:"btn danger small",onClick:o,children:"Clear all"})]}),u?r("div",{className:"flex-1 flex items-center justify-center",children:r("div",{className:"text-center text-slate-500",children:[r("div",{className:"text-4xl mb-3",children:"🔒"}),r("div",{className:"text-sm font-medium mb-1",children:"Non-translatable Key"}),r("div",{className:"text-xs",children:["The mobile app will use the item's name field directly.",r("br",{}),"No translation entries are needed in the JSON."]})]})}):r("div",{className:"flex-1 overflow-y-auto",children:r("div",{className:"space-y-4",children:J.map(i=>r("div",{className:"form-group",children:[r("label",{className:"form-label flex items-center gap-2",children:[r("span",{className:"font-mono text-xs bg-slate-700 px-2 py-1 rounded",children:i.toUpperCase()}),i==="en"&&r("span",{className:"text-slate-500 text-xs",children:"(Default)"}),l.includes(i)&&r("span",{className:"text-yellow-500 text-xs",children:"• Missing"})]}),r("textarea",{className:"form-textarea",rows:3,value:a[i],onInput:f=>s(i,f.target.value),placeholder:`Enter ${i.toUpperCase()} translation for "${e}"`}),i==="en"&&a[i]&&r("div",{className:"form-help",children:"This will be used as fallback for missing translations"})]},i))})}),!u&&r("div",{className:"mt-4 pt-4 border-t border-slate-700",children:r("div",{className:"text-xs text-slate-500",children:[r("div",{className:"mb-1",children:[r("strong",{children:"Translation Status:"})," ",J.length-l.length,"/",J.length," languages"]}),l.length>0&&r("div",{children:[r("strong",{children:"Missing:"})," ",l.map(i=>i.toUpperCase()).join(", ")]})]})}),r(Lr,{isOpen:n.isOpen.value,title:n.config.value?.title||"",message:n.config.value?.message||"",confirmLabel:n.config.value?.confirmLabel,cancelLabel:n.config.value?.cancelLabel,variant:n.config.value?.variant,onConfirm:n.handleConfirm,onCancel:n.handleCancel})]})}function ws(){const e=W(()=>_.value.layers?.map(a=>a.id).filter(Boolean)||[]),t=W(()=>q.value.customLogicLayers),n=W(()=>q.value.nonTranslatableKeys);return r("div",{className:"max-h-[calc(100vh-180px)] overflow-auto",children:[r("div",{className:"mb-4",children:[r("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),r("p",{className:"text-sm text-slate-400 mb-4",children:"Configure layers with custom logic that are referenced in your application code."})]}),r("div",{className:"space-y-4",children:[r("div",{children:[r("h4",{className:"font-medium mb-3",children:"Referenced Layers"}),r("p",{className:"text-sm text-slate-400 mb-3",children:'Layers marked as "referenced" are used in your application code (Dart) and should be handled differently during validation.'}),r("div",{className:"space-y-3",children:[r("div",{className:"p-3 bg-slate-700 rounded",children:[r("div",{className:"text-sm font-medium mb-2",children:"Current Referenced Layers:"}),t.value.size===0?r("div",{className:"text-slate-400 text-sm italic",children:"None"}):r("div",{className:"font-mono text-sm text-blue-300",children:Array.from(t.value).join(", ")})]}),r("div",{className:"p-3 bg-slate-700 rounded",children:[r("div",{className:"text-sm font-medium mb-2",children:"Available Layers:"}),e.value.length===0?r("div",{className:"text-slate-400 text-sm",children:"No layers found. Add some layers first."}):r("div",{className:"flex flex-wrap gap-2",children:e.value.map(a=>r("button",{onClick:()=>ra(a),className:`px-2 py-1 rounded text-xs font-mono transition-colors ${lt(a)?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-slate-300 hover:bg-slate-500"}`,children:[lt(a)?"✓ ":"+ ",a]},a))})]})]})]}),r("div",{className:"mt-6 p-3 bg-slate-700 rounded text-sm",children:[r("h5",{className:"font-medium mb-2",children:'What does "Referenced" mean?'}),r("ul",{className:"text-slate-400 space-y-1 text-xs",children:[r("li",{children:"• Layer is referenced/used in your Dart application code"}),r("li",{children:"• Layer should be handled differently during validation"}),r("li",{children:"• Layer appears with visual indicators throughout the UI"}),r("li",{children:"• Settings are saved locally in your browser"})]})]}),t.value.size>0&&r("div",{className:"mt-4 p-3 bg-blue-900/20 border border-blue-700 rounded text-sm",children:[r("h5",{className:"font-medium mb-2 text-blue-300",children:["Referenced Layers (",t.value.size,")"]}),r("div",{className:"flex flex-wrap gap-1",children:Array.from(t.value).map(a=>r("span",{className:"font-mono text-xs bg-blue-600 text-white px-2 py-1 rounded",children:a},a))})]}),r("div",{className:"mt-8 pt-6 border-t border-slate-600",children:[r("h4",{className:"font-medium mb-3",children:"Locked Translations"}),r("p",{className:"text-sm text-slate-400 mb-3",children:`Translation keys marked as "locked" will not show warnings for missing translations. These are typically keys that don't need translation (e.g., proper nouns, technical terms).`}),r("div",{className:"p-3 bg-slate-700 rounded",children:n.value.size===0?r("div",{className:"text-slate-400 text-sm italic",children:"No locked translation keys"}):r("div",{className:"space-y-2",children:[r("div",{className:"text-sm font-medium mb-2",children:["Locked Keys (",n.value.size,"):"]}),r("div",{className:"flex flex-wrap gap-2",children:Array.from(n.value).sort().map(a=>r("div",{className:"flex items-center gap-1 px-2 py-1 bg-amber-900/30 border border-amber-700 rounded text-xs",children:[r("span",{className:"font-mono text-amber-300",children:a}),r("button",{onClick:()=>tr(a),className:"ml-1 text-amber-400 hover:text-red-400 transition-colors",title:"Unlock this key",children:"×"})]},a))})]})}),r("div",{className:"mt-3 p-3 bg-slate-700 rounded text-sm",children:[r("h5",{className:"font-medium mb-2",children:"How to lock a translation key?"}),r("ul",{className:"text-slate-400 space-y-1 text-xs",children:[r("li",{children:"• Go to the Translations tab"}),r("li",{children:"• Select the key you want to lock"}),r("li",{children:'• Click the "Lock" button in the editor panel'}),r("li",{children:"• Locked keys won't trigger missing translation warnings"})]})]})]})]})]})}function Cs({onOpenClick:e}){return r("div",{className:"flex items-center justify-center min-h-[60vh]",onPaste:s=>{const c=s.clipboardData?.getData("text");if(c)try{const o=JSON.parse(c),u=Dt(o);z(u);const i=o.map_layers!==void 0;se(`✅ JSON pasted from clipboard${i?" (extracted from map_layers)":""}`)}catch{}},children:r("div",{className:"w-full max-w-2xl text-center p-8 border border-dashed border-slate-600 rounded-xl bg-slate-900/40",onDrop:s=>{s.preventDefault();const o=Array.from(s.dataTransfer?.files||[]).find(u=>u.type==="application/json"||u.name.endsWith(".json"));if(o){const u=new FileReader;u.onload=i=>{const f=i.target?.result;if(f)try{const d=JSON.parse(f),p=Dt(d);z(p);const m=d.map_layers!==void 0;se(`✅ JSON file loaded successfully${m?" (extracted from map_layers)":""}`)}catch{}},u.readAsText(o)}},onDragOver:s=>{s.preventDefault()},children:[r("h2",{className:"text-lg mb-2 text-slate-100",children:"Get Started"}),r("p",{className:"mb-4 text-slate-400",children:"Choose an option to begin"}),r("div",{className:"flex flex-col gap-2 items-center",children:[r("button",{className:"btn primary",onClick:()=>{z(qt())},children:"Start with Empty Structure"}),r("button",{className:"btn",onClick:e,children:"Open Existing JSON…"})]}),r("div",{className:"mt-4 text-xs text-slate-500",children:"Tip: You can also drop JSON files here or paste JSON"})]})})}const Ss=[{id:"workspace",label:"Workspace"},{id:"internationalization",label:"Translations"},{id:"json",label:"JSON"},{id:"settings",label:"Settings"}];function Ls(){const e=A(null),t=T("split");Q(()=>{je.value||da()},[]),Q(()=>{const a=l=>{(l.metaKey||l.ctrlKey)&&(l.key==="s"||l.key==="S")&&(l.preventDefault(),l.stopPropagation())};return window.addEventListener("keydown",a,!0),()=>window.removeEventListener("keydown",a,!0)},[]);const n=()=>{e.current?.click()};return r("div",{className:"app",children:[r("input",{ref:e,type:"file",accept:"application/json,.json",style:{display:"none"},onChange:a=>{const l=a.target.files?.[0];if(l){const s=new FileReader;s.onload=c=>{const o=c.target?.result;if(o)try{const u=JSON.parse(o),i=Dt(u);z(i);const f=u.map_layers!==void 0;se(`✅ JSON file loaded successfully${f?" (extracted from map_layers)":""}`)}catch(u){se(`❌ Invalid JSON: ${u instanceof Error?u.message:"Parse error"}`)}},s.readAsText(l)}}}),je.value&&r("header",{className:"flex gap-3 items-center p-3 border-b border-slate-700 sticky top-0 z-[5]",style:{background:"rgba(15, 17, 21, 0.9)",backdropFilter:"saturate(1.2) blur(6px)"},children:[r("h1",{className:"text-base m-0 mr-2 opacity-95",children:"Map Layers JSON Editor"}),r("button",{className:"btn",onClick:n,children:"Open JSON…"}),r("div",{className:"ml-auto",children:je.value&&r("span",{className:"text-slate-500",children:ua.value})})]}),je.value?r("div",{className:"p-3 min-h-[calc(100vh-80px)]",children:[r("div",{className:"flex gap-1 mb-3 border-b border-slate-700 pb-2",children:Ss.map(a=>r("button",{className:`px-4 py-2 rounded-t-md text-xs transition-all duration-150 text-decoration-none ${he.value===a.id?"bg-blue-500 text-white border-blue-500":"bg-slate-950 text-slate-500 border border-slate-700 hover:border-slate-600 hover:text-slate-200"}`,onClick:()=>he.value=a.id,children:a.label},a.id))}),r("div",{className:"h-[calc(100vh-180px)]",style:{display:he.value==="workspace"?"block":"none"},children:r(vs,{})}),he.value==="internationalization"&&r("div",{children:[r("div",{className:"flex gap-1 mb-3 border-b border-slate-700 pb-2",children:[r("button",{className:`px-3 py-1.5 rounded text-xs transition-all duration-150 ${t.value==="split"?"bg-blue-500 text-white":"bg-slate-800 text-slate-500 border border-slate-700 hover:border-slate-600 hover:text-slate-200"}`,onClick:()=>t.value="split",children:"Split View"}),r("button",{className:`px-3 py-1.5 rounded text-xs transition-all duration-150 ${t.value==="table"?"bg-blue-500 text-white":"bg-slate-800 text-slate-500 border border-slate-700 hover:border-slate-600 hover:text-slate-200"}`,onClick:()=>t.value="table",children:"Table View"})]}),t.value==="split"&&r("div",{className:"flex gap-3 h-[calc(100vh-200px)] overflow-hidden",children:[r("div",{className:"flex-1 min-w-0 bg-slate-800 border border-slate-700 rounded-xl p-3 flex flex-col",children:r("div",{className:"flex-1 min-h-0 overflow-auto",children:r(xs,{selectedKey:Xe.value,onSelectKey:a=>Xe.value=a})})}),r("div",{className:"flex-1 min-w-0 bg-slate-800 border border-slate-700 rounded-xl p-3 flex flex-col",children:r(Ns,{selectedKey:Xe.value})})]}),t.value==="table"&&r("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-3 flex flex-col h-[calc(100vh-200px)]",children:r("div",{className:"flex-1 min-h-0",children:r(ys,{})})})]}),he.value==="json"&&r("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-3 flex flex-col h-[calc(100vh-180px)]",children:[r("div",{className:"flex-1 min-h-0",children:r(Zl,{title:"Complete JSON Configuration",value:_.value,onChange:a=>{z(a)},height:"100%"})}),r("div",{className:"flex gap-2 mt-3 pt-3 border-t border-slate-700 flex-shrink-0",children:[r("button",{className:"btn small",onClick:()=>{const a=sa(JSON.stringify(_.value));a.valid||se(`❌ Validation failed: ${a.errors.length} error(s), ${a.warnings.length} warning(s)`)},children:"Validate Structure"}),r("button",{className:"btn success small",onClick:()=>{try{const a=JSON.stringify(_.value,null,2),l=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-");Kr(`map-layers-${l}.json`,a),se("✅ JSON file downloaded")}catch{}},children:"Download JSON"})]})]}),he.value==="settings"&&r("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-3",children:r(ws,{})})]}):r("div",{className:"p-6",children:r(Cs,{onOpenClick:n})}),r(gs,{})]})}Le(r(Ls,{}),document.getElementById("app"));
