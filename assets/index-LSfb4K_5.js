const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/statsWorker-B0v5Il_L.js","assets/utils-CAWgpy3d.js","assets/utils-B-DwInx1.js","assets/ClassBreaksDefinition-CGl1FG64.js","assets/geometryEngineWorker-UDzsvDvQ.js","assets/geometryEngineJSON-CkE0LNdo.js","assets/geometryEngineBase-B3TnM2zw.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-BCtTcaol.js","assets/date-DCujAECq.js","assets/FeatureStore-CfTeCy7x.js","assets/BoundsStore-C6aichMz.js","assets/PooledRBush-vtc5GRUC.js","assets/timeSupport-Bo7h2Al3.js","assets/queryUtils-CginLUzF.js","assets/optimizedFeatureQueryEngineAdapter-ChLeeYdy.js","assets/QueryEngine-CZ8kN0Yy.js","assets/WhereClauseCache-BpfBjjbj.js","assets/WhereClause-DpJmaD6R.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-DS4YEU3X.js","assets/number-CMEj7Kg_.js","assets/locationUtils-Bkcdt5yb.js","assets/clientSideDefaults-BcFJFNHP.js","assets/EdgeProcessingWorker-OKSCBPmI.js","assets/workerHelper-CwjcomRI.js","assets/InterleavedLayout-CNnI-qdM.js","assets/BufferView-SAYw406X.js","assets/types-BKo2foNY.js","assets/edgeProcessing-Clm0p7XX.js","assets/deduplicate-BIOZRGPO.js","assets/Indices-Ca8Gdu6i.js","assets/Normals-DhG1nPof.js","assets/ElevationSamplerWorker-ttRDDbpp.js","assets/MeshLocalVertexSpace-D0CoIUzl.js","assets/vertexSpaceConversion-Dsfuo32b.js","assets/spatialReferenceEllipsoidUtils-C2JYCpbt.js","assets/computeTranslationToOriginAndRotation-QklKmvPE.js","assets/projectPointToVector-DL2xrNCD.js","assets/meshVertexSpaceUtils-BqdaGhTB.js","assets/vec3-9C6xXl5w.js","assets/vec4--H9-yEh_.js","assets/FeatureServiceSnappingSourceWorker-DiG4UQ4K.js","assets/symbologySnappingCandidates-DEogVLVj.js","assets/GeoJSONSourceWorker-4V5sCvCU.js","assets/geojson-BujoBvZU.js","assets/sourceUtils-DnL43_gW.js","assets/MemorySourceWorker-Ba8qOFcM.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-Bt8Lr_fT.js","assets/dehydratedFeatures-DedXcn-b.js","assets/FeaturePipelineWorker-B967-xTt.js","assets/AttributeStore-BBkXkx6M.js","assets/Utils-Bz2JJ_lA.js","assets/UpdateTracking2D-BqpRgtl7.js","assets/FeatureStoreQueryAdapter-3ndZnFUI.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/MeshWriterRegistry-CWib3hqs.js","assets/TexturedLineMeshWriter-OAmRXS2H.js","assets/TurboLine-wi7_YDSE.js","assets/grouping-CGiw34Mq.js","assets/QueueProcessor-DNo2hVzB.js","assets/FeatureMetadata-B719GbXN.js","assets/SourceChunkStore-D-JpLeSh.js","assets/parquet-i7ovCogo.js","assets/operatorGeodeticDensify-CWrrDM4A.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-1LJyHVp3.js","assets/FeatureIdInfo-BIa1lcwY.js","assets/ogcFeatureUtils-BQ6C3QLS.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-CQXy23BY.js","assets/PointCloudWorker-BYHAhFBd.js","assets/quat-4tU-QRvQ.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-DPLKDY1d.js","assets/I3SBinaryReader-DPVylJpJ.js","assets/orientedBoundingBox-DR2qqQAS.js","assets/plane-CHKo_o85.js","assets/vectorStacks-DbVMY2gB.js","assets/RasterWorker-C9xaP8A2.js","assets/PixelBlock-tuxA1t7P.js","assets/RasterSymbolizer-DBFWQVme.js","assets/vectorFieldUtils-DeJ6Rj16.js","assets/rasterFunctionHelper-D4hLeQSq.js","assets/clipUtils-BAQ2GZ7x.js","assets/rasterProjectionHelper-BOEvOSmb.js","assets/PolynomialTransform-Cu-mtaz8.js","assets/dataUtils-9hogSban.js","assets/SceneLayerSnappingSourceWorker-DiQXAemL.js","assets/lineSegment-DdL3trlj.js","assets/sphere-3pu37WhL.js","assets/Octree-B8PeUNVJ.js","assets/frustum-CdxlPMqc.js","assets/SceneLayerWorker-mYnvBe2K.js","assets/projectVectorToVector-Di35gVWe.js","assets/WFSSourceWorker-CYvNQC_F.js","assets/wfsUtils-C-TJIvgc.js","assets/WorkerTileHandler-DAzq4grH.js","assets/config-BOD8--da.js","assets/SourceLayerData-BsCDYvpZ.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-CgH9fb6m.js","assets/HUDMaterial.glsl-DWnr5oYG.js","assets/hydratedFeatures-DwzV3ojF.js","assets/OutputColorHighlightOID.glsl-COTIdGIo.js","assets/triangle-DN_ZmNRu.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-Ci7ujUVo.js","assets/placementUtils-BQNhcaqL.js","assets/sdfPrimitives-CCXZhu7v.js","assets/Texture-CCooxY80.js","assets/videoUtils-CYZNl6v8.js","assets/requestImageUtils-D7pnmFEQ.js","assets/primitiveObjectSymbolUtils-BZIa4duq.js","assets/RealisticTree.glsl-rG0fBzmY.js","assets/VertexBuffer-HRZi1zNj.js","assets/BufferObject-T9skqN59.js","assets/boundedPlane-6lElkHuA.js","assets/FlowWorker-C03Qvkz5.js","assets/ParquetSourceWorker-H-cr-MHH.js","assets/parquetUtils-CT5-_UuV.js","assets/PanoramicMeshWorker-t5K-_GTW.js","assets/projectOperator-Ct2HFWm2.js","assets/operatorProject-0cMyjhDd.js","assets/projectOperator-DF5rLgE5.js","assets/Popup-CQo_rTbJ.js","assets/throttle-86ScY4zZ.js","assets/unitFormatUtils-BJGunfl6.js","assets/quantityUtils-Kk2yDqid.js","assets/AttachmentInfo-DE33Iucd.js","assets/featureUtils-DgxbUALK.js","assets/shared-H0Rb_WiQ.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/ReactiveSet-DIeLRqx3.js","assets/layerViewUtils-D9FaFgVn.js","assets/ElevationLayer-rUEo_IaH.js","assets/WorkerHandle-CMFvTv2R.js","assets/portalLayers-DxCKi7J2.js","assets/associatedFeatureServiceUtils-S3D4I-wQ.js","assets/fetchService-Du-j0ZlO.js","assets/loadUtils-nPRGkICM.js","assets/lazyLayerLoader-BEHTx8Y7.js","assets/arcgisLayers-Cj_mJwnE.js","assets/layersCreator-bLz-Ln8H.js","assets/ElevationQuery-DENvZHvz.js","assets/GeometryDescriptor-C_RRWffR.js","assets/arcadeUtils-D_phEX8D.js","assets/arcade-SyhEWdG1.js","assets/arcadeEnvironment-Cd17trbM.js","assets/Dictionary-ujjl6rgp.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-U8FSR2pl.js","assets/aiServices-D2fynXcR.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-DA1Ea_1o.js","assets/rasterFieldUtils-DIrhk-KG.js","assets/batchExec-CHFEsz8K.js","assets/webglDeps-DoRE9HE8.js","assets/FramebufferObject-CYRkJEPf.js","assets/ProgramTemplate-BBgXiEjf.js","assets/VertexArrayObject-PcHgniAP.js","assets/mapViewDeps-BbgrU6lf.js","assets/FeatureCommandQueue-YeJldR-m.js","assets/GraphShaderModule-Cc58YHiZ.js","assets/utils-CgZlP_R2.js","assets/WGLContainer-DP0A4ldb.js","assets/Container-BeBUYX8S.js","assets/SDFHelper-BA8HfBY1.js","assets/GridShader-CvG2-PNx.js","assets/testSVGPremultipliedAlpha-CpBtkcNk.js","assets/SymbolFader-CnrqKwoQ.js","assets/RenderingContext-BMufouxU.js","assets/utils-C50Hce6G.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-OoqkTPyA.js","assets/densifyCurvedGeometry-CxOwkL6L.js","assets/GraphicContainer-GhoaM_eJ.js","assets/AGraphicContainer-BLB_Amr3.js","assets/TechniqueInstance-B5wtfWWa.js","assets/TileContainer-w1DR2MaC.js","assets/gridUtils-DvNeBLje.js","assets/geodesicUtils-BVAwqGl1.js","assets/TileLayerView2D-DG4MSdXR.js","assets/imageUtils-DRs3pRdX.js","assets/BitmapTechnique-BF5_AZFu.js","assets/bitmapUtils-it-7y7il.js","assets/LayerView2D-CySoU-GX.js","assets/HighlightGraphicContainer-BeBD-E51.js","assets/LayerView-gB6Vt6Q8.js","assets/RefreshableLayerView-Bfcr2knq.js","assets/MapServiceLayerViewHelper-O-UpwBnd.js","assets/drapedUtils-BPDldVef.js","assets/popupUtils-BL9dOhNc.js","assets/highlightOptionsUtils-DJti5GrY.js","assets/FeatureLayerView2D-Bzo3579A.js","assets/timeSupport-DJa_t4CS.js","assets/AttributeBinsFeatureSet-yaInlq2Z.js","assets/AttributeBinsQuery-k2p38Poh.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-M4w3SZzx.js","assets/BitmapContainer-DejgCvRp.js","assets/ExportStrategy-BJoXWL9o.js","assets/CatalogLayerView2D-BXqY49wx.js","assets/CatalogDynamicGroupLayerView2D-CHiObe8O.js","assets/CatalogFootprintLayerView2D-D8YGpSPO.js","assets/GeoRSSLayerView2D-D7Y7NUpD.js","assets/GraphicsLayerView2D-GCGuyI5i.js","assets/GroupLayerView2D-obGSQLBu.js","assets/ImageryLayerView2D-D0SRoLbi.js","assets/RasterVFDisplayObject-4sI3xeJA.js","assets/ImageryTileLayerView2D-BNqSkowk.js","assets/datasetUtils-CJBbH57J.js","assets/rasterUtils-BccWredP.js","assets/RawBlockCache-CQ-IqnbA.js","assets/KMLLayerView2D-B8fidfpM.js","assets/kmlUtils-D30P6eyK.js","assets/KnowledgeGraphLayerView2D-CLmJmD0O.js","assets/MapImageLayerView2D-CTuNeTFu.js","assets/MapNotesLayerView2D-oGOmI-_n.js","assets/MediaLayerView2D-CEc_J5Ys.js","assets/mediaLayerUtils-DFhu-aZf.js","assets/OverlayContainer--bta8kTO.js","assets/OGCFeatureLayerView2D-rLsEC2oY.js","assets/RouteLayerView2D-BuqxZHFq.js","assets/Stop-Cq5MIOQA.js","assets/networkEnums-E5KAuIgm.js","assets/StreamLayerView2D-B7mwdFKU.js","assets/SubtypeGroupLayerView2D-D0anllUQ.js","assets/VectorTileLayerView2D-10PKspaY.js","assets/VideoLayerView2D-DIdxy6J9.js","assets/GraphicsLayer-BYZTk8Id.js","assets/videoUtils-Cw4NYzty.js","assets/ControlPoint-BRW4sXdy.js","assets/WMSLayerView2D-tDA7MbAT.js","assets/WMTSLayerView2D-LayfdtoK.js","assets/ElevationProfileAnalysisView2D-NYize-yY.js","assets/createUtils-CC0Sh7lE.js","assets/distanceOperator-CXEVZTOo.js","assets/Point2D-ByVU2sJE.js","assets/Distance2DCalculator-CXhBP-8I-WH5JnWdj.js","assets/ProjectionTransformation-BNeGGerH.js","assets/Envelope2D-PYZ6irrd.js","assets/Transformation2D-HOoFpL6n.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-PfwcX2z1.js","assets/jsonConverter-BAwir9h3.js","assets/simplifyOperator-Bgt2uLCA.js","assets/operatorSimplify-DSxUwO_s.js","assets/mapCollectionUtils-rVEwUX06.js","assets/elevationInfoUtils-WwUfQg3s.js","assets/getDefaultUnitForView-D28Hsk_J.js","assets/SketchViewModel-W0JQI4bL.js","assets/hitTestSelectUtils-DJX9jsp0.js","assets/geodeticLengthOperator-kh37GBod.js","assets/apng-ngz7J16i.js","assets/webdocSaveUtils-0hQ9niVZ.js","assets/originUtils-RytQ2x56.js","assets/basemapUtils-Dmd7J7vz.js","assets/resourceUtils-CffIQOGg.js","assets/resourceUtils-DQnprA-L.js","assets/saveUtils-5civnTTR.js","assets/layersLoader-4tcilTpW.js","assets/featureLayerUtils-D9cvKfuL.js","assets/utils-CNRKAECd.js","assets/FeatureLayerSource-DvpneCUP.js","assets/External-NqXY_Ot7.js","assets/applyEditsUtils-Bw66MWjF.js","assets/MeshTransform-DZLceZNJ.js","assets/axisAngleDegrees-7TeTqTZF.js","assets/editingSupport-BpA7e-w3.js","assets/queryAssociations-Bxi-HmTz.js","assets/Association-DnI48JMS.js","assets/synthesizeAssociationGeometries-CjX0B0yu.js","assets/previewSymbol2D-D0iFN_BY.js","assets/bufferOperator-D0a6UHke.js","assets/operatorBuffer-fN68a6mx.js","assets/Bufferer-Dw9Qi4T1-BC0d0fla.js","assets/GeometryCleaner-BEJM7I4l-B71Cw7gc.js","assets/OperatorSimplifyOGC-ChYE6b2W.js","assets/OperatorGeneralize-C-zGNv1E.js","assets/convexHullOperator-CNxggEL9.js","assets/operatorConvexHull-CkVsRlHR.js","assets/lengthOperator-C1YiFZ_w.js","assets/generalizeOperator-BAfZt8iA.js","assets/operatorGeneralize-BxLK5yAU.js","assets/graphicBufferOperator-B5mwp_xS.js","assets/offsetOperator-Blu4Mdxx.js","assets/operatorOffset-1DUz8-wQ.js","assets/simplifyOperator-BDvNxqX8.js","assets/meshFeatureSet-DxILNKkD.js","assets/Mesh-D2F_WTE4.js","assets/MeshComponent-ByLZoHH_.js","assets/meshProperties-DWLWd_LJ.js","assets/MeshVertexAttributes-BBtuPdqL.js","assets/triangulationUtils-CSJ9D-Bu.js","assets/meshFeatureAttributes-BdHgLxaB.js","assets/queryAttachments-Dn4p2BYd.js","assets/executeAttributeBinsQuery-CofgsqBZ.js","assets/executePivotQuery-BY-WrYqK.js","assets/PivotQuery-CY7g4isN.js","assets/executeTopFeaturesQuery-B_aoI-Ha.js","assets/queryTopFeatures-Y1JHLvml.js","assets/TopFeaturesQuery-BjmompIg.js","assets/executeForTopIds-B5X25V8R.js","assets/executeForTopExtents-B7bde419.js","assets/executeForTopCount-Dpewec_E.js","assets/mapImageLayerUtils-DrBrcCgF.js"])))=>i.map(i=>d[i]);
var Wve=Object.getPrototypeOf;var Jve=Reflect.get;var W7=t=>{throw TypeError(t)};var kL=(t,e,i)=>e.has(t)||W7("Cannot "+i);var pe=(t,e,i)=>(kL(t,e,"read from private field"),i?i.call(t):e.get(t)),_t=(t,e,i)=>e.has(t)?W7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),mt=(t,e,i,r)=>(kL(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),sl=(t,e,i)=>(kL(t,e,"access private method"),i);var J7=(t,e,i)=>Jve(Wve(t),i,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();var s2,gt,AQ,LQ,Wm,Z7,OQ,RQ,NQ,LV,UN,BN,DQ,t$={},FQ=[],Zve=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,n2=Array.isArray;function bu(t,e){for(var i in e)t[i]=e[i];return t}function OV(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function yh(t,e,i){var r,s,n,o={};for(n in e)n=="key"?r=e[n]:n=="ref"?s=e[n]:o[n]=e[n];if(arguments.length>2&&(o.children=arguments.length>3?s2.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)o[n]===void 0&&(o[n]=t.defaultProps[n]);return Kx(t,o,r,s,null)}function Kx(t,e,i,r,s){var n={type:t,props:e,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++AQ,__i:-1,__u:0};return s==null&&gt.vnode!=null&&gt.vnode(n),n}function Yve(){return{current:null}}function Dr(t){return t.children}function Kl(t,e){this.props=t,this.context=e}function ww(t,e){if(e==null)return t.__?ww(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?ww(t):null}function zQ(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return zQ(t)}}function qN(t){(!t.__d&&(t.__d=!0)&&Wm.push(t)&&!dM.__r++||Z7!=gt.debounceRendering)&&((Z7=gt.debounceRendering)||OQ)(dM)}function dM(){for(var t,e,i,r,s,n,o,a=1;Wm.length;)Wm.length>a&&Wm.sort(RQ),t=Wm.shift(),a=Wm.length,t.__d&&(i=void 0,s=(r=(e=t).__v).__e,n=[],o=[],e.__P&&((i=bu({},r)).__v=r.__v+1,gt.vnode&&gt.vnode(i),RV(e.__P,i,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,n,s??ww(r),!!(32&r.__u),o),i.__v=r.__v,i.__.__k[i.__i]=i,UQ(n,i,o),i.__e!=s&&zQ(i)));dM.__r=0}function jQ(t,e,i,r,s,n,o,a,l,c,d){var h,f,m,y,v,b,w=r&&r.__k||FQ,x=e.length;for(l=Kve(i,e,w,l,x),h=0;h<x;h++)(m=i.__k[h])!=null&&(f=m.__i==-1?t$:w[m.__i]||t$,m.__i=h,b=RV(t,m,f,s,n,o,a,l,c,d),y=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&NV(f.ref,null,m),d.push(m.ref,m.__c||y,m)),v==null&&y!=null&&(v=y),4&m.__u||f.__k===m.__k?l=VQ(m,l,t):typeof m.type=="function"&&b!==void 0?l=b:y&&(l=y.nextSibling),m.__u&=-7);return i.__e=v,l}function Kve(t,e,i,r,s){var n,o,a,l,c,d=i.length,h=d,f=0;for(t.__k=new Array(s),n=0;n<s;n++)(o=e[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=n+f,(o=t.__k[n]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Kx(null,o,null,null,null):n2(o)?Kx(Dr,{children:o},null,null,null):o.constructor==null&&o.__b>0?Kx(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,a=null,(c=o.__i=Xve(o,i,l,h))!=-1&&(h--,(a=i[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(s>d?f--:s<d&&f++),typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?f--:c==l+1?f++:(c>l?f--:f++,o.__u|=4))):t.__k[n]=null;if(h)for(n=0;n<d;n++)(a=i[n])!=null&&!(2&a.__u)&&(a.__e==r&&(r=ww(a)),qQ(a,a));return r}function VQ(t,e,i){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=VQ(r[s],e,i));return e}t.__e!=e&&(e&&t.type&&!i.contains(e)&&(e=ww(t)),i.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function oh(t,e){return e=e||[],t==null||typeof t=="boolean"||(n2(t)?t.some(function(i){oh(i,e)}):e.push(t)),e}function Xve(t,e,i,r){var s,n,o,a=t.key,l=t.type,c=e[i],d=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||d&&a==c.key&&l==c.type)return i;if(r>(d?1:0)){for(s=i-1,n=i+1;s>=0||n<e.length;)if((c=e[o=s>=0?s--:n++])!=null&&!(2&c.__u)&&a==c.key&&l==c.type)return o}return-1}function Y7(t,e,i){e[0]=="-"?t.setProperty(e,i??""):t[e]=i==null?"":typeof i!="number"||Zve.test(e)?i:i+"px"}function oI(t,e,i,r,s){var n,o;e:if(e=="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)i&&e in i||Y7(t.style,e,"");if(i)for(e in i)r&&i[e]==r[e]||Y7(t.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")n=e!=(e=e.replace(NQ,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=i,i?r?i.u=r.u:(i.u=LV,t.addEventListener(e,n?BN:UN,n)):t.removeEventListener(e,n?BN:UN,n);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&i==1?"":i))}}function K7(t){return function(e){if(this.l){var i=this.l[e.type+t];if(e.t==null)e.t=LV++;else if(e.t<i.u)return;return i(gt.event?gt.event(e):e)}}}function RV(t,e,i,r,s,n,o,a,l,c){var d,h,f,m,y,v,b,w,x,S,$,T,C,L,N,D,F,W=e.type;if(e.constructor!=null)return null;128&i.__u&&(l=!!(32&i.__u),n=[a=e.__e=i.__e]),(d=gt.__b)&&d(e);e:if(typeof W=="function")try{if(w=e.props,x="prototype"in W&&W.prototype.render,S=(d=W.contextType)&&r[d.__c],$=d?S?S.props.value:d.__:r,i.__c?b=(h=e.__c=i.__c).__=h.__E:(x?e.__c=h=new W(w,$):(e.__c=h=new Kl(w,$),h.constructor=W,h.render=ebe),S&&S.sub(h),h.props=w,h.state||(h.state={}),h.context=$,h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),x&&h.__s==null&&(h.__s=h.state),x&&W.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=bu({},h.__s)),bu(h.__s,W.getDerivedStateFromProps(w,h.__s))),m=h.props,y=h.state,h.__v=e,f)x&&W.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),x&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(x&&W.getDerivedStateFromProps==null&&w!==m&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(w,$),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(w,h.__s,$)===!1||e.__v==i.__v){for(e.__v!=i.__v&&(h.props=w,h.state=h.__s,h.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),T=0;T<h._sb.length;T++)h.__h.push(h._sb[T]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(w,h.__s,$),x&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(m,y,v)})}if(h.context=$,h.props=w,h.__P=t,h.__e=!1,C=gt.__r,L=0,x){for(h.state=h.__s,h.__d=!1,C&&C(e),d=h.render(h.props,h.state,h.context),N=0;N<h._sb.length;N++)h.__h.push(h._sb[N]);h._sb=[]}else do h.__d=!1,C&&C(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++L<25);h.state=h.__s,h.getChildContext!=null&&(r=bu(bu({},r),h.getChildContext())),x&&!f&&h.getSnapshotBeforeUpdate!=null&&(v=h.getSnapshotBeforeUpdate(m,y)),D=d,d!=null&&d.type===Dr&&d.key==null&&(D=BQ(d.props.children)),a=jQ(t,n2(D)?D:[D],e,i,r,s,n,o,a,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),b&&(h.__E=h.__=null)}catch(Z){if(e.__v=null,l||n!=null)if(Z.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;n[n.indexOf(a)]=null,e.__e=a}else{for(F=n.length;F--;)OV(n[F]);GN(e)}else e.__e=i.__e,e.__k=i.__k,Z.then||GN(e);gt.__e(Z,e,i)}else n==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):a=e.__e=Qve(i.__e,e,i,r,s,n,o,l,c);return(d=gt.diffed)&&d(e),128&e.__u?void 0:a}function GN(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(GN)}function UQ(t,e,i){for(var r=0;r<i.length;r++)NV(i[r],i[++r],i[++r]);gt.__c&&gt.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(n){n.call(s)})}catch(n){gt.__e(n,s.__v)}})}function BQ(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:n2(t)?t.map(BQ):bu({},t)}function Qve(t,e,i,r,s,n,o,a,l){var c,d,h,f,m,y,v,b=i.props,w=e.props,x=e.type;if(x=="svg"?s="http://www.w3.org/2000/svg":x=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),n!=null){for(c=0;c<n.length;c++)if((m=n[c])&&"setAttribute"in m==!!x&&(x?m.localName==x:m.nodeType==3)){t=m,n[c]=null;break}}if(t==null){if(x==null)return document.createTextNode(w);t=document.createElementNS(s,x,w.is&&w),a&&(gt.__m&&gt.__m(e,n),a=!1),n=null}if(x==null)b===w||a&&t.data==w||(t.data=w);else{if(n=n&&s2.call(t.childNodes),b=i.props||t$,!a&&n!=null)for(b={},c=0;c<t.attributes.length;c++)b[(m=t.attributes[c]).name]=m.value;for(c in b)if(m=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=m;else if(!(c in w)){if(c=="value"&&"defaultValue"in w||c=="checked"&&"defaultChecked"in w)continue;oI(t,c,null,m,s)}}for(c in w)m=w[c],c=="children"?f=m:c=="dangerouslySetInnerHTML"?d=m:c=="value"?y=m:c=="checked"?v=m:a&&typeof m!="function"||b[c]===m||oI(t,c,m,b[c],s);if(d)a||h&&(d.__html==h.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(h&&(t.innerHTML=""),jQ(e.type=="template"?t.content:t,n2(f)?f:[f],e,i,r,x=="foreignObject"?"http://www.w3.org/1999/xhtml":s,n,o,n?n[0]:i.__k&&ww(i,0),a,l),n!=null)for(c=n.length;c--;)OV(n[c]);a||(c="value",x=="progress"&&y==null?t.removeAttribute("value"):y!=null&&(y!==t[c]||x=="progress"&&!y||x=="option"&&y!=b[c])&&oI(t,c,y,b[c],s),c="checked",v!=null&&v!=t[c]&&oI(t,c,v,b[c],s))}return t}function NV(t,e,i){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){gt.__e(s,i)}}function qQ(t,e,i){var r,s;if(gt.unmount&&gt.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||NV(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(n){gt.__e(n,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&qQ(r[s],e,i||typeof t.type!="function");i||OV(t.__e),t.__c=t.__=t.__e=void 0}function ebe(t,e,i){return this.constructor(t,i)}function _w(t,e,i){var r,s,n,o;e==document&&(e=document.documentElement),gt.__&&gt.__(t,e),s=(r=typeof i=="function")?null:i&&i.__k||e.__k,n=[],o=[],RV(e,t=(!r&&i||e).__k=yh(Dr,null,[t]),s||t$,t$,e.namespaceURI,!r&&i?[i]:s?null:e.firstChild?s2.call(e.childNodes):null,n,!r&&i?i:s?s.__e:e.firstChild,r,o),UQ(n,t,o)}function GQ(t,e){_w(t,e,GQ)}function tbe(t,e,i){var r,s,n,o,a=bu({},t.props);for(n in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)n=="key"?r=e[n]:n=="ref"?s=e[n]:a[n]=e[n]===void 0&&o!=null?o[n]:e[n];return arguments.length>2&&(a.children=arguments.length>3?s2.call(arguments,2):i),Kx(t.type,a,r||t.key,s||t.ref,null)}function ibe(t){function e(i){var r,s;return this.getChildContext||(r=new Set,(s={})[e.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&r.forEach(function(o){o.__e=!0,qN(o)})},this.sub=function(n){r.add(n);var o=n.componentWillUnmount;n.componentWillUnmount=function(){r&&r.delete(n),o&&o.call(n)}}),i.children}return e.__c="__cC"+DQ++,e.__=t,e.Provider=e.__l=(e.Consumer=function(i,r){return i.children(r)}).contextType=e,e}s2=FQ.slice,gt={__e:function(t,e,i,r){for(var s,n,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((n=s.constructor)&&n.getDerivedStateFromError!=null&&(s.setState(n.getDerivedStateFromError(t)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),o=s.__d),o)return s.__E=s}catch(a){t=a}throw t}},AQ=0,LQ=function(t){return t!=null&&t.constructor==null},Kl.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=bu({},this.state),typeof t=="function"&&(t=t(bu({},i),this.props)),t&&bu(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),qN(this))},Kl.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),qN(this))},Kl.prototype.render=Dr,Wm=[],OQ=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,RQ=function(t,e){return t.__v.__b-e.__v.__b},dM.__r=0,NQ=/(PointerCapture)$|Capture$/i,LV=0,UN=K7(!1),BN=K7(!0),DQ=0;var rbe=0;function _(t,e,i,r,s,n){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var c={type:t,props:l,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--rbe,__i:-1,__u:0,__source:s,__self:n};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return gt.vnode&&gt.vnode(c),c}const tr=(t,e,...i)=>{try{return t?.call(e,...i)}catch(r){console.error(r,t)}},HN=async(t,e,...i)=>{try{return await t?.call(e,...i)}catch(r){console.error(r,t)}},DV=Symbol.for("controller"),sbe=t=>typeof t=="object"&&t!==null&&(DV in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),nbe=t=>typeof t?.then=="function",obe=t=>t.M.length;let j1;const Ub=t=>{j1!==t&&(j1=t,queueMicrotask(()=>j1===t?j1=void 0:0))},c_=t=>j1;let um=[];const FV=t=>{if(t===void 0){um=[];return}const e=um.indexOf(t);um=e===-1?[...um,t]:um.slice(0,e+1),queueMicrotask(()=>um=[])},zV=()=>um;let Bb;const abe=t=>{Bb!==t&&(Bb=t,queueMicrotask(()=>Bb===t?Bb=void 0:0))},lbe=()=>{const t=Bb;return Bb=void 0,t},cbe=async(t,e)=>{const i=jV(t);if(i===void 0)return t;if(await i.ready,typeof e=="function"){const r=i.watchExports(s=>e(s,r))}return i.exports},ube=async t=>{const e=jV(t);return await e.ready,e},jV=t=>{const i=c_().manager.X(t);if(i!==void 0)return i;if(sbe(t))return t;const r=lbe();if(r!==void 0)return r};let WN=!1;const dbe=t=>{WN=!0;try{return t()}finally{WN=!1}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const aT=globalThis,VV=aT.ShadowRoot&&(aT.ShadyCSS===void 0||aT.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,UV=Symbol(),X7=new WeakMap;let HQ=class{constructor(e,i,r){if(this._$cssResult$=!0,r!==UV)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=i}get styleSheet(){let e=this.o;const i=this.t;if(VV&&e===void 0){const r=i!==void 0&&i.length===1;r&&(e=X7.get(i)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&X7.set(i,e))}return e}toString(){return this.cssText}};const hbe=t=>new HQ(typeof t=="string"?t:t+"",void 0,UV),Qe=(t,...e)=>{const i=t.length===1?t[0]:e.reduce((r,s,n)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[n+1],t[0]);return new HQ(i,t,UV)},pbe=(t,e)=>{if(VV)t.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of e){const r=document.createElement("style"),s=aT.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=i.cssText,t.appendChild(r)}},Q7=VV?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let i="";for(const r of e.cssRules)i+=r.cssText;return hbe(i)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:fbe,defineProperty:mbe,getOwnPropertyDescriptor:ybe,getOwnPropertyNames:gbe,getOwnPropertySymbols:vbe,getPrototypeOf:bbe}=Object,nf=globalThis,eB=nf.trustedTypes,wbe=eB?eB.emptyScript:"",_be=nf.reactiveElementPolyfillSupport,Xx=(t,e)=>t,JN={toAttribute(t,e){switch(e){case Boolean:t=t?wbe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=t!==null;break;case Number:i=t===null?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},BV=(t,e)=>!fbe(t,e),tB={attribute:!0,type:String,converter:JN,reflect:!1,useDefault:!1,hasChanged:BV};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),nf.litPropertyMetadata??(nf.litPropertyMetadata=new WeakMap);let Ov=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,i=tB){if(i.state&&(i.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((i=Object.create(i)).wrapped=!0),this.elementProperties.set(e,i),!i.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,i);s!==void 0&&mbe(this.prototype,e,s)}}static getPropertyDescriptor(e,i,r){const{get:s,set:n}=ybe(this.prototype,e)??{get(){return this[i]},set(o){this[i]=o}};return{get:s,set(o){const a=s?.call(this);n?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??tB}static _$Ei(){if(this.hasOwnProperty(Xx("elementProperties")))return;const e=bbe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Xx("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Xx("properties"))){const i=this.properties,r=[...gbe(i),...vbe(i)];for(const s of r)this.createProperty(s,i[s])}const e=this[Symbol.metadata];if(e!==null){const i=litPropertyMetadata.get(e);if(i!==void 0)for(const[r,s]of i)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const s=this._$Eu(i,r);s!==void 0&&this._$Eh.set(s,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const i=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)i.unshift(Q7(s))}else e!==void 0&&i.push(Q7(e));return i}static _$Eu(e,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return pbe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,i,r){this._$AK(e,r)}_$ET(e,i){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const n=(r.converter?.toAttribute!==void 0?r.converter:JN).toAttribute(i,r.type);this._$Em=e,n==null?this.removeAttribute(s):this.setAttribute(s,n),this._$Em=null}}_$AK(e,i){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const n=r.getPropertyOptions(s),o=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:JN;this._$Em=s;const a=o.fromAttribute(i,n.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,i,r){if(e!==void 0){const s=this.constructor,n=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??BV)(n,i)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,i,{useDefault:r,reflect:s,wrapped:n},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??i??this[e]),n!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(i=void 0),this._$AL.set(e,i)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,n]of this._$Ep)this[s]=n;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,n]of r){const{wrapped:o}=n,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,n,a)}}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(i)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(i)}willUpdate(e){}_$AE(e){this._$EO?.forEach(i=>i.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(i=>this._$ET(i,this[i]))),this._$EM()}updated(e){}firstUpdated(e){}};Ov.elementStyles=[],Ov.shadowRootOptions={mode:"open"},Ov[Xx("elementProperties")]=new Map,Ov[Xx("finalized")]=new Map,_be?.({ReactiveElement:Ov}),(nf.reactiveElementVersions??(nf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qx=globalThis,hM=Qx.trustedTypes,iB=hM?hM.createPolicy("lit-html",{createHTML:t=>t}):void 0,WQ="$lit$",Ap=`lit$${Math.random().toFixed(9).slice(2)}$`,JQ="?"+Ap,xbe=`<${JQ}>`,ig=document,i$=()=>ig.createComment(""),r$=t=>t===null||typeof t!="object"&&typeof t!="function",qV=Array.isArray,Sbe=t=>qV(t)||typeof t?.[Symbol.iterator]=="function",TL=`[ 	
\f\r]`,Q_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,rB=/-->/g,sB=/>/g,Hf=RegExp(`>|${TL}(?:([^\\s"'>=/]+)(${TL}*=${TL}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),nB=/'/g,oB=/"/g,ZQ=/^(?:script|style|textarea|title)$/i,YQ=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),j=YQ(1),Ji=YQ(2),na=Symbol.for("lit-noChange"),ge=Symbol.for("lit-nothing"),aB=new WeakMap,sy=ig.createTreeWalker(ig,129);function KQ(t,e){if(!qV(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return iB!==void 0?iB.createHTML(e):e}const $be=(t,e)=>{const i=t.length-1,r=[];let s,n=e===2?"<svg>":e===3?"<math>":"",o=Q_;for(let a=0;a<i;a++){const l=t[a];let c,d,h=-1,f=0;for(;f<l.length&&(o.lastIndex=f,d=o.exec(l),d!==null);)f=o.lastIndex,o===Q_?d[1]==="!--"?o=rB:d[1]!==void 0?o=sB:d[2]!==void 0?(ZQ.test(d[2])&&(s=RegExp("</"+d[2],"g")),o=Hf):d[3]!==void 0&&(o=Hf):o===Hf?d[0]===">"?(o=s??Q_,h=-1):d[1]===void 0?h=-2:(h=o.lastIndex-d[2].length,c=d[1],o=d[3]===void 0?Hf:d[3]==='"'?oB:nB):o===oB||o===nB?o=Hf:o===rB||o===sB?o=Q_:(o=Hf,s=void 0);const m=o===Hf&&t[a+1].startsWith("/>")?" ":"";n+=o===Q_?l+xbe:h>=0?(r.push(c),l.slice(0,h)+WQ+l.slice(h)+Ap+m):l+Ap+(h===-2?a:m)}return[KQ(t,n+(t[i]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let ZN=class XQ{constructor({strings:e,_$litType$:i},r){let s;this.parts=[];let n=0,o=0;const a=e.length-1,l=this.parts,[c,d]=$be(e,i);if(this.el=XQ.createElement(c,r),sy.currentNode=this.el.content,i===2||i===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=sy.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(WQ)){const f=d[o++],m=s.getAttribute(h).split(Ap),y=/([.?@])?(.*)/.exec(f);l.push({type:1,index:n,name:y[2],strings:m,ctor:y[1]==="."?kbe:y[1]==="?"?Tbe:y[1]==="@"?Ebe:wA}),s.removeAttribute(h)}else h.startsWith(Ap)&&(l.push({type:6,index:n}),s.removeAttribute(h));if(ZQ.test(s.tagName)){const h=s.textContent.split(Ap),f=h.length-1;if(f>0){s.textContent=hM?hM.emptyScript:"";for(let m=0;m<f;m++)s.append(h[m],i$()),sy.nextNode(),l.push({type:2,index:++n});s.append(h[f],i$())}}}else if(s.nodeType===8)if(s.data===JQ)l.push({type:2,index:n});else{let h=-1;for(;(h=s.data.indexOf(Ap,h+1))!==-1;)l.push({type:7,index:n}),h+=Ap.length-1}n++}}static createElement(e,i){const r=ig.createElement("template");return r.innerHTML=e,r}};function xw(t,e,i=t,r){if(e===na)return e;let s=r!==void 0?i._$Co?.[r]:i._$Cl;const n=r$(e)?void 0:e._$litDirective$;return s?.constructor!==n&&(s?._$AO?.(!1),n===void 0?s=void 0:(s=new n(t),s._$AT(t,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=s:i._$Cl=s),s!==void 0&&(e=xw(t,s._$AS(t,e.values),s,r)),e}let Ibe=class{constructor(e,i){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:i},parts:r}=this._$AD,s=(e?.creationScope??ig).importNode(i,!0);sy.currentNode=s;let n=sy.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new bA(n,n.nextSibling,this,e):l.type===1?c=new l.ctor(n,l.name,l.strings,this,e):l.type===6&&(c=new Mbe(n,this,e)),this._$AV.push(c),l=r[++a]}o!==l?.index&&(n=sy.nextNode(),o++)}return sy.currentNode=ig,s}p(e){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,i),i+=r.strings.length-2):r._$AI(e[i])),i++}},bA=class QQ{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,i,r,s){this.type=2,this._$AH=ge,this._$AN=void 0,this._$AA=e,this._$AB=i,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&e?.nodeType===11&&(e=i.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,i=this){e=xw(this,e,i),r$(e)?e===ge||e==null||e===""?(this._$AH!==ge&&this._$AR(),this._$AH=ge):e!==this._$AH&&e!==na&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Sbe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ge&&r$(this._$AH)?this._$AA.nextSibling.data=e:this.T(ig.createTextNode(e)),this._$AH=e}$(e){const{values:i,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=ZN.createElement(KQ(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(i);else{const n=new Ibe(s,this),o=n.u(this.options);n.p(i),this.T(o),this._$AH=n}}_$AC(e){let i=aB.get(e.strings);return i===void 0&&aB.set(e.strings,i=new ZN(e)),i}k(e){qV(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,s=0;for(const n of e)s===i.length?i.push(r=new QQ(this.O(i$()),this.O(i$()),this,this.options)):r=i[s],r._$AI(n),s++;s<i.length&&(this._$AR(r&&r._$AB.nextSibling,s),i.length=s)}_$AR(e=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},wA=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,i,r,s,n){this.type=1,this._$AH=ge,this._$AN=void 0,this.element=e,this.name=i,this._$AM=s,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ge}_$AI(e,i=this,r,s){const n=this.strings;let o=!1;if(n===void 0)e=xw(this,e,i,0),o=!r$(e)||e!==this._$AH&&e!==na,o&&(this._$AH=e);else{const a=e;let l,c;for(e=n[0],l=0;l<n.length-1;l++)c=xw(this,a[r+l],i,l),c===na&&(c=this._$AH[l]),o||(o=!r$(c)||c!==this._$AH[l]),c===ge?e=ge:e!==ge&&(e+=(c??"")+n[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===ge?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},kbe=class extends wA{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ge?void 0:e}},Tbe=class extends wA{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ge)}},Ebe=class extends wA{constructor(e,i,r,s,n){super(e,i,r,s,n),this.type=5}_$AI(e,i=this){if((e=xw(this,e,i,0)??ge)===na)return;const r=this._$AH,s=e===ge&&r!==ge||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==ge&&(r===ge||s);s&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},Mbe=class{constructor(e,i,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){xw(this,e)}};const Cbe={I:bA},Pbe=Qx.litHtmlPolyfillSupport;Pbe?.(ZN,bA),(Qx.litHtmlVersions??(Qx.litHtmlVersions=[])).push("3.3.1");const eee=(t,e,i)=>{const r=i?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const n=i?.renderBefore??null;r._$litPart$=s=new bA(e.insertBefore(i$(),n),n,void 0,i??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eS=globalThis;let c0=class extends Ov{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const e=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=e.firstChild),e}update(e){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=eee(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return na}};c0._$litElement$=!0,c0.finalized=!0,eS.litElementHydrateSupport?.({LitElement:c0});const Abe=eS.litElementPolyfillSupport;Abe?.({LitElement:c0});(eS.litElementVersions??(eS.litElementVersions=[])).push("4.2.1");class s${constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}const Lbe=(t,e)=>{const i=e/Obe;let r=0;const s=setInterval(()=>{r+=i,r>=e&&(clearInterval(s),t())},i);return s},Obe=4,Rbe=(t,e,i)=>{const r=Object.keys(t),s=r.length;qb===void 0&&queueMicrotask(_A),qb??(qb=new Map);let n=qb.get(t);return n===void 0&&(n={callbacks:[],keyCount:s},qb.set(t,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(r)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=c=>tr(e,null,c),l=o[s];l===void 0?a(void 0):t[l]===i?a(l):a(void 0)}),i};let qb;const _A=()=>{qb?.forEach(({callbacks:t},e)=>{const i=Object.keys(e);t.forEach(r=>r(i))}),qb=void 0},GV=(t,e,i)=>{const r=t.manager;return r.V!==ge&&r.V!==i&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=i,r.T.push((s,n)=>tr(e,void 0,i===n?s:void 0)),i},HV=(t=[c_(),...zV()],e,i)=>{const r=Array.isArray(t)?t:[t];let s=r.length+1;const n=o=>{s-=1,o!==void 0&&(s=Math.min(s,0)),s===0&&e(o)};r.forEach(o=>Rbe(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!1}),i));for(const o of r)if("manager"in o&&o.manager.component===o){GV(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),i);break}return i},WV=(t="",e={},i=c_())=>{const r={emit:s=>{t===""&&_A();const n=new CustomEvent(t,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...e});return i.el.dispatchEvent(n),n}};return t===""&&HV(void 0,s=>t=s.key,r),r},ve=WV.bind(null,"");var tee;tee=DV;var L0,O0,my,R0,N0,D0,F0,z0,jp,yy,po,zc,Wd,j0,lT;class xA{constructor(e){_t(this,j0);_t(this,L0);_t(this,O0);_t(this,my);_t(this,R0);_t(this,N0);_t(this,D0);_t(this,F0);_t(this,z0);_t(this,jp);_t(this,yy);_t(this,po);_t(this,zc);_t(this,Wd);mt(this,L0,[]),mt(this,O0,[]),mt(this,my,[]),mt(this,R0,[]),mt(this,N0,[]),mt(this,D0,[]),mt(this,F0,[]),mt(this,z0,[]),mt(this,jp,[]),mt(this,yy,!1),this.P=new s$,this.connectedCalled=!1,this.loadedCalled=!1,this[tee]=!0,mt(this,Wd,[]);const i=this,r=e??c_();mt(i,po,r),i.ready=i.P.promise,mt(i,zc,cB(i)),i.component=r,pe(i,po).addController(i),pe(i,po).manager===void 0||(FV(i),queueMicrotask(()=>i.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=pe(this,po);e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),pe(e,yy)&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}get exports(){return pe(this,zc)}set exports(e){const i=pe(this,zc);i!==e&&(mt(this,zc,e),pe(this,Wd).forEach(tr),this.connectedCalled&&this.O!==!1&&pe(this,po).requestUpdate(this.O,i)),this.P.resolve(e)}setProvisionalExports(e,i=!0){mt(this,zc,i?cB(e):e),pe(this,Wd).forEach(tr)}watchExports(e){const i=()=>e(pe(this,zc));return pe(this,Wd).push(i),()=>void pe(this,Wd).splice(pe(this,Wd).indexOf(i),1)}get use(){return Ub(pe(this,po)),cbe}get useRef(){return Ub(pe(this,po)),ube}get useRefSync(){return Ub(pe(this,po)),jV}controllerRemoved(){pe(this,po).el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){pe(this,L0).push(e)}onDisconnected(e){pe(this,O0).push(e)}onLoad(e){pe(this,my).push(e)}onLoaded(e){pe(this,R0).push(e)}onUpdate(e){pe(this,N0).push(e)}onUpdated(e){pe(this,D0).push(e)}onDestroy(e){pe(this,F0).push(e)}onLifecycle(e){pe(this,z0).push(e),this.connectedCalled&&pe(this,po).el.isConnected&&sl(this,j0,lT).call(this,e)}triggerConnected(){const e=this;e.hostConnected&&tr(e.hostConnected,e),pe(e,L0).forEach(tr),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&tr(e.hostDisconnected,e),pe(e,O0).forEach(tr),pe(e,jp).forEach(tr),mt(e,jp,[])}async triggerLoad(){if(pe(this,yy))return;mt(this,yy,!0);const e=this;e.hostLoad&&await HN(e.hostLoad,e),pe(this,my).length>0&&await Promise.allSettled(pe(this,my).map(HN)),this.P.resolve(pe(this,zc))}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&tr(this.hostLoaded,this),pe(this,R0).forEach(tr),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&tr(this.hostUpdate,this,e),pe(this,N0).forEach(lB,e)}triggerUpdated(e){this.hostUpdated&&tr(this.hostUpdated,this,e),pe(this,D0).forEach(lB,e)}triggerDestroy(){this.hostDestroy&&tr(this.hostDestroy,this),pe(this,F0).forEach(tr)}triggerLifecycle(){this.hostLifecycle&&sl(this,j0,lT).call(this,()=>this.hostLifecycle()),pe(this,z0).forEach(sl(this,j0,lT),this)}}L0=new WeakMap,O0=new WeakMap,my=new WeakMap,R0=new WeakMap,N0=new WeakMap,D0=new WeakMap,F0=new WeakMap,z0=new WeakMap,jp=new WeakMap,yy=new WeakMap,po=new WeakMap,zc=new WeakMap,Wd=new WeakMap,j0=new WeakSet,lT=function(e){Ub(pe(this,po));const i=tr(e);(Array.isArray(i)?i:[i]).forEach(s=>{typeof s=="function"?pe(this,jp).push(s):typeof s=="object"&&typeof s.remove=="function"&&pe(this,jp).push(s.remove)})};function lB(t){tr(t,void 0,this)}const SA=xA,cB=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,s,n){if(!((s==="exports"||s==="_exports")&&s in r&&r[s]===i)&&(s in r||s in Promise.prototype||typeof s=="symbol"))return typeof r=="function"?r[s]:Reflect.get(r,s,n)}},i=new Proxy(t,e);return i},Nbe=t=>t.replace(Dbe,(e,i)=>`${i===0?"":"-"}${e.toLowerCase()}`),Dbe=/[A-Z]+(?![a-z])|[A-Z]/gu,Fbe=1,zbe=2,jbe=4,Vbe=8,Ube=16,Bbe=32,qbe=64,iee=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const i=e;return i.manager?.loadedCalled||(i.J??i._offspring).push(t),(i.I??i._postLoad).promise}return!1},uB={};function ree(){}const cT=Object.defineProperty,Gbe=globalThis.HTMLElement??ree;var fo,Jd,V0,Y$,YN;const z7=class z7 extends Gbe{constructor(){var s;super();_t(this,Y$);_t(this,fo);_t(this,Jd);_t(this,V0);mt(this,Jd,{}),mt(this,V0,[]),this.I=new s$,this.H=new s$,this.J=[];const i=this,r=i.constructor;i._offspring=i.J,i._postLoad=i.I,r.C?.forEach(n=>{Object.hasOwn(i,n)&&(pe(i,Jd)[n]=i[n],delete i[n])}),r.A?sl(s=i,Y$,YN).call(s,{a:r.A}):r.B.then(async n=>{var o;await r.K.p,sl(o=i,Y$,YN).call(o,await(n.default?.then(a=>typeof a=="function"?{a}:a)??n))}).catch(n=>{i.H.reject(n),setTimeout(()=>{throw n})})}static F(){for(const i of this.C??[])cT(this.prototype,i,{configurable:!0,enumerable:!0,get(){return pe(this,Jd)[i]},set(r){pe(this,Jd)[i]=r}});for(const i of this.E??[])cT(this.prototype,i,{async value(...r){return pe(this,fo)||await this.H.promise,await pe(this,fo)[i](...r)},configurable:!0});for(const i of this.D??[])cT(this.prototype,i,{value(...r){return pe(this,fo)[i](...r)},configurable:!0})}get manager(){return pe(this,fo)?.manager}attributeChangedCallback(i,r,s){pe(this,fo)?.attributeChangedCallback(i,r,s),pe(this,fo)||pe(this,V0).push(i)}connectedCallback(){pe(this,fo)?pe(this,fo).connectedCallback?.():queueMicrotask(()=>this.G=iee(this))}disconnectedCallback(){pe(this,fo)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){pe(this,fo)?.requestUpdate()}};fo=new WeakMap,Jd=new WeakMap,V0=new WeakMap,Y$=new WeakSet,YN=function(i){const r=this.constructor,s=r.L,n=pe(this,Jd),o=Object.values(i).find(f=>f.L===s),a=`${s}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);Wbe(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const d=document.createElement(a);o.N=void 0,mt(this,fo,d),mt(this,Jd,d),pe(this,V0).forEach(f=>d.attributeChangedCallback(f,null,this.getAttribute(f))),Object.entries(n).forEach(Hbe,d);const h=this.isConnected;(h||this.G)&&(d.connectedCallback?.(),h||d.disconnectedCallback())},z7.lumina=!0;let dB=z7;function Hbe([t,e]){this[t]=e}const Wbe=t=>{const e=t.prototype,i=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(s,n){i.setAttribute.call(this.el,s,n)},e.removeAttribute=function(s){i.removeAttribute.call(this.el,s)},cT(e,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vc={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},u_=t=>(...e)=>({_$litDirective$:t,values:e});let d_=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,i,r){this._$Ct=e,this._$AM=i,this._$Ci=r}_$AS(e,i){return this.update(e,i)}update(e,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Jbe=u_(class extends d_{constructor(t){if(super(t),t.type!==Vc.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const i=t.element.classList;for(const r of this.st)r in e||(i.remove(r),this.st.delete(r));for(const r in e){const s=!!e[r];s===this.st.has(r)||this.nt?.has(r)||(s?(i.add(r),this.st.add(r)):(i.remove(r),this.st.delete(r)))}return na}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const see="important",Zbe=" !"+see,Ybe=u_(class extends d_{constructor(t){if(super(t),t.type!==Vc.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{const r=t[i];return r==null?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:i}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in e){const s=e[r];if(s!=null){this.ft.add(r);const n=typeof s=="string"&&s.endsWith(Zbe);r.includes("-")||n?i.setProperty(r,n?s.slice(0,-11):s,n?see:""):i[r]=s}}return na}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:Kbe}=Cbe,nee=t=>t.strings===void 0,hB=()=>document.createComment(""),e1=(t,e,i)=>{const r=t._$AA.parentNode,s=e===void 0?t._$AB:e._$AA;if(i===void 0){const n=r.insertBefore(hB(),s),o=r.insertBefore(hB(),s);i=new Kbe(n,o,t,t.options)}else{const n=i._$AB.nextSibling,o=i._$AM,a=o!==t;if(a){let l;i._$AQ?.(t),i._$AM=t,i._$AP!==void 0&&(l=t._$AU)!==o._$AU&&i._$AP(l)}if(n!==s||a){let l=i._$AA;for(;l!==n;){const c=l.nextSibling;r.insertBefore(l,s),l=c}}}return i},Wf=(t,e,i=t)=>(t._$AI(e,i),t),Xbe={},JV=(t,e=Xbe)=>t._$AH=e,Qbe=t=>t._$AH,EL=t=>{t._$AR(),t._$AA.remove()};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pB=u_(class extends d_{constructor(t){if(super(t),t.type!==Vc.PROPERTY&&t.type!==Vc.ATTRIBUTE&&t.type!==Vc.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!nee(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===na||e===ge)return e;const i=t.element,r=t.name;if(t.type===Vc.PROPERTY){if(e===i[r])return na}else if(t.type===Vc.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(r))return na}else if(t.type===Vc.ATTRIBUTE&&i.getAttribute(r)===e+"")return na;return JV(t),e}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tS=(t,e)=>{const i=t._$AN;if(i===void 0)return!1;for(const r of i)r._$AO?.(e,!1),tS(r,e);return!0},pM=t=>{let e,i;do{if((e=t._$AM)===void 0)break;i=e._$AN,i.delete(t),t=e}while(i?.size===0)},oee=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(i===void 0)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),i0e(e)}};function e0e(t){this._$AN!==void 0?(pM(this),this._$AM=t,oee(this)):this._$AM=t}function t0e(t,e=!1,i=0){const r=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(r))for(let n=i;n<r.length;n++)tS(r[n],!1),pM(r[n]);else r!=null&&(tS(r,!1),pM(r));else tS(this,t)}const i0e=t=>{t.type==Vc.CHILD&&(t._$AP??(t._$AP=t0e),t._$AQ??(t._$AQ=e0e))};let r0e=class extends d_{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,i,r){super._$AT(e,i,r),oee(this),this.isConnected=e._$AU}_$AO(e,i=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),i&&(tS(this,e),pM(this))}setValue(e){if(nee(this._$Ct))this._$Ct._$AI(e,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=e,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wi=()=>new s0e;let s0e=class{};const ML=new WeakMap,ct=u_(class extends r0e{render(t){return ge}update(t,[e]){const i=e!==this.G;return i&&this.G!==void 0&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),ge}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let i=ML.get(e);i===void 0&&(i=new WeakMap,ML.set(e,i)),i.get(this.G)!==void 0&&this.G.call(this.ht,void 0),i.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?ML.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Zd,Pl,U0;class n0e extends SA{constructor(i){super(i);_t(this,Zd);_t(this,Pl);_t(this,U0);this.destroyed=!1,this.R=!1,this.V=ge,this.T=[],mt(this,U0,new WeakMap),mt(this,Pl,i),this.exports=void 0,this.hasDestroy=KN in i&&typeof i.destroy=="function",c0.prototype.addController.call(i,{hostConnected:()=>{if(this.destroyed){const r=i.el.localName;throw i.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${KN} prop.`)}pe(this,Zd)!==void 0&&clearTimeout(pe(this,Zd)),_A();for(const r of i.M)"triggerConnected"in r?r.triggerConnected():tr(r.hostConnected,r)},hostDisconnected:()=>{for(const r of i.M)"triggerDisconnected"in r?r.triggerDisconnected():tr(r.hostDisconnected,r);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const r of i.M)"triggerUpdate"in r?r.triggerUpdate(this.Q):tr(r.hostUpdate,r,this.Q)},hostUpdated:()=>{for(const r of i.M)"triggerUpdated"in r?r.triggerUpdated(this.Q):tr(r.hostUpdated,r,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),Ub(i)}async destroy(){if(!this.destroyed){pe(this,Pl).el.isConnected&&(this.hasDestroy=!1,pe(this,Pl).el.remove()),mt(this,Zd,void 0),this.destroyed=!0;for(const i of pe(this,Pl).M)"triggerDestroy"in i?i.triggerDestroy():tr(i.hostDestroy,i);pe(this,Pl).M.splice(0)}}U(){pe(this,Zd)!==void 0&&clearTimeout(pe(this,Zd)),!pe(this,Pl).el.isConnected&&!pe(this,Pl).autoDestroyDisabled&&mt(this,Zd,Lbe(()=>void pe(this,Pl).destroy(),o0e))}S(i,r){const s=this.T;this.V=ge,this.T=[],s.forEach(n=>n(i,r))}W(i,r){(typeof r=="object"&&r!==null||typeof r=="function")&&pe(this,U0).set(r,i)}X(i){if(typeof i=="object"&&i!==null||typeof i=="function")return pe(this,U0).get(i)}}Zd=new WeakMap,Pl=new WeakMap,U0=new WeakMap;let o0e=1e3;const KN="autoDestroyDisabled";var gy,K$,X$,vy,jc,l_,aee,lee;const JS=class JS extends c0{constructor(){super();_t(this,l_);_t(this,gy);_t(this,K$);_t(this,X$);_t(this,vy);_t(this,jc);this.M=[],this.manager=new n0e(this);const i=this,r=i.constructor,s=r.N,n=r.K.o,o=JS.prototype.shouldUpdate;mt(i,vy,s?.H??new s$),i.I=s?.I??new s$,i.J=s?.J??[],i._offspring=i.J,i._postLoad=i.I,i.el=s??i,mt(i,X$,i.enableUpdating),i.enableUpdating=ree,i.shouldUpdate!==o&&(mt(i,K$,i.shouldUpdate),i.shouldUpdate=o),n&&(mt(i,gy,new Map),r.elementProperties.forEach((a,l)=>pe(i,gy).set(l,n())))}static finalizeStyles(i){const r=super.finalizeStyles(i),s=this.shadowRootOptions===uB;return this.K?.commonStyles===void 0||s?r:[this.K.commonStyles,...r]}static createProperty(i,r){const s=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0,o=n?.hasChanged??BV,a={attribute:s&Fbe&&typeof i=="string"?Nbe(i):!1,reflect:!!(s&zbe),type:s&jbe?Boolean:s&Vbe?Number:void 0,state:!!(s&Ube),readOnly:!!(s&Bbe),noAccessor:!!(s&qbe),c:!1,...n,hasChanged(l,c){const d=o(l,c);return a.c=d,d}};super.createProperty(i,a)}static getPropertyDescriptor(i,r,s){const n=this.K,o=super.getPropertyDescriptor(i,r,s);return s.d=o,{...o,get(){return n.t?.(pe(this,gy).get(i)),o.get?.call(this)},set(a){const l=this.manager;if(s.readOnly&&!WN&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${i}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),s.c&&pe(this,gy)?.get(i)?.notify(),l.T.length>0&&(_A(),l?.S(i,a))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const i=this.constructor.K.c?.(()=>this.requestUpdate());mt(this,jc,i);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>sl(this,l_,lee).call(this).catch(s=>{pe(this,vy).reject(s),setTimeout(()=>{throw s})})):i&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),pe(this,jc)?.destroy(),mt(this,jc,void 0)}createRenderRoot(){const i=this.el.shadowRoot,r=this.constructor,s=r.shadowRootOptions,o=i??(s===uB?this.el:this.el.attachShadow(s));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(i){var r;return this.manager.Q=i,((r=pe(this,K$))==null?void 0:r.call(this,i))??!0}update(i){pe(this,jc)?sl(this,l_,aee).call(this,i):super.update(i)}listen(i,r,s){const n=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(i,n,s),()=>this.el.removeEventListener(i,n,s)))}listenOn(i,r,s,n){const o=s?.bind(this)??s;this.manager.onLifecycle(()=>(i.addEventListener(r,o,n),()=>i.removeEventListener(r,o,n)))}async componentOnReady(){return await pe(this,vy).promise,this}addController(i){this.M.push(i),!(DV in i)&&this.renderRoot&&this.el.isConnected&&i.hostConnected?.()}removeController(i){this.M.splice(this.M.indexOf(i),1),i.controllerRemoved?.()}};gy=new WeakMap,K$=new WeakMap,X$=new WeakMap,vy=new WeakMap,jc=new WeakMap,l_=new WeakSet,aee=function(i){try{pe(this,jc).clear(),this.constructor.K.r(pe(this,jc),()=>J7(JS.prototype,this,"update").call(this,i))}catch(r){throw pe(this,jc).clear(),r}},lee=async function(){const i=this.el.G??iee(this.el);i&&await i;const r=[];for(const n of this.M)"triggerLoad"in n?r.push(n.triggerLoad()):r.push(HN(n.hostLoad,n));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(n=>n.has(KN)&&this.manager.U()),pe(this,X$).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const s=this.J.filter(n=>!n.manager?.loadedCalled);s.length&&await Promise.allSettled(s.map(async n=>await n.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const n of this.M)"triggerLoaded"in n?n.triggerLoaded():tr(n.hostLoaded,n);this.loaded?.(),pe(this,vy).resolve()},JS.lumina=!0;let it=JS;const cee=t=>{let e;const i=s=>{e=new URL(s,globalThis.location?.href||void 0).href},r={...t,getAssetPath(s){const n=new URL(s,e);return n.origin!==globalThis.location?.origin?n.href:n.pathname},setAssetPath:i,customElement(s,n){n.K=r,n.L=s,customElements.get(s)||customElements.define(s,n)}};return i(t.defaultAssetPath),r},O=t=>typeof t=="object"&&t!=null?Jbe(t):t,ot=t=>typeof t=="object"&&t!=null?Ybe(t):t,le=ge;function o2(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i)}const Sw={toAttribute:t=>t===!0?"":t===!1?null:t},a0e=t=>{const e=document.createElement("div");return eee(t,e),e.firstElementChild},l0e="calcite-mode-auto",c0e="calcite-mode-dark",$A={rtl:"calcite--rtl"},ZV={filter:250,nextTick:0,resize:150,reposition:100},Yct=25;function fB(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(c0e)||t.contains(l0e)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const iS=globalThis.calciteConfig,u0e=iS?.focusTrapStack||[],d0e=iS?.logLevel||"info",mB="3.3.3",h0e="2025-10-08",p0e="7391af08e";function f0e(){if(iS&&iS.version)return;console.info(`Using Calcite Components ${mB} [Date: ${h0e}, Revision: ${p0e}]`);const t=iS||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:mB,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?fB():document.addEventListener("DOMContentLoaded",fB,{once:!0});queueMicrotask(f0e);const m0e=cee({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:fi,getAssetPath:uee,setAssetPath:y0e}=m0e;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function g0e(t){return t.map(e=>{let i="";for(let r=0;r<e;r++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Lf=()=>g0e([2,1,1,1,3]);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 *//*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var v0e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],XN=v0e.join(","),dee=typeof Element>"u",n$=dee?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,fM=!dee&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},mM=function t(e,i){var r;i===void 0&&(i=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),n=s===""||s==="true",o=n||i&&e&&t(e.parentNode);return o},b0e=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},hee=function(e,i,r){if(mM(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(XN));return i&&n$.call(e,XN)&&s.unshift(e),s=s.filter(r),s},pee=function t(e,i,r){for(var s=[],n=Array.from(e);n.length;){var o=n.shift();if(!mM(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=n$.call(o,XN);d&&r.filter(o)&&(i||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),f=!mM(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&f){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else n.unshift.apply(n,o.children)}}return s},fee=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},mee=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||b0e(e))&&!fee(e)?0:e.tabIndex},w0e=function(e,i){var r=mee(e);return r<0&&i&&!fee(e)?0:r},_0e=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},yee=function(e){return e.tagName==="INPUT"},x0e=function(e){return yee(e)&&e.type==="hidden"},S0e=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},$0e=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},I0e=function(e){if(!e.name)return!0;var i=e.form||fM(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=$0e(s,e.form);return!n||n===e},k0e=function(e){return yee(e)&&e.type==="radio"},T0e=function(e){return k0e(e)&&!I0e(e)},E0e=function(e){var i,r=e&&fM(e),s=(i=r)===null||i===void 0?void 0:i.host,n=!1;if(r&&r!==e){var o,a,l;for(n=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!n&&s;){var c,d,h;r=fM(s),s=(c=r)===null||c===void 0?void 0:c.host,n=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return n},yB=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},M0e=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var n=n$.call(e,"details>summary:first-of-type"),o=n?e.parentElement:e;if(n$.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=fM(e);if(l&&!l.shadowRoot&&s(l)===!0)return yB(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(E0e(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return yB(e);return!1},C0e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return n$.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},QN=function(e,i){return!(i.disabled||mM(i)||x0e(i)||M0e(i,e)||S0e(i)||C0e(i))},gB=function(e,i){return!(T0e(i)||mee(i)<0||!QN(e,i))},P0e=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},A0e=function t(e){var i=[],r=[];return e.forEach(function(s,n){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=w0e(a,o),c=o?t(s.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(_0e).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},L0e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=pee([e],i.includeContainer,{filter:gB.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:P0e}):r=hee(e,i.includeContainer,gB.bind(null,i)),A0e(r)},O0e=function(e,i){i=i||{};var r;return i.getShadowRoot?r=pee([e],i.includeContainer,{filter:QN.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=hee(e,i.includeContainer,QN.bind(null,i)),r};const YV={getShadowRoot:!0};function Of(t){const e="dir",i=`[${e}]`,r=h_(t,i);return r?r.getAttribute(e):"ltr"}function a2(t){return t.getRootNode()}function Kct(t){const e=a2(t);return"host"in e?e:null}function gee(t){return t.host||null}function IA(t,{selector:e,id:i}){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const r=a2(t);return(i?"getElementById"in r?r.getElementById(i):null:e?r.querySelector(e):null)||IA(gee(r),{selector:e,id:i})}function h_(t,e){return t?t.closest(e)||h_(gee(a2(t)),e):null}function R0e(t){return typeof t?.setFocus=="function"}async function $w(t,e=!1,i="tabbable",r,s){return t?R0e(t)&&r!==t?t.setFocus(s):(i==="tabbable"?N0e:F0e)(t,e,s):void 0}function vee(t,e){if(t)return L0e(t,{...YV,includeContainer:e})[0]??t}function N0e(t,e,i){vee(t,e)?.focus(i)}function D0e(t,e){if(t)return O0e(t,{...YV,includeContainer:e})[0]??t}function F0e(t,e,i){D0e(t,e)?.focus(i)}function z0e(t,e){return t.filter(i=>i.matches(e))}function o$(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e===""||e===!0)return t[i]}function kA(t){return(!!t).toString()}function j0e(t){return Ft(t)||B0e(t)}function V0e(t){return q0e(t).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join("").trim()}function U0e(t){for(const e of t.childNodes)if(e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()!==""||e.nodeType===Node.ELEMENT_NODE)return!0;return!1}function B0e(t){return!!V0e(t)}function q0e(t){return t.currentTarget.assignedNodes({flatten:!0})}function Ft(t){return!!yM(t).length}function yM(t,e){return G0e(t.currentTarget,e)}function G0e(t,e){const i=t.assignedElements({flatten:!0});return e?z0e(i,e):i}function bee(t){return!!(t.isPrimary&&t.button===0)}function H0e(t){return t.detail===0}const Up=(t,e,i,r=!0,s=!0,n=!1)=>{const o=t.indexOf(e),a=o===0,l=o===t.length-1;r&&(i=i==="previous"&&a?"last":i==="next"&&l?"first":i);let c;return i==="previous"?c=t[o-1]||t[r?t.length-1:o]:i==="next"?c=t[o+1]||t[r?0:o]:i==="last"?c=t[t.length-1]:c=t[0],$w(c,s,"tabbable",n?c:void 0),c};function W0e(t,e){if(t.parentNode!==e.parentNode)return!1;const i=Array.from(t.parentNode.children);return i.indexOf(t)<i.indexOf(e)}async function J0e(t,e){return wee(t,e,"animation")}async function Z0e(t,e){return wee(t,e,"transition")}function vB(t,e,i){const r=e==="transition"?"transitionProperty":"animationName";return t.getAnimations().find(s=>s[r]===i)}async function wee(t,e,i){let r=vB(t,i,e);if(r||(await eD(),r=vB(t,i,e)),!!r)try{await r.finished}catch{}}async function eD(){await new Promise(t=>requestAnimationFrame(()=>t()))}function Xct(t){return t.endsWith("px")?parseFloat(t):t.endsWith("vw")?bB(parseFloat(t),window.innerWidth):t.endsWith("vh")?bB(parseFloat(t),window.innerHeight):0}function bB(t,e){return t*e/100}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Ya(t,e,i){const r=Y0e(t);return new r(e,i)}function Y0e(t){class e extends window.MutationObserver{constructor(r){super(r),this.observedEntry=[],this.callback=r}observe(r,s){return this.observedEntry.push({target:r,options:s}),super.observe(r,s)}unobserve(r){const s=this.observedEntry.filter(n=>n.target!==r);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),s.forEach(n=>this.observe(n.target,n.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}function gM(t,e,i,r){if(t&&(e&&t.unobserve(e),!!i)){if(t instanceof MutationObserver){t.observe(i,r);return}t.observe(i)}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wB=new Set,_B={trace:0,debug:1,info:2,warn:4,error:8,off:10};function K0e(t){return _B[t]>=_B[d0e]}function Rv(t,...e){if(!K0e(t))return;console[t].call(this,"%ccalcite","background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;",...e)}let CL;const _ee={debug:t=>Rv("debug",t),info:t=>Rv("info",t),warn:t=>Rv("warn",t),error:t=>Rv("error",t),trace:t=>Rv("trace",t),deprecated:X0e};function X0e(t,{component:e,name:i,suggested:r,removalVersion:s}){const n=`${t}:${t==="component"?"":e}${i}`;if(wB.has(n))return;wB.add(n);const o=Array.isArray(r);o&&!CL&&(CL=new Intl.ListFormat("en",{style:"long",type:"disjunction"}));const a=`[${i}] ${t} is deprecated and will be removed in ${s==="future"?"a future version":`v${s}`}.${r?` Use ${o?CL.format(r.map(l=>`"${l}"`)):`"${r}"`} instead.`:""}`;Rv("warn",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const xB={flipRtl:"flip-rtl",svg:"svg"},xee={},PL={},See={s:16,m:24,l:32};function $ee({icon:t,scale:e}){const i=See[e],r=twe(t),s=r.charAt(r.length-1)==="F";return`${s?r.substring(0,r.length-1):r}${i}${s?"F":""}`}async function Q0e(t){const e=$ee(t),i=Iee(e);if(i)return i;PL[e]||(PL[e]=fetch(uee(`./assets/icon/${e}.json`)).then(s=>s.json()).catch(()=>(_ee.error(`${t.icon} (${t.scale}) icon failed to load`),"")));const r=await PL[e];return xee[e]=r,r}function ewe(t){return Iee($ee(t))}function Iee(t){return xee[t]}function twe(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const s=/[a-z]/i;t=i.map((n,o)=>n.replace(s,function(l,c){return o===0&&c===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const iwe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`,WP=class WP extends it{constructor(){super(...arguments),this.visible=!1,this.flipRtl=!1,this.icon=null,this.preload=!1,this.scale="m"}connectedCallback(){if(super.connectedCallback(),this.preload){this.visible=!0,this.loadIconPathData();return}this.visible||this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}willUpdate(e){(e.has("icon")&&(this.hasUpdated||this.icon!==null)||e.has("scale")&&(this.hasUpdated||this.scale!=="m"))&&this.loadIconPathData()}disconnectedCallback(){super.disconnectedCallback(),this.intersectionObserver?.disconnect(),this.intersectionObserver=null}async loadIconPathData(){const{icon:e,scale:i,visible:r}=this;if(!e||!r)return;const s={icon:e,scale:i},n=ewe(s)||await Q0e(s);e===this.icon&&(this.pathData=n)}waitUntilVisible(e){if(this.intersectionObserver=Ya("intersection",i=>{i.forEach(r=>{r.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,e())})},{rootMargin:"50px"}),!this.intersectionObserver){e();return}this.intersectionObserver.observe(this.el)}render(){const{el:e,flipRtl:i,pathData:r,scale:s,textLabel:n}=this,o=Of(e),a=See[s],l=!!n,c=[].concat(r||"");return this.el.ariaHidden=kA(!l),this.el.ariaLabel=l?n:null,this.el.role=l?"img":null,j`<svg aria-hidden=true class=${O({[xB.flipRtl]:o==="rtl"&&i,[xB.svg]:!0})} fill=currentColor height=100% viewBox=${`0 0 ${a} ${a}`} width=100% xmlns=http://www.w3.org/2000/svg>${c.map(d=>typeof d=="string"?Ji`<path d=${d??ge} />`:Ji`<path d=${d.d??ge} opacity=${("opacity"in d?d.opacity:1)??ge} />`)}</svg>`}};WP.properties={pathData:[16,{},{state:!0}],visible:[16,{},{state:!0}],flipRtl:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],preload:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],textLabel:1},WP.styles=iwe;let vM=WP;fi("calcite-icon",vM);const kee=Object.freeze(Object.defineProperty({__proto__:null,Icon:vM},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function rwe(){const{disabled:t}=this;t||HTMLElement.prototype.click.call(this)}function Tee(t){t.target.disabled&&t.preventDefault()}const Eee=["mousedown","mouseup","click"];function Mee(t){t.target.disabled&&(t.stopImmediatePropagation(),t.preventDefault())}const bM={capture:!0};function wn(t){if(t.disabled){t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),swe(t);return}owe(t),t.el.removeAttribute("aria-disabled")}function swe(t){t.el.click=rwe,nwe(t.el)}function nwe(t){t.addEventListener("pointerdown",Tee,bM),Eee.forEach(e=>t.addEventListener(e,Mee,bM))}function owe(t){delete t.el.click,awe(t.el)}function awe(t){t.removeEventListener("pointerdown",Tee,bM),Eee.forEach(e=>t.removeEventListener(e,Mee,bM))}const lwe={container:"interaction-container"},_n=({children:t,disabled:e})=>j`<div class=${O(lwe.container)} .inert=${e}>${t}</div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function kg(t){return t==="Enter"||t===" "}const TA=["0","1","2","3","4","5","6","7","8","9"];/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function Fr(t){return t==="l"?"m":"s"}async function cwe(t){await t.componentOnReady(),await t.updateComplete}const l2=t=>(...e)=>{const i=zV(),r=new t(...e),s=r.exports;FV(i.at(-1));const n=r.component.manager;n.W(r,s),r.watchExports(n.W.bind(n,r)),abe(r);const o=[r.component,...i].reverse();return HV(o,a=>a===void 0?void 0:uwe(r,a,s),s)},uwe=(t,{host:e,key:i,isReactive:r},s)=>{const n=e,o=n[i]!==t.exports,a=n[i]!==s,l=s!==t.exports;if(o&&!a&&l&&(n[i]=t.exports),e===t.component){if(r){const h=t.component.manager;a&&h.W(t,n[i]),t.onUpdate(f=>{if(f.has(i)){const m=n[i];m!==t.exports&&h.W(t,m)}})}t.O=r?void 0:i}const d=t.component.constructor.elementProperties.get(i)?.readOnly;t.watchExports(()=>{n[i]!==t.exports&&(d?dbe(()=>{n[i]=t.exports}):n[i]=t.exports)})};function dwe(t,e){return t.assignedElements({flatten:!0}).filter(r=>r.matches(e))}const hi=(...t)=>{const e=[];for(let r=0;r<t.length;r++){const s=t[r];if(typeof s=="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(typeof s=="object")for(const n in s)s[n]&&e.push(n)}const i=e.join(" ");return e.length=0,i},hwe=(t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1},Cee=(t,e,i)=>{const r=pwe(e).subscribe;return r(s=>{s.some(o=>hwe(t,o.target))&&i()})},AL={},pwe=t=>{const e=t.join(","),i=AL[e];if(i!==void 0)return i;const r=new Set,s=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const n={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(s.disconnect(),AL[e]=void 0)})};return AL[e]=n,n},Pee=(t,e)=>{let i=t;for(;i;){const r=i.closest?.(e);if(r)return r;const s=i.getRootNode?.();if(s===globalThis.document)return;i=s.host}};function fwe(t){const e=Pee(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const Aee=(t,e,i)=>Pee(t,`[${e}]`)?.getAttribute(e)??i,mwe="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),ywe=new Set(mwe),wM="en",gwe={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},vwe=async(t,e,i="")=>{const r=`${e}/${i}`,s=`${r}${t}.json`;return LL[s]??(LL[s]=Lee(t,r)),await LL[s]},LL={},Lee=async(t,e)=>{const i=`${e}${t}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return t===wM?{}:await Lee(wM,e)},Oee=t=>{const e=Aee(t,"lang",globalThis.navigator?.language||wM);return{lang:e,t9nLocale:Ree(e)}},Ree=t=>{const[e,i]=t.split("-"),r=e.toLowerCase();let s=r;return i&&(s=`${r}-${i.toUpperCase()}`),s=gwe[s]??s,ywe.has(s)?s:i?Ree(r):wM},bwe=(t,e,i,r)=>{let s;const n=()=>wwe(t,e(),r).then(o=>{(s?.lang!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&i(o),s=o}).catch(console.error);return queueMicrotask(n),Cee(t,["lang"],n)},wwe=async(t,e,i=t.localName.split("-").slice(1).join("-"))=>{const{lang:r,t9nLocale:s}=Oee(t),n=`${e}/${i}/t9n`,a=i===null?{}:await vwe(s,n,"messages.");return{lang:r,t9nLocale:s,t9nStrings:a}},Nee=t=>Dee(void 0,t),c2=t=>e=>Dee(e,t);class _we extends xA{constructor(e,i){super(e);const r=this.exports;try{Ub(this.component);const s=i(this.component,this),n=this.exports!==r;if(nbe(s)){n||this.setProvisionalExports(s);const o=s.then(a=>{this.exports=a,super.catchUpLifecycle()}).catch(a=>{this.P.reject(a),console.error(a)});this.onLoad(async()=>await o)}else(!n||s!==void 0)&&(this.exports=s),queueMicrotask(()=>super.catchUpLifecycle())}catch(s){this.P.reject(s),console.error(s)}}catchUpLifecycle(){}}const Dee=l2(_we),Fee=(t,e)=>new xwe(t,e);var B0,q0,Q$;class xwe extends xA{constructor(i,r){super();_t(this,B0);_t(this,q0);_t(this,Q$);mt(this,q0,i),mt(this,Q$,r),mt(this,B0,new MutationObserver(s=>{s.forEach(n=>{i.includes(n.attributeName)&&r.call(this.component,this.component.el.getAttribute(n.attributeName),n.oldValue,n.attributeName)})}))}hostConnected(){pe(this,q0).forEach(i=>{this.component.el.hasAttribute(i)&&pe(this,Q$).call(this.component,null,this.component.el.getAttribute(i),i)}),pe(this,B0).observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:pe(this,q0)})}hostDisconnected(){pe(this,B0).disconnect()}}B0=new WeakMap,q0=new WeakMap,Q$=new WeakMap;const Swe=t=>(...e)=>{const i=zV(),r=new t(...e);return FV(i.at(-1)),r},SB="ltr",EA=()=>Nee((t,e)=>{e.exports=SB,e.onLifecycle(()=>{const i=()=>{const r=Aee(t.el,"dir",SB);e.exports=r==="rtl"?"rtl":"ltr"};return i(),Cee(t.el,["dir"],i)})}),zee=t=>(e={})=>Nee((i,r)=>{const s=Oee(i.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=i;r.onLifecycle(()=>bwe(i.el,()=>t("./assets"),({t9nLocale:l,t9nStrings:c,lang:d})=>{const h={...c,_lang:d,_t9nLocale:l,_loading:!1};r.exports=h;const f=c.componentLabel;typeof f=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=f)),a(o.messageOverrides)},e.name));const a=l=>{const c=r.exports,d=c._original??c,h=jee(d,l);l&&(h._original=d),r.exports=h};return"messageOverrides"in o&&r.onUpdate(l=>{l.has("messageOverrides")&&a(o.messageOverrides)}),e.blocking?(r.setProvisionalExports(n,!1),r.ready):n}),jee=(t,e)=>{if(!e)return t;const i={...t};return Object.entries(e).forEach(([r,s])=>{typeof s=="object"?i[r]=jee(t[r],s):i[r]=s??t[r]}),i},KV=t=>Iwe,$we="arcgisPropertyChange",Iwe=(...t)=>{const e=c_(),i=WV($we,void 0,e);let r=!0;return e.manager.onUpdated(s=>{if(r||!e.el.isConnected){r=!1;return}for(const n of t)s.has(n)&&i.emit({name:n})}),i};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const xn=zee(uee);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ds=()=>c2((t,e)=>{let i;function r(){i?.abort()}return e.onLoad(()=>{t.listen("focus",()=>{i=new AbortController,t.el.addEventListener("focusout",r,{signal:i.signal})})}),e.onDisconnected(()=>{t.el.removeEventListener("focusout",r)}),async(s,n)=>{if(t.disabled)return;const o=Twe(s());if(!o)return;const{target:a,includeContainer:l,strategy:c}=o,d=a2(t.el),h=d.activeElement;if(await cwe(t),!(h!==d.activeElement||i&&!i?.signal.aborted))return t.el.removeEventListener("focus",r),$w(a,l,c,t.el,n)}});function kwe(t){return"target"in t&&("includeContainer"in t||"strategy"in t)}function Twe(t){if(t)return kwe(t)?t:{target:t}}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Zs={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",textSlotted:"text--slotted",container:"container",imageSlotted:"image--slotted",closable:"closable",multiple:"multiple",single:"single",selectable:"selectable",selectIcon:"select-icon",selectIconActive:"select-icon--active",nonInteractive:"non-interactive",isCircle:"is-circle",selected:"selected"},Ewe={image:"image"},aI={close:"x",checkedSingle:"circle-f",uncheckedMultiple:"square",checkedMultiple:"check-square-f"},Mwe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-flex;cursor:default;border-radius:var(--calcite-chip-corner-radius, 9999px)}:host([closed]){display:none}:host([appearance=outline]) .container,:host([appearance=outline-fill]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([appearance=outline]) .close,:host([appearance=outline-fill]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([appearance=outline]):host([kind=brand]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-hover-border-color: var(--calcite-chip-border-color, var(--calcite-color-brand));--calcite-internal-chip-selectable-active-border-color: var( --calcite-chip-border-color, var(--calcite-color-brand) )}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=inverse]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-inverse))}:host([appearance=outline]):host([kind=neutral]),:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-border-color: var(--calcite-chip-border-color, var(--calcite-color-border-1))}:host([appearance=outline]){--calcite-internal-chip-background-color: transparent}:host([appearance=outline-fill]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-1))}:host([appearance=solid]){--calcite-internal-chip-border-color: transparent;--calcite-internal-chip-selectable-hover-border-color: transparent;--calcite-internal-chip-selectable-active-border-color: transparent}:host([appearance=solid]):host([kind=brand]) .container,:host([appearance=solid]):host([kind=inverse]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-inverse))}:host([appearance=solid]):host([kind=brand]) .close,:host([appearance=solid]):host([kind=inverse]) .close{outline-color:var(--calcite-color-text-inverse)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-brand))}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-inverse))}:host([appearance=solid]):host([kind=inverse]) .close:hover{background-color:var(--calcite-color-inverse-hover)}:host([appearance=solid]):host([kind=inverse]) .close:active{background-color:var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-background-color: var(--calcite-chip-background-color, var(--calcite-color-foreground-2))}:host([kind=neutral]) .container{color:var(--calcite-chip-text-color, var(--calcite-color-text-1))}:host([kind=neutral]) .close{color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, var(--calcite-color-text-3)))}:host([selected]) .select-icon{opacity:1}:host([appearance=solid]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-border-3)}:host([appearance=solid]):host([kind=inverse]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-inverse-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-inverse-press)}:host([appearance=solid]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-brand-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline-fill]):host([kind=inverse]),:host([appearance=outline-fill]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-foreground-2);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline]):host([kind=neutral]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-hover-border-color: var(--calcite-color-border-input);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press);--calcite-internal-chip-selectable-active-border-color: var(--calcite-color-text-3)}:host([appearance=outline]):host([kind=inverse]),:host([appearance=outline]):host([kind=brand]){--calcite-internal-chip-selectable-hover-background-color: var(--calcite-color-transparent-hover);--calcite-internal-chip-selectable-active-background-color: var(--calcite-color-transparent-press)}:host([scale=s]) .container{--calcite-internal-chip-block-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--2);--calcite-internal-chip-icon-size: var(--calcite-size-xs, 1rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-image-size: var(--calcite-spacing-xl, 1.25rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-close-size: var(--calcite-size-xs, 1rem) }:host([scale=s]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px)}:host([scale=s]) .container.image--slotted:has(.chip-icon),:host([scale=s]) .container.image--slotted.text--slotted,:host([scale=s]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.image--slotted:not(.text--slotted,:has(.chip-icon)),:host([scale=s]) .container.image--slotted:not(.selectable){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=s]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=s]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=s]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=s]) .container.multiple:not(.is-circle).image--slotted:not(.text--slotted){--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container{--calcite-internal-chip-block-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-font-size: var(--calcite-font-size--1);--calcite-internal-chip-icon-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-icon-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-image-size: var(--calcite-size-sm, 1.5rem) ;--calcite-internal-chip-title-space: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-close-size: var(--calcite-size-sm, 1.5rem) }:host([scale=m]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-px)}:host([scale=m]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.image--slotted:has(.chip-icon),:host([scale=m]) .container.image--slotted.text--slotted,:host([scale=m]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-px);--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=m]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=m]) .container.multiple:not(.is-circle){--calcite-internal-chip-select-space-x-end: .125rem ;--calcite-internal-chip-select-space-x-start: .125rem }:host([scale=m]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .5rem ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=m]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container{--calcite-internal-chip-block-size: 2.75rem ;--calcite-internal-chip-container-space-x-end: .5rem ;--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-font-size: var(--calcite-font-size-0);--calcite-internal-chip-icon-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-icon-space: .5rem ;--calcite-internal-chip-image-size: var(--calcite-size-md, 2rem) ;--calcite-internal-chip-title-space: .5rem ;--calcite-internal-close-size: var(--calcite-size-md, 2rem) }:host([scale=l]) .container:not(.closable).is-circle{--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.image--slotted:not(.is-circle){--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.image--slotted:has(.chip-icon),:host([scale=l]) .container.image--slotted.text--slotted,:host([scale=l]) .container.image--slotted.closable{--calcite-internal-chip-image-space-x-end: .5rem }:host([scale=l]) .container.selectable.single:not(.is-circle).image--slotted{--calcite-internal-chip-container-space-x-start: var(--calcite-spacing-xs, .375rem) }:host([scale=l]) .container.selectable.single:not(.is-circle).selected{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-none, 0)}:host([scale=l]) .container.selectable.single:not(.is-circle).selected.image--slotted{--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xs, .375rem) ;--calcite-internal-chip-select-space-x-start: .5rem }:host([scale=l]) .container.multiple:not(.is-circle){--calcite-internal-chip-container-space-x-start: .5rem ;--calcite-internal-chip-select-space-x-end: var(--calcite-spacing-xxs, .25rem) ;--calcite-internal-chip-select-space-x-start: var(--calcite-spacing-xxs, .25rem) }:host([scale=l]) .container.multiple:not(.is-circle).image--slotted{--calcite-internal-chip-select-space-x-end: .75rem }:host([scale=l]) .container.closable:not(.is-circle){--calcite-internal-chip-container-space-x-end: var(--calcite-spacing-xs, .375rem) }.container{box-sizing:border-box;display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center;justify-content:center;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-internal-chip-background-color);border-color:var(--calcite-internal-chip-border-color);border-radius:var(--calcite-chip-corner-radius, 9999px);border-width:var(--calcite-border-width-sm);border-style:solid;font-size:var(--calcite-internal-chip-font-size, var(--calcite-font-size));padding-inline-start:var(--calcite-internal-chip-container-space-x-start);padding-inline-end:var(--calcite-internal-chip-container-space-x-end);block-size:var(--calcite-internal-chip-block-size, auto);inline-size:var(--calcite-internal-chip-inline-size, auto);min-inline-size:var(--calcite-internal-chip-block-size, auto)}.container:hover .select-icon--active{opacity:var(--calcite-opacity-full, 1)}.container.selectable{cursor:pointer}.container.selectable:hover{background-color:var(--calcite-internal-chip-selectable-hover-background-color);border-color:var(--calcite-internal-chip-selectable-hover-border-color)}.container.selectable:active{background-color:var(--calcite-internal-chip-selectable-active-background-color);border-color:var(--calcite-internal-chip-selectable-active-border-color)}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.text--slotted .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container:not(.text--slotted) .title,.container:not(.image--slotted) .image-container{display:none}.container.is-circle .chip-icon,.container.is-circle .image-container{padding:var(--calcite-spacing-none, 0)}.title{padding-inline:var(--calcite-internal-chip-title-space)}.image-container{display:inline-flex;overflow:hidden;align-items:center;justify-content:center;pointer-events:none;block-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-image-size, var(--calcite-spacing-xxl, 1.5rem));padding-inline-start:var(--calcite-spacing-none, 0);padding-inline-end:var(--calcite-internal-chip-image-space-x-end, 0)}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--calcite-chip-icon-color, var(--calcite-chip-text-color, var(--calcite-icon-color, currentColor)));padding-inline:var(--calcite-internal-chip-icon-space, var(--calcite-spacing-xs, .375rem))}.select-icon{align-self:center;justify-content:center;align-items:center;display:flex;inset-block-start:-1px;position:absolute;visibility:hidden;inline-size:auto;opacity:0;transition:opacity .15s ease-in-out,inline-size .15s ease-in-out;color:var(--calcite-chip-select-icon-color, currentColor)}.select-icon.select-icon--active{position:relative;visibility:visible;opacity:var(--calcite-opacity-half, .5);color:var(--calcite-chip-select-icon-color-press, var(--calcite-chip-select-icon-color-pressed, var(--calcite-chip-select-icon-color, currentColor)))}.multiple .select-icon{display:flex;align-items:center;justify-content:center}.multiple .select-icon,.single .select-icon--active{padding-inline-start:var(--calcite-internal-chip-select-space-x-start);padding-inline-end:var(--calcite-internal-chip-select-space-x-end);block-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-chip-icon-size, var(--calcite-spacing-xxl, 1.5rem))}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.close{margin:0;cursor:pointer;align-items:center;border-radius:50%;border-style:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;background-color:var(--calcite-close-background-color, var(--calcite-color-transparent));-webkit-appearance:none;display:flex;align-content:center;justify-content:center;color:var(--calcite-chip-close-icon-color, var(--calcite-close-icon-color, currentColor));block-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));inline-size:var(--calcite-internal-close-size, var(--calcite-spacing-xxl, 1.5rem));padding:0}.close:hover,.close:focus{background-color:var(--calcite-close-background-color-hover, var(--calcite-color-transparent-hover))}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:active{background-color:var(--calcite-close-background-color-press, var(--calcite-color-transparent-press))}.close calcite-icon{color:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,JP=class JP extends it{constructor(){super(),this.closeButtonRef=wi(),this.containerRef=wi(),this.messages=xn(),this.focusSetter=ds()(this),this.hasImage=!1,this.hasText=!1,this.appearance="solid",this.closable=!1,this.closed=!1,this.closeOnDelete=!1,this.disabled=!1,this.iconFlipRtl=!1,this.interactive=!1,this.kind="neutral",this.scale="m",this.selected=!1,this.selectionMode="none",this.calciteChipClose=ve({cancelable:!1}),this.calciteChipSelect=ve({cancelable:!1}),this.calciteInternalChipKeyEvent=ve({cancelable:!1}),this.calciteInternalChipSelect=ve({cancelable:!1}),this.calciteInternalSyncSelectedChips=ve({cancelable:!1}),this.listen("keydown",this.keyDownHandler),this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>{if(this.interactive)return this.containerRef.value;if(this.closable)return this.closeButtonRef.value},e)}async load(){this.updateHasText()}willUpdate(e){e.has("selected")&&this.hasUpdated&&this.watchSelected(this.selected)}updated(){wn(this)}loaded(){this.selectionMode!=="none"&&this.interactive&&this.selected&&this.handleSelectionPropertyChange(this.selected)}watchSelected(e){this.selectionMode!=="none"&&this.handleSelectionPropertyChange(e)}keyDownHandler(e){if(e.target===this.el)switch(e.key){case" ":case"Enter":this.handleEmittingEvent(),e.preventDefault();break;case"Backspace":case"Delete":this.closable&&!this.closed&&this.closeOnDelete&&(e.preventDefault(),this.close());break;case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalChipKeyEvent.emit(e),e.preventDefault();break}}clickHandler(){!this.interactive&&this.closable&&$w(this.closeButtonRef.value)}handleDefaultSlotChange(){this.updateHasText()}close(){this.calciteChipClose.emit(),this.selected=!1,this.closed=!0}closeButtonKeyDownHandler(e){kg(e.key)&&(e.preventDefault(),this.close())}updateHasText(){this.hasText=this.el.textContent.trim().length>0}handleSlotImageChange(e){this.hasImage=Ft(e)}handleEmittingEvent(){this.interactive&&this.calciteChipSelect.emit()}handleSelectionPropertyChange(e){this.selectionMode==="single"&&this.calciteInternalSyncSelectedChips.emit(),!this.parentChipGroup.selectedItems.includes(this.el)&&e&&this.selectionMode!=="multiple"&&this.calciteInternalChipSelect.emit(),this.selectionMode!=="single"&&this.calciteInternalSyncSelectedChips.emit()}renderChipImage(){return j`<div class=${O(Zs.imageContainer)}><slot name=${Ewe.image} @slotchange=${this.handleSlotImageChange}></slot></div>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"?this.selected?aI.checkedMultiple:aI.uncheckedMultiple:this.selected?aI.checkedSingle:void 0;return j`<div class=${O({[Zs.selectIcon]:!0,[Zs.selectIconActive]:this.selectionMode==="multiple"||this.selected})}>${e?j`<calcite-icon .icon=${e} .scale=${Fr(this.scale)}></calcite-icon>`:null}</div>`}renderCloseButton(){return j`<button .ariaLabel=${this.messages.dismissLabel} class=${O(Zs.close)} @click=${this.close} @keydown=${this.closeButtonKeyDownHandler} .tabIndex=${this.disabled?-1:0} ${ct(this.closeButtonRef)}><calcite-icon .icon=${aI.close} .scale=${Fr(this.scale)}></calcite-icon></button>`}renderIcon(){return j`<calcite-icon class=${O(Zs.chipIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.icon} .scale=${Fr(this.scale)}></calcite-icon>`}render(){const{disabled:e}=this,i=e||!e&&!this.interactive,r=this.selectionMode==="multiple"&&this.interactive?"checkbox":this.selectionMode!=="none"&&this.interactive?"radio":this.interactive?"button":"img";return _n({disabled:e,children:j`<div .ariaChecked=${this.selectionMode!=="none"&&this.interactive?this.selected:void 0} .ariaLabel=${this.label} class=${O({[Zs.container]:!0,[Zs.textSlotted]:this.hasText,[Zs.imageSlotted]:this.hasImage,[Zs.selectable]:this.selectionMode!=="none",[Zs.multiple]:this.selectionMode==="multiple",[Zs.single]:this.selectionMode==="single"||this.selectionMode==="single-persist",[Zs.selected]:this.selected,[Zs.closable]:this.closable,[Zs.nonInteractive]:!this.interactive,[Zs.isCircle]:!this.closable&&!this.hasText&&(!this.icon||!this.hasImage)&&(this.selectionMode==="none"||!!this.selectionMode&&this.selectionMode!=="multiple"&&!this.selected)})} @click=${this.handleEmittingEvent} .role=${r} .tabIndex=${i?-1:0} ${ct(this.containerRef)}>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}${this.renderChipImage()}${this.icon&&this.renderIcon()||""}<span class=${O(Zs.title)}><slot @slotchange=${this.handleDefaultSlotChange}></slot></span>${this.closable&&this.renderCloseButton()||""}</div>`})}};JP.properties={hasImage:[16,{},{state:!0}],hasText:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],closeOnDelete:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],interactive:[5,{},{type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],parentChipGroup:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,value:1},JP.styles=Mwe;let _M=JP;fi("calcite-chip",_M);const Qct=Object.freeze(Object.defineProperty({__proto__:null,Chip:_M},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wt=u_(class extends d_{constructor(){super(...arguments),this.key=ge}render(t,e){return this.key=t,e}update(t,[e,i]){return e!==this.key&&(JV(t),this.key=e),i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Cwe=new RegExp("\\.(0+)?$"),Pwe=new RegExp("0+$"),ai=class ai{constructor(e){if(e instanceof ai)return e;const[i,r]=jwe(e).split(".").concat("");this.value=BigInt(i+r.padEnd(ai.DECIMALS,"0").slice(0,ai.DECIMALS))+BigInt(ai.ROUNDED&&r[ai.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace("-","").padStart(ai.DECIMALS+1,"0"),i=e.slice(0,-ai.DECIMALS),r=e.slice(-ai.DECIMALS).replace(Pwe,"");return{integers:i,decimals:r}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),s=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&s.unshift({type:"minusSign",value:e.minusSign}),r.length&&(s.push({type:"decimal",value:e.decimal}),r.split("").forEach(n=>s.push({type:"fraction",value:n}))),s}format(e){const{integers:i,decimals:r}=this.getIntegersAndDecimals(),s=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,n=r.length?`${e.decimal}${r.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${s}${n}`}add(e){return ai.fromBigInt(this.value+new ai(e).value)}subtract(e){return ai.fromBigInt(this.value-new ai(e).value)}multiply(e){return ai._divRound(this.value*new ai(e).value,ai.SHIFT)}divide(e){return ai._divRound(this.value*ai.SHIFT,new ai(e).value)}};ai.DECIMALS=100,ai.ROUNDED=!0,ai.SHIFT=BigInt("1"+"0".repeat(ai.DECIMALS)),ai._divRound=(e,i)=>ai.fromBigInt(e/i+(ai.ROUNDED?e*BigInt(2)/i%BigInt(2):BigInt(0))),ai.fromBigInt=e=>Object.assign(Object.create(ai.prototype),{value:e,isNegative:e<BigInt(0)});let Iw=ai;function jd(t){return!(!t||isNaN(Number(t)))}function Awe(t){return!t||!Vwe(t)?"":xM(t,e=>{let i=!1;const r=e.split("").filter((s,n)=>s.match(/\./g)&&!i?(i=!0,!0):s.match(/-/g)&&n===0?!0:TA.includes(s)).join("");return jd(r)?new Iw(r).toString():""})}const Vee=/^([-0])0+(?=\d)/,Lwe=/(?!^\.)\.$/,Owe=/(?!^-)-/g,Rwe=/^-\b0\b\.?0*$/,Nwe=/0*$/,Dwe=new Set(["e","E","-",",",".",...TA]),Fwe=t=>{const e=Array.from(t).filter(i=>Dwe.has(i)).join("");return xM(e,i=>{const r=i.replace(Owe,"").replace(Lwe,"").replace(Vee,"$1");return jd(r)?Rwe.test(r)?r:zwe(r):i})};function zwe(t){const e=t.split(".")[1],i=new Iw(t).toString(),[r,s]=i.split(".");return e&&s!==e?`${r}.${e}`:i}function xM(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((r,s)=>e(s===1?r.replace(/\./g,""):r)).join("e").replace(/^e/,"1e"):e(t)}function jwe(t){const e=t.split(/[eE]/);if(e.length===1)return t;const i=+t;if(Number.isSafeInteger(i))return`${i}`;const r=t.charAt(0)==="-",s=+e[1],n=e[0].split("."),o=(r?n[0].substring(1):n[0])||"",a=n[1]||"",l=(h,f)=>{const m=Math.abs(f)-h.length,y=m>0?`${"0".repeat(m)}${h}`:h;return`${y.slice(0,f)}.${y.slice(f)}`},c=(h,f)=>{const m=f>h.length?`${h}${"0".repeat(f-h.length)}`:h;return`${m.slice(0,f)}.${m.slice(f)}`},d=s>0?`${o}${c(a,s)}`:`${l(o,s)}${a}`;return`${r?"-":""}${d.charAt(0)==="."?"0":""}${d.replace(Cwe,"").replace(Vee,"")}`}function Vwe(t){return TA.some(e=>t.includes(e))}function Uwe(t,e,i){const r=e.split(".")[1];if(r){const s=r.match(Nwe)[0];if(s&&i.delocalize(t).length!==e.length&&r.indexOf("e")===-1){const n=i.decimal;return t=t.includes(n)?t:`${t}${n}`,t.padEnd(t.length+s.length,i.localize("0"))}}return t}const SM="en",Bwe=["ar","bg","bs","ca","cs","da","de","de-AT","de-CH","el",SM,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"];new Map(Object.entries({bg:{am:"..",pm:".."},bs:{am:"prijepodne",pm:"popodne"},ca:{am:"a.m.",pm:"p.m."},cs:{am:"dop.",pm:"odp."},es:{am:"a.m.",pm:"p.m."},"es-mx":{am:"a.m.",pm:"p.m."},"es-MX":{am:"a.m.",pm:"p.m."},fi:{am:"ap.",pm:"ip."},he:{am:"",pm:""},hu:{am:"de. ",pm:"du."},lt:{am:"priepiet",pm:"popiet"},lv:{am:"priekpusdien",pm:"pcpusdien"},mk:{am:".",pm:"."},no:{am:"a.m.",pm:"p.m."},nl:{am:"a.m.",pm:"p.m."},"pt-pt":{am:"da manh",pm:"da tarde"},"pt-PT":{am:"da manh",pm:"da tarde"},ro:{am:"a.m.",pm:"p.m."},sl:{am:"dop.",pm:"pop."},sv:{am:"fm",pm:"em"},th:{am:"",pm:""},tr:{am:"",pm:"S"},uk:{am:"",pm:""},vi:{am:"SA",pm:"CH"}}));const qwe=["arab","arabext","latn"],OL=[...Bwe],Uee=t=>qwe.includes(t),RL=new Intl.NumberFormat().resolvedOptions().numberingSystem,Bee=RL==="arab"||!Uee(RL)?"latn":RL,Gwe=t=>Uee(t)?t:Bee;function Hwe(t){return t?OL.includes(t)?t:(t=t.toLowerCase(),t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(e,i,r)=>`${i}-${r.toUpperCase()}`),OL.includes(t)||(t=t.split("-")[0])),t==="nb"||t==="nn"?"no":t==="zh"?"zh-CN":OL.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),SM)):SM}class qee{constructor(){this.delocalize=e=>this._numberFormatOptions?xM(e,i=>i.replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?xM(e,i=>jd(i.trim())?new Iw(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=Hwe(e?.locale),e.numberingSystem=Gwe(e?.numberingSystem),!this._numberFormatOptions&&e.locale===SM&&e.numberingSystem===Bee&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((s,n)=>[s,n])),r=new Intl.NumberFormat(this._numberFormatOptions.locale,{numberingSystem:this._numberFormatOptions.numberingSystem}).formatToParts(-123456789e-1);this._actualGroup=r.find(s=>s.type==="group").value,this._group=this._actualGroup.trim().length===0||this._actualGroup==" "?"":this._actualGroup,this._decimal=e.locale==="bs"||e.locale==="mk"?",":r.find(s=>s.type==="decimal").value,this._minusSign=r.find(s=>s.type==="minusSign").value,this._getDigitIndex=s=>i.get(s)}}const La=new qee;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function $B(t){return t[t.openProp||"open"]}async function XV(t){await t.updateComplete,$B(t)?t.onBeforeOpen():t.onBeforeClose(),await t.updateComplete,t.transitionEl&&await Z0e(t.transitionEl,t.transitionProp),$B(t)?t.onOpen():t.onClose()}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Wwe={brand:"lightbulb",danger:"exclamationMarkTriangle",info:"information",success:"checkCircle",warning:"exclamationMarkTriangle"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const NL={slow:14e3,medium:1e4,fast:6e3},lI={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},wa={actionsEnd:"actions-end",close:"close",container:"container",containerActive:"container--active",dismissProgress:"dismiss-progress",icon:"icon",containerEmbedded:"container--embedded",queueCount:"queue-count",queueCountActive:"queue-count--active",textContainer:"text-container",focused:"focused"},Jwe=300;class Zwe{constructor(){this.registeredElements=[],this.queueTimeoutId=null}registerElement(e){const{registeredElements:i}=this;if(!i.includes(e)){switch(e.queue){case"immediate":i.unshift(e);break;case"next":i.splice(1,0,e);break;case"last":i.push(e);break}this.updateAlerts()}}unregisterElement(e){const{registeredElements:i}=this,r=i.indexOf(e);r!==-1&&i.splice(r,1),e.active=!1,this.updateAlerts()}updateAlerts(){window.clearTimeout(this.queueTimeoutId),this.queueTimeoutId=null,this.registeredElements.forEach((e,i)=>{e.openAlertCount=this.registeredElements.length,i===0?this.queueTimeoutId=window.setTimeout(()=>e.active=!0,Jwe):e.active=!1})}}const Ywe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;inline-size:var(--calcite-alert-width)}.container{pointer-events:none;position:fixed;z-index:var(--calcite-z-index-toast);margin-inline:auto;margin-block:0px;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:min-content;align-items:center;justify-content:center;text-align:start;opacity:0;--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-alert-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow));background-color:var(--calcite-alert-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-block-start:0 solid transparent;border-inline:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3);max-inline-size:calc(100% - var(--calcite-alert-offset-size, 2rem) * 2);transition:opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(.215,.44,.42,.88),all var(--calcite-animation-timing) ease-in-out}.container--bottom,.container--top{inset-inline-end:0;inset-inline-start:0}.container[class*=bottom]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),0);inset-block-end:var(--calcite-alert-offset-size, 2rem)}.container[class*=top]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),0);inset-block-start:var(--calcite-alert-offset-size, 2rem)}.container[class*=start]{inset-inline-start:var(--calcite-alert-offset-size, 2rem);inset-inline-end:auto}.container[class*=end]{inset-inline-end:var(--calcite-alert-offset-size, 2rem);inset-inline-start:auto}.icon{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0;margin-block:auto;margin-inline-end:auto}.close{display:flex;cursor:pointer;align-items:center;justify-content:flex-end;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-color-text-3);outline:2px solid transparent;outline-offset:2px;-webkit-appearance:none;border-start-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));border-end-end-radius:var(--calcite-alert-corner-radius, var(--calcite-border-radius));outline-color:transparent}.close:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.close:hover,.close:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-2)}.close:active{background-color:var(--calcite-color-foreground-3)}.queue-count{visibility:hidden;display:flex;min-inline-size:min-content;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2);opacity:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-inline:0 solid transparent;border-start-end-radius:0}.queue-count--active{visibility:visible;opacity:1}.dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-color-transparent-tint);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}.text-container{box-sizing:border-box;display:flex;min-inline-size:0px;flex:1 1 auto;flex-direction:column;overflow-wrap:break-word}.footer{position:relative;display:flex;inline-size:auto;justify-content:flex-end;align-self:stretch;padding-block-start:1px;block-size:inherit}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .queue-count{margin-inline:.5rem}:host([scale=s]) .container{--calcite-internal-alert-min-height: 3.5rem;inline-size:var(--calcite-alert-width, 40em)}:host([scale=s]) .close{padding:.75rem}:host([scale=s]) .icon{padding-inline-start:.75rem}:host([scale=s]) .text-container{padding-block:.5rem;padding-inline:.75rem .5rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .queue-count{margin-inline:.75rem}:host([scale=m]) .container{--calcite-internal-alert-min-height: 4.1875rem;inline-size:var(--calcite-alert-width, 50em)}:host([scale=m]) .close{padding:1rem}:host([scale=m]) .icon{padding-inline-start:1rem}:host([scale=m]) .text-container{padding-block:.75rem;padding-inline:1rem .75rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-internal-alert-min-height: 5.625rem;inline-size:var(--calcite-alert-width, 60em)}:host([scale=l]) .close{padding:1.25rem}:host([scale=l]) .icon{padding-inline-start:1.25rem}:host([scale=l]) .text-container{padding-block:1rem;padding-inline:1.25rem 1rem}:host([open]) .container--active{border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container--active[class*=bottom]{transform:translate3d(0,calc(-1 * var(--calcite-alert-offset-size, 2rem)),inherit)}:host([open]) .container--active[class*=top]{transform:translate3d(0,var(--calcite-alert-offset-size, 2rem),inherit)}:host([auto-close])>.queue-count{border-inline-end:0 solid transparent}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);margin-inline-end:.5rem;color:var(--calcite-color-text-2)}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-color-text-link)}:host([kind=brand]) .container{border-block-start-color:var(--calcite-color-brand)}:host([kind=brand]) .container .icon{color:var(--calcite-color-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-color-status-info)}:host([kind=info]) .container .icon{color:var(--calcite-color-status-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([kind=danger]) .container .icon{color:var(--calcite-color-status-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-color-status-success)}:host([kind=success]) .container .icon{color:var(--calcite-color-status-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-color-status-warning)}:host([kind=warning]) .container .icon{color:var(--calcite-color-status-warning)}:host([auto-close-duration=fast]) .dismiss-progress:after{animation:dismissProgress 6s ease-out}:host(:hover[auto-close-duration=fast]) .dismiss-progress:after,:host(:focus[auto-close-duration=fast]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .dismiss-progress:after{animation:dismissProgress 10s ease-out}:host(:hover[auto-close-duration=medium]) .dismiss-progress:after,:host(:focus[auto-close-duration=medium]) .dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .dismiss-progress:after{animation:dismissProgress 14s ease-out}:host(:hover[auto-close-duration=slow]) .dismiss-progress:after,:host(:focus[auto-close-duration=slow]) .dismiss-progress:after{animation-play-state:paused}.container.focused .dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:.75}to{inline-size:100%;opacity:1}}.container--embedded{position:absolute}:host([hidden]){display:none}[hidden]{display:none}:host([calcite-hydrated-hidden]){visibility:hidden!important;pointer-events:none}`,Kg=new Zwe,ZP=class ZP extends it{constructor(){super(...arguments),this.autoCloseTimeoutId=null,this.transitionProp="opacity",this.totalHoverTime=0,this.totalOpenTime=0,this.messages=xn(),this.focusSetter=ds()(this),this.hasEndActions=!1,this.isFocused=!1,this.numberStringFormatter=new qee,this.active=!1,this.autoClose=!1,this.autoCloseDuration="medium",this.embedded=!1,this.iconFlipRtl=!1,this.kind="brand",this.open=!1,this.openAlertCount=0,this.placement="bottom",this.queue="last",this.scale="m",this.calciteAlertBeforeClose=ve({cancelable:!1}),this.calciteAlertBeforeOpen=ve({cancelable:!1}),this.calciteAlertClose=ve({cancelable:!1}),this.calciteAlertOpen=ve({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.open&&Kg.registerElement(this.el),this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.handleActiveChange(),e.has("autoCloseDuration")&&(this.hasUpdated||this.autoCloseDuration!=="medium")&&this.updateDuration(),e.has("queue")&&(this.hasUpdated||this.queue!=="last")&&this.handleQueueChange(),e.has("numberingSystem")&&this.numberingSystemChange(),e.has("messages")&&this.effectiveLocaleChange()}disconnectedCallback(){super.disconnectedCallback(),Kg.unregisterElement(this.el),this.clearAutoCloseTimeout(),this.embedded=!1}handleActiveChange(){XV(this),this.clearAutoCloseTimeout(),this.active&&this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),NL[this.autoCloseDuration]))}openHandler(){this.open?Kg.registerElement(this.el):Kg.unregisterElement(this.el)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(this.clearAutoCloseTimeout(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),NL[this.autoCloseDuration]))}handleQueueChange(){this.open&&(Kg.unregisterElement(this.el),Kg.registerElement(this.el))}handleKeyBoardFocus(){this.isFocused=!0,this.handleFocus()}handleKeyBoardBlur(){this.isFocused=!1,this.isHovered||this.handleBlur()}effectiveLocaleChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}numberingSystemChange(){this.numberStringFormatter.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,signDisplay:"always"}}clearAutoCloseTimeout(){window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=null}setTransitionEl(e){e&&(this.transitionEl=e)}closeAlert(){this.open=!1,this.clearAutoCloseTimeout()}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}actionsEndSlotChangeHandler(e){this.hasEndActions=Ft(e)}handleMouseOver(){this.isHovered=!0,this.handleFocus()}handleMouseLeave(){this.isHovered=!1,this.isFocused||this.handleBlur()}handleFocus(){this.clearAutoCloseTimeout(),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()}handleBlur(){const e=Date.now()-this.lastMouseOverBegin,i=NL[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?e+this.totalHoverTime:e,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),i)}render(){const{open:e,autoClose:i,label:r,placement:s,active:n,openAlertCount:o}=this,a=i?"alert":"alertdialog",l=!e,c=o$(Wwe,this.icon,this.kind),d=o>1;return this.el.inert=l,this.el.ariaLabel=r,this.el.toggleAttribute("calcite-hydrated-hidden",l),this.el.role=a,j`<div class=${O({[wa.container]:!0,[wa.containerActive]:n,[`${wa.container}--${s}`]:!0,[wa.containerEmbedded]:this.embedded,[wa.focused]:this.isFocused})} @pointerenter=${this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null} @pointerleave=${this.autoClose?this.handleMouseLeave:null} ${ct(this.setTransitionEl)}>${c&&this.renderIcon(c)||""}<div class=${O(wa.textContainer)} @focusin=${this.autoClose&&this.autoCloseTimeoutId?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null}><slot name=${lI.title}></slot><slot name=${lI.message}></slot><slot name=${lI.link}></slot></div>${this.renderActionsEnd()}${d?this.renderQueueCount():null}${this.renderCloseButton()}${e&&n&&i?j`<div class=${O(wa.dismissProgress)}></div>`:null}</div>`}renderCloseButton(){return wt("close",j`<button .ariaLabel=${this.messages.close} class=${O(wa.close)} @click=${this.closeAlert} @focusin=${this.autoClose?this.handleKeyBoardFocus:null} @focusout=${this.autoClose?this.handleKeyBoardBlur:null} type=button><calcite-icon icon=x .scale=${Fr(this.scale)}></calcite-icon></button>`)}renderQueueCount(){const{openAlertCount:e}=this,i=e>2?e-1:1,r=this.numberStringFormatter.numberFormatter.format(i);return wt("queue-count",j`<div class=${O({[wa.queueCount]:!0,[wa.queueCountActive]:e>1})}><calcite-chip .label=${r} .scale=${this.scale} .value=${r}>${r}</calcite-chip></div>`)}renderActionsEnd(){return j`<div class=${O(wa.actionsEnd)}><slot name=${lI.actionsEnd} @slotchange=${this.actionsEndSlotChangeHandler}></slot></div>`}renderIcon(e){return j`<div class=${O(wa.icon)}><calcite-icon .flipRtl=${this.iconFlipRtl} .icon=${e} .scale=${Fr(this.scale)}></calcite-icon></div>`}};ZP.properties={hasEndActions:[16,{},{state:!0}],isFocused:[16,{},{state:!0}],numberStringFormatter:[16,{},{state:!0}],active:[5,{},{type:Boolean}],autoClose:[7,{},{reflect:!0,type:Boolean}],autoCloseDuration:[3,{},{reflect:!0}],embedded:[5,{},{type:Boolean}],icon:[3,{converter:Sw},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],kind:[3,{},{reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],openAlertCount:[9,{},{type:Number}],placement:[3,{},{reflect:!0}],queue:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},ZP.styles=Ywe;let tD=ZP;fi("calcite-alert",tD);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QV=Symbol.for(""),Kwe=t=>{if(t?.r===QV)return t?._$litStatic$},Gee=t=>({_$litStatic$:t,r:QV}),rg=(t,...e)=>({_$litStatic$:e.reduce((i,r,s)=>i+(n=>{if(n._$litStatic$!==void 0)return n._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${n}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[s+1],t[0]),r:QV}),IB=new Map,Xwe=t=>(e,...i)=>{const r=i.length;let s,n;const o=[],a=[];let l,c=0,d=!1;for(;c<r;){for(l=e[c];c<r&&(n=i[c],(s=Kwe(n))!==void 0);)l+=s+e[++c],d=!0;c!==r&&a.push(n),o.push(l),c++}if(c===r&&o.push(e[r]),d){const h=o.join("$$lit$$");(e=IB.get(h))===void 0&&(o.raw=o,IB.set(h,e=o)),i=a}return t(e,...i)},u2=Xwe(j);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qwe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline}:host a,:host button{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0;border-style:none;font-family:inherit;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host button:hover{text-decoration:none}:host a,:host button{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform,background-size;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;margin-block-start:-.25em}:host .calcite-link--icon.icon-start{margin-inline-end:.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:.5rem}:host button,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0;color:var(--calcite-link-text-color, var(--calcite-color-text-link));line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px}:host button:hover,:host button:focus,:host a:hover,:host a:focus{background-size:100% 1px,100% 1px}:host button:active,:host a:active{background-size:100% 2px,100% 2px}:host button.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%,100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,cI={calciteLinkIcon:"calcite-link--icon",iconStart:"icon-start",iconEnd:"icon-end"},YP=class YP extends it{constructor(){super(),this.childRef=wi(),this.focusSetter=ds()(this),this.disabled=!1,this.download=!1,this.listen("click",this.clickHandler)}async setFocus(e){return this.focusSetter(()=>this.childRef.value,e)}updated(){wn(this)}clickHandler(e){this.disabled||e.isTrusted||this.childRef.value.click()}childElClickHandler(e){e.isTrusted||e.stopPropagation()}render(){const{download:e,el:i}=this,r=Of(i),s=this.href?"a":"button",n=j`<calcite-icon class=${O({[cI.calciteLinkIcon]:!0,[cI.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} scale=s></calcite-icon>`,o=j`<calcite-icon class=${O({[cI.calciteLinkIcon]:!0,[cI.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} scale=s></calcite-icon>`,a=s==="button"?rg`button`:rg`a`,l=s==="button"?0:null;return this.el.role="presentation",_n({disabled:this.disabled,children:u2`<${a} class=${O({[$A.rtl]:r==="rtl"})} download=${(s==="a"?e===!0||e===""?"":e||null:null)??le} href=${(s==="a"&&this.href)??le} @click=${this.childElClickHandler} rel=${(s==="a"&&this.rel)??le} tabindex=${l} target=${(s==="a"&&this.target)??le} ${ct(this.childRef)}>${j`${this.iconStart?n:null}<slot></slot>${this.iconEnd?o:null}`}</${a}>`})}};YP.properties={disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Sw},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],rel:1,target:1},YP.styles=Qwe;let iD=YP;fi("calcite-link",iD);let Bp;const Rs=globalThis;function H(t){return typeof Bp[t]=="function"?Bp[t]=Bp[t](Rs):Bp[t]}Bp=Rs.dojoConfig?.has||Rs.esriConfig?.has?{...Rs.dojoConfig?.has,...Rs.esriConfig?.has}:{},H.add=(t,e,i,r)=>{(r||Bp[t]===void 0)&&(Bp[t]=e),i&&H(t)},H.cache=Bp,H.add("big-integer-warning-enabled",!0),H.add("esri-deprecation-warnings",!0),H.add("esri-tests-disable-screenshots",!1),H.add("esri-tests-use-full-window",!1),H.add("esri-tests-post-to-influx",!0),H.add("esri-cim-animations-enable-status","enabled"),H.add("esri-cim-animations-spotlight",!1),H.add("esri-cim-animations-freeze-time",!1),(()=>{H.add("host-webworker",Rs.WorkerGlobalScope!==void 0&&self instanceof Rs.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(H.add("host-browser",t),H.add("host-node",!(typeof Rs.process!="object"||!Rs.process.versions?.node||!Rs.process.versions.v8)),H.add("dom",t),H("host-browser")){const e=navigator,i=e.userAgent,r=e.appVersion,s=parseFloat(r);if(H.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),H.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),H.add("khtml",r.includes("Konqueror")?s:void 0),H.add("edge",parseFloat(i.split("Edge/")[1])||void 0),H.add("opr",parseFloat(i.split("OPR/")[1])||void 0),H.add("webkit",!H("wp")&&!H("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),H.add("chrome",!H("edge")&&!H("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),H.add("android",!H("wp")&&parseFloat(i.split("Android ")[1])||void 0),H.add("safari",!r.includes("Safari")||H("wp")||H("chrome")||H("android")||H("edge")||H("opr")?void 0:parseFloat(r.split("Version/")[1])),H.add("mac",r.includes("Macintosh")),!H("wp")&&/(iPhone|iPod|iPad)/.test(i)){const n=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));H.add(n,a),H.add("ios",a)}H("webkit")||(!i.includes("Gecko")||H("wp")||H("khtml")||H("edge")||H.add("mozilla",s),H("mozilla")&&H.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(Rs.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&H.add("esri-mobile",e),i&&H.add("esri-iPhone",i),H.add("esri-geolocation",!!navigator.geolocation)}H.add("esri-wasm","WebAssembly"in Rs),H.add("esri-performance-mode-frames-between-render",20),H.add("esri-force-performance-mode",!1),H.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in Rs,e=Rs.crossOriginIsolated===!1;return t&&!e}),H.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),H.add("esri-atomics","Atomics"in Rs),H.add("esri-workers","Worker"in Rs),H.add("web-feat:cache","caches"in Rs),H.add("esri-workers-arraybuffer-transfer",!H("safari")||Number(H("safari"))>=12),H.add("workers-pool-size",8),H.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),H.add("featurelayer-simplify-payload-size-factors",[1,1,4]),H.add("featurelayer-fast-triangulation-enabled",!0),H.add("featurelayer-animation-enabled",!0),H.add("featurelayer-snapshot-enabled",!0),H.add("featurelayer-snapshot-initial-tolerance",0),H.add("featurelayer-snapshot-point-min-threshold",8e4),H.add("featurelayer-snapshot-point-max-threshold",4e5),H.add("featurelayer-snapshot-multipoint-min-threshold",2e4),H.add("featurelayer-snapshot-multipoint-max-threshold",1e5),H.add("featurelayer-snapshot-polygon-min-threshold",2e3),H.add("featurelayer-snapshot-polygon-max-threshold",2e3),H.add("featurelayer-snapshot-polyline-min-threshold",2e3),H.add("featurelayer-snapshot-polyline-max-threshold",2e3),H.add("featurelayer-snapshot-max-vertex-count",25e4),H.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),H.add("featurelayer-snapshot-concurrency",4),H.add("featurelayer-snapshot-coverage",.1),H.add("featurelayer-query-max-depth",4),H.add("featurelayer-query-pausing-enabled",!1),H.add("featurelayer-query-tile-concurrency",4),H.add("featurelayer-query-tile-max-features",6e5),H.add("featurelayer-advanced-symbols",!1),H.add("featurelayer-pbf",!0),H.add("featurelayer-pbf-statistics",!1),H.add("feature-layers-workers",!0),H.add("feature-polyline-generalization-factor",1),H.add("parquetlayer-full-query-feature-count",2e4),H.add("parquetlayer-hittest-max-feature-count",1),H.add("parquetlayer-persistence-enabled",!1),H.add("mapview-transitions-duration",200),H.add("mapview-essential-goto-duration",200),H.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),H.add("mapserver-pbf-version-support",10.81),H.add("mapservice-popup-identify-max-tolerance",20),H.add("request-queue-concurrency-hosted",16),H.add("request-queue-concurrency-non-hosted",4),H.add("curve-densification-coarse-segments",128),H.add("curve-densification-max-segments",2e3),H.add("curve-densification-min-segments",3),H.add("curve-densification-pixel-deviation",.5),H.add("view-readyState-waiting-delay",1e3),H.add("gradient-depth-bias",.01),H.add("gradient-depth-epsilon",1e-8),H.add("enable-feature:esri-compress-textures",!0),H("host-webworker")||H("host-browser")&&(H.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),H.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function eut(t){}function e_e(t){return()=>t}function tut(t){return t}var yo;let eU=(yo=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*yo._m}getInt(){return this._seed=(yo._a*this._seed+yo._c)%yo._m,this._seed}getFloat(){return this.getInt()/(yo._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const r=i-e;return e+this.getInt()/yo._m*r}},yo._m=2147483647,yo._a=48271,yo._c=0,yo);const t_e=1.5,iut=1/t_e,rut=.5;function Hee(t){return t}function i_e(t,e=Hee){if(!t||t.length===0)return;let i=t[0],r=e(i);for(let s=1;s<t.length;++s){const n=t[s],o=Number(e(n));o>r&&(r=o,i=n)}return i}function sut(t,e=Hee){return i_e(t,i=>-e(i))}function r_e(t,e){return e?t.filter((i,r,s)=>s.findIndex(e.bind(null,i))===r):Array.from(new Set(t))}function s_e(t,e,i,r,s,n,o){if(t==null&&r==null)return!0;e=Math.max(0,e),s=Math.max(0,s),i=Math.max(0,i<0?(t?.length??0)+i:i),n=Math.max(0,n<0?(r?.length??0)+n:n);const a=i-e;if(t==null||r==null||a!==n-s)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[s+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[s+l])return!1;return!0}function d2(t,e,i){return s_e(t,0,t?.length??0,e,0,e?.length??0,i)}function nut(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}}function kB(t,e,i){let r,s;return i?(r=e.filter(n=>!t.some(o=>i(o,n))),s=t.filter(n=>!e.some(o=>i(o,n)))):(r=e.filter(n=>!t.includes(n)),s=t.filter(n=>!e.includes(n))),{added:r,removed:s}}function out(t){return t&&typeof t.length=="number"}function aut(t,e){const i=t.length;if(i===0)return[];const r=[];for(let s=0;s<i;s+=e)r.push(t.slice(s,s+e));return r}let Wee=class{constructor(){this.last=0}};const Jee=new Wee;function rD(t,e,i,r){r=r||Jee;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(t[o]===e)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(t[o]===e)return r.last=o,o;return-1}function sD(t,e,i,r){const s=t.length,n=rD(t,e,s,r);if(n!==-1)return t[n]=t[s-1],t.pop(),e}const nl=new Set;function n_e(t,e,i=t.length,r=e.length,s,n){if(r===0||i===0)return i;nl.clear();for(let a=0;a<r;++a)nl.add(e[a]);s=s||Jee;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(nl.has(t[a])&&(n?.push(t[a]),nl.delete(t[a]),t[a]=t[i-1],--i,--a,nl.size===0||i===0))return nl.clear(),i;for(let a=0;a<o;++a)if(nl.has(t[a])&&(n?.push(t[a]),nl.delete(t[a]),t[a]=t[i-1],--i,--a,nl.size===0||i===0))return nl.clear(),i;return nl.clear(),i}function o_e(t,e){let i=0;for(let r=0;r<t.length;++r){const s=t[r];e(s,r)&&(t[i]=s,i++)}return t.length=i,t}function cut(t,e,i){const r=t.length;if(e>=r)return t.slice();const s=tU(i),n=new Set,o=[];for(;o.length<e;){const a=Math.floor(s()*r);n.has(a)||(n.add(a),o.push(t[a]))}return o}function tU(t){return t?(TB.seed=t,()=>TB.getFloat()):Math.random}const TB=new eU;function Zee(t,e){if(!t)return t;const i=tU(e);for(let r=t.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=t[r];t[r]=t[s],t[s]=n}return t}function iU(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function Ei(t,e){return t!=null}const uut=[];function a_e(t){return t instanceof ArrayBuffer}function rU(t){return t?.constructor?.name==="Int8Array"}function Yee(t){return t?.constructor?.name==="Uint8Array"}function sU(t){return t?.constructor?.name==="Uint8ClampedArray"}function nU(t){return t?.constructor?.name==="Int16Array"}function Kee(t){return t?.constructor?.name==="Uint16Array"}function oU(t){return t?.constructor?.name==="Int32Array"}function Xee(t){return t?.constructor?.name==="Uint32Array"}function l_e(t){return t?.constructor?.name==="Float16Array"}function MA(t){return t?.constructor?.name==="Float32Array"}function CA(t){return t?.constructor?.name==="Float64Array"}function Qee(t){return"buffer"in t}const aU=1024;function dut(t){return CA(t)||MA(t)||oU(t)||nU(t)||rU(t)}function hut(t){return CA(t)||MA(t)}function put(t){return CA(t)?179769e303:l_e(t)?65504:MA(t)?3402823e32:Xee(t)?4294967295:Kee(t)?65535:Yee(t)||sU(t)?255:oU(t)?2147483647:nU(t)?32767:rU(t)?127:256}const fut=-32768,mut=-2147483648;function yut(t){return t}function lU(t,e){let i;for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function U(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=ite(t);if(e!=null)return e;if(rS(t))return t.clone();if(ete(t))return t.map(U);if(tte(t))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(t))i[r]=U(t[r]);return i}function nD(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const i=ite(t);if(i!=null)return i;if(ete(t)){let s=!0;const n=t.map(o=>{const a=nD(o,e);return o!=null&&a==null&&(s=!1),a});return s?n:null}if(rS(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(tte(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const s of Object.getOwnPropertyNames(t)){const n=t[s],o=nD(n);if(n!=null&&o==null)return null;r[s]=o}return r}function rS(t){return typeof t.clone=="function"}function ete(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function tte(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function EB(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ite(t){if(rU(t)||Yee(t)||sU(t)||nU(t)||Kee(t)||oU(t)||Xee(t)||MA(t)||CA(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,r]of t)e.set(i,U(r));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(U(i));return e}return null}function cU(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function rte(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&d2(t,e):t instanceof Set?e instanceof Set&&u_e(t,e):t instanceof Map?e instanceof Map&&d_e(t,e):!!EB(t)&&EB(e)&&c_e(t,e))}function c_e(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const r of i)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function u_e(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function d_e(t,e){if(t.size!==e.size)return!1;for(const[i,r]of t){const s=e.get(i);if(s!==r||s===void 0&&!e.has(i))return!1}return!0}function uU(t,e,i=!1){return nte(t,e,i)}function wu(t,e){if(e!=null)return e[t]||ste(t.split("."),!1,e)}function Tr(t,e,i){const r=t.split("."),s=r.pop(),n=ste(r,!0,i);n&&s&&(n[s]=e)}function MB(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const i=e;if(t.length!==i.length)return!0;for(let r=0;r<t.length;r++)if(MB(t[r],i[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in t)if(MB(t[i],e[i]))return!0;return!1}return t!==e}function ste(t,e,i){let r=i;for(const s of t){if(r==null)return;if(!(s in r)){if(!e)return;r[s]={}}r=r[s]}return r}function nte(t,e,i){return e?Object.keys(e).reduce((r,s)=>{if(s==="__proto__")return r;let n=r[s],o=e[s];return n===o?r:n===void 0?(r[s]=U(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{n.includes(a)||n.push(a)}):r[s]=o.slice())):o&&typeof o=="object"?r[s]=nte(n,o,i):r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[s]=o),r)},t||{}):t}function gut(t,e){for(const i of Object.entries(t))if(e===i[1])return i[0]}function PA(t,e){return Object.values(t).includes(e)}const lt={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(uU(lt,globalThis.esriConfig,!0),delete lt.has),!lt.assetsPath){{const t="4.34";lt.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}lt.defaultAssetsPath=lt.assetsPath}const h_e=/\{([^}]+)\}/g;function CB(t){return t??""}function Mh(t,e){return e?t.replaceAll(h_e,typeof e=="object"?(i,r)=>CB(wu(r,e)):(i,r)=>CB(e(r))):t}function vut(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>e?.includes(i)?i:`\\${i}`)}function ote(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}let PB;function p_e(t){return PB??(PB=new DOMParser),PB.parseFromString(t||"","text/html").body.innerText||""}function but(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function wut(t,...e){let i=t[0];for(let r=0;r<e.length;++r)i+=e[r]+t[r+1];return i}const AB={info:0,warn:1,error:2,none:3};var Nr;let X=(Nr=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,Nr._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Nr.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,Nr._loggers.get(e)||new Nr({module:e})}_log(e,i,...r){if(this._matchLevel(e)){if(i!=="always"&&!Nr._throttlingDisabled){const s=m_e(r),n=this._loggedMessages[e].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=Nr._tickCounter)return;this._loggedMessages[e].set(s,Nr._tickCounter),Nr._scheduleTickCounterIncrement()}for(const s of lt.log.interceptors)if(s(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,i){let r=this;for(;r!=null;){const s=r[e];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",f_e)}_matchLevel(e){const i=lt.log.level||"warn";return AB[this._parentWithMember("level",i)]<=AB[e]}static _scheduleTickCounterIncrement(){Nr._tickCounterScheduled||(Nr._tickCounterScheduled=!0,Promise.resolve().then(()=>{Nr._tickCounter++,Nr._tickCounterScheduled=!1}))}},Nr._loggers=new Map,Nr._tickCounter=0,Nr._tickCounterScheduled=!1,Nr._throttlingDisabled=!1,Nr);function f_e(t,e,...i){console[t](`[${e}]`,...i)}function m_e(...t){return ote(JSON.stringify(t,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}const y_e={remove:()=>{}};function Et(t){return t?{remove(){t&&(t(),t=void 0)}}:y_e}function ate(t){t.forEach(e=>e?.remove())}function _ut(t){ate(t),t.length=0}function Tg(t){return Et(()=>ate(t))}function xut(t){return Et(()=>t()?.remove())}function g_e(t){return Et(()=>t?.abort())}function Sut(t){return Et(t!=null?()=>t.destroy():void 0)}function v_e(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function $ut(t){v_e(t)&&t.remove()}function Iut(t){return{[Symbol.dispose](){t.remove()}}}function cs(t){return t.__accessor__??null}function b_e(t,e){return t?.metadata?.[e]!=null}function uT(t,e,i){return i?$M(t,e,{policy:i,path:""}):$M(t,e,null)}function $M(t,e,i){return e?Object.keys(e).reduce((r,s)=>{const n=s;if(n==="__proto__")return r;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[n]))return r[n]=e[n],r;if(r[n]===void 0)return r[n]=U(e[n]),r;let l=r[n],c=e[n];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[n]=l.slice():r[n]=[l]:r[n]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(d=>{l.includes(d)||l.push(d)}));else if(c&&typeof c=="object")if(i){const d=i.path;i.path=o,r[n]=$M(l,c,i),i.path=d}else r[n]=$M(l,c,null);else r.hasOwnProperty(s)&&!e.hasOwnProperty(s)||(r[n]=c);return r},t||{}):t}function lte(t){return Array.isArray(t)?t:t.split(".")}function LB(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function w_e(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...LB(i));return e}return LB(t)}function cte(t,e,i,r){const s=w_e(e);if(s.length!==1){const n=s.map(o=>r(t,o,i));return Tg(n)}return r(t,s[0],i)}const Ri={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let AA=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const IM=new AA,V1=[];let sS=IM;function Ue(t){sS.onAccessed(t)}let dT=!1,hT=!1;function Lu(t,e,i){if(dT)return dU(t,e,i);let r=null;return ute(t),r=e.call(i),dte(),r}function __e(t,e){return Lu(IM,t,e)}function dU(t,e,i){const r=dT;dT=!0,ute(t);let s=null;try{s=e.call(i)}catch(n){hT&&X.getLogger("esri.core.accessorSupport.tracking").error(n)}return dte(),dT=r,s}function ute(t){sS=t,V1.push(t)}function dte(){const t=V1.length;if(t>1){const e=V1.pop();sS=V1[t-2],e.onTrackingEnd()}else if(t===1){const e=V1.pop();sS=IM,e.onTrackingEnd()}else sS=IM}function hte(t,e){if(e.flags&Ri.DepTrackingInitialized)return;e.flags|=Ri.DepTrackingInitialized;const i=hT;hT=!1,e.flags&Ri.AutoTracked?dU(e.trackingTarget,e.metadata.get,t):pte(t,e),hT=i}const x_e=[];function pte(t,e){e.flags&Ri.ExplicitlyTracking||(e.flags|=Ri.ExplicitlyTracking,dU(e.trackingTarget,()=>{const i=e.metadata.dependsOn||x_e;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=lte(r);for(let n=0,o=t;n<s.length&&o!=null&&typeof o=="object";++n)o=OB(o,s[n],n!==s.length-1)}else OB(t,r,!1)}),e.flags&=-129)}function OB(t,e,i){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const s=cs(t);if(s){const n=s.propertiesByName.get(r);n&&(Ue(n),hte(t,n))}return i?t[r]:void 0}let S_e=class{constructor(e,i){this._observers=e,this._observer=i}remove(){iU(this._observers,this._observer)}},fte=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return $_e;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const a=i[o];if(a.destroyed)s=!0;else if(a===e){r=!0;break}}return r||(i.push(e),s&&this._removeDestroyedObservers()),new S_e(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&e[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;e[s]=e[s+r]}}e.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const $_e=Et();let p_=class extends fte{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}},I_e=class{constructor(e,i){this._observable=new p_,this._value=e,this._equalityFunction=i}get value(){return Ue(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function kw(t,e=rte){return new I_e(t,e)}let h2=class extends AA{constructor(e){super(new k_e(e)),this._observer&&RB.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&RB.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},k_e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=T_e}};const RB=new FinalizationRegistry(t=>{t.deref()?.destroy()});function T_e(){}function mte(){return new p_}function E_e(t){return new h2(t)}function yte(t){Ue(t)}function M_e(t,e){return Lu(t,e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const C_e=Qe`:host{display:block;box-sizing:border-box;*,*:before,*:after{box-sizing:inherit}}:host([hidden]){display:none}:host(:not(arcgis-basemap-gallery-item,arcgis-layer-list-item,arcgis-print-custom-text-elements,arcgis-print-dpi-input,arcgis-print-export-button,arcgis-print-exported-link,arcgis-print-exports-panel,arcgis-print-format-select,arcgis-print-layout-advanced-options,arcgis-print-layout-panel,arcgis-print-main-panel,arcgis-print-map-only-advanced-options,arcgis-print-map-only-panel,arcgis-print-out-spatial-reference-input,arcgis-print-preview-input,arcgis-print-scale-section,arcgis-print-template-select,arcgis-print-template-selector,arcgis-labeled-switch,arcgis-measurement-content,arcgis-version-management-service-item,arcgis-version-management-version-item,arcgis-version-management-version-list,arcgis-version-management-version-properties,arcgis-video-player-action-bar,arcgis-video-player-actions-group,arcgis-video-player-controls-group,arcgis-video-player-metadata,arcgis-video-player-settings,arcgis-video-player-slider)){font-family:var(--calcite-font-family)}`,p2=cee({defaultAssetPath:"https://js.arcgis.com/4.34/map-components/",hydratedAttribute:"hydrated",commonStyles:C_e}),{customElement:Ms,getAssetPath:P_e,setAssetPath:Lut}=p2;p2.t=yte;p2.o=mte;p2.c=E_e;p2.r=M_e;function LA(t){return A_e(t)||gte(t)}function A_e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function gte(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function ah(t,e,i){if(!LA(t))throw new TypeError("target is not a Evented or EventTarget object");return gte(t)?L_e(t,e,i):t.on(e,i)}function L_e(t,e,i,r){if(Array.isArray(e)){const s=e.slice();for(const n of s)t.addEventListener(n,i,r);return Et(()=>{for(const n of s)t.removeEventListener(n,i,r)})}return t.addEventListener(e,i,r),Et(()=>t.removeEventListener(e,i,r))}function vte(t,e,i){if(!LA(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const r=ah(t,e,s=>{r.remove(),i.call(t,s)});return r}function Rf(t,e){if(t==null)throw new Error(e??"value is None")}function bi(t){return t?.destroy(),null}function Out(t){return t?.dispose(),null}function _i(t){return t?.remove(),null}function sg(t){return t?.abort(),null}function Rut(t){return t?.release(),null}function O_e(t,e,i){return t!=null&&e!=null?i!=null?i(t,e):t.equals(e):t===e}function R_e(t,e){let i;return t.some((r,s)=>(i=e(r,s),i!=null)),i??void 0}function N_e(t){return{setTimeout:(e,i)=>{const r=t.setTimeout(e,i);return Et(()=>t.clearTimeout(r))}}}const f_=N_e(globalThis);function D_e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(wu(r,e)??"").toString())}let bte=class{constructor(e,i,r=void 0){this.name=e,this.details=r,this.message=(i&&D_e(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},R=class wte extends bte{constructor(e,i,r){super(e,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return U(i)}catch{return"[object]"}}))}}catch(e){throw X.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new wte(e.name,e.message,e.details)}};R.prototype.type="error";function jt(t="Aborted"){return new R("AbortError",t)}function Gt(t,e="Aborted"){if(Xr(t))throw jt(e)}function f2(t){return t instanceof AbortSignal?t:t?.signal??void 0}function Xr(t){const e=f2(t);return e!=null&&e.aborted}function Ss(t){if(Yi(t))throw t}function NB(t){if(!Yi(t))throw t}function as(t,e){const i=f2(t);if(i!=null){if(!i.aborted)return vte(i,"abort",()=>e());e()}}function hU(t,e){const i=f2(t);if(i!=null)return Gt(i),vte(i,"abort",()=>e(jt()))}function Oa(t,e){return f2(e)==null?t:new Promise((i,r)=>{let s=as(e,()=>r(jt()));const n=()=>{s=_i(s)};t.then(n,n),t.then(i,r)})}function Yi(t){return t?.name==="AbortError"}async function ng(t){try{return await t}catch(e){if(!Yi(e))throw e;return}}async function pU(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),r=i.map(o=>t[o]),s=await pU(r),n={};return i.map((o,a)=>n[o]=s[a]),n}const e=t;return Promise.allSettled(e).then(i=>Array.from(e,(r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))}async function F_e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function Dut(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function fU(t,e=void 0,i){const r=new AbortController;return as(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(e)},t);as(r,()=>{o&&(clearTimeout(o),n(jt()))})})}function Fut(t,e,i,r){const s=i&&"abort"in i?i:null;r!=null||s||(r=i);let n=setTimeout(()=>{n=0,s?.abort()},e);const o=()=>r||new R("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(n===0)throw o();return clearTimeout(n),a},a=>{throw clearTimeout(n),n===0?o():a})}function z_e(t,e){const i=new AbortController,r=setTimeout(()=>i.abort(),e);return as(t,()=>{i.abort(),clearTimeout(r)}),{...t,signal:i.signal}}function yn(t){return t&&typeof t.then=="function"}function oD(t){return yn(t)?t:Promise.resolve(t)}function m_(t,e=-1){let i,r,s,n,o=null;const a=(...l)=>{if(i){r=l,n&&n.reject(jt()),n=Is();const f=n.promise;if(o){const m=o;o=null,m.abort()}return f}if(s=n||Is(),n=null,e>0){const f=new AbortController;i=oD(t(...l,f.signal));const m=i;fU(e).then(()=>{i===m&&(n?f.abort():o=f)})}else i=1,i=oD(t(...l));const c=()=>{const f=r;r=s=i=o=null,f!=null&&a(...f)},d=i,h=s;return d.then(c,c),d.then(h.resolve,h.reject),h.promise};return a}function Is(){let t,e;const i=new Promise((s,n)=>{t=s,e=n}),r=s=>{t(s)};return r.resolve=s=>t(s),r.reject=s=>e(s),r.timeout=(s,n)=>f_.setTimeout(()=>r.reject(n),s),r.promise=i,r}function zut(t,e){e.then(t.resolve,t.reject)}async function kM(t){await Promise.resolve(),Gt(t)}function j_e(t){return t?.release&&typeof t.release=="function"}function V_e(t){return t?.acquire&&typeof t.acquire=="function"}var mf;let Nf=(mf=class{constructor(e,i,r,s=1,n=0){this._creator=e,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(mf.test.disabled)i=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=this._creator()}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):V_e(i)&&i.acquire(...e),i}release(e){e&&!mf.test.disabled&&(this._releaseFunction?this._releaseFunction(e):j_e(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},mf.test={disabled:!!H("esri-tests-disable-memory-pools")},mf);function U_e(t){t.length=0}let Fn=class{constructor(e=50,i=50){this._pool=new Nf(()=>[],void 0,U_e,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return DL.acquire()}static release(e){return DL.release(e)}static prune(){DL.prune()}};const DL=new Fn(100);let _te=class extends Nf{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const uI=[];function TM(t){uI.push(t),uI.length===1&&queueMicrotask(()=>{const e=uI.slice();uI.length=0;for(const i of e)i()})}let nS=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const EM=(t,e,i,r)=>{let s=e,n=e;const o=i>>>1,a=t[s-1];for(;n<=o;){n=s<<1,n<i&&r(t[n-1],t[n])<0&&++n;const l=t[n-1];if(r(l,a)<=0)break;t[s-1]=l,s=n}t[s-1]=a},xte=(t,e)=>t<e?-1:t>e?1:0;function B_e(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=xte);for(let n=i>>>1;n>e;n--)EM(t,n,i,r);const s=e+1;for(let n=i-1;n>e;n--){const o=t[e];t[e]=t[n],t[n]=o,EM(t,s,n,r)}}function*q_e(t,e,i,r){i===void 0&&(i=t.length),r===void 0&&(r=xte);for(let n=i>>>1;n>e;n--)EM(t,n,i,r),yield;const s=e+1;for(let n=i-1;n>e;n--){const o=t[e];t[e]=t[n],t[n]=o,EM(t,s,n,r),yield}}const G_e=1.5,H_e=1.1;let mU=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Wee,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>DB(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];e(s)&&i.push(s)}return i}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,i){const r=this.data.indexOf(e,i);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let r=0;r<i;r++)this.data[this._length++]=e[r]}fill(e,i){for(let r=0;r<i;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,DB(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=rD(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(rD(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,r){this.length=n_e(this.data,e,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const r=this.data[e];this.data[e]=this.data[i],this.data[i]=r}sort(e){B_e(this.data,0,this.length,e)}iterableSort(e){return q_e(this.data,0,this.length,e)}some(e,i){for(let r=0;r<this.length;++r)if(e.call(i,this.data[r],r,this.data))return!0;return!1}find(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(e.call(i,r[n]))return r[n]}filterInPlace(e,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];e.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(e,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)e.call(i,r[n],n,r)}forEach(e,i){this.data.slice(0,this.length).forEach(e,i)}map(e,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=e.call(i,this.data[s],s,this.data);return r}reduce(e,i){let r=i;for(let s=0;s<this.length;++s)r=e(r,this.data[s],s,this.data);return r}has(e){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function DB(t){t.data.length>G_e*t.length&&(t.data.length=Math.floor(t.length*H_e))}function qut(t){return t}function W_e(t){return 1e3*t}function Gut(t){return t}function Hut(t){return .001*t}let J_e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Z_e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},aD=0;const t1={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},lD=["prepare","preRender","render","postRender","update","finish"],cD=[],og=new mU;let Y_e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Ste()}};function K_e(){wy!=null&&(cancelAnimationFrame(wy),wy=requestAnimationFrame(yU))}function Ste(){wy==null&&(aD=performance.now(),wy=requestAnimationFrame(yU))}const MM={frameTasks:og,willDispatch:!1,clearFrameTasks:X_e,dispatch:Ite,executeFrameTasks:Q_e,reschedule:K_e};function y_(t){const e=new Z_e(t);return cD.push(e),MM.willDispatch||(MM.willDispatch=!0,TM(Ite)),e}function Tw(t){const e=new J_e(t);return og.push(e),Ste(),new Y_e(e)}let wy=null;function X_e(t=!1){og.forAll(e=>{e.removed=!0}),t&&$te()}function yU(){const t=performance.now();wy=null,wy=og.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(yU):null,MM.executeFrameTasks(t)}function Q_e(t){const e=t-aD;aD=t;const i=1e3/60,r=Math.max(0,e-i);t1.time=t,t1.frameDuration=i-r;for(let s=0;s<lD.length;s++){const n=performance.now(),o=lD[s];og.forAll(a=>{a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(t1.elapsedFrameTime=performance.now()-t,t1.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,t1)))}),i1e[s].push(performance.now()-n)}$te(),r1e.push(performance.now()-t)}const dI=new mU;function $te(){og.forAll(t=>{t.removed&&dI.push(t)}),og.removeUnorderedMany(dI.data,dI.length),dI.clear()}function Ite(){for(;cD.length;){const t=cD.shift();t.isActive&&t.callback()}MM.willDispatch=!1}function kte(t=1,e){const i=Is(),r=()=>{Xr(e)?i.reject(jt()):t===0?i():(--t,TM(()=>r()))};return r(),i.promise}function e1e(t){return kte(1,t)}async function t1e(t){await e1e(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const i1e=lD.map(t=>new nS(t)),r1e=new nS("total");function Tte(t,e){for(const i of t.values())if(e(i))return!0;return!1}function CM(t,e){if(!e)return t;for(const i of e)i!=null&&t.add(i);return t}function FB(t,e){return e!=null&&t.add(e),t}function gU(t,e){const i=new Set;return CM(i,t),CM(i,e),i}function s1e(t,e){const i=new Set;for(const r of e)t.has(r)&&i.add(r);return i}function Yut(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const i of t)if(!e.has(i))return!1;return!0}function Kut(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function n1e(t,e){const i=new Set(t);for(const r of e)i.delete(r);return i}function o1e(t,e){return n1e(gU(t,e),s1e(t,e))}let a1e=0;function pT(){return++a1e}function Ete(t,e){const i=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const r=cs(e);return b_e(r,i)?r.get(i):e[i]}function Mte(t,e,i){if(t==null)return t;const r=Ete(e[i],t);return!r&&i<e.length-1?void 0:i===e.length-1?r:Mte(r,e,i+1)}function m2(t,e,i=0){return typeof e!="string"||e.includes(".")?Mte(t,lte(e),i):Ete(e,t)}function Ga(t,e){return m2(t,e)}function zB(t,e){return m2(e,t)!==void 0}const ia={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};let u0=!1;const PM=[];function Cte(t,e){let i=new h2(n),r=null,s=!1;function n(){if(!i||s)return;if(u0)return void Lte(n);const a=r;i.clear(),u0=!0,s=!0,r=Lu(i,t),s=!1,u0=!1,e(r,a),Ote()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Lu(i,t),s=!1,Et(o)}function Pte(t,e){let i=new h2(s),r=null;function s(){e(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=Lu(i,t),r):null}return o(),Et(n)}function Ate(t,e){let i=!1,r=!1;const s=!!e?.sync;let n=new h2(()=>{i||r||(r=!0,s?o():queueMicrotask(o))});function o(){r=!1,n&&!i&&(u0?Lte(o):(n.clear(),u0=!0,i=!0,Lu(n,t),i=!1,u0=!1,Ote()))}function a(){n&&(n.destroy(),n=null)}return i=!0,Lu(n,t),i=!1,Et(a)}function Lte(t){PM.includes(t)||PM.unshift(t)}function Ote(){for(;PM.length;)PM.pop()()}var Py;let vU=(Py=class{constructor(){this.uid=pT(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,r,s,n){return this.pool.acquire(0,e,i,r,s,n,cU)}static acquireTracked(e,i,r,s){return this.pool.acquire(1,e,i,r,null,null,s)}notify(e,i){this.type===0?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i,void 0,void 0)}acquire(e,i,r,s,n,o,a){this.uid=pT(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=pT(),this.removed=!0}},Py.pool=new _te(()=>new Py),Py);const fT=new Fn,lh=new Set;let AM;function LM(t){lh.delete(t),lh.add(t),Rte()}function Rte(){AM||(AM=y_(u1e))}function l1e(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function c1e(t){for(const e of lh.values())e.target===t&&(e.removed=!0)}function u1e(){let t=10;for(;AM&&t--;){AM=null;const e=d1e(),i=fT.acquire();for(const r of e){const s=r.uid;l1e(r),s===r.uid&&r.removed&&i.push(r)}for(const r of lh)r.removed&&(i.push(r),lh.delete(r));for(const r of i)vU.pool.release(r);fT.release(i),fT.release(e),uD.forEach(r=>r())}}function d1e(){const t=fT.acquire();t.length=lh.size;let e=0;for(const i of lh)t[e]=i,++e;return lh.clear(),t}const uD=new Set;function h1e(t){return uD.add(t),Et(()=>uD.delete(t))}function p1e(t,e,i){let r=cte(t,e,i,(s,n,o)=>{let a,l,c=Pte(()=>m2(s,n),(d,h)=>{s.__accessor__?.lifecycle===ia.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=vU.acquireUntracked(d,o,h,s,n),l=a.uid),LM(a))});return Et(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,LM(a)),a=null),r=c=null})});return r}function f1e(t,e,i){const r=cte(t,e,i,(s,n,o)=>{let a=!1;return Cte(()=>m2(s,n),(l,c)=>{s.__accessor__.lifecycle!==ia.DESTROYED?a||(a=!0,cU(c,l)||o.call(s,l,c,n,s),a=!1):r.remove()})});return r}function m1e(t,e,i,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==ia.DESTROYED?r?f1e(t,e,i):p1e(t,e,i):Et()}function y1e(t,e,i){let r,s,n=Pte(t,(o,a)=>{r&&r.uid!==s?n.remove():(r||(r=vU.acquireTracked(o,e,a,i),s=r.uid),LM(r))});return Et(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,LM(r)),r=null),n=null})}function g1e(t,e,i){let r=!1;return Cte(t,(s,n)=>{r||(r=!0,i(n,s)||e(s,n),r=!1)})}function v1e(t,e,i=!1,r=rte){return i?g1e(t,e,r):y1e(t,e,r)}function jB(t){return Tte(lh,e=>e.oldValue===t)}function de(t,e,i={}){return bU(t,e,i,Nte)}function Ts(t,e,i={}){return bU(t,e,i,Dte)}function bU(t,e,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(_i(s),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(s=v1e(t,n,i.sync,i.equals),i.initial){const o=t();n(o,o)}return s}function ks(t,e,i,r={}){let s=null,n=null,o=null;function a(){s&&n&&(n.remove(),r.onListenerRemove?.(s),s=null,n=null)}function l(d){r.once&&r.once&&_i(o),i(d)}const c=de(t,(d,h)=>{a(),LA(d)&&(s=d,n=ah(d,e,l),r.onListenerAdd?.(d))},{sync:r.sync,initial:!0});return o=Et(()=>{c.remove(),a()}),o}function g_(t,e){return b1e(t,Dte,e)}function b1e(t,e,i){if(Xr(i))return Promise.reject(jt());const r=t();if(e?.(r))return Promise.resolve(r);let s=null;function n(){s=_i(s)}return new Promise((o,a)=>{s=Tg([as(i,()=>{n(),a(jt())}),bU(t,l=>{n(),o(l)},{sync:!1,once:!0},e??Nte)])})}function Nte(t){return!0}function Dte(t){return!!t}function Xut(t,e,i={}){let r=!1;const s=de(t,(n,o)=>{r||e(n,o)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const lr={sync:!0},Fi={initial:!0},Vs={sync:!0,initial:!0};function u(t,e,i,r){var s=arguments.length,n=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(n=(s<3?o(n):s>3?o(e,i,n):o(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n}function Qut(t,e){return function(i,r){e(i,r,t)}}function edt(t,e,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?n(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function tdt(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),t.stack.push({value:e,dispose:r,async:i})}else i&&t.stack.push({async:!0});return e}var w1e=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var r=new Error(i);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function idt(t){function e(n){t.error=t.hasError?new w1e(n,t.error,"An error was suppressed during disposal."):n,t.hasError=!0}var i,r=0;function s(){for(;i=t.stack.pop();)try{if(!i.async&&r===1)return r=0,t.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(n).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function _1e(t,e){for(const i of t.values())if(e(i))return!0;return!1}function rdt(t,e){for(const i of t.values())if(!e(i))return!1;return!0}function sdt(t,e){for(const i of t.values())if(e(i))return i;return null}function Ch(t,e,i){const r=t.get(e);if(r!==void 0)return r;const s=i();return t.set(e,s),s}function ndt(t){const e=new Map;return i=>(e.has(i)||e.set(i,t(i)),e.get(i))}const _y=()=>X.getLogger("esri.core.accessorSupport.ensureTypes");function x1e(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(_y().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function S1e(t){return t==null?t:!!t}function y2(t){return t==null?t:t.toString()}function zn(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function OA(t){return t==null?t:Math.round(parseFloat(t))}function $1e(t){return null}function I1e(t,e){return i=>{let r=t(i);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Fte(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function OM(t,e){return e!=null&&t&&!(e instanceof t)}function zte(t){return t&&"isCollection"in t}function VB(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function k1e(t,e){if(!e?.constructor||!zte(e.constructor))return dD(t,e)?e:new t(e);const i=VB(t.prototype.itemType),r=VB(e.constructor.prototype.itemType);return i?r?i===r?e:i.prototype.isPrototypeOf(r.prototype)?new t(e):(dD(t,e),e):new t(e):e}function dD(t,e){return!!Fte(e)&&(_y().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+RA(t)+"'"),!0)}function ag(t,e){return e==null?e:zte(t)?k1e(t,e):OM(t,e)?dD(t,e)?e:new t(e):e}function RA(t){return t?.prototype?.declaredClass||"unknown"}const T1e=new WeakMap;function E1e(t){switch(t){case Number:return e=>zn(e);case Ke:return OA;case Boolean:return S1e;case String:return y2;case Date:return x1e;case v_:return $1e;default:return Ch(T1e,t,()=>ag.bind(null,t))}}function Mi(t,e){const i=E1e(t);return arguments.length===1?i:i(e)}function a$(t,e,i){return arguments.length===1?a$.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,i)):[t(e,i)])}function M1e(t,e){return arguments.length===1?a$(i=>Mi(t,i)):a$(i=>Mi(t,i),e)}function jte(t,e,i){return e!==0&&Array.isArray(i)?i.map(r=>jte(t,e-1,r)):t(i)}function RM(t,e,i){if(arguments.length===2)return n=>RM(t,e,n);if(!i)return i;i=jte(t,e,i);let r=e,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function C1e(t,e,i){return arguments.length===2?RM(r=>Mi(t,r),e):RM(r=>Mi(t,r),e,i)}function Vte(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function hD(t,e){if(arguments.length===2)return hD(t).call(null,e);const i=new Set,r=t.filter(a=>typeof a!="function"),s=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,d=c==="string"||c==="number";return d&&(i.has(a)||s.some(h=>c==="string"&&h===String||c==="number"&&h===Number))||c==="object"&&s.some(h=>!OM(h,a))?a:(d&&r.length?(n||(n=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),_y().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(h=>RA(h)).join(", ")),_y().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):_y().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Ou(t,e){if(arguments.length===2)return Ou(t).call(null,e);const i={},r=[],s=[];for(const l in t.typeMap){const c=t.typeMap[l];i[l]=Mi(c),r.push(RA(c)),s.push(l)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!OM(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,d=i[c];if(!d)return _y().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!OM(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Fte(l)){const h={};for(const f in l)f!==t.key&&(h[f]=l[f]);return d(h)}return d(l)}}let Ke=class{},v_=class{};const ldt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function P1e(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Ute(t){switch(t.type){case"native":return Mi(t.value);case"array":return a$(Ute(t.value));case"one-of":return A1e(t);default:return null}}function A1e(t){let e=null;return(i,r)=>fD(i,t)?i:(e==null&&(e=pD(t)),_y().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function pD(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ke:return"integer";case Date:return"date";case v_:return"null";default:return RA(t.value)}case"array":return`array of ${pD(t.value)}`;case"one-of":{const e=t.values.map(i=>pD(i));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function fD(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Ke:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case v_:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!fD(i,e.value));case"one-of":return e.values.some(i=>fD(t,i))}}function b_(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const r in e)e[r]=U(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function g2(t,e){const i=b_(t);let r=i[e];return r||(r=i[e]={}),r}function L1e(t,e){return uT(t,e,R1e)}const O1e=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function R1e(t){return O1e.test(t)?"replace":"merge"}function NM(t,e,i){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))NM(t,r,e[r]);else{if(e.includes(".")){const s=e.split("."),n=s.splice(-1,1)[0];return void NM(Ga(t,s),n,i)}const r=t.__accessor__;r!=null&&N1e(e,r),t[e]=i}}function N1e(t,e){if(H("esri-unknown-property-errors")&&!D1e(t,e))throw new R("set:unknown-property",F1e(t,e))}function D1e(t,e){return e.metadata[t]!=null}function F1e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function p(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,i),s=g2(e,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in t&&X.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),s.value=t.value=r.value)),t.readOnly!=null&&(s.readOnly=t.readOnly);const n=t.aliasOf;if(n){const l=typeof n=="string"?n:n.source,c=typeof n=="string"?null:n.overridable===!0;let d;s.dependsOn=[l],s.get=function(){let h=Ga(this,l);if(typeof h=="function"){d||(d=l.split(".").slice(0,-1).join("."));const f=Ga(this,d);f&&(h=h.bind(f))}return h},s.readOnly||(s.set=c?function(h){this._override(i,h)}:function(h){NM(this,l,h)})}const o=t.type,a=t.types;if(!s.cast){let l;o?l=z1e(o):a&&(l=Array.isArray(a)?a$(Ou(a[0])):Ou(a)),t.cast=j1e(t.cast,l)}L1e(s,t),t.range&&(s.cast=I1e(s.cast,t.range))}}function wU(t,e,i){const r=g2(t,i);r.json||(r.json={});let s=r.json;return e!==void 0&&(s.origins||(s.origins={}),s.origins[e]||(s.origins[e]={}),s=s.origins[e]),s}function z1e(t){let e=0,i=t;if(P1e(t))return Ute(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const r=i;if(Vte(r))return e===0?hD(r):RM(hD(r),e);if(e===1)return M1e(r);if(e>1)return C1e(r,e);const s=t;return s.from?s.from:Mi(s)}function j1e(t,e){if(t||e)return t?e?(i,r)=>e(t(i,r),r):t:e}const Bte=Symbol("Accessor-beforeDestroy");function V1e(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(e[r]){const s=e[r];i[r].forEach(n=>{e[n]=s}),delete e[r]}}}let pa=class extends bte{constructor(e,i,r){super(e,i,r)}};pa.prototype.type="warning";function qte(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function U1e(t,e){return _U(t,"any",e?.origin)}function DM(t,e){return _U(t,"read",e?.origin)}function Gte(t,e){return _U(t,"write",e?.origin)}function _U(t,e,i){let r=t?.json;if(r?.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(e==="any"||e in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(e==="any"||e in s)&&(r=s)}return r}const mD=()=>X.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function UB(t,e,i){t&&(!i&&!e.read||e.read?.reader||e.read?.enabled===!1||G1e(t)&&Tr("read.reader",w_(t),e))}function w_(t){const e=t.ndimArray??0;if(e>1)return q1e(t);if(e===1)return BB(t);if("type"in t&&Wte(t.type)){const i=t.type.prototype?.itemType?.Type,r=BB(typeof i=="function"?{type:i}:{types:i});return(s,n,o)=>{const a=r(s,n,o);return a&&new t.type(a)}}return xU(t)}function xU(t){return"type"in t?B1e(t.type):H1e(t.types)}function B1e(t){return t.prototype.read?(e,i,r)=>{if(e==null)return e;const s=typeof e;if(s!=="object")return void mD().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${s}'`);const n=new t;return n.read(e,r),n}:t.fromJSON}function Hte(t,e,i,r){return r!==0&&Array.isArray(e)?e.map(s=>Hte(t,s,i,r-1)):t(e,void 0,i)}function q1e(t){const e=xU(t),i=Hte.bind(null,e),r=t.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let a=r,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)s=[s];return s}}function BB(t){const e=xU(t);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=e(i,void 0,s);return n!==void 0?[n]:void 0}}function Wte(t){if(!qte(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?SU(e.Type):Jte(e.Type))}function G1e(t){return"types"in t?Jte(t.types):SU(t.type)}function SU(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Wte(t))}function Jte(t){for(const e in t.typeMap)if(!SU(t.typeMap[e]))return!1;return!0}function H1e(t){let e=null;const i=t.errorContext??"type",r=t.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void mD().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=J1e(t));const l=t.key;if(typeof l!="string")return;const c=s[W1e(l,e,o)],d=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!d){const f=`Type '${c||"unknown"}' is not supported`;return o?.messages&&s&&o.messages.push(new pa(`${i}:unsupported`,f,{definition:s,context:o})),void mD().error(f)}const h=new d;return h.read(s,o),r?r(h):h}}function W1e(t,e,i){const r=Object.values(e)[0],s=b_(r.prototype)[t],n=DM(s,i),o=n?.read?.source;return o&&typeof o=="string"?o:t}function J1e(t){const e={};for(const i in t.typeMap){const r=t.typeMap[i],s=b_(r.prototype);if(typeof t.key=="function")continue;const n=s[t.key];if(!n)continue;if(n.json?.type&&Array.isArray(n.json.type)&&n.json.type.length===1&&typeof n.json.type[0]=="string"){e[n.json.type[0]]=r;continue}const o=n.json?.write;if(!o?.writer){e[i]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,c={};o.writer(i,c,l),c[l]&&(e[c[l]]=r)}return e}function Z1e(t){if(t.json||(t.json={}),GB(t.json),HB(t.json),qB(t.json),t.json.origins)for(const e in t.json.origins)GB(t.json.origins[e]),HB(t.json.origins[e]),qB(t.json.origins[e]);return!0}function qB(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function GB(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function HB(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function WB(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=t?.ndimArray??0;t&&(i===1||"type"in t&&qte(t.type))?e.write.writer=X1e:i>1?e.write.writer=Q1e(i):e.types?Array.isArray(e.types)?e.write.writer=K1e(e.types[0]):e.write.writer=Y1e(e.types):e.write.writer=l$}function Y1e(t){return(e,i,r,s)=>e?Zte(e,t,s)?l$(e,i,r,s):void 0:l$(e,i,r,s)}function Zte(t,e,i){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(i?.messages){const r=e.errorContext??"type",s=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new R(`${r}:unsupported`,s,{definition:t,context:i})),X.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function K1e(t){return(e,i,r,s)=>!e||!Array.isArray(e)?l$(e,i,r,s):l$(e.filter(n=>Zte(n,t,s)),i,r,s)}function l$(t,e,i,r){Tr(i,FM(t,r),e)}function FM(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?zM(t):t}function zM(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function X1e(t,e,i,r){let s;t===null?s=null:t&&typeof t.map=="function"?(s=t.map(n=>FM(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[FM(t,r)],Tr(i,s,e)}function Yte(t,e,i){return i!==0&&Array.isArray(t)?t.map(r=>Yte(r,e,i-1)):FM(t,e)}function Q1e(t){return(e,i,r,s)=>{let n;if(e===null)n=null;else{n=Yte(e,s,t);let o=t,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Tr(r,n,i)}}function exe(t){const e=txe(t);if(t.json.origins)for(const i in t.json.origins){const r=t.json.origins[i],s=r.types?ixe(r):e;UB(s,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),WB(s,r)}UB(e,t.json,!0),WB(e,t.json)}function txe(t){return t.json.types?yD(t.json):t.type?Kte(t):yD(t)}function ixe(t){return t.type?Kte(t):yD(t)}function Kte(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!Vte(i);)i=i[0],e++;return{type:i,ndimArray:e}}function yD(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function rxe(t){Z1e(t)&&(V1e(t),exe(t))}const FL=new Set,zL=new Set;function M(t){return e=>{t??(t="esri.core.Accessor"),e.prototype.declaredClass=t,nxe(e);const i=[],r=[];let s=e.prototype;for(;s;)s.hasOwnProperty("initialize")&&!FL.has(s.initialize)&&(FL.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!zL.has(s.destroy)&&(zL.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);FL.clear(),zL.clear();const n=class extends e{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const c=this[Bte];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=ia.DESTROYING,l=!0,c.call(this);for(let d=0;d<r.length;d++)r[d].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=b_(e.prototype),n.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function sxe(t,e){return e.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r===void 0)return;i.mutable&&Ue(r);const s=i.store;return s.has(t)?s.get(t):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(t);if(r!==void 0)return r.getComputed(i)}}function nxe(t){const e=t.prototype,i=b_(e),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];rxe(n),r[s]={enumerable:!0,configurable:!0,get:sxe(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?JB("read-only",s):a.lifecycle===ia.CONSTRUCTED&&n.constructOnly?JB("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const JB=(t,e)=>{X.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)},oxe="modulepreload",axe=function(t){return"/hemswx-map-editor/"+t},ZB={},K=function(e,i,r){let s=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=Promise.allSettled(i.map(l=>{if(l=axe(l),l in ZB)return;ZB[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":oxe,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})},YB=new WeakMap;function lxe(t,e,i=!1){const r=` DEPRECATED - ${e}`;if(!i)return void t.warn(r);let s=YB.get(t);s||(s=new Set,YB.set(t,s)),s.has(e)||(s.add(e),t.warn(r))}const jM="https://www.esriurl.com/";function cxe(t,e,i,r={}){H("esri-deprecation-warnings")&&bf(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${jM}${i}/`,`Esri's move to web components: ${jM}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function uxe(t,e,i,r={}){H("esri-deprecation-warnings")&&bf(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${jM}${i}/`,`Esri's move to web components: ${jM}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function udt(t,e,i={}){H("esri-deprecation-warnings")&&bf(t,`Module: ${e}`,i)}function Xte(t,e,i={}){if(H("esri-deprecation-warnings")){const{moduleName:r}=i;bf(t,`Function: ${(r?r+"::":"")+e+"()"}`,i)}}function gD(t,e,i={}){if(H("esri-deprecation-warnings")){const{moduleName:r}=i;bf(t,`Property: ${(r?r+"::":"")+e}`,i)}}function dxe(t,e,i={}){H("esri-deprecation-warnings")&&bf(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...i})}function bf(t,e,i={}){if(H("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),s&&(a+=`
	 Version: ${s}`),n)if(Array.isArray(n)){a+=`
	 See for more details:`;for(const l of n)a+=`
		${l}`}else a+=`
	 See ${n} for more details.`;lxe(t,a,o)}}function ddt(t){const e=[];return function*(){yield*e;let i,r=e.length;for(;!(i=t.next()).done;)for(e.push(i.value),yield i.value;++r<e.length;)yield e[r]}}function hxe(t,e){for(const i of t)if(i!=null&&e(i))return i}function VM(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let __=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(VM(e)){const r=this._getOrCreateGroup(i);for(const s of e)XB(s)&&r.push(s)}else XB(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(hI(e))}remove(e){if(typeof e!="string"&&VM(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(KB(this._getGroup(e)),this._groups.delete(hI(e)),this):this}removeAll(){return this._groups.forEach(KB),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(hI(e),i),i}_getGroup(e){return this._groups.get(hI(e))}};function hI(t){return t||"_default_"}function KB(t){for(const e of t)e instanceof __?e.removeAll():e.remove()}function XB(t){return t!=null&&(!!t.remove||t instanceof __)}let QB=class extends fte{constructor(e,i){super(),this.propertyName=e,this.metadata=i,this.trackingTarget=new AA(this),this.flags=0,this.flags=Ri.Dirty|(i.nonNullable?Ri.NonNullable:0)|(i.hasOwnProperty("value")?Ri.HasDefaultValue:0)|(i.get===void 0?Ri.DepTrackingInitialized:0)|(i.dependsOn===void 0?Ri.AutoTracked:0)}destroy(){this.flags&Ri.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&Ue(this);const i=e.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&Ri.Computing||~s&Ri.Dirty&&i.has(r))return n;this.flags|=Ri.Computing;const o=e.host;let a;s&Ri.AutoTracked?a=Lu(this.trackingTarget,this.metadata.get,o):(pte(o,this),a=this.metadata.get.call(o)),this.flags|=Ri.DepTrackingInitialized,i.set(r,a,1);const l=i.get(r);return l===n?this.flags&=-2:__e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&Ri.Overridden&&(this.flags|=Ri.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const r of i)r.onCommitted()}}};const vD=8;function _o(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function lg(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function pxe(t){return lg(t)}let fxe=class Qte{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new Qte;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,U(r))}),i}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,i){return this.has(e)}isBelowOrigin(e,i){return!this.has(e)}forEach(e){this._values.forEach(e)}};function Xg(t,e,i){return t!==void 0}function eq(t,e,i,r){return t!==void 0&&(!(i==null&&t.flags&Ri.NonNullable)||(r.lifecycle,!1))}let mxe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=ia.INITIALIZING,this.store=new fxe,this.mutable=!0,this._origin=7;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new QB(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=ia.CONSTRUCTING}constructed(){this.lifecycle=ia.CONSTRUCTED}destroy(){this.lifecycle=ia.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==ia.INITIALIZING}get(e){const i=this.propertiesByName.get(e);if(!Xg(i))return;if(i.metadata.get)return i.getComputed(this);this.mutable&&Ue(i);const r=this.store;return r.has(e)?r.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Ri.HasDefaultValue)return"defaults"}return lg(i)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const i=this.propertiesByName.get(e);if(Xg(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const r=this.propertiesByName.get(e);Xg(r)&&this._internalSet(r,i)}getDependsInfo(e,i,r){const s=this.propertiesByName.get(i);if(!Xg(s))return"";const n=new AA,o=Lu(n,()=>s.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof QB&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,i,r){const s=this.propertiesByName.get(e);if(Xg(s))return this._setAtOrigin(s,i,r)}isOverridden(e){const i=this.propertiesByName.get(e);return i!==void 0&&!!(i.flags&Ri.Overridden)}clearOrigin(e,i){const r=this.store,s=this.propertiesByName.get(e);if(!Xg(s))return;const n=r.isAtOrigin(e,i)&&!(s.flags&Ri.Overridden);r.delete(e,i),n&&s.notifyChange()}clearOverride(e){const i=this.propertiesByName.get(e);i&&i.flags&Ri.Overridden&&(i.flags&=-3,i.notifyChange())}override(e,i){const r=this.propertiesByName.get(e);if(!eq(r,e,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(jL.release(n),!o)return;i=a}r.flags|=Ri.Overridden,this._internalSet(r,i)}set(e,i){const r=this.propertiesByName.get(e);if(!eq(r,e,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:l}=o;if(jL.release(o),!a)return;i=l}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(e){this._origin=_o(e)}getDefaultOrigin(){return lg(this._origin)}notifyChange(e){const i=this.propertiesByName.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.propertiesByName.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.propertiesByName.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const r=this.lifecycle!==ia.INITIALIZING?this._origin:0;this._setAtOrigin(e,i,r)}_setAtOrigin(e,i,r){const s=this.store,n=e.propertyName;if(s.isAtOrigin(n,r)&&cU(i,s.get(n))&&~e.flags&Ri.Overridden)return;const o=s.isBelowOrigin(n,r)||s.isAtOrigin(n,r);o&&e.invalidate(),s.set(n,i,r),o&&e.commit(),hte(this.host,e)}_cast(e,i){const r=jL.acquire();return r.valid=!0,r.value=i,e&&(r.value=e.call(this.host,i,r)),r}},yxe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const jL=new Nf(()=>new yxe);let gxe;function vxe(){return gxe}var tq,iq;function bxe(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const cc=Symbol("Accessor-Handles"),VL=Symbol("Accessor-Initialized");var yf;let _e=(yf=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}b_(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const d=this.inherited;let h;this.inherited=function(...f){if(n.prototype[a])return n.prototype[a].apply(this,f)};try{h=l.apply(this,c)}catch(f){throw this.inherited=d,f}return this.inherited=d,h}:e[a]}for(const a in i){const l=bxe(i[a]);p(l)(o.prototype,a)}return M(r)(o)}static freeze(e){return e instanceof yf?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof yf?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[tq]=null,this[iq]=!1,this.constructor===yf)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new mxe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),e.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,i=e.ctorArgs;e.initialize(),i&&(this.set(i),e.ctorArgs=null),e.constructed(),this.initialize(),this[VL]=!0}initialize(){}[Bte](){this[cc]=bi(this[cc])}destroy(){this.destroyed||(c1e(this),this.__accessor__.destroy(),vxe()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[VL]}get destroyed(){return this.__accessor__?.lifecycle===ia.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===ia.DESTROYING||!1}commitProperty(e){Ga(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return NM(this,e,i),this}watch(e,i,r){return Xte(X.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),m1e(this,e,i,r)}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const s of r)s.remove();return}(this[cc]??(this[cc]=new __)).add(e,i)}removeHandles(e){this[cc]?.remove(e)}removeAllHandles(){this[cc]?.removeAll()}removeHandlesReference(e){this[cc]?.removeReference(e)}hasHandles(e){return this[cc]?.has(e)===!0}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}},tq=cc,iq=VL,yf);const wxe=Symbol("ClonableMixin"),Le=t=>{var s;var e;const i=t;let r=(s=class extends i{constructor(){super(...arguments),this[e]=!0}clone(n){const o=cs(this);Rf(o,"unable to clone instance of non-accessor class");const a=o.metadata,l=o.store,c={},d=new Map;for(const f in a){const m=a[f],y=l?.originOf(f),v=m.clonable;if(m.readOnly||v===!1||y!==7&&y!==0&&y!==5&&y!==4)continue;const b=this[f];let w=null;if(typeof v=="function")w=v(b,n);else if(v==="reference")w=b;else if(w=nD(b,n),b!=null&&w==null)continue;y===0?d.set(f,w):c[f]=w}const h=new(Object.getPrototypeOf(this)).constructor(c);if(d.size){const f=cs(h)?.store;if(f)for(const[m,y]of d)f.set(m,y,0)}return h}},e=wxe,s);return r=u([M("esri.core.Clonable")],r),r},$U=Le(_e);let dm=class extends $U{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],dm.prototype,"row",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],dm.prototype,"column",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],dm.prototype,"rows",void 0),u([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],dm.prototype,"columns",void 0),dm=u([M("esri.CameraLayout")],dm);const eie=dm,rq=new Float32Array(1);function gdt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function bn(t,e,i){return Math.min(Math.max(t,e),i)}function vdt(t){return!(t&t-1)}function _xe(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function U1(t,e,i){return t+(e-t)*i}function bdt(t,e,i,r,s){return U1(r,s,(t-e)/(i-e))}function x_(t){return t*Math.PI/180}function tie(t){return 180*t/Math.PI}function wdt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function _dt(t){return Math.acos(bn(t,-1,1))}function xxe(t){return Math.asin(bn(t,-1,1))}function la(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}function iie(t,e,i=1e-6){return!la(t,e,i)&&t>e}function bD(t,e,i=1e-6){return!la(t,e,i)&&t<e}function Sxe(t,e,i=1e-6){return la(t,e,i)||t>e}const UM=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function wD(t){return UM.setFloat64(0,t),UM.getBigInt64(0)}function $xe(t){return UM.setBigInt64(0,t),UM.getFloat64(0)}const mT=1000000n,Ixe=rie(1);function rie(t){const e=wD(t=Math.abs(t)),i=$xe(e<=mT?mT:e-mT);return Math.abs(t-i)}function xdt(t,e,i=Ixe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(i!=null&&rie(Math.min(Math.abs(t),Math.abs(e)))<i)return Math.abs(t-e)<=i;const r=wD(t),s=wD(e);return r<0!=s<0?!1:!((r<s?s-r:r-s)>mT)}function sie(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),s=Math.abs(t),n=Math.abs(e);if(t===0||e===0||s<1e-12&&n<1e-12){if(r>.01*i)return!1}else if(r/(s+n)>i)return!1;return!0}function Sdt(t){return nie(Math.max(-sq,Math.min(t,sq)))}function nie(t){return rq[0]=t,rq[0]}function $dt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(la(e,1)&&la(i,1)&&la(r,1))}function Idt(t,e){return(t%e+e)%e}const sq=nie(34028234663852886e22);function kdt(t,e,i){if(i===void 0||+i==0)return Math[t](e);if(e=+e,i=+i,isNaN(e)||typeof i!="number"||i%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}let NA=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}normalize(e,i=0,r=!1){return nq(this.range,this.min,this.max,e,i,r)}clamp(e,i=0){return bn(e-i,this.min,this.max)+i}monotonic(e,i,r){return e<i?i:i+_D(this.range,e-i,r)}minimalMonotonic(e,i,r){return nq(this.range,e,e+this.range,i,r)}center(e,i,r){return i=this.monotonic(e,i,r),this.normalize((e+i)/2,r)}diff(e,i,r){return this.monotonic(e,i,r)-e}shortestSignedDiff(e,i){e=this.normalize(e);const r=(i=this.normalize(i))-e,s=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(r)<Math.abs(s)?r:s}contains(e,i,r){return i=this.minimalMonotonic(e,i),(r=this.minimalMonotonic(e,r))>e&&r<i}};function nq(t,e,i,r,s=0,n=!1){return(r-=s)<e?r+=_D(t,e-r):r>i&&(r-=_D(t,r-i)),n&&r===i&&(r=e),r+s}function _D(t,e,i=0){return Math.ceil((e-i)/t)*t+i}const Edt=new NA(0,2*Math.PI),Mdt=new NA(-Math.PI,Math.PI),kxe=new NA(0,360);let Txe=class oie{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new oie;return this._values.forEach((r,s)=>{e&&e.has(s)||i.set(s,U(r.value),r.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const r=this._values.get(e);return i==null||r?.origin===i?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(r=>this._values.get(r)?.origin===e)}set(e,i,r){if((r=this._normalizeOrigin(r))===0){const s=this._values.get(e);if(s?.origin!=null&&s.origin>r)return}this._values.set(e,new Exe(i,r))}delete(e,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(e)?.origin!==i||this._values.delete(e)}has(e,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(e)?.origin===i:this._values.has(e)}isAtOrigin(e,i){return i=this._normalizeOrigin(i),this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return i=this._normalizeOrigin(i),!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(({value:i},r)=>e(i,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},Exe=class{constructor(e,i){this.value=e,this.origin=i}};function aie(t,e,i){e.keys().forEach(s=>{i.set(s,e.get(s),0)});const r=t.metadata;Object.keys(r).forEach(s=>{t.internalGet(s)&&i.set(s,t.internalGet(s),0)})}function Mxe(t,e,i){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&zB(r,i))return!0}else for(const s of r)if(s===e||s.includes(".")&&s.startsWith(e)&&zB(s,i))return!0;return!1}function Cxe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Pxe(t,e,i,r,s){let n=DM(e[i],s);Cxe(n)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))n=DM(e[o],s),Mxe(n,i,r)&&(t[o]=!0)}function Axe(t,e,i,r){const s=i.metadata,n=U1e(s[e],r),o=n?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&i.set(e,a)}const lie={origin:"service"};function cie(t,e,i=lie){if(!e||typeof e!="object")return;const r=cs(t),s=r.metadata,n={};for(const o of Object.getOwnPropertyNames(e))Pxe(n,s,o,e,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=DM(s[o],i).read,l=a?.source;let c;c=l&&typeof l=="string"?m2(e,l):e[o],a?.reader&&(c=a.reader.call(t,c,e,i)),c!==void 0&&r.set(o,c)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Axe(t,o,r,i)}r.setDefaultOrigin("user")}function uie(t,e,i,r=lie){const s={...r,messages:[]};i(s),s.messages?.forEach(n=>{n.type!=="warning"||t.loaded?r?.messages&&r.messages.push(n):t.loadWarnings.push(n)})}function Lxe(t,e,i,r,s){const n={};return e.write?.writer?.call(t,r,n,i,s),n}function die(t,e,i,r,s,n){if(!r?.write)return!1;const o=Ga(t,i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,i,n??void 0);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&n?.layerContainerType&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new R("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&n?.messages?n.messages.push(a):a&&!n&&X.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(i)===0)&&Oxe(t,i,n,r,o)||!s.ignoreOrigin&&n?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<_o(n.origin))}function Oxe(t,e,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(t,e,i??void 0);return d2(o,s)}return!1}return n===s}function hie(t,e,i,r){const s=cs(t),n=s.metadata,o=Gte(n[e],r);return!!o&&die(t,s,e,o,i,r)}function pie(t,e,i){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return uT(e,t.toJSON(i));const r=cs(t),s=r.metadata;for(const n in s){const o=Gte(s[n],i);if(!die(t,r,n,o,void 0,i))continue;const a=Ga(t,n),l=Lxe(t,o,o.write&&typeof o.write.target=="string"?o.write.target:n,a,i);Object.keys(l).length>0&&(e=uT(e,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>uT(e,l,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:t,propName:n,oldOrigin:pxe(r.store.originOf(n)),newOrigin:i.origin}))}return e}const Ph=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const s=cs(this),n=s.store,o=new Txe;s.store=o,aie(s,n,o)}read(r,s){cie(this,r,s)}write(r,s){return pie(this,r??{},s)}toJSON(r){return this.write({},r)}static fromJSON(r,s){return Rxe.call(this,r,s)}};return i=u([M("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function Rxe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}const Y=Ph(_e),Nxe=Object.prototype.toString;function Dxe(t){const e="__accessorMetadata__"in t?Mi(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Fxe.apply(this,i)}}function Fxe(t,e,i,r){g2(t,e).cast=r}function zxe(t){return(e,i)=>{g2(e,t).cast=e[i]}}function Mt(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&Nxe.call(t[0])==="[object Function]"?Dxe(t[0]):t.length===1&&typeof t[0]=="string"?zxe(t[0]):void 0}function Q(t,e,i){let r,s;return e===void 0||Array.isArray(e)?(s=t,i=e,r=[void 0]):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;r.forEach(l=>{const c=wU(n,l,s);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],i&&(c.read.source=(c.read.source||[]).concat(i))})}}function oe(t,e,i){let r,s;return e===void 0?(s=t,r=[void 0]):typeof e!="string"?(s=t,r=[void 0],i=e):(s=e,r=Array.isArray(t)?t:[t]),(n,o)=>{const a=n.constructor.prototype;for(const l of r){const c=wU(n,l,s);c.write&&typeof c.write=="object"||(c.write={}),i&&(c.write.target=i),c.write.writer=a[o]}}}let We=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=jxe(e),this.apiValues=oq(this._apiToJSON),this.jsonValues=oq(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Tr(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function jxe(t){const e={};for(const i in t)e[t[i]]=i;return e}function oq(t){const e=[];for(const i in t)e.push(i);return e.sort(),e}function Qr(){return function(t,e){return new We(t,{ignoreUnknown:!0,...e})}}let IU=class{constructor(e,i,r,s,n,o){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const dr=new IU(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Su=new IU(3396190,1/169.8944472236118,23e4,6e4,.111),wf=new IU(1737400,0,0,0,0);function c$(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const Vxe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Uxe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function xD(t){const e=t?.match(Vxe);if(!e)return null;const[,i,r,s]=e;if(!i)return null;let n=null,o=null,a=null;const{devext:l,qaext:c,www:d}=Uxe;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=d);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=d);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function kU(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function BM(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):i.test(t)?t=t.replace(i,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function fie(t){const e=atob(t),i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i.buffer}function Bxe(t){const e=new Uint8Array(t);let i="";for(let r=0;r<e.length;r++)i+=String.fromCharCode(e[r]);return btoa(i)}const qxe=()=>X.getLogger("esri.core.urlUtils"),S_=lt.request,aq="esri/config: esriConfig.request.proxyUrl is not set.",mie=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,yie=/^\s*http:/i,Gxe=/^\s*https:/i,Hxe=/^\s*file:/i,gie=/:\d+$/,Wxe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Jxe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Zxe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let $s=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Jxe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Zxe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const pI={},Yxe=new $s(lt.applicationUrl);let dn=Yxe;const Kxe=Xxe();let TU=Kxe;const EU=()=>dn,vie=()=>TU;function Xxe(){const t=dn.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${dn.scheme}://${dn.host}${dn.port!=null?`:${dn.port}`:""}`}${e}`}function $t(t){if(!t)return null;const e={path:null,query:null},i=new $s(t),r=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.slice(0,r),e.query=ny(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.slice(0,e.path.length-(i.fragment.length+1)))),e}function ny(t){const e=t.split("&"),i={};for(const r of e){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function Ka(t,e){return t?Object.keys(t).map(i=>{const r=t[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=e?.[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>c$(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):c$(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function bie(t=!1){let e,i=S_.proxyUrl;if(typeof t=="string"){e=Sie(t);const r=v2(t);r&&(i=r.proxyUrl)}else e=!!t;if(!i)throw qxe().warn(aq),new R("urlUtils:proxy-not-set",aq);return e&&$D()&&(i=LU(i)),$t(i)}function Qxe(t,e=!1){const i=v2(t);let r,s;if(i){const n=MU(i.proxyUrl);r=n.path,s=n.query?ny(n.query):null}else if(e){const n=bie(t);r=n.path,s=n.query}if(r){const n=$t(t);t=r+"?"+n.path;const o=Ka({...s,...n.query});o&&(t=`${t}?${o}`)}return t}const i1={path:"",query:""};function MU(t){const e=t.indexOf("?");return e!==-1?(i1.path=t.slice(0,e),i1.query=t.slice(e+1)):(i1.path=t,i1.query=null),i1}function wie(t){return t=(t=GM(t=$ie(t=MU(t).path),!0)).toLowerCase()}function eSe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:wie(t.urlPrefix)},i=S_.proxyRules,r=e.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;s=n;break}o.startsWith(r)&&(s=n+1)}return i.splice(s,0,e),s}function v2(t){const e=S_.proxyRules,i=wie(t);for(let r=0;r<e.length;r++)if(i.startsWith(e[r].urlPrefix))return e[r]}function tSe(t,e){if(!t||!e)return!1;t=qM(t),e=qM(e);const i=xD(t),r=xD(e);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&_s(t,e,!0)}function _ie(t,e){return t=qM(t),e=qM(e),GM(t)===GM(e)}function qM(t){const e=(t=Gn(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function SD(t,e=S_.interceptors){const i=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function _s(t,e,i=!1){if(!t||!e)return!1;const r=kD(t),s=kD(e);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function CU(t){if(typeof t=="string"){if(!gn(t))return!0;t=kD(t)}if(_s(t,dn))return!0;const e=S_.trustedServers||[];for(let i=0;i<e.length;i++){const r=iSe(e[i]);for(let s=0;s<r.length;s++)if(_s(t,r[s]))return!0}return!1}function iSe(t){return pI[t]||(AU(t)||ma(t)?pI[t]=[new $s(Us(t))]:pI[t]=[new $s(`http://${t}`),new $s(`https://${t}`)]),pI[t]}function Us(t,e=TU,i){return ma(t)?i?.preserveProtocolRelative?t:dn.scheme==="http"&&dn.authority===ca(t).slice(2)?`http:${t}`:`https:${t}`:AU(t)?t:fa(t.startsWith("/")?cSe(e):e,t)}function PU(t,e=TU,i){if(t==null||!gn(t))return t;const r=Gn(t),s=r.toLowerCase(),n=Gn(e).toLowerCase().replace(/\/+$/,""),o=i?Gn(i).toLowerCase().replace(/\/+$/,""):null;if(o&&!n.startsWith(o))return t;const a=(h,f,m)=>(m=h.indexOf(f,m))===-1?h.length:m;let l=a(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(c=l+1,l!==s.length);)l=a(s,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const d=n.slice(c-1).replaceAll(/[^/]+/g,"").length;if(d>0)for(let h=0;h<d;h++)t=`../${t}`;else t=`./${t}`;return t}function Gn(t){return t=hSe(t=dSe(t=uSe(t=Us(t=t.trim()))))}function fa(...t){const e=t.filter(Ei);if(!e?.length)return;const i=[];if(gn(e[0])){const s=e[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),aSe(e[0])&&(i[0]+="/"),e[0]=s.slice(n+2))}else e[0].startsWith("/")&&i.push("");const r=e.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function ca(t,e=!1){if(t==null||$_(t)||Ah(t))return null;let i=t.indexOf("://");if(i===-1&&ma(t))i=2;else{if(i===-1)return null;i+=3}const r=t.indexOf("/",i);return r!==-1&&(t=t.slice(0,r)),e&&(t=GM(t,!0)),t}function gn(t){return ma(t)||AU(t)}function $_(t){return t!=null&&t.startsWith("blob:")}function Ah(t){return t!=null&&t.startsWith("data:")}function rSe(t){const e=cg(t);return e?.isBase64?fie(e.data):null}function UL(t){return Bxe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const sSe=/^data:(.*?)(;base64)?,(.*)$/;function cg(t){const e=t.match(sSe);if(!e)return null;const[,i,r,s]=e;return{mediaType:i,isBase64:!!r,data:s}}function xie(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function nSe(t){return(await fetch(t)).blob()}function Odt(t){const e=rSe(t);if(!e)return null;const i=cg(t);return new Blob([e],{type:i.mediaType})}function ma(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function AU(t){return t!=null&&mie.test(t)}function Sie(t){return t!=null&&Gxe.test(t)||dn.scheme==="https"&&ma(t)}function oSe(t){return t!=null&&yie.test(t)||dn.scheme==="http"&&ma(t)}function aSe(t){return t!=null&&Hxe.test(t)}function LU(t){return ma(t)?`https:${t}`:t.replace(yie,"https:")}function lSe(){return dn.scheme==="http"}function $D(){return dn.scheme==="https"}function GM(t,e=!1){return ma(t)?t.slice(2):(t=t.replace(mie,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function cSe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function DA(t){let e=0;if(gn(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function Rdt(t,e){if(!t)return"";const i=$t(t).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!e?.length)return r;const s=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(s,"")}function $ie(t){return t.endsWith("/")?t:`${t}/`}function FA(t){return t.replace(/\/+$/,"")}function uSe(t){if(/^https?:\/\//i.test(t)){const e=MU(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function dSe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function hSe(t){const e=S_.httpsDomains;if(!oSe(t))return t;const i=t.indexOf("/",7);let r;if(r=i===-1?t:t.slice(0,i),r=r.toLowerCase().slice(7),gie.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return lSe()&&r===dn.authority&&!Wxe.test(t)||($D()&&r===dn.authority||e&&e.some(s=>r===s||r.endsWith(`.${s}`))||$D()&&!v2(t))&&(t=LU(t)),t}function ID(t,e,i){if(!(e&&i&&t&&gn(t)))return t;const r=t.indexOf("//"),s=t.indexOf("/",r+2),n=t.indexOf(":",r+2),o=Math.min(s<0?t.length:s,n<0?t.length:n);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${i}${t.slice(o)}`}function Iie(t,e){const i=new URL(t);return i.host=e,i.port&&!gie.test(e)&&(i.port=""),i.toString()}function pSe(t){return new URL(t).host}function kD(t){return typeof t=="string"?new $s(Us(t)):(t.scheme||(t.scheme=dn.scheme),t)}function Ndt(t){return fSe.test(t)}function kie(t,e){const i=$t(t),r=Object.keys(i.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function Tie(t,e,i){const r=$t(t),s=r.query||{};return s[e]=String(i),`${r.path}?${Ka(s)}`}function Io(t,e){if(!e)return t;const i=$t(t),r=i.query||{};for(const[n,o]of Object.entries(e))o!=null&&(r[n]=o);const s=Ka(r);return s?`${i.path}?${s}`:i.path}function Eie(t){if(t==null)return null;const e=t.match(Mie);return e?e[2]:null}function lq(t){if(t==null)return null;const e=t.match(Mie);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function Ddt(t){return typeof t=="string"?cg(t)??{data:t}:new Promise((e,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(cg(r.result)),r.onerror=s=>i(s)})}const Mie=/([^.]*)\.([^/]*)$/,fSe=/(^data:image\/svg|\.svg$)/i,Cie="20251114",Pie="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const Aie="4.34";let ft,OU=Aie;function mSe(t){ft=t}function ySe(t){const e=ft?.findCredential(t);return e?.token?Tie(t,"token",e.token):t}OU="4.34.8",H("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),H("host-webworker");function gh(t,e){const i=e?.url?.path;if(t&&i&&(t=Us(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=PU(t,e.portalItem.itemUrl);r!=null&&r.startsWith(gSe)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=TD(t,e?.portal))&&jA.test(t)?NU(t):t}function ug(t,e,i=0){if((t=t&&jA.test(t)?Rie(t):t)==null)return t;!gn(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Us(t);if(e){const s=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(s){const n=TD(s,e.portal),o=TD(r,e.portal);r=PU(o,n,n),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=RU(r,e?.portal),gn(r)&&(r=Gn(r)),e?.resources&&e?.portalItem&&!gn(r)&&!Ah(r)&&i===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function zA(t,e,i){return gh(t,i)}function dg(t,e,i,r){const s=ug(t,r);s!==void 0&&(e[i]=s)}const jA=/\/items\/([^/]+)\/resources\/(.*)/,gSe="./resources/";function Lie(t){return(t?.match(jA)??null)?.[1]??null}function Oie(t){const e=t?.match(jA)??null;if(e==null)return null;const i=e[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=lq(i);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=lq(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function RU(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?ID(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function TD(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,r=EU();return _s(r,`${r.scheme}://${i}`)?ID(t,e.portalHostname,i):ID(t,i,e.portalHostname)}function NU(t){if(!t)return t||null;let e=t;return e&&ft&&!ft.findCredential(e)&&(e=BM(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function Rie(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&ft&&!ft.findCredential(e)&&(e=BM(e)),e}const vSe=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:RU,fromCDNUrl:Rie,fromJSON:gh,itemIdFromResourceUrl:Lie,prefixAndFilenameFromResourceUrl:Oie,read:zA,toCDNUrl:NU,toJSON:ug,write:dg},Symbol.toStringTag,{value:"Module"})),Nie={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Die=Object.values(Nie),Fie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Die.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),bSe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Die.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),wSe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function _Se(t){return Fie.test(t)}function ya(t){if(t==null)return null;const e=$t(t),i=e?.path.match(Fie)||e?.path.match(bSe);if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:DU(a!==-1?s.slice(a+1):s),serverType:Nie[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function xSe(t){const e=$t(t).path.match(wSe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function DU(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function SSe(t,e){const i=[];if(t){const r=ya(t);r!=null&&r.title&&i.push(r.title)}if(e){const r=DU(e);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function u$(t){let e=ca(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function $Se(t,e){return t&&FA(kie(t,e))}function ISe(t){let{url:e}=t;if(!e)return{url:e};e=kie(e,t.logger);const i=$t(e),r=ya(i.path);let s;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(s=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const n=xSe(i.path);n!=null&&(e=n.serviceUrl,s=n.sublayerId)}return{url:FA(e),layerId:s}}function kSe(t,e,i,r,s){dg(e,r,"url",s),r.url&&t.layerId!=null&&(r.url=fa(r.url,i,t.layerId.toString()))}function TSe(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),s=e.includes("/imageserver/wmsserver"),n=e.includes("/wmsserver");return i&&(r||s||n)}function Fdt(t){if(!t)return!1;const e=new $s(Us(t)),i=e.authority?.toLowerCase();return i==="server.arcgisonline.com"||i==="services.arcgisonline.com"}const ESe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function FU(t){if(!zU(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),i=lt.apiKeys;if(Array.isArray(i.scopes)){for(const r of i.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return i.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?i.basemapStyles:lt.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?lt.apiKey:null}function ED(){return lt.apiKey!=null||lt.apiKeys.basemapStyles!=null}function MSe(t,e){return e?zU(t):FU(t)!=null}function zU(t){const e=ca(t,!0);return!!e&&!ESe.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function CSe(t,e,i=!1,r){return new Promise((s,n)=>{if(Xr(r))return void n(cq());let o=()=>{c(),n(new Error(`Unable to load ${e}`))},a=async()=>{const d=t;try{await d.decode()}catch{}c(),s(d)},l=()=>{if(!t)return;const d=t;c(),d.src="",n(cq())};const c=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",a),o=null,a=null,t=null,r?.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e))};r?.addEventListener("abort",l),t.addEventListener("error",o),t.addEventListener("load",a)})}function cq(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const zie="Timeout exceeded";function PSe(){return new Error(zie)}function zdt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===zie}function ASe(t){lt.request.crossOriginNoCorsDomains||(lt.request.crossOriginNoCorsDomains={});const e=lt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[ca(i)??""]=0:(e[ca("http://"+i)??""]=0,e[ca("https://"+i)??""]=0)}function LSe(t){const e=lt.request.crossOriginNoCorsDomains;if(e){let i=ca(t);if(i)return i=i.toLowerCase(),!_s(i,EU())&&e[i]<Date.now()-36e5}return!1}async function OSe(t){const e=$t(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const i=lt.request.crossOriginNoCorsDomains,r=ca(t);i&&r&&(i[r.toLowerCase()]=Date.now())}const MD=new Map;function RSe(t,e){const i=e?.preferredHost;if(!i||_s(t,`https://${i}`,!0))return;const r=ya(t);if(!r||r.serverType!=="FeatureServer"||kU(t))return;const s=r.url.path.toLowerCase();MD.has(s)||MD.set(s,i)}function uq(t){const e=ya(t)?.url.path.toLowerCase();if(!e)return t;const i=MD.get(e);return i?Iie(t,i):t}async function xe(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=ny(e.query.toString().replaceAll("+"," ")));const i=Ah(t),r=$_(t);r||i||(t=Gn(t));const s={url:t,requestOptions:{...e}},n=m=>({data:m,getAllHeaders:Ew,getHeader:Ew,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=SD(t,za.internalInterceptors);if(o){const m=await hq(o,s);if(m!=null)return n(m)}let a=SD(t);if(a){const m=await hq(a,s);if(m!=null)return n(m);a.after||a.error||(a=null)}if(t=s.url,(e=s.requestOptions).responseType==="image"&&(H("host-webworker")||H("host-node")))throw Xl("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(e.method==="head"){if(e.body)throw Xl("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw Xl("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await jSe(),HM)return HM.execute(t,e);const l=new AbortController,c=as(e,()=>l.abort()),d={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:za.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=e.useRequestQueue?GSe(d):PD(d),f=await h.finally(()=>c?.remove());return a?.after?.(f),f}let HM,jie=!1;const za=lt.request,Vie="FormData"in globalThis,NSe=new Set([499,498,403,401]),DSe=new Set(["COM_0056","COM_0057","SB_0008"]),FSe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Ew=()=>null,WM=Symbol();function zSe(t){const e=ca(t);e&&!xe._corsServers.includes(e)&&xe._corsServers.push(e)}function dq(t){const e=ca(t);return!e||e.endsWith(".arcgis.com")||xe._corsServers.includes(e)||CU(e)}function Xl(t,e,i,r){let s;const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Ew,getHeader:Ew,ssl:!1};if(e instanceof R)return e.details?(e.details=U(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=n,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(d=>r.headers.get(d)),l=r?.status,c=e.message;c&&(s=c),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,n.subCode=e.subcode,n.messageCode=e.messageCode,typeof e.details=="string"?(n.messages=[e.details],s??(s=e.details)):(n.messages=e.details,s??(s=n.messages?.[0])),n.raw=WM in e?e[WM]:e}return s??(s="Error"),Yi(e)?jt():new R(t,s,n)}async function jSe(){H("host-webworker")&&(!HM&&globalThis.invokeStaticMessage?HM=await K(()=>import("./request-CgDIFoMi.js"),[]):jie=!0)}async function CD(){ft||await K(()=>Promise.resolve().then(()=>Yye),void 0)}async function VSe(t){const e=t.params.url,i=t.params.requestOptions,r=t.controller.signal,s=i.body;let n=null,o=null;if(Vie&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),t.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},keepalive:i.keepAlive??!1,method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:za.priority,redirect:"follow",signal:r},(n||o)&&(t.fetchOptions.body=n||o),(jie||i.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||i.query?.token||n?.get("token")),!t.hasToken){const a=FU(e);a&&(i.query??(i.query={}),i.query.token=a,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!Uie(e)&&!Xr(r)){let a;i.authMode==="immediate"?(await CD(),a=await ft.getCredential(e,{signal:r})):i.authMode==="no-prompt"?(await CD(),a=await ft.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):ft&&(a=ft.findCredential(e)),a&&(t.credential=a,t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function Uie(t){return FSe.some(e=>e.test(t))}async function USe(t){let e=t.params.url,i=uq(e);const r=t.params.requestOptions,s=t.fetchOptions??{},n=$_(e)||Ah(e),o=r.responseType||"json",a=n?0:r.timeout!=null?r.timeout:za.timeout;let l=!1;if(!n){t.useSSL&&(e=LU(e));let m={...r.query};t.credentialToken&&(m.token=t.credentialToken);let y=Ka(m);H("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const v=i.length+1+y.length;let b;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||v>za.maxUrlLength;const w=r.useProxy||!!v2(e);if(w){const x=bie(e);b=x.path,!l&&b.length+1+v>za.maxUrlLength&&(l=!0),x.query&&(m={...x.query,...m})}if(s.method==="HEAD"&&(l||w)){if(l)throw v>za.maxUrlLength?Xl("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):Xl("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(w)throw Xl("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(s.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=Io(e,m):(s.body=Ka(m),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Io(e,m),w&&(t.useProxy=!0,e=`${b}?${e}`),m.token&&Vie&&s.body instanceof FormData&&!kU(e)&&s.body.set("token",m.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:_s(e,EU())||(CU(e)||ft&&ft.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(s.credentials="include",LSe(e)&&await OSe(l?Io(e,m):e)),i=uq(e)}let c,d,h=0,f=!1;a>0&&(h=setTimeout(()=>{f=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")d=s,d.url=i,r.signal?d.signal=r.signal:delete d.signal;else if(r.responseType!=="image"||s.cache!=="default"||s.keepalive||s.method!=="GET"||l||BSe(r.headers)||!n&&!t.useProxy&&za.proxyUrl&&!dq(e)){if(xe._beforeFetch&&await xe._beforeFetch(e,s),c=await fetch(i,s),xe._afterFetch&&await xe._afterFetch(c),t.useProxy||zSe(e),r.responseType==="native")d=c;else if(s.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":d=await c.arrayBuffer();break;case"blob":case"image":d=await c.blob();break;default:d=await c.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(d)switch(o){case"json":d=JSON.parse(d);break;case"xml":d=pq(d,"application/xml");break;case"document":d=pq(d,"text/html")}else d=null;if(d){if(o==="array-buffer"||o==="blob"){const m=c.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&d[o==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(d).json();y.error&&(d=y)}catch{}}o==="image"&&d instanceof Blob&&(d=await fq(URL.createObjectURL(d),t,!0))}}else{d=await c.text();try{d=JSON.parse(d)}catch{}}}else d=await fq(i,t)}catch(m){if(m.name==="AbortError")throw f?PSe():jt("Request canceled");if(!(!c&&m instanceof TypeError&&za.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||dq(e))throw m;t.redoRequest=!0,eSe({proxyUrl:za.proxyUrl,urlPrefix:ca(e)??""})}finally{h&&clearTimeout(h)}return[c,d]}async function hq(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,r;try{r=await t.before(e)}catch(s){i=Xl("request:interceptor",s,e)}if((r instanceof Error||r instanceof R)&&(i=Xl("request:interceptor",r,e)),i)throw t.error&&t.error(i),i;return r}}function BSe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function pq(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}xe._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],xe._beforeFetch=void 0,xe._afterFetch=void 0;const qSe=new Map;async function GSe(t){const e=WSe(t.params.url);if(!e)return PD(t);const{QueueProcessor:i}=await K(()=>import("./QueueProcessor-DNo2hVzB.js"),[]);return Ch(qSe,e.origin,()=>{const s=e.isHosted?H("request-queue-concurrency-hosted"):H("request-queue-concurrency-non-hosted");return new i({concurrency:s,process:n=>{if(Xr(n.params.requestOptions))throw Xl("",jt("Request canceled"),n.params);return PD(n)}})}).push(t)}async function PD(t){let e,i;await VSe(t);try{do[e,i]=await USe(t);while(!await HSe(t,e,i))}catch(n){const o=Xl("request:server",n,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(i)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&i.user?.username&&!CU(r)){const n=ca(r,!0);n&&za.trustedServers.push(n)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&ASe(i.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&RSe(r,i);const s=t.credential;if(s&&ft){let o=ft.findServerInfo(s.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=ft.findCredential(o,s.userId);a&&ft._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:i,getAllHeaders:e?()=>Array.from(e.headers):Ew,getHeader:e?n=>e.headers.get(n):Ew,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function HSe(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[WM]=i,s.details=i.messages)),!s&&!e.ok)throw s=new Error(`Unable to load ${e.url} status: ${e.status}`),s[WM]=i,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o?.toUpperCase());const l=r.authMode;if(n===403&&(a===4||s.message?.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&NSe.has(n)&&!Uie(t.params.url)&&(n!==403||(!o||!DSe.has(o))&&(a==null||a===2&&t.credentialToken))){await CD();try{const c=await ft.getCredential(t.params.url,{error:Xl("request:server",s,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;s=c}}if(s)throw s;return!0}function fq(t,e,i=!1){const r=e.controller.signal,s=new Image;return e.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=za.priority,s.src=t,CSe(s,t,i,r)}function WSe(t){let e,i;return typeof t=="string"?(e=ca(t,!0),i=u$(t)):(e=t.origin,i=u$(t.toString())),e==null?null:{origin:e,isHosted:i}}function Li(t){if(!lt.assetsPath)throw X.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new R("assets:path-not-set","config.assetsPath is not set");return fa(lt.assetsPath,t)}let BL,G=null;function Bie(){return!!G}function JSe(){return!!H("esri-wasm")}function ZSe(){return BL||(BL=K(async()=>{const{default:t}=await import("./pe-wasm-CyV_MJXv.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>Li(`esri/geometry/support/${e}`)})).then(t=>{Zie(t)}),BL)}const yT={geogToProj(t,e,i){G.ensureCache.prepare();const r=hg(i),s=i===r,n=G.ensureFloat64(r),o=G._pe_geog_to_proj(G.getPointer(t),e,n);return o&&_f(i,e,n,s),o},projGeog(t,e,i,r){switch(r){case ar.PE_TRANSFORM_P_TO_G:return yT.projToGeog(t,e,i);case ar.PE_TRANSFORM_G_TO_P:return yT.geogToProj(t,e,i)}return 0},projToGeog:(t,e,i)=>yT.projToGeogCenter(t,e,i,0),projToGeogCenter(t,e,i,r){G.ensureCache.prepare();const s=hg(i),n=i===s,o=G.ensureFloat64(s),a=G._pe_proj_to_geog_center(G.getPointer(t),e,o,r);return a&&_f(i,e,o,n),a}};let ar=class Vt{static init(){Vt.PE_BUFFER_MAX=G.PeDefs.prototype.PE_BUFFER_MAX,Vt.PE_NAME_MAX=G.PeDefs.prototype.PE_NAME_MAX,Vt.PE_MGRS_MAX=G.PeDefs.prototype.PE_MGRS_MAX,Vt.PE_USNG_MAX=G.PeDefs.prototype.PE_USNG_MAX,Vt.PE_DD_MAX=G.PeDefs.prototype.PE_DD_MAX,Vt.PE_DDM_MAX=G.PeDefs.prototype.PE_DDM_MAX,Vt.PE_DMS_MAX=G.PeDefs.prototype.PE_DMS_MAX,Vt.PE_UTM_MAX=G.PeDefs.prototype.PE_UTM_MAX,Vt.PE_PARM_MAX=G.PeDefs.prototype.PE_PARM_MAX,Vt.PE_TYPE_NONE=G.PeDefs.prototype.PE_TYPE_NONE,Vt.PE_TYPE_GEOGCS=G.PeDefs.prototype.PE_TYPE_GEOGCS,Vt.PE_TYPE_PROJCS=G.PeDefs.prototype.PE_TYPE_PROJCS,Vt.PE_TYPE_GEOGTRAN=G.PeDefs.prototype.PE_TYPE_GEOGTRAN,Vt.PE_TYPE_COORDSYS=G.PeDefs.prototype.PE_TYPE_COORDSYS,Vt.PE_TYPE_UNIT=G.PeDefs.prototype.PE_TYPE_UNIT,Vt.PE_TYPE_LINUNIT=G.PeDefs.prototype.PE_TYPE_LINUNIT,Vt.PE_STR_OPTS_NONE=G.PeDefs.prototype.PE_STR_OPTS_NONE,Vt.PE_STR_AUTH_NONE=G.PeDefs.prototype.PE_STR_AUTH_NONE,Vt.PE_STR_AUTH_TOP=G.PeDefs.prototype.PE_STR_AUTH_TOP,Vt.PE_STR_NAME_CANON=G.PeDefs.prototype.PE_STR_NAME_CANON,Vt.PE_STR_FMT_WKT=G.PeDefs.prototype.PE_STR_FMT_WKT,Vt.PE_STR_FMT_WKT2=G.PeDefs.prototype.PE_STR_FMT_WKT2,Vt.PE_PARM_X0=G.PeDefs.prototype.PE_PARM_X0,Vt.PE_PARM_ND=G.PeDefs.prototype.PE_PARM_ND,Vt.PE_TRANSFORM_1_TO_2=G.PeDefs.prototype.PE_TRANSFORM_1_TO_2,Vt.PE_TRANSFORM_2_TO_1=G.PeDefs.prototype.PE_TRANSFORM_2_TO_1,Vt.PE_TRANSFORM_P_TO_G=G.PeDefs.prototype.PE_TRANSFORM_P_TO_G,Vt.PE_TRANSFORM_G_TO_P=G.PeDefs.prototype.PE_TRANSFORM_G_TO_P,Vt.PE_HORIZON_RECT=G.PeDefs.prototype.PE_HORIZON_RECT,Vt.PE_HORIZON_POLY=G.PeDefs.prototype.PE_HORIZON_POLY,Vt.PE_HORIZON_LINE=G.PeDefs.prototype.PE_HORIZON_LINE,Vt.PE_HORIZON_DELTA=G.PeDefs.prototype.PE_HORIZON_DELTA}},qie=null;const mq={},yq={},gq=t=>{const e=t.getType();switch(e){case ar.PE_TYPE_GEOGCS:t=G.castObject(t,G.PeGeogcs);break;case ar.PE_TYPE_PROJCS:t=G.castObject(t,G.PeProjcs);break;case ar.PE_TYPE_GEOGTRAN:t=G.castObject(t,G.PeGeogtran);break;default:e&ar.PE_TYPE_UNIT&&(t=G.castObject(t,G.PeUnit))}return t},Nv={initialize(){G.PeFactory.prototype.initialize(null)},coordsys:t=>Nv.factoryByType(ar.PE_TYPE_COORDSYS,t),factoryByType(t,e){let i=null,r=mq[t];if(r||(r={},mq[t]=r),r.hasOwnProperty(String(e))&&(i=r[e],G.compare(i,G.NULL)&&(i=null)),!i){const s=G.PeFactory.prototype.factoryByType(t,e);G.compare(s,G.NULL)||(i=gq(s),r[e]=i)}return i},fromString(t,e){let i=null,r=yq[t];if(r||(r={},yq[t]=r),r.hasOwnProperty(e)&&(i=r[e],G.compare(i,G.NULL)&&(i=null)),!i){const s=G.PeFactory.prototype.fromString(t,e);G.compare(s,G.NULL)||(i=gq(s),r[e]=i)}return i},geogcs:t=>Nv.factoryByType(ar.PE_TYPE_GEOGCS,t),geogtran:t=>Nv.factoryByType(ar.PE_TYPE_GEOGTRAN,t),getCode:t=>G.PeFactory.prototype.getCode(t),projcs:t=>Nv.factoryByType(ar.PE_TYPE_PROJCS,t),unit:t=>Nv.factoryByType(ar.PE_TYPE_UNIT,t)};let vq,Gie=null;const jU={PE_GTLIST_OPTS_COMMON:0,init(){jU.PE_GTLIST_OPTS_COMMON=G.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,vq=G._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,i,r,s,n){let o=null;const a=new G.PeInteger(n);try{const l=G.PeGTlistExtended.prototype.getGTlist(t,e,i,r,s,a);if((n=a.val)&&(o=[l],n>1)){const c=G.getPointer(l);for(let d=1;d<n;d++)o.push(G.wrapPointer(c+vq*d,G.PeGTlistExtendedEntry))}}finally{G.destroy(a)}return o}},YSe={destroy(t){if(t?.length){for(const e of t)Tl(e),e.getEntries().forEach(i=>{Tl(i);const r=i.getGeogtran();Tl(r),r.getParameters().forEach(Tl),[r.getGeogcs1(),r.getGeogcs2()].forEach(s=>{Tl(s);const n=s.getDatum();Tl(n),Tl(n.getSpheroid()),Tl(s.getPrimem()),Tl(s.getUnit())})});G.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},KSe={geogToGeog(t,e,i,r,s){G.ensureCache.prepare();const n=hg(i),o=i===n,a=G.ensureFloat64(n);let l=0;r&&(l=G.ensureFloat64(r));const c=G._pe_geog_to_geog(G.getPointer(t),e,a,l,s);return c&&_f(i,e,a,o),c}},XSe={geodesicCoordinate(t,e,i,r,s,n,o,a){G.PeLineType.prototype.geodesic_coordinate(t,e,i,r,s,n,o,a)},geodeticCoordinate(t,e,i,r,s,n,o,a,l){G.PeLineType.prototype.geodetic_coordinate(t,e,i,r,s,n,o,a,l)},geodeticDistance(t,e,i,r,s,n,o,a,l,c){G.PeLineType.prototype.geodetic_distance(t,e,i,r,s,n,o,a,l,c)},greatEllipticDistance(t,e,i,r,s,n,o,a,l){G.PeLineType.prototype.great_elliptic_distance(t,e,i,r,s,n,o,a,l)}},QSe={phiToEta:(t,e)=>G.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>G.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>G.PeMath.prototype.phi_to_phig(t,e),q:(t,e,i)=>G.PeMath.prototype.q(t,e,i),q90:(t,e)=>G.PeMath.prototype.q90(t,e)},qL=(t,e,i,r,s,n)=>{let o,a;switch(G.ensureCache.prepare(),t){case"dd":o=G._pe_geog_to_dd,a=ar.PE_DD_MAX;break;case"ddm":o=G._pe_geog_to_ddm,a=ar.PE_DDM_MAX;break;case"dms":o=G._pe_geog_to_dms,a=ar.PE_DMS_MAX}let l=0;e&&(l=G.getPointer(e));const c=hg(r),d=G.ensureFloat64(c),h=VA(i,a),f=o(l,i,d,s,G.ensureInt32(h));if(f)for(let m=0;m<i;m++)n[m]=G.UTF8ToString(h[m]);return f},GL=(t,e,i,r,s)=>{let n;switch(G.ensureCache.prepare(),t){case"dd":n=G._pe_dd_to_geog;break;case"ddm":n=G._pe_ddm_to_geog;break;case"dms":n=G._pe_dms_to_geog}let o=0;e&&(o=G.getPointer(e));const a=r.map(h=>G.ensureString(h)),l=G.ensureInt32(a),c=G.ensureFloat64(new Array(2*i)),d=n(o,i,l,c);return d&&_f(s,i,c),d},e$e={geogToDms:(t,e,i,r,s)=>qL("dms",t,e,i,r,s),dmsToGeog:(t,e,i,r)=>GL("dms",t,e,i,r),geogToDdm:(t,e,i,r,s)=>qL("ddm",t,e,i,r,s),ddmToGeog:(t,e,i,r)=>GL("ddm",t,e,i,r),geogToDd:(t,e,i,r,s)=>qL("dd",t,e,i,r,s),ddToGeog:(t,e,i,r)=>GL("dd",t,e,i,r)};let Hie=class Dv{static init(){Dv.PE_MGRS_STYLE_NEW=G.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,Dv.PE_MGRS_STYLE_OLD=G.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,Dv.PE_MGRS_STYLE_AUTO=G.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,Dv.PE_MGRS_180_ZONE_1_PLUS=G.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,Dv.PE_MGRS_ADD_SPACES=G.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,i,r,s,n,o,a){G.ensureCache.prepare();let l=0;e&&(l=G.getPointer(e));const c=hg(r),d=G.ensureFloat64(c),h=VA(i,ar.PE_MGRS_MAX),f=G.ensureInt32(h),m=G._pe_geog_to_mgrs_extended(l,i,d,s,n,o,f);if(m)for(let y=0;y<i;y++)a[y]=G.UTF8ToString(h[y]);return m}static mgrsToGeogExtended(e,i,r,s,n){G.ensureCache.prepare();let o=0;e&&(o=G.getPointer(e));const a=r.map(h=>G.ensureString(h)),l=G.ensureInt32(a),c=G.ensureFloat64(new Array(2*i)),d=G._pe_mgrs_to_geog_extended(o,i,l,s,c);return d&&_f(n,i,c),d}};const t$e={geogToUsng(t,e,i,r,s,n,o){G.ensureCache.prepare();let a=0;t&&(a=G.getPointer(t));const l=hg(i),c=G.ensureFloat64(l),d=VA(e,ar.PE_MGRS_MAX),h=G.ensureInt32(d),f=G._pe_geog_to_usng(a,e,c,r,s,n,h);if(f)for(let m=0;m<e;m++)o[m]=G.UTF8ToString(d[m]);return f},usngToGeog(t,e,i,r){G.ensureCache.prepare();let s=0;t&&(s=G.getPointer(t));const n=i.map(c=>G.ensureString(c)),o=G.ensureInt32(n),a=G.ensureFloat64(new Array(2*e)),l=G._pe_usng_to_geog(s,e,o,a);return l&&_f(r,e,a),l}};let Wie=class gT{static init(){gT.PE_UTM_OPTS_NONE=G.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,gT.PE_UTM_OPTS_ADD_SPACES=G.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,gT.PE_UTM_OPTS_NS=G.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,i,r,s,n){G.ensureCache.prepare();let o=0;e&&(o=G.getPointer(e));const a=hg(r),l=G.ensureFloat64(a),c=VA(i,ar.PE_UTM_MAX),d=G.ensureInt32(c),h=G._pe_geog_to_utm(o,i,l,s,d);if(h)for(let f=0;f<i;f++)n[f]=G.UTF8ToString(c[f]);return h}static utmToGeog(e,i,r,s,n){G.ensureCache.prepare();let o=0;e&&(o=G.getPointer(e));const a=r.map(h=>G.ensureString(h)),l=G.ensureInt32(a),c=G.ensureFloat64(new Array(2*i)),d=G._pe_utm_to_geog(o,i,l,s,c);return d&&_f(n,i,c),d}};var go;let Jie=(go=class{static init(){go.PE_PCSINFO_OPTION_NONE=G.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,go.PE_PCSINFO_OPTION_DOMAIN=G.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,go.PE_POLE_OUTSIDE_BOUNDARY=G.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,go.PE_POLE_POINT=G.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,i=go.PE_PCSINFO_OPTION_DOMAIN){let r=null,s=null;return go.cache.has(e)&&(s=go.cache.get(e),s[i]&&(r=s[i])),r||(r=G.PePCSInfo.prototype.generate(e,i),s||(s=[],go.cache.set(e,s)),s[i]=r),r}},go.cache=new Map,go);const i$e={versionString:()=>G.PeVersion.prototype.version_string()};function Zie(t){function e(n,o,a){n[o]=a(n[o])}G=t,ar.init(),jU.init(),Hie.init(),Wie.init(),Jie.init(),qie=class extends G.PeDouble{constructor(n=NaN){super(n)}destroy(){G.destroy(this)}[Symbol.dispose](){this.destroy()}},Gie=class extends G.PeGCSExtent{destroy(){G.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[G.PeAngunit,G.PeDatum,G.PeGeogcs,G.PeGeogtran,G.PeObject,G.PeParameter,G.PePrimem,G.PeProjcs,G.PeSpheroid,G.PeUnit];for(const n of i)e(n.prototype,"getName",o=>function(){return o.call(this,new Array(ar.PE_NAME_MAX))});for(const n of[G.PeGeogtran,G.PeProjcs])e(n.prototype,"getParameters",o=>function(){const a=new Array(ar.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const d=G.getValue(l,"*");a[c]=d?G.wrapPointer(d,G.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(G.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return _f(l,a,n.call(this),o),l}),e(G.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=G._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!G.compare(l,G.NULL)){a=[l];const c=this.getSteps();if(c>1){const d=G.getPointer(l);for(let h=1;h<c;h++)a.push(G.wrapPointer(d+o*h,G.PeGTlistExtendedGTs))}}return a}});const r=G._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!G.compare(l,G.NULL)){a=[l];const c=l.getNump();if(c>1){const d=G.getPointer(l);for(let h=1;h<c;h++)a.push(G.wrapPointer(d+r*h,G.PeHorizon))}}return o.set(n,a),a};e(G.PeProjcs.prototype,"horizonGcsGenerate",s),e(G.PeProjcs.prototype,"horizonPcsGenerate",s),G.PeObject.prototype.toString=function(n=ar.PE_STR_OPTS_NONE){G.ensureCache.prepare();const o=G.getPointer(this),a=G.ensureInt8(new Array(ar.PE_BUFFER_MAX));return G.UTF8ToString(G._pe_object_to_string_ext(o,n,a))},G.PeGeogcs.prototype.destroy=function(){this.Delete(),Tl(this),this.ptr=0},G.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},G.PeProjcs.prototype.destroy=function(){this.Delete(),Tl(this),this.ptr=0},G.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Tl(t){if(!t)return;const e=G.getClass(t);if(!e)return;const i=G.getCache(e);if(!i)return;const r=G.getPointer(t);r&&delete i[r]}function VA(t,e){const i=[],r=new Array(e);for(let s=0;s<t;s++)i.push(G.ensureInt8(r));return i}function hg(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function _f(t,e,i,r=!1){if(r)for(let s=0;s<2*e;s++)t[s]=G.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=t.length===0;for(let n=0;n<e;n++)s&&(t[n]=new Array(2)),t[n][0]=G.getValue(i,"double"),t[n][1]=G.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}const jdt=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:yT,PeDefs:ar,get PeDouble(){return qie},PeFactory:Nv,get PeGCSExtent(){return Gie},PeGTTransformations:KSe,PeGTlistExtended:jU,PeGTlistExtendedEntry:YSe,PeLineType:XSe,PeMath:QSe,PeNotationDms:e$e,PeNotationMgrs:Hie,PeNotationUsng:t$e,PeNotationUtm:Wie,PePCSInfo:Jie,PeVersion:i$e,_init:Zie,get _pe(){return G},isLoaded:Bie,isSupported:JSe,load:ZSe},Symbol.toStringTag,{value:"Module"}));let g;const P={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(g=2e3;g<=2045;g++)P[g]=0;for(g=2056;g<=2065;g++)P[g]=0;for(g=2067;g<=2135;g++)P[g]=0;for(g=2137;g<=2154;g++)P[g]=0;for(g=2161;g<=2170;g++)P[g]=0;for(g=2172;g<=2193;g++)P[g]=0;for(g=2195;g<=2198;g++)P[g]=0;for(g=2200;g<=2203;g++)P[g]=0;for(g=2205;g<=2217;g++)P[g]=0;for(g=2222;g<=2224;g++)P[g]=1;for(g=2225;g<=2250;g++)P[g]=2;for(g=2251;g<=2253;g++)P[g]=1;for(g=2257;g<=2264;g++)P[g]=2;for(g=2274;g<=2279;g++)P[g]=2;for(g=2280;g<=2282;g++)P[g]=1;for(g=2283;g<=2289;g++)P[g]=2;for(g=2290;g<=2292;g++)P[g]=0;for(g=2308;g<=2313;g++)P[g]=0;for(g=2315;g<=2491;g++)P[g]=0;for(g=2494;g<=2866;g++)P[g]=0;for(g=2867;g<=2869;g++)P[g]=1;for(g=2870;g<=2888;g++)P[g]=2;for(g=2891;g<=2895;g++)P[g]=2;for(g=2896;g<=2898;g++)P[g]=1;for(g=2902;g<=2908;g++)P[g]=2;for(g=2915;g<=2920;g++)P[g]=2;for(g=2921;g<=2923;g++)P[g]=1;for(g=2924;g<=2930;g++)P[g]=2;for(g=2931;g<=2962;g++)P[g]=0;for(g=2964;g<=2968;g++)P[g]=2;for(g=2969;g<=2973;g++)P[g]=0;for(g=2975;g<=2991;g++)P[g]=0;for(g=2995;g<=3051;g++)P[g]=0;for(g=3054;g<=3079;g++)P[g]=0;for(g=3081;g<=3088;g++)P[g]=0;for(g=3092;g<=3101;g++)P[g]=0;for(g=3106;g<=3138;g++)P[g]=0;for(g=3146;g<=3151;g++)P[g]=0;for(g=3153;g<=3166;g++)P[g]=0;for(g=3168;g<=3172;g++)P[g]=0;for(g=3174;g<=3203;g++)P[g]=0;for(g=3294;g<=3358;g++)P[g]=0;for(g=3367;g<=3403;g++)P[g]=0;for(g=3408;g<=3416;g++)P[g]=0;for(g=3417;g<=3438;g++)P[g]=2;for(g=3441;g<=3446;g++)P[g]=2;for(g=3447;g<=3450;g++)P[g]=0;for(g=3451;g<=3459;g++)P[g]=2;for(g=3460;g<=3478;g++)P[g]=0;for(g=3554;g<=3559;g++)P[g]=0;for(g=3560;g<=3570;g++)P[g]=2;for(g=3571;g<=3581;g++)P[g]=0;for(g=3594;g<=3597;g++)P[g]=0;for(g=3601;g<=3604;g++)P[g]=0;for(g=3637;g<=3639;g++)P[g]=0;for(g=3665;g<=3667;g++)P[g]=0;for(g=3693;g<=3695;g++)P[g]=0;for(g=3701;g<=3727;g++)P[g]=0;for(g=3728;g<=3739;g++)P[g]=2;for(g=3740;g<=3751;g++)P[g]=0;for(g=3753;g<=3760;g++)P[g]=2;for(g=3761;g<=3773;g++)P[g]=0;for(g=3775;g<=3777;g++)P[g]=0;for(g=3779;g<=3781;g++)P[g]=0;for(g=3783;g<=3785;g++)P[g]=0;for(g=3788;g<=3791;g++)P[g]=0;for(g=3797;g<=3802;g++)P[g]=0;for(g=3814;g<=3816;g++)P[g]=0;for(g=3825;g<=3829;g++)P[g]=0;for(g=3832;g<=3841;g++)P[g]=0;for(g=3844;g<=3852;g++)P[g]=0;for(g=3873;g<=3885;g++)P[g]=0;for(g=3890;g<=3893;g++)P[g]=0;for(g=3907;g<=3912;g++)P[g]=0;for(g=3942;g<=3950;g++)P[g]=0;for(g=3968;g<=3970;g++)P[g]=0;for(g=3973;g<=3976;g++)P[g]=0;for(g=3986;g<=3989;g++)P[g]=0;for(g=3994;g<=3997;g++)P[g]=0;for(g=4048;g<=4051;g++)P[g]=0;for(g=4056;g<=4063;g++)P[g]=0;for(g=4093;g<=4096;g++)P[g]=0;for(g=4390;g<=4398;g++)P[g]=0;for(g=4399;g<=4413;g++)P[g]=2;for(g=4418;g<=4433;g++)P[g]=2;for(g=4455;g<=4457;g++)P[g]=2;for(g=4484;g<=4489;g++)P[g]=0;for(g=4491;g<=4554;g++)P[g]=0;for(g=4568;g<=4589;g++)P[g]=0;for(g=4652;g<=4656;g++)P[g]=0;for(g=4766;g<=4800;g++)P[g]=0;for(g=5014;g<=5016;g++)P[g]=0;for(g=5069;g<=5072;g++)P[g]=0;for(g=5105;g<=5130;g++)P[g]=0;for(g=5167;g<=5188;g++)P[g]=0;for(g=5253;g<=5259;g++)P[g]=0;for(g=5269;g<=5275;g++)P[g]=0;for(g=5292;g<=5311;g++)P[g]=0;for(g=5329;g<=5331;g++)P[g]=0;for(g=5343;g<=5349;g++)P[g]=0;for(g=5355;g<=5357;g++)P[g]=0;for(g=5387;g<=5389;g++)P[g]=0;for(g=5459;g<=5463;g++)P[g]=0;for(g=5479;g<=5482;g++)P[g]=0;for(g=5518;g<=5520;g++)P[g]=0;for(g=5530;g<=5539;g++)P[g]=0;for(g=5550;g<=5552;g++)P[g]=0;for(g=5562;g<=5583;g++)P[g]=0;for(g=5623;g<=5625;g++)P[g]=2;for(g=5631;g<=5639;g++)P[g]=0;for(g=5649;g<=5653;g++)P[g]=0;for(g=5663;g<=5680;g++)P[g]=0;for(g=5682;g<=5685;g++)P[g]=0;for(g=5875;g<=5877;g++)P[g]=0;for(g=5896;g<=5899;g++)P[g]=0;for(g=5921;g<=5940;g++)P[g]=0;for(g=6050;g<=6125;g++)P[g]=0;for(g=6244;g<=6275;g++)P[g]=0;for(g=6328;g<=6348;g++)P[g]=0;for(g=6350;g<=6356;g++)P[g]=0;for(g=6366;g<=6372;g++)P[g]=0;for(g=6381;g<=6387;g++)P[g]=0;for(g=6393;g<=6404;g++)P[g]=0;for(g=6480;g<=6483;g++)P[g]=0;for(g=6511;g<=6514;g++)P[g]=0;for(g=6579;g<=6581;g++)P[g]=0;for(g=6619;g<=6624;g++)P[g]=0;for(g=6625;g<=6627;g++)P[g]=2;for(g=6628;g<=6632;g++)P[g]=0;for(g=6634;g<=6637;g++)P[g]=0;for(g=6669;g<=6692;g++)P[g]=0;for(g=6707;g<=6709;g++)P[g]=0;for(g=6720;g<=6723;g++)P[g]=0;for(g=6732;g<=6738;g++)P[g]=0;for(g=6931;g<=6933;g++)P[g]=0;for(g=6956;g<=6959;g++)P[g]=0;for(g=7005;g<=7007;g++)P[g]=0;for(g=7057;g<=7070;g++)P[g]=2;for(g=7074;g<=7082;g++)P[g]=0;for(g=7109;g<=7118;g++)P[g]=0;for(g=7119;g<=7127;g++)P[g]=1;for(g=7374;g<=7376;g++)P[g]=0;for(g=7528;g<=7586;g++)P[g]=0;for(g=7587;g<=7645;g++)P[g]=2;for(g=7692;g<=7696;g++)P[g]=0;for(g=7755;g<=7787;g++)P[g]=0;for(g=7791;g<=7795;g++)P[g]=0;for(g=7799;g<=7801;g++)P[g]=0;for(g=7803;g<=7805;g++)P[g]=0;for(g=7825;g<=7831;g++)P[g]=0;for(g=7845;g<=7859;g++)P[g]=0;for(g=8013;g<=8032;g++)P[g]=0;for(g=8065;g<=8068;g++)P[g]=1;for(g=8518;g<=8529;g++)P[g]=2;for(g=8533;g<=8536;g++)P[g]=2;for(g=8538;g<=8540;g++)P[g]=2;for(g=8677;g<=8679;g++)P[g]=0;for(g=8836;g<=8840;g++)P[g]=0;for(g=8857;g<=8859;g++)P[g]=0;for(g=8908;g<=8910;g++)P[g]=0;for(g=9154;g<=9159;g++)P[g]=0;for(g=9205;g<=9218;g++)P[g]=0;for(g=9271;g<=9273;g++)P[g]=0;for(g=9295;g<=9297;g++)P[g]=0;for(g=9356;g<=9360;g++)P[g]=0;for(g=9404;g<=9407;g++)P[g]=0;for(g=9476;g<=9482;g++)P[g]=0;for(g=9487;g<=9494;g++)P[g]=0;for(g=9697;g<=9699;g++)P[g]=0;for(g=9821;g<=9865;g++)P[g]=0;for(g=10285;g<=10291;g++)P[g]=0;for(g=10314;g<=10317;g++)P[g]=0;for(g=10448;g<=10465;g++)P[g]=0;for(g=10726;g<=10729;g++)P[g]=0;for(g=10731;g<=10733;g++)P[g]=0;for(g=11114;g<=11118;g++)P[g]=0;for(g=20004;g<=20032;g++)P[g]=0;for(g=20047;g<=20049;g++)P[g]=0;for(g=20062;g<=20092;g++)P[g]=0;for(g=20135;g<=20138;g++)P[g]=0;for(g=20248;g<=20258;g++)P[g]=0;for(g=20348;g<=20358;g++)P[g]=0;for(g=20436;g<=20440;g++)P[g]=0;for(g=20822;g<=20824;g++)P[g]=0;for(g=20904;g<=20932;g++)P[g]=0;for(g=20934;g<=20936;g++)P[g]=0;for(g=21004;g<=21032;g++)P[g]=0;for(g=21035;g<=21037;g++)P[g]=0;for(g=21095;g<=21097;g++)P[g]=0;for(g=21148;g<=21150;g++)P[g]=0;for(g=21207;g<=21264;g++)P[g]=0;for(g=21307;g<=21364;g++)P[g]=0;for(g=21413;g<=21423;g++)P[g]=0;for(g=21453;g<=21463;g++)P[g]=0;for(g=21473;g<=21483;g++)P[g]=0;for(g=21780;g<=21782;g++)P[g]=0;for(g=21891;g<=21894;g++)P[g]=0;for(g=21896;g<=21899;g++)P[g]=0;for(g=22171;g<=22177;g++)P[g]=0;for(g=22181;g<=22187;g++)P[g]=0;for(g=22191;g<=22197;g++)P[g]=0;for(g=22207;g<=22222;g++)P[g]=0;for(g=22229;g<=22232;g++)P[g]=0;for(g=22234;g<=22236;g++)P[g]=0;for(g=22243;g<=22250;g++)P[g]=0;for(g=22262;g<=22265;g++)P[g]=0;for(g=22307;g<=22322;g++)P[g]=0;for(g=22348;g<=22357;g++)P[g]=0;for(g=22407;g<=22422;g++)P[g]=0;for(g=22462;g<=22465;g++)P[g]=0;for(g=22521;g<=22525;g++)P[g]=0;for(g=22607;g<=22622;g++)P[g]=0;for(g=22641;g<=22646;g++)P[g]=0;for(g=22648;g<=22657;g++)P[g]=0;for(g=22707;g<=22722;g++)P[g]=0;for(g=22762;g<=22765;g++)P[g]=0;for(g=22807;g<=22822;g++)P[g]=0;for(g=22991;g<=22994;g++)P[g]=0;for(g=23028;g<=23038;g++)P[g]=0;for(g=23301;g<=23333;g++)P[g]=2;for(g=23830;g<=23853;g++)P[g]=0;for(g=23866;g<=23872;g++)P[g]=0;for(g=23877;g<=23884;g++)P[g]=0;for(g=23886;g<=23894;g++)P[g]=0;for(g=23946;g<=23948;g++)P[g]=0;for(g=24311;g<=24313;g++)P[g]=0;for(g=24342;g<=24347;g++)P[g]=0;for(g=24370;g<=24374;g++)P[g]=10;for(g=24375;g<=24381;g++)P[g]=0;for(g=24718;g<=24721;g++)P[g]=0;for(g=24817;g<=24821;g++)P[g]=0;for(g=24877;g<=24882;g++)P[g]=0;for(g=24891;g<=24893;g++)P[g]=0;for(g=25391;g<=25395;g++)P[g]=0;for(g=25828;g<=25838;g++)P[g]=0;for(g=26191;g<=26195;g++)P[g]=0;for(g=26391;g<=26393;g++)P[g]=0;for(g=26701;g<=26722;g++)P[g]=0;for(g=26729;g<=26799;g++)P[g]=2;for(g=26801;g<=26803;g++)P[g]=2;for(g=26811;g<=26813;g++)P[g]=2;for(g=26847;g<=26870;g++)P[g]=2;for(g=26891;g<=26899;g++)P[g]=0;for(g=26901;g<=26923;g++)P[g]=0;for(g=26929;g<=26946;g++)P[g]=0;for(g=26948;g<=26998;g++)P[g]=0;for(g=27037;g<=27040;g++)P[g]=0;for(g=27205;g<=27232;g++)P[g]=0;for(g=27258;g<=27260;g++)P[g]=0;for(g=27391;g<=27398;g++)P[g]=0;for(g=27561;g<=27564;g++)P[g]=0;for(g=27571;g<=27574;g++)P[g]=0;for(g=27581;g<=27584;g++)P[g]=0;for(g=27591;g<=27594;g++)P[g]=0;for(g=27700;g<=27707;g++)P[g]=0;for(g=28191;g<=28193;g++)P[g]=0;for(g=28348;g<=28358;g++)P[g]=0;for(g=28402;g<=28432;g++)P[g]=0;for(g=28462;g<=28492;g++)P[g]=0;for(g=29118;g<=29122;g++)P[g]=0;for(g=29168;g<=29172;g++)P[g]=0;for(g=29177;g<=29185;g++)P[g]=0;for(g=29187;g<=29195;g++)P[g]=0;for(g=29900;g<=29903;g++)P[g]=0;for(g=30161;g<=30179;g++)P[g]=0;for(g=30491;g<=30494;g++)P[g]=0;for(g=30729;g<=30732;g++)P[g]=0;for(g=31251;g<=31259;g++)P[g]=0;for(g=31265;g<=31268;g++)P[g]=0;for(g=31275;g<=31279;g++)P[g]=0;for(g=31281;g<=31297;g++)P[g]=0;for(g=31461;g<=31469;g++)P[g]=0;for(g=31491;g<=31495;g++)P[g]=0;for(g=31917;g<=31922;g++)P[g]=0;for(g=31965;g<=32e3;g++)P[g]=0;for(g=32001;g<=32003;g++)P[g]=2;for(g=32005;g<=32031;g++)P[g]=2;for(g=32033;g<=32060;g++)P[g]=2;for(g=32064;g<=32067;g++)P[g]=2;for(g=32074;g<=32077;g++)P[g]=2;for(g=32081;g<=32086;g++)P[g]=0;for(g=32107;g<=32130;g++)P[g]=0;for(g=32133;g<=32159;g++)P[g]=0;for(g=32164;g<=32167;g++)P[g]=2;for(g=32180;g<=32199;g++)P[g]=0;for(g=32201;g<=32260;g++)P[g]=0;for(g=32301;g<=32360;g++)P[g]=0;for(g=32401;g<=32460;g++)P[g]=0;for(g=32501;g<=32560;g++)P[g]=0;for(g=32601;g<=32662;g++)P[g]=0;for(g=32664;g<=32667;g++)P[g]=2;for(g=32701;g<=32761;g++)P[g]=0;for(g=53001;g<=53004;g++)P[g]=0;for(g=53008;g<=53019;g++)P[g]=0;for(g=53021;g<=53032;g++)P[g]=0;for(g=53034;g<=53037;g++)P[g]=0;for(g=53042;g<=53046;g++)P[g]=0;for(g=53074;g<=53080;g++)P[g]=0;for(g=54001;g<=54004;g++)P[g]=0;for(g=54008;g<=54019;g++)P[g]=0;for(g=54021;g<=54032;g++)P[g]=0;for(g=54034;g<=54037;g++)P[g]=0;for(g=54042;g<=54046;g++)P[g]=0;for(g=54048;g<=54053;g++)P[g]=0;for(g=54074;g<=54080;g++)P[g]=0;for(g=54090;g<=54096;g++)P[g]=0;for(g=54098;g<=54101;g++)P[g]=0;for(g=65161;g<=65163;g++)P[g]=0;for(g=102001;g<=102040;g++)P[g]=0;for(g=102042;g<=102063;g++)P[g]=0;for(g=102065;g<=102067;g++)P[g]=0;for(g=102070;g<=102117;g++)P[g]=0;for(g=102122;g<=102216;g++)P[g]=0;for(g=102221;g<=102377;g++)P[g]=0;for(g=102382;g<=102388;g++)P[g]=0;for(g=102389;g<=102398;g++)P[g]=2;for(g=102399;g<=102444;g++)P[g]=0;for(g=102445;g<=102447;g++)P[g]=2;for(g=102448;g<=102458;g++)P[g]=0;for(g=102459;g<=102468;g++)P[g]=2;for(g=102469;g<=102499;g++)P[g]=0;for(g=102500;g<=102519;g++)P[g]=1;for(g=102520;g<=102524;g++)P[g]=0;for(g=102525;g<=102529;g++)P[g]=2;for(g=102530;g<=102588;g++)P[g]=0;for(g=102590;g<=102598;g++)P[g]=0;for(g=102601;g<=102603;g++)P[g]=0;for(g=102605;g<=102628;g++)P[g]=0;for(g=102629;g<=102646;g++)P[g]=2;for(g=102648;g<=102700;g++)P[g]=2;for(g=102701;g<=102703;g++)P[g]=0;for(g=102707;g<=102730;g++)P[g]=2;for(g=102733;g<=102758;g++)P[g]=2;for(g=102767;g<=102900;g++)P[g]=0;for(g=102901;g<=102933;g++)P[g]=2;for(g=102934;g<=102950;g++)P[g]=13;for(g=102951;g<=102963;g++)P[g]=0;for(g=102965;g<=102969;g++)P[g]=0;for(g=102971;g<=102973;g++)P[g]=0;for(g=102975;g<=102989;g++)P[g]=0;for(g=102990;g<=102992;g++)P[g]=1;for(g=102997;g<=103002;g++)P[g]=0;for(g=103003;g<=103008;g++)P[g]=2;for(g=103009;g<=103011;g++)P[g]=0;for(g=103012;g<=103014;g++)P[g]=2;for(g=103019;g<=103021;g++)P[g]=0;for(g=103022;g<=103024;g++)P[g]=2;for(g=103029;g<=103031;g++)P[g]=0;for(g=103032;g<=103034;g++)P[g]=2;for(g=103065;g<=103068;g++)P[g]=0;for(g=103074;g<=103076;g++)P[g]=0;for(g=103077;g<=103079;g++)P[g]=1;for(g=103080;g<=103082;g++)P[g]=0;for(g=103083;g<=103085;g++)P[g]=2;for(g=103090;g<=103093;g++)P[g]=0;for(g=103097;g<=103099;g++)P[g]=0;for(g=103100;g<=103102;g++)P[g]=2;for(g=103107;g<=103109;g++)P[g]=0;for(g=103110;g<=103112;g++)P[g]=2;for(g=103113;g<=103116;g++)P[g]=0;for(g=103117;g<=103120;g++)P[g]=2;for(g=103153;g<=103157;g++)P[g]=0;for(g=103158;g<=103162;g++)P[g]=2;for(g=103163;g<=103165;g++)P[g]=0;for(g=103166;g<=103168;g++)P[g]=1;for(g=103169;g<=103171;g++)P[g]=2;for(g=103186;g<=103188;g++)P[g]=0;for(g=103189;g<=103191;g++)P[g]=2;for(g=103192;g<=103195;g++)P[g]=0;for(g=103196;g<=103199;g++)P[g]=2;for(g=103200;g<=103224;g++)P[g]=0;for(g=103225;g<=103227;g++)P[g]=1;for(g=103232;g<=103237;g++)P[g]=0;for(g=103238;g<=103243;g++)P[g]=2;for(g=103244;g<=103246;g++)P[g]=0;for(g=103247;g<=103249;g++)P[g]=2;for(g=103254;g<=103256;g++)P[g]=0;for(g=103257;g<=103259;g++)P[g]=2;for(g=103264;g<=103266;g++)P[g]=0;for(g=103267;g<=103269;g++)P[g]=2;for(g=103300;g<=103375;g++)P[g]=0;for(g=103381;g<=103383;g++)P[g]=0;for(g=103384;g<=103386;g++)P[g]=1;for(g=103387;g<=103389;g++)P[g]=0;for(g=103390;g<=103392;g++)P[g]=2;for(g=103397;g<=103399;g++)P[g]=0;for(g=103400;g<=103471;g++)P[g]=2;for(g=103476;g<=103478;g++)P[g]=0;for(g=103479;g<=103481;g++)P[g]=2;for(g=103486;g<=103488;g++)P[g]=0;for(g=103489;g<=103491;g++)P[g]=2;for(g=103492;g<=103495;g++)P[g]=0;for(g=103496;g<=103499;g++)P[g]=2;for(g=103528;g<=103543;g++)P[g]=0;for(g=103544;g<=103548;g++)P[g]=2;for(g=103549;g<=103551;g++)P[g]=0;for(g=103552;g<=103554;g++)P[g]=1;for(g=103555;g<=103557;g++)P[g]=2;for(g=103558;g<=103560;g++)P[g]=0;for(g=103571;g<=103573;g++)P[g]=0;for(g=103574;g<=103576;g++)P[g]=2;for(g=103577;g<=103580;g++)P[g]=0;for(g=103581;g<=103583;g++)P[g]=2;for(g=103595;g<=103694;g++)P[g]=0;for(g=103696;g<=103699;g++)P[g]=0;for(g=103700;g<=103793;g++)P[g]=2;for(g=103794;g<=103890;g++)P[g]=0;for(g=103891;g<=103896;g++)P[g]=2;for(g=103900;g<=103971;g++)P[g]=2;for(g=103972;g<=103977;g++)P[g]=0;for(g=112e3;g<=112101;g++)P[g]=0;const Yie=[102100,102113,3857,3785,900913],r$e=[104905,104971],s$e=[104903],n$e=[4326,...Yie,...r$e,...s$e],d$=[-20037508342788905e-9,20037508342788905e-9],AD=[-20037508342787e-6,20037508342787e-6],HL={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:d$,origin:AD,dx:1e-5},Kie={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:d$,origin:AD,dx:1e-5},102100:HL,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:d$,origin:AD,dx:1e-5},3857:HL,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:HL,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Mr(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const i=t.wkid,r=e.wkid;if(i!=null||r!=null){if(i===r||Ru(t)&&Ru(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&i===a}let s,n;return t.wkt2&&e.wkt2?(s=t.wkt2,n=e.wkt2):t.wkt&&e.wkt&&(s=t.wkt,n=e.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Hn(t){const e=t?.wkid;return e!=null&&e>=2e3&&Kie[e]||null}function pg(t){if(!t)return;const{wkid:e,vcsWkid:i}=t;if(e)return i?JSON.stringify({wkid:e,vcsWkid:i}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function I_(t){if(!oa(t))return!1;const{wkid:e}=t;if(e)return P[e]==null;const i=t.wkt2||t.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function o$e(t){return!(Xie(t)||Qie(t))}function fg(t){return t?.wkid===4326}function Vdt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function bq(t){return t?.wkid===4490}function Ru(t){const e=t?.wkid;return e!=null&&e>=2e3&&Yie.includes(e)}function a$e(t){return t?.wkid===32662}function UA(t){return t===104971||t===104905}function Xie(t){return UA(t?.wkid)}function BA(t){return t===104903}function Qie(t){return BA(t?.wkid)}function l$e(t){const e=t?.wkid;return e!=null&&e>=2e3&&n$e.includes(e)}function oa(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const JM={wkid:4326,wkt:Mh(Kie[4326].wkTemplate,{Central_Meridian:"0.0"})},ZM={wkid:102100,latestWkid:3857},c$e={wkid:32662};function VU(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const u$e=VU(dr),UU=VU(Su),BU=VU(wf),d$e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${dr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},h$e=UU.wkt.toUpperCase(),p$e=BU.wkt.toUpperCase();function f$e(t){if(t!=null&&oa(t)){const e=t.wkid,i=t.wkt2??t.wkt;if(UA(e))return Su;const r=i?.toUpperCase();if(i&&r===h$e)return Su;if(BA(e)||r&&r===p$e)return wf}return dr}function m$e(t){return UA(t)?Su:BA(t)?wf:dr}function YM(t){return Mr(t,u$e)}function xf(t){return YM(t)||Mr(t,UU)||Mr(t,BU)}const qU=39.37,y$e=dr.radius*Math.PI/200,ere=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Mw=P,tre=/UNIT\[([^\]]+)]/i,g$e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),v$e=Qr()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),ol=t=>t*t,Vh=t=>t*t*t,h$={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:ol(.001)},"square-centimeters":{inBaseUnits:ol(.01)},"square-decimeters":{inBaseUnits:ol(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:ol(1e3)},"square-inches":{inBaseUnits:ol(.0254)},"square-feet":{inBaseUnits:ol(.3048)},"square-yards":{inBaseUnits:ol(.9144)},"square-miles":{inBaseUnits:ol(1609.344)},"square-nautical-miles":{inBaseUnits:ol(1852)},"square-us-feet":{inBaseUnits:ol(1200/3937)},acres:{inBaseUnits:.0015625*ol(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Vh(.001)},"cubic-centimeters":{inBaseUnits:1e3*Vh(.01)},"cubic-decimeters":{inBaseUnits:1e3*Vh(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Vh(1e3)},"cubic-inches":{inBaseUnits:1e3*Vh(.0254)},"cubic-feet":{inBaseUnits:1e3*Vh(.3048)},"cubic-yards":{inBaseUnits:1e3*Vh(.9144)},"cubic-miles":{inBaseUnits:1e3*Vh(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},b$e=(()=>{const t={};for(const e in h$)for(const i in h$[e].units)t[i]=e;return t})();function w$e(t,e,i){return t*h$[i].units[e].inBaseUnits}function _$e(t,e,i){return t/h$[i].units[e].inBaseUnits}const x$e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],S$e=["metric","imperial"],ire=[...S$e,...x$e],$$e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function LD(t){const e=b$e[t];if(!e)throw new Error("unknown type");return e}function wq(t,e=null){return e=e||LD(t),h$[e].baseUnit===t}function _r(t,e,i){if(e===i)return t;const r=LD(e);if(r!==LD(i))throw new Error("incompatible units");const s=wq(e,r)?t:w$e(t,e,r);return wq(i,r)?s:_$e(s,i,r)}function Udt(t,e,i,r=!1){if(!r&&I_(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=Eg(e);return s!==i&&(t=s?_r(t,s,i):_r(t*=va(e),"meters",i)),t}function Bdt(t,e,i,r=!1){if(!r&&I_(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=Eg(i);return e!==s&&(t=s?_r(t,e,s):_r(t,e,"meters")/va(i)),t}function I$e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function qdt(t){return I$e(t)}function Gdt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function Hdt(t,e,i){switch(i){case"metric":return k$e(t,e);case"imperial":return E$e(t,e);default:return i}}function Wdt(t,e,i){switch(i){case"metric":return T$e(t,e);case"imperial":return M$e(t,e);default:return i}}function k$e(t,e){const i=_r(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function T$e(t,e){const i=_r(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function E$e(t,e){const i=_r(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function M$e(t,e){const i=_r(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Jdt(t,e){const i=_r(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Zdt(t,e){const i=_r(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function C$e(t,e,i){return _r(t,e,"meters")/(i*Math.PI/180)}function GU(t){return v$e.fromJSON(t.toLowerCase())||null}function Cw(t){if(t!=null&&!o$e(t))return 1;const e=va(t);return e>1e5?1:e}function rre(t){return va(t)>=f$e(t).metersPerDegree?"meters":Eg(t)}function va(t,e=dr.metersPerDegree){return P$e(t,!0)??e}function P$e(t,e=!1){const i=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let s=null;if(i){if(UA(i))return Su.metersPerDegree;if(BA(i))return wf.metersPerDegree;s=Mw.values[Mw[i]],!s&&e&&g$e.has(i)&&(s=y$e)}else r&&(ore(r)?s=_q(ere.exec(r),s):nre(r)&&(s=_q(tre.exec(r),s)));return s}function Ydt(t){return I_(t)?1:va(t)}function _q(t,e){return t?.[1]?sre(t[1]):e}function sre(t){return parseFloat(t.split(",")[1])}function Eg(t){const e=t?.wkid??null,i=t?.wkt2??t?.wkt??null;let r=null;if(e)r=Mw.units[Mw[e]];else if(i){const s=ore(i)?ere:nre(i)?tre:null;if(s){const n=s.exec(i);n?.[1]&&(r=L$e(n[1]))}}return r!=null?GU(r):null}function Kdt(t){const e=Eg(t);return e!=null&&ire.includes(e)?e:null}function Xdt(t){const e=rre(t);return e!=null&&ire.includes(e)?e:null}function Qdt(t){const e=Eg(t);return e==null?null:$$e.get(e)}function nre(t){return/^GEOCCS/i.test(t)}function ore(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const A$e=1e-7;function L$e(t){let i=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!i||!GU(i)){const r=sre(t);i=null;const s=Mw.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<A$e){i=Mw.units[n];break}}return i}function eht(t){const e=Eg(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const O$e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},R$e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},N$e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},D$e=Qr()(O$e),F$e=Qr()(R$e),tht=Qr()(N$e);var mc,Gc;let fe=(Gc=class extends Y{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return mc.WebMercator;if(e?.wkid===4326)return mc.WGS84;const i=new mc;return i.read(e),i}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return fg(this)}get isWebMercator(){return Ru(this)}get isGeographic(){return I_(this)}get isWrappable(){return l$e(this)}get metersPerUnit(){return va(this)}get unit(){return Eg(this)||(this.isGeographic?"degrees":null)}writeWkt(e,i){this.wkid||(i.wkt=e)}clone(){if(this===mc.WGS84)return new mc(JM);if(this===mc.WebMercator)return new mc(ZM);const e=new mc;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=U(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:i,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return i==null||s?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===i&&n.referenceServiceName===r:n.id===i}return Mr(this,e)}toJSON(e){return this.write(void 0,e)}},mc=Gc,Gc.GCS_NAD_1927=null,Gc.WGS84=null,Gc.WebMercator=null,Gc.PlateCarree=null,Gc);u([p({readOnly:!0})],fe.prototype,"isWGS84",null),u([p({readOnly:!0})],fe.prototype,"isWebMercator",null),u([p({readOnly:!0})],fe.prototype,"isGeographic",null),u([p({readOnly:!0})],fe.prototype,"isWrappable",null),u([p({type:Ke,json:{write:!0}})],fe.prototype,"latestWkid",void 0),u([p({readOnly:!0})],fe.prototype,"metersPerUnit",null),u([p({readOnly:!0})],fe.prototype,"unit",null),u([p({type:Ke,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],fe.prototype,"wkid",void 0),u([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],fe.prototype,"wkt",void 0),u([oe("wkt"),oe("web-scene","wkt")],fe.prototype,"writeWkt",null),u([p({type:String,json:{write:!1}})],fe.prototype,"wkt2",void 0),u([p({type:Ke,json:{write:!0}})],fe.prototype,"vcsWkid",void 0),u([p({type:Ke,json:{write:!0}})],fe.prototype,"latestVcsWkid",void 0),u([p()],fe.prototype,"imageCoordinateSystem",void 0),fe=mc=u([M("esri.geometry.SpatialReference")],fe),fe.prototype.toJSON.isDefaultToJSON=!0,fe.GCS_NAD_1927=_e.freeze(new fe({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),fe.WGS84=_e.freeze(new fe(JM)),fe.WebMercator=_e.freeze(new fe(ZM)),fe.PlateCarree=_e.freeze(new fe(c$e));let ns=class extends Y{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=fe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof fe)return e;if(e!=null){const r=new fe;return r.read(e,i),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};u([p()],ns.prototype,"type",void 0),u([p({readOnly:!0})],ns.prototype,"cache",null),u([p({readOnly:!0})],ns.prototype,"extent",null),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ns.prototype,"hasM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],ns.prototype,"hasZ",void 0),u([p({type:fe,json:{write:!0},value:fe.WGS84})],ns.prototype,"spatialReference",void 0),u([Q("spatialReference")],ns.prototype,"readSpatialReference",null),ns=u([M("esri.geometry.Geometry")],ns);function Pw(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new R("internal:mesh","Mesh geometries are not supported for this operation")}function z$e(t){t.forEach(Pw)}const j$e=57.29577951308232,V$e=.017453292519943;function xq(t){return t*j$e}function Sq(t){return t*V$e}function rht(t){return Math.PI/2-2*Math.atan(Math.exp(-t/dr.radius))}function OD(t){return t.wkid!=null||t.wkt!=null}const WL=[0,0];function KM(t,e,i,r,s){const n=t,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=e(n.x,n.y,WL,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=e(n.xmin,n.ymin,WL,r),[o.xmax,o.ymax]=e(n.xmax,n.ymax,WL,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let c;for(let d=0;d<a.length;d++){const h=a[d];c=[],l.push(c);for(let f=0;f<h.length;f++)c.push(e(h[f][0],h[f][1],[0,0],r)),h[f].length>2&&c[f].push(h[f][2]),h[f].length>3&&c[f].push(h[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return s}function vT(t,e){const i=t&&(OD(t)?t:t.spatialReference),r=e&&(OD(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!r)&&(!!Mr(r,i)||Ru(r)&&fg(i)||Ru(i)&&fg(r))}function qA(t,e){if(t==null)return null;const i=t.spatialReference,r=e&&(OD(e)?e:e.spatialReference);return vT(i,r)?Mr(i,r)?U(t):Ru(r)?KM(t,Gb,fe.WebMercator,!1,U(t)):fg(r)?KM(t,GA,fe.WGS84,!1,U(t)):null:null}function Gb(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=Sq(e);return i[0]=Sq(t)*dr.radius,i[1]=dr.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function GA(t,e,i=[0,0],r=!1){if(t===d$[0])i[0]=-180;else if(t===d$[1])i[0]=180;else{const s=xq(t/dr.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=xq(Math.PI/2-2*Math.atan(Math.exp(-e/dr.radius))),i}function $u(t,e=!1,i=U(t)){return Pw(t),Pw(i),KM(t,Gb,fe.WebMercator,e,i)}function Hb(t,e=!1,i=U(t)){return Pw(t),Pw(i),KM(t,GA,fe.WGS84,e,i)}function are(t,e){const i=t.x-e.x,r=t.y-e.y,s=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(i*i+r*r+s*s)}function U$e(t){return lre(t,cre)?.[0]??null}function B$e(t){return lre(t,cre)?.[1]??null}function lre({x:t,y:e,spatialReference:i},r=[0,0]){if(i){if(Ru(i))return GA(t,e,r);if(I_(i))return r[0]=t,r[1]=e,r}return null}const cre=[0,0];var bT;const JL=[0,0];function $q(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Fe=bT=class extends ns{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",_e.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,r,s){let n;if(Array.isArray(t))n=t,s=e,t=n[0],e=n[1],i=n[2],r=n[3];else if(t&&typeof t=="object"){if(n=t,t=n.x!=null?n.x:n.longitude,e=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new fe(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)X.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)X.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const a=Gb(n.longitude,n.latitude,JL);t=a[0],e=a[1]}}}else $q(i)?(s=i,i=null):$q(r)&&(s=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?X.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&X.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return B$e(this)}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Gb(i,t,JL)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return U$e(this)}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",Gb(t,e,JL)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new bT;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return bT.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:d}=t;if(!n.equals(d))if(n.isWebMercator&&d.isWGS84)[l,c]=Gb(l,c),d=n;else{if(!n.isWGS84||!d.isWebMercator)return!1;[l,c]=GA(l,c),d=n}return e===l&&i===c&&r===o&&s===a&&n.wkid===d.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=Hn(this.spatialReference);if(!t)return this;let e=this.x;const[i,r]=t.valid,s=2*r;let n;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s),this._set("x",e),this}distance(t){return are(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};u([p({readOnly:!0})],Fe.prototype,"cache",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Fe.prototype,"hasM",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Fe.prototype,"hasZ",null),u([p({type:Number})],Fe.prototype,"latitude",null),u([p({type:Number})],Fe.prototype,"longitude",null),u([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Mt(t=>isNaN(t)?t:zn(t))],Fe.prototype,"x",void 0),u([oe("x")],Fe.prototype,"writeX",null),u([Q("x")],Fe.prototype,"readX",null),u([p({type:Number,json:{write:!0}})],Fe.prototype,"y",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Fe.prototype,"z",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Fe.prototype,"m",void 0),Fe=bT=u([M("esri.geometry.Point")],Fe),Fe.prototype.toJSON.isDefaultToJSON=!0;let yc=class extends Le(Y){constructor(...e){super(...e),this.position=new Fe([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new eie}normalizeCtorArgs(e,i,r,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return e}writePosition(e,i,r,s){const n=e.clone();n.x=zn(e.x||0),n.y=zn(e.y||0),n.z=e.hasZ?zn(e.z||0):e.z,i[r]=n.write({},s)}readPosition(e,i){const r=new Fe;return r.read(e,i),r.x=zn(r.x||0),r.y=zn(r.y||0),r.z=r.hasZ?zn(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};u([p({type:Fe,json:{write:{isRequired:!0}}})],yc.prototype,"position",void 0),u([oe("position")],yc.prototype,"writePosition",null),u([Q("position")],yc.prototype,"readPosition",null),u([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Mt(t=>kxe.normalize(zn(t)))],yc.prototype,"heading",void 0),u([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Mt(t=>bn(zn(t),-180,180))],yc.prototype,"tilt",void 0),u([p({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Mt(t=>bn(zn(t,55),1,170))],yc.prototype,"fov",void 0),u([p({type:eie,nonNullable:!0,json:{read:!1,write:!1}})],yc.prototype,"layout",void 0),yc=u([M("esri.Camera")],yc);const q$e=yc,ZL=[0,0];function b2(t,e){return e!=null&&Cn(t,e.x,e.y,e.z)}function nht(t,e){if(!e.points?.length)return!1;for(const i of e.points)if(!Aw(t,i))return!1;return!0}function G$e(t,e){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Cn(t,i,r,s)&&Cn(t,i,o,s)&&Cn(t,n,o,s)&&Cn(t,n,r,s)&&Cn(t,i,r,a)&&Cn(t,i,o,a)&&Cn(t,n,o,a)&&Cn(t,n,r,a):Cn(t,i,r)&&Cn(t,i,o)&&Cn(t,n,o)&&Cn(t,n,r)}function Aw(t,e){return Cn(t,e[0],e[1])}function H$e(t,e){return Cn(t,e[0],e[1],e[2])}function Cn(t,e,i,r){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function HU(t,e){return ZL[1]=e.y,ZL[0]=e.x,W$e(t,ZL)}function W$e(t,e){return WU(t.rings,e)}function WU(t,e){if(!t||t.length<1)return!1;if(J$e(t))return Iq(!1,t,e);let i=!1;for(let r=0,s=t.length;r<s;r++)i=Iq(i,t[r],e);return i}function J$e(t){return!Array.isArray(t[0][0])}function Iq(t,e,i){const[r,s]=i;let n=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,d]=e[a],[h,f]=e[o];(d<s&&f>=s||f<s&&d>=s)&&c+(s-d)/(f-d)*(h-c)<r&&(n=!n)}return n}function Z$e(t,e){return b2(t,e)}function Y$e(t,e){const i=t.hasZ&&e.hasZ;let r,s,n;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(s=e.ymin,t.ymax<s)return!1}else if(s=t.ymin,e.ymax<s)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(n=e.zmin,t.zmax<n)return!1}else if(n=t.zmin,e.zmax<n)return!1}return!0}function K$e(t,e){const{points:i,hasZ:r}=e,s=r?H$e:Aw;for(const n of i)if(s(t,n))return!0;return!1}const mg=[0,0],yg=[0,0],gg=[0,0],vg=[0,0],X$e=[mg,yg,gg,vg],ure=[[gg,mg],[mg,yg],[yg,vg],[vg,gg]];function Q$e(t,e){return e2e(t,e.rings)}function e2e(t,e){mg[0]=t.xmin,mg[1]=t.ymax,yg[0]=t.xmax,yg[1]=t.ymax,gg[0]=t.xmin,gg[1]=t.ymin,vg[0]=t.xmax,vg[1]=t.ymin;for(const i of X$e)if(WU(e,i))return!0;for(const i of e){if(!i.length)continue;let r=i[0];if(Aw(t,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(Aw(t,n)||dre(r,n,ure))return!0;r=n}}return!1}function t2e(t,e){mg[0]=t.xmin,mg[1]=t.ymax,yg[0]=t.xmax,yg[1]=t.ymax,gg[0]=t.xmin,gg[1]=t.ymin,vg[0]=t.xmax,vg[1]=t.ymin;const i=e.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(Aw(t,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(Aw(t,o)||dre(s,o,ure))return!0;s=o}}return!1}const ms=[0,0];function i2e(t){for(let e=0;e<t.length;e++){const i=t[e];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],d=t[a][l+1];if(XM(n,o,c,d,ms)&&!(ms[0]===n[0]&&ms[1]===n[1]||ms[0]===c[0]&&ms[1]===c[1]||ms[0]===o[0]&&ms[1]===o[1]||ms[0]===d[0]&&ms[1]===d[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let l=s+2;l<n;l++){const c=i[l],d=i[l+1];if(XM(o,a,c,d,ms)&&!(ms[0]===o[0]&&ms[1]===o[1]||ms[0]===c[0]&&ms[1]===c[1]||ms[0]===a[0]&&ms[1]===a[1]||ms[0]===d[0]&&ms[1]===d[1]))return!0}}}return!1}function dre(t,e,i){for(let r=0;r<i.length;r++)if(XM(t,e,i[r][0],i[r][1]))return!0;return!1}function XM(t,e,i,r,s){const[n,o]=t,[a,l]=e,[c,d]=i,[h,f]=r,m=h-c,y=n-c,v=a-n,b=f-d,w=o-d,x=l-o,S=b*v-m*x;if(S===0)return!1;const $=(m*w-b*y)/S,T=(v*w-x*y)/S;return $>=0&&$<=1&&T>=0&&T<=1&&(s&&(s[0]=n+$*(a-n),s[1]=o+$*(l-o)),!0)}function r2e(t){switch(t){case"esriGeometryEnvelope":case"extent":return Y$e;case"esriGeometryMultipoint":case"multipoint":return K$e;case"esriGeometryPoint":case"point":return Z$e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Q$e;case"esriGeometryPolyline":case"polyline":return t2e}}var yl;function s2e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Uh(t,e,i){return e==null?i:i==null?e:t(e,i)}let Pe=yl=class extends ns{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,r,s){return s2e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?fe.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:r,spatialReference:s??fe.WGS84}}static fromPoint(t){return new yl({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Fe({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new yl;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&vT(e,i)&&(t=e.isWebMercator?$u(t):Hb(t,!0)),t.type==="point"?b2(this,t):t.type==="extent"&&G$e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&vT(e,i)&&(t=e.isWebMercator?$u(t):Hb(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,r=this.height*e;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*e;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*e;this.mmin+=s,this.mmax-=s}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!Mr(e,i)&&vT(e,i)&&(t=e.isWebMercator?$u(t):Hb(t,!0)),r2e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Uh(Math.min,this.zmin,t.zmin),this.zmax=Uh(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Uh(Math.min,this.mmin,t.mmin),this.mmax=Uh(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Uh(Math.max,this.zmin,t.zmin),this.zmax=Uh(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Uh(Math.max,this.mmin,t.mmin),this.mmax=Uh(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Hn(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const r=e.isWebMercator?Hb(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(r.x=YL(r.x,t).x),this.spatialReference=new fe(Mh((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[i,r]=t.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(e=this.center),e}_normalize(t,e,i){const r=this.spatialReference;if(!r)return this;const s=i??Hn(r);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(t)return this._shiftCM(s);if(e)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const d=(l.zmax-l.zmin)/2;for(let h=0;h<c.length;h++)c[h].push(d)}if(a){const d=(l.mmax-l.mmin)/2;for(let h=0;h<c.length;h++)c[h].push(d)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let d;t=t||Hn(o);const[h,f]=t.valid;d=YL(this.xmin,t);const m=d.x,y=d.frameId;d=YL(this.xmax,t);const v=d.x,b=d.frameId,w=m===v&&a>0;if(a>2*f){const x=new yl(l<c?m:v,s,f,n,o),S=new yl(h,s,l<c?v:m,n,o),$=new yl(0,s,f,n,o),T=new yl(h,s,0,n,o),C=[],L=[];x.contains($)&&C.push(y),x.contains(T)&&L.push(y),S.contains($)&&C.push(b),S.contains(T)&&L.push(b);for(let N=y+1;N<b;N++)C.push(N),L.push(N);e.push({extent:x,frameIds:[y]},{extent:S,frameIds:[b]},{extent:$,frameIds:C},{extent:T,frameIds:L})}else m>v||w?e.push({extent:new yl(m,s,f,n,o),frameIds:[y]},{extent:new yl(h,s,v,n,o),frameIds:[b]}):e.push({extent:new yl(m,s,v,n,o),frameIds:[y]});this.cache._parts=e}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<e.length;n++)e[n].extent.set(s)}return e}};function YL(t,e){const[i,r]=e.valid,s=2*r;let n,o=0;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s,o=n):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s,o=-n),{x:t,frameId:o}}u([p({readOnly:!0})],Pe.prototype,"cache",null),u([p({readOnly:!0})],Pe.prototype,"center",null),u([p({readOnly:!0})],Pe.prototype,"extent",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Pe.prototype,"hasM",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Pe.prototype,"hasZ",null),u([p({readOnly:!0})],Pe.prototype,"height",null),u([p({readOnly:!0})],Pe.prototype,"width",null),u([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Pe.prototype,"xmin",void 0),u([p({type:Number,json:{write:!0}})],Pe.prototype,"ymin",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pe.prototype,"mmin",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pe.prototype,"zmin",void 0),u([p({type:Number,json:{write:!0}})],Pe.prototype,"xmax",void 0),u([p({type:Number,json:{write:!0}})],Pe.prototype,"ymax",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Pe.prototype,"mmax",void 0),u([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Pe.prototype,"zmax",void 0),Pe=yl=u([M("esri.geometry.Extent")],Pe),Pe.prototype.toJSON.isDefaultToJSON=!0;function zr(t=d2e){return[t[0],t[1],t[2],t[3]]}function hre(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function HA(t,e,i,r,s=zr()){return s[0]=t,s[1]=e,s[2]=i,s[3]=r,s}function oht(t,e=zr()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function n2e(t,e,i=new Pe){return i.xmin=t[0],i.ymin=t[1],i.xmax=t[2],i.ymax=t[3],i.spatialReference=e,i}function Bs(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function o2e(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function a2e(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function aht(t,e,i){if(e!=null)if("length"in e)ND(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}else hre(i,t)}function lht(t,e,i=t){const r=e.length;let s=t[0],n=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];s=Math.min(s,c[0]),n=Math.min(n,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return i[0]=s,i[1]=n,i[2]=o,i[3]=a,i}function cht(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function WA(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function JA(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function uht(t){return WA(t)*JA(t)}function kq(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function l2e(t){const e=WA(t),i=JA(t);return Math.sqrt(e*e+i*i)}function dht(t,e){return!!t&&RD(t,e.x,e.y)}function RD(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function hht(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function pht(t,e,i){return Math.max(e[0],t[0])-i<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-i<=Math.min(e[3],t[3])}function c2e(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function fht(t,e,i,r){return r??(r=t),r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+e,r[3]=t[3]+i,r}function u2e(t){return t?hre(t,Tq):zr(Tq)}function ND(t){return t!=null&&t.length===4}function mht(t,e){return ND(t)&&ND(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const Tq=[1/0,1/0,-1/0,-1/0],d2e=[0,0,0,0];let JU=1e-6;function Wn(){return JU}function h2e(t){JU=t}const ZA=Math.random,p2e=Math.PI/180,f2e=180/Math.PI;function ZU(t){return t*p2e}function m2e(t){return t*f2e}function y2e(t,e){return Math.abs(t-e)<=JU*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:ZA,equals:y2e,getEpsilon:Wn,setEpsilon:h2e,toDegree:m2e,toRadian:ZU},Symbol.toStringTag,{value:"Module"}));function d0(t,e){return t[0]=e[0],t[1]=e[1],t}function $r(t,e,i){return t[0]=e,t[1]=i,t}function pre(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function p$(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function fre(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function mre(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function g2e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function v2e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function b2e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function w2e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function _2e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function w2(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function x2e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function YA(t,e){const i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}function f$(t,e){const i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function QM(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function yre(t){const e=t[0],i=t[1];return e*e+i*i}function gre(t,e){return t[0]=-e[0],t[1]=-e[1],t}function S2e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function DD(t,e){const i=e[0],r=e[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function vre(t,e){return t[0]*e[0]+t[1]*e[1]}function bre(t,e,i){const r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function $2e(t,e,i,r){const s=e[0],n=e[1];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t}function I2e(t,e=1){const i=2*ZA()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function k2e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s,t[1]=i[1]*r+i[3]*s,t}function un(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[2]*s+i[4],t[1]=i[1]*r+i[3]*s+i[5],t}function wT(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[3]*s+i[6],t[1]=i[1]*r+i[4]*s+i[7],t}function T2e(t,e,i){const r=e[0],s=e[1];return t[0]=i[0]*r+i[4]*s+i[12],t[1]=i[1]*r+i[5]*s+i[13],t}function E2e(t,e,i,r){const s=e[0]-i[0],n=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=s*a-n*o+i[0],t[1]=s*o+n*a+i[1],t}function M2e(t,e){const i=t[0],r=t[1],s=e[0],n=e[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(i*s+r*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function C2e(t){return"vec2("+t[0]+", "+t[1]+")"}function P2e(t,e){return t[0]===e[0]&&t[1]===e[1]}function A2e(t,e){const i=t[0],r=t[1],s=e[0],n=e[1],o=Wn();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function L2e(t,e,i,r,s){let n=e[0]-i[0],o=e[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,t[0]=e[0]+n,t[1]=e[1]+o,t}const O2e=QM,YU=p$,R2e=fre,N2e=mre,D2e=YA,F2e=f$,z2e=yre;Object.freeze(Object.defineProperty({__proto__:null,add:pre,angle:M2e,ceil:g2e,copy:d0,cross:bre,dist:D2e,distance:YA,div:N2e,divide:mre,dot:vre,equals:A2e,exactEquals:P2e,floor:v2e,inverse:S2e,len:O2e,length:QM,lerp:$2e,max:w2e,min:b2e,mul:R2e,multiply:fre,negate:gre,normalize:DD,projectAndScale:L2e,random:I2e,rotate:E2e,round:_2e,scale:w2,scaleAndAdd:x2e,set:$r,sqrDist:F2e,sqrLen:z2e,squaredDistance:f$,squaredLength:yre,str:C2e,sub:YU,subtract:p$,transformMat2:k2e,transformMat2d:un,transformMat3:wT,transformMat4:T2e},Symbol.toStringTag,{value:"Module"}));function Vd(t,e,i,r){return t[0]=e[0]*(1-r)+i[0]*r,t[1]=e[1]*(1-r)+i[1]*r,t}function qn(t,e){return f$(t,e)}function yht(t,e,i){const r=qn(e,i);if(r===0)return qn(e,t);const s=(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0]);return s*s/r}function j2e(t,e,i,r,s){const[n,o]=e,[a,l]=i,[c,d]=r,[h,f]=s,m=(n-a)*(d-f)-(o-l)*(c-h);if(m===0)return null;const y=(n*l-o*a)*(c-h)-(n-a)*(c*f-d*h),v=(n*l-o*a)*(d-f)-(o-l)*(c*f-d*h);return t[0]=y/m,t[1]=v/m,t}const Jl=2*Math.PI;function xy(t,e){const i=Math.atan2(t,e);return i<0?i+Jl:i}function wre(t){return Math.abs(t)%Jl}function Eq(t){const e=wre(t);return e<Math.PI?e:Jl-e}function KA(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function _re(t,e,i,r){if(la(wre(t-e),0))return i?[t,t]:[t,r?t-Jl:t+Jl];const[s,n]=r?[t-Jl,t]:[t,t+Jl];return[t,_2({min:s,max:n},e)]}function _2({min:t,max:e},i){let r;return r=e-i,r>=Jl?(r-=r%Jl,i+r):(r=i-t,r>=Jl?(r-=r%Jl,i-r):i)}function V2e(t,e){const i=_2(t,e);return i>t.min&&i<t.max?i:Eq(i-t.min)<Eq(i-t.max)?t.min:t.max}function xre(t,e,i,r=10){return e.map(s=>{let n=s;for(let o=0;o<r;o++){const[a,l,c,d,h,f]=i(n),m=t[0]-a,y=t[1]-l,v=-c,b=-d;n+=-(2*m*v+2*y*b)/(2*v*v+2*m*-h+2*b*b+2*y*-f||1e-6)}return n})}const U2e=[0,0];function Sre(t){const e=1-t,i=e*e,r=t*t;return[i*e,3*t*i,3*r*e,r*t]}function FD(t,e,i,r,s){const[n,o,a,l]=Sre(s);return[t[0]*n+e[0]*o+i[0]*a+r[0]*l,t[1]*n+e[1]*o+i[1]*a+r[1]*l]}function Mq(t,e,i,r,s){const[n,o,a,l]=Sre(s);return t*n+e*o+i*a+r*l}function ght(t,e,i){const r=t,[s,n,o]=e.b;return FD(r,n,o,s,i)}function B2e(t,e,i){const r=t,[s,n,o]=e.b,a=Vd([0,0],r,n,i),l=Vd(U2e,n,o,i),c=Vd([0,0],o,s,i),d=Vd([0,0],a,l,i),h=Vd([0,0],l,c,i);return[{b:[Vd([],d,h,i),a,d]},{b:[[...s],h,c]}]}function vht(t,e,i){const r=t,[s,n,o]=e.b,a=xre(i,[.1,.5,.9],h=>{const f=1-h,[m,y]=FD(r,n,o,s,h);return[m,y,3*f*f*(n[0]-r[0])+6*f*h*(o[0]-n[0])+3*h*h*(s[0]-o[0]),3*f*f*(n[1]-r[1])+6*f*h*(o[1]-n[1])+3*h*h*(s[1]-o[1]),6*f*(o[0]-2*n[0]+r[0])+6*h*(s[0]-2*o[0]+n[0]),6*f*(o[1]-2*n[1]+r[1])+6*h*(s[1]-2*o[1]+n[1])]}).map(h=>Math.min(1,Math.max(0,h)));a.push(0,1);let l=1/0;const c=a.map(h=>{const f=FD(r,n,o,s,h),[m,y]=f,v=i[0]-m,b=i[1]-y,w=Math.sqrt(v*v+b*b);return l=Math.min(w,l),{t:h,curvePoint:f,distance:w}}),d=[];for(const h of c){const{t:f,distance:m}=h;sie(m,l)&&!d.some(({t:y})=>la(y,f))&&d.push(h)}return d}function q2e(t,e,i){const r=e,[s,n,o]=i.b;if(Bs(t,r),Bs(t,s),RD(t,n[0],n[1])&&RD(t,o[0],o[1]))return t;for(const a of Cq(r[0],n[0],o[0],s[0]))a>0&&a<1&&o2e(t,Mq(r[0],n[0],o[0],s[0],a));for(const a of Cq(r[1],n[1],o[1],s[1]))a>0&&a<1&&a2e(t,Mq(r[1],n[1],o[1],s[1],a));return t}function Cq(t,e,i,r){const s=3*(3*(e-i)-t+r),n=6*(t-2*e+i),o=3*(e-t);if(s===0)return n!==0?[-o/n]:[];const a=Math.sqrt(n*n-4*s*o);return[(-n+a)/(2*s),(-n-a)/(2*s)]}function bht(t,e,i){let s=0,n=[e];for(let o=0;o<16;o++){let a=t;const l=[];for(const d of n)l.push(...B2e(a,d,.5)),a=d.b[0];n=l,a=t,s=0;let c=0;for(const d of n){const[h,f,m]=d.b,y=Math.sqrt(qn(a,h));s+=(y+(Math.sqrt(qn(a,f))+Math.sqrt(qn(f,m))+Math.sqrt(qn(m,h))))/2,c+=y,a=h}if(s-c<i)return s}return s}function G2e(t,e,i){const[r,s]=t,[n,o]=e,[a,l]=i,[c,d]=[n-r,o-s];let h=c*(a-r)+d*(l-s);h/=c**2+d**2,h=bn(h,0,1);const f=Vd([0,0],t,e,h);return{t:h,curvePoint:f,distance:Math.sqrt(qn(f,i))}}let $re=class{constructor(e,i,r,s,n,o){this.cx=e,this.cy=i,this.radius=r,this.thetaStart=s,this.thetaEnd=n,this.isInvalid=o}get startPoint(){const{cx:e,cy:i,radius:r,thetaStart:s}=this;return[e+r*Math.cos(s),i+r*Math.sin(s)]}get endPoint(){const{cx:e,cy:i,radius:r,thetaEnd:s}=this;return[e+r*Math.cos(s),i+r*Math.sin(s)]}};function eC(t,e){const{cx:i,cy:r,radius:s}=t;return[i+s*Math.cos(e),r+s*Math.sin(e)]}function _T(t,e){if(t.isInvalid)return Vd([0,0],t.startPoint,t.endPoint,e);const{thetaStart:i,thetaEnd:r}=t;return eC(t,i*(1-e)+r*e)}function _ht(t,e){if(t.isInvalid)return G2e(t.startPoint,t.endPoint,e);const{cx:i,cy:r,thetaStart:s,thetaEnd:n}=t,[o,a]=e,l=V2e(KA(s,n),Math.atan2(a-r,o-i)),c=eC(t,l);return{t:(l-s)/(n-s),curvePoint:c,distance:Math.sqrt(qn(e,c))}}function Pq(t,e){if(e.isInvalid)return Bs(t,e.startPoint),Bs(t,e.endPoint),t;const{cx:i,cy:r,radius:s,thetaStart:n,thetaEnd:o}=e;Bs(t,eC(e,n)),Bs(t,eC(e,o));const a=KA(n,o),l=Math.PI/2;let c=0;for(const d of[[i+s,r],[i,r+s],[i-s,r],[i,r-s]])c=_2(a,c),c>a.min&&c<a.max&&Bs(t,d),c+=l;return t}function xht(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:i,thetaEnd:r}=t;return e*Math.abs(r-i)}function H2e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function W2e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h0(t,e,i,r,s,n,o,a,l,c){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Ire(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kre(t,e){if(t===e){const i=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tre(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=d*o-a*c,f=-d*n+a*l,m=c*n-o*l;let y=i*h+r*f+s*m;return y?(y=1/y,t[0]=h*y,t[1]=(-d*r+s*c)*y,t[2]=(a*r-s*o)*y,t[3]=f*y,t[4]=(d*i-s*l)*y,t[5]=(-a*i+s*n)*y,t[6]=m*y,t[7]=(-c*i+r*l)*y,t[8]=(o*i-r*n)*y,t):null}function J2e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t[0]=o*d-a*c,t[1]=s*c-r*d,t[2]=r*a-s*o,t[3]=a*l-n*d,t[4]=i*d-s*l,t[5]=s*n-i*a,t[6]=n*c-o*l,t[7]=r*l-i*c,t[8]=i*o-r*n,t}function xT(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*n-o*l)+i*(-c*s+o*a)+r*(l*s-n*a)}function m$(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=i[0],m=i[1],y=i[2],v=i[3],b=i[4],w=i[5],x=i[6],S=i[7],$=i[8];return t[0]=f*r+m*o+y*c,t[1]=f*s+m*a+y*d,t[2]=f*n+m*l+y*h,t[3]=v*r+b*o+w*c,t[4]=v*s+b*a+w*d,t[5]=v*n+b*l+w*h,t[6]=x*r+S*o+$*c,t[7]=x*s+S*a+$*d,t[8]=x*n+S*l+$*h,t}function zD(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=i[0],m=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+m*o+c,t[7]=f*s+m*a+d,t[8]=f*n+m*l+h,t}function Ere(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=Math.sin(i),m=Math.cos(i);return t[0]=m*r+f*o,t[1]=m*s+f*a,t[2]=m*n+f*l,t[3]=m*o-f*r,t[4]=m*a-f*s,t[5]=m*l-f*n,t[6]=c,t[7]=d,t[8]=h,t}function Z2e(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=n*e[6],t[7]=n*e[7],t[8]=n*e[8],t}function Y2e(t,e,i){const r=i[0],s=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function K2e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function X2e(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Q2e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function eIe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function tIe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,c=i*o,d=r*o,h=r*a,f=s*o,m=s*a,y=s*l,v=n*o,b=n*a,w=n*l;return t[0]=1-h-y,t[3]=d-w,t[6]=f+b,t[1]=d+w,t[4]=1-c-y,t[7]=m-v,t[2]=f-b,t[5]=m+v,t[8]=1-c-h,t}function iIe(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],c=e[9],d=e[10],h=d*o-a*c,f=-d*n+a*l,m=c*n-o*l,y=i*h+r*f+s*m;if(!y)return null;const v=1/y;return t[0]=h*v,t[1]=(-d*r+s*c)*v,t[2]=(a*r-s*o)*v,t[3]=f*v,t[4]=(d*i-s*l)*v,t[5]=(-a*i+s*n)*v,t[6]=m*v,t[7]=(-c*i+r*l)*v,t[8]=(o*i-r*n)*v,t}function rIe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],m=e[11],y=e[12],v=e[13],b=e[14],w=e[15],x=i*a-r*o,S=i*l-s*o,$=i*c-n*o,T=r*l-s*a,C=r*c-n*a,L=s*c-n*l,N=d*v-h*y,D=d*b-f*y,F=d*w-m*y,W=h*b-f*v,Z=h*w-m*v,V=f*w-m*b;let A=x*V-S*Z+$*W+T*F-C*D+L*N;return A?(A=1/A,t[0]=(a*V-l*Z+c*W)*A,t[1]=(l*F-o*V-c*D)*A,t[2]=(o*Z-a*F+c*N)*A,t[3]=(s*Z-r*V-n*W)*A,t[4]=(i*V-s*F+n*D)*A,t[5]=(r*F-i*Z-n*N)*A,t[6]=(v*L-b*C+w*T)*A,t[7]=(b*$-y*L-w*S)*A,t[8]=(y*C-v*$+w*x)*A,t):null}function sIe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function nIe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function oIe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function aIe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Mre(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function lIe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function cIe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function uIe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function dIe(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=e[0],f=e[1],m=e[2],y=e[3],v=e[4],b=e[5],w=e[6],x=e[7],S=e[8],$=Wn();return Math.abs(i-h)<=$*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-f)<=$*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-m)<=$*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-y)<=$*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-v)<=$*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-b)<=$*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-w)<=$*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-x)<=$*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(d-S)<=$*Math.max(1,Math.abs(d),Math.abs(S))}function hIe(t){const e=Wn(),i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(s*s+a*a+d*d))<=e}const pIe=m$,fIe=Mre;Object.freeze(Object.defineProperty({__proto__:null,add:aIe,adjoint:J2e,copy:W2e,determinant:xT,equals:dIe,exactEquals:uIe,frob:oIe,fromMat2d:eIe,fromMat4:H2e,fromQuat:tIe,fromRotation:X2e,fromScaling:Q2e,fromTranslation:K2e,identity:Ire,invert:Tre,isOrthoNormal:hIe,mul:pIe,multiply:m$,multiplyScalar:lIe,multiplyScalarAndAdd:cIe,normalFromMat4:rIe,normalFromMat4Legacy:iIe,projection:sIe,rotate:Ere,scale:Z2e,scaleByVec2:Y2e,set:h0,str:nIe,sub:fIe,subtract:Mre,translate:zD,transpose:kre},Symbol.toStringTag,{value:"Module"}));function Mg(){return[1,0,0,0,1,0,0,0,1]}function mIe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function yIe(t,e,i,r,s,n,o,a,l){return[t,e,i,r,s,n,o,a,l]}const gIe=Mg();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:gIe,clone:mIe,create:Mg,fromValues:yIe},Symbol.toStringTag,{value:"Module"}));const Qg=Mg();function vIe(t,e,i){const[r,s]=t,[n,o]=e,[a,l]=i;h0(Qg,r,n,a,s,o,l,1,1,1);const c=xT(Qg),d=4*c/(qn(t,e)+qn(e,i)+qn(i,t));if(!isFinite(d)||Math.abs(d)<1e-8)return null;const h=r**2+s**2,f=n**2+o**2,m=a**2+l**2;h0(Qg,h,f,m,s,o,l,1,1,1);const y=xT(Qg);return h0(Qg,h,f,m,r,n,a,1,1,1),[y/c*.5,xT(Qg)/c*-.5]}function Cre(t,e){const[i,r]=e.c,s=vIe(t,r,i),n=s==null,o=s??Vd([],t,i,.5),[a,l]=t,[c,d]=r,[h,f]=i,[m,y]=o,v=a-m,b=l-y,w=Math.sqrt(v*v+b*b),x=xy(l-y,a-m),S=xy(d-y,c-m);let $=xy(f-y,h-m);return(S-x)*($-S)<0&&($+=2*Math.sign(x-$)*Math.PI),new $re(m,y,w,x,$,n)}function Sht(t,e,i){const r=_T(t,i/2),s=_T(t,i),n=_T(t,(i+1)/2);return[{c:[s,r]},{c:[[...e.c[0]],n]}]}function $ht(t,e){const[i]=e.c,{cx:r,cy:s,thetaStart:n,thetaEnd:o,radius:a,isInvalid:l}=Cre(t,e);return{a:[i,[r,s],Math.abs(o-n)<Math.PI?1:0,n>o?1:0,l?n:0,a,l?0:1]}}function Iht(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function kht(t){return"curveRings"in t?t.curveRings:t.curvePaths}function KU(t){return"b"in t}function XU(t){return"c"in t}function XA(t){return Array.isArray(t)}function Tht(t){return"a"in t}function Pre(t){return"a"in t&&t.a.length===4}function bIe(t){return"a"in t&&t.a.length===7}function KL(t){return XA(t)?t:KU(t)?t.b[0]:XU(t)?t.c[0]:t.a[0]}function wIe(t){if(KU(t)){const[e,i,r]=t.b;return{b:[[...e],[...i],[...r]]}}if(XU(t)){const[e,i]=t.c;return{c:[[...e],[...i]]}}if(XA(t))return[...t];if(Pre(t)){const[e,i,r,s]=t.a;return{a:[[...e],[...i],r,s]}}if(bIe(t)){const[e,i,r,s,n,o,a]=t.a;return{a:[[...e],[...i],r,s,n,o,a]}}return t}function _Ie(t,e){const[i,r,s,n]=e.a,[o,a]=t,[l,c]=i,[d,h]=r,f=o-d,m=a-h,y=Math.sqrt(f*f+m*m),v=l-d,b=c-h,w=Math.sqrt(v*v+b*b),x=y===0||w===0||!sie(y,w),S=y,[$,T]=_re(xy(a-h,o-d),Math.atan2(c-h,l-d),s,n);return new $re(d,h,S,$,T,x)}function Eht(t,e,i){const{cx:r,cy:s,thetaStart:n,thetaEnd:o}=t,[a,l,c,d]=e.a,h=n*(1-i)+o*i;return[{a:[_T(t,i),[r,s],Math.abs(h-n)<Math.PI?1:0,d]},{a:[[...a],[r,s],Math.abs(o-h)<Math.PI?1:0,d]}]}let xIe=class{constructor(e,i,r,s,n,o,a,l,c){this.cx=e,this.cy=i,this.a=r,this.b=s,this.cosR=n,this.sinR=o,this.u1=a,this.u2=l,this.isInvalid=c}};function QU(t,e){const[i,r,s,n,o,a,l]=e.a,[c,d]=t,[h,f]=i,[m,y]=r,v=a*l,b=Math.cos(o),w=Math.sin(o),[x,S]=_re(xy(1/v*(d-y)*b-1/v*(c-m)*w,1/a*(d-y)*w+1/a*(c-m)*b),Math.atan2(1/v*(f-y)*b-1/v*(h-m)*w,1/a*(f-y)*w+1/a*(h-m)*b),s,n);return new xIe(m,y,a,v,b,w,x,S,a===0||v===0)}function y$(t,e){const{a:i,b:r,cosR:s,sinR:n,cx:o,cy:a}=t,l=Math.cos(e),c=Math.sin(e);return[i*l*s-r*c*n+o,i*l*n+r*c*s+a]}function Fv(t,e){const{u1:i,u2:r}=t;return y$(t,i*(1-e)+r*e)}function Cht(t,e,i){if(i<0||i>1)return[];if(i===0||i===1)return[wIe(e)];const[r,[s,n],o,a,l,c,d]=e.a,{u1:h,u2:f}=t,m=h*(1-i)+f*i;return[{a:[[...Fv(t,i)],[s,n],Math.abs(m-h)<Math.PI?1:0,a,l,c,d]},{a:[[...r],[s,n],Math.abs(f-m)<Math.PI?1:0,a,l,c,d]}]}function Pht(t,e){const{a:i,b:r,cosR:s,sinR:n,u1:o,u2:a}=t,l=Math.PI/6,c=xre(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],v=>{const b=Math.cos(v),w=Math.sin(v),[x,S]=y$(t,v);return[x,S,-i*s*w-r*n*b,-i*n*w+r*s*b,-i*s*b+r*n*w,-i*n*b-r*s*w]}),d=KA(o,a),h=new Set(c.map(v=>_2(d,v)).filter(v=>v>d.min&&v<d.max));h.add(o),h.add(a);let f,m,y=1/0;for(const v of h){const b=y$(t,v),[w,x]=b,S=e[0]-w,$=e[1]-x,T=S*S+$*$;T<y&&(f=(v-o)/(a-o),m=b,y=T)}return{t:f,curvePoint:m,distance:Math.sqrt(y)}}function SIe(t,e,i){const r=QU(e,i),{a:s,b:n,u1:o,u2:a,cosR:l,sinR:c,isInvalid:d}=r,h=i.a[0];if(Bs(t,e),Bs(t,h),d)return t;const f=Math.atan2(-n*c,s*l),m=f+Math.PI,y=Math.atan2(n*l,s*c),v=y+Math.PI,b=KA(o,a);for(const w of[f,m,y,v].map(x=>_2(b,x)))w>b.min&&w<b.max&&Bs(t,y$(r,w));return t}function Aht(t,e,i){const[r,s,n,o,a,l,c]=e.a,d=QU(t,e),{u1:h,u2:f,isInvalid:m}=d,y=f-h;if(m)return Math.sqrt(qn(t,r));const v=14,b=[0,0];let w=0,x=[Fv(d,0),Fv(d,.25),Fv(d,.5),Fv(d,.75),Fv(d,1)];for(let S=0;S<v;S++){const $=x.length-1,T=y/(2*$),C=[];for(let N=0;N<$;N++)C.push(x[N]),C.push(y$(d,h+(2*N+1)*T));C.push(x[x.length-1]),x=C,w=0;let L=0;for(let N=1;N<x.length;N++){const D=x[N-1],F=x[N];if(w+=Math.sqrt(qn(D,F)),N>1){const W=x[N-2],Z=j2e(b,W,D,s,F);L+=Z?Math.sqrt(qn(D,Z)):Math.abs(F[0]-D[0])+Math.abs(F[1]-D[1])}else L+=w}if(L-w<i)return w}return w}const Aq=Mg(),fI=Mg(),Lq=Mg(),Bh=Mg();function Lht(t,e,i){const[r,s,n,o,a,l,c]=e.a,d=QU(t,e),{cosR:h,sinR:f,a:m,b:y,cx:v,cy:b}=d,w=wT([0,0],r,i),x=wT([0,0],s,i),S=i[0]*i[4]<0?1-o:o;{const $=m*m*f*f+y*y*h*h,T=2*(y*y-m*m)*f*h,C=m*m*h*h+y*y*f*f,L=-2*$*v-T*b,N=-T*v-2*C*b;h0(Aq,$,T/2,L/2,T/2,C,N/2,L/2,N/2,$*v*v+T*v*b+C*b*b-m*m*y*y)}if(Tre(fI,i),fI==null){const $=wT([0,0],t,i);return{a:[w,x,n,o,xy(w[1],w[0]),Math.sqrt(qn(w,$))/2,0]}}kre(Lq,fI),m$(Bh,m$(Bh,Lq,Aq),fI);{const $=Bh[0],T=2*Bh[1],C=Bh[4],L=2*Bh[2],N=2*Bh[5],D=T*T-4*$*C,F=2*($*N*N+C*L*L-T*L*N+D*Bh[8]),W=Math.sqrt(($-C)**2+T*T),Z=-Math.sqrt(F*($+C+W))/D,V=-Math.sqrt(F*($+C-W))/D;return{a:[w,x,n,S,.5*xy(-T,C-$),Z,V/Z]}}}function $Ie(t,e,i){if(XA(i))return Bs(t,e),Bs(t,i),t;if(KU(i))return q2e(t,e,i);if(XU(i)){const r=Cre(e,i);return Pq(t,r)}if(Pre(i)){const r=_Ie(e,i);return Pq(t,r)}return SIe(t,e,i)}function Are(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Lre(t){return t.points!==void 0}function Ore(t){return t.x!==void 0&&t.y!==void 0}function Rre(t){return t.paths!==void 0}function Nre(t){return t.rings!==void 0}function Dre(t){function e(i,r){return i==null?r:r==null?i:t(i,r)}return e}const qp=Dre(Math.min),Gp=Dre(Math.max);function e6(t,e){return Rre(e)?Lw(t,e.curvePaths??e.paths,!1,!1)??t:Nre(e)?Lw(t,e.curveRings??e.rings,!1,!1)??t:Lre(e)?t6(t,e.points,!1,!1,!1,!1):Are(e)?zre(t,e):(Ore(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function x2(t){let e,i,r,s;for(t.reset(),e=r=1/0,i=s=-1/0;t.nextPath();){const n=Fre(t);e=Math.min(n[0],e),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return zr([e,r,i,s])}function Fre(t){let e,i,r,s;for(e=r=1/0,i=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),i=Math.max(t.x,i),s=Math.max(t.y,s);return zr([e,r,i,s])}function Oht(t,e){return Rre(e)?Lw(t,e.curvePaths??e.paths,!0,!1)??t:Nre(e)?Lw(t,e.curveRings??e.rings,!0,!1)??t:Lre(e)?t6(t,e.points,!0,!1,!0,!1):Are(e)?zre(t,e,!0,!1,!0,!1):(Ore(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Lw(t,e,i,r){const s=i?3:2;if(!e.length||!e[0].length)return null;let n,o,a,l,[c,d]=KL(e[0][0]),h=c,f=d;for(let m=0;m<e.length;m++){const y=e[m];for(let v=0;v<y.length;v++){const b=KL(y[v]),[w,x]=b;if(c=qp(c,w),d=qp(d,x),h=Gp(h,w),f=Gp(f,x),i&&b.length>2){const C=b[2];n=qp(n,C),o=Gp(o,C)}if(r&&b.length>s){const C=b[s];a=qp(n,C),l=Gp(o,C)}const S=y[v];if(XA(S)||v<1)continue;const $=KL(y[v-1]),T=HA(c,d,h,f);[c,d,h,f]=$Ie(T,$,S)}}return i?r?(t[0]=c,t[1]=d,t[2]=n,t[3]=a,t[4]=h,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=d,t[2]=n,t[3]=h,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=d,t[2]=a,t[3]=h,t[4]=f,t[5]=l,t.length=6,t):(t[0]=c,t[1]=d,t[2]=h,t[3]=f,t.length=4,t)}function zre(t,e,i,r,s,n){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let d=e.zmin,h=e.zmax,f=e.mmin,m=e.mmax;return s?(d=d||0,h=h||0,n?(f=f||0,m=m||0,t[0]=o,t[1]=l,t[2]=d,t[3]=f,t[4]=a,t[5]=c,t[6]=h,t[7]=m,t):(t[0]=o,t[1]=l,t[2]=d,t[3]=a,t[4]=c,t[5]=h,t)):n?(f=f||0,m=m||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=c,t[5]=m,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function t6(t,e,i,r,s,n){const o=i?3:2,a=r&&n,l=i&&s;if(!e.length||!e[0].length)return null;let c,d,h,f,[m,y]=e[0],[v,b]=e[0];for(let w=0;w<e.length;w++){const x=e[w],[S,$]=x;if(m=qp(m,S),y=qp(y,$),v=Gp(v,S),b=Gp(b,$),l&&x.length>2){const T=x[2];c=qp(c,T),d=Gp(d,T)}if(a&&x.length>o){const T=x[o];h=qp(c,T),f=Gp(d,T)}}return s?(c=c||0,d=d||0,n?(h=h||0,f=f||0,t[0]=m,t[1]=y,t[2]=c,t[3]=h,t[4]=v,t[5]=b,t[6]=d,t[7]=f,t):(t[0]=m,t[1]=y,t[2]=c,t[3]=v,t[4]=b,t[5]=d,t)):n?(h=h||0,f=f||0,t[0]=m,t[1]=y,t[2]=h,t[3]=v,t[4]=b,t[5]=f,t):(t[0]=m,t[1]=y,t[2]=v,t[3]=b,t)}function IIe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function kIe(t){return t.points!==void 0}function TIe(t){return t.x!==void 0&&t.y!==void 0}function EIe(t){return t.paths!==void 0}function MIe(t){return t.rings!==void 0}const i6=[];function jre(t,e,i,r){return{xmin:t,ymin:e,xmax:i,ymax:r}}function Vre(t,e,i,r,s,n){return{xmin:t,ymin:e,zmin:i,xmax:r,ymax:s,zmax:n}}function Ure(t,e,i,r,s,n){return{xmin:t,ymin:e,mmin:i,xmax:r,ymax:s,mmax:n}}function Bre(t,e,i,r,s,n,o,a){return{xmin:t,ymin:e,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function r6(t,e=!1,i=!1){return e?i?Bre(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):Vre(t[0],t[1],t[2],t[3],t[4],t[5]):i?Ure(t[0],t[1],t[2],t[3],t[4],t[5]):jre(t[0],t[1],t[2],t[3])}function Rht(t){return t?IIe(t)?t:TIe(t)?CIe(t):MIe(t)?Gre(t):EIe(t)?Hre(t):kIe(t)?qre(t):null:null}function qre(t){const{hasZ:e,hasM:i,points:r}=t,s=t6(i6,r,e??!1,i??!1,e??!1,i??!1);return s?r6(s,e,i):null}function CIe(t){const{x:e,y:i,z:r,m:s}=t,n=s!=null;return r!=null?n?Bre(e,i,r,s,e,i,r,s):Vre(e,i,r,e,i,r):n?Ure(e,i,s,e,i,s):jre(e,i,e,i)}function Gre(t){const{hasZ:e,hasM:i,rings:r,curveRings:s}=t,n=Lw(i6,s??r,e??!1,i??!1);return n?r6(n,e,i):null}function Hre(t){const{hasZ:e,hasM:i,paths:r,curvePaths:s}=t,n=Lw(i6,s??r,e??!1,i??!1);return n?r6(n,e,i):null}function Ow(t,e,i=!1){let{hasM:r,hasZ:s}=t;Array.isArray(e)?e.length!==4||r||s?e.length===3&&i&&!r?(s=!0,r=!1):e.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=r}var jD;function PIe(t){if(!t)return;let{points:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??(e=[]),e?.at(0)?.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=fe.WGS84),{...t,hasM:i,hasZ:r,points:e,spatialReference:s}}let ja=jD=class extends ns{constructor(t){super(PIe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=qre(this);return t?new Pe({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=U(this.points)}clone(){const{points:t,spatialReference:e,hasM:i,hasZ:r}=this;return new jD({points:U(t),spatialReference:e.clone(),hasM:i,hasZ:r})}addPoint(t){return Ow(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=e[2],r=3),this.hasM&&(i.m=e[r]),new Fe(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Fe(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(Ow(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};u([p({readOnly:!0})],ja.prototype,"cache",null),u([p({readOnly:!0})],ja.prototype,"extent",null),u([p({type:[[Number]],json:{write:{isRequired:!0}}})],ja.prototype,"points",void 0),u([oe("points")],ja.prototype,"writePoints",null),ja=jD=u([M("esri.geometry.Multipoint")],ja),ja.prototype.toJSON.isDefaultToJSON=!0;function QA(t){const e=[];for(t.reset();t.nextPath();){const i=[];for(;t.nextPoint();)i.push([t.x,t.y]);e.push(i)}return t.reset(),e}function of(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function Nht(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let s=!1,n=!1;return r.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function e3(t,e){const i=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function Wre(t,e,i){const r=t[0]+i*(e[0]-t[0]),s=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[r,s,t[2]+i*(e[2]-t[2])]:[r,s]}function AIe(t,e,i,r){return Jre(t,e,i[r],i[r+1])}function Jre(t,e,i,r){const[s,n]=e,[o,a]=i,[l,c]=r,d=l-o,h=c-a,f=d*d+h*h,m=(s-o)*d+(n-a)*h,y=Math.min(1,Math.max(0,m/f));return t[0]=o+d*y,t[1]=a+h*y,t}function LIe(t,e,i,r,s,n){let o=i,a=r,l=s-o,c=n-a;if(l!==0||c!==0){const d=((t-o)*l+(e-a)*c)/(l*l+c*c);d>1?(o=s,a=n):d>0&&(o+=l*d,a+=c*d)}return l=t-o,c=e-a,l*l+c*c}function Zre(t,e){return Wre(t,e,.5)}function OIe(t){const e=t.length;let i=0;for(let r=0;r<e-1;++r)i+=e3(t[r],t[r+1]);return i}function Dht(t,e){if(e<=0)return t[0];const i=t.length;let r=0;for(let s=0;s<i-1;++s){const n=e3(t[s],t[s+1]);if(e-r<n){const o=(e-r)/n;return Wre(t[s],t[s+1],o)}r+=n}return t[i-1]}function Yre(t,e=0,i=1){let r=0;const s=t.length;let n=t[0];for(let o=1;o<s;o++){const a=t[o];r+=(a[e]-n[e])*(a[i]+n[i]),n=a}if(Kre(t)){const o=t[0];r+=(o[e]-n[e])*(o[i]+n[i])}return r>=0}function Kre(t){const e=t.length;return e>0&&!d2(t[0],t[e-1])}function Fht(t){"rings"in t&&(RIe(t),NIe(t))}function RIe(t){if("rings"in t)for(const e of t.rings)Kre(e)&&e.push(e[0].slice())}function NIe(t){if(!("rings"in t)||t.rings.length===0||Yre(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function zht(t){return t.type!=="polygon"&&t.type!=="polyline"||DIe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function DIe(t,e){const i=Hn(e);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const o of t){let a=1/0,l=-1/0;for(const d of o){const h=FIe(d[0],r,s);a=Math.min(a,h),l=Math.max(l,h),d[0]=h}const c=l-a;n-c<c&&o.forEach(d=>{d[0]<0&&(d[0]+=n)})}}function FIe(t,e,i){const r=i-e;return t<e?i-(e-t)%r:t>i?e+(t-e)%r:t}function jht(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===r.length&&i.every((s,n)=>s.length===r[n].length)}function Vht(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Xre(t){return jIe(t.rings,t.hasZ??!1)}function zIe(t){const e=Xre(t);if(!e)return null;const{hasZ:i,spatialReference:r}=t,[s,n,o]=e;return isNaN(s)||isNaN(n)||i&&isNaN(o)?null:{x:s,y:n,z:i?o:void 0,spatialReference:r}}function jIe(t,e){if(!t?.length)return null;const i=[],r=[],s=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=t.length;n<o;n++){const a=Qre(t[n],e,s);a&&r.push(a)}if(r.sort((n,o)=>{let a=n[2]-o[2];return a===0&&e&&(a=n[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],e&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||e&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=t[0]&&t[0].length?UIe(t[0],e):null;if(!n)return null;i[0]=n[0],i[1]=n[1],e&&n.length>2&&(i[2]=n[2])}return i}function Qre(t,e,i){let r=0,s=0,n=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,d=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const m=t[f],y=t[(f+1)%t.length],[v,b,w]=m,x=v-l,S=b-c,[$,T,C]=y,L=$-l,N=T-c,D=x*N-L*S;if(o+=D,r+=(x+L)*D,s+=(S+N)*D,e&&m.length>2&&y.length>2){const F=w-d,W=C-d,Z=x*W-L*F;n+=(F+W)*Z,a+=Z}v<i[0]&&(i[0]=v),v>i[1]&&(i[1]=v),b<i[2]&&(i[2]=b),b>i[3]&&(i[3]=b),e&&(w<i[4]&&(i[4]=w),w>i[5]&&(i[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,s/(6*o)+c,o];return e&&(i[4]===i[5]||a===0?(h[3]=(i[4]+i[5])/2,h[4]=0):(h[3]=n/(6*a)+d,h[4]=a)),h}function VIe(t,e){let i=0,r=0,s=0;t.nextPoint();const n=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[d,h]=l,f=d-n,m=h-o,[y,v]=c,b=y-n,w=v-o,x=f*w-b*m;s+=x,i+=(f+b)*x,r+=(m+w)*x,d<e[0]&&(e[0]=d),d>e[1]&&(e[1]=d),h<e[2]&&(e[2]=h),h>e[3]&&(e[3]=h)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+o,s]):null}function UIe(t,e){const i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const d=t[l],h=t[l+1];if(d&&h){i[0]=d[0],i[1]=d[1],r[0]=h[0],r[1]=h[1],e&&d.length>2&&h.length>2&&(i[2]=d[2],r[2]=h[2]);const f=e3(i,r);if(f){s+=f;const m=Zre(d,h);n+=f*m[0],o+=f*m[1],e&&m.length>2&&(a+=f*m[2])}}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.length?t[0]:null}function ese(t){const{hasZ:e,totalSize:i}=t;if(i===0)return null;const r=[],s=[],n=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Qre(of(t),t.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],e&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||e&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?BIe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function BIe(t){const{hasZ:e}=t,i=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,d=t.z;for(;t.nextPoint();){const h=t.x,f=t.y,m=t.z;i[0]=l,i[1]=c,r[0]=h,r[1]=f,e&&(i[2]=d,r[2]=m);const y=e3(i,r);if(y){s+=y;const v=Zre(i,r);n+=y*v[0],o+=y*v[1],e&&v.length>2&&(a+=y*v[2])}l=h,c=f,d=m}}return s>0?e?[n/s,o/s,a/s]:[n/s,o/s]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const qIe=1e-6;function GIe(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<qIe){const s=ese(t);return s?[s[0],s[1]]:null}const i=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)WIe(i,r,t);return i[0]*=1/e,i[1]*=1/e,i[0]+=r[0],i[1]+=r[1],i}const HIe=1/3;function WIe(t,e,i){if(!t||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,o=i.x-r,a=i.y-s,l=0,c=0;for(;i.nextPoint();)l=i.x-r,c=i.y-s,n=.5*HIe*(l*a-c*o),t[0]+=n*(o+l),t[1]+=n*(a+c),o=l,a=c;const d=i.getCurrentRingArea(),h=[r,s];return h[0]-=e[0],h[1]-=e[1],h[0]*=d,h[1]*=d,t[0]+=h[0],t[1]+=h[1],t}var ST;function Oq(t){return!Array.isArray(t[0])}function JIe(t){return typeof t[0]?.[0]=="number"}function ZIe(t){if(!t)return;let{rings:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??(e=[]),JIe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=fe.WGS84),{...t,hasM:i,hasZ:r,rings:e,spatialReference:s}}let vi=ST=class extends ns{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:i}=t;let r=!1,s=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new ST(n)}constructor(t){super(ZIe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){gD(X.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=zIe(this);return t?Fe.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=U(t)}get extent(){const t=Gre(this),{spatialReference:e}=this;return t?new Pe({...t,spatialReference:e}):null}get isSelfIntersecting(){return gD(X.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),i2e(this.rings)}writeRings(t,e){e.rings=U(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(Oq(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new ST;return t.spatialReference=this.spatialReference,t.rings=U(this.rings),t.curveRings=U(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,i=t.spatialReference;if(e!=null!=(i!=null)||e!=null&&i!=null&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const r=([s,n,o,a],[l,c,d,h])=>s===l&&n===c&&(o==null&&d==null||o===d)&&(a==null&&h==null||a===h);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=t.rings[s];if(!d2(n,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=qA(t,this.spatialReference);return HU(this,e??t)}isClockwise(t){const e=Oq(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t;return Yre(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new Fe(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Fe(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Fe(i[0],i[1],i[2],i[3],this.spatialReference):new Fe(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Ow(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Fe(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new Fe(s,i));return this.notifyChange("rings"),r}setPoint(t,e,i){return this._validateInputs(t,e)?(Ow(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([p({readOnly:!0})],vi.prototype,"cache",null),u([p({readOnly:!0})],vi.prototype,"centroid",null),u([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],vi.prototype,"curveRings",void 0),u([oe("curveRings")],vi.prototype,"writeCurveRings",null),u([p({readOnly:!0})],vi.prototype,"extent",null),u([p({readOnly:!0})],vi.prototype,"isSelfIntersecting",null),u([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],vi.prototype,"rings",void 0),u([oe("rings")],vi.prototype,"writeRings",null),vi=ST=u([M("esri.geometry.Polygon")],vi),vi.prototype.toJSON.isDefaultToJSON=!0;var VD;function YIe(t){return!Array.isArray(t[0])}function KIe(t){return typeof t[0]?.[0]=="number"}function XIe(t){if(!t)return;let{paths:e,hasM:i,hasZ:r,spatialReference:s}=t;switch(e??(e=[]),KIe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return s??(s=fe.WGS84),{...t,hasM:i,hasZ:r,paths:e,spatialReference:s}}let rr=VD=class extends ns{constructor(t){super(XIe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=U(t)}get extent(){const t=Hre(this),{spatialReference:e}=this;return t?new Pe({...t,spatialReference:e}):null}writePaths(t,e){e.paths=U(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(YIe(t)){const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s].toArray();e[i]=r}else e[i]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new VD;return t.spatialReference=this.spatialReference,t.paths=U(this.paths),t.curvePaths=U(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],r=this.hasZ,s=this.hasM;return r&&!s?new Fe(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Fe(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Fe(i[0],i[1],i[2],i[3],this.spatialReference):new Fe(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(Ow(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,r=e.map(s=>new Fe(s,i));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Fe(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(Ow(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(i&&(e<0||e>r.length)||!i&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};u([p({readOnly:!0})],rr.prototype,"cache",null),u([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],rr.prototype,"curvePaths",void 0),u([oe("curvePaths")],rr.prototype,"writeCurvePaths",null),u([p({readOnly:!0})],rr.prototype,"extent",null),u([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],rr.prototype,"paths",void 0),u([oe("paths")],rr.prototype,"writePaths",null),rr=VD=u([M("esri.geometry.Polyline")],rr),rr.prototype.toJSON.isDefaultToJSON=!0;function Nn(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Sy(t){return t.points!==void 0}function Rw(t){return t.x!==void 0&&t.y!==void 0}function xs(t){return t.paths!==void 0||t.curvePaths!==void 0}function or(t){return t.rings!==void 0||t.curveRings!==void 0}function Nu(t){return t==null?null:t instanceof ns?t:Rw(t)?Fe.fromJSON(t):xs(t)?rr.fromJSON(t):or(t)?vi.fromJSON(t):Sy(t)?ja.fromJSON(t):Nn(t)?Pe.fromJSON(t):null}function Cg(t){return t?Rw(t)?"esriGeometryPoint":xs(t)?"esriGeometryPolyline":or(t)?"esriGeometryPolygon":Nn(t)?"esriGeometryEnvelope":Sy(t)?"esriGeometryMultipoint":null:null}const QIe={esriGeometryPoint:Fe,esriGeometryPolyline:rr,esriGeometryPolygon:vi,esriGeometryEnvelope:Pe,esriGeometryMultipoint:ja,esriGeometryMultiPatch:vi};function eke(t){return t&&QIe[t]||null}const tC=Qr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Rq=Qr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),k_={base:ns,key:"type",typeMap:{extent:Pe,multipoint:ja,point:Fe,polyline:rr,polygon:vi}};function Uht(t){return t.type==="point"}function Bht(t){return t.type==="multipoint"}function qht(t){return t.type==="polygon"}function Ght(t){return t.type==="polyline"}var UD;let rp=UD=class extends Y{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new UD({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:XL}}}}})],rp.prototype,"rotation",void 0),u([Mt("rotation")],rp.prototype,"castRotation",null),u([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:XL}}}}})],rp.prototype,"scale",void 0),u([p({types:k_,json:{read:Nu,write:!0,origins:{"web-scene":{read:Nu,write:{overridePolicy:XL}}}}})],rp.prototype,"targetGeometry",void 0),u([p({type:q$e,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],rp.prototype,"camera",void 0),rp=UD=u([M("esri.Viewpoint")],rp);const us=rp;function XL(){return{enabled:!this.camera}}const t3=t=>{const e=t;class i extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(s,n){let o=this._listenersMap?.get(s);if(!o)return!1;let a=!1;for(const l of o.slice()){const c="deref"in l?l.deref():l;c?c?.call(this,n):a=!0}return a&&(o=o.filter(l=>!("deref"in l)||l.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return Tg(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),Et(()=>{const a=this._listenersMap?.get(s),l=a?.indexOf(n)??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove(),("deref"in n?n.deref():n)?.call(null,a)});return o}hasEventListener(s){const n=this._listenersMap?.get(s);return n!=null&&n.length>0}}return i},s6=t3(class{}),tse=s6,Pg=t3(_e);function n6(t){return(e,i)=>{e[i]=t}}var td;let tke=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},ike=class{constructor(e,i,r,s,n){this.target=e,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const _a=new Nf(()=>new tke,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function Nq(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function QL(t){return t?t instanceof _p?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function eO(t){if(t?.length)return t[0]}function rke(t,e,i,r){const s=Math.min(t.length-i,e.length-r);let n=0;for(;n<s&&t[i+n]===e[r+n];)n++;return n}function ise(t,e,i,r){e&&e.forEach((s,n,o)=>{t.push(s),ise(t,i.call(r,s,n,o),i,r)})}const qh=new Set,Gh=new Set,Hh=new Set,tO=new Map;let ske=0,_p=td=class extends Pg{static ofType(t){if(!t)return td;if(tO.has(t))return tO.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const s=t.typeMap[r].prototype.declaredClass;e?e+=` | ${s}`:e=s}let i=class extends td{};return u([n6({Type:t,ensureType:typeof t=="function"?Mi(t):Ou(t)})],i.prototype,"itemType",void 0),i=u([M(`esri.core.Collection<${e}>`)],i),tO.set(t,i),i}static isCollection(t){return t!=null&&t instanceof td}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new p_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:ske++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof td?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Ue(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,QL(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Et();if(t==="change"){const i=this._chgListeners,r={removed:!1,callback:e};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),Et(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return super.on(t,e)}once(t,e){const i="deref"in e?()=>e.deref():()=>e,r=this.on(t,s=>{i()?.call(null,s),r.remove()});return r}add(t,e){if(Ue(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(Ue(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(e);return this._splice(i,0,QL(t)),this._emitAfterChanges(1),this}at(t){if(Ue(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ue(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ue(this._observable),this._createNewInstance({items:this._items.map(U)})}concat(...t){Ue(this._observable);const e=t.map(QL);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ue(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)t.call(e,i[s],s,i);this._emitAfterChanges(2)}destroyAll(){this.drain(Nq)}destroyMany(t){const e=this.removeMany(t);return e.forEach(Nq),e}every(t,e){return Ue(this._observable),this._items.every(t,e)}filter(t,e){Ue(this._observable);const i=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:i})}find(t,e){return Ue(this._observable),this._items.find(t,e)}findIndex(t,e){return Ue(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ue(this._observable);const i=[];return ise(i,this,t,e),new td(i)}forEach(t,e){return Ue(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ue(this._observable),this._items[t]}getNextIndex(t){Ue(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ue(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ue(this._observable),this._items.indexOf(t,e)}join(t=","){return Ue(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ue(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ue(this._observable);const i=this._items.map(t,e);return new td({items:i})}reorder(t,e=this.length-1){Ue(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(4))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(Ue(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=eO(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return Ue(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){Ue(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ue(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ue(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ue(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=eO(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(Ue(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof td?t.toArray():t,i=this._items,r=[],s=e.length;for(let n=0;n<s;n++){const o=e[n],a=i.indexOf(o);if(a>-1){const l=1+rke(e,i,n+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),n+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(Ue(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(Ue(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=eO(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return Ue(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ue(this._observable),this._items.some(t,e)}sort(t){if(Ue(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,i)=>e===i?0:e<i?-1:1){const e=this.length-1;for(let i=0;i<e;i++)if(t(this.items[i],this.items[i+1])>0)return!0;return!1}splice(t,e,...i){Ue(this._observable),arguments.length===1&&(e=this.length),e??(e=0);const r=(e?2:0)|(i.length?1:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(t,e,i)||[];return this._emitAfterChanges(r),s}toArray(){return Ue(this._observable),this._items.slice()}toJSON(t){return Ue(this._observable),this.toArray().map(e=>c$(e)?e.toJSON(t):e)}toLocaleString(){return Ue(this._observable),this._items.toLocaleString()}toString(){return Ue(this._observable),this._items.toString()}unshift(...t){return Ue(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const r=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=y_(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=_a.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,n),t+=1,l-=1,c-=1);_a.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=_a.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);_a.release(a)}}if(i?.length){if(s){const d=[];for(const h of i){const f=s.ensureType(h);f==null&&h!=null||d.push(f)}i=d}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(a||l){const d=_a.acquire();d.target=this,d.cancellable=!0;const h=_a.acquire();h.target=this,h.cancellable=!1;for(const f of i)a?(d.reset(f),this.emit("before-add",d),d.defaultPrevented||(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(h.reset(f),this.emit("after-add",h)))):(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),h.reset(f),this.emit("after-add",h));_a.release(h),_a.release(d)}else{if(c)for(const d of i)r.push(d);else r.splice(t,0,...i);this._set("length",r.length)}}if((i?.length||o?.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new ike(this,i,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=_a.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,_a.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=_a.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),_a.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;qh.clear(),Gh.clear(),Hh.clear();for(const{added:l,removed:c}of i){if(l)if(Hh.size===0&&Gh.size===0)for(const d of l)qh.add(d);else for(const d of l)Gh.has(d)?(Hh.add(d),Gh.delete(d)):Hh.has(d)||qh.add(d);if(c)if(Hh.size===0&&qh.size===0)for(const d of c)Gh.add(d);else for(const d of c)qh.has(d)?qh.delete(d):(Hh.delete(d),Gh.add(d))}const r=Fn.acquire();qh.forEach(l=>{r.push(l)});const s=Fn.acquire();Gh.forEach(l=>{s.push(l)});const n=this._items,o=e.items,a=Fn.acquire();if(Hh.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||s.length||a.length)){const l={target:this,added:r,removed:s,moved:a},c=e.listeners.length;for(let d=0;d<c;d++){const h=e.listeners[d];h.removed||h.callback.call(this,l)}}Fn.release(r),Fn.release(s),Fn.release(a)}qh.clear(),Gh.clear(),Hh.clear()}};u([p()],_p.prototype,"_updating",void 0),u([p()],_p.prototype,"length",void 0),u([p()],_p.prototype,"items",null),u([p({readOnly:!0})],_p.prototype,"updating",null),_p=td=u([M("esri.core.Collection")],_p);const ue=_p;let ra=class extends ue{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(Ate(()=>this._refresh(),lr))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let i=0;for(const r of e)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(e){return new ue(e)}_processCollection(e,i){if(!i)return e;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,e);n>=0?n!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)e=this._processCollection(e,o);else e=this._processCollection(e,n)}}return e}};u([p()],ra.prototype,"getCollections",void 0),u([p()],ra.prototype,"getChildrenFunction",void 0),u([p()],ra.prototype,"itemFilterFunction",void 0),ra=u([M("esri.core.CollectionFlattener")],ra);let g$=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._observable=new p_,this._items=new Set}get length(){return Ue(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return Ue(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const i=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ue(this._observable),yield*this._items}};const rse=new FinalizationRegistry(t=>{t.close()});function nke(t,e){rse.register(t,e,e)}function oke(t){rse.unregister(t)}function sse(t,e){return new Proxy({},{get:(i,r,s)=>(...n)=>{let o,a;const l=n[n.length-1];return ake(l)&&(o=l.signal,a=l.transferList,n.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),n,{transferList:a,signal:o})}})}function ake(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const lke={statsWorker:()=>K(()=>import("./statsWorker-B0v5Il_L.js"),__vite__mapDeps([0,1,2,3])),geometryEngineWorker:()=>K(()=>import("./geometryEngineWorker-UDzsvDvQ.js"),__vite__mapDeps([4,5,6,7])),arcadeGeometryOperatorsWorker:()=>K(()=>import("./operatorsWorker-DD887c_0.js"),[]),CSVSourceWorker:()=>K(()=>import("./CSVSourceWorker-BCtTcaol.js"),__vite__mapDeps([8,9,10,11,12,13,14,15,16,17,18,19,1,2,3,20,21,22,23,24])),EdgeProcessingWorker:()=>K(()=>import("./EdgeProcessingWorker-OKSCBPmI.js"),__vite__mapDeps([25,26,27,28,29,30,31,32,33])),ElevationSamplerWorker:()=>K(()=>import("./ElevationSamplerWorker-ttRDDbpp.js"),__vite__mapDeps([34,12,35,36,37,38,39,40,41,28,42])),FeatureServiceSnappingSourceWorker:()=>K(()=>import("./FeatureServiceSnappingSourceWorker-DiG4UQ4K.js"),__vite__mapDeps([43,10,11,12,13,14,15,16,17,18,19,1,2,3,20,21,44])),GaussianSplatSortWorker:()=>K(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>K(()=>import("./GeoJSONSourceWorker-4V5sCvCU.js"),__vite__mapDeps([45,10,11,12,13,14,15,16,17,18,19,1,2,3,20,21,46,9,24,47])),LercWorker:()=>K(()=>import("./LercWorker-BMhX-wkS.js"),[]),MemorySourceWorker:()=>K(()=>import("./MemorySourceWorker-Ba8qOFcM.js"),__vite__mapDeps([48,49,10,11,12,13,14,15,16,17,18,19,1,2,3,20,21,24,47,9])),PBFDecoderWorker:()=>K(()=>import("./PBFDecoderWorker-Bt8Lr_fT.js"),__vite__mapDeps([50,51])),FeaturePipelineWorker:()=>K(()=>import("./FeaturePipelineWorker-B967-xTt.js"),__vite__mapDeps([52,53,54,55,56,57,14,13,58,59,60,61,62,63,15,16,17,18,19,1,2,3,20,21,64,65,66,67,68,69,70,71,72,46,9,24,47,73,74])),PointCloudWorker:()=>K(()=>import("./PointCloudWorker-BYHAhFBd.js"),__vite__mapDeps([75,76,77,78,79,80,81,37,38,82,83])),RasterWorker:()=>K(()=>import("./RasterWorker-C9xaP8A2.js"),__vite__mapDeps([84,85,86,7,87,88,89,90,91,92])),SceneLayerSnappingSourceWorker:()=>K(()=>import("./SceneLayerSnappingSourceWorker-DiQXAemL.js"),__vite__mapDeps([93,94,95,83,77,96,97,82,28,30,31,32,27,29,33])),SceneLayerWorker:()=>K(()=>import("./SceneLayerWorker-mYnvBe2K.js"),__vite__mapDeps([98,35,41,99,39])),WFSSourceWorker:()=>K(()=>import("./WFSSourceWorker-CYvNQC_F.js"),__vite__mapDeps([100,10,11,12,13,14,15,16,17,18,19,1,2,3,20,21,46,9,47,101])),WorkerTileHandler:()=>K(()=>import("./WorkerTileHandler-DAzq4grH.js"),__vite__mapDeps([102,103,61,104,105])),Lyr3DWorker:()=>K(()=>import("./Lyr3DWorker-jNlhhziF.js"),[]),Feature3DPipelineWorker:()=>K(()=>import("./Feature3DPipelineWorker-CgH9fb6m.js"),__vite__mapDeps([106,16,17,18,13,14,19,1,2,3,20,21,107,40,35,99,39,108,78,109,32,28,110,95,83,77,94,111,112,97,82,81,76,37,38,27,29,113,114,115,116,117,118,119,120,121,122,12,123])),TextureCompressionWorker:()=>K(()=>import("./TextureCompressionWorker-Dgr_RALb.js"),[]),FlowWorker:()=>K(()=>import("./FlowWorker-C03Qvkz5.js"),__vite__mapDeps([124,92])),ParquetSourceWorker:()=>K(()=>import("./ParquetSourceWorker-H-cr-MHH.js"),__vite__mapDeps([125,63,16,17,18,13,14,19,1,2,3,20,21,24,126,23,66,56,65,64])),PanoramicMeshWorker:()=>K(()=>import("./PanoramicMeshWorker-t5K-_GTW.js"),__vite__mapDeps([127,85]))},nse="worker:port-closed",ch={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let cke=0;function ose(){return cke++}function uke(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function iC(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function ase(t,e,i,r){if(e.type===ch.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==ch.INVOKE&&e.type!==ch.RESPONSE)return void t.postMessage(e);let s;uke(i)?(s=Dq(i.transferList),e.data=i.result):(s=Dq(r),e.data=i),s?t.postMessage(e,s):t.postMessage(e)}function v$(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Dq(t){if(!t?.length)return null;if(H("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!dke(i));return e.length?e:null}function dke(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function Yht(t){try{return await t}catch(e){const i=e?.name===nse;if(!(Yi(e)||i))throw e;return}}const{CLOSE:mI,ABORT:BD,INVOKE:Fq,RESPONSE:r1,OPEN_PORT:zq,ON:jq}=ch,hke=2;let pke=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===BD?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Va;let Nw=(Va=class{static connect(e,i){const r=new MessageChannel;let s;s=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const n=new Va(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),Va.clients.set(n,s),r.port2}static loadWorker(e){const i=lke[e];return i?i():Promise.resolve(null)}constructor(e,i,r,s){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new pke(n=>this._onInvokeMessage(n)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:mI}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=r?.signal,n=r?.transferList;if(!this._port)return Promise.reject(new R(nse,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=ose();return new Promise((a,l)=>{if(Xr(s))return this._processWork(),void l(jt());const c=as(s,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),_i(h.abortHandle),this._post({type:BD,jobId:o}),l(jt()))}),d={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,d),this._post({type:Fq,jobId:o,methodName:e,abortable:s!=null},i,n)})}createInvokeProxy(e){return sse(this,e)}on(e,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:jq,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),Et(()=>{r.port1.postMessage({type:mI}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:zq,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=hke)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=e;this.apply(i,r,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{_i(e.abortHandle),e.reject(jt(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,i){const r=v$(e);if(r)switch(r.type){case r1:this._onResponseMessage(r);break;case Fq:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case BD:this._onAbortMessage(r);break;case mI:this._onCloseMessage();break;case zq:this._onOpenPortMessage(r);break;case jq:this._onOnMessage(r)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);this._invokeQueue.push(e),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Va.clients.get(this)===e&&e.destroy(),Va.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s=[],abortable:n}=e,o=n?new AbortController:null,a=this._inJobs;let l,c=this._client,d=c[i];try{if(!d&&i&&i.includes(".")){const h=i.split(".");for(let f=0;f<h.length-1;f++)c=c[h[f]],d=c[h[f+1]]}if(typeof d!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=d.apply(c,s)}catch(h){return void this._post({type:r1,jobId:r,error:iC(h)})}yn(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:r1,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),Yi(h)||this._post({type:r1,jobId:r,error:iC(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:r1,jobId:r},l)}_onOpenPortMessage(e){new Va(e.port,{client:this._client})}_onOnMessage(e){const{port:i}=e,r=this._client.on(e.eventType,n=>{i.postMessage(n)}),s=ah(e.port,"message",n=>{v$(n)?.type===mI&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),_i(o.abortHandle),r?o.reject(R.fromJSON(JSON.parse(r))):o.resolve(s)}_post(e,i,r){return ase(this._port,e,i,r)}},Va.kernelInfo={buildDate:Cie,fullVersion:OU,revision:Pie},Va.clients=new Map,Va),fke=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new g$,this._ongoingLowPriorityJobsQueue=new g$}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,i){return new Promise((r,s)=>{let n=!0;const o=a=>{Gt(i.signal),n&&(n=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];yn(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new Nw(c,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new Nw(l,i,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a?.invoke(e,i,r))}return s}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(jt(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(jt(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,oke(this)}invoke(e,i,r){return this.apply(e,[i],r)}apply(e,i,r){const s=Is();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a?.jobAdded())}return s.promise}createInvokeProxy(e){return sse(this,e)}on(e,i){return Promise.all(this._clientPromises).then(()=>Tg(this._clients.map(r=>r.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r===0&&e(i)})})}get test(){}};const mke={async request(t,e){const i=t.options,r=i.responseType;i.signal=e?.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&SD(t.url)?.after?r:"array-buffer";const s=await xe(t.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}};let oS;const yke=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,qD=globalThis.document?.documentElement;function lse(){const t=qD?.getAttribute("lang"),e=globalThis.navigator?.language;return yke??t??e??"en"}function ko(){return oS===void 0&&(oS=lse()),oS}const gke=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function o6(t=ko()){return use(t)?.language}function cse(t=ko()){const e=use(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function use(t=ko()){return gke.exec(t)?.groups}const $T=[];function a6(t){return $T.push(t),Et(()=>{$T.splice($T.indexOf(t),1)})}const IT=[];function l6(t){return IT.push(t),Et(()=>IT.splice(IT.indexOf(t),1))}function Vq(){const t=lse();oS!==t&&([...IT].forEach(e=>e(t)),oS=t,[...$T].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",Vq),qD&&new MutationObserver(()=>{Vq()}).observe(qD,{attributeFilter:["lang"]});const ga="system",vh="unknown",Du="UTC",vke=Intl.DateTimeFormat().resolvedOptions().timeZone,Uq=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Ag extends Error{}class bke extends Ag{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class wke extends Ag{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class _ke extends Ag{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Wb extends Ag{}class dse extends Ag{constructor(e){super(`Invalid unit ${e}`)}}class on extends Ag{}class Wh extends Ag{constructor(){super("Zone is an abstract class")}}const $e="numeric",ec="short",ua="long",rC={year:$e,month:$e,day:$e},hse={year:$e,month:ec,day:$e},xke={year:$e,month:ec,day:$e,weekday:ec},pse={year:$e,month:ua,day:$e},fse={year:$e,month:ua,day:$e,weekday:ua},mse={hour:$e,minute:$e},yse={hour:$e,minute:$e,second:$e},gse={hour:$e,minute:$e,second:$e,timeZoneName:ec},vse={hour:$e,minute:$e,second:$e,timeZoneName:ua},bse={hour:$e,minute:$e,hourCycle:"h23"},wse={hour:$e,minute:$e,second:$e,hourCycle:"h23"},_se={hour:$e,minute:$e,second:$e,hourCycle:"h23",timeZoneName:ec},xse={hour:$e,minute:$e,second:$e,hourCycle:"h23",timeZoneName:ua},Sse={year:$e,month:$e,day:$e,hour:$e,minute:$e},$se={year:$e,month:$e,day:$e,hour:$e,minute:$e,second:$e},Ise={year:$e,month:ec,day:$e,hour:$e,minute:$e},kse={year:$e,month:ec,day:$e,hour:$e,minute:$e,second:$e},Ske={year:$e,month:ec,day:$e,weekday:ec,hour:$e,minute:$e},Tse={year:$e,month:ua,day:$e,hour:$e,minute:$e,timeZoneName:ec},Ese={year:$e,month:ua,day:$e,hour:$e,minute:$e,second:$e,timeZoneName:ec},Mse={year:$e,month:ua,day:$e,weekday:ua,hour:$e,minute:$e,timeZoneName:ua},Cse={year:$e,month:ua,day:$e,weekday:ua,hour:$e,minute:$e,second:$e,timeZoneName:ua};class Lg{get type(){throw new Wh}get name(){throw new Wh}get ianaName(){return this.name}get isUniversal(){throw new Wh}offsetName(e,i){throw new Wh}formatOffset(e,i){throw new Wh}offset(e){throw new Wh}equals(e){throw new Wh}get isValid(){throw new Wh}}let iO=null;class i3 extends Lg{static get instance(){return iO===null&&(iO=new i3),iO}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Vse(e,i,r)}formatOffset(e,i){return aS(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const GD=new Map;function $ke(t){let e=GD.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),GD.set(t,e)),e}const Ike={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function kke(t,e){const i=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,l,c,d]=r;return[o,s,n,a,l,c,d]}function Tke(t,e){const i=t.formatToParts(e),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=Ike[n];n==="era"?r[a]=o:st(a)||(r[a]=parseInt(o,10))}return r}const rO=new Map;class Mo extends Lg{static create(e){let i=rO.get(e);return i===void 0&&rO.set(e,i=new Mo(e)),i}static resetCache(){rO.clear(),GD.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Mo.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:r}){return Vse(e,i,r,this.name)}formatOffset(e,i){return aS(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const r=$ke(this.name);let[s,n,o,a,l,c,d]=r.formatToParts?Tke(r,i):kke(r,i);a==="BC"&&(s=-Math.abs(s)+1);const f=s3({year:s,month:n,day:o,hour:l===24?0:l,minute:c,second:d,millisecond:0});let m=+i;const y=m%1e3;return m-=y>=0?y:1e3+y,(f-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Bq={};function Eke(t,e={}){const i=JSON.stringify([t,e]);let r=Bq[i];return r||(r=new Intl.ListFormat(t,e),Bq[i]=r),r}const HD=new Map;function WD(t,e={}){const i=JSON.stringify([t,e]);let r=HD.get(i);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),HD.set(i,r)),r}const JD=new Map;function Mke(t,e={}){const i=JSON.stringify([t,e]);let r=JD.get(i);return r===void 0&&(r=new Intl.NumberFormat(t,e),JD.set(i,r)),r}const ZD=new Map;function Cke(t,e={}){const{base:i,...r}=e,s=JSON.stringify([t,r]);let n=ZD.get(s);return n===void 0&&(n=new Intl.RelativeTimeFormat(t,e),ZD.set(s,n)),n}let B1=null;function Pke(){return B1||(B1=new Intl.DateTimeFormat().resolvedOptions().locale,B1)}const YD=new Map;function Pse(t){let e=YD.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),YD.set(t,e)),e}const KD=new Map;function Ake(t){let e=KD.get(t);if(!e){const i=new Intl.Locale(t);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...Ase,...e}),KD.set(t,e)}return e}function Lke(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let r,s;try{r=WD(t).resolvedOptions(),s=t}catch{const l=t.substring(0,i);r=WD(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function Oke(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function Rke(t){const e=[];for(let i=1;i<=12;i++){const r=ke.utc(2009,i,1);e.push(t(r))}return e}function Nke(t){const e=[];for(let i=1;i<=7;i++){const r=ke.utc(2016,11,13+i);e.push(t(r))}return e}function yI(t,e,i,r){const s=t.listingMode();return s==="error"?null:s==="en"?i(e):r(e)}function Dke(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Pse(t.locale).numberingSystem==="latn"}class Fke{constructor(e,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Mke(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):p6(e,3);return Yr(i,this.padTo)}}}class zke{constructor(e,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Mo.create(a).valid?(s=a,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=WD(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class jke{constructor(e,i,r){this.opts={style:"long",...r},!i&&zse()&&(this.rtf=Cke(e,r))}format(e,i){return this.rtf?this.rtf.format(e,i):lTe(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const Ase={firstDay:1,minimalDays:4,weekend:[6,7]};class ri{static fromOpts(e){return ri.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,r,s,n=!1){const o=e||Sr.defaultLocale,a=o||(n?"en-US":Pke()),l=i||Sr.defaultNumberingSystem,c=r||Sr.defaultOutputCalendar,d=QD(s)||Sr.defaultWeekSettings;return new ri(a,l,c,d,o)}static resetCache(){B1=null,HD.clear(),JD.clear(),ZD.clear(),YD.clear(),KD.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return ri.create(e,i,r,s)}constructor(e,i,r,s,n){const[o,a,l]=Lke(e);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=s,this.intl=Oke(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Dke(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:ri.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,QD(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return yI(this,e,qse,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");i&=!r;const s=i?{month:e,day:"numeric"}:{month:e},n=i?"format":"standalone";if(!this.monthsCache[n][e]){const o=r?a=>this.dtFormatter(a,s).format():a=>this.extract(a,s,"month");this.monthsCache[n][e]=Rke(o)}return this.monthsCache[n][e]})}weekdays(e,i=!1){return yI(this,e,Wse,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Nke(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return yI(this,void 0,()=>Jse,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ke.utc(2016,11,13,9),ke.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return yI(this,e,Zse,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[ke.utc(-40,1,1),ke.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[e]})}extract(e,i,r){const s=this.dtFormatter(e,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new Fke(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new zke(e,this.intl,i)}relFormatter(e={}){return new jke(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Eke(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Pse(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:jse()?Ake(this.locale):Ase}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let sO=null;class jr extends Lg{static get utcInstance(){return sO===null&&(sO=new jr(0)),sO}static instance(e){return e===0?jr.utcInstance:new jr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new jr(n3(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${aS(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${aS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return aS(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Vke extends Lg{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Lp(t,e){if(st(t)||t===null)return e;if(t instanceof Lg)return t;if(Wke(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?i3.instance:i==="utc"||i==="gmt"?jr.utcInstance:jr.parseSpecifier(i)||Mo.create(t)}else return af(t)?jr.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Vke(t)}const c6={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},qq={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Uke=c6.hanidec.replace(/[\[|\]]/g,"").split("");function Bke(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);if(t[i].search(c6.hanidec)!==-1)e+=Uke.indexOf(t[i]);else for(const s in qq){const[n,o]=qq[s];r>=n&&r<=o&&(e+=r-n)}}return parseInt(e,10)}else return e}const XD=new Map;function qke(){XD.clear()}function al({numberingSystem:t},e=""){const i=t||"latn";let r=XD.get(i);r===void 0&&(r=new Map,XD.set(i,r));let s=r.get(e);return s===void 0&&(s=new RegExp(`${c6[i]}${e}`),r.set(e,s)),s}let Gq=()=>Date.now(),Hq="system",Wq=null,Jq=null,Zq=null,Yq=60,Kq,Xq=null;class Sr{static get now(){return Gq}static set now(e){Gq=e}static set defaultZone(e){Hq=e}static get defaultZone(){return Lp(Hq,i3.instance)}static get defaultLocale(){return Wq}static set defaultLocale(e){Wq=e}static get defaultNumberingSystem(){return Jq}static set defaultNumberingSystem(e){Jq=e}static get defaultOutputCalendar(){return Zq}static set defaultOutputCalendar(e){Zq=e}static get defaultWeekSettings(){return Xq}static set defaultWeekSettings(e){Xq=QD(e)}static get twoDigitCutoffYear(){return Yq}static set twoDigitCutoffYear(e){Yq=e%100}static get throwOnInvalid(){return Kq}static set throwOnInvalid(e){Kq=e}static resetCaches(){ri.resetCache(),Mo.resetCache(),ke.resetCache(),qke()}}class Zl{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Lse=[0,31,59,90,120,151,181,212,243,273,304,334],Ose=[0,31,60,91,121,152,182,213,244,274,305,335];function Ha(t,e){return new Zl("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function u6(t,e,i){const r=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function Rse(t,e,i){return i+(S2(t)?Ose:Lse)[e-1]}function Nse(t,e){const i=S2(t)?Ose:Lse,r=i.findIndex(n=>n<e),s=e-i[r];return{month:r+1,day:s}}function d6(t,e){return(t-e+7)%7+1}function sC(t,e=4,i=1){const{year:r,month:s,day:n}=t,o=Rse(r,s,n),a=d6(u6(r,s,n),i);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=b$(c,e,i)):l>b$(r,e,i)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...o3(t)}}function Qq(t,e=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=t,o=d6(u6(r,1,e),i),a=p0(r);let l=s*7+n-o-7+e,c;l<1?(c=r-1,l+=p0(c)):l>a?(c=r+1,l-=p0(r)):c=r;const{month:d,day:h}=Nse(c,l);return{year:c,month:d,day:h,...o3(t)}}function nO(t){const{year:e,month:i,day:r}=t,s=Rse(e,i,r);return{year:e,ordinal:s,...o3(t)}}function eG(t){const{year:e,ordinal:i}=t,{month:r,day:s}=Nse(e,i);return{year:e,month:r,day:s,...o3(t)}}function tG(t,e){if(!st(t.localWeekday)||!st(t.localWeekNumber)||!st(t.localWeekYear)){if(!st(t.weekday)||!st(t.weekNumber)||!st(t.weekYear))throw new Wb("Cannot mix locale-based week fields with ISO-based week fields");return st(t.localWeekday)||(t.weekday=t.localWeekday),st(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),st(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Gke(t,e=4,i=1){const r=r3(t.weekYear),s=Wa(t.weekNumber,1,b$(t.weekYear,e,i)),n=Wa(t.weekday,1,7);return r?s?n?!1:Ha("weekday",t.weekday):Ha("week",t.weekNumber):Ha("weekYear",t.weekYear)}function Hke(t){const e=r3(t.year),i=Wa(t.ordinal,1,p0(t.year));return e?i?!1:Ha("ordinal",t.ordinal):Ha("year",t.year)}function Dse(t){const e=r3(t.year),i=Wa(t.month,1,12),r=Wa(t.day,1,nC(t.year,t.month));return e?i?r?!1:Ha("day",t.day):Ha("month",t.month):Ha("year",t.year)}function Fse(t){const{hour:e,minute:i,second:r,millisecond:s}=t,n=Wa(e,0,23)||e===24&&i===0&&r===0&&s===0,o=Wa(i,0,59),a=Wa(r,0,59),l=Wa(s,0,999);return n?o?a?l?!1:Ha("millisecond",s):Ha("second",r):Ha("minute",i):Ha("hour",e)}function st(t){return typeof t>"u"}function af(t){return typeof t=="number"}function r3(t){return typeof t=="number"&&t%1===0}function Wke(t){return typeof t=="string"}function Jke(t){return Object.prototype.toString.call(t)==="[object Date]"}function zse(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function jse(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Zke(t){return Array.isArray(t)?t:[t]}function iG(t,e,i){if(t.length!==0)return t.reduce((r,s)=>{const n=[e(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function Yke(t,e){return e.reduce((i,r)=>(i[r]=t[r],i),{})}function Dw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function QD(t){if(t==null)return null;if(typeof t!="object")throw new on("Week settings must be an object");if(!Wa(t.firstDay,1,7)||!Wa(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Wa(e,1,7)))throw new on("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Wa(t,e,i){return r3(t)&&t>=e&&t<=i}function Kke(t,e){return t-e*Math.floor(t/e)}function Yr(t,e=2){const i=t<0;let r;return i?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function xp(t){if(!(st(t)||t===null||t===""))return parseInt(t,10)}function Jf(t){if(!(st(t)||t===null||t===""))return parseFloat(t)}function h6(t){if(!(st(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function p6(t,e,i="round"){const r=10**e;switch(i){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function S2(t){return t%4===0&&(t%100!==0||t%400===0)}function p0(t){return S2(t)?366:365}function nC(t,e){const i=Kke(e-1,12)+1,r=t+(e-i)/12;return i===2?S2(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function s3(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function rG(t,e,i){return-d6(u6(t,1,e),i)+e-1}function b$(t,e=4,i=1){const r=rG(t,e,i),s=rG(t+1,e,i);return(p0(t)-r+s)/7}function eF(t){return t>99?t:t>Sr.twoDigitCutoffYear?1900+t:2e3+t}function Vse(t,e,i,r=null){const s=new Date(t),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:e,...n},a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function n3(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const r=parseInt(e,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function Use(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new on(`Invalid unit value ${t}`);return e}function oC(t,e){const i={};for(const r in t)if(Dw(t,r)){const s=t[r];if(s==null)continue;i[e(r)]=Use(s)}return i}function aS(t,e){const i=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${Yr(i,2)}:${Yr(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${Yr(i,2)}${Yr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function o3(t){return Yke(t,["hour","minute","second","millisecond"])}const Xke=["January","February","March","April","May","June","July","August","September","October","November","December"],Bse=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qke=["J","F","M","A","M","J","J","A","S","O","N","D"];function qse(t){switch(t){case"narrow":return[...Qke];case"short":return[...Bse];case"long":return[...Xke];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Gse=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Hse=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],eTe=["M","T","W","T","F","S","S"];function Wse(t){switch(t){case"narrow":return[...eTe];case"short":return[...Hse];case"long":return[...Gse];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Jse=["AM","PM"],tTe=["Before Christ","Anno Domini"],iTe=["BC","AD"],rTe=["B","A"];function Zse(t){switch(t){case"narrow":return[...rTe];case"short":return[...iTe];case"long":return[...tTe];default:return null}}function sTe(t){return Jse[t.hour<12?0:1]}function nTe(t,e){return Wse(e)[t.weekday-1]}function oTe(t,e){return qse(e)[t.month-1]}function aTe(t,e){return Zse(e)[t.year<0?0:1]}function lTe(t,e,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&n){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${s[t][0]}`;case-1:return h?"yesterday":`last ${s[t][0]}`;case 0:return h?"today":`this ${s[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=s[t],d=r?l?c[1]:c[2]||c[1]:l?s[t][0]:t;return o?`${a} ${d} ago`:`in ${a} ${d}`}function sG(t,e){let i="";for(const r of t)r.literal?i+=r.val:i+=e(r.val);return i}const cTe={D:rC,DD:hse,DDD:pse,DDDD:fse,t:mse,tt:yse,ttt:gse,tttt:vse,T:bse,TT:wse,TTT:_se,TTTT:xse,f:Sse,ff:Ise,fff:Tse,ffff:Mse,F:$se,FF:kse,FFF:Ese,FFFF:Cse};class hn{static create(e,i={}){return new hn(e,i)}static parseFormat(e){let i=null,r="",s=!1;const n=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((r.length>0||s)&&n.push({literal:s||/^\s+$/.test(r),val:r===""?"'":r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(e){return cTe[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,r=void 0){if(this.opts.forceSimple)return Yr(e,i);const s={...this.opts};return i>0&&(s.padTo=i),r&&(s.signDisplay=r),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(m,y)=>this.loc.extract(e,m,y),o=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",a=()=>r?sTe(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,y)=>r?oTe(e,m):n(y?{month:m}:{month:m,day:"numeric"},"month"),c=(m,y)=>r?nTe(e,m):n(y?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),d=m=>{const y=hn.macroTokenToFormatOpts(m);return y?this.formatWithSystemDefault(e,y):m},h=m=>r?aTe(e,m):n({era:m},"era"),f=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(m)}};return sG(hn.parseFormat(i),f)}formatDurationFromString(e,i){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,s=d=>{switch(d[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},n=(d,h)=>f=>{const m=s(f);if(m){const y=h.isNegativeDuration&&m!==h.largestUnit?r:1;let v;return this.opts.signMode==="negativeLargestOnly"&&m!==h.largestUnit?v="never":this.opts.signMode==="all"?v="always":v="auto",this.num(d.get(m)*y,f.length,v)}else return f},o=hn.parseFormat(i),a=o.reduce((d,{literal:h,val:f})=>h?d:d.concat(f),[]),l=e.shiftTo(...a.map(s).filter(d=>d)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return sG(o,n(l,c))}}const Yse=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function T_(...t){const e=t.reduce((i,r)=>i+r.source,"");return RegExp(`^${e}$`)}function E_(...t){return e=>t.reduce(([i,r,s],n)=>{const[o,a,l]=n(e,s);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function M_(t,...e){if(t==null)return[null,null];for(const[i,r]of e){const s=i.exec(t);if(s)return r(s)}return[null,null]}function Kse(...t){return(e,i)=>{const r={};let s;for(s=0;s<t.length;s++)r[t[s]]=xp(e[i+s]);return[r,null,i+s]}}const Xse=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,uTe=`(?:${Xse.source}?(?:\\[(${Yse.source})\\])?)?`,f6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Qse=RegExp(`${f6.source}${uTe}`),m6=RegExp(`(?:[Tt]${Qse.source})?`),dTe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,hTe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,pTe=/(\d{4})-?(\d{3})/,fTe=Kse("weekYear","weekNumber","weekDay"),mTe=Kse("year","ordinal"),yTe=/(\d{4})-(\d\d)-(\d\d)/,ene=RegExp(`${f6.source} ?(?:${Xse.source}|(${Yse.source}))?`),gTe=RegExp(`(?: ${ene.source})?`);function f0(t,e,i){const r=t[e];return st(r)?i:xp(r)}function vTe(t,e){return[{year:f0(t,e),month:f0(t,e+1,1),day:f0(t,e+2,1)},null,e+3]}function C_(t,e){return[{hours:f0(t,e,0),minutes:f0(t,e+1,0),seconds:f0(t,e+2,0),milliseconds:h6(t[e+3])},null,e+4]}function $2(t,e){const i=!t[e]&&!t[e+1],r=n3(t[e+1],t[e+2]),s=i?null:jr.instance(r);return[{},s,e+3]}function I2(t,e){const i=t[e]?Mo.create(t[e]):null;return[{},i,e+1]}const bTe=RegExp(`^T?${f6.source}$`),wTe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function _Te(t){const[e,i,r,s,n,o,a,l,c]=t,d=e[0]==="-",h=l&&l[0]==="-",f=(m,y=!1)=>m!==void 0&&(y||m&&d)?-m:m;return[{years:f(Jf(i)),months:f(Jf(r)),weeks:f(Jf(s)),days:f(Jf(n)),hours:f(Jf(o)),minutes:f(Jf(a)),seconds:f(Jf(l),l==="-0"),milliseconds:f(h6(c),h)}]}const xTe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function y6(t,e,i,r,s,n,o){const a={year:e.length===2?eF(xp(e)):xp(e),month:Bse.indexOf(i)+1,day:xp(r),hour:xp(s),minute:xp(n)};return o&&(a.second=xp(o)),t&&(a.weekday=t.length>3?Gse.indexOf(t)+1:Hse.indexOf(t)+1),a}const STe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function $Te(t){const[,e,i,r,s,n,o,a,l,c,d,h]=t,f=y6(e,s,r,i,n,o,a);let m;return l?m=xTe[l]:c?m=0:m=n3(d,h),[f,new jr(m)]}function ITe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const kTe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,TTe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ETe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function nG(t){const[,e,i,r,s,n,o,a]=t;return[y6(e,s,r,i,n,o,a),jr.utcInstance]}function MTe(t){const[,e,i,r,s,n,o,a]=t;return[y6(e,a,i,r,s,n,o),jr.utcInstance]}const CTe=T_(dTe,m6),PTe=T_(hTe,m6),ATe=T_(pTe,m6),LTe=T_(Qse),tne=E_(vTe,C_,$2,I2),OTe=E_(fTe,C_,$2,I2),RTe=E_(mTe,C_,$2,I2),NTe=E_(C_,$2,I2);function DTe(t){return M_(t,[CTe,tne],[PTe,OTe],[ATe,RTe],[LTe,NTe])}function FTe(t){return M_(ITe(t),[STe,$Te])}function zTe(t){return M_(t,[kTe,nG],[TTe,nG],[ETe,MTe])}function jTe(t){return M_(t,[wTe,_Te])}const VTe=E_(C_);function UTe(t){return M_(t,[bTe,VTe])}const BTe=T_(yTe,gTe),qTe=T_(ene),GTe=E_(C_,$2,I2);function HTe(t){return M_(t,[BTe,tne],[qTe,GTe])}const oG="Invalid Duration",ine={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},WTe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...ine},xa=146097/400,ev=146097/4800,JTe={years:{quarters:4,months:12,weeks:xa/7,days:xa,hours:xa*24,minutes:xa*24*60,seconds:xa*24*60*60,milliseconds:xa*24*60*60*1e3},quarters:{months:3,weeks:xa/28,days:xa/4,hours:xa*24/4,minutes:xa*24*60/4,seconds:xa*24*60*60/4,milliseconds:xa*24*60*60*1e3/4},months:{weeks:ev/7,days:ev,hours:ev*24,minutes:ev*24*60,seconds:ev*24*60*60,milliseconds:ev*24*60*60*1e3},...ine},oy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ZTe=oy.slice(0).reverse();function Bu(t,e,i=!1){const r={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new qt(r)}function rne(t,e){let i=e.milliseconds??0;for(const r of ZTe.slice(1))e[r]&&(i+=e[r]*t[r].milliseconds);return i}function aG(t,e){const i=rne(t,e)<0?-1:1;oy.reduceRight((r,s)=>{if(st(e[s]))return r;if(r){const n=e[r]*i,o=t[s][r],a=Math.floor(n/o);e[s]+=a*i,e[r]-=a*o*i}return s},null),oy.reduce((r,s)=>{if(st(e[s]))return r;if(r){const n=e[r]%1;e[r]-=n,e[s]+=n*t[r][s]}return s},null)}function lG(t){const e={};for(const[i,r]of Object.entries(t))r!==0&&(e[i]=r);return e}class qt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let r=i?JTe:WTe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||ri.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,i){return qt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new on(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new qt({values:oC(e,qt.normalizeUnit),loc:ri.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(af(e))return qt.fromMillis(e);if(qt.isDuration(e))return e;if(typeof e=="object")return qt.fromObject(e);throw new on(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[r]=jTe(e);return r?qt.fromObject(r,i):qt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[r]=UTe(e);return r?qt.fromObject(r,i):qt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new on("need to specify a reason the Duration is invalid");const r=e instanceof Zl?e:new Zl(e,i);if(Sr.throwOnInvalid)throw new _ke(r);return new qt({invalid:r})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new dse(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?hn.create(this.loc,r).formatDurationFromString(this,e):oG}toHuman(e={}){if(!this.isValid)return oG;const i=e.showZeros!==!1,r=oy.map(s=>{const n=this.values[s];return st(n)||n===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(n)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=p6(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ke.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?rne(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=qt.fromDurationLike(e),r={};for(const s of oy)(Dw(i.values,s)||Dw(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Bu(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const i=qt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=Use(e(this.values[r],r));return Bu(this,{values:i},!0)}get(e){return this[qt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...oC(e,qt.normalizeUnit)};return Bu(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:s,conversionAccuracy:r};return Bu(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return aG(this.matrix,e),Bu(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=lG(this.normalize().shiftToAll().toObject());return Bu(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>qt.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of oy)if(e.indexOf(o)>=0){n=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;af(s[o])&&(a+=s[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else af(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return aG(this.matrix,i),Bu(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return Bu(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=lG(this.values);return Bu(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of oy)if(!i(this.values[r],e.values[r]))return!1;return!0}}const tv="Invalid Interval";function YTe(t,e){return!t||!t.isValid?br.invalid("missing or invalid start"):!e||!e.isValid?br.invalid("missing or invalid end"):e<t?br.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class br{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new on("need to specify a reason the Interval is invalid");const r=e instanceof Zl?e:new Zl(e,i);if(Sr.throwOnInvalid)throw new wke(r);return new br({invalid:r})}static fromDateTimes(e,i){const r=s1(e),s=s1(i),n=YTe(r,s);return n??new br({start:r,end:s})}static after(e,i){const r=qt.fromDurationLike(i),s=s1(e);return br.fromDateTimes(s,s.plus(r))}static before(e,i){const r=qt.fromDurationLike(i),s=s1(e);return br.fromDateTimes(s.minus(r),s)}static fromISO(e,i){const[r,s]=(e||"").split("/",2);if(r&&s){let n,o;try{n=ke.fromISO(r,i),o=n.isValid}catch{o=!1}let a,l;try{a=ke.fromISO(s,i),l=a.isValid}catch{l=!1}if(o&&l)return br.fromDateTimes(n,a);if(o){const c=qt.fromISO(s,i);if(c.isValid)return br.after(n,c)}else if(l){const c=qt.fromISO(r,i);if(c.isValid)return br.before(a,c)}}return br.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(e,i);let s;return i?.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(e,i),Math.floor(s.diff(r,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?br.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(s1).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push(br.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(e){const i=qt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(br.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return i>=r?null:br.fromDateTimes(i,r)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return br.fromDateTimes(i,r)}static merge(e){const[i,r]=e.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(e){let i=null,r=0;const s=[],n=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&s.push(br.fromDateTimes(i,l.time)),i=null);return br.merge(s)}difference(...e){return br.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:tv}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=rC,i={}){return this.isValid?hn.create(this.s.loc.clone(i),e).formatInterval(this):tv}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:tv}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:tv}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:tv}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:tv}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):qt.invalid(this.invalidReason)}mapEndpoints(e){return br.fromDateTimes(e(this.s),e(this.e))}}class gI{static hasDST(e=Sr.defaultZone){const i=ke.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Mo.isValidZone(e)}static normalizeZone(e){return Lp(e,Sr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||ri.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||ri.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||ri.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||ri.create(i,r,n)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||ri.create(i,r,n)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||ri.create(i,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||ri.create(i,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ri.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return ri.create(i,null,"gregory").eras(e)}static features(){return{relative:zse(),localeWeek:jse()}}}function cG(t,e){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(e)-i(t);return Math.floor(qt.fromMillis(r).as("days"))}function KTe(t,e,i){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const d=cG(l,c);return(d-d%7)/7}],["days",cG]],s={},n=t;let o,a;for(const[l,c]of r)i.indexOf(l)>=0&&(o=l,s[l]=c(t,e),a=n.plus(s),a>e?(s[l]--,t=n.plus(s),t>e&&(a=t,s[l]--,t=n.plus(s))):t=a);return[t,s,a,o]}function XTe(t,e,i,r){let[s,n,o,a]=KTe(t,e,i);const l=e-s,c=i.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const d=qt.fromObject(n,r);return c.length>0?qt.fromMillis(l,r).shiftTo(...c).plus(d):d}const QTe="missing Intl.DateTimeFormat.formatToParts support";function Kt(t,e=i=>i){return{regex:t,deser:([i])=>e(Bke(i))}}const eEe="",sne=`[ ${eEe}]`,nne=new RegExp(sne,"g");function tEe(t){return t.replace(/\./g,"\\.?").replace(nne,sne)}function uG(t){return t.replace(/\./g,"").replace(nne," ").toLowerCase()}function ll(t,e){return t===null?null:{regex:RegExp(t.map(tEe).join("|")),deser:([i])=>t.findIndex(r=>uG(i)===uG(r))+e}}function dG(t,e){return{regex:t,deser:([,i,r])=>n3(i,r),groups:e}}function vI(t){return{regex:t,deser:([e])=>e}}function iEe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function rEe(t,e){const i=al(e),r=al(e,"{2}"),s=al(e,"{3}"),n=al(e,"{4}"),o=al(e,"{6}"),a=al(e,"{1,2}"),l=al(e,"{1,3}"),c=al(e,"{1,6}"),d=al(e,"{1,9}"),h=al(e,"{2,4}"),f=al(e,"{4,6}"),m=b=>({regex:RegExp(iEe(b.val)),deser:([w])=>w,literal:!0}),v=(b=>{if(t.literal)return m(b);switch(b.val){case"G":return ll(e.eras("short"),0);case"GG":return ll(e.eras("long"),0);case"y":return Kt(c);case"yy":return Kt(h,eF);case"yyyy":return Kt(n);case"yyyyy":return Kt(f);case"yyyyyy":return Kt(o);case"M":return Kt(a);case"MM":return Kt(r);case"MMM":return ll(e.months("short",!0),1);case"MMMM":return ll(e.months("long",!0),1);case"L":return Kt(a);case"LL":return Kt(r);case"LLL":return ll(e.months("short",!1),1);case"LLLL":return ll(e.months("long",!1),1);case"d":return Kt(a);case"dd":return Kt(r);case"o":return Kt(l);case"ooo":return Kt(s);case"HH":return Kt(r);case"H":return Kt(a);case"hh":return Kt(r);case"h":return Kt(a);case"mm":return Kt(r);case"m":return Kt(a);case"q":return Kt(a);case"qq":return Kt(r);case"s":return Kt(a);case"ss":return Kt(r);case"S":return Kt(l);case"SSS":return Kt(s);case"u":return vI(d);case"uu":return vI(a);case"uuu":return Kt(i);case"a":return ll(e.meridiems(),0);case"kkkk":return Kt(n);case"kk":return Kt(h,eF);case"W":return Kt(a);case"WW":return Kt(r);case"E":case"c":return Kt(i);case"EEE":return ll(e.weekdays("short",!1),1);case"EEEE":return ll(e.weekdays("long",!1),1);case"ccc":return ll(e.weekdays("short",!0),1);case"cccc":return ll(e.weekdays("long",!0),1);case"Z":case"ZZ":return dG(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return dG(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return vI(/[a-z_+-/]{1,256}?/i);case" ":return vI(/[^\S\n\r]/);default:return m(b)}})(t)||{invalidReason:QTe};return v.token=t,v}const sEe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function nEe(t,e,i){const{type:r,value:s}=t;if(r==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=sEe[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function oEe(t){return[`^${t.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,t]}function aEe(t,e,i){const r=t.match(e);if(r){const s={};let n=1;for(const o in i)if(Dw(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+l))),n+=l}return[r,s]}else return[r,{}]}function lEe(t){const e=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return st(t.z)||(i=Mo.create(t.z)),st(t.Z)||(i||(i=new jr(t.Z)),r=t.Z),st(t.q)||(t.M=(t.q-1)*3+1),st(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),st(t.u)||(t.S=h6(t.u)),[Object.keys(t).reduce((n,o)=>{const a=e(o);return a&&(n[a]=t[o]),n},{}),i,r]}let oO=null;function cEe(){return oO||(oO=ke.fromMillis(1555555555555)),oO}function uEe(t,e){if(t.literal)return t;const i=hn.macroTokenToFormatOpts(t.val),r=cne(i,e);return r==null||r.includes(void 0)?t:r}function one(t,e){return Array.prototype.concat(...t.map(i=>uEe(i,e)))}class ane{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=one(hn.parseFormat(i),e),this.units=this.tokens.map(r=>rEe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=oEe(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[i,r]=aEe(e,this.regex,this.handlers),[s,n,o]=r?lEe(r):[null,null,void 0];if(Dw(r,"a")&&Dw(r,"H"))throw new Wb("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function lne(t,e,i){return new ane(t,i).explainFromTokens(e)}function dEe(t,e,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=lne(t,e,i);return[r,s,n,o]}function cne(t,e){if(!t)return null;const r=hn.create(e,t).dtFormatter(cEe()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(o=>nEe(o,t,n))}const aO="Invalid DateTime",hG=864e13;function q1(t){return new Zl("unsupported zone",`the zone "${t.name}" is not supported`)}function lO(t){return t.weekData===null&&(t.weekData=sC(t.c)),t.weekData}function cO(t){return t.localWeekData===null&&(t.localWeekData=sC(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Zf(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ke({...i,...e,old:i})}function une(t,e,i){let r=t-e*60*1e3;const s=i.offset(r);if(e===s)return[r,e];r-=(s-e)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[t-Math.min(s,n)*60*1e3,Math.max(s,n)]}function bI(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function kT(t,e,i){return une(s3(t),e,i)}function pG(t,e){const i=t.o,r=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,n={...t.c,year:r,month:s,day:Math.min(t.c.day,nC(r,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=qt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=s3(n);let[l,c]=une(a,i,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function iv(t,e,i,r,s,n){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=ke.fromObject(t,{...i,zone:l,specificOffset:n});return o?c:c.setZone(a)}else return ke.invalid(new Zl("unparsable",`the input "${s}" can't be parsed as ${r}`))}function wI(t,e,i=!0){return t.isValid?hn.create(ri.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function uO(t,e,i){const r=t.c.year>9999||t.c.year<0;let s="";if(r&&t.c.year>=0&&(s+="+"),s+=Yr(t.c.year,r?6:4),i==="year")return s;if(e){if(s+="-",s+=Yr(t.c.month),i==="month")return s;s+="-"}else if(s+=Yr(t.c.month),i==="month")return s;return s+=Yr(t.c.day),s}function fG(t,e,i,r,s,n,o){let a=!i||t.c.millisecond!==0||t.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=Yr(t.c.hour),o==="hour")break;if(e){if(l+=":",l+=Yr(t.c.minute),o==="minute")break;a&&(l+=":",l+=Yr(t.c.second))}else{if(l+=Yr(t.c.minute),o==="minute")break;a&&(l+=Yr(t.c.second))}if(o==="second")break;a&&(!r||t.c.millisecond!==0)&&(l+=".",l+=Yr(t.c.millisecond,3))}return s&&(t.isOffsetFixed&&t.offset===0&&!n?l+="Z":t.o<0?(l+="-",l+=Yr(Math.trunc(-t.o/60)),l+=":",l+=Yr(Math.trunc(-t.o%60))):(l+="+",l+=Yr(Math.trunc(t.o/60)),l+=":",l+=Yr(Math.trunc(t.o%60)))),n&&(l+="["+t.zone.ianaName+"]"),l}const dne={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},hEe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},pEe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},TT=["year","month","day","hour","minute","second","millisecond"],fEe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mEe=["year","ordinal","hour","minute","second","millisecond"];function ET(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new dse(t);return e}function mG(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return ET(t)}}function yEe(t){if(G1===void 0&&(G1=Sr.now()),t.type!=="iana")return t.offset(G1);const e=t.name;let i=tF.get(e);return i===void 0&&(i=t.offset(G1),tF.set(e,i)),i}function yG(t,e){const i=Lp(e.zone,Sr.defaultZone);if(!i.isValid)return ke.invalid(q1(i));const r=ri.fromObject(e);let s,n;if(st(t.year))s=Sr.now();else{for(const l of TT)st(t[l])&&(t[l]=dne[l]);const o=Dse(t)||Fse(t);if(o)return ke.invalid(o);const a=yEe(i);[s,n]=kT(t,a,i)}return new ke({ts:s,zone:i,loc:r,o:n})}function gG(t,e,i){const r=st(i.round)?!0:i.round,s=st(i.rounding)?"trunc":i.rounding,n=(a,l)=>(a=p6(a,r||i.calendary?0:2,i.calendary?"round":s),e.loc.clone(i).relFormatter(i).format(a,l)),o=a=>i.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(i.unit)return n(o(i.unit),i.unit);for(const a of i.units){const l=o(a);if(Math.abs(l)>=1)return n(l,a)}return n(t>e?-0:0,i.units[i.units.length-1])}function vG(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}let G1;const tF=new Map;class ke{constructor(e){const i=e.zone||Sr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Zl("invalid input"):null)||(i.isValid?null:q1(i));this.ts=st(e.ts)?Sr.now():e.ts;let s=null,n=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[s,n]=[e.old.c,e.old.o];else{const a=af(e.o)&&!e.old?e.o:i.offset(this.ts);s=bI(this.ts,a),r=Number.isNaN(s.year)?new Zl("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=e.loc||ri.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new ke({})}static local(){const[e,i]=vG(arguments),[r,s,n,o,a,l,c]=i;return yG({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,i]=vG(arguments),[r,s,n,o,a,l,c]=i;return e.zone=jr.utcInstance,yG({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,i={}){const r=Jke(e)?e.valueOf():NaN;if(Number.isNaN(r))return ke.invalid("invalid input");const s=Lp(i.zone,Sr.defaultZone);return s.isValid?new ke({ts:r,zone:s,loc:ri.fromObject(i)}):ke.invalid(q1(s))}static fromMillis(e,i={}){if(af(e))return e<-hG||e>hG?ke.invalid("Timestamp out of range"):new ke({ts:e,zone:Lp(i.zone,Sr.defaultZone),loc:ri.fromObject(i)});throw new on(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(af(e))return new ke({ts:e*1e3,zone:Lp(i.zone,Sr.defaultZone),loc:ri.fromObject(i)});throw new on("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const r=Lp(i.zone,Sr.defaultZone);if(!r.isValid)return ke.invalid(q1(r));const s=ri.fromObject(i),n=oC(e,mG),{minDaysInFirstWeek:o,startOfWeek:a}=tG(n,s),l=Sr.now(),c=st(i.specificOffset)?r.offset(l):i.specificOffset,d=!st(n.ordinal),h=!st(n.year),f=!st(n.month)||!st(n.day),m=h||f,y=n.weekYear||n.weekNumber;if((m||d)&&y)throw new Wb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&d)throw new Wb("Can't mix ordinal dates with month/day");const v=y||n.weekday&&!m;let b,w,x=bI(l,c);v?(b=fEe,w=hEe,x=sC(x,o,a)):d?(b=mEe,w=pEe,x=nO(x)):(b=TT,w=dne);let S=!1;for(const F of b){const W=n[F];st(W)?S?n[F]=w[F]:n[F]=x[F]:S=!0}const $=v?Gke(n,o,a):d?Hke(n):Dse(n),T=$||Fse(n);if(T)return ke.invalid(T);const C=v?Qq(n,o,a):d?eG(n):n,[L,N]=kT(C,c,r),D=new ke({ts:L,zone:r,o:N,loc:s});return n.weekday&&m&&e.weekday!==D.weekday?ke.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${D.toISO()}`):D.isValid?D:ke.invalid(D.invalid)}static fromISO(e,i={}){const[r,s]=DTe(e);return iv(r,s,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[r,s]=FTe(e);return iv(r,s,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[r,s]=zTe(e);return iv(r,s,i,"HTTP",i)}static fromFormat(e,i,r={}){if(st(e)||st(i))throw new on("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=ri.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,c,d]=dEe(o,e,i);return d?ke.invalid(d):iv(a,l,r,`format ${i}`,e,c)}static fromString(e,i,r={}){return ke.fromFormat(e,i,r)}static fromSQL(e,i={}){const[r,s]=HTe(e);return iv(r,s,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new on("need to specify a reason the DateTime is invalid");const r=e instanceof Zl?e:new Zl(e,i);if(Sr.throwOnInvalid)throw new bke(r);return new ke({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const r=cne(e,ri.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(e,i={}){return one(hn.parseFormat(e),ri.fromObject(i)).map(s=>s.val).join("")}static resetCache(){G1=void 0,tF.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?lO(this).weekYear:NaN}get weekNumber(){return this.isValid?lO(this).weekNumber:NaN}get weekday(){return this.isValid?lO(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?cO(this).weekday:NaN}get localWeekNumber(){return this.isValid?cO(this).weekNumber:NaN}get localWeekYear(){return this.isValid?cO(this).weekYear:NaN}get ordinal(){return this.isValid?nO(this.c).ordinal:NaN}get monthShort(){return this.isValid?gI.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?gI.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?gI.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?gI.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,r=s3(this.c),s=this.zone.offset(r-e),n=this.zone.offset(r+e),o=this.zone.offset(r-s*i),a=this.zone.offset(r-n*i);if(o===a)return[this];const l=r-o*i,c=r-a*i,d=bI(l,o),h=bI(c,a);return d.hour===h.hour&&d.minute===h.minute&&d.second===h.second&&d.millisecond===h.millisecond?[Zf(this,{ts:l}),Zf(this,{ts:c})]:[this]}get isInLeapYear(){return S2(this.year)}get daysInMonth(){return nC(this.year,this.month)}get daysInYear(){return this.isValid?p0(this.year):NaN}get weeksInWeekYear(){return this.isValid?b$(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?b$(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:r,calendar:s}=hn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(e=0,i={}){return this.setZone(jr.instance(e),i)}toLocal(){return this.setZone(Sr.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(e=Lp(e,Sr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(i||r){const n=e.offset(this.ts),o=this.toObject();[s]=kT(o,n,e)}return Zf(this,{ts:s,zone:e})}else return ke.invalid(q1(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:r});return Zf(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=oC(e,mG),{minDaysInFirstWeek:r,startOfWeek:s}=tG(i,this.loc),n=!st(i.weekYear)||!st(i.weekNumber)||!st(i.weekday),o=!st(i.ordinal),a=!st(i.year),l=!st(i.month)||!st(i.day),c=a||l,d=i.weekYear||i.weekNumber;if((c||o)&&d)throw new Wb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Wb("Can't mix ordinal dates with month/day");let h;n?h=Qq({...sC(this.c,r,s),...i},r,s):st(i.ordinal)?(h={...this.toObject(),...i},st(i.day)&&(h.day=Math.min(nC(h.year,h.month),h.day))):h=eG({...nO(this.c),...i});const[f,m]=kT(h,this.o,this.zone);return Zf(this,{ts:f,o:m})}plus(e){if(!this.isValid)return this;const i=qt.fromDurationLike(e);return Zf(this,pG(this,i))}minus(e){if(!this.isValid)return this;const i=qt.fromDurationLike(e).negate();return Zf(this,pG(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=qt.normalizeUnit(e);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?hn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):aO}toLocaleString(e=rC,i={}){return this.isValid?hn.create(this.loc.clone(i),e).formatDateTime(this):aO}toLocaleParts(e={}){return this.isValid?hn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=ET(o);const a=e==="extended";let l=uO(this,a,o);return TT.indexOf(o)>=3&&(l+="T"),l+=fG(this,a,i,r,s,n,o),l}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?uO(this,e==="extended",ET(i)):null}toISOWeekDate(){return wI(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=ET(a),(s&&TT.indexOf(a)>=3?"T":"")+fG(this,o==="extended",i,e,r,n,a)):null}toRFC2822(){return wI(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return wI(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?uO(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||e)&&(r&&(s+=" "),i?s+="z":e&&(s+="ZZ")),wI(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():aO}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",r={}){if(!this.isValid||!e.isValid)return qt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=Zke(i).map(qt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=XTe(a,l,n,s);return o?c.negate():c}diffNow(e="milliseconds",i={}){return this.diff(ke.now(),e,i)}until(e){return this.isValid?br.fromDateTimes(this,e):this}hasSame(e,i,r){if(!this.isValid)return!1;const s=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||ke.fromObject({},{zone:this.zone}),r=e.padding?this<i?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=e.unit;return Array.isArray(e.unit)&&(s=e.unit,n=void 0),gG(i,this.plus(r),{...e,numeric:"always",units:s,unit:n})}toRelativeCalendar(e={}){return this.isValid?gG(e.base||ke.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ke.isDateTime))throw new on("min requires all arguments be DateTimes");return iG(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(ke.isDateTime))throw new on("max requires all arguments be DateTimes");return iG(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=ri.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return lne(o,e,i)}static fromStringExplain(e,i,r={}){return ke.fromFormatExplain(e,i,r)}static buildFormatParser(e,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=ri.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new ane(n,e)}static fromFormatParser(e,i,r={}){if(st(e)||st(i))throw new on("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,o=ri.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(i.locale))throw new on(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:d}=i.explainFromTokens(e);return d?ke.invalid(d):iv(a,l,r,`format ${i.format}`,e,c)}static get DATE_SHORT(){return rC}static get DATE_MED(){return hse}static get DATE_MED_WITH_WEEKDAY(){return xke}static get DATE_FULL(){return pse}static get DATE_HUGE(){return fse}static get TIME_SIMPLE(){return mse}static get TIME_WITH_SECONDS(){return yse}static get TIME_WITH_SHORT_OFFSET(){return gse}static get TIME_WITH_LONG_OFFSET(){return vse}static get TIME_24_SIMPLE(){return bse}static get TIME_24_WITH_SECONDS(){return wse}static get TIME_24_WITH_SHORT_OFFSET(){return _se}static get TIME_24_WITH_LONG_OFFSET(){return xse}static get DATETIME_SHORT(){return Sse}static get DATETIME_SHORT_WITH_SECONDS(){return $se}static get DATETIME_MED(){return Ise}static get DATETIME_MED_WITH_SECONDS(){return kse}static get DATETIME_MED_WITH_WEEKDAY(){return Ske}static get DATETIME_FULL(){return Tse}static get DATETIME_FULL_WITH_SECONDS(){return Ese}static get DATETIME_HUGE(){return Mse}static get DATETIME_HUGE_WITH_SECONDS(){return Cse}}function s1(t){if(ke.isDateTime(t))return t;if(t&&t.valueOf&&af(t.valueOf()))return ke.fromJSDate(t);if(t&&typeof t=="object")return ke.fromObject(t);throw new on(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const gEe="shortOffset";function vEe(t){return"timeZoneIANA"in t}function bEe(t){return t.startsWith("UTC")}function Fw(t,e=!1){return{json:{read:{source:t,reader:(i,r)=>r[t]?MT(r[t]):null},write:!!e&&{allowNull:!0,writer(i,r){r[t]=i?wEe(i):null}}}}}function MT(t,e=ga){return t?vEe(t)?t.timeZoneIANA:_Ee(t,e):e}function wEe(t){return{timeZoneIANA:t}}function _Ee(t,e=ga){if(!t||!Uq.has(t.timeZone))return e;const i=Uq.get(t.timeZone);return bEe(t.timeZone)||t.respectsDaylightSaving?i:xEe(i)}function xEe(t){const e=ke.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${jr.instance(-i).formatOffset(0,"narrow")}`}function SEe(t,e,i,r,s){if(e&&s==="date")return{timeZone:Du,timeZoneName:void 0};const n=r.hour,o=i===vh;return{timeZone:o?s==="timestamp-offset"?void 0:t??Du:i,timeZoneName:o&&n?gEe:void 0}}function $Ee(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===ga||t===vh||e.has(t.toLowerCase())||i.has(t.toLowerCase())}const IEe={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},kEe={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},hne={timeZone:Du},uc={year:"numeric",month:"numeric",day:"numeric"},n1={year:"numeric",month:"long",day:"numeric"},o1={year:"numeric",month:"short",day:"numeric"},a1={year:"numeric",month:"long",weekday:"long",day:"numeric"},Sp={hour:"numeric",minute:"numeric"},hm={...Sp,second:"numeric"},pne={hourCycle:"h23"},l1={...Sp,...pne},c1={...hm,...pne},fne={"short-date":uc,"short-date-short-time":{...uc,...Sp},"short-date-short-time-24":{...uc,...l1},"short-date-long-time":{...uc,...hm},"short-date-long-time-24":{...uc,...c1},"short-date-le":uc,"short-date-le-short-time":{...uc,...Sp},"short-date-le-short-time-24":{...uc,...l1},"short-date-le-long-time":{...uc,...hm},"short-date-le-long-time-24":{...uc,...c1},"long-month-day-year":n1,"long-month-day-year-short-time":{...n1,...Sp},"long-month-day-year-short-time-24":{...n1,...l1},"long-month-day-year-long-time":{...n1,...hm},"long-month-day-year-long-time-24":{...n1,...c1},"day-short-month-year":o1,"day-short-month-year-short-time":{...o1,...Sp},"day-short-month-year-short-time-24":{...o1,...l1},"day-short-month-year-long-time":{...o1,...hm},"day-short-month-year-long-time-24":{...o1,...c1},"long-date":a1,"long-date-short-time":{...a1,...Sp},"long-date-short-time-24":{...a1,...l1},"long-date-long-time":{...a1,...hm},"long-date-long-time-24":{...a1,...c1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Sp,"long-time":hm},TEe=Qr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),mne={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},EEe=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),MEe=EEe.find(({type:t})=>t==="month")?.value.toLowerCase();function yne(){const t=o6();return(t&&mne[t])??cse()}MEe!=="mart"&&(mne.bs="sr-Latn-CS");let iF=new WeakMap;const a3=fne["short-date-short-time"];function CEe(t){let e=iF.get(t);if(!e){const i=yne(),r=g6(t.timeZone??ga),s={...t,timeZone:r};e=new Intl.DateTimeFormat(i,s),iF.set(t,e)}return e}function zv(t){return fne[t]}function PEe(t){const{dateStyle:e,timeStyle:i,hour12:r,year:s,month:n}=t,o={};return e?o.dateStyle=e:s&&(o.year=s,o.month=n||void 0),i&&!o.year&&(o.timeStyle=i,o.hour12=r==="auto"?void 0:r==="always"),o}function xo(t,e=a3){return CEe(e).format(t)}function AEe(t,e=a3){return xo(new Date(t),{...e,...hne,...kEe})}function LEe(t,e=a3){return xo(new Date(`1970-01-01T${t}Z`),{...e,...hne,...IEe})}function OEe(t,e=a3){if(e.timeZone)return xo(new Date(t),e);const i=ke.fromISO(t,{setZone:!0}),r=i.offset===0?Du:e.timeZone,s={...e,timeZone:r};return i.toLocaleString(s,{locale:yne()})}function g6(t){switch(t){case ga:return vke;case vh:return Du;default:return t}}l6(()=>{iF=new WeakMap});const REe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let CT=new WeakMap,gne={};function rF(t){const e=t||gne;if(!CT.has(e)){const i=o6(),r=i&&REe[i]||cse();CT.set(e,new Intl.NumberFormat(r,t))}return CT.get(e)}function NEe(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function DEe(t){const{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:i,useGrouping:r==="auto"?"auto":r==="always"}}function Sf(t,e){return Object.is(t,-0)&&(t=0),rF(e).format(t)}function Qht(t,e=ko()){if(!t)return null;let i=bG.get(e);if(!i){const r=rF().formatToParts(12345.6),s=[...rF({useGrouping:!1}).format(9876543210)].reverse(),n=new Map(s.map((h,f)=>[h,f])),o=new RegExp(`[${r.find(h=>h.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(h=>h.type==="decimal")?.value}]`),l=new RegExp(`[${s.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,d=/[-\u2212\u2013\u2014\u2015]/g;i=h=>{if((h=h.trim().replaceAll(o,"").replace(a,".").replace(l,m=>String(n.get(m))).replaceAll(c,"").replaceAll(d,"-"))==="")return null;const f=Number(h);return isNaN(f)?null:f},bG.set(e,i)}return i(t)}l6(()=>{CT=new WeakMap,gne={}});const bG=new Map,vne=()=>X.getLogger("esri.intl.substitute");function zw(t,e,i={}){const{format:r={}}=i;return Mh(t,s=>FEe(s,e,r))}function FEe(t,e,i){let r,s;const n=t.indexOf(":");if(n===-1?r=t.trim():(r=t.slice(0,n).trim(),s=t.slice(n+1).trim()),!r)return"";const o=wu(r,e);if(o==null)return"";const a=(s?i?.[s]:null)??i?.[r];return a?zEe(o,a):s?jEe(o,s):v6(o)}function zEe(t,e){switch(e.type){case"date":return xo(t,e.intlOptions);case"number":return Sf(t,e.intlOptions);default:return vne().warn("missing format descriptor for key {key}"),v6(t)}}function jEe(t,e){switch(e.toLowerCase()){case"dateformat":return xo(t);case"numberformat":return Sf(t);default:return vne().warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?xo(t):/^numberformat/i.test(e)?Sf(t):v6(t)}}function v6(t){switch(typeof t){case"string":return t;case"number":return Sf(t);case"boolean":return""+t;default:return t instanceof Date?xo(t):""}}const bne={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function VEe(t){return t in bne}function wG(t){if(VEe(t)){const e=bne[t];return e===!0?t:e}return null}const H1=[],m0=new Map;function _G(t){for(const e of m0.keys())xne(t.pattern,e)&&m0.delete(e)}function UEe(t){return H1.includes(t)||(_G(t),H1.unshift(t)),Et(()=>{const e=H1.indexOf(t);e>-1&&(H1.splice(e,1),_G(t))})}async function wne(t){const e=ko();m0.has(t)||m0.set(t,BEe(t,e));const i=m0.get(t);return i&&await qEe.add(i),i}function _ne(t){const e=o6(t);return e?wG(t)??wG(e):null}async function BEe(t,e){const i=[];for(const r of H1)if(xne(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(s){i.push(s)}throw i.length?new R("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new R("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function xne(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}l6(()=>{m0.clear()});const qEe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Is())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function GEe(t,e,i,r){const s=e.exec(i);if(!s)throw new R("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=_ne(r),l=`${n}${o}.json`,c=a?`${n}${o}_${a}.json`:l;let d;try{d=await xG(t(c))}catch(h){if(c===l)throw new R("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:h});try{d=await xG(t(l))}catch(f){throw new R("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f})}}return d}async function xG(t){if(SG.fetchBundleAsset!=null)return SG.fetchBundleAsset(t);const e=await xe(t,{responseType:"text"});return JSON.parse(e.data)}let HEe=class{constructor({base:e="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,i){return GEe(this.getAssetUrl,this.matcher,e,i)}};function WEe(t){return new HEe(t)}const SG={};UEe(WEe({pattern:"esri/",location:Li}));const $G={};function JEe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...$G.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=$G.baseUrl),e}let ZEe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>e[i](...r)})}},PT=class{constructor(){this._dispatcher=new ZEe,this._workerPostMessage({type:ch.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){TM(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,r){this._dispatcher.addEventListener(e,i,r)}removeEventListener(e,i,r){this._dispatcher.removeEventListener(e,i,r)}_workerPostMessage(e){TM(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=v$(e);if(i&&i.type===ch.OPEN){const{modulePath:r,jobId:s}=i;let n=await Nw.loadWorker(r);n||(n=await import(r));const o=Nw.connect(n);this._workerPostMessage({type:ch.OPENED,jobId:s,data:o})}}};const sF=()=>X.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:YEe}=ch,KEe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let _I,xI;const IG="Failed to create Worker. Fallback to execute module in main thread";async function XEe(){if(!H("esri-workers"))return kG(new PT);if(!_I&&!xI)try{const e=KEe.split("{CONFIGURATION}").join(QEe());_I=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){xI=e||{}}let t;if(_I)try{t=new Worker(_I,{name:"esri-worker-"+eMe++})}catch{sF().warn(IG,xI),t=new PT}else sF().warn(IG,xI),t=new PT;return kG(t)}async function kG(t){return new Promise(e=>{function i(s){const n=v$(s);n&&n.type===YEe&&(t.removeEventListener("message",i),t.removeEventListener("error",r),e(t))}function r(s){s.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",r),sF().warn("Failed to create Worker. Fallback to execute module in main thread",s),(t=new PT).addEventListener("message",i),t.addEventListener("error",r)}t.addEventListener("message",i),t.addEventListener("error",r)})}function QEe(){let t;if(lt.default!=null){const s={...lt};delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(lt));t.assetsPath=Us(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Us(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=ko(),t.has={"esri-csp-restrictions":H("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":H("esri-2d-update-debug"),"esri-2d-log-updating":H("esri-2d-log-updating"),"featurelayer-pbf":H("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":H("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":H("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":H("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":H("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":H("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":H("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":H("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":H("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":H("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":H("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":H("parquetlayer-full-query-feature-count"),"esri-atomics":H("esri-atomics"),"esri-shared-array-buffer":H("esri-shared-array-buffer"),"esri-tiles-debug":H("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":H("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":H("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Us(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Us(t.workers.workerPath):t.workers.workerPath=Us(Li("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=lt.workers.loaderConfig,i=JEe({baseUrl:e?.baseUrl,locale:ko(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{buildDate:Cie,fullVersion:OU,revision:Pie}})}let eMe=0;const{ABORT:TG,INVOKE:tMe,OPEN:iMe,OPENED:rMe,RESPONSE:u1}=ch;let sMe=class Sne{static async create(e){const i=await XEe();return new Sne(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),X.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:r}=i,s=ose();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:hU(r,()=>{this._outJobs.delete(s),this._post({type:TG,jobId:s})})};this._outJobs.set(s,a),this._post({type:iMe,jobId:s,modulePath:e})})}_onMessage(e){const i=v$(e);if(i)switch(i.type){case rMe:this._onOpenedMessage(i);break;case u1:this._onResponseMessage(i);break;case TG:this._onAbortMessage(i);break;case tMe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,r=e.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(e){const{methodName:i,jobId:r,data:s,abortable:n}=e,o=n?new AbortController:null,a=this._inJobs,l=mke[i];let c;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);c=l.call(null,s,{signal:o?o.signal:null})}catch(d){return void this._post({type:u1,jobId:r,error:iC(d)})}yn(c)?(a.set(r,{controller:o,promise:c}),c.then(d=>{a.has(r)&&(a.delete(r),this._post({type:u1,jobId:r},d))},d=>{a.has(r)&&(a.delete(r),d||(d={message:"Error encountered at method"+i}),Yi(d)||this._post({type:u1,jobId:r,error:iC(d||{message:`Error encountered at method ${i}`})}))})):this._post({type:u1,jobId:r},c)}_onOpenedMessage(e){const{jobId:i,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),_i(s.abortHandle),s.resolve(r))}_onResponseMessage(e){const{jobId:i,error:r,data:s}=e,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),_i(n.abortHandle),r?n.reject(R.fromJSON(JSON.parse(r))):n.resolve(s))}_post(e,i,r){return ase(this.worker,e,i,r)}};const EG=H("host-browser")?Math.min(navigator.hardwareConcurrency-1,H("workers-pool-size")??8):0;let ay=H("esri-mobile")?Math.min(EG,3):EG;ay||(ay=H("safari")&&H("mac")?7:2);let MG=0;const AT=[];function nMe(){$ne()}async function SI(t,e){const i=new fke,{registryTarget:r,...s}=e;return await i.open(t,s),r&&nke(r,i),i}async function oMe(t,e={}){if(typeof t!="string")throw new R("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(H("host-webworker")&&!H("esri-workers")&&(i="local"),i==="local"){let r=await Nw.loadWorker(t);r||(r=await import(t)),Gt(e.signal);const s=e.client||r;return SI([Nw.connect(r,e.schedule)],{...e,client:s})}if(await $ne(),Gt(e.signal),i==="dedicated"){const r=MG++%ay;return SI([await AT[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,ay);if(r<ay){const s=new Array(r);for(let n=0;n<r;++n){const o=MG++%ay;s[n]=AT[o].open(t,e)}return SI(s,e)}}return SI(AT.map(r=>r.open(t,e)),e)}let $I=null;async function $ne(){if($I)return $I;new AbortController;const t=[];for(let e=0;e<ay;e++){const i=sMe.create(e).then(r=>(AT[e]=r,r));t.push(i)}return $I=Promise.all(t),$I}function Iu(t,e,i=ue){return e||(e=new i),e===t||e.destroyed||(e.removeAll(),aMe(t)?e.addMany(t):t&&e.add(t)),e}function Ine(t){return t}function aMe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let lS=class extends ue{constructor(e){super(e),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(ue.ofType(this.itemType.Type))(e):new ue(e)}};function nF(t,e){return{type:t,cast:Ine,set(i){const r=Iu(i,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}u([p()],lS.prototype,"owner",null),lS=u([M("esri.core.support.OwningCollection")],lS);function Df(){return[0,0,0]}function lMe(t){return[t[0],t[1],t[2]]}function P_(t,e,i){return[t,e,i]}function cMe(t,e,i){return[t,e,i]}function uMe(t,e=Df()){const i=Math.min(3,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function kne(){return Df()}function Tne(){return P_(1,1,1)}function Ene(){return P_(1,0,0)}function Mne(){return P_(0,1,0)}function Cne(){return P_(0,0,1)}const dMe=kne(),Pne=Tne(),hMe=Ene(),pMe=Mne(),fMe=Cne();Object.freeze(Object.defineProperty({__proto__:null,ONES:Pne,UNIT_X:hMe,UNIT_Y:pMe,UNIT_Z:fMe,ZEROS:dMe,clone:lMe,create:Df,freeze:cMe,fromArray:uMe,fromValues:P_,ones:Tne,unitX:Ene,unitY:Mne,unitZ:Cne,zeros:kne},Symbol.toStringTag,{value:"Module"}));var oF;let jv=oF=class extends _e{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new oF({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};u([p()],jv.prototype,"isInverse",void 0),u([p()],jv.prototype,"wkt",void 0),u([p()],jv.prototype,"wkid",void 0),jv=oF=u([M("esri.geometry.operators.support.GeographicTransformationStep")],jv);var aF;let cS=aF=class extends _e{constructor(t){super(t),this.steps=[]}getInverse(){const t=new aF;for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}};u([p({type:[jv],nonNullable:!0})],cS.prototype,"steps",void 0),cS=aF=u([M("esri.geometry.operators.support.GeographicTransformation")],cS);const spt=Math.PI/180,npt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Jh=dr.radius,cl=dr.eccentricitySquared,mMe={a1:Jh*cl,a2:Jh*cl*Jh*cl,a3:Jh*cl*cl/2,a4:Jh*cl*Jh*cl*2.5,a5:Jh*cl+Jh*cl*cl/2,a6:1-cl},opt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:dr.radius,f:dr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:wf.radius,f:wf.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Su.radius,f:Su.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Su.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},yMe={2:{5:Pi,7:null,9:null,10:Pi,1:dS,6:null,8:null,0:null,3:y0,11:g0,2:Pi,4:w0},5:{5:Pi,7:null,9:null,10:Pi,1:dS,6:null,8:null,0:null,3:y0,11:g0,2:Pi,4:w0},7:{5:null,7:Pi,9:null,10:Pi,1:null,6:AG,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:Pi,10:Pi,1:null,6:null,8:PG,0:null,3:null,11:null,2:null,4:null},3:{5:uS,7:null,9:null,10:uS,1:vMe,6:null,8:null,0:null,3:Pi,11:_Me,2:uS,4:bMe},4:{5:_0,7:null,9:null,10:_0,1:CMe,6:null,8:null,0:null,3:PMe,11:xMe,2:_0,4:Pi},1:{5:b0,7:null,9:null,10:b0,1:Pi,6:null,8:null,0:null,3:TMe,11:SMe,2:b0,4:EMe},6:{5:null,7:OG,9:null,10:OG,1:null,6:Pi,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:LG,10:LG,1:null,6:null,8:Pi,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:Pi,3:null,11:null,2:null,4:null},10:{5:Pi,7:Pi,9:Pi,10:Pi,1:dS,6:AG,8:PG,0:null,3:y0,11:g0,2:Pi,4:w0},11:{5:v0,7:null,9:null,10:v0,1:$Me,6:null,8:null,0:null,3:IMe,11:Pi,2:v0,4:kMe}};function Ane(t,e){return gMe(t,e)?.projector}function gMe(t,e){if(t==null||e==null)return null;if(qu.source.spatialReference===t&&qu.dest.spatialReference===e)return qu;const i=CG(t,qu.source),r=CG(e,qu.dest);return i===0&&r===0?Mr(t,e)?qu.projector=Pi:qu.projector=null:qu.projector=yMe[i][r],qu}function CG(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=va(t,1)),YM(t)?e.spatialReferenceId=1:fg(t)?e.spatialReferenceId=2:Ru(t)?e.spatialReferenceId=3:a$e(t)?e.spatialReferenceId=11:t.wkt===d$e.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===UU.wkt?e.spatialReferenceId=6:t.wkt===BU.wkt?e.spatialReferenceId=8:Xie(t)?e.spatialReferenceId=7:Qie(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function Pi(t,e,i,r){t!==i&&(i[r++]=t[e++],i[r++]=t[e++],i[r]=t[e])}function uS(t,e,i,r){i[r]=Vw*(t[e]/$y),i[r+1]=Vw*(Lne-2*Math.atan(Math.exp(-t[e+1]/$y))),i[r+2]=t[e+2]}function vMe(t,e,i,r){const s=t[e]/$y,n=Lne-2*Math.atan(Math.exp(-t[e+1]/$y)),o=$y+t[e+2],a=Math.cos(n)*o;i[r]=Math.cos(s)*a,i[r+1]=Math.sin(s)*a,i[r+2]=Math.sin(n)*o}function bMe(t,e,i,r){uS(t,e,i,r),w0(i,r,i,r)}function wMe(t,e,i,r,s){const n=.4999999*Math.PI,o=bn(jw*t[e+1],-n,n),a=Math.sin(o);i[r++]=jw*t[e]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=t[e+2]}function y0(t,e,i,r){wMe(t,e,i,r,dr)}function g0(t,e,i,r){i[r]=t[e]*RG,i[r+1]=t[e+1]*RG,i[r+2]=t[e+2]}function v0(t,e,i,r){i[r]=t[e]*NG,i[r+1]=t[e+1]*NG,i[r+2]=t[e+2]}function _Me(t,e,i,r){uS(t,e,i,r),g0(i,r,i,r)}function xMe(t,e,i,r){_0(t,e,i,r),g0(i,r,i,r)}function SMe(t,e,i,r){b0(t,e,i,r),g0(i,r,i,r)}function $Me(t,e,i,r){v0(t,e,i,r),dS(i,r,i,r)}function IMe(t,e,i,r){v0(t,e,i,r),y0(i,r,i,r)}function kMe(t,e,i,r){v0(t,e,i,r),w0(i,r,i,r)}function b6(t,e,i,r,s){const n=s+t[e+2],o=jw*t[e+1],a=jw*t[e],l=Math.cos(o)*n;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*n}function PG(t,e,i,r){b6(t,e,i,r,wf.radius)}function AG(t,e,i,r){b6(t,e,i,r,Su.radius)}function dS(t,e,i,r){b6(t,e,i,r,dr.radius)}function w6(t,e,i,r,s){const n=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(n*n+o*o+a*a),c=xxe(a/(l===0?1:l)),d=Math.atan2(o,n);i[r++]=Vw*d,i[r++]=Vw*c,i[r]=l-s}function LG(t,e,i,r){w6(t,e,i,r,wf.radius)}function OG(t,e,i,r){w6(t,e,i,r,Su.radius)}function b0(t,e,i,r){w6(t,e,i,r,dr.radius)}function TMe(t,e,i,r){b0(t,e,i,r),y0(i,r,i,r)}function EMe(t,e,i,r){b0(t,e,i,r),w0(i,r,i,r)}function MMe(t,e,i,r,s){const n=jw*t[e],o=jw*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),d=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);i[r++]=(d+a)*c*Math.cos(n),i[r++]=(d+a)*c*Math.sin(n),i[r++]=(d*(1-s.eccentricitySquared)+a)*l}function w0(t,e,i,r){MMe(t,e,i,r,dr)}function _0(t,e,i,r){const s=mMe,n=t[e],o=t[e+1],a=t[e+2];let l,c,d,h,f,m,y,v,b,w,x,S,$,T,C,L,N,D,F,W,Z;l=Math.abs(a),c=n*n+o*o,d=Math.sqrt(c),h=c+a*a,f=Math.sqrt(h),W=Math.atan2(o,n),m=a*a/h,y=c/h,T=s.a2/f,C=s.a3-s.a4/f,y>.3?(v=l/f*(1+y*(s.a1+T+m*C)/f),F=Math.asin(v),w=v*v,b=Math.sqrt(1-w)):(b=d/f*(1-m*(s.a5-T-y*C)/f),F=Math.acos(b),w=1-b*b,v=Math.sqrt(w)),x=1-dr.eccentricitySquared*w,S=dr.radius/Math.sqrt(x),$=s.a6*S,T=d-S*b,C=l-$*v,N=b*T+v*C,L=b*C-v*T,D=L/($/x+N),F+=D,Z=N+L*D/2,a<0&&(F=-F),i[r++]=Vw*W,i[r++]=Vw*F,i[r]=Z}function CMe(t,e,i,r){_0(t,e,i,r),dS(i,r,i,r)}function PMe(t,e,i,r){_0(t,e,i,r),y0(i,r,i,r)}const qu={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Pi},jw=x_(1),Vw=tie(1),Lne=.5*Math.PI,$y=dr.radius,RG=$y*Math.PI/180,NG=180/($y*Math.PI);function k2(t,e,i,r,s,n,o=Math.floor(t.length/3)){const a=Ane(e,s);if(a==null)return!1;if(a===Pi){if(t===r&&i===n)return!0;const c=i+3*o;for(let d=i,h=n;d<c;d++,h++)r[h]=t[d];return!0}const l=i+3*o;for(let c=i,d=n;c<l;c+=3,d+=3)a(t,c,r,d);return!0}const apt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:k2},Symbol.toStringTag,{value:"Module"}));function DG(t,e,i,r,s,n){return II[0]=t,II[1]=e,II[2]=i,k2(II,r,0,s,n,0)}const II=Df();function _6(t,e,i){if(e==null||i==null||i.vcsWkid||Mr(e,i)||xf(e)||xf(i))return null;const r=Cw(e)/Cw(i);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return s=>AMe(s,r);case"polyline":case"esriGeometryPolyline":return s=>OMe(s,r);case"polygon":case"esriGeometryPolygon":return s=>LMe(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>RMe(s,r);case"extent":case"esriGeometryEnvelope":return s=>NMe(s,r);default:return null}}function AMe(t,e){t?.z!=null&&(t.z*=e)}function LMe(t,e){if(t)for(const i of t.rings)for(const r of i)r.length>2&&(r[2]*=e)}function OMe(t,e){if(t)for(const i of t.paths)for(const r of i)r.length>2&&(r[2]*=e)}function RMe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function NMe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let hS=null,w$=null,_$=null,Uw=null,lF={};const x6=new p_;function Lh(){return!!(w$?.isLoaded()&&_$?.isLoaded()&&Uw?.isLoaded())}function One(){return!!Lh()||(Ue(x6),$f(),!1)}function Rne(t,e){return!t||!e||tc(t,e)||One()}function DMe(t,e){return!tc(t,e)&&!Lh()}async function $f(t){hS==null&&(hS=Promise.all([K(()=>import("./projectOperator-Ct2HFWm2.js"),__vite__mapDeps([128,129,68])).then(e=>(w$=e,w$.load())),K(()=>import("./projectOperator-DF5rLgE5.js"),__vite__mapDeps([130,129,68])).then(e=>(_$=e,_$.load())),K(()=>import("./geographicTransformationUtils-DTE8XOW5.js"),[]).then(e=>(Uw=e,Uw.load()))])),await hS,Gt(t),x6.notify()}function Ff(t,e,i){return Array.isArray(t)?t.length===0?[]:(z$e(t),cF(t,t[0].spatialReference,e,i)):(Pw(t),cF([t],t.spatialReference,e,i)[0])}function cF(t,e,i,r){if(e==null||i==null)return t;if(tc(e,i,r))return t.map(s=>LT(s,e,i));if(r?.geographicTransformation==null&&YM(e))return t.map(s=>LT(s,e,fe.WGS84)).map(s=>x$(s,i));if(r?.geographicTransformation==null&&YM(i))return t.map(s=>x$(s,fe.WGS84)).map(s=>LT(s,fe.WGS84,i));if(!Lh())throw new Dne;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:Uw.getTransformation(e,i,r.areaOfInterestExtent)||new cS};else if(!r?.areaOfInterestExtent){const s=FMe(e,i);let n=lF[s];n||(n=Uw.getTransformation(e,i)||new cS,lF[s]=n),r={geographicTransformation:n}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof ns?w$.executeMany(t,i,r):_$.executeMany(t,i,r)}function FMe(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function zMe(t,e){const i=Nne([t],e);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function Nne(t,e){if(!Lh()){for(const i of t)if(i!=null&&!Mr(i.spatialReference,e)&&oa(i.spatialReference)&&oa(e)&&!tc(i.spatialReference,e))return Ue(x6),{pending:$f(),geometries:null}}return{pending:null,geometries:t.map(i=>i==null?null:Mr(i.spatialReference,e)?i:oa(i.spatialReference)&&oa(e)?x$(i,e):null)}}let Dne=class extends R{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function jMe(){hS=null,w$=null,_$=null,Uw=null,lF={}}const VMe={get loadPromise(){return hS}};function x$(t,e){try{const i=Ff(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const r=_6(i.type,t.spatialReference,e);return r?.(i),i}catch(i){if(!(i instanceof Dne))throw i;return null}}async function Fne(t,e,i){const r=t.spatialReference;return r!=null&&e!=null&&await S6(r,e,null,i),x$(t,e)}function tc(t,e,i){return!(i?.areaOfInterestExtent||i?.extendedParams||i?.geographicTransformation)&&(!!Mr(t,e)||oa(t)&&oa(e)&&!!Ane(t,e))}function UMe(t,e){if(Mr(t,e))return!0;if(!oa(t)||!oa(e))return!1;const i=fg(t)||Ru(t)||bq(t),r=fg(e)||Ru(e)||bq(e);return i&&r}async function S6(t,e,i,r){if(Lh())return kM(r);if(Array.isArray(t)){for(const{source:s,dest:n,options:o}of t)if(s&&n&&!tc(s,n,o))return $f(r)}else if(t&&e&&!tc(t,e,i))return $f(r);return kM(r)}function LT(t,e,i){return t?"x"in t?zne(t,e,new Fe,i,0):"xmin"in t?qne(t,e,new Pe,i,0):"rings"in t?Bne(t,e,new vi,i,0):"paths"in t?Vne(t,e,new rr,i,0):"points"in t?jne(t,e,new ja,i,0):null:null}function BMe(t,e,i=e.spatialReference,r=0){return i!=null&&t.spatialReference!=null&&zne(t,t.spatialReference,e,i,r)!=null}function zne(t,e,i,r,s){an[0]=t.x,an[1]=t.y;const n=t.z;return an[2]=n!==void 0?n:s,k2(an,e,0,an,r,0)?(i.x=an[0],i.y=an[1],i.spatialReference=r,n!==void 0||xf(r)?(i.z=an[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function qMe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&jne(t,t.spatialReference,e,i,r)!=null}function jne(t,e,i,r,s){const{points:n,hasZ:o,hasM:a}=t,l=[],c=n.length,d=[];for(const f of n)d.push(f[0],f[1],o?f[2]:s);if(!k2(d,e,0,d,r,0,c))return null;const h=o||xf(r);for(let f=0;f<c;++f){const m=3*f,y=d[m],v=d[m+1];h&&a?l.push([y,v,d[m+2],n[f][3]]):h?l.push([y,v,d[m+2]]):a?l.push([y,v,n[f][2]]):l.push([y,v])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function GMe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Vne(t,t.spatialReference,e,i,r)!=null}function Vne(t,e,i,r,s){const{paths:n,hasZ:o,hasM:a}=t,l=[];if(!Gne(n,o??!1,a??!1,e,l,r,s))return null;const c=o||xf(r);return i.paths=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function Une(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&Bne(t,t.spatialReference,e,i,r)!=null}function Bne(t,e,i,r,s){const{rings:n,hasZ:o,hasM:a}=t,l=[];if(!Gne(n,o??!1,a??!1,e,l,r,s))return null;const c=o||xf(r);return i.rings=l,i.spatialReference=r,i.hasZ=c,i.hasM=a,i}function HMe(t,e,i=e.spatialReference,r=0){return t.spatialReference!=null&&i!=null&&qne(t,t.spatialReference,e,i,r)!=null}function qne(t,e,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:d}=t,h=c?t.zmin:s;if(!DG(n,o,h,e,an,r))return null;const f=c||xf(r);i.xmin=an[0],i.ymin=an[1],f&&(i.zmin=an[2]);const m=c?t.zmax:s;return DG(a,l,m,e,an,r)?(i.xmax=an[0],i.ymax=an[1],f&&(i.zmax=an[2]),d&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=r,i):null}function Gne(t,e,i,r,s,n,o=0){const a=new Array;for(const d of t)for(const h of d)a.push(h[0],h[1],e?h[2]:o);if(!k2(a,r,0,a,n,0))return!1;let l=0;s.length=0;const c=e||xf(n);for(const d of t){const h=new Array;for(const f of d)c&&i?h.push([a[l++],a[l++],a[l++],f[3]]):c?h.push([a[l++],a[l++],a[l++]]):i?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);s.push(h)}return!0}const an=Df(),cpt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:tc,initializeProjection:S6,isEqualBaseGCS:UMe,isLoaded:Lh,isLoadedOrLoad:One,isLoadedOrLoadFor:Rne,load:$f,project:Ff,projectExtent:HMe,projectMany:cF,projectMultipoint:qMe,projectOrLoad:zMe,projectOrLoadMany:Nne,projectPoint:BMe,projectPolygon:Une,projectPolyline:GMe,projectWithZConversion:Fne,projectWithoutEngine:LT,requiresLoad:DMe,test:VMe,tryProjectWithZConversion:x$,unload:jMe},Symbol.toStringTag,{value:"Module"}));var uF,G0;let yt=(G0=class extends Y{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new uF({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},uF=G0,G0);u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],yt.prototype,"cols",void 0),u([p({type:Ke,json:{write:!0}})],yt.prototype,"level",void 0),u([p({type:String,json:{write:!0}})],yt.prototype,"levelValue",void 0),u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],yt.prototype,"origin",void 0),u([p({type:Number,json:{write:!0}})],yt.prototype,"resolution",void 0),u([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],yt.prototype,"rows",void 0),u([p({type:Number,json:{write:!0}})],yt.prototype,"scale",void 0),yt=uF=u([M("esri.layers.support.LOD")],yt);let Hne=class Wne{constructor(e,i,r,s=zr()){this._level=e,this._row=i,this._col=r,this.extent=s}get id(){return this._id??(this._id=`${this.level}/${this.row}/${this.col}`),this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new Wne(e.level,e.row,e.col,e.extent)}};var Vv;const FG=new We({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var H0;let Ti=(H0=class extends Y{static create(e={}){const{resolutionFactor:i=1,scales:r,size:s=256,spatialReference:n=fe.WebMercator,numLODs:o=24}=e;if(!oa(n)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new yt({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=o-1;y>=0;y--)f.unshift(new yt({level:y,scale:m,resolution:m})),m*=2}return new Vv({dpi:96,lods:f,origin:new Fe(0,0,n),size:[s,s],spatialReference:n})}const a=Hn(n),l=e.origin?new Fe({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Fe(a?{x:a.origin[0],y:a.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),c=96,d=1/(va(n)*39.37*c),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*d;h.push(new yt({level:f,scale:m,resolution:y}))}else{let f=I_(n)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const m=Math.ceil(o/i);h.push(new yt({level:0,scale:f,resolution:f*d}));for(let y=1;y<m;y++){const v=f/2**i,b=v*d;h.push(new yt({level:y,scale:v,resolution:b})),f=v}}return new Vv({dpi:c,lods:h,origin:l,size:[s,s],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:i}=this;if(e&&i){const r=Hn(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-i.x)<=r.dx}return!1}readOrigin(e,i){return Fe.fromJSON({spatialReference:i.spatialReference,...e})}set lods(e){let i=0,r=0;const s=[],n=this._levelToLOD={};e&&(i=-1/0,r=1/0,e.forEach(o=>{s.push(o.scale),i=o.scale>i?o.scale:i,r=o.scale<r?o.scale:r,n[o.level]=o})),this._set("scales",s),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,i){return[i.cols,i.rows]}writeSize(e,i){i.cols=e[0],i.rows=e[1]}zoomToScale(e){const i=this.scales;if(e<=0)return i[0];if(e>=i.length-1)return i[i.length-1];const r=Math.floor(e),s=r+1;return i[r]/(i[r]/i[s])**(e-r)}scaleToZoom(e){const i=this.scales,r=i.length-1;let s=0;for(;s<r;s++){const n=i[s],o=i[s+1];if(n<=e)return s;if(o===e)return s+1;if(n>e&&o<e)return s+Math.log(n/e)/Math.log(n/o)}return s}tileAt(e,i,r,s){const n=this.lodAt(e);if(!n)return null;let o,a;if(typeof i=="number")o=i,a=r;else if(Mr(i.spatialReference,this.spatialReference))o=i.x,a=i.y,s=r;else{const d=qA(i,this.spatialReference);if(d==null)return null;o=d.x,a=d.y,s=r}const l=n.resolution*this.size[0],c=n.resolution*this.size[1];return s??(s=new Hne(0,0,0)),s.level=e,s.row=Math.floor((this.origin.y-a)/c+.001),s.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(s),s}updateTileInfo(e,i=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&i===1){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return!1;const s=e.level-r.level,n=r.resolution*this.size[0]/2**s,o=r.resolution*this.size[1]/2**s;return e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const i=this._upsampleLevels[e.level];return!(!i||i.parentLevel===-1)&&(e.level=i.parentLevel,e.row=Math.floor(e.row/i.factor+.001),e.col=Math.floor(e.col/i.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,i){const r=this.lodAt(i.level);if(r==null)return null;const{resolution:s}=r,n=s*this.size[0],o=s*this.size[1];return e[0]=this.origin.x+i.col*n,e[1]=this.origin.y-(i.row+1)*o,e[2]=e[0]+n,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Vv.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const i=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&i===0)return this;const r=[],s=this.lods.length-i;for(let n=0;n<s;n++){const o=n+i,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new yt({level:n,scale:a,resolution:l}))}return new Vv({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let i=null;for(let r=0;r<e.length;r++){const s=e[r];this._upsampleLevels[s.level]={parentLevel:i?i.level:-1,factor:i?i.resolution/s.resolution:0},i=s}}},Vv=H0,H0);u([p({type:Number,json:{write:!0}})],Ti.prototype,"compressionQuality",void 0),u([p({type:Number,json:{write:!0}})],Ti.prototype,"dpi",void 0),u([p({type:String,json:{read:FG.read,write:FG.write,origins:{"web-scene":{read:!1,write:!1}}}})],Ti.prototype,"format",void 0),u([p({readOnly:!0})],Ti.prototype,"isWrappable",null),u([p({type:Fe,json:{write:!0}})],Ti.prototype,"origin",void 0),u([Q("origin")],Ti.prototype,"readOrigin",null),u([p({type:[yt],value:null,json:{write:!0}})],Ti.prototype,"lods",null),u([p({readOnly:!0})],Ti.prototype,"scales",void 0),u([p({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Ti.prototype,"size",void 0),u([Q("size",["rows","cols"])],Ti.prototype,"readSize",null),u([oe("size",{cols:{type:Ke},rows:{type:Ke}})],Ti.prototype,"writeSize",null),u([p({type:fe,json:{write:!0}})],Ti.prototype,"spatialReference",void 0),Ti=Vv=u([M("esri.layers.support.TileInfo")],Ti);let Bw=class extends lS{constructor(e){super(e),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(X.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Bw=u([M("esri.support.AnalysesCollection")],Bw);const OT={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,r=this.values;return e<=i.xsmall?r.xsmall:e<=i.small?r.small:e<=i.medium?r.medium:e<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],r=e[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},dO={xsmall:544,small:768,medium:992,large:1200};function WMe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function hO(t,e){return e?OT[t].valueToClassName[e].split(" "):[]}const JMe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=dO}initialize(){this.addHandles(de(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Fi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!WMe(r)){const s=JSON.stringify(dO,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s),r=dO}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Fn.acquire(),s=Fn.acquire();let n,o=!1;for(n in OT){const a=this[n],l=OT[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==l&&(o=!0,this[n]=l,hO(n,a).forEach(c=>s.push(c)),hO(n,l).forEach(c=>r.push(c)))}o&&(this._applyClassNameChanges(r,s),Fn.release(r),Fn.release(s))}_applyClassNameChanges(r,s){const n=this.container;n&&(s.forEach(o=>n.classList.remove(o)),r.forEach(o=>n.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let s;for(s in OT)hO(s,this[s]).forEach(n=>r.classList.remove(n))}};return u([p()],i.prototype,"breakpoints",null),u([p()],i.prototype,"orientation",void 0),u([p()],i.prototype,"widthBreakpoint",void 0),u([p()],i.prototype,"heightBreakpoint",void 0),i=u([M("esri.views.BreakpointsOwner")],i),i};function $6(t){return typeof t=="string"?document.getElementById(t):t??null}function zG(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}let Iy=class extends _e{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,i,r={}){return this._installWatch(e,i,r,de)}addWhen(e,i,r={}){return this._installWatch(e,i,r,Ts)}addOnCollectionChange(e,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([ks(e,"after-changes",this._createSyncUpdatingCallback(),lr),ks(e,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),Et(()=>this.removeHandles(n))}addPromise(e){if(e==null)return e;const i=++this._handleId;this.addHandles(Et(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(kI)||this._set("updating",!1))}),i),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(i);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,n);const o=s(e,i,r);return this.addHandles(o,n),Et(()=>this.removeHandles(n))}_installSyncUpdatingWatch(e,i){const r=this._createSyncUpdatingCallback(),s=de(e,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(kI),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(y_(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(kI))}),kI)}}};u([p({readOnly:!0})],Iy.prototype,"updating",void 0),Iy=u([M("esri.core.support.UpdatingHandles")],Iy);const kI=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aC=function(){return aC=Object.assign||function(e){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},aC.apply(this,arguments)},dF={exports:{}},hr={},hF={exports:{}},Og={};function Jne(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function ZMe(t,e,i){}function YMe(t,e,i){}var KMe=/javascript\s*\:/img;function XMe(t,e){return KMe.test(e)?"":e}Og.whiteList=Jne();Og.getDefaultWhiteList=Jne;Og.onAttr=ZMe;Og.onIgnoreAttr=YMe;Og.safeAttrValue=XMe;var QMe={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},d1=QMe;function eCe(t,e){t=d1.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,r=!1,s=0,n=0,o="";function a(){if(!r){var d=d1.trim(t.slice(s,n)),h=d.indexOf(":");if(h!==-1){var f=d1.trim(d.slice(0,h)),m=d1.trim(d.slice(h+1));if(f){var y=e(s,o.length,f,m,d);y&&(o+=y+"; ")}}}s=n+1}for(;n<i;n++){var l=t[n];if(l==="/"&&t[n+1]==="*"){var c=t.indexOf("*/",n+2);if(c===-1)break;n=c+1,s=n+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return d1.trim(o)}var tCe=eCe,TI=Og,iCe=tCe;function jG(t){return t==null}function rCe(t){var e={};for(var i in t)e[i]=t[i];return e}function Zne(t){t=rCe(t||{}),t.whiteList=t.whiteList||TI.whiteList,t.onAttr=t.onAttr||TI.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||TI.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||TI.safeAttrValue,this.options=t}Zne.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=iCe(t,function(l,c,d,h,f){var m=r[d],y=!1;if(m===!0?y=m:typeof m=="function"?y=m(h):m instanceof RegExp&&(y=m.test(h)),y!==!0&&(y=!1),h=o(d,h),!!h){var v={position:c,sourcePosition:l,source:f,isWhite:y};if(y){var b=s(d,h,v);return jG(b)?d+":"+h:b}else{var b=n(d,h,v);if(!jG(b))return b}}});return a};var sCe=Zne;(function(t,e){var i=Og,r=sCe;function s(o,a){var l=new r(a);return l.process(o)}e=t.exports=s,e.FilterCSS=r;for(var n in i)e[n]=i[n]})(hF,hF.exports);var I6=hF.exports,k6={indexOf:function(t,e){var i,r;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var r,s;if(Array.prototype.forEach)return t.forEach(e,i);for(r=0,s=t.length;r<s;r++)e.call(i,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},nCe=I6.FilterCSS,oCe=I6.getDefaultWhiteList,lC=k6;function Yne(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Kne=new nCe;function aCe(t,e,i){}function lCe(t,e,i){}function cCe(t,e,i){}function uCe(t,e,i){}function Xne(t){return t.replace(hCe,"&lt;").replace(pCe,"&gt;")}function dCe(t,e,i,r){if(i=soe(i),e==="href"||e==="src"){if(i=lC.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(EI.lastIndex=0,EI.test(i))return""}else if(e==="style"){if(VG.lastIndex=0,VG.test(i)||(UG.lastIndex=0,UG.test(i)&&(EI.lastIndex=0,EI.test(i))))return"";r!==!1&&(r=r||Kne,i=r.process(i))}return i=noe(i),i}var hCe=/</g,pCe=/>/g,fCe=/"/g,mCe=/&quot;/g,yCe=/&#([a-zA-Z0-9]*);?/gim,gCe=/&colon;?/gim,vCe=/&newline;?/gim,EI=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,VG=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,UG=/u\s*r\s*l\s*\(.*/gi;function Qne(t){return t.replace(fCe,"&quot;")}function eoe(t){return t.replace(mCe,'"')}function toe(t){return t.replace(yCe,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function ioe(t){return t.replace(gCe,":").replace(vCe," ")}function roe(t){for(var e="",i=0,r=t.length;i<r;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return lC.trim(e)}function soe(t){return t=eoe(t),t=toe(t),t=ioe(t),t=roe(t),t}function noe(t){return t=Qne(t),t=Xne(t),t}function bCe(){return""}function wCe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function r(o){return i?!0:lC.indexOf(t,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",d=l.position+c.length;return s.push([n!==!1?n:l.position,d]),n=!1,c}else return n||(n=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return lC.forEach(s,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function _Ce(t){for(var e="",i=0;i<t.length;){var r=t.indexOf("<!--",i);if(r===-1){e+=t.slice(i);break}e+=t.slice(i,r);var s=t.indexOf("-->",r);if(s===-1)break;i=s+3}return e}function xCe(t){var e=t.split("");return e=e.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}hr.whiteList=Yne();hr.getDefaultWhiteList=Yne;hr.onTag=aCe;hr.onIgnoreTag=lCe;hr.onTagAttr=cCe;hr.onIgnoreTagAttr=uCe;hr.safeAttrValue=dCe;hr.escapeHtml=Xne;hr.escapeQuote=Qne;hr.unescapeQuote=eoe;hr.escapeHtmlEntities=toe;hr.escapeDangerHtml5Entities=ioe;hr.clearNonPrintableCharacter=roe;hr.friendlyAttrValue=soe;hr.escapeAttrValue=noe;hr.onIgnoreTagStripAll=bCe;hr.StripTagBody=wCe;hr.stripCommentTag=_Ce;hr.stripBlankChar=xCe;hr.cssFilter=Kne;hr.getDefaultCSSWhiteList=oCe;var l3={},$p=k6;function SCe(t){var e=$p.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=$p.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function $Ce(t){return t.slice(0,2)==="</"}function ICe(t,e,i){var r="",s=0,n=!1,o=!1,a=0,l=t.length,c="",d="";e:for(a=0;a<l;a++){var h=t.charAt(a);if(n===!1){if(h==="<"){n=a;continue}}else if(o===!1){if(h==="<"){r+=i(t.slice(s,a)),n=a,s=a;continue}if(h===">"){r+=i(t.slice(s,n)),d=t.slice(n,a+1),c=SCe(d),r+=e(n,r.length,c,d,$Ce(d)),s=a+1,n=!1;continue}if(h==='"'||h==="'")for(var f=1,m=t.charAt(a-f);m.trim()===""||m==="=";){if(m==="="){o=h;continue e}m=t.charAt(a-++f)}}else if(h===o){o=!1;continue}}return s<t.length&&(r+=i(t.substr(s))),r}var kCe=/[^a-zA-Z0-9\\_:.-]/gim;function TCe(t,e){var i=0,r=0,s=[],n=!1,o=t.length;function a(f,m){if(f=$p.trim(f),f=f.replace(kCe,"").toLowerCase(),!(f.length<1)){var y=e(f,m||"");y&&s.push(y)}}for(var l=0;l<o;l++){var c=t.charAt(l),d,h;if(n===!1&&c==="="){n=t.slice(i,l),i=l+1,r=t.charAt(i)==='"'||t.charAt(i)==="'"?i:MCe(t,l+1);continue}if(n!==!1&&l===r){if(h=t.indexOf(c,l+1),h===-1)break;d=$p.trim(t.slice(r+1,h)),a(n,d),n=!1,l=h,i=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),n===!1)if(h=ECe(t,l),h===-1){d=$p.trim(t.slice(i,l)),a(d),n=!1,i=l+1;continue}else{l=h-1;continue}else if(h=CCe(t,l-1),h===-1){d=$p.trim(t.slice(i,l)),d=BG(d),a(n,d),n=!1,i=l+1;continue}else continue}return i<t.length&&(n===!1?a(t.slice(i)):a(n,BG($p.trim(t.slice(i))))),$p.trim(s.join(" "))}function ECe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function MCe(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function CCe(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function PCe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function BG(t){return PCe(t)?t.substr(1,t.length-2):t}l3.parseTag=ICe;l3.parseAttr=TCe;var ACe=I6.FilterCSS,El=hr,ooe=l3,LCe=ooe.parseTag,OCe=ooe.parseAttr,RT=k6;function MI(t){return t==null}function RCe(t){var e=RT.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=RT.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=RT.trim(t.slice(0,-1))),{html:t,closing:i}}function NCe(t){var e={};for(var i in t)e[i]=t[i];return e}function DCe(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(r){return r.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function aoe(t){t=NCe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=El.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=DCe(t.whiteList||t.allowList):t.whiteList=El.whiteList,t.onTag=t.onTag||El.onTag,t.onTagAttr=t.onTagAttr||El.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||El.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||El.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||El.safeAttrValue,t.escapeHtml=t.escapeHtml||El.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new ACe(t.css))}aoe.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,c=i.escapeHtml,d=e.cssFilter;i.stripBlankChar&&(t=El.stripBlankChar(t)),i.allowCommentTag||(t=El.stripCommentTag(t));var h=!1;i.stripIgnoreTagBody&&(h=El.StripTagBody(i.stripIgnoreTagBody,n),n=h.onIgnoreTag);var f=LCe(t,function(m,y,v,b,w){var x={sourcePosition:m,position:y,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(r,v)},S=s(v,b,x);if(!MI(S))return S;if(x.isWhite){if(x.isClosing)return"</"+v+">";var $=RCe(b),T=r[v],C=OCe($.html,function(L,N){var D=RT.indexOf(T,L)!==-1,F=o(v,L,N,D);return MI(F)?D?(N=l(v,L,N,d),N?L+'="'+N+'"':L):(F=a(v,L,N,D),MI(F)?void 0:F):F});return b="<"+v,C&&(b+=" "+C),$.closing&&(b+=" /"),b+=">",b}else return S=n(v,b,x),MI(S)?c(b):S},c);return h&&(f=h.remove(f)),f};var FCe=aoe;(function(t,e){var i=hr,r=l3,s=FCe;function n(a,l){var c=new s(l);return c.process(a)}e=t.exports=n,e.filterXSS=n,e.FilterXSS=s,function(){for(var a in i)e[a]=i[a];for(var l in r)e[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(dF,dF.exports);var rv=dF.exports,zCe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},loe=function(){function t(e,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=aC(aC({},rv.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):rv.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;e&&!i?s=e:e&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(n==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=e[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new rv.FilterXSS(s)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?rv.escapeAttrValue(e):!n&&!s?rv.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,r,s):rv.safeAttrValue(e,i,r,s)},t.prototype.validate=function(e,i){i===void 0&&(i={});var r=this.sanitize(e,i);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(e.charCodeAt(s)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},t.prototype._iterateOverObject=function(e,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(e))n=e.reduce(function(a,l){var c=r.validate(l,i);return c.isValid?a.concat([l]):(s=!0,a.concat([c.sanitized]))},[]);else if(zCe(e)){var o=Object.keys(e);n=o.reduce(function(a,l){var c=e[l],d=r.validate(c,i);return d.isValid?a[l]=c:(s=!0,a[l]=d.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return s?n:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const jCe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],VCe=jCe.reduce((t,e)=>(t[e]=[],t),{}),UCe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],T6=new loe({whiteList:VCe,onTagAttr:(t,e,i)=>{const r=`${e}="${i}"`;if(UCe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),BCe=new loe({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),coe="http://www.w3.org/",c3=`${coe}2000/svg`,uoe=`${coe}1999/xlink`;let qG=[],E6=(t,e)=>{let i={};return Object.keys(t).forEach(r=>{i[r]=t[r]}),e&&Object.keys(e).forEach(r=>{i[r]=e[r]}),i},M6=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),doe=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},qCe=(t,e,i)=>{if(e.vnodeSelector!==""){for(let r=i;r<t.length;r++)if(M6(t[r],e))return r}return-1},pO=(t,e,i,r)=>{let s=t[e];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(M6(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},GCe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},pF=[],fF=!1,hoe=t=>{(t.children||[]).forEach(hoe),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},GG=()=>{fF=!1,pF.forEach(hoe),pF.length=0},HG=t=>{pF.push(t),fF||(fF=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(GG,{timeout:16}):setTimeout(GG,16))},WG=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),HG(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),HG(t))},HCe=(t,e,i)=>{if(!e)return;let r=i.eventHandlerInterceptor,s=Object.keys(e),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")yF(t,l,!0);else if(a==="classes"){let c=Object.keys(l),d=c.length;for(let h=0;h<d;h++){let f=c[h];l[f]&&t.classList.add(f)}}else if(a==="styles"){let c=Object.keys(l),d=c.length;for(let h=0;h<d;h++){let f=c[h],m=l[f];m&&(doe(m),i.styleApplyer(t,f,m))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&function(){let d=l;l=function(h){d.apply(this,[h]),h.target["oninput-value"]=h.target.value}}()),t[a]=l):i.namespace===c3?a==="href"?t.setAttributeNS(uoe,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=T6.sanitize(l):mF(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function mF(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let cC,WCe=(t,e,i)=>{if(e)for(let r of e)pS(r,t,void 0,i)},poe=(t,e,i)=>{WCe(t,e.children,i),e.text&&(t.textContent=e.text),HCe(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},pS=(t,e,i,r)=>{let s,n=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")s=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(s,i):e.appendChild(s);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let d=o.charAt(n-1),h=o.slice(n,l);d==="."?s.classList.add(h):d==="#"?s.id=h:(h==="svg"&&(r=E6(r,{namespace:c3})),r.namespace!==void 0?s=t.domNode=a.createElementNS(r.namespace,h):(s=t.domNode=t.domNode||a.createElement(h),h==="input"&&t.properties&&t.properties.type!==void 0&&s.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(s,i):s.parentNode!==e&&e.appendChild(s)),n=l+1}}poe(s,t,r)}},yF=(t,e,i)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,i)})},JCe=(t,e,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let l=n[a],c=i[l],d=e[l];if(l==="class")d!==c&&(yF(t,d,!1),yF(t,c,!0));else if(l==="classes"){let h=t.classList,f=Object.keys(c),m=f.length;for(let y=0;y<m;y++){let v=f[y],b=!!c[v];b!==!!d[v]&&(s=!0,b?h.add(v):h.remove(v))}}else if(l==="styles"){let h=Object.keys(c),f=h.length;for(let m=0;m<f;m++){let y=h[m],v=c[y];v!==d[y]&&(s=!0,v?(doe(v),r.styleApplyer(t,y,v)):r.styleApplyer(t,y,""))}}else if(c||typeof d!="string"||(c=""),l!=="value"||mF(t)){if(c!==d){let h=typeof c;h==="function"&&r.eventHandlerInterceptor||(r.namespace===c3?l==="href"?t.setAttributeNS(uoe,l,c):t.setAttribute(l,c):h==="string"?l==="innerHTML"?t[l]=T6.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):mF(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),s=!0)}}else{let h=t[l];h!==c&&(t["oninput-value"]?h===t["oninput-value"]:c!==d)&&(t[l]=c,t["oninput-value"]=void 0),c!==d&&(s=!0)}}return s},ZCe=(t,e,i,r,s)=>{if(i===r)return!1;r=r||qG;let n,o=(i=i||qG).length,a=r.length,l=0,c=0,d=!1;for(;c<a;){let h=l<o?i[l]:void 0,f=r[c];if(h!==void 0&&M6(h,f))d=cC(h,f,s)||d,l++;else{let m=qCe(i,f,l+1);if(m>=0){for(n=l;n<m;n++)WG(i[n]),pO(i,n,t,"removed");d=cC(i[m],f,s)||d,l=m+1}else pS(f,e,l<o?i[l].domNode:void 0,s),GCe(f),pO(r,c,t,"added")}c++}if(o>l)for(n=l;n<o;n++)WG(i[n]),pO(i,n,t,"removed");return d};cC=(t,e,i)=>{let r=t.domNode,s=!1;if(t===e)return!1;let n=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,s=!0,s}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=E6(i,{namespace:c3})),t.text!==e.text&&(n=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,n=ZCe(e,r,t.children,e.children,i)||n,n=JCe(r,t.properties,e.properties,i)||n,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,i,e.vnodeSelector,e.properties,e.children]);return n&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),s};let CI=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=i,cC(r,i,e)},domNode:t.domNode});const YCe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let W1=t=>E6(YCe,t),Hp={append:(t,e,i)=>(i=W1(i),pS(e,t,void 0,i),CI(e,i)),insertBefore:(t,e,i)=>(i=W1(i),pS(e,t.parentNode,t,i),CI(e,i)),merge:(t,e,i)=>(i=W1(i),e.domNode=t,poe(t,e,i),CI(e,i)),replace:(t,e,i)=>(i=W1(i),pS(e,t.parentNode,t,i),t.parentNode.removeChild(t),CI(e,i))},foe,KCe=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};foe=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let XCe=(t,e)=>{let i=t;return e.forEach(r=>{i=i&&i.children?foe(i.children,s=>s.domNode===r):void 0}),i},QCe=(t,e,i)=>{let r=function(s){i("domEvent",s);let n=e(),o=KCe(s.currentTarget,n.domNode);o.reverse();let a,l=XCe(n.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},gF=t=>{let e,i,r=W1(t),s=r.performanceLogger,n=!0,o=!1,a=[],l=[],c=(h,f,m)=>{let y,v=()=>y;r.eventHandlerInterceptor=QCe(e,v,s),y=h(f,m(),r),a.push(y),l.push(m)},d=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let h=0;h<a.length;h++){let f=l[h]();s("rendered",void 0),a[h].update(f),s("patched",void 0)}s("renderDone",void 0),n=!0}};return e={renderNow:d,scheduleRender:()=>{i||o||(i=requestAnimationFrame(d))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,e.scheduleRender()},append:(h,f)=>{c(Hp.append,h,f)},insertBefore:(h,f)=>{c(Hp.insertBefore,h,f)},merge:(h,f)=>{c(Hp.merge,h,f)},replace:(h,f)=>{c(Hp.replace,h,f)},detach:h=>{for(let f=0;f<l.length;f++)if(l[f]===h)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},sp=class extends _e{constructor(){super(...arguments),this.items=new ue,this._watchUpdatingTracking=new Iy,this._callbacks=new Map,this._projector=gF(),this._hiddenProjector=gF()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=e.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s?.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const r=this.computeBoundingRect(e),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,i){const r=!!i?.disableDecorations;if(!this.items.some(n=>n.visible&&!(r&&n.isDecoration)))return;const s=e.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([p({readOnly:!0})],sp.prototype,"surface",void 0),u([p({readOnly:!0})],sp.prototype,"items",void 0),u([p({readOnly:!0})],sp.prototype,"needsRender",null),u([p({readOnly:!0})],sp.prototype,"_watchUpdatingTracking",void 0),u([p({readOnly:!0})],sp.prototype,"updating",null),sp=u([M("esri.views.overlay.ViewOverlay")],sp);const JG=sp,fO=[0,0];function ePe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return fO[0]=i.left+(e?.pageXOffset??0),fO[1]=i.top+(e?.pageYOffset??0),fO}function ZG(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function tPe(t){const e=document.createElement("div");return t.appendChild(e),e}const sv=16,h1=750,iPe=512,rPe=2,sPe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._freqInfo={freq:sv,time:h1},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([de(()=>this.cursor,s=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",s)}),de(()=>this.navigating,s=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",s.toString())}),de(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([de(()=>this.ui,(s,n)=>this._handleUIChange(s,n),Fi),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const s=this._get("container"),n=$6(r);if(n||typeof r!="string"||X.getLogger(this).error("#container",`element with id '${r}' not found`),s===n)return;if(this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(ZG(this.root),this._set("root",null)),this.userContent&&(zG(this.userContent,s),ZG(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",zG(n,o),n.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",n.insertBefore(a,n.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const c=new JG;a.appendChild(c.surface),this._set("overlay",c),this.addHandles(de(()=>c.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Tw({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=_i(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const s=this._get("ui");s!==r&&s?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,s,n){const o=this.position;return r-=o?o[0]:0,s-=o?o[1]:0,n?(n[0]=r,n[1]=s):n=[r,s],n}containerToPage(r,s,n){const o=this.position;return r+=o?o[0]:0,s+=o?o[1]:0,n?(n[0]=r,n[1]=s):n=[r,s],n}_updateAria(){const{surface:r,aria:s}=this;r&&(r.ariaLabelledByElements=s?.labelledByElements??null,r.ariaDescribedByElements=s?.describedByElements??null,r.ariaLabel=s?.label??null,r.ariaDescription=s?.description??null)}_handleUIChange(r,s){this.removeHandles("ui"),s&&s!==r&&s.destroy(),r&&(r.view=this,this.addHandles(de(()=>this.root,n=>{r.container=n?tPe(n):null},Fi),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=sv,r.time=h1;const s=Tw({prepare:a=>{const l=this._measure(),c=this._freqInfo;if(c.time+=a.deltaTime,l&&(c.freq=sv,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const d=this._position();c.freq=d||l?sv:Math.min(h1,c.freq*rPe),!l&&c.freq>=iPe&&(s.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(a=>{r.freq=sv,r.time=h1,s.resume()});this.container!=null&&n.observe(this.container);const o=Et(()=>n.disconnect());this.addHandles([ah(window,"resize",()=>{r.freq=sv,r.time=h1,s.resume()}),o,s],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,s=r?r.clientWidth:0,n=r?r.clientHeight:0;if(s===0||n===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return s===o&&n===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:s,height:n}),!0)}_position(){const r=this.container,s=this.position,n=r&&ePe(r);return!!n&&(!s||n[0]!==s[0]||n[1]!==s[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([p()],i.prototype,"aria",void 0),u([p()],i.prototype,"container",null),u([p({readOnly:!0})],i.prototype,"focused",null),u([p({readOnly:!0})],i.prototype,"height",void 0),u([p()],i.prototype,"messagesCommon",void 0),u([p({type:JG})],i.prototype,"overlay",void 0),u([p({readOnly:!0})],i.prototype,"position",void 0),u([p({readOnly:!0})],i.prototype,"resizing",void 0),u([p({readOnly:!0})],i.prototype,"root",void 0),u([p({value:null,readOnly:!0})],i.prototype,"size",null),u([p({readOnly:!0})],i.prototype,"surface",void 0),u([p({readOnly:!0})],i.prototype,"suspended",void 0),u([p({nonNullable:!0})],i.prototype,"ui",null),u([p({readOnly:!0})],i.prototype,"userContent",void 0),u([p({readOnly:!0})],i.prototype,"width",void 0),u([p()],i.prototype,"widthBreakpoint",void 0),i=u([M("esri.views.DOMContainer")],i),i};function nPe(t,e,i){return pU(t.map((r,s)=>e.apply(i,[r,s])))}async function oPe(t,e,i){return(await pU(t.map((r,s)=>e.apply(i,[r,s])))).map(r=>r.value)}function C6(t){return{ok:!0,value:t}}function P6(t){return{ok:!1,error:t}}function aPe(t){return t!=null&&t.ok===!0?t.value:null}function lPe(t){return t!=null&&t.ok===!1?t.error:null}async function u3(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return C6(await t)}catch(e){return P6(e)}}async function cPe(t){try{return C6(await t)}catch(e){return Ss(e),P6(e)}}function A_(t,e){return new np(t,e)}let np=class extends _e{get value(){return aPe(this._result)}get error(){return lPe(this._result)}get finished(){return this._result!=null}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=sg(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(s=>{this._result=C6(s),this._cleanup()},s=>{this._result=P6(s),this._cleanup()}),this._abortHandle=as(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=_i(this._abortHandle),this._abortController=null}};u([p()],np.prototype,"value",null),u([p()],np.prototype,"error",null),u([p()],np.prototype,"finished",null),u([p()],np.prototype,"promise",void 0),u([p()],np.prototype,"_result",void 0),np=u([M("esri.core.asyncUtils.ReactiveTask")],np);const PI="popup",YG="manual";function ku(t){return t!=null&&"open"in t&&"declaredClass"in t}function bh(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function uPe(t,e,i){const[r,s,n]=e;if(i){const[o,a,l]=i;o&&ku(a)&&(a.view=null,o.remove(a,PI),a!==s&&s&&a.destroy()),o&&l&&bh(l)&&(l.view=null,o.remove(l,PI),l!==n&&n&&l.remove())}r&&ku(s)&&(s.view=t,r.add(s,{key:PI,position:YG,internal:!0})),r&&n&&bh(n)&&(n.view=t,r.add(n,{key:PI,position:YG,internal:!0}))}async function dPe(t,e){const{popup:i,popupElement:r}=t;ku(i)?await AI(i,null,e):r&&bh(r)?await AI(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:s,popupElement:n}=t;ku(s)&&!t.destroyed&&t.ready&&t.popupEnabled?await AI(s,null,e):n&&bh(n)&&await AI(null,n,e)})}function hPe(t,e){const{popup:i,popupElement:r}=t;if(ku(i))return i.open(e);r&&bh(r)&&r.open(e)}function pPe(t,e){ku(t)&&t.close(),e&&bh(e)&&(e.visible=!1)}async function AI(t,e,i){if(ku(t)){const r=await t.viewModel.handleViewClick(i);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&bh(e)){const r=await e.handleViewClick(i);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const fPe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,mPe="screenUtils.toPt: input not recognized!",moe=96;function zt(t){return t?t/72*moe:0}function Zt(t){return t?72*t/moe:0}function Tt(t){if(typeof t=="string"){const e=t.match(fPe);if(e){const i=Number(e[1]),r=e[3]&&e[3].toLowerCase(),s=t.startsWith("-"),n=r==="px"?Zt(i):i;return s?-n:n}return console.warn(mPe),null}return t}function ls(t=0,e=0){return{x:t,y:e}}function fpt(t){return t?ls(t.x,t.y):null}function mpt(t=0,e=0){return[t,e]}function ypt(t=0,e=0,i=0){return[t,e,i]}function gpt(t){return t}function vpt(t){return t}function bpt(t){return t}function wpt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}const yoe=H("mac")?"Meta":"Control",yPe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),gPe=t=>yPe.has(t);let vPe=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},hs=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof e=="string"?new vPe(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=d=>{const h=this._incoming[d.match.eventType];if(h){const f=h.indexOf(d);h.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new bPe(n,r,{onPause:a,onRemove:a,onResume:d=>{const h=this._incoming[d.match.eventType];h&&!h.includes(d)&&(h.push(d),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[n.eventType];return c||(c=[],this._incoming[n.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new wPe(e,{onEmit:(r,s,n,o)=>{this._manager?.emit(r.eventType,s,n,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},bPe=class{constructor(e,i,r){this.match=e,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},wPe=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,r){this._removed||this._handler.onEmit(this,e,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},_Pe=class extends hs{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s,native:{pointerId:n}}=e;i===this._value&&this._x===r&&this._y===s&&this._id===n||(this._value=i,this._x=r,this._y=s,this._id=n,this._onChange(n,i,r,s))}},xPe=class extends hs{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=kw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},SPe=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in e){const s=e[r],n=new _te(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=h1e(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const r of i.acquired)jB(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),r=this._properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)s=r.pool.acquire(),r.acquired.push(s);return Rte(),s}_release(){for(const e in this._properties){const i=this._properties[e];let r=0;for(const s of i.acquired)jB(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},$Pe=class{constructor(){this.id=0,this.type="mouse",this.location=ls()}},gl=class extends _e{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=yoe,this._propertiesPool=new SPe({latestPointerInfo:()=>new $Pe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,i,r=uh.INTERNAL){if(this._nameToGroup[e]||i.length===0)return;const s={name:e,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,d,h)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,h,d)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):X.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)gPe(a)||i.add(a)}s.active=n}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,r,s){const n=this._latestPointerInfo;if(n==null||n.id!==e||n.type!==i||n.location.x!==r||n.location.y!==s){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=i,o.location.x=r,o.location.y=s,this._latestPointerInfo=o}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,i);const r=this._testTimestamp??i.native?.timestamp,s=i.native?.cancelable;this._emitInputEventFromSource(e,i,r,s)}_updateKeyModifiers(e,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&n(a,e==="key-down")}const o=i.native;n("Alt",!!o?.altKey),n("Control",!!o?.ctrlKey),n("Ctrl",!!o?.ctrlKey),n("Shift",!!o?.shiftKey),n("Meta",!!o?.metaKey),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new _Pe((e,i,r,s)=>this._setLatestPointer(e,i,r,s)),this._multiTouchHandler=new xPe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],uh.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,uh.INTERNAL)}_setPointerCapture(e,i,r,s){const n=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,r,s){this._emitInputEvent(0,e,i,r,s)}_emitInputEvent(e,i,r,s,n,o){const a=s??this._currentPropagation?.timestamp??performance.now(),l=n??!1,c={event:new IPe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new g$,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:i,priorityIndex:r}=e.events.pop(),s=i.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!i.shouldStopPropagation()&&e.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const i=new g$;i.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const r of e){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get test(){}};u([p({readOnly:!0})],gl.prototype,"hasPendingInputs",null),u([p({constructOnly:!0})],gl.prototype,"eventSource",void 0),u([p({constructOnly:!0})],gl.prototype,"recognizers",void 0),u([p()],gl.prototype,"multiTouchActive",null),u([p()],gl.prototype,"_latestPointerInfo",void 0),u([p()],gl.prototype,"latestPointerInfo",null),u([p()],gl.prototype,"_paused",void 0),u([p({readOnly:!0})],gl.prototype,"updating",null),gl=u([M("esri.views.input.InputManager")],gl);let IPe=class{constructor(e,i,r,s,n){this.type=e,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const i=(r,s)=>{this._propagationState&=-3;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof e=="function"?e():e).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const uh={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},kPe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([de(()=>[this.ui,this.popup,this.popupElement],([r,s,n],o)=>{const[a,l,c]=o??[];uPe(this,[r,s,n],[a,l,c])},Vs),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&dPe(this,r)},uh.WIDGET)]),g_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>K(()=>import("./Popup-CQo_rTbJ.js").then(r=>r.P),__vite__mapDeps([131,132,133,134,135,136,137,138,139,58,140,141])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(ku(this.popup))return this.popup.open(r);if(this.popupElement&&bh(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void X.getLogger(this).error(new R("view:null-popup","Popup is null and can't be opened"));hPe(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),pPe(this.popup,this.popupElement)}async fetchPopupFeatures(r,s){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,s),s)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!ku(this.popup))return this._popupSetupTask=A_(async r=>{if(!this.popupEnabled||!bh(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),Gt(r),customElements.get("arcgis-popup")||X.getLogger(this).error(new R("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:s}=await K(()=>import("./Popup-CQo_rTbJ.js").then(o=>o.P),__vite__mapDeps([131,132,133,134,135,136,137,138,139,58,140,141]));if(Gt(r),!this.popup||ku(this.popup))return;const n=this.popup;if("open"in n||"close"in n){const{open:o,close:a,...l}=n;this.popup=new s({...l})}else this.popup=new s(n)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:s},n){const o=[],a=[];let l=!1;const c=z_e(n,H("popup-view-fetch-timeout")??EPe),d=m=>{const y=new TPe(m);return a.push(y),o.push(y.promise),y},h=m=>{const y=a.at(-1);return y&&y.layerView===m&&!l?y:d(m)};for(const m of s)"graphic"in m?(h(m.layerView).graphics.push(m.graphic),l=!1):(o.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,c)),l=!0);a.forEach(m=>m.resolve(c));const f=F_e(o).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:r}}async _getPopupHits(r,s){const{hits:n,location:o}=await this.popupHitTest(r);Gt(s);const a=[];for(const l of n)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,s)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;a.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&a.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,s){return r&&!!r.getEffectivePopupTemplate(s?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([p()],i.prototype,"popup",void 0),u([p()],i.prototype,"popupElement",void 0),u([p()],i.prototype,"popupEnabled",void 0),i=u([M("esri.views.PopupView")],i),i};let TPe=class{constructor(e){this.layerView=e,this._resolver=Is(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const EPe=5e3;let MPe=class{constructor(){this._resolver=Is(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(jt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Is(),i=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==r||Yi(s)||this._resolver.reject(s)}),e.resolve()}};const d3=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._promiseProps=new MPe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,s){return this._promiseProps.promise.then(()=>this).then(r,s)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(g_e(r)),this._promiseProps.addResolvingPromise(r.promise))}};return i=u([M("esri.core.Promise")],i),i},A6=d3(_e),CPe="not-loaded",PPe="loading",APe="failed",KG="loaded",L6=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const n=this.load.bind(this);this.load=o=>{const a=new Promise((l,c)=>{const d=hU(o,c);this.destroyed&&c(new R("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{d&&d.remove()})});if(this.loadStatus===CPe){this._set("loadStatus",PPe);const l=this._loadController=new AbortController;n({signal:l.signal})}return s(),a}})),this.when(()=>{this._set("loadStatus",KG),this._loadController=null},s=>{this.destroyed||(this._set("loadStatus",APe),this._set("loadError",s),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=sg(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===KG}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new R("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return u([p({readOnly:!0})],i.prototype,"loaded",null),u([p({readOnly:!0})],i.prototype,"loadError",void 0),u([p({clonable:!1})],i.prototype,"loadStatus",void 0),u([p({type:[pa],readOnly:!0})],i.prototype,"loadWarnings",null),i=u([M("esri.core.Loadable")],i),i},zf=L6(A6);function vF(t){return!(!t||!t.load)}async function L_(t,e){return await t.load(),LPe(t,e)}async function LPe(t,e){const i=[],r=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?r(...o):ue.isCollection(o)?o.forEach(a=>r(a)):vF(o)&&i.push(o))};e(r);let s=null;if(await oPe(i,async n=>{const o=await u3(OPe(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return t}function OPe(t){return"loadAll"in t&&typeof t.loadAll=="function"}let LI;function RPe(t){return LI&&!LI.destroyed||(LI=t()),LI}var bF;const NPe=new We({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let xr=bF=class extends _e{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new bF({categories:this.categories?U(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=qA(this.extent,fe.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&t.extraQuery&&(s="("+s+")"+t.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>NPe.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...e,...n}}}};u([p()],xr.prototype,"categories",void 0),u([p()],xr.prototype,"disableExtraQuery",void 0),u([p({type:Pe})],xr.prototype,"extent",void 0),u([p()],xr.prototype,"filter",void 0),u([p()],xr.prototype,"num",void 0),u([p()],xr.prototype,"query",void 0),u([p()],xr.prototype,"sortField",void 0),u([p()],xr.prototype,"sortOrder",null),u([p()],xr.prototype,"start",void 0),xr=bF=u([M("esri.portal.PortalQueryParams")],xr);var wF;let vr=wF=class extends Y{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const i=e.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):i})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new R("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new wF({sourceJSON:t});return e.read(t),e}queryItems(t,e){let i=Mi(xr,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new xr,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",e)):(i=i?i.clone():new xr,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,e))}_fetchCategorySchemaSet(t,e){const i=this.portal;return i.fetchSelf(i.authMode,!0,e).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new xr({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,e)}throw new R("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],n=new xr({num:1,query:`typekeywords:"${t}"`});return s.queryItems(n,e)}throw new R("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};u([p()],vr.prototype,"access",void 0),u([p({type:Date})],vr.prototype,"created",void 0),u([p()],vr.prototype,"description",void 0),u([p()],vr.prototype,"id",void 0),u([p()],vr.prototype,"isInvitationOnly",void 0),u([p({type:Date})],vr.prototype,"modified",void 0),u([p()],vr.prototype,"owner",void 0),u([p()],vr.prototype,"portal",void 0),u([p()],vr.prototype,"snippet",void 0),u([p()],vr.prototype,"sortField",void 0),u([p()],vr.prototype,"sortOrder",void 0),u([p()],vr.prototype,"sourceJSON",void 0),u([p()],vr.prototype,"tags",void 0),u([p()],vr.prototype,"thumbnail",void 0),u([p({readOnly:!0})],vr.prototype,"thumbnailUrl",null),u([p()],vr.prototype,"title",void 0),u([p({readOnly:!0})],vr.prototype,"url",null),vr=wF=u([M("esri.portal.PortalGroup")],vr);let pm=class extends _e{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([p()],pm.prototype,"nextQueryParams",void 0),u([p()],pm.prototype,"queryParams",void 0),u([p()],pm.prototype,"results",void 0),u([p()],pm.prototype,"total",void 0),pm=u([M("esri.portal.PortalQueryResult")],pm);let id=class extends Y{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new R("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([p({type:Date})],id.prototype,"created",void 0),u([p()],id.prototype,"id",void 0),u([p()],id.prototype,"portal",void 0),u([p()],id.prototype,"title",void 0),u([p({readOnly:!0})],id.prototype,"url",null),u([p()],id.prototype,"username",void 0),id=u([M("esri.portal.PortalFolder")],id);var _F;let ti=_F=class extends Y{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,i=t?.data,r=t?.folder,s={method:"post"};e&&(s.query=e.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let i=this.userContentUrl;t.ownerFolder&&(i+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=t.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:e}},o=await this.portal.request(i,n);for(const a of o.results){const l=t.find(h=>a.itemId===h.id),c=a.success;let d=null;c?(l.id=null,l.portal=null):a.error&&(d=new R("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:d})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(r=>{const s=id.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const r=vr.fromJSON(i);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??(t={});let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:i}=await K(()=>Promise.resolve().then(()=>goe),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},s=await this.portal.request(e,{query:r});let n;return s?.items?(n=s.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new vr({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new R("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const i=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(i+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new R("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new _F({sourceJSON:t});return e.read(t),e}};u([p()],ti.prototype,"access",void 0),u([p({type:Date})],ti.prototype,"created",void 0),u([p()],ti.prototype,"culture",void 0),u([p()],ti.prototype,"description",void 0),u([p()],ti.prototype,"email",void 0),u([p()],ti.prototype,"favGroupId",void 0),u([p()],ti.prototype,"fullName",void 0),u([p()],ti.prototype,"id",void 0),u([p({type:Date})],ti.prototype,"modified",void 0),u([p()],ti.prototype,"orgId",void 0),u([p()],ti.prototype,"portal",void 0),u([p()],ti.prototype,"preferredView",void 0),u([p()],ti.prototype,"privileges",void 0),u([p()],ti.prototype,"region",void 0),u([p()],ti.prototype,"role",void 0),u([p()],ti.prototype,"roleId",void 0),u([p()],ti.prototype,"sourceJSON",void 0),u([p()],ti.prototype,"thumbnail",void 0),u([p({readOnly:!0})],ti.prototype,"thumbnailUrl",null),u([p()],ti.prototype,"units",void 0),u([p({readOnly:!0})],ti.prototype,"userContentUrl",null),u([p({readOnly:!0})],ti.prototype,"url",null),u([p()],ti.prototype,"username",void 0),u([p()],ti.prototype,"userLicenseTypeId",void 0),u([p()],ti.prototype,"userType",void 0),ti=_F=u([M("esri.portal.PortalUser")],ti);var Oo;let p1;const XG={PortalGroup:()=>Promise.resolve({default:vr}),PortalItem:()=>K(()=>Promise.resolve().then(()=>goe),void 0),PortalUser:()=>Promise.resolve({default:ti})};var Hc;let ce=(Hc=class extends Ph(zf){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=lt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){QG.unregister(this),this.defaultBasemap=bi(this.defaultBasemap),this.defaultDevBasemap=bi(this.defaultDevBasemap),this.defaultVectorBasemap=bi(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=_i(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const i of e)lt.request.trustedServers.includes(i)||lt.request.trustedServers.push(i);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,i=!e||this.canSearchPublic;return this.id&&!i?` AND orgid:${this.id}`:null}get hasAPIKey(){return MSe(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const i=e.indexOf("/sharing");e=i>0?e.slice(0,i):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,i=this.thumbnail;return e&&i?this._normalizeSSL(e+"/portals/self/resources/"+i):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let i=null;return e&&(i=ti.fromJSON(e),i.portal=this),i}load(e){const i=K(async()=>{const{default:r}=await Promise.resolve().then(()=>aAe);return{default:r}},void 0).then(({default:r})=>{Gt(e),p1=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&ft){const s=ft;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Oo.AUTH_MODE_AUTO&&this.authMode!==Oo.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",DPe(new WeakRef(this))),QG.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),i=(await K(async()=>{const{default:r}=await import("./ElevationLayer-rUEo_IaH.js");return{default:r}},__vite__mapDeps([142,143]))).default;return e?e.map(r=>new i({id:r.id,url:r.url})):[]}async fetchBasemaps(e,i){const r=await this._fetchBasemaps(e,i);if(i?.include3d===!0&&this.use3dBasemaps!==!1){const s=await this._fetchBasemaps3D(e,i);r.unshift(...s)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const i=new xr;i.query=this.default3DBasemapQuery,i.disableExtraQuery=!0;const r=(await this.queryItems(i,e)).results.find(s=>s.type==="Web Scene");return r?new p1({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(i=>i.categorySchema):Xr(e)?Promise.reject(jt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(i=>i.classificationSchema):null}fetchFeaturedGroups(e){const i=this.featuredGroups,r=new xr({num:100,sortField:"title"});if(i?.length){const s=[];for(const n of i)s.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=s.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Xr(e)?Promise.reject(jt()):Promise.resolve([])}fetchRegions(e){const i=this.user?.culture||this.culture||ko();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:i}})}fetchSettings(e){const i=this.user?.culture||this.culture||ko();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:i}})}static getDefault(){return RPe(()=>new Oo)}queryGroups(e,i){return this.queryPortal("/community/groups",e,"PortalGroup",i)}queryItems(e,i){return this.queryPortal("/search",e,"PortalItem",i)}queryUsers(e,i){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",i)}fetchSelf(e=this.authMode,i=!1,r){const s=this.restUrl+"/portals/self",n={authMode:e,query:{culture:ko().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),i&&(n.query.default=!0),this.request(s,n)}queryPortal(e,i,r,s){const n=Mi(xr,i),o=a=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...s}).then(l=>{const c=n.clone();return c.start=l.nextStart,new pm({nextQueryParams:c,queryParams:n,total:l.total,results:Oo._resultsToTypedArray(a,{portal:this},l,s)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(Ss(c),l)));return r&&XG[r]?XG[r]().then(({default:a})=>(Gt(s),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new R("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Oo.AUTH_MODE_ANONYMOUS||this.authMode===Oo.AUTH_MODE_NO_PROMPT&&!ft)return Promise.reject(new R("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=i=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(i||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=i,this.fetchSelf("immediate"))):this.user&&this.credential===i?null:(this.credential=i,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return ft?ft.getCredential(this.restUrl,{prompt:this.authMode!==Oo.AUTH_MODE_NO_PROMPT}).then(i=>e(i)):e(this.credential)}normalizeUrl(e){const i=this.credential?.token;return this._normalizeSSL(i?e+(e.includes("?")?"&":"?")+"token="+i:e)}requestToTypedArray(e,i,r){return this.request(e,i).then(s=>{const n=Oo._resultsToTypedArray(r,{portal:this},s);return Promise.all(n.map(o=>typeof o.when=="function"?o.when():s)).then(()=>n,()=>n)})}request(e,i={}){const r={f:"json",...i.query},{authMode:s=this.authMode===Oo.AUTH_MODE_ANONYMOUS||this.authMode===Oo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=i,d={authMode:s,body:n,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return i.withCredentials&&(d.withCredentials=!0),xe(this._normalizeSSL(e),d).then(h=>h.data)}toJSON(){throw new R("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Oo({sourceJSON:e})}_getHelperService(e){const i=this.helperServices?.[e];if(!i)throw new R("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return i}async _fetchBasemaps(e,i){const r=new xr;r.query=e||(ED()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const s=await this.queryGroups(r,i);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(r,i);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new p1({portalItem:a})):[]}async _fetchBasemaps3D(e,i){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(ED())return[];const s=new xr({query:r,disableExtraQuery:!0}),n=await this.queryGroups(s,i);if(!n.total)return[];const o=n.results[0];s.num=100,s.query='type:"Web Scene"',s.sortField=o.sortField||"name",s.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(s,i);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new p1({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const i=p1.fromJSON(e);return i.portalItem={portal:this},i}return null}static _resultsToTypedArray(e,i,r,s){let n;if(r){const o=s!=null?s.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||i)&&(n=n.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,i);return typeof l.load=="function"&&l.load(o),l}))}else n=[];return n}},Oo=Hc,Hc.AUTH_MODE_ANONYMOUS="anonymous",Hc.AUTH_MODE_AUTO="auto",Hc.AUTH_MODE_IMMEDIATE="immediate",Hc.AUTH_MODE_NO_PROMPT="no-prompt",Hc);u([p()],ce.prototype,"access",void 0),u([p()],ce.prototype,"allSSL",void 0),u([p()],ce.prototype,"authMode",void 0),u([p()],ce.prototype,"authorizedCrossOriginDomains",void 0),u([Q("authorizedCrossOriginDomains")],ce.prototype,"readAuthorizedCrossOriginDomains",null),u([p()],ce.prototype,"basemapGalleryGroupQuery",void 0),u([p({json:{name:"3DBasemapGalleryGroupQuery"}})],ce.prototype,"basemapGalleryGroupQuery3D",void 0),u([p({json:{name:"g3DTilesGalleryGroupQuery"}})],ce.prototype,"g3DTilesGalleryGroupQuery",void 0),u([p({json:{name:"g3dTilesEnabled"}})],ce.prototype,"g3dTilesEnabled",void 0),u([p()],ce.prototype,"bingKey",void 0),u([p()],ce.prototype,"canListApps",void 0),u([p()],ce.prototype,"canListData",void 0),u([p()],ce.prototype,"canListPreProvisionedItems",void 0),u([p()],ce.prototype,"canProvisionDirectPurchase",void 0),u([p()],ce.prototype,"canSearchPublic",void 0),u([p()],ce.prototype,"canShareBingPublic",void 0),u([p()],ce.prototype,"canSharePublic",void 0),u([p()],ce.prototype,"canSignInArcGIS",void 0),u([p()],ce.prototype,"canSignInIDP",void 0),u([p()],ce.prototype,"colorSetsGroupQuery",void 0),u([p()],ce.prototype,"commentsEnabled",void 0),u([p({type:Date})],ce.prototype,"created",void 0),u([p()],ce.prototype,"credential",void 0),u([p()],ce.prototype,"culture",void 0),u([p()],ce.prototype,"currentVersion",void 0),u([p()],ce.prototype,"customBaseUrl",void 0),u([p()],ce.prototype,"default3DBasemapQuery",void 0),u([p()],ce.prototype,"defaultBasemap",void 0),u([Q("defaultBasemap")],ce.prototype,"readDefaultBasemap",null),u([p()],ce.prototype,"defaultDevBasemap",void 0),u([Q("defaultDevBasemap")],ce.prototype,"readDefaultDevBasemap",null),u([p({type:Pe})],ce.prototype,"defaultExtent",void 0),u([p()],ce.prototype,"defaultVectorBasemap",void 0),u([Q("defaultVectorBasemap")],ce.prototype,"readDefaultVectorBasemap",null),u([p()],ce.prototype,"description",void 0),u([p()],ce.prototype,"devBasemapGalleryGroupQuery",void 0),u([p()],ce.prototype,"eueiEnabled",void 0),u([p({readOnly:!0})],ce.prototype,"extraQuery",null),u([p()],ce.prototype,"featuredGroups",void 0),u([p()],ce.prototype,"featuredItemsGroupQuery",void 0),u([p()],ce.prototype,"galleryTemplatesGroupQuery",void 0),u([p()],ce.prototype,"layoutGroupQuery",void 0),u([p()],ce.prototype,"livingAtlasGroupQuery",void 0),u([p({readOnly:!0})],ce.prototype,"hasAPIKey",null),u([p()],ce.prototype,"hasCategorySchema",void 0),u([p()],ce.prototype,"hasClassificationSchema",void 0),u([p()],ce.prototype,"helpBase",void 0),u([p()],ce.prototype,"helperServices",void 0),u([p()],ce.prototype,"helpMap",void 0),u([p()],ce.prototype,"homePageFeaturedContent",void 0),u([p()],ce.prototype,"homePageFeaturedContentCount",void 0),u([p()],ce.prototype,"httpPort",void 0),u([p()],ce.prototype,"httpsPort",void 0),u([p()],ce.prototype,"id",void 0),u([p()],ce.prototype,"ipCntryCode",void 0),u([p({readOnly:!0})],ce.prototype,"isOrganization",null),u([p()],ce.prototype,"isPortal",void 0),u([p()],ce.prototype,"isReadOnly",void 0),u([p({readOnly:!0})],ce.prototype,"itemPageUrl",null),u([p()],ce.prototype,"layerTemplatesGroupQuery",void 0),u([p()],ce.prototype,"maxTokenExpirationMinutes",void 0),u([p({type:Date})],ce.prototype,"modified",void 0),u([p()],ce.prototype,"name",void 0),u([p()],ce.prototype,"portalHostname",void 0),u([p()],ce.prototype,"portalMode",void 0),u([p()],ce.prototype,"portalProperties",void 0),u([p()],ce.prototype,"region",void 0),u([p()],ce.prototype,"recycleBinEnabled",void 0),u([p({readOnly:!0})],ce.prototype,"restUrl",null),u([p()],ce.prototype,"rotatorPanels",void 0),u([p()],ce.prototype,"showHomePageDescription",void 0),u([p()],ce.prototype,"sourceJSON",void 0),u([p()],ce.prototype,"staticImagesUrl",void 0),u([p({json:{name:"2DStylesGroupQuery"}})],ce.prototype,"stylesGroupQuery2d",void 0),u([p({json:{name:"stylesGroupQuery"}})],ce.prototype,"stylesGroupQuery3d",void 0),u([p()],ce.prototype,"supportsHostedServices",void 0),u([p()],ce.prototype,"symbolSetsGroupQuery",void 0),u([p()],ce.prototype,"templatesGroupQuery",void 0),u([p()],ce.prototype,"thumbnail",void 0),u([p({readOnly:!0})],ce.prototype,"thumbnailUrl",null),u([p()],ce.prototype,"units",void 0),u([p()],ce.prototype,"url",void 0),u([p()],ce.prototype,"urlKey",void 0),u([Q("urlKey")],ce.prototype,"readUrlKey",null),u([p()],ce.prototype,"user",void 0),u([Q("user")],ce.prototype,"readUser",null),u([p()],ce.prototype,"use3dBasemaps",void 0),u([p()],ce.prototype,"useDefault3dBasemap",void 0),u([p()],ce.prototype,"useStandardizedQuery",void 0),u([p()],ce.prototype,"useVectorBasemaps",void 0),u([p()],ce.prototype,"vectorBasemapGalleryGroupQuery",void 0),ce=Oo=u([M("esri.portal.Portal")],ce);const QG=new FinalizationRegistry(t=>{t.remove()});function DPe(t){const e=ft;return()=>{const i=t.deref();i&&e.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let rd=class extends _e{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:eH(e.path,e.portalItem)}:e}set path(e){e!=null&&gn(e)?X.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return eH(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const r=this.cdnUrl;if(r==null)throw new R("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(e,i){const{addOrUpdateResources:r}=await K(()=>import("./resourceUtils-DQnprA-L.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function eH(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&gn(t)&&(t=PU(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([p()],rd.prototype,"portalItem",void 0),u([p({type:String,value:null})],rd.prototype,"path",null),u([Mt("path")],rd.prototype,"_castPath",null),u([p({type:String,readOnly:!0})],rd.prototype,"url",null),u([p({type:String,readOnly:!0})],rd.prototype,"cdnUrl",null),u([p({type:String,readOnly:!0})],rd.prototype,"itemRelativeUrl",null),rd=u([M("esri.portal.PortalItemResource")],rd);let ly=class extends _e{constructor(e){super(e),this.created=null,this.rating=null}};u([p({type:Date})],ly.prototype,"created",void 0),u([p()],ly.prototype,"rating",void 0),ly=u([M("esri.portal.PortalRating")],ly);var fm;const FPe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),zPe=new Set(["KML","GeoJson","CSV"]);let Be=fm=class extends Ph(zf){static from(t){return ag(fm,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Geocoding Service"?i="Locator":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?i=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="Raster function template"?i="Raster Function Template":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"?i="Insights Report":t==="Excalibur Imagery Project"?i="Excalibur Project":t==="3DTiles Service"?i="3D tiles layer":t==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(t){return t&&t.length?new Pe(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,l=!1,c=!1,d=!1,h=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(n=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),d=e.includes("UtilityNetwork"),s=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":d?"utilitynetwork":n?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),h=e.includes("Relational"),s=c||h?"mapimages":n||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):s=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?s="maps":t==="web scene"?s=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?s="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?s="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?s="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?s="datafiles":t==="360 vr experience"?s="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?s="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?s="addindesktop":t==="pdf"?s="pdf":t==="microsoft word"?s="word":t==="microsoft excel"?s="excel":t==="microsoft powerpoint"?s="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?s="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?s="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?s="layersgray":t==="analysis model"?s="analysismodel":t==="scene package"?s="scenepackage":t==="3dtiles package"?s="3dtileslayerpackage":t==="3dtiles service"?s="3dtileslayer":t==="mobile scene package"?s="mobilescenepackage":t==="tile package"||t==="compact tile package"?s="tilepackage":t==="task file"?s="taskfile":t==="report template"?s="report-template":t==="statistical data collection"?s="statisticaldatacollection":t==="insights workbook"?s="workbook":t==="insights model"?s="insightsmodel":t==="insights page"?s="insightspage":t==="insights theme"?s="insightstheme":t==="hub initiative"?s="hubinitiative":t==="hub page"?s="hubpage":t==="hub site application"?s="hubsite":t==="hub event"?s="hubevent":t==="hub project"?s="hubproject":t==="relational database connection"?s="relationaldatabaseconnection":t==="big data file share"?s="datastorecollection":t==="image collection"?s="imagecollection":t==="desktop style"?s="desktopstyle":t==="style"?s=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?s="dashboard":t==="raster function template"?s="rasterprocessingtemplate":t==="vector tile package"?s="vectortilepackage":t==="ortho mapping project"?s="orthomappingproject":t==="ortho mapping template"?s="orthomappingtemplate":t==="solution"?s="solutions":t==="geopackage"?s="geopackage":t==="deep learning package"?s="deeplearningpackage":t==="real time analytic"?s="realtimeanalytics":t==="reality mapping project"?s="realitymappingproject":t==="big data analytic"?s="bigdataanalytics":t==="feed"?s="feed":t==="excalibur imagery project"?s="excaliburimageryproject":t==="notebook"?s="notebook":t==="storymap"?s="storymap":t==="survey123 add in"?s="survey123addin":t==="mission"?s="mission":t==="mission report"?s="missionreport":t==="mission template"?s="missiontemplate":t==="quickcapture project"?s="quickcaptureproject":t==="pro report"?s="proreport":t==="pro report template"?s="proreporttemplate":t==="urban model"?s="urbanmodel":t==="urban project"?s="urbanproject":t==="web experience"?s="experiencebuilder":t==="web experience template"?s="webexperiencetemplate":t==="experience builder widget"?s="experiencebuilderwidget":t==="experience builder widget package"?s="experiencebuilderwidgetpackage":t==="workflow"?s="workflow":t==="kernel gateway connection"?s="kernelgatewayconnection":t==="insights script"?s="insightsscript":t==="hub initiative template"?s="hubinitiativetemplate":t==="storymap theme"?s="storymaptheme":t==="knowledge graph"?s="knowledgegraph":t==="knowledge graph layer"?s="knowledgegraphlayer":t==="knowledge studio project"?s="knowledgestudio":t==="native application"?s="nativeapp":t==="native application installer"?s="nativeappinstaller":t==="web link chart"?s="linkchart":t==="knowledge graph web investigation"?s="investigation":t==="ogcfeatureserver"?s="features":t==="pro presentation"?s="propresentation":t==="pro project"?s="proproject":t==="insights workbook package"?s="insightsworkbookpackage":t==="apache parquet"?s="apacheparquet":t==="notebook code snippet library"?s="notebookcodesnippets":t==="suitability model"?s="suitabilitymodel":t==="esri classifier definition"?s="classifierdefinition":t==="esri classification schema"?s="classificationschema":t==="insights data engineering workbook"?s="dataengineeringworkbook":t==="insights data engineering model"?s="dataengineeringmodel":t==="deep learning studio project"?s="deeplearningproject":t==="discussion"?s="discussion":t==="allsource project"?s="allsourceproject":t==="api key"?s="apikey":t==="data pipeline"?s="datapipelines":t==="group layer"?(f=e.includes("Map"),s=f?"layergroup2d":"layergroup"):s=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",s?Li(i+s+r+".png"):null}get isLayer(){return this.type!=null&&FPe.has(this.type)}get itemCdnUrl(){return NU(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ce.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},i=t instanceof ly?t.rating:t;return i==null||isNaN(i)||typeof t!="number"||(e.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new ly({rating:i,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:U(this.applicationProxies),avgRating:this.avgRating,categories:U(this.categories),classification:U(this.classification),created:U(this.created),culture:this.culture,description:this.description,extent:U(this.extent),groupCategories:U(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:U(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:U(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:U(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:U(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new fm({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const i=t[e];i&&(t[e]=JSON.stringify(i))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new ly(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},fm)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new R("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new R("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await e.signIn();const{copyResources:r,folder:s,tags:n,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!r,tags:n?.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new fm({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,r={method:"post"};if(typeof e=="string")Ah(e)?r.query={data:e}:r.query={url:Us(e)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",e,i):s.append("file",e),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new R("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:i}=await K(()=>import("./resourceUtils-DQnprA-L.js"),[]);return i(this,t,e)}async addResource(t,e,i){const{addOrUpdateResources:r}=await K(()=>import("./resourceUtils-DQnprA-L.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:i?.compress,access:i?.access}],"add",i),t}async removeResource(t,e){const{removeResource:i}=await K(()=>import("./resourceUtils-DQnprA-L.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new R("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await K(()=>import("./resourceUtils-DQnprA-L.js"),[]);return e(this,t)}resourceFromPath(t){return new rd({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:U(this.categories),classification:U(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:U(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:U(this.typeKeywords),url:this.url};return lU(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new fm({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};u([p({type:["private","shared","org","public"]})],Be.prototype,"access",void 0),u([p()],Be.prototype,"accessInformation",void 0),u([p({type:String})],Be.prototype,"apiKey",void 0),u([p({json:{read:{source:"appProxies"}}})],Be.prototype,"applicationProxies",void 0),u([p()],Be.prototype,"avgRating",void 0),u([p()],Be.prototype,"categories",void 0),u([p()],Be.prototype,"classification",void 0),u([p({type:Date})],Be.prototype,"created",void 0),u([p()],Be.prototype,"culture",void 0),u([p()],Be.prototype,"description",void 0),u([p({readOnly:!0})],Be.prototype,"displayName",null),u([p({type:Pe})],Be.prototype,"extent",void 0),u([Q("extent")],Be.prototype,"readExtent",null),u([p()],Be.prototype,"groupCategories",void 0),u([p({readOnly:!0})],Be.prototype,"iconUrl",null),u([p()],Be.prototype,"id",void 0),u([p({readOnly:!0})],Be.prototype,"isLayer",null),u([p({type:Boolean,readOnly:!0})],Be.prototype,"isOrgItem",void 0),u([p()],Be.prototype,"itemControl",void 0),u([p({readOnly:!0})],Be.prototype,"itemPageUrl",null),u([p({readOnly:!0})],Be.prototype,"itemUrl",null),u([p()],Be.prototype,"licenseInfo",void 0),u([p({type:Date})],Be.prototype,"modified",void 0),u([p()],Be.prototype,"name",void 0),u([p()],Be.prototype,"numComments",void 0),u([p()],Be.prototype,"numRatings",void 0),u([p()],Be.prototype,"numViews",void 0),u([p()],Be.prototype,"owner",void 0),u([p()],Be.prototype,"ownerFolder",void 0),u([p({type:ce})],Be.prototype,"portal",void 0),u([p()],Be.prototype,"screenshots",void 0),u([p()],Be.prototype,"size",void 0),u([p()],Be.prototype,"snippet",void 0),u([p()],Be.prototype,"sourceJSON",void 0),u([p({type:String})],Be.prototype,"sourceUrl",void 0),u([p({type:String})],Be.prototype,"spatialReference",void 0),u([p()],Be.prototype,"tags",void 0),u([p()],Be.prototype,"thumbnail",void 0),u([p({readOnly:!0})],Be.prototype,"thumbnailUrl",null),u([p()],Be.prototype,"title",void 0),u([p()],Be.prototype,"type",void 0),u([p()],Be.prototype,"typeKeywords",void 0),u([p({type:String,json:{read(t,e){if(zPe.has(e.type)){const i=this.portal?.restUrl;t||(t=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return t}}})],Be.prototype,"url",void 0),u([p({readOnly:!0})],Be.prototype,"userItemUrl",null),Be=fm=u([M("esri.portal.PortalItem")],Be);const goe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Be}},Symbol.toStringTag,{value:"Module"}));async function jPe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,i=await wne("esri/t9n/basemaps");return i[t]||i[e]}const xF={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Li("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}};let sd=class extends _e{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let i=e==="local"||e==="global"?e:_ne(e??ko())??"global";return i=i==="no"?"nb":i,i}};u([p()],sd.prototype,"apiKey",void 0),u([p()],sd.prototype,"id",void 0),u([p()],sd.prototype,"language",void 0),u([p()],sd.prototype,"places",void 0),u([p()],sd.prototype,"serviceUrl",void 0),u([p()],sd.prototype,"worldview",void 0),sd=u([M("esri.support.BasemapStyle")],sd);const VPe=sd,voe=Symbol("BasemapInstance");function Fpt(t){return t!=null&&typeof t=="object"&&voe in t}let boe=0;const O_=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+boe++})}};return i=u([M("esri.core.Identifiable")],i),i},O6=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:boe++})}};return i=u([M("esri.core.Identifiable.NumericIdentifiable")],i),i};O_(class{});async function UPe(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:i}=await K(async()=>{const{fromItem:r}=await import("./portalLayers-DxCKi7J2.js");return{fromItem:r}},__vite__mapDeps([144,145,146,147,148]));try{return await i(e)}catch(r){const s=e?.portalItem,n=s?.id||"unset",o=s?.portal?.url||lt.portalUrl;throw X.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",r),r}}const SF={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function fS(t,e,i,r=ga){const s=new Mo(g6(r)),n=ke.fromJSDate(t,{zone:s}),o=i==="decades"||i==="centuries"?"year":_oe(i);return i==="decades"&&(e*=10),i==="centuries"&&(e*=100),n.plus({[o]:e}).toJSDate()}function zpt(t,e,i="milliseconds"){const r=t.getTime(),s=woe(e,i,"milliseconds");return new Date(r+s)}function $F(t,e,i=ga){const r=new Mo(g6(i)),s=ke.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=_oe(e);return s.startOf(n).toJSDate()}function woe(t,e,i){return t===0?0:t*SF[e]/SF[i]}function jpt(t,e){return t&&e?t.intersection(e):t||e}function _oe(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Ia,W0;let pt=(W0=class extends Y{static get allTime(){return tH}static get empty(){return BPe}static fromArray(e){return new Ia({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,i){return i.end!=null?new Date(i.end):null}writeEnd(e,i){i.end=e?.getTime()??null}get isAllTime(){return this.equals(Ia.allTime)}get isEmpty(){return this.equals(Ia.empty)}readStart(e,i){return i.start!=null?new Date(i.start):null}writeStart(e,i){i.start=e?.getTime()??null}clone(){return new Ia({end:this.end,start:this.start})}equals(e){if(!e)return!1;const i=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,s=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return i===s&&r===n}expandTo(e,i=ga){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=$F(r,e,i));let s=this.end;if(s){const n=$F(s,e,i);s=s.getTime()===n.getTime()?n:fS(n,1,e,i)}return new Ia({start:r,end:s})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Ia.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const i=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,s=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let o,a;return s>=i&&s<=r?o=s:i>=s&&i<=n&&(o=i),r>=s&&r<=n?a=r:n>=i&&n<=r&&(a=n),o==null||a==null||isNaN(o)||isNaN(a)?Ia.empty:new Ia({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,i,r=ga){if(this.isEmpty||this.isAllTime)return this.clone();const s=new Ia,{start:n,end:o}=this;return n!=null&&(s.start=fS(n,e,i,r)),o!=null&&(s.end=fS(o,e,i,r)),s}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return tH.clone();const i=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Ia({start:i,end:r})}},Ia=W0,W0);u([p({type:Date,json:{write:{allowNull:!0}}})],pt.prototype,"end",void 0),u([Q("end")],pt.prototype,"readEnd",null),u([oe("end")],pt.prototype,"writeEnd",null),u([p({readOnly:!0,json:{read:!1}})],pt.prototype,"isAllTime",null),u([p({readOnly:!0,json:{read:!1}})],pt.prototype,"isEmpty",null),u([p({type:Date,json:{write:{allowNull:!0}}})],pt.prototype,"start",void 0),u([Q("start")],pt.prototype,"readStart",null),u([oe("start")],pt.prototype,"writeStart",null),pt=Ia=u([M("esri.time.TimeExtent")],pt);const tH=new pt,BPe=new pt({start:void 0,end:void 0});let qPe=0,Bt=class extends t3(O_(zf)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Pe(-180,-90,180,90,fe.WGS84),this.id=Date.now().toString(16)+"-layer-"+qPe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=fe.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await K(async()=>{const{fromUrl:r}=await import("./arcgisLayers-Cj_mJwnE.js");return{fromUrl:r}},__vite__mapDeps([149,145,146,148]))).fromUrl(i)}static fromPortalItem(e){return UPe(e)}initialize(){this.when().catch(e=>{Yi(e)||X.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return $t(this.url)}createLayerView(e,i){return Promise.reject(new R("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await xe(e,{query:{f:"json"},responseType:"json"})).data;throw new R("layer:no-attribution-data","Layer does not have attribution data")}};u([p({type:String})],Bt.prototype,"attributionDataUrl",void 0),u([p({readOnly:!0})],Bt.prototype,"effectiveVisible",null),u([p({type:Pe})],Bt.prototype,"fullExtent",void 0),u([p({readOnly:!0})],Bt.prototype,"hasAttributionData",null),u([p({type:String,clonable:!1})],Bt.prototype,"id",void 0),u([p({type:Boolean,nonNullable:!0})],Bt.prototype,"legendEnabled",void 0),u([p({type:["show","hide","hide-children"]})],Bt.prototype,"listMode",void 0),u([p({type:Number,range:{min:0,max:1},nonNullable:!0})],Bt.prototype,"opacity",void 0),u([p({clonable:!1})],Bt.prototype,"parent",void 0),u([p({readOnly:!0})],Bt.prototype,"parsedUrl",null),u([p({type:Boolean,readOnly:!0})],Bt.prototype,"persistenceEnabled",void 0),u([p({type:Boolean})],Bt.prototype,"popupEnabled",void 0),u([p({type:Boolean})],Bt.prototype,"attributionVisible",void 0),u([p({type:fe})],Bt.prototype,"spatialReference",void 0),u([p({type:String})],Bt.prototype,"title",void 0),u([p({readOnly:!0,json:{read:!1}})],Bt.prototype,"type",void 0),u([p()],Bt.prototype,"url",void 0),u([p({type:pt})],Bt.prototype,"visibilityTimeExtent",void 0),u([p({type:Boolean,nonNullable:!0})],Bt.prototype,"visible",void 0),Bt=u([M("esri.layers.Layer")],Bt);const OI=new WeakMap;function R6(t){return!t.destroyed&&(OI.has(t)||t.addHandles([de(()=>{const{parent:e}=t;return!!(e&&e instanceof Bt)&&(e.type==="catalog-dynamic-group"||R6(e))},e=>OI.set(t,e),Vs),Et(()=>OI.delete(t))]),OI.get(t))}function N6(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function Upt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function GPe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function HPe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function Bpt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function iH(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function Op(t){return t?.type==="subtype-sublayer"}const qpt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function IF(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function Gpt(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function h3(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function Hpt(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function WPe(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function xoe(t){return N6(t)&&WPe(t)}async function D6(t,e){const i=ft?.findServerInfo(t);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${t.slice(0,r)}/rest/info`,n=e!=null?e.signal:null,{data:o}=await xe(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function Soe(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function JPe(t){return Soe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function ZPe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function YPe(t){return!!ZPe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Wpt(t){const e=new ue;for(const i of t.allLayers.concat(t.allTables))i.type==="csv"||R6(i)||("charts"in i&&e.push(i),i.type==="subtype-group"&&e.push(...i.sublayers));return e}function KPe(t,e){return null}function Jpt(t){return null}function kF(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function Zpt(t,e){!e||!kF(t)||KPe(t.url)}const XPe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),QPe=new Set(["integrated-mesh-3dtiles"]),$oe=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),eAe=new Set([...$oe,"link-chart"]);function tAe(t){switch(t.layerContainerType){case"basemap-base-layers":return XPe;case"basemap-ground-layers":return QPe;case"operational-layers":return t.origin==="link-chart"?eAe:$oe;default:return null}}function iAe(t,e){if(e.restrictedWebMapWriting){const i=tAe(e);return i==null||i.has(t.type)&&!h3(t)}return!0}function rAe(t,e){if(e)if(h3(t)){const i=wu("featureCollection.layers",e),r=i?.[0]?.layerDefinition;r&&rH(t,r)}else t.type!=="group"&&rH(t,e)}function rH(t,e){"maxScale"in t&&(e.maxScale=zM(t.maxScale)??void 0),"minScale"in t&&(e.minScale=zM(t.minScale)??void 0)}function sAe(t,e){if(rAe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=zM(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(h3(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function NT(t,e,i){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return i?.messages&&i.messages.push(new R("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(h3(t)&&!t.isTable)e=t.resourceInfo;else if(iAe(t,i)){const r={};return t.write(r,i)?r:null}return e!=null&&sAe(t,e=U(e)),e}var sH,Uv,Ay;let Qn=(Ay=class extends Ph(zf){constructor(e){super(e),this[sH]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Uv.idCounter++,this.baseLayers=new ue,this.referenceLayers=new ue,this.groundLayers=new ue;const i=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this,a.type!=="elevation"&&a.type!=="integrated-mesh-3dtiles"||X.getLogger(this).error(`Layer '${a.title}, id:${a.id}' of type '${a.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this},s=a=>{const l=a.item;return l.parent===this?(X.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void a.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?(X.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void a.preventDefault()):void 0},n=a=>{a.parent=null},o=a=>{a.parent===this&&(a.parent=null)};this.addHandles([this.baseLayers.on("after-add",a=>i(a.item)),this.baseLayers.on("after-remove",a=>n(a.item)),this.referenceLayers.on("after-add",a=>i(a.item)),this.referenceLayers.on("after-remove",a=>n(a.item)),this.groundLayers.on("before-add",s),this.groundLayers.on("after-add",a=>r(a.item)),this.groundLayers.on("after-remove",a=>o(a.item))])}initialize(){this.when().catch(e=>{X.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const s of e)s.destroyed||s.destroy();const i=this.groundLayers.toArray();for(const s of i)s.destroyed||s.destroy();const r=this.referenceLayers.toArray();for(const s of r)s.destroyed||s.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=bi(this.portalItem)}removeChildLayer(e){for(const i of[this.baseLayers,this.referenceLayers,this.groundLayers])i.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Iu(e,this._get("baseLayers")))}_writeBaseLayers(e,i,r){const s=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(n=>{const o=NT(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);o!=null&&s.push(o)}),this.referenceLayers.forEach(n=>{const o=NT(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);o!=null&&(n.type!=="scene"&&(o.isReference=!0),s.push(o))})),i.baseMapLayers=s}set groundLayers(e){this._set("groundLayers",Iu(e,this._get("groundLayers")))}_writeGroundLayers(e,i,r){const s=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(n=>{const o=NT(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);o!=null&&s.push(o)}),s.length>0&&(i.groundLayers=s))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",Iu(e,this._get("referenceLayers")))}writeTitle(e,i){i.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return L_(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(i=>rS(i)?i.clone():i),groundLayers:this.groundLayers.map(i=>rS(i)?i.clone():i),referenceLayers:this.referenceLayers.map(i=>rS(i)?i.clone():i)};return this.loaded&&(e.loadStatus="loaded"),new Uv({resourceInfo:this.resourceInfo}).set(e)}read(e,i){this.resourceInfo||this._set("resourceInfo",{data:e,context:i}),super.read(e,i)}write(e,i){return e=e||{},i?.origin||(i={origin:"web-map",...i}),super.write(e,i),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const s=U(r);return s.url&&ma(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&ma(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:i,portalItem:r,style:s}=this;Gt(e);const n=[];if(i){const o=i.context?i.context.url:null;if(n.push(this._loadLayersFromJSON(i.data,o,e)),i.data.id&&!i.data.title){const a=i.data.id;n.push(jPe(a).then(l=>{l&&this.read({title:l},i.context)}))}}else r?n.push(this._loadFromItem(r,e)):s&&n.push(this._loadFromStylesService(s,e));await Promise.all(n)}async _loadLayersFromJSON(e,i,r){const s=this.resourceInfo?.context,n=this.portalItem?.portal||s?.portal||null,o=oAe[s?.origin||""]??"web-map",{populateOperationalLayers:a}=await K(async()=>{const{populateOperationalLayers:c}=await import("./layersCreator-bLz-Ln8H.js");return{populateOperationalLayers:c}},__vite__mapDeps([150,147,146,145,148,144])),l=[];if(Gt(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const c={context:{...s,origin:o,url:i,portal:n,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},d=m=>o==="web-scene"&&m.layerType==="ArcGISSceneServiceLayer"||m.isReference,h=a(this.baseLayers,e.baseMapLayers.filter(m=>!d(m)),c);l.push(h);const f=a(this.referenceLayers,e.baseMapLayers.filter(d),c);l.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const c={context:{...s,origin:o,url:i,portal:n,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},d=a(this.groundLayers,e.groundLayers,c);l.push(d)}await Promise.allSettled(l)}async _loadFromItem(e,i){const r=await e.load(i),s=await r.fetchData("json",i),n=$t(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:nAe[e.type||""]??"web-map",portal:e.portal||ce.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ce.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,i)}async _loadFromStylesService(e,i){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,s=`${r}/styles/${e.id}/self`,n=`${r}/webmaps/${e.id}`,o=e.apiKey??lt.apiKeys.basemapStyles,[a,l]=await Promise.all([(await xe(s,{query:{token:o},signal:i?.signal})).data,(await xe(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:i?.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=a.thumbnailUrl);const c=$t(n);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,i),o)for(const d of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in d&&(d.apiKey=o)}static fromId(e){const i=xF[e];return i?i.itemId?new Uv({portalItem:{id:i.itemId,portal:{url:"https://www.arcgis.com"}}}):Uv.fromJSON(i,i.is3d?{origin:"web-scene",portal:new ce({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},sH=voe,Uv=Ay,Ay.idCounter=0,Ay);u([p({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ue}},writer(t,e,i,r){this._writeBaseLayers(t,e,r)}}}}}})],Qn.prototype,"baseLayers",null),u([p({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,i,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:ue}},writer(t,e,i,r){this._writeGroundLayers(t,e,r)}}}}}})],Qn.prototype,"groundLayers",null),u([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],Qn.prototype,"id",void 0),u([p({type:Be})],Qn.prototype,"portalItem",void 0),u([p()],Qn.prototype,"referenceLayers",null),u([p({readOnly:!0})],Qn.prototype,"resourceInfo",void 0),u([p({type:fe})],Qn.prototype,"spatialReference",void 0),u([p({type:VPe})],Qn.prototype,"style",void 0),u([p()],Qn.prototype,"thumbnailUrl",void 0),u([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Qn.prototype,"title",void 0),u([oe("title")],Qn.prototype,"writeTitle",null),Qn=Uv=u([M("esri.Basemap")],Qn);const nAe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},oAe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Xd=Qn,aAe=Object.freeze(Object.defineProperty({__proto__:null,default:Xd},Symbol.toStringTag,{value:"Module"})),uC={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Ioe(t){return!!uC[t]||!!uC[t.toLowerCase()]}function F6(t){return uC[t]??uC[t.toLowerCase()]}function lAe(t){return[...F6(t)]}function mO(t,e,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?t+(e-t)*r:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function koe(t,e,i,r=1){const s=(t%360+360)%360/360,n=i<=.5?i*(e+1):i+e-i*e,o=2*i-n;return[Math.round(255*mO(o,n,s+1/3)),Math.round(255*mO(o,n,s)),Math.round(255*mO(o,n,s-1/3)),r]}function cAe(t){const e=t.length>5,i=e?8:4,r=(1<<i)-1,s=e?1:17,n=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&r,o>>=i,a[3]=s*l/255),l=o&r,o>>=i,a[2]=s*l,l=o&r,o>>=i,a[1]=s*l,l=o&r,o>>=i,a[0]=s*l,a}function Toe(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),s=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,i+16*i,r+16*r,(s+16*s)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function Eoe(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const i=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&i.length===3||r==="rgba"&&i.length===4){if(i[0].endsWith("%")){const s=i.map(n=>2.56*parseFloat(n));return i.length===4&&(s[3]=parseFloat(i[3])),nH(s)}return nH(i.map(s=>parseFloat(s)))}if(r==="hsl"&&i.length===3||r==="hsla"&&i.length===4)return koe(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3]??"1"))}return null}function nH(t){return t[0]=x0(t[0]),t[1]=x0(t[1]),t[2]=x0(t[2]),t[3]=t.length===4?Coe(t[3]):1,t}function Moe(t){let e=Ioe(t)?F6(t):null;return e??(e=Eoe(t)),e??(e=Toe(t)),e}function uAe(t){const e=Moe(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Coe(t){return Poe(t,0,1)}function x0(t){return Math.round(Poe(t,0,255))}function Poe(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}const Aoe=2.2,dAe=1/Aoe;function Ypt(t){return t**Aoe}function Kpt(t){return t**dAe}function RI(t){return bn(OA(t),0,255)}function NI(t,e){const i=t.toString(16).padStart(2,"0");return e?i.slice(0,1):i}let ne=class ka{static blendColors(e,i,r,s=new ka){return s.r=Math.round(e.r+(i.r-e.r)*r),s.g=Math.round(e.g+(i.g-e.g)*r),s.b=Math.round(e.b+(i.b-e.b)*r),s.a=e.a+(i.a-e.a)*r,s._sanitize()}static fromRgb(e,i){const r=Eoe(e);return r?ka.fromArray(r,i):null}static fromHex(e,i=new ka){const r=Toe(e);return r?ka.fromArray(r,i):null}static fromArray(e,i=new ka){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const r=Moe(e);return r?ka.fromArray(r,i):null}static fromJSON(e){return e!=null?new ka([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,i){return e==null?null:(i??(i=[0,0,0,0]),i[0]=e.r/255,i[1]=e.g/255,i[2]=e.b/255,i[3]=e.a!=null?e.a:1,i)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?ka.fromString(e,this):Array.isArray(e)?ka.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof ka||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const i=e?.capitalize??!1,r=e?.digits??6,s=r===3||r===4,n=r===4||r===8,o=`#${NI(this.r,s)}${NI(this.g,s)}${NI(this.b,s)}${n?NI(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const i=RI(this.r),r=RI(this.g),s=RI(this.b);return e===0||this.a!==1?[i,r,s,RI(255*this.a)]:[i,r,s]}clone(){return new ka(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=x0(this.r),this.g=x0(this.g),this.b=x0(this.b),this.a=Coe(this.a),this}_set(e,i,r,s){this.r=e,this.g=i,this.b=r,this.a=s}};ne.prototype.declaredClass="esri.Color";function Ee(t,e={}){const i=t instanceof We?t:new We(t,e),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return p({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}var TF;let DT=TF=class extends Y{constructor(t){super(t),this.type="none"}clone(){return new TF({type:this.type})}};u([Ee({none:"none",stayAbove:"stay-above"}),p({json:{write:{isRequired:!0}}})],DT.prototype,"type",void 0),DT=TF=u([M("esri.ground.NavigationConstraint")],DT);const Loe=Symbol("GroundInstance");function Xpt(t){return t!=null&&typeof t=="object"&&Loe in t}function p3(t){const e=OA(100*(1-t));return Math.max(0,Math.min(e,100))}function S$(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var oH,EF,EQ;let Ta=EF=(EQ=class extends Ph(zf){constructor(t){super(t),this[oH]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ue;const e=r=>{const{parent:s}=r;s&&s!==this&&"remove"in s&&s.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&X.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>i(r.item))]),this.allLayers=new ra({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{Yi(t)||X.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)bi(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",Iu(t,this._get("layers")))}writeLayers(t,e,i,r){const s=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(n=>{if("write"in n){const o={};e_e(n)().write(o,r)&&s.push(o)}else r?.messages&&r.messages.push(new R("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),e.layers=s}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return L_(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:i}=await K(()=>import("./ElevationQuery-DENvZHvz.js"),__vite__mapDeps([151,152]));return Gt(e),i(this.layers.filter(aH).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:i}=await K(()=>import("./ElevationQuery-DENvZHvz.js"),__vite__mapDeps([151,152]));return Gt(e),i(this.layers.filter(aH).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:U(this.surfaceColor),navigationConstraint:U(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new EF({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,i){const r=e?.origin||"web-scene",s=e?.portal||null,n=e?.url||null,{populateOperationalLayers:o}=await K(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-bLz-Ln8H.js");return{populateOperationalLayers:l}},__vite__mapDeps([150,147,146,145,148,144]));Gt(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},oH=Loe,EQ);function aH(t){return t&&"createElevationSampler"in t}u([p()],Ta.prototype,"parent",void 0),u([p()],Ta.prototype,"integratedMeshGround",null),u([p({json:{read:!1,write:{isRequired:!0}}})],Ta.prototype,"layers",null),u([p()],Ta.prototype,"allLayers",void 0),u([oe("layers")],Ta.prototype,"writeLayers",null),u([p({readOnly:!0})],Ta.prototype,"resourceInfo",void 0),u([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ke,read:{reader:S$,source:"transparency"},write:{writer:(t,e)=>{e.transparency=p3(t)},target:"transparency"}}})],Ta.prototype,"opacity",void 0),u([p({type:ne,json:{type:[Ke],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Ta.prototype,"surfaceColor",void 0),u([p({type:DT,json:{write:!0}})],Ta.prototype,"navigationConstraint",void 0),Ta=EF=u([M("esri.Ground")],Ta);const dC=Ta,hAe="randomUUID"in crypto;function R_(){if(hAe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function Qpt(){return`{${R_().toUpperCase()}}`}function pAe(){return`{${R_()}}`}function fAe(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const nv={Base64:0,Hex:1,String:2,Raw:3},S0=8,Ooe=(1<<S0)-1;function Wp(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function mAe(t){const e=[];for(let i=0,r=t.length*S0;i<r;i+=S0)e[i>>5]|=(t.charCodeAt(i/S0)&Ooe)<<i%32;return e}function yAe(t){const e=[];for(let i=0,r=32*t.length;i<r;i+=S0)e.push(String.fromCharCode(t[i>>5]>>>i%32&Ooe));return e.join("")}function gAe(t){const e="0123456789abcdef",i=[];for(let r=0,s=4*t.length;r<s;r++)i.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return i.join("")}function vAe(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*t.length;s<n;s+=3){const o=(t[s>>2]>>s%4*8&255)<<16|(t[s+1>>2]>>(s+1)%4*8&255)<<8|t[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*t.length?r.push(e):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function bAe(t,e){return t<<e|t>>>32-e}function f3(t,e,i,r,s,n){return Wp(bAe(Wp(Wp(e,t),Wp(r,n)),s),i)}function Ys(t,e,i,r,s,n,o){return f3(e&i|~e&r,t,e,s,n,o)}function Ks(t,e,i,r,s,n,o){return f3(e&r|i&~r,t,e,s,n,o)}function Xs(t,e,i,r,s,n,o){return f3(e^i^r,t,e,s,n,o)}function Qs(t,e,i,r,s,n,o){return f3(i^(e|~r),t,e,s,n,o)}function wAe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=r,c=s,d=n;i=Ys(i,r,s,n,t[o],7,-680876936),n=Ys(n,i,r,s,t[o+1],12,-389564586),s=Ys(s,n,i,r,t[o+2],17,606105819),r=Ys(r,s,n,i,t[o+3],22,-1044525330),i=Ys(i,r,s,n,t[o+4],7,-176418897),n=Ys(n,i,r,s,t[o+5],12,1200080426),s=Ys(s,n,i,r,t[o+6],17,-1473231341),r=Ys(r,s,n,i,t[o+7],22,-45705983),i=Ys(i,r,s,n,t[o+8],7,1770035416),n=Ys(n,i,r,s,t[o+9],12,-1958414417),s=Ys(s,n,i,r,t[o+10],17,-42063),r=Ys(r,s,n,i,t[o+11],22,-1990404162),i=Ys(i,r,s,n,t[o+12],7,1804603682),n=Ys(n,i,r,s,t[o+13],12,-40341101),s=Ys(s,n,i,r,t[o+14],17,-1502002290),r=Ys(r,s,n,i,t[o+15],22,1236535329),i=Ks(i,r,s,n,t[o+1],5,-165796510),n=Ks(n,i,r,s,t[o+6],9,-1069501632),s=Ks(s,n,i,r,t[o+11],14,643717713),r=Ks(r,s,n,i,t[o],20,-373897302),i=Ks(i,r,s,n,t[o+5],5,-701558691),n=Ks(n,i,r,s,t[o+10],9,38016083),s=Ks(s,n,i,r,t[o+15],14,-660478335),r=Ks(r,s,n,i,t[o+4],20,-405537848),i=Ks(i,r,s,n,t[o+9],5,568446438),n=Ks(n,i,r,s,t[o+14],9,-1019803690),s=Ks(s,n,i,r,t[o+3],14,-187363961),r=Ks(r,s,n,i,t[o+8],20,1163531501),i=Ks(i,r,s,n,t[o+13],5,-1444681467),n=Ks(n,i,r,s,t[o+2],9,-51403784),s=Ks(s,n,i,r,t[o+7],14,1735328473),r=Ks(r,s,n,i,t[o+12],20,-1926607734),i=Xs(i,r,s,n,t[o+5],4,-378558),n=Xs(n,i,r,s,t[o+8],11,-2022574463),s=Xs(s,n,i,r,t[o+11],16,1839030562),r=Xs(r,s,n,i,t[o+14],23,-35309556),i=Xs(i,r,s,n,t[o+1],4,-1530992060),n=Xs(n,i,r,s,t[o+4],11,1272893353),s=Xs(s,n,i,r,t[o+7],16,-155497632),r=Xs(r,s,n,i,t[o+10],23,-1094730640),i=Xs(i,r,s,n,t[o+13],4,681279174),n=Xs(n,i,r,s,t[o],11,-358537222),s=Xs(s,n,i,r,t[o+3],16,-722521979),r=Xs(r,s,n,i,t[o+6],23,76029189),i=Xs(i,r,s,n,t[o+9],4,-640364487),n=Xs(n,i,r,s,t[o+12],11,-421815835),s=Xs(s,n,i,r,t[o+15],16,530742520),r=Xs(r,s,n,i,t[o+2],23,-995338651),i=Qs(i,r,s,n,t[o],6,-198630844),n=Qs(n,i,r,s,t[o+7],10,1126891415),s=Qs(s,n,i,r,t[o+14],15,-1416354905),r=Qs(r,s,n,i,t[o+5],21,-57434055),i=Qs(i,r,s,n,t[o+12],6,1700485571),n=Qs(n,i,r,s,t[o+3],10,-1894986606),s=Qs(s,n,i,r,t[o+10],15,-1051523),r=Qs(r,s,n,i,t[o+1],21,-2054922799),i=Qs(i,r,s,n,t[o+8],6,1873313359),n=Qs(n,i,r,s,t[o+15],10,-30611744),s=Qs(s,n,i,r,t[o+6],15,-1560198380),r=Qs(r,s,n,i,t[o+13],21,1309151649),i=Qs(i,r,s,n,t[o+4],6,-145523070),n=Qs(n,i,r,s,t[o+11],10,-1120210379),s=Qs(s,n,i,r,t[o+2],15,718787259),r=Qs(r,s,n,i,t[o+9],21,-343485551),i=Wp(i,a),r=Wp(r,l),s=Wp(s,c),n=Wp(n,d)}return[i,r,s,n]}function z6(t,e=nv.Hex){const i=e||nv.Base64,r=wAe(mAe(t),t.length*S0);switch(i){case nv.Raw:return r;case nv.Hex:return gAe(r);case nv.String:return yAe(r);case nv.Base64:return vAe(r)}}function _Ae(t){return t&&"getAtOrigin"in t&&"originOf"in t}function MF(t){return j6[xAe(t)]||$Ae}function xAe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:SAe(t.url)}function SAe(t){const e=Eie(t);return CF[e]||Roe}const j6={},Roe="text/plain",$Ae=j6[Roe],CF={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in CF)j6[CF[t]]=t;function IAe(t){const e=t?.origins??[void 0];return(i,r)=>{const s=kAe(t,i,r);for(const n of e){const o=wU(i,n,r);for(const a in s)o[a]=s[a]}}}function kAe(t,e,i){if(t?.type==="resource")return TAe(t,e,i);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:s}=vSe;return{read:r,write:s}}}}function TAe(t,e,i){const r=g2(e,i);return{type:String,read:(s,n,o)=>{const a=zA(s,n,o);return r.type===String?a:typeof r.type=="function"?new r.type({url:a}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(s,n,o,a){if(!a?.resources)return typeof s=="string"?void(n[o]=ug(s,a)):void(n[o]=s.write({},a));const l=CAe(s),c=ug(l,{...a,verifyItemRelativeUrls:a?.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),d=r.type!==String&&(!_Ae(this)||a?.origin&&this.originIdOf(i)>_o(a.origin)),h={object:this,propertyName:i,value:s,targetUrl:c,dest:n,targetPropertyName:o,context:a,params:t};a?.portalItem&&c&&!gn(c)?d&&t?.contentAddressed?PF(h):d?EAe(h):MAe(h):a?.portalItem&&(c==null||Lie(c)!=null||$_(c)||d)?PF(h):n[o]=c}}}}function PF(t){const{targetUrl:e,params:i,value:r,context:s,dest:n,targetPropertyName:o}=t;if(!s.portalItem)return;const a=Oie(e),l=Doe(r,e,s);if(i?.contentAddressed&&l.type!=="json")return void s.messages?.push(new R("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const c=i?.contentAddressed&&l.type==="json"?z6(l.jsonString):a?.filename??R_(),d=fa(i?.prefix??a?.prefix,c),h=`${d}.${MF(l)}`;if(i?.contentAddressed&&s.resources&&l.type==="json"){const y=s.resources.toKeep.find(({resource:v})=>v.path===h)??s.resources.toAdd.find(({resource:v})=>v.path===h);if(y)return void(n[o]=y.resource.itemRelativeUrl)}const f=s.portalItem.resourceFromPath(h);$_(e)&&s.resources&&s.resources.pendingOperations.push(nSe(e).then(y=>{f.path=`${d}.${MF({type:"blob",blob:y})}`,n[o]=f.itemRelativeUrl}).catch(()=>{}));const m=i?.compress??!1;s.resources&&Noe({...t,resource:f,content:l,compress:m,updates:s.resources.toAdd}),n[o]=f.itemRelativeUrl}function EAe(t){const{context:e,targetUrl:i,params:r,value:s,dest:n,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(i),l=Doe(s,i,e),c=MF(l),d=Eie(a.path),h=r?.compress??!1;c===d?(e.resources&&Noe({...t,resource:a,content:l,compress:h,updates:e.resources.toUpdate}),n[o]=i):PF(t)}function MAe({context:t,targetUrl:e,dest:i,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),i[r]=e)}function Noe({object:t,propertyName:e,updates:i,resource:r,content:s,compress:n}){const o=a=>{PAe(t,e,a)};i.push({resource:r,content:s,compress:n,finish:o})}function Doe(t,e,i){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(i))}}function CAe(t){return t==null?null:typeof t=="string"?t:t.url}function PAe(t,e,i){typeof t[e]=="string"?t[e]=i.url:t[e].url=i.url}let FT=class extends Le(Y){constructor(e){super(e),this.color=null}};u([p({type:ne,json:{type:[Ke],write:!0}})],FT.prototype,"color",void 0),FT=u([M("esri.effects.FocusAreaOutline")],FT);const AAe=FT;var zT;let AF=zT=class extends Ph(ue.ofType(vi)){constructor(t){super(t)}clone(){return new zT(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(i=>{if(!e.equals(i.spatialReference)){if(!tc(i.spatialReference,e))return t?.messages?.push(new pa("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const s=new vi;Une(i,s,e),i=s}const r=i.toJSON(t);return delete r.spatialReference,r}).filter(i=>i!=null):this.toArray().map(i=>i.toJSON(t))}static fromJSON(t,e){const i=new zT;return t.forEach(r=>i.add(vi.fromJSON(r,e))),i}};AF=zT=u([M("esri.layers.support.PolygonCollection")],AF);const mS=AF;let nd=class extends Ph($U){constructor(e){super(e),this.id=`focusarea-${R_()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new mS}readGeometries(e,i,r){Array.isArray(e)?this.geometries=mS.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(gh(e,r),r))}async _loadGeometries(e,i){const r=await xe(e,{responseType:"json"});this.geometries=mS.fromJSON(r.data,i)}};u([p({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),p()],nd.prototype,"id",void 0),u([p({type:String,json:{write:!0}})],nd.prototype,"title",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],nd.prototype,"enabled",void 0),u([p({type:AAe,json:{write:!0}})],nd.prototype,"outline",void 0),u([p({type:mS,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new mS(t.items.map(e=>e.clone()))}),IAe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],nd.prototype,"geometries",void 0),u([Q(["web-scene","portal-item","service"],"geometries")],nd.prototype,"readGeometries",null),nd=u([M("esri.effects.FocusArea")],nd);const LAe=nd;let J1=class extends Ph($U){constructor(e){super(e),this.areas=new ue,this.style="bright"}};u([p({type:ue.ofType(LAe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new ue(t.items.map(e=>e.clone()))})],J1.prototype,"areas",void 0),u([p({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],J1.prototype,"style",void 0),J1=u([M("esri.effects.FocusAreas")],J1);const Foe=J1;function OAe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function RAe(t){return!(!OAe(t)||!JPe(t)?.operations?.supportsEditing||"editingEnabled"in t&&!YPe(t)||R6(t))}function m3(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function NAe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function DAe(t,e,i,r,s,n,o,a,l,c,d,h,f,m,y,v){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=i,b[3]=r,b[4]=s,b[5]=n,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=d,b[11]=h,b[12]=f,b[13]=m,b[14]=y,b[15]=v,b}const FAe=m3();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:FAe,clone:NAe,create:m3,fromValues:DAe},Symbol.toStringTag,{value:"Module"}));function zoe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function jf(t,e,i,r,s,n,o,a,l,c,d,h,f,m,y,v,b){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=d,t[10]=h,t[11]=f,t[12]=m,t[13]=y,t[14]=v,t[15]=b,t}function y3(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vf(t,e){if(t===e){const i=e[1],r=e[2],s=e[3],n=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=n,t[11]=e[14],t[12]=s,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function zAe(t,e){return joe(t,e)||y3(t),t}function joe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],m=e[11],y=e[12],v=e[13],b=e[14],w=e[15],x=i*a-r*o,S=i*l-s*o,$=i*c-n*o,T=r*l-s*a,C=r*c-n*a,L=s*c-n*l,N=d*v-h*y,D=d*b-f*y,F=d*w-m*y,W=h*b-f*v,Z=h*w-m*v,V=f*w-m*b;let A=x*V-S*Z+$*W+T*F-C*D+L*N;return A?(A=1/A,t[0]=(a*V-l*Z+c*W)*A,t[1]=(s*Z-r*V-n*W)*A,t[2]=(v*L-b*C+w*T)*A,t[3]=(f*C-h*L-m*T)*A,t[4]=(l*F-o*V-c*D)*A,t[5]=(i*V-s*F+n*D)*A,t[6]=(b*$-y*L-w*S)*A,t[7]=(d*L-f*$+m*S)*A,t[8]=(o*Z-a*F+c*N)*A,t[9]=(r*F-i*Z-n*N)*A,t[10]=(y*C-v*$+w*x)*A,t[11]=(h*$-d*C-m*x)*A,t[12]=(a*D-o*W-l*N)*A,t[13]=(i*W-r*D+s*N)*A,t[14]=(v*S-y*T-b*x)*A,t[15]=(d*T-h*S+f*x)*A,t):null}function jAe(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],m=e[11],y=e[12],v=e[13],b=e[14],w=e[15];return t[0]=a*(f*w-m*b)-h*(l*w-c*b)+v*(l*m-c*f),t[1]=-(r*(f*w-m*b)-h*(s*w-n*b)+v*(s*m-n*f)),t[2]=r*(l*w-c*b)-a*(s*w-n*b)+v*(s*c-n*l),t[3]=-(r*(l*m-c*f)-a*(s*m-n*f)+h*(s*c-n*l)),t[4]=-(o*(f*w-m*b)-d*(l*w-c*b)+y*(l*m-c*f)),t[5]=i*(f*w-m*b)-d*(s*w-n*b)+y*(s*m-n*f),t[6]=-(i*(l*w-c*b)-o*(s*w-n*b)+y*(s*c-n*l)),t[7]=i*(l*m-c*f)-o*(s*m-n*f)+d*(s*c-n*l),t[8]=o*(h*w-m*v)-d*(a*w-c*v)+y*(a*m-c*h),t[9]=-(i*(h*w-m*v)-d*(r*w-n*v)+y*(r*m-n*h)),t[10]=i*(a*w-c*v)-o*(r*w-n*v)+y*(r*c-n*a),t[11]=-(i*(a*m-c*h)-o*(r*m-n*h)+d*(r*c-n*a)),t[12]=-(o*(h*b-f*v)-d*(a*b-l*v)+y*(a*f-l*h)),t[13]=i*(h*b-f*v)-d*(r*b-s*v)+y*(r*f-s*h),t[14]=-(i*(a*b-l*v)-o*(r*b-s*v)+y*(r*l-s*a)),t[15]=i*(a*f-l*h)-o*(r*f-s*h)+d*(r*l-s*a),t}function VAe(t){const e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],o=t[5],a=t[6],l=t[7],c=t[8],d=t[9],h=t[10],f=t[11],m=t[12],y=t[13],v=t[14],b=t[15];return(e*o-i*n)*(h*b-f*v)-(e*a-r*n)*(d*b-f*y)+(e*l-s*n)*(d*v-h*y)+(i*a-r*o)*(c*b-f*m)-(i*l-s*o)*(c*v-h*m)+(r*l-s*a)*(c*y-d*m)}function Voe(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=e[8],f=e[9],m=e[10],y=e[11],v=e[12],b=e[13],w=e[14],x=e[15];let S=i[0],$=i[1],T=i[2],C=i[3];return t[0]=S*r+$*a+T*h+C*v,t[1]=S*s+$*l+T*f+C*b,t[2]=S*n+$*c+T*m+C*w,t[3]=S*o+$*d+T*y+C*x,S=i[4],$=i[5],T=i[6],C=i[7],t[4]=S*r+$*a+T*h+C*v,t[5]=S*s+$*l+T*f+C*b,t[6]=S*n+$*c+T*m+C*w,t[7]=S*o+$*d+T*y+C*x,S=i[8],$=i[9],T=i[10],C=i[11],t[8]=S*r+$*a+T*h+C*v,t[9]=S*s+$*l+T*f+C*b,t[10]=S*n+$*c+T*m+C*w,t[11]=S*o+$*d+T*y+C*x,S=i[12],$=i[13],T=i[14],C=i[15],t[12]=S*r+$*a+T*h+C*v,t[13]=S*s+$*l+T*f+C*b,t[14]=S*n+$*c+T*m+C*w,t[15]=S*o+$*d+T*y+C*x,t}function UAe(t,e,i){const r=i[0],s=i[1],n=i[2];if(e===t)t[12]=e[0]*r+e[4]*s+e[8]*n+e[12],t[13]=e[1]*r+e[5]*s+e[9]*n+e[13],t[14]=e[2]*r+e[6]*s+e[10]*n+e[14],t[15]=e[3]*r+e[7]*s+e[11]*n+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],d=e[4],h=e[5],f=e[6],m=e[7],y=e[8],v=e[9],b=e[10],w=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=d,t[5]=h,t[6]=f,t[7]=m,t[8]=y,t[9]=v,t[10]=b,t[11]=w,t[12]=o*r+d*s+y*n+e[12],t[13]=a*r+h*s+v*n+e[13],t[14]=l*r+f*s+b*n+e[14],t[15]=c*r+m*s+w*n+e[15]}return t}function BAe(t,e,i){const r=i[0],s=i[1],n=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qAe(t,e,i,r){let s=r[0],n=r[1],o=r[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=Wn())return void zoe(t,e);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(i),c=Math.cos(i),d=1-c,h=e[0],f=e[1],m=e[2],y=e[3],v=e[4],b=e[5],w=e[6],x=e[7],S=e[8],$=e[9],T=e[10],C=e[11],L=s*s*d+c,N=n*s*d+o*l,D=o*s*d-n*l,F=s*n*d-o*l,W=n*n*d+c,Z=o*n*d+s*l,V=s*o*d+n*l,A=n*o*d-s*l,q=o*o*d+c;t[0]=h*L+v*N+S*D,t[1]=f*L+b*N+$*D,t[2]=m*L+w*N+T*D,t[3]=y*L+x*N+C*D,t[4]=h*F+v*W+S*Z,t[5]=f*F+b*W+$*Z,t[6]=m*F+w*W+T*Z,t[7]=y*F+x*W+C*Z,t[8]=h*V+v*A+S*q,t[9]=f*V+b*A+$*q,t[10]=m*V+w*A+T*q,t[11]=y*V+x*A+C*q,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function GAe(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*s+c*r,t[5]=o*s+d*r,t[6]=a*s+h*r,t[7]=l*s+f*r,t[8]=c*s-n*r,t[9]=d*s-o*r,t[10]=h*s-a*r,t[11]=f*s-l*r,t}function HAe(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],c=e[8],d=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s-c*r,t[1]=o*s-d*r,t[2]=a*s-h*r,t[3]=l*s-f*r,t[8]=n*r+c*s,t[9]=o*r+d*s,t[10]=a*r+h*s,t[11]=l*r+f*s,t}function WAe(t,e,i){const r=Math.sin(i),s=Math.cos(i),n=e[0],o=e[1],a=e[2],l=e[3],c=e[4],d=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*s+c*r,t[1]=o*s+d*r,t[2]=a*s+h*r,t[3]=l*s+f*r,t[4]=c*s-n*r,t[5]=d*s-o*r,t[6]=h*s-a*r,t[7]=f*s-l*r,t}function JAe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ZAe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function YAe(t,e,i){if(e===0)return y3(t);let r=i[0],s=i[1],n=i[2],o=Math.sqrt(r*r+s*s+n*n);if(o<=Wn())return null;o=1/o,r*=o,s*=o,n*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=s*r*c+n*a,t[2]=n*r*c-s*a,t[3]=0,t[4]=r*s*c-n*a,t[5]=s*s*c+l,t[6]=n*s*c+r*a,t[7]=0,t[8]=r*n*c+s*a,t[9]=s*n*c-r*a,t[10]=n*n*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KAe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XAe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QAe(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Uoe(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=r+r,l=s+s,c=n+n,d=r*a,h=r*l,f=r*c,m=s*l,y=s*c,v=n*c,b=o*a,w=o*l,x=o*c;return t[0]=1-(m+v),t[1]=h+x,t[2]=f-w,t[3]=0,t[4]=h-x,t[5]=1-(d+v),t[6]=y+b,t[7]=0,t[8]=f+w,t[9]=y-b,t[10]=1-(d+m),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function e3e(t,e){const i=t3e,r=-e[0],s=-e[1],n=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],d=e[7],h=r*r+s*s+n*n+o*o;return h>0?(i[0]=2*(a*o+d*r+l*n-c*s)/h,i[1]=2*(l*o+d*s+c*r-a*n)/h,i[2]=2*(c*o+d*n+a*s-l*r)/h):(i[0]=2*(a*o+d*r+l*n-c*s),i[1]=2*(l*o+d*s+c*r-a*n),i[2]=2*(c*o+d*n+a*s-l*r)),Uoe(t,e,i),t}const t3e=Df();function i3e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function r3e(t,e){const i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],c=e[9],d=e[10];return t[0]=Math.sqrt(i*i+r*r+s*s),t[1]=Math.sqrt(n*n+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+d*d),t}function s3e(t,e){const i=e[0]+e[5]+e[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function n3e(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3],l=s+s,c=n+n,d=o+o,h=s*l,f=s*c,m=s*d,y=n*c,v=n*d,b=o*d,w=a*l,x=a*c,S=a*d,$=r[0],T=r[1],C=r[2];return t[0]=(1-(y+b))*$,t[1]=(f+S)*$,t[2]=(m-x)*$,t[3]=0,t[4]=(f-S)*T,t[5]=(1-(h+b))*T,t[6]=(v+w)*T,t[7]=0,t[8]=(m+x)*C,t[9]=(v-w)*C,t[10]=(1-(h+y))*C,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function o3e(t,e,i,r,s){const n=e[0],o=e[1],a=e[2],l=e[3],c=n+n,d=o+o,h=a+a,f=n*c,m=n*d,y=n*h,v=o*d,b=o*h,w=a*h,x=l*c,S=l*d,$=l*h,T=r[0],C=r[1],L=r[2],N=s[0],D=s[1],F=s[2],W=(1-(v+w))*T,Z=(m+$)*T,V=(y-S)*T,A=(m-$)*C,q=(1-(f+w))*C,J=(b+x)*C,ee=(y+S)*L,re=(b-x)*L,me=(1-(f+v))*L;return t[0]=W,t[1]=Z,t[2]=V,t[3]=0,t[4]=A,t[5]=q,t[6]=J,t[7]=0,t[8]=ee,t[9]=re,t[10]=me,t[11]=0,t[12]=i[0]+N-(W*N+A*D+ee*F),t[13]=i[1]+D-(Z*N+q*D+re*F),t[14]=i[2]+F-(V*N+J*D+me*F),t[15]=1,t}function a3e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=i+i,a=r+r,l=s+s,c=i*o,d=r*o,h=r*a,f=s*o,m=s*a,y=s*l,v=n*o,b=n*a,w=n*l;return t[0]=1-h-y,t[1]=d+w,t[2]=f-b,t[3]=0,t[4]=d-w,t[5]=1-c-y,t[6]=m+v,t[7]=0,t[8]=f+b,t[9]=m-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l3e(t,e,i,r,s,n,o){const a=1/(i-e),l=1/(s-r),c=1/(n-o);return t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(s+r)*l,t[10]=(o+n)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*c,t[15]=0,t}function c3e(t,e,i,r,s){const n=1/Math.tan(e/2);let o;return t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(r-s),t[10]=(s+r)*o,t[14]=2*s*r*o):(t[10]=-1,t[14]=-2*r),t}function u3e(t,e,i,r){const s=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(s+n);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(s-n)*c*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function d3e(t,e,i,r,s,n,o){const a=1/(e-i),l=1/(r-s),c=1/(n-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(s+r)*l,t[14]=(o+n)*c,t[15]=1,t}function h3e(t,e,i,r){const s=e[0],n=e[1],o=e[2];let a=s-i[0],l=n-i[1],c=o-i[2];const d=Wn();if(Math.abs(a)<d&&Math.abs(l)<d&&Math.abs(c)<d)return void y3(t);let h=1/Math.sqrt(a*a+l*l+c*c);a*=h,l*=h,c*=h;const f=r[0],m=r[1],y=r[2];let v=m*c-y*l,b=y*a-f*c,w=f*l-m*a;h=Math.sqrt(v*v+b*b+w*w),h?(h=1/h,v*=h,b*=h,w*=h):(v=0,b=0,w=0);let x=l*w-c*b,S=c*v-a*w,$=a*b-l*v;h=Math.sqrt(x*x+S*S+$*$),h?(h=1/h,x*=h,S*=h,$*=h):(x=0,S=0,$=0),t[0]=v,t[1]=x,t[2]=a,t[3]=0,t[4]=b,t[5]=S,t[6]=l,t[7]=0,t[8]=w,t[9]=$,t[10]=c,t[11]=0,t[12]=-(v*s+b*n+w*o),t[13]=-(x*s+S*n+$*o),t[14]=-(a*s+l*n+c*o),t[15]=1}function p3e(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let d=s-i[0],h=n-i[1],f=o-i[2],m=d*d+h*h+f*f;m>0&&(m=1/Math.sqrt(m),d*=m,h*=m,f*=m);let y=l*f-c*h,v=c*d-a*f,b=a*h-l*d;return m=y*y+v*v+b*b,m>0&&(m=1/Math.sqrt(m),y*=m,v*=m,b*=m),t[0]=y,t[1]=v,t[2]=b,t[3]=0,t[4]=h*b-f*v,t[5]=f*y-d*b,t[6]=d*v-h*y,t[7]=0,t[8]=d,t[9]=h,t[10]=f,t[11]=0,t[12]=s,t[13]=n,t[14]=o,t[15]=1,t}function f3e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function m3e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function y3e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Boe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function g3e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function v3e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function b3e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function w3e(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=t[9],f=t[10],m=t[11],y=t[12],v=t[13],b=t[14],w=t[15],x=e[0],S=e[1],$=e[2],T=e[3],C=e[4],L=e[5],N=e[6],D=e[7],F=e[8],W=e[9],Z=e[10],V=e[11],A=e[12],q=e[13],J=e[14],ee=e[15],re=Wn();return Math.abs(i-x)<=re*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(r-S)<=re*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(s-$)<=re*Math.max(1,Math.abs(s),Math.abs($))&&Math.abs(n-T)<=re*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(o-C)<=re*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-L)<=re*Math.max(1,Math.abs(a),Math.abs(L))&&Math.abs(l-N)<=re*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-D)<=re*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(d-F)<=re*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(h-W)<=re*Math.max(1,Math.abs(h),Math.abs(W))&&Math.abs(f-Z)<=re*Math.max(1,Math.abs(f),Math.abs(Z))&&Math.abs(m-V)<=re*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(y-A)<=re*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(v-q)<=re*Math.max(1,Math.abs(v),Math.abs(q))&&Math.abs(b-J)<=re*Math.max(1,Math.abs(b),Math.abs(J))&&Math.abs(w-ee)<=re*Math.max(1,Math.abs(w),Math.abs(ee))}function _3e(t){const e=Wn(),i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],c=t[9],d=t[10];return Math.abs(1-(i*i+n*n+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(s*s+a*a+d*d))<=e}function x3e(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const S3e=Voe,$3e=Boe;Object.freeze(Object.defineProperty({__proto__:null,add:y3e,adjoint:jAe,copy:zoe,determinant:VAe,equals:w3e,exactEquals:b3e,frob:m3e,fromQuat:a3e,fromQuat2:e3e,fromRotation:YAe,fromRotationTranslation:Uoe,fromRotationTranslationScale:n3e,fromRotationTranslationScaleOrigin:o3e,fromScaling:ZAe,fromTranslation:JAe,fromXRotation:KAe,fromYRotation:XAe,fromZRotation:QAe,frustum:l3e,getRotation:s3e,getScale:r3e,getTranslation:i3e,hasIdentityRotation:x3e,identity:y3,invert:joe,invertOrIdentity:zAe,isOrthoNormal:_3e,lookAt:h3e,mul:S3e,multiply:Voe,multiplyScalar:g3e,multiplyScalarAndAdd:v3e,ortho:d3e,perspective:c3e,perspectiveFromFieldOfView:u3e,rotate:qAe,rotateX:GAe,rotateY:HAe,rotateZ:WAe,scale:BAe,set:jf,str:f3e,sub:$3e,subtract:Boe,targetTo:p3e,translate:UAe,transpose:Vf},Symbol.toStringTag,{value:"Module"}));const I3e=(t,e)=>{const i=jf(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Vf(i,i)},k3e=(t,e)=>{const i=jf(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Vf(i,i)},T3e=(t,e)=>{const i=1-e,r=jf(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Vf(r,r)},E3e=(t,e)=>{const i=Math.sin(e*Math.PI/180),r=Math.cos(e*Math.PI/180),s=jf(t,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Vf(s,s)},M3e=(t,e)=>{const i=1-2*e,r=jf(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Vf(r,r)},C3e=(t,e)=>{const i=jf(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Vf(i,i)},P3e=(t,e)=>{const i=1-e,r=jf(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Vf(r,r)};let qoe=class Goe{constructor(e,i,r){this.strength=e,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(e,i,r){this.strength=vo(e.strength,i.strength,r),this.radius=vo(e.radius,i.radius,r),this.threshold=vo(e.threshold,i.threshold,r)}clone(){return new Goe(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:yS(this.radius),strength:this.strength,threshold:this.threshold}}},Hoe=class Woe{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,r){this.radius=Math.round(vo(e.radius,i.radius,r))}clone(){return new Woe(this.radius)}toJSON(){return{type:"blur",radius:yS(this.radius)}}},LF=class Joe{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.amount=vo(e.amount,i.amount,r),this._updateMatrix()}clone(){return new Joe(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||m3();switch(this.type){case"brightness":this._colorMatrix=I3e(e,this.amount);break;case"contrast":this._colorMatrix=k3e(e,this.amount);break;case"grayscale":this._colorMatrix=T3e(e,this.amount);break;case"invert":this._colorMatrix=M3e(e,this.amount);break;case"saturate":this._colorMatrix=C3e(e,this.amount);break;case"sepia":this._colorMatrix=P3e(e,this.amount)}}},Zoe=class Yoe{constructor(e,i,r,s){this.offsetX=e,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(e,i,r){this.offsetX=vo(e.offsetX,i.offsetX,r),this.offsetY=vo(e.offsetY,i.offsetY,r),this.blurRadius=vo(e.blurRadius,i.blurRadius,r),this.color[0]=Math.round(vo(e.color[0],i.color[0],r)),this.color[1]=Math.round(vo(e.color[1],i.color[1],r)),this.color[2]=Math.round(vo(e.color[2],i.color[2],r)),this.color[3]=vo(e.color[3],i.color[3],r)}clone(){return new Yoe(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:yS(this.offsetX),yoffset:yS(this.offsetY),blurRadius:yS(this.blurRadius),color:e}}},Koe=class Xoe{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,r){this.angle=vo(e.angle,i.angle,r),this._updateMatrix()}clone(){return new Xoe(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||m3();this._colorMatrix=E3e(e,this.angle)}},Qoe=class eae{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,r){this.amount=vo(e.amount,i.amount,r)}clone(){return new eae(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function vo(t,e,i){return t+(e-t)*i}function yS(t){return Math.round(1e3*Zt(t))/1e3}function A3e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new LF(t.type,0);case"saturate":case"brightness":case"contrast":return new LF(t.type,1);case"opacity":return new Qoe(1);case"hue-rotate":return new Koe(0);case"blur":return new Hoe(0);case"drop-shadow":return new Zoe(0,0,0,[...F6("transparent")]);case"bloom":return new qoe(0,0,1)}}function tae(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((r,s)=>r.type===i[s].type)}function iae(t,e){const i=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let s=r.length;s<i.length;s++)r.push(A3e(i[s]))}function L3e(t){const e=t[0];return!!e&&"type"in e}const yO=()=>X.getLogger("esri.support.basemapUtils");function O3e(){return{}}function R3e(t){for(const e in t){const i=t[e];i&&!i.destroyed&&i.destroy(),delete t[e]}}function N3e(t,e){let i;if(typeof t=="string"){const r=t in xF,s=!r&&t.includes("/");if(!r&&!s){if(ED())yO().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(xF).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");yO().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`)}return null}e&&(i=e[t]),i||(i=r?Xd.fromId(t):new Xd({style:{id:t}}),e&&(e[t]=i))}else i=Mi(Xd,t);return i?.destroyed&&(yO().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function D3e(t){return new ra({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}function DI(t){for(const e of t.values())e?.destroy();t.clear()}const lH={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function F3e(t){let e=null;if(typeof t=="string")if(t in lH){const i=lH[t];e=new dC({resourceInfo:{data:{layers:[i]}}})}else X.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Mi(dC,t);return e}function OF(t,e,i){let r,s;if(t)for(let n=0,o=t.length;n<o;n++){if(r=t.at(n),r?.[e]===i)return r;if(r?.type==="group"&&(s=OF(r.layers,e,i),s))return s}}const z3e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.layers=new ue;const s=a=>{a.parent&&a.removeFromParent()},n=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||X.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void X.getLogger(this).error("#add()","Cannot add layer to itself.");s(a.item)}),this.layers.on("after-add",a=>n(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const s of r)s.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",Iu(r,this._get("layers")))}add(r,s){const n=this.layers;if(s=n.getNextIndex(s),r instanceof Bt){const o=r;o.parent===this?this.reorder(o,s):n.add(o,s)}else yn(r)?r.then(o=>{this.destroyed||this.add(o,s)}):X.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,s){const n=this.layers;let o=n.getNextIndex(s);r.slice().forEach(a=>{a.parent!==this?(n.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return OF(this.layers,"id",r)}findLayerByUid(r){return OF(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,s){return this.layers.reorder(r,s)}layerAdded(r){}layerRemoved(r){}};return u([p()],i.prototype,"layers",null),i=u([M("esri.support.LayersMixin")],i),i},j3e=new Set(["feature","subtype-group"]);function RF(t,e,i){if(t)for(let r=0,s=t.length;r<s;r++){const n=t.at(r);if(n[e]===i)return n;if(n?.type==="group"){const o=RF(n.tables,e,i);if(o)return o}}}const V3e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.tables=new ue,this.addHandles([this.tables.on("after-add",s=>{const n=s.item;n.parent&&n.parent!==this&&n.removeFromParent(),n.parent=this,j3e.has(n.type)||X.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const s of r)s.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",Iu(r,this._get("tables")))}findTableById(r){return RF(this.tables,"id",r)}findTableByUid(r){return RF(this.tables,"uid",r)}};return u([p()],i.prototype,"tables",null),i=u([M("esri.support.TablesMixin")],i),i};let Ea=class extends V3e(z3e(Pg)){constructor(e){super(e),this.allLayers=new ra({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.focusAreas=new Foe,this.allTables=D3e(this),this.basemap=null,this.editableLayers=new ra({getCollections:()=>[this.allLayers],itemFilterFunction:RAe}),this.ground=new dC,this._basemapCache=O3e(),this.addHandles(Ts(()=>this.ground,(i,r)=>{r?.parent===this&&(r.parent=null),i.parent=this},{sync:!0}))}destroy(){R3e(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=bi(this.basemap),bi(this.ground),this._set("ground",null)}castBasemap(e){return N3e(e,this._basemapCache)}castGround(e){return F3e(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};u([p({readOnly:!0,dependsOn:[]})],Ea.prototype,"allLayers",void 0),u([p({type:Foe,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Ea.prototype,"focusAreas",void 0),u([p({readOnly:!0})],Ea.prototype,"allTables",void 0),u([p({type:Xd,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Ea.prototype,"basemap",void 0),u([Mt("basemap")],Ea.prototype,"castBasemap",null),u([p({readOnly:!0})],Ea.prototype,"editableLayers",void 0),u([p({type:dC,nonNullable:!0})],Ea.prototype,"ground",void 0),u([Mt("ground")],Ea.prototype,"castGround",null),u([p()],Ea.prototype,"undoRedo",void 0),Ea=u([M("esri.Map")],Ea);const rae=Ea;var Z1;const hC=Qr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),sae=hC.jsonValues.slice();sD(sae,"orthometric");const gS=Qr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Pn=Z1=class extends Y{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return hC.write(t,e,i)}readHeightModel(t,e,i){return hC.read(t)||(i?.messages&&i.messages.push(U3e(t,{context:i})),null)}readHeightUnit(t,e,i){return gS.read(t)||(i?.messages&&i.messages.push(cH(t,{context:i})),null)}readHeightUnitService(t,e,i){return GU(t)||gS.read(t)||(i?.messages&&i.messages.push(cH(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new Z1({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=rre(e);return new Z1({heightModel:t.heightModel,heightUnit:i??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new Z1;return e.read(t,{origin:"web-scene"}),e}};function cH(t,e){return new pa("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function U3e(t,e){return new pa("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}u([p({type:hC.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:sae,default:"ellipsoidal",write:{isRequired:!0}}}}})],Pn.prototype,"heightModel",void 0),u([oe("web-scene","heightModel")],Pn.prototype,"writeHeightModel",null),u([Q(["web-scene","service"],"heightModel")],Pn.prototype,"readHeightModel",null),u([p({type:gS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:gS.jsonValues,write:{writer:gS.write,isRequired:!0}}}}})],Pn.prototype,"heightUnit",void 0),u([Q("web-scene","heightUnit")],Pn.prototype,"readHeightUnit",null),u([Q("service","heightUnit")],Pn.prototype,"readHeightUnitService",null),u([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Pn.prototype,"vertCRS",void 0),u([Q("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Pn.prototype,"readVertCRS",null),Pn=Z1=u([M("esri.geometry.HeightModelInfo")],Pn);let gO;async function B3e(){return gO==null&&(gO=K(()=>import("./WhereClauseCache-BpfBjjbj.js"),__vite__mapDeps([17,18])).then(t=>new t.WhereClauseCache(500,500))),gO}async function V6(t,e){const i=await B3e(),r=i.get(t,e);if(r==null)throw i.getError(t,e);return r}function $0(t,e){return t||(t=null),e||(e=null),t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function NF(t,e){return t||(t=null),e||(e=null),t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function q3e(t,e){return e.length===0?null:`${t} IN (${G3e(e)})`}function G3e(t){return t.map(e=>typeof e=="string"?H3e(e):e).join(",")}function H3e(t){return`'${t.replaceAll("'","''")}'`}function W3e(t){return typeof t=="number"}function sft(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function nft(t){return typeof t=="boolean"}function T2(t){return typeof t=="string"||t instanceof String}function J3e(t){return t==null||T2(t)}function oft(t){return Array.isArray(t)}function nae(t){return t?.declaredClass==="esri.Graphic"}function aft(t){return t instanceof Date}const Z3e="HH:mm",Y3e="HH:mm:ss",K3e="HH:mm:ss.SSS",X3e=[K3e,Y3e,Z3e,"TT"],Q3e="yyyy-MM-dd";function uH(t){if(!t||!T2(t))return null;const e=ke.fromFormat(t,Q3e);return e.isValid?e:null}function dH(t){return t&&T2(t)?R_e(X3e,e=>{const i=ke.fromFormat(t,e);return i.isValid?i:null})??null:null}function hH(t){if(!t||!T2(t))return null;const e=ke.fromISO(t);return e.isValid?e:null}const oae=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function eLe(t){return t!=null&&oae.has(t.type)}function aae(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function lae(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function cae(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const tLe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);gU(oae,tLe);function lft(t,e){const i=t?.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=eLe(t);return aae(t)||cae(t)||lae(t)?{...iLe(t,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function iLe(t,e,i){return aae(t)?{min:uH(i)?.toMillis(),max:uH(e)?.toMillis(),rawMin:i,rawMax:e}:cae(t)?{min:dH(i)?.toMillis(),max:dH(e)?.toMillis(),rawMin:i,rawMax:e}:lae(t)?{min:hH(i)?.toMillis(),max:hH(e)?.toMillis(),rawMin:i,rawMax:e}:{max:null,min:null}}function rLe(t){if(!t)return;const e=t.match(sLe);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const sLe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function nLe(t){return t.match(oLe)?.[1]?.replaceAll("\\'","'")??null}const oLe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let vO;function wh(){return vO||(vO=(async()=>{const[t,e,i]=await Promise.all([K(()=>import("./arcadeUtils-D_phEX8D.js"),__vite__mapDeps([153,154,155,156,157,137,22,158,159,160,18,58,161,138,139,162])),K(()=>import("./batchExec-CHFEsz8K.js"),__vite__mapDeps([163,63])),K(()=>import("./aiServices-D2fynXcR.js").then(r=>r.a),__vite__mapDeps([159,156,157,137,22,160,155]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:i,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),vO}const aLe=/^([0-9_])/,lLe=/[^a-z0-9_\u0080-\uffff]+/gi;function cLe(t){return t==null?null:t.trim().replaceAll(lLe,"_").replace(aLe,"F$1")||null}const uLe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],dLe=["field","normalizationField"];function DF(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(pH(uLe,i,e),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)pH(dLe,r,e)}}function pH(t,e,i){if(t)for(const r of t){const s=wu(r,e),n=s&&typeof s!="function"&&i.get(s);n&&Tr(r,n.name,e)}}function uae(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const i=e.get(t.startField),r=e.get(t.endField);t.startField=i?.name??null,t.endField=r?.name??null}else{const i=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=i?.name??null,t.endTimeField=r?.name??null}}const bO=new Set;function g3(t,e){return t&&e?(bO.clear(),If(bO,t,e),Array.from(bO).sort()):[]}function If(t,e,i){if(i)if(e?.fields?.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)vn(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function vn(t,e,i){if(typeof i=="string")if(e){const r=e.get(i);r&&t.add(r.name)}else t.add(i)}function cft(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}function uft(t,e,i=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=g3(t,e);return r.length/t.fields.length>=i?["*"]:r}async function Hs(t,e,i,r){if(!r)return;const s=rLe(r);if(s)vn(t,e,s);else{const{arcadeUtils:n}=await wh(),o=n.extractFieldNames(r,i?.partitions??e?.fields?.map(a=>a.name));for(const a of o)vn(t,i?.index??e,a)}}async function U6(t,e,i){if(i&&i!=="1=1"){const r=await V6(i,e);if(!r.isStandardized)throw new R("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});If(t,e,r.fieldNames)}}function hLe({displayField:t,fields:e}){return t||(e?.length?pLe(e):null)}function pLe(t){return wO(t,"name-or-title")||wO(t,"unique-identifier")||wO(t,"type-or-category")||fLe(t)}function fLe(t){for(const e of t){if(!e?.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function wO(t,e){for(const i of t)if(i?.valueType&&i.valueType===e)return i.name;return null}async function dft(t,e){if(!e)return;const i=e.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function mLe(t,e,i){i.onStatisticExpression?Hs(t,e,null,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function hft(t,e,i){if(!e||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(dae(t,e,s)),i.fields&&r.push(...i.fields.map(async n=>mLe(t,e.fieldsIndex,n))),await Promise.all(r)}async function pft(t,e){const{fieldsIndex:i,trackInfo:r}=e;if(!e||!r||!i)return;const s=[r.latestObservations.renderer?.collectRequiredFields(t,i),r.previousObservations.renderer?.collectRequiredFields(t,i),r.trackLines.renderer?.collectRequiredFields(t,i)];r.popupTemplate&&s.push(dae(t,e,r.popupTemplate));for(const n of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(n)for(const o of n)s.push(mae(t,i,o));await Promise.all(s)}async function dae(t,e,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(n=>Hs(t,e.fieldsIndex,null,n.expression)));const s=i?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(Hs(t,e.fieldsIndex,null,n.expressionInfo.expression));await Promise.all(r)}async function fft(t,e,i){e&&(e.timeInfo&&i?.timeExtent&&If(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&If(t,e.fieldsIndex,[e.floorInfo.floorField]),i?.where!=null&&await U6(t,e.fieldsIndex,i.where))}async function mft(t,e,i){e&&i&&await Promise.all(i.map(r=>yLe(t,e,r)))}async function yLe(t,e,i){e&&i&&(i.valueExpression?await Hs(t,e.fieldsIndex,null,i.valueExpression):i.field&&vn(t,e.fieldsIndex,i.field))}function yft(t){return t?g3(t.fieldsIndex,hae(t)):[]}function gLe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?g3(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function gft(t,e,i){if(!e||!i)return;const r=e.fieldsIndex;await Promise.all(i.filters.map(s=>U6(t,r,s.where)))}const vLe=new Set(["oid","global-id","guid"]),bLe=new Set(["oid","global-id"]),wLe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function _Le(t){const e=new Set;pae(t).forEach(r=>e.add(r)),gLe(t).forEach(r=>e.add(r.toLowerCase()));const i=t&&"infoFor3D"in t?t.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function hae(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=e;return[i,r,s,n].filter(Boolean)}function pae(t){return hae(t).map(e=>e.toLowerCase())}function fae(t,e){return t.editable&&!vLe.has(t.type)&&!pae(e).includes(t.name?.toLowerCase()??"")}function xLe(t,e){const i=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&i===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&i===e.globalIdField.toLowerCase()||_Le(e).includes(i)||bLe.has(t.type)||wLe.some(r=>r.test(i)))}async function vft(t,e){const{labelingInfo:i,fieldsIndex:r}=e;i?.length&&await Promise.all(i.map(s=>mae(t,r,s)))}async function mae(t,e,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await Hs(t,e,null,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{vn(t,e,o.slice(1,-1))})}await U6(t,e,s)}function SLe(t){const e=t.defaultValue;return e!==void 0&&gae(t,e)?e:t.nullable?null:void 0}function bft(t){const e=typeof t=="string"?{type:t}:t;return bae(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function yae(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function $Le(t){return t===null||yae(t)}function ILe(t){return t===null||Number.isInteger(t)}function kLe(){return!0}function gae(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=t.nullable?ILe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?$Le:yae;break;case"string":case"esriFieldTypeString":i=t.nullable?J3e:T2;break;default:i=kLe}return arguments.length===1?i:i(e)}const TLe=["integer","small-integer","big-integer","long"],ELe=["single","double"],MLe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],CLe=["esriFieldTypeSingle","esriFieldTypeDouble"],vae=new Set([...TLe,...MLe]),PLe=new Set([...ELe,...CLe]),ALe=gU(vae,PLe);function LLe(t){return t!=null&&vae.has(t.type)}function B6(t){return t!=null&&ALe.has(t.type)}function bae(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function v3(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function wae(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function _ae(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function xae(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function fH(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function mH(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function wft(t,e){return OLe(t,e)===null}function _ft(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function OLe(t,e){return t==null||t.nullable&&e===null?null:gae(t,e)?B6(t)&&!RLe(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function RLe(t,e){const i=typeof t=="string"?Sae(t):t;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(e)&&e>=r&&e<=s:e>=r&&e<=s}function Sae(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return NLe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return DLe;case"esriFieldTypeBigInteger":case"big-integer":return FLe;case"esriFieldTypeSingle":case"single":return zLe;case"esriFieldTypeDouble":case"double":return jLe}}const NLe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},DLe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},FLe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},FI=(2-2**-23)*2**127,zLe={min:-FI,max:FI,isInteger:!1,rawMin:-FI,rawMax:FI},jLe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function xft(t,e,i){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:s}=Sae(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${s}`}}}function VLe(t,e){return!ULe(t,e,null)}function ULe(t,e,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function BLe(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function q6(t){const e=t?.match(/{[^}]+}/g);return e?e.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let jT=class extends Y{constructor(e){super(e),this.type=null}};u([p({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],jT.prototype,"type",void 0),jT=u([M("esri.popup.content.Content")],jT);const Oh=jT,zI=new We({asc:"ascending",desc:"descending"});let Y1=class extends Le(Y){constructor(e){super(e),this.field=null,this.order="ascending"}};u([p({type:String,json:{write:!0}})],Y1.prototype,"field",void 0),u([p({type:zI.apiValues,json:{type:zI.jsonValues,read:zI.read,write:zI.write}})],Y1.prototype,"order",void 0),Y1=u([M("esri.popup.support.AttachmentsOrderByInfo")],Y1);const qLe=Y1;let gc=class extends Le(Oh){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([p({type:[String],json:{write:!0}})],gc.prototype,"attachmentKeywords",void 0),u([p({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],gc.prototype,"attachmentTypes",void 0),u([p({type:String,json:{write:!0}})],gc.prototype,"description",void 0),u([p({type:["auto","preview","list"],json:{write:!0}})],gc.prototype,"displayType",void 0),u([p({type:[qLe],json:{write:!0}})],gc.prototype,"orderByFields",void 0),u([p({type:String,json:{write:!0}})],gc.prototype,"title",void 0),u([p({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],gc.prototype,"type",void 0),gc=u([M("esri.popup.content.AttachmentsContent")],gc);const qw=gc;var FF;let mm=FF=class extends Oh{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new FF({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?U(this.outFields):null})}};u([p()],mm.prototype,"creator",void 0),u([p()],mm.prototype,"destroyer",void 0),u([p()],mm.prototype,"outFields",void 0),u([p({type:["custom"],readOnly:!0})],mm.prototype,"type",void 0),mm=FF=u([M("esri.popup.content.CustomContent")],mm);const GLe=mm;var zF;let Bv=zF=class extends Y{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new zF({title:this.title,expression:this.expression})}};u([p({type:String,json:{write:!0}})],Bv.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],Bv.prototype,"expression",void 0),u([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Bv.prototype,"returnType",void 0),Bv=zF=u([M("esri.popup.ElementExpressionInfo")],Bv);const HLe=Bv;var jF;let K1=jF=class extends Oh{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new jF({expressionInfo:this.expressionInfo?.clone()})}};u([p({type:HLe,json:{write:!0}})],K1.prototype,"expressionInfo",void 0),u([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],K1.prototype,"type",void 0),K1=jF=u([M("esri.popup.content.ExpressionContent")],K1);const b3=K1;let VT=class extends Le(Y){constructor(e){super(e),this.type=null}};u([p({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],VT.prototype,"type",void 0),VT=u([M("esri.layers.support.FieldFormat")],VT);const G6=VT,$ae="auto";let od=class extends G6{constructor(e){super(e),this.dateStyle=null,this.hour12=$ae,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};u([p({type:["full","long","medium","short"],json:{write:!0}})],od.prototype,"dateStyle",void 0),u([p({type:["always","auto","never"],nonNullable:!0,json:{default:$ae,write:!0}})],od.prototype,"hour12",void 0),u([p({type:["long","short"],json:{write:!0}})],od.prototype,"month",void 0),u([p({type:["full","long","medium","short"],json:{write:!0}})],od.prototype,"timeStyle",void 0),u([p({type:["date-time"]})],od.prototype,"type",void 0),u([p({type:["numeric"],json:{write:!0}})],od.prototype,"year",void 0),od=u([M("esri.layers.support.DateTimeFieldFormat")],od);const lf=od,yH={min:0,max:20},Iae=2,kae=0,Tae="decimal",Eae="auto";let op=class extends G6{constructor(e){super(e),this.maximumFractionDigits=Iae,this.minimumFractionDigits=kae,this.style=Tae,this.type="number",this.useGrouping=Eae}};u([p({type:Ke,nonNullable:!0,range:yH,json:{default:Iae,write:!0}})],op.prototype,"maximumFractionDigits",void 0),u([p({type:Ke,nonNullable:!0,range:yH,json:{default:kae,write:!0}})],op.prototype,"minimumFractionDigits",void 0),u([p({type:["decimal"],nonNullable:!0,json:{default:Tae,write:!0}})],op.prototype,"style",void 0),u([p({type:["number"]})],op.prototype,"type",void 0),u([p({type:["always","auto","never"],nonNullable:!0,json:{default:Eae,write:!0}})],op.prototype,"useGrouping",void 0),op=u([M("esri.layers.support.NumberFieldFormat")],op);const pC=op;let qv=class extends Le(Y){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([Ee(TEe)],qv.prototype,"dateFormat",void 0),u([p({type:Boolean,json:{write:!0}})],qv.prototype,"digitSeparator",void 0),u([p({type:Ke,json:{write:!0}})],qv.prototype,"places",void 0),qv=u([M("esri.popup.support.FieldInfoFormat")],qv);const Tu=qv,Mae={base:G6,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":lf,number:pC}};function WLe(t,e){const{format:i}=t;return e&&Rg(e)?i?Cae(i,e):vS(e,{hour12:"always",useGrouping:"always"}):null}function Cae(t,e){const{dateFormat:i}=t;if(!e)return i?vH(t):gH(t);if(!Rg(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Pae(t);case"single":case"double":return gH(t);case"date":case"timestamp-offset":return i?vH(t):vS(e,r);case"date-only":return i?JLe(t):vS(e);case"time-only":return i?ZLe(t):vS(e,r)}}function Rg(t){return B6(t)||v3(t)||wae(t)||xae(t)||_ae(t)}function Pae(t){return new pC({useGrouping:t.digitSeparator?"always":"never"})}function gH(t){const e=Pae(t),{places:i}=t;return e.minimumFractionDigits=i??0,e.maximumFractionDigits=i??2,e}function vH(t){return new lf({dateStyle:Aae(t),year:Nae(t),month:Oae(t),timeStyle:Rae(t),hour12:Lae(t)})}function JLe(t){return new lf({dateStyle:Aae(t),year:Nae(t),month:Oae(t)})}function ZLe(t){return new lf({timeStyle:Rae(t),hour12:Lae(t)})}function Aae(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Lae(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function Oae(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Rae(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function Nae(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function H6(t,e){const i=t.type==="number",r=t.type==="date-time";if(!e)return i?bH(t):r?wH(t):null;if(Rg(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return i?Dae(t):null;case"single":case"double":return i?bH(t):null;case"date":case"timestamp-offset":return r?wH(t):null;case"date-only":return r?YLe(t):null;case"time-only":return r?KLe(t):null}}function Dae(t){return new Tu({digitSeparator:t.useGrouping!=="never"})}function bH(t){const e=Dae(t);return e.places=t.maximumFractionDigits,e}function wH(t){let e;const i=Fae(t),r=zae(t),s=t.hour12==="never"?"24":null,n=t.year==="numeric"?"year":null,o=jae(t);return i&&r&&s?e=`${i}-${r}-${s}`:i&&r?e=`${i}-${r}`:i?e=i:n&&o?e=`${o}-${n}`:n&&(e=n),e?new Tu({dateFormat:e}):null}function YLe(t){let e;const i=Fae(t),r=t.year==="numeric"?"year":null,s=jae(t);return i?e=i:r&&s?e=`${s}-${r}`:r&&(e=r),e?new Tu({dateFormat:e}):null}function KLe(t){let e;const i=zae(t),r=t.hour12==="never"?"24":null;return i&&r?e=`short-date-${i}-${r}`:i&&(e=`short-date-${i}`),e?new Tu({dateFormat:e}):null}function Fae(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function zae(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function jae(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function vS(t,e){if(!Rg(t))return;const i=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new pC({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:i});case"single":case"double":return new pC({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:i});case"date":case"timestamp-offset":return new lf({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new lf({dateStyle:"short"});case"time-only":return new lf({timeStyle:"short",hour12:r})}}let Ro=class extends Le(Y){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?H6(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?Cae(e):null)}readFormat(e,i){if(!i.fieldFormat)return e?Tu.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};u([p({value:null,clonable:!1,types:Mae,json:{write:{overridePolicy(t,e,i){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!i?.writeFieldFormat}}}}})],Ro.prototype,"fieldFormat",null),u([p({type:String,json:{write:!0}})],Ro.prototype,"fieldName",void 0),u([p({value:null,clonable:!1,type:Tu,json:{write:!0}})],Ro.prototype,"format",null),u([Q("format")],Ro.prototype,"readFormat",null),u([p({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Ro.prototype,"isEditable",void 0),u([p({type:String,json:{write:!0}})],Ro.prototype,"label",void 0),u([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ro.prototype,"statisticType",void 0),u([Ee(new We({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ro.prototype,"stringFieldOption",void 0),u([p({type:String,json:{write:!0}})],Ro.prototype,"tooltip",void 0),u([p({type:Boolean,json:{write:!0}})],Ro.prototype,"visible",void 0),Ro=u([M("esri.popup.FieldInfo")],Ro);const w3=Ro;var VF;let ap=VF=class extends Oh{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new VF(U({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([p({type:Object,json:{write:!0}})],ap.prototype,"attributes",void 0),u([p({type:String,json:{write:!0}})],ap.prototype,"description",void 0),u([p({type:[w3],json:{write:!0}})],ap.prototype,"fieldInfos",void 0),u([p({type:String,json:{write:!0}})],ap.prototype,"title",void 0),u([p({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ap.prototype,"type",void 0),ap=VF=u([M("esri.popup.content.FieldsContent")],ap);const Gw=ap;let ym=class extends Y{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};u([p({type:String,json:{write:!0}})],ym.prototype,"altText",void 0),u([p({type:String,json:{write:!0}})],ym.prototype,"caption",void 0),u([p({type:String,json:{write:!0}})],ym.prototype,"title",void 0),u([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ym.prototype,"type",void 0),ym=u([M("esri.popup.content.mixins.MediaInfo")],ym);const W6=ym;var UF;let gm=UF=class extends _e{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new UF({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([p()],gm.prototype,"color",void 0),u([p()],gm.prototype,"fieldName",void 0),u([p()],gm.prototype,"tooltip",void 0),u([p()],gm.prototype,"value",void 0),gm=UF=u([M("esri.popup.content.support.ChartMediaInfoValueSeries")],gm);const XLe=gm;var BF;let lp=BF=class extends Y{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new BF({colors:U(this.colors),fields:U(this.fields),normalizeField:this.normalizeField,series:U(this.series),tooltipField:this.tooltipField})}};u([p({type:[ne],json:{type:[[Ke]],write:!0}})],lp.prototype,"colors",void 0),u([p({type:[String],json:{write:{isRequired:!0}}})],lp.prototype,"fields",void 0),u([p({type:String,json:{write:!0}})],lp.prototype,"normalizeField",void 0),u([p({type:[XLe],json:{read:!1}})],lp.prototype,"series",void 0),u([p({type:String,json:{write:!0}})],lp.prototype,"tooltipField",void 0),lp=BF=u([M("esri.popup.content.support.ChartMediaInfoValue")],lp);const QLe=lp;let X1=class extends W6{constructor(e){super(e),this.type=null,this.value=void 0}};u([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],X1.prototype,"type",void 0),u([p({type:QLe,json:{write:{isRequired:!0}}})],X1.prototype,"value",void 0),X1=u([M("esri.popup.content.mixins.ChartMediaInfo")],X1);const _3=X1,x3=Qr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var qF;let UT=qF=class extends _3{constructor(t){super(t),this.type="bar-chart"}clone(){return new qF({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:x3.write,isRequired:!0}}})],UT.prototype,"type",void 0),UT=qF=u([M("esri.popup.content.BarChartMediaInfo")],UT);const Vae=UT;var GF;let BT=GF=class extends _3{constructor(t){super(t),this.type="column-chart"}clone(){return new GF({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:x3.write,isRequired:!0}}})],BT.prototype,"type",void 0),BT=GF=u([M("esri.popup.content.ColumnChartMediaInfo")],BT);const Uae=BT;var HF;let Q1=HF=class extends Y{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new HF({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([p({type:String,json:{write:!0}})],Q1.prototype,"linkURL",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],Q1.prototype,"sourceURL",void 0),Q1=HF=u([M("esri.popup.content.support.ImageMediaInfoValue")],Q1);const eOe=Q1;var WF;let Gv=WF=class extends W6{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new WF({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};u([p({type:Number,json:{write:!0}})],Gv.prototype,"refreshInterval",void 0),u([p({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Gv.prototype,"type",void 0),u([p({type:eOe,json:{write:{isRequired:!0}}})],Gv.prototype,"value",void 0),Gv=WF=u([M("esri.popup.content.ImageMediaInfo")],Gv);const Bae=Gv;var JF;let qT=JF=class extends _3{constructor(t){super(t),this.type="line-chart"}clone(){return new JF({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:x3.write,isRequired:!0}}})],qT.prototype,"type",void 0),qT=JF=u([M("esri.popup.content.LineChartMediaInfo")],qT);const qae=qT;var ZF;let GT=ZF=class extends _3{constructor(t){super(t),this.type="pie-chart"}clone(){return new ZF({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};u([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:x3.write,isRequired:!0}}})],GT.prototype,"type",void 0),GT=ZF=u([M("esri.popup.content.PieChartMediaInfo")],GT);const Gae=GT,YF={base:W6,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Vae,"column-chart":Uae,"line-chart":qae,"pie-chart":Gae,image:Bae}};var KF;let vl=KF=class extends Oh{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?Bae.fromJSON(e):e.type==="barchart"?Vae.fromJSON(e):e.type==="columnchart"?Uae.fromJSON(e):e.type==="linechart"?qae.fromJSON(e):e.type==="piechart"?Gae.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new KF(U({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([p()],vl.prototype,"activeMediaInfoIndex",void 0),u([p({type:Object,json:{write:!0}})],vl.prototype,"attributes",void 0),u([p({type:String,json:{write:!0}})],vl.prototype,"description",void 0),u([p({types:[YF]})],vl.prototype,"mediaInfos",void 0),u([Q("mediaInfos")],vl.prototype,"readMediaInfos",null),u([oe("mediaInfos")],vl.prototype,"writeMediaInfos",null),u([p({type:String,json:{write:!0}})],vl.prototype,"title",void 0),u([p({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vl.prototype,"type",void 0),vl=KF=u([M("esri.popup.content.MediaContent")],vl);const $$=vl;var XF;let ex=XF=class extends Y{constructor(t){super(t),this.field=null,this.order=null}clone(){return new XF({field:this.field,order:this.order})}};u([p({type:String,json:{write:!0}})],ex.prototype,"field",void 0),u([p({type:["asc","desc"],json:{write:!0}})],ex.prototype,"order",void 0),ex=XF=u([M("esri.popup.support.RelatedRecordsInfoFieldOrder")],ex);const J6=ex;let vc=class extends Le(Oh){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([p({type:String,json:{write:!0}})],vc.prototype,"description",void 0),u([p({type:Number,json:{type:Ke,write:!0}})],vc.prototype,"displayCount",void 0),u([p({type:["list"],json:{write:{isRequired:!0}}})],vc.prototype,"displayType",void 0),u([p({type:[J6],json:{write:!0}})],vc.prototype,"orderByFields",void 0),u([p({type:Number,json:{type:Ke,write:{isRequired:!0}}})],vc.prototype,"relationshipId",void 0),u([p({type:String,json:{write:!0}})],vc.prototype,"title",void 0),u([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vc.prototype,"type",void 0),vc=u([M("esri.popup.content.RelationshipContent")],vc);const I$=vc;var QF;let tx=QF=class extends Oh{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new QF({text:this.text})}};u([p({type:String,json:{write:!0}})],tx.prototype,"text",void 0),u([p({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],tx.prototype,"type",void 0),tx=QF=u([M("esri.popup.content.TextContent")],tx);const k$=tx;let ad=class extends Le(Y){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([p({type:String,json:{write:!0}})],ad.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],ad.prototype,"description",void 0),u([p({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],ad.prototype,"type",void 0),u([p({type:Number,json:{type:Ke,write:!0}})],ad.prototype,"associatedNetworkSourceId",void 0),u([p({type:Number,json:{type:Ke,write:!0}})],ad.prototype,"associatedAssetGroup",void 0),u([p({type:Number,json:{type:Ke,write:!0}})],ad.prototype,"associatedAssetType",void 0),ad=u([M("esri.popup.support.UtilityNetworkAssociationType")],ad);const Hae=ad;let cp=class extends Le(Oh){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([p({type:String,json:{write:!0}})],cp.prototype,"description",void 0),u([p({type:Number,json:{type:Ke,write:!0}})],cp.prototype,"displayCount",void 0),u([p({type:String,json:{write:!0}})],cp.prototype,"title",void 0),u([p({type:[Hae],json:{write:!0}})],cp.prototype,"associationTypes",void 0),u([Ee({utilityNetworkAssociations:"utility-network-associations"})],cp.prototype,"type",void 0),cp=u([M("esri.popup.content.UtilityNetworkAssociationsContent")],cp);const Z6=cp,tOe={base:null,key:"type",typeMap:{attachment:qw,media:$$,text:k$,expression:b3,field:Gw,relationship:I$,utilityNetworkAssociations:Z6}},iOe={base:null,key:"type",typeMap:{attachment:qw,media:$$,text:k$,expression:b3,field:Gw,relationship:I$}};var e5;let vm=e5=class extends Y{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new e5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([p({type:String,json:{write:!0}})],vm.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],vm.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],vm.prototype,"expression",void 0),u([p({type:["string","number"],json:{write:!0}})],vm.prototype,"returnType",void 0),vm=e5=u([M("esri.popup.ExpressionInfo")],vm);const rOe=vm;var t5;let ix=t5=class extends Y{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new t5({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([p({type:Boolean,json:{write:!0}})],ix.prototype,"returnTopmostRaster",void 0),u([p({type:Boolean,json:{write:!0}})],ix.prototype,"showNoDataRecords",void 0),ix=t5=u([M("esri.popup.LayerOptions")],ix);const sOe=ix;var i5;let rx=i5=class extends Y{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new i5({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?U(this.orderByFields):null})}};u([p({type:Boolean,json:{write:!0}})],rx.prototype,"showRelatedRecords",void 0),u([p({type:[J6],json:{write:!0}})],rx.prototype,"orderByFields",void 0),rx=i5=u([M("esri.popup.RelatedRecordsInfo")],rx);const _H=rx;var r5;let Ma=r5=class extends O_(_e){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new r5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([p()],Ma.prototype,"active",void 0),u([p()],Ma.prototype,"className",void 0),u([p()],Ma.prototype,"disabled",void 0),u([p()],Ma.prototype,"icon",void 0),u([p()],Ma.prototype,"id",void 0),u([p()],Ma.prototype,"indicator",void 0),u([p()],Ma.prototype,"title",void 0),u([p()],Ma.prototype,"type",void 0),u([p()],Ma.prototype,"visible",void 0),Ma=r5=u([M("esri.support.actions.ActionBase")],Ma);const Y6=Ma;var s5;let HT=s5=class extends Y6{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new s5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([p()],HT.prototype,"image",void 0),HT=s5=u([M("esri.support.actions.ActionButton")],HT);const nOe=HT;var n5;let sx=n5=class extends Y6{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new n5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([p()],sx.prototype,"image",void 0),u([p()],sx.prototype,"value",void 0),sx=n5=u([M("esri.support.actions.ActionToggle")],sx);const oOe=sx,f1="relationships/",xH="expression/",aOe=ue.ofType({key:"type",defaultKeyValue:"button",base:Y6,typeMap:{button:nOe,toggle:oOe}}),lOe={base:Oh,key:"type",typeMap:{media:$$,custom:GLe,text:k$,attachments:qw,fields:Gw,expression:b3,relationship:I$,utilityNetworkAssociations:Z6}},Wae=new Set(["attachments","fields","media","text","expression","relationship"]),cOe=new Set([...Wae,"utility-network-associations"]);let Br=class extends Le(Y){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Ou(lOe,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||yn(e)?e:(X.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeWebMapContent(e,i,r,s){this._writePopupTemplateContent(e,i,s)}writeFieldInfos(e,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null,{writeFieldFormat:a,...l}=s||{};if(e){const c=o?o.filter(h=>h.type==="fields"):[],d=c.length&&c.every(h=>h.fieldInfos?.length);i.fieldInfos=e.filter(Boolean).map(h=>{const f=h.toJSON(l);return d&&(f.visible=!1),f})}if(o)for(const c of o)c.type==="fields"&&this._writeFieldsContent(c,i,l)}writeLayerOptions(e,i,r,s){i[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i,r){const s=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,r,[...s,...this._getContentExpressionInfos(this.content,s)]),If(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,i){const r=new Set;return await this.collectRequiredFields(r,e,i),[...r].sort()}_writePopupTemplateContent(e,i,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>r?.origin==="web-scene"?Wae.has(s.type):cOe.has(s.type)).map(s=>s?.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}_writeFieldsContent(e,i,r){const s=e.fieldInfos;if(!Array.isArray(s)||!s.length)return;const n=i.fieldInfos;if(Array.isArray(n))for(const o of s){const a=n.find(l=>l.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());a?a.visible=!0:n.push(o.toJSON(r))}else i.fieldInfos=s.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){const r=e.orderByFields?.map(n=>this._toFieldOrderJSON(n,e.relationshipId))||[],s=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=U(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(e,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),$$.fromJSON(n)):n.type==="text"?(n.text||!e||s.description||(n.text=e,s.description=!0),k$.fromJSON(n)):n.type==="attachments"?qw.fromJSON(n):n.type==="fields"?Gw.fromJSON(n):n.type==="expression"?b3.fromJSON(n):n.type==="relationship"?I$.fromJSON(n):n.type==="utilityNetworkAssociations"?Z6.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:r}=e;if(!i?.startsWith(f1))return null;const s=i.replace(f1,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?I$.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,i){const{order:r,field:s}=e;return{field:`${f1}${i}/${s}`,order:r}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];e?n.push(new k$({text:e})):n.push(new Gw),Array.isArray(i)&&i.length&&n.push($$.fromJSON({mediaInfos:i})),r&&n.push(qw.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&a?.length&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&n.push(c)}),n.length?n:e}_getContentElementFields(e){const i=e?.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(e.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:i,title:r,value:s}=e,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:d}=n,h=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(c),...this._extractFieldNames(d),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,i,r,s){s&&await Promise.all(s.map(n=>Hs(e,i,r,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(f1)||i.startsWith(xH))).map(i=>i.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:i,title:r,type:s}=e,n=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return q6(e).filter(i=>!(i.startsWith(f1)||i.startsWith(xH)))}};u([p({type:aOe})],Br.prototype,"actions",void 0),u([p()],Br.prototype,"content",void 0),u([Mt("content")],Br.prototype,"castContent",null),u([Q("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Br.prototype,"readContent",null),u([oe("web-scene","content",{popupElements:{type:ue.ofType(iOe)},showAttachments:{type:Boolean},mediaInfos:{type:ue.ofType(YF)},description:{type:String},relatedRecordsInfo:{type:_H}})],Br.prototype,"writeWebSceneContent",null),u([oe("content",{popupElements:{type:ue.ofType(tOe)},showAttachments:{type:Boolean},mediaInfos:{type:ue.ofType(YF)},description:{type:String},relatedRecordsInfo:{type:_H}})],Br.prototype,"writeWebMapContent",null),u([p({type:[rOe],json:{write:!0}})],Br.prototype,"expressionInfos",void 0),u([p({type:[w3]})],Br.prototype,"fieldInfos",void 0),u([oe("fieldInfos")],Br.prototype,"writeFieldInfos",null),u([p({type:sOe})],Br.prototype,"layerOptions",void 0),u([oe("layerOptions")],Br.prototype,"writeLayerOptions",null),u([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Br.prototype,"lastEditInfoEnabled",void 0),u([p()],Br.prototype,"outFields",void 0),u([p()],Br.prototype,"overwriteActions",void 0),u([p()],Br.prototype,"returnGeometry",void 0),u([p({json:{type:String}})],Br.prototype,"title",void 0),u([oe("title")],Br.prototype,"writeTitle",null),Br=u([M("esri.PopupTemplate")],Br);const Uf=Br,K6=Symbol("idFieldsProviderSymbol");function uOe(t){return!!t&&K6 in t}function SH(t){return uOe(t)?t[K6]:void 0}const E2=Symbol("popupProvider");function Dft(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function dOe(t){return!!t&&E2 in t}function hOe(t){return dOe(t)?t[E2]:null}function M2(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const i=[];for(const r of e.fieldNames)i.push(t.attributes[r]??null);return JSON.stringify(i)}}}function $H(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const i=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(i)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const IH=new We({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let pOe=0,kr=class extends Y{constructor(e){super(e),this.id="sym"+pOe++,this.type=null,this.color=new ne([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([p({type:IH.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:IH.write,isRequired:!0}}})],kr.prototype,"type",void 0),u([p({type:ne,json:{write:{allowNull:!0}}})],kr.prototype,"color",void 0),u([Q("color")],kr.prototype,"readColor",null),kr=u([M("esri.symbols.Symbol")],kr);var o5;let cn=o5=class extends kr{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const n=s.valueExpressionInfo;return n?Hs(t,e,null,n.expression):null});await Promise.all(r)}}}clone(){return new o5({data:U(this.data)})}hash(){return ote(JSON.stringify(this.data)).toString()}};u([p({json:{write:!1}})],cn.prototype,"color",void 0),u([p({json:{write:!0}})],cn.prototype,"data",void 0),u([Q("data",["symbol"])],cn.prototype,"readData",null),u([oe("data",{})],cn.prototype,"writeData",null),u([Ee({CIMSymbolReference:"cim"},{readOnly:!0})],cn.prototype,"type",void 0),cn=o5=u([M("esri.symbols.CIMSymbol")],cn);let Bn=class extends Y{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,i,r){e||(i[r]=e)}};u([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Bn.prototype,"enabled",void 0),u([oe("enabled")],Bn.prototype,"writeEnabled",null),u([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Bn.prototype,"type",void 0),Bn=u([M("esri.symbols.Symbol3DLayer")],Bn);function fOe(t,e){const i=e.transparency!=null?S$(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new ne([r[0]||0,r[1]||0,r[2]||0,i]):null}function mOe(t,e){e.color=t.toJSON().slice(0,3);const i=p3(t.a);i!==0&&(e.transparency=i)}function Bf(t){return{type:ne,nonNullable:t?.nonNullable,json:{type:[Ke],default:null,read:{source:["color","transparency"],reader:fOe},write:{target:{color:{type:[Ke],isRequired:t?.colorRequiredOnWrite},transparency:{type:Ke}},writer:mOe}}}}const Fu={type:Number,cast:Tt,json:{write:!0}};function jft(t){return t==="emissive"?0:1}let bm=class extends Y{constructor(e){super(e),this.color=new ne([0,0,0,1]),this.extensionLength=0,this.size=Zt(1)}clone(){}cloneProperties(){return{color:U(this.color),size:this.size,extensionLength:this.extensionLength}}};u([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],bm.prototype,"type",void 0),u([p(Bf({colorRequiredOnWrite:!0}))],bm.prototype,"color",void 0),u([p({...Fu,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],bm.prototype,"extensionLength",void 0),u([p(Fu)],bm.prototype,"size",void 0),bm=u([M("esri.symbols.edges.Edges3D")],bm);const X6=bm;var a5;let WT=a5=class extends X6{constructor(t){super(t),this.type="sketch"}clone(){return new a5(this.cloneProperties())}};u([Ee({sketch:"sketch"},{readOnly:!0})],WT.prototype,"type",void 0),WT=a5=u([M("esri.symbols.edges.SketchEdges3D")],WT);const yOe=WT;var l5;let JT=l5=class extends X6{constructor(t){super(t),this.type="solid"}clone(){return new l5(this.cloneProperties())}};u([Ee({solid:"solid"},{readOnly:!0})],JT.prototype,"type",void 0),JT=l5=u([M("esri.symbols.edges.SolidEdges3D")],JT);const Jae=JT,Zae={types:{key:"type",base:X6,typeMap:{solid:Jae,sketch:yOe}},json:{write:!0}};var c5;let Jb=c5=class extends Y{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new c5(t)}};u([p({json:{write:!1}})],Jb.prototype,"strength",void 0),u([p({json:{write:!1}})],Jb.prototype,"source",void 0),Jb=c5=u([M("esri.symbols.support.Symbol3DEmissive")],Jb);var u5;let So=u5=class extends Y{constructor(t){super(t),this.color=null,this.emissive=new Jb({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new u5(t)}};u([p(Bf())],So.prototype,"color",void 0),u([p({type:Jb,json:{write:!1}})],So.prototype,"emissive",void 0),So=u5=u([M("esri.symbols.support.Symbol3DMaterial")],So);var d5,J0;let kd=(J0=class extends Bn{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new d5({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},d5=J0,J0);u([Ee({Extrude:"extrude"},{readOnly:!0})],kd.prototype,"type",void 0),u([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],kd.prototype,"size",void 0),u([p({type:So,json:{write:!0}})],kd.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],kd.prototype,"castShadows",void 0),u([p(Zae)],kd.prototype,"edges",void 0),kd=d5=u([M("esri.symbols.ExtrudeSymbol3DLayer")],kd);let bS=class extends Y{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],bS.prototype,"type",void 0),bS=u([M("esri.symbols.patterns.LinePattern3D")],bS);const gOe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var h5;const vOe=Qr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let cy=h5=class extends bS{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new h5(t)}};u([p({type:["style"],json:{write:{isRequired:!0}}})],cy.prototype,"type",void 0),u([Ee(vOe),p({type:gOe,json:{write:{isRequired:!0}}})],cy.prototype,"style",void 0),cy=h5=u([M("esri.symbols.patterns.LineStylePattern3D")],cy);let wS=class extends Y{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],wS.prototype,"type",void 0),wS=u([M("esri.symbols.patterns.Pattern3D")],wS);const bOe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var p5;let Zb=p5=class extends wS{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new p5({style:this.style})}};u([p({type:["style"],json:{write:{isRequired:!0}}})],Zb.prototype,"type",void 0),u([p({type:bOe,json:{read:!0,write:{isRequired:!0}}})],Zb.prototype,"style",void 0),Zb=p5=u([M("esri.symbols.patterns.StylePattern3D")],Zb);const wOe={types:{key:"type",base:wS,typeMap:{style:Zb}},json:{write:!0}},Yae={types:{key:"type",base:bS,typeMap:{style:cy}},json:{write:!0}},_S=new ne("white"),_Oe=new ne([255,255,255,0]);function xOe(t){return t.r===0&&t.g===0&&t.b===0}var f5;let xS=f5=class extends So{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new f5(t)}};u([Ee({multiply:"multiply",replace:"replace",tint:"tint"})],xS.prototype,"colorMixMode",void 0),xS=f5=u([M("esri.symbols.support.Symbol3DFillMaterial")],xS);function Q6(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function SOe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function $Oe(t,e,i,r,s,n,o,a,l,c,d,h,f,m,y,v){return[t,e,i,r,s,n,o,a,l,c,d,h,f,m,y,v]}const IOe=Q6();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:IOe,clone:SOe,create:Q6,fromValues:$Oe},Symbol.toStringTag,{value:"Module"}));function kOe(t){return t<=aU?new Array(t).fill(0):new Float64Array(t)}function qft(t){return(Qee(t)?t.byteLength/8:t.length)<=aU?Array.from(t):new Float64Array(t)}function Gft(t,e,i){return Array.isArray(t)?t.slice(e,e+i):t.subarray(e,e+i)}function Hft(t){return[...t]}function Wft(t){const e=Q6();for(let i=0;i<16;++i)e[i]=t[i];return e}function C2(t=POe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function e8(t,e,i,r,s,n,o=C2()){return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function Jft(t,e=C2()){return TOe(t,0,t.length/3,e)}function TOe(t,e,i,r=C2()){return Kae(r,y5),EOe(r,t,e,i),r}function Zft(t,e=kOe(24)){const[i,r,s,n,o,a]=t;return e[0]=i,e[1]=r,e[2]=s,e[3]=i,e[4]=r,e[5]=a,e[6]=i,e[7]=o,e[8]=s,e[9]=i,e[10]=o,e[11]=a,e[12]=n,e[13]=r,e[14]=s,e[15]=n,e[16]=r,e[17]=a,e[18]=n,e[19]=o,e[20]=s,e[21]=n,e[22]=o,e[23]=a,e}function Yft(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Pe(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Kft(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function Xft(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Qft(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function EOe(t,e,i=0,r=e.length/3){let s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let d=0;d<r;d++)s=Math.min(s,e[i+3*d]),n=Math.min(n,e[i+3*d+1]),o=Math.min(o,e[i+3*d+2]),a=Math.max(a,e[i+3*d]),l=Math.max(l,e[i+3*d+1]),c=Math.max(c,e[i+3*d+2]);t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function emt(t,e,i){const r=e.length;let s=t[0],n=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(i)for(let d=0;d<r;d++){const h=e[d];s=Math.min(s,h[0]),n=Math.min(n,h[1]),o=Math.min(o,h[2]),a=Math.max(a,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(let d=0;d<r;d++){const h=e[d];s=Math.min(s,h[0]),n=Math.min(n,h[1]),a=Math.max(a,h[0]),l=Math.max(l,h[1])}t[0]=s,t[1]=n,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function tmt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function P2(t){return t[0]>=t[3]?0:t[3]-t[0]}function A2(t){return t[1]>=t[4]?0:t[4]-t[1]}function L2(t){return t[2]>=t[5]?0:t[5]-t[2]}function imt(t){const e=P2(t),i=L2(t),r=A2(t);return Math.sqrt(e*e+i*i+r*r)}function rmt(t,e=[0,0,0]){return e[0]=t[0]+P2(t)/2,e[1]=t[1]+A2(t)/2,e[2]=t[2]+L2(t)/2,e}function smt(t,e=[0,0,0]){return e[0]=P2(t),e[1]=A2(t),e[2]=L2(t),e}function nmt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function MOe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function omt(t,e){return e==null||MOe(t,e)}function amt(t,e,i,r,s=t){return s[0]=t[0]+e,s[1]=t[1]+i,s[2]=t[2]+r,s[3]=t[3]+e,s[4]=t[4]+i,s[5]=t[5]+r,s}function lmt(t,e,i=t){const r=t[0]+P2(t)/2,s=t[1]+A2(t)/2,n=t[2]+L2(t)/2;return i[0]=r+(t[0]-r)*e,i[1]=s+(t[1]-s)*e,i[2]=n+(t[2]-n)*e,i[3]=r+(t[3]-r)*e,i[4]=s+(t[4]-s)*e,i[5]=n+(t[5]-n)*e,i}function cmt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function umt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function dmt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function Kae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function hmt(t){return t?Kae(t,y5):C2(y5)}function pmt(t,e=zr()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function fmt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function COe(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=s,t[5]=Number.POSITIVE_INFINITY,t}function m5(t){return t.length===6}function mmt(t){return P2(t)===0&&A2(t)===0&&L2(t)===0}function ymt(t,e,i){if(t==null||e==null)return t===e;if(!m5(t)||!m5(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const y5=[1/0,1/0,1/0,-1/0,-1/0,-1/0],POe=[0,0,0,0,0,0];C2();function gmt(t,{isPrimitive:e,width:i,depth:r,height:s}){const n=e?10:1;if(i==null&&s==null&&r==null)return[n*t[0],n*t[1],n*t[2]];const o=P_(i,r,s);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const AOe=e8(-.5,-.5,-.5,.5,.5,.5),LOe=e8(-.5,-.5,0,.5,.5,1),OOe=e8(-.5,-.5,0,.5,.5,.5);function vmt(t){switch(t){case"sphere":case"cube":case"diamond":return AOe;case"cylinder":case"cone":case"inverted-cone":return LOe;case"tetrahedron":return OOe;default:return}}const t8=["butt","square","round"],ROe=[...t8,"none"],Xae=["miter","bevel","round"];var g5;let wm=g5=class extends Y{constructor(t){super(t),this.color=new ne([0,0,0,1]),this.size=Zt(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new g5(t)}};u([p(Bf({colorRequiredOnWrite:!0}))],wm.prototype,"color",void 0),u([p({...Fu,json:{write:{isRequired:!0}}})],wm.prototype,"size",void 0),u([p(Yae)],wm.prototype,"pattern",void 0),u([p({type:t8,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],wm.prototype,"patternCap",void 0),wm=g5=u([M("esri.symbols.support.Symbol3DOutline")],wm);var ZT,Z0;let Rn=(Z0=class extends Bn{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new ZT(e)}static fromSimpleFillSymbol(e){const i=e.outline&&e.outline.style&&e.outline.style!=="solid"?new cy({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??_S).clone(),pattern:i};return i&&e.outline?.cap&&(r.patternCap=e.outline.cap),new ZT({material:new xS({color:(e.color??_Oe).clone()}),pattern:e.style&&e.style!=="solid"?new Zb({style:e.style}):null,outline:r})}},ZT=Z0,Z0);u([Ee({Fill:"fill"},{readOnly:!0})],Rn.prototype,"type",void 0),u([p({type:xS,json:{write:!0}})],Rn.prototype,"material",void 0),u([p(wOe)],Rn.prototype,"pattern",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Rn.prototype,"castShadows",void 0),u([p({type:wm,json:{write:!0}})],Rn.prototype,"outline",void 0),u([p(Zae)],Rn.prototype,"edges",void 0),Rn=ZT=u([M("esri.symbols.FillSymbol3DLayer")],Rn);var v5;const NOe=Qr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let _m=v5=class extends Y{constructor(t){super(t)}readHref(t,e,i){return t?gh(t,i):e.dataURI}writeHref(t,e,i,r){t&&(Ah(t)?e.dataURI=t:(e.href=ug(t,r),gn(e.href)&&(e.href=Gn(e.href))))}clone(){return new v5({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};u([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],_m.prototype,"href",void 0),u([Q("href")],_m.prototype,"readHref",null),u([oe("href",{href:{type:String},dataURI:{type:String}})],_m.prototype,"writeHref",null),u([Ee(NOe)],_m.prototype,"primitive",void 0),_m=v5=u([M("esri.symbols.support.IconSymbol3DLayerResource")],_m);const DOe="circle";let YT=class extends Le(Y){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};u([p({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],YT.prototype,"mode",void 0),YT=u([M("esri.symbols.support.OccludedVisibility")],YT);const Qae=YT;var b5;let Yb=b5=class extends _e{constructor(t){super(t),this.x=0,this.y=0}clone(){return new b5({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};u([p({type:Number})],Yb.prototype,"x",void 0),u([p({type:Number})],Yb.prototype,"y",void 0),Yb=b5=u([M("esri.symbols.support.Symbol3DAnchorPosition2D")],Yb);var w5;let nx=w5=class extends Y{constructor(t){super(t),this.color=new ne([0,0,0,1]),this.size=Zt(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new w5(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};u([p(Bf({colorRequiredOnWrite:!0}))],nx.prototype,"color",void 0),u([p({...Fu,json:{write:{isRequired:!0}}})],nx.prototype,"size",void 0),nx=w5=u([M("esri.symbols.support.Symbol3DIconOutline")],nx);var Hv,Y0;let ws=(Y0=class extends Bn{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new Hv({anchor:this.anchor,anchorPosition:U(this.anchorPosition),enabled:this.enabled,material:U(this.material),outline:U(this.outline),resource:U(this.resource),angle:this.angle,size:this.size,occludedVisibility:U(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const i=e.color||_S,r=kH(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||_S).clone()}:null;return new Hv({size:e.size,angle:e.angle,resource:{primitive:zOe(()=>X.getLogger(this.prototype),e.style)},material:{color:i},outline:s,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const i=!e.color||xOe(e.color)?_S:e.color,r=kH(e);return new Hv({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:i.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Hv({resource:{href:xie({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},Hv=Y0,Y0);function kH(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,r=TH(t.xoffset),s=TH(t.yoffset);return(r||s)&&e&&i?{x:-r/e,y:s/i}:null}function TH(t){return isFinite(t)?t:0}u([p({type:So,json:{write:!0}})],ws.prototype,"material",void 0),u([p({type:_m,json:{write:!0}})],ws.prototype,"resource",void 0),u([Ee({Icon:"icon"},{readOnly:!0})],ws.prototype,"type",void 0),u([p({...Fu,json:{write:{isRequired:!0}}})],ws.prototype,"size",void 0),u([Ee({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],ws.prototype,"anchor",void 0),u([p({type:Yb,json:{type:[Number],read:{reader:t=>new Yb({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ws.prototype,"anchorPosition",void 0),u([p({type:nx,json:{write:!0}})],ws.prototype,"outline",void 0),u([p({type:Number,json:{write:!0,default:0}})],ws.prototype,"angle",void 0),u([p({type:Qae})],ws.prototype,"occludedVisibility",void 0),ws=Hv=u([M("esri.symbols.IconSymbol3DLayer")],ws);const FOe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function zOe(t,e){return FOe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const jOe=["begin","end","begin-end"],ele=["arrow","circle","square","diamond","cross","x"];let Ud=class extends Le(Y){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};u([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Ud.prototype,"type",void 0),u([p({type:jOe,json:{default:"begin-end",write:!0}})],Ud.prototype,"placement",void 0),u([p({type:ele,json:{default:"arrow",write:!0}})],Ud.prototype,"style",void 0),u([p({type:ne,json:{type:[Ke],default:null,write:!0}})],Ud.prototype,"color",void 0),Ud=u([M("esri.symbols.LineStyleMarker3D")],Ud);var KT,K0;let On=(K0=class extends Bn{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Zt(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new KT(e)}static fromSimpleLineSymbol(e){const i={enabled:!0,size:e.width??Zt(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new cy({style:e.style}):null,material:new So({color:(e.color||_S).clone()}),marker:e.marker?new Ud({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new KT(i)}},KT=K0,K0);u([p({type:So,json:{write:!0}})],On.prototype,"material",void 0),u([Ee({Line:"line"},{readOnly:!0})],On.prototype,"type",void 0),u([p({type:Xae,json:{write:!0,default:"miter"}})],On.prototype,"join",void 0),u([p({type:t8,json:{write:!0,default:"butt"}})],On.prototype,"cap",void 0),u([p({...Fu,json:{write:{isRequired:!0}}})],On.prototype,"size",void 0),u([p(Yae)],On.prototype,"pattern",void 0),u([p({types:{key:"type",base:Ud,typeMap:{style:Ud}},json:{write:!0}})],On.prototype,"marker",void 0),On=KT=u([M("esri.symbols.LineSymbol3DLayer")],On);var _5;const VOe=Qr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let ox=_5=class extends Y{clone(){return new _5({href:this.href,primitive:this.primitive})}};u([p({type:String,json:{read:zA,write:dg}})],ox.prototype,"href",void 0),u([Ee(VOe)],ox.prototype,"primitive",void 0),ox=_5=u([M("esri.symbols.support.ObjectSymbol3DLayerResource")],ox);const UOe="sphere";var x5;let Jm=x5=class extends _e{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new x5({x:this.x,y:this.y,z:this.z})}};u([p({type:Number})],Jm.prototype,"x",void 0),u([p({type:Number})],Jm.prototype,"y",void 0),u([p({type:Number})],Jm.prototype,"z",void 0),Jm=x5=u([M("esri.symbols.support.Symbol3DAnchorPosition3D")],Jm);var S5,X0;let bs=(X0=class extends Bn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new S5({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},S5=X0,X0);u([p({type:So,json:{write:!0}})],bs.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],bs.prototype,"castShadows",void 0),u([p({type:ox,json:{write:!0}})],bs.prototype,"resource",void 0),u([Ee({Object:"object"},{readOnly:!0})],bs.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],bs.prototype,"width",void 0),u([p({type:Number,json:{write:!0}})],bs.prototype,"height",void 0),u([p({type:Number,json:{write:!0}})],bs.prototype,"depth",void 0),u([Ee({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],bs.prototype,"anchor",void 0),u([p({type:Jm,json:{type:[Number],read:{reader:t=>new Jm({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],bs.prototype,"anchorPosition",void 0),u([p({type:Number,json:{write:!0}})],bs.prototype,"heading",void 0),u([p({type:Number,json:{write:!0}})],bs.prototype,"tilt",void 0),u([p({type:Number,json:{write:!0}})],bs.prototype,"roll",void 0),u([p({readOnly:!0})],bs.prototype,"isPrimitive",null),bs=S5=u([M("esri.symbols.ObjectSymbol3DLayer")],bs);var $5,Q0;let zs=(Q0=class extends Bn{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,i){return e??(i.height==null&&i.size!=null?i.size:void 0)}readHeight(e,i){return e??(i.width==null&&i.size!=null?i.size:void 0)}clone(){return new $5({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},$5=Q0,Q0);u([p({type:So,json:{write:!0}})],zs.prototype,"material",void 0),u([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],zs.prototype,"castShadows",void 0),u([Ee({Path:"path"},{readOnly:!0})],zs.prototype,"type",void 0),u([p({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],zs.prototype,"profile",void 0),u([p({type:Xae,nonNullable:!0,json:{write:!0,default:"miter"}})],zs.prototype,"join",void 0),u([p({type:ROe,nonNullable:!0,json:{write:!0,default:"butt"}})],zs.prototype,"cap",void 0),u([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],zs.prototype,"width",void 0),u([Q("width",["width","size","height"])],zs.prototype,"readWidth",null),u([p({type:Number,json:{write:!0}})],zs.prototype,"height",void 0),u([Q("height",["height","size","width"])],zs.prototype,"readHeight",null),u([p({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],zs.prototype,"anchor",void 0),u([p({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],zs.prototype,"profileRotation",void 0),zs=$5=u([M("esri.symbols.PathSymbol3DLayer")],zs);const BOe=["none","underline","line-through"],qOe=["normal","italic","oblique"],GOe=["normal","lighter","bold","bolder"],tle={type:Number,cast:t=>{const e=zn(t);return e===0?1:bn(e,.1,4)},nonNullable:!0},HOe=["left","right","center"],WOe=["baseline","top","middle","bottom"],ile={type:HOe,nonNullable:!0},rle={type:WOe,nonNullable:!0},JOe=8;var I5;let Qo=I5=class extends Y{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Tt(t)}clone(){return new I5({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([p({type:BOe,json:{default:"none",write:!0}})],Qo.prototype,"decoration",void 0),u([p({type:String,json:{write:!0}})],Qo.prototype,"family",void 0),u([p({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],Qo.prototype,"size",void 0),u([Mt("size")],Qo.prototype,"castSize",null),u([p({type:qOe,json:{default:"normal",write:!0}})],Qo.prototype,"style",void 0),u([p({type:GOe,json:{default:"normal",write:!0}})],Qo.prototype,"weight",void 0),Qo=I5=u([M("esri.symbols.Font")],Qo);var k5;let Kb=k5=class extends Y{constructor(){super(...arguments),this.color=new ne([0,0,0,1]),this.size=0}clone(){const t={color:U(this.color),size:this.size};return new k5(t)}};u([p(Bf())],Kb.prototype,"color",void 0),u([p(Fu)],Kb.prototype,"size",void 0),Kb=k5=u([M("esri.symbols.support.Symbol3DHalo")],Kb);let SS=class extends Le(Y){constructor(e){super(e),this.color=null}};u([p(Bf())],SS.prototype,"color",void 0),SS=u([M("esri.symbols.support.Symbol3DTextBackground")],SS);var XT,ew;let Zr=(ew=class extends Bn{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,i,r,s){const n={...s,textSymbol3D:!0};i.font=e.write({},n),delete i.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new XT({enabled:this.enabled,font:U(this.font),halo:U(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:U(this.background),occludedVisibility:U(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new XT({font:e.font!=null?e.font.clone():new Qo,halo:ZOe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new So({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new SS({color:e.backgroundColor.clone()}):null})}},XT=ew,ew);function ZOe(t,e){return t&&e!=null&&e>0?new Kb({color:U(t),size:e}):null}u([p({type:Qo,json:{write:!0}})],Zr.prototype,"font",null),u([oe("font")],Zr.prototype,"writeFont",null),u([p({type:Kb,json:{write:!0}})],Zr.prototype,"halo",void 0),u([p({...ile,json:{default:"center",write:!0}})],Zr.prototype,"horizontalAlignment",void 0),u([p({...tle,json:{default:1,write:!0}})],Zr.prototype,"lineHeight",void 0),u([p({type:So,json:{write:!0}})],Zr.prototype,"material",void 0),u([p({type:SS,json:{write:!0}})],Zr.prototype,"background",void 0),u([p(Fu)],Zr.prototype,"size",null),u([p({type:String,json:{write:!0}})],Zr.prototype,"text",void 0),u([Ee({Text:"text"},{readOnly:!0})],Zr.prototype,"type",void 0),u([p({...rle,json:{default:"baseline",write:!0}})],Zr.prototype,"verticalAlignment",void 0),u([p({type:Qae})],Zr.prototype,"occludedVisibility",void 0),Zr=XT=u([M("esri.symbols.TextSymbol3DLayer")],Zr);var T5,tw;let Td=(tw=class extends Bn{constructor(e){super(e),this.color=E5.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new T5({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},T5=tw,tw);u([p({type:ne,nonNullable:!0,json:{type:[Ke],write:(t,e,i)=>e[i]=t.toArray(1),default:()=>E5.clone(),defaultEquals:t=>t.toCss(!0)===E5.toCss(!0)}})],Td.prototype,"color",void 0),u([Ee({Water:"water"},{readOnly:!0})],Td.prototype,"type",void 0),u([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Td.prototype,"waterbodySize",void 0),u([p({type:Number,json:{write:!0,default:null}})],Td.prototype,"waveDirection",void 0),u([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Td.prototype,"waveStrength",void 0),Td=T5=u([M("esri.symbols.WaterSymbol3DLayer")],Td);const E5=new ne([0,119,190]);var M5;let zl=M5=class extends _e{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new M5({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([p({type:String})],zl.prototype,"name",void 0),u([p({type:String})],zl.prototype,"styleUrl",void 0),u([p({type:String})],zl.prototype,"styleName",void 0),u([p({type:ce})],zl.prototype,"portal",void 0),zl=M5=u([M("esri.symbols.support.StyleOrigin")],zl);var C5;let ky=C5=class extends _e{constructor(){super(...arguments),this.url=""}clone(){return new C5({url:this.url})}};u([p({type:String})],ky.prototype,"url",void 0),ky=C5=u([M("esri.symbols.support.Thumbnail")],ky);const sle={icon:ws,object:bs,line:On,path:zs,fill:Rn,extrude:kd,text:Zr,water:Td},YOe=ue.ofType({base:Bn,key:"type",typeMap:sle,errorContext:"symbol-layer"});let mo=class extends kr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i?.type,s=r||ue;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&X.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Iu(e,this._get("symbolLayers"))}readStyleOrigin(e,i,r){if(e.styleUrl&&e.name){const s=gh(e.styleUrl,r);return new zl({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new zl({portal:r?.portal||ce.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new pa("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,i,r,s){if(e.styleUrl&&e.name){let n=ug(e.styleUrl,s);gn(n)&&(n=Gn(n)),i.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&s?.portal&&!_ie(e.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new pa("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Bn||e&&sle[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};u([p({json:{read:!1,write:!1}})],mo.prototype,"color",null),u([p({type:YOe,nonNullable:!0,json:{write:!0}}),Mt(Ine)],mo.prototype,"symbolLayers",null),u([p({type:zl})],mo.prototype,"styleOrigin",void 0),u([Q("styleOrigin")],mo.prototype,"readStyleOrigin",null),u([oe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],mo.prototype,"writeStyleOrigin",null),u([p({type:ky,json:{read:!1}})],mo.prototype,"thumbnail",void 0),u([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],mo.prototype,"type",void 0),mo=u([M("esri.symbols.Symbol3D")],mo);let Xb=class extends Y{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([p({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Xb.prototype,"type",void 0),u([p({readOnly:!0})],Xb.prototype,"visible",void 0),Xb=u([M("esri.symbols.callouts.Callout3D")],Xb);var P5;let QT=P5=class extends Y{constructor(t){super(t),this.color=new ne("white")}clone(){return new P5({color:U(this.color)})}};u([p(Bf({colorRequiredOnWrite:!0}))],QT.prototype,"color",void 0),QT=P5=u([M("esri.symbols.callouts.LineCallout3DBorder")],QT);const KOe=QT;var A5;let Ed=A5=class extends Xb{constructor(t){super(t),this.type="line",this.color=new ne([0,0,0,1]),this.size=Zt(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new A5({color:U(this.color),size:this.size,border:U(this.border)})}};u([Ee({line:"line"})],Ed.prototype,"type",void 0),u([p(Bf({colorRequiredOnWrite:!0}))],Ed.prototype,"color",void 0),u([p({...Fu,json:{write:{isRequired:!0}}})],Ed.prototype,"size",void 0),u([p({type:KOe,json:{write:!0}})],Ed.prototype,"border",void 0),u([p({readOnly:!0})],Ed.prototype,"visible",null),Ed=A5=u([M("esri.symbols.callouts.LineCallout3D")],Ed);function i8(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function nle(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!i8(t)}function $mt(t){return t.type==="point-3d"||t.type==="label-3d"}function Imt(t){return t.horizontalAlignment==="center"}const ole={types:{key:"type",base:Xb,typeMap:{line:Ed}},json:{write:!0}};var L5;let Rp=L5=class extends Y{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new L5({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([p({...Fu,json:{write:{isRequired:!0}}})],Rp.prototype,"screenLength",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Rp.prototype,"minWorldLength",void 0),u([p({type:Number,json:{write:!0}})],Rp.prototype,"maxWorldLength",void 0),Rp=L5=u([M("esri.symbols.support.Symbol3DVerticalOffset")],Rp);var eE;const ale=ue.ofType({base:null,key:"type",typeMap:{text:Zr}});let Al=eE=class extends mo{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new ale,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return nle(this)}hasVisibleVerticalOffset(){return i8(this)}clone(){return new eE({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail),callout:U(this.callout),verticalOffset:U(this.verticalOffset)})}static fromTextSymbol(t){return new eE({symbolLayers:new ue([Zr.fromTextSymbol(t)])})}};u([p({type:Rp,json:{write:!0}})],Al.prototype,"verticalOffset",void 0),u([p(ole)],Al.prototype,"callout",void 0),u([p({json:{read:!1,write:!1}})],Al.prototype,"styleOrigin",void 0),u([p({type:ale})],Al.prototype,"symbolLayers",void 0),u([Ee({LabelSymbol3D:"label-3d"},{readOnly:!0})],Al.prototype,"type",void 0),Al=eE=u([M("esri.symbols.LabelSymbol3D")],Al);var tE;const lle=ue.ofType({base:null,key:"type",typeMap:{line:On,path:zs}}),XOe=ue.ofType({base:null,key:"type",typeMap:{line:On,path:zs}});let Yl=tE=class extends mo{constructor(t){super(t),this.symbolLayers=new lle,this.type="line-3d"}clone(){return new tE({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleLineSymbol(t){return new tE({symbolLayers:new ue([On.fromSimpleLineSymbol(t)])})}};u([p({type:lle,json:{type:XOe}})],Yl.prototype,"symbolLayers",void 0),u([Ee({LineSymbol3D:"line-3d"},{readOnly:!0})],Yl.prototype,"type",void 0),Yl=tE=u([M("esri.symbols.LineSymbol3D")],Yl);var iE;const cle=ue.ofType({base:null,key:"type",typeMap:{fill:Rn}});let Qd=iE=class extends mo{constructor(t){super(t),this.symbolLayers=new cle,this.type="mesh-3d"}clone(){return new iE({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleFillSymbol(t){return new iE({symbolLayers:new ue([Rn.fromSimpleFillSymbol(t)])})}};u([p({type:cle})],Qd.prototype,"symbolLayers",void 0),u([Ee({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Qd.prototype,"type",void 0),Qd=iE=u([M("esri.symbols.MeshSymbol3D")],Qd);let ax=class extends kr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([Ee({esriSLS:"simple-line"},{readOnly:!0})],ax.prototype,"type",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],ax.prototype,"width",void 0),ax=u([M("esri.symbols.LineSymbol")],ax);var O5;let bc=O5=class extends Y{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,r){e[i]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,r){r?.origin==="web-map"||(e[i]=t)}clone(){return new O5({color:U(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};u([p({type:["begin","end","begin-end"],json:{write:!0}})],bc.prototype,"placement",void 0),u([Ee({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],bc.prototype,"type",void 0),u([p({type:ele})],bc.prototype,"style",void 0),u([oe("style")],bc.prototype,"writeStyle",null),u([p({type:ne,value:null,json:{write:{allowNull:!0}}})],bc.prototype,"color",null),u([Q("color")],bc.prototype,"readColor",null),u([oe("color")],bc.prototype,"writeColor",null),bc=O5=u([M("esri.symbols.LineSymbolMarker")],bc);const QOe=bc;var R5;const _O=new We({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let sr=R5=class extends ax{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,r,s,n){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=Tt(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Tt(n)),o}clone(){return new R5({color:U(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};u([Ee({esriSLS:"simple-line"},{readOnly:!0})],sr.prototype,"type",void 0),u([p({type:_O.apiValues,json:{read:_O.read,write:_O.write}})],sr.prototype,"style",void 0),u([p({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],sr.prototype,"cap",void 0),u([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&i?.origin==null})}}})],sr.prototype,"join",void 0),u([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":QOe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],sr.prototype,"marker",void 0),u([p({type:Number,json:{read:!1,write:!1}})],sr.prototype,"miterLimit",void 0),sr=R5=u([M("esri.symbols.SimpleLineSymbol")],sr);let Qb=class extends kr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};u([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":sr}},json:{default:null,write:!0}})],Qb.prototype,"outline",void 0),u([p({type:["simple-fill","picture-fill"],readOnly:!0})],Qb.prototype,"type",void 0),Qb=u([M("esri.symbols.FillSymbol")],Qb);function eRe(t,e,i){return e.imageData?xie({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):ule(e.url,i)}function ule(t,e){if(!gn(t)){const i=iRe(e);if(i)return fa(i,"images",t)}return gh(t,e)}function tRe(t,e,i,r){if(Ah(t)){const s=cg(t);if(!s)return;e.contentType=s.mediaType,e.imageData=s.data,i&&i.imageData===e.imageData&&i.url&&dg(i.url,e,"url",r)}else dg(t,e,"url",r)}const dle={json:{read:{source:["imageData","url"],reader:eRe},write:{writer(t,e,i,r){tRe(t,e,this.source,r)}}}},hle={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=ule(e.url,i)),r}}}};function iRe(t){if(!t)return null;const{origin:e,layer:i}=t;if(e!=="service"&&e!=="portal-item")return null;const r=i?.type;return r==="feature"||r==="stream"?i.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var N5;let uo=N5=class extends Qb{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const s={};return t&&(s.url=t),e&&(s.outline=e),i!=null&&(s.width=Tt(i)),r!=null&&(s.height=Tt(r)),s}clone(){const t=new N5({color:U(this.color),height:this.height,outline:U(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",U(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([Ee({esriPFS:"picture-fill"},{readOnly:!0})],uo.prototype,"type",void 0),u([p(dle)],uo.prototype,"url",void 0),u([p({type:Number,json:{write:!0}})],uo.prototype,"xscale",void 0),u([p({type:Number,json:{write:!0}})],uo.prototype,"yscale",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],uo.prototype,"width",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],uo.prototype,"height",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],uo.prototype,"xoffset",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],uo.prototype,"yoffset",void 0),u([p(hle)],uo.prototype,"source",void 0),uo=N5=u([M("esri.symbols.PictureFillSymbol")],uo);let Md=class extends kr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Md.prototype,"angle",void 0),u([p({type:["simple-marker","picture-marker"],readOnly:!0})],Md.prototype,"type",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],Md.prototype,"xoffset",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],Md.prototype,"yoffset",void 0),u([p({cast:t=>t==="auto"?t:zn(Tt(t)),json:{write:!0}})],Md.prototype,"size",void 0),Md=u([M("esri.symbols.MarkerSymbol")],Md);var D5;let An=D5=class extends Md{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Tt(e)),i!=null&&(r.height=Tt(i)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new D5({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",U(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([p({json:{write:!1}})],An.prototype,"color",void 0),u([Ee({esriPMS:"picture-marker"},{readOnly:!0})],An.prototype,"type",void 0),u([p(dle)],An.prototype,"url",void 0),u([p(hle)],An.prototype,"source",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],An.prototype,"height",void 0),u([Q("height",["height","size"])],An.prototype,"readHeight",null),u([p({type:Number,cast:Tt,json:{write:!0}})],An.prototype,"width",void 0),u([p({json:{write:!1}})],An.prototype,"size",void 0),An=D5=u([M("esri.symbols.PictureMarkerSymbol")],An);var xm;const ple=ue.ofType({base:null,key:"type",typeMap:{icon:ws,object:bs,text:Zr}});let jn=xm=class extends mo{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new ple,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return nle(this)}hasVisibleVerticalOffset(){return i8(this)}clone(){return new xm({verticalOffset:U(this.verticalOffset),callout:U(this.callout),styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new xm({symbolLayers:new ue([ws.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new xm({symbolLayers:new ue([ws.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const i=t.data.symbol;return new xm(i?.callout?{symbolLayers:new ue([ws.fromCIMSymbol(t)]),callout:new Ed({size:.5,color:new ne([0,0,0])}),verticalOffset:new Rp({screenLength:40})}:{symbolLayers:new ue([ws.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new xm({symbolLayers:new ue([Zr.fromTextSymbol(t)])})}};u([p({type:Rp,json:{write:!0}})],jn.prototype,"verticalOffset",void 0),u([p(ole)],jn.prototype,"callout",void 0),u([p({type:ple,json:{origins:{"web-scene":{write:!0}}}})],jn.prototype,"symbolLayers",void 0),u([Ee({PointSymbol3D:"point-3d"},{readOnly:!0})],jn.prototype,"type",void 0),jn=xm=u([M("esri.symbols.PointSymbol3D")],jn);var lx;const fle=ue.ofType({base:null,key:"type",typeMap:{extrude:kd,fill:Rn,icon:ws,line:On,object:bs,text:Zr,water:Td}});let Ja=lx=class extends mo{constructor(t){super(t),this.symbolLayers=new fle,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&bf(X.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&bf(X.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(ks(()=>this.symbolLayers,"after-add",({item:e})=>t(e),lr))}clone(){return new lx({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromJSON(t){const e=new lx;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const i=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new lx({symbolLayers:new ue([Rn.fromSimpleFillSymbol(t)])})}};u([p({type:fle,json:{write:!0}})],Ja.prototype,"symbolLayers",void 0),u([Ee({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Ja.prototype,"type",void 0),Ja=lx=u([M("esri.symbols.PolygonSymbol3D")],Ja);var F5;const xO=new We({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Vn=F5=class extends Qb{constructor(...t){super(...t),this.color=new ne([0,0,0,.25]),this.outline=new sr,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),i&&(r.color=i),r}clone(){return new F5({color:U(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([p()],Vn.prototype,"color",void 0),u([p()],Vn.prototype,"outline",void 0),u([Ee({esriSFS:"simple-fill"},{readOnly:!0})],Vn.prototype,"type",void 0),u([p({type:xO.apiValues,json:{read:xO.read,write:xO.write}})],Vn.prototype,"style",void 0),Vn=F5=u([M("esri.symbols.SimpleFillSymbol")],Vn);var z5;const SO=new We({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ni=z5=class extends Md{constructor(...t){super(...t),this.color=new ne([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new sr}normalizeCtorArgs(t,e,i,r){if(t&&typeof t!="string")return t;const s={};return t&&(s.style=t),e!=null&&(s.size=Tt(e)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new z5({angle:this.angle,color:U(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};u([p()],Ni.prototype,"color",void 0),u([oe("color")],Ni.prototype,"writeColor",null),u([Ee({esriSMS:"simple-marker"},{readOnly:!0})],Ni.prototype,"type",void 0),u([p()],Ni.prototype,"size",void 0),u([p({type:SO.apiValues,json:{read:SO.read,write:SO.write}})],Ni.prototype,"style",void 0),u([p({type:String,json:{write:!0}})],Ni.prototype,"path",null),u([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":sr}},json:{default:null,write:!0}})],Ni.prototype,"outline",void 0),Ni=z5=u([M("esri.symbols.SimpleMarkerSymbol")],Ni);var j5;let ii=j5=class extends kr{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Qo,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),i&&(r.color=i),r}writeLineWidth(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}castLineWidth(t){return Tt(t)}writeLineHeight(t,e,i,r){r&&typeof r!="string"?r.origin:e[i]=t}clone(){return new j5({angle:this.angle,backgroundColor:U(this.backgroundColor),borderLineColor:U(this.borderLineColor),borderLineSize:this.borderLineSize,color:U(this.color),font:this.font&&this.font.clone(),haloColor:U(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([p({type:ne,json:{write:!0}})],ii.prototype,"backgroundColor",void 0),u([p({type:ne,json:{write:!0}})],ii.prototype,"borderLineColor",void 0),u([p({type:Number,json:{write:!0},cast:Tt})],ii.prototype,"borderLineSize",void 0),u([p({type:Qo,json:{write:!0}})],ii.prototype,"font",void 0),u([p({...ile,json:{write:!0}})],ii.prototype,"horizontalAlignment",void 0),u([p({type:Boolean,json:{write:!0}})],ii.prototype,"kerning",void 0),u([p({type:ne,json:{write:!0}})],ii.prototype,"haloColor",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],ii.prototype,"haloSize",void 0),u([p({type:Boolean,json:{write:!0}})],ii.prototype,"rightToLeft",void 0),u([p({type:Boolean,json:{write:!0}})],ii.prototype,"rotated",void 0),u([p({type:String,json:{write:!0}})],ii.prototype,"text",void 0),u([Ee({esriTS:"text"},{readOnly:!0})],ii.prototype,"type",void 0),u([p({...rle,json:{write:!0}})],ii.prototype,"verticalAlignment",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],ii.prototype,"xoffset",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],ii.prototype,"yoffset",void 0),u([p({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],ii.prototype,"angle",void 0),u([p({type:Number,json:{write:!0}})],ii.prototype,"width",void 0),u([p({type:Number})],ii.prototype,"lineWidth",void 0),u([oe("lineWidth")],ii.prototype,"writeLineWidth",null),u([Mt("lineWidth")],ii.prototype,"castLineWidth",null),u([p(tle)],ii.prototype,"lineHeight",void 0),u([oe("lineHeight")],ii.prototype,"writeLineHeight",null),ii=j5=u([M("esri.symbols.TextSymbol")],ii);var V5;let js=V5=class extends kr{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ce.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new V5({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Xte(X.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new R("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,i=e?this._fetchCacheKey:null;if(e!=null){const o=i&&e.get(i);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await K(()=>Promise.resolve().then(()=>tWe),void 0);Gt(t);const s=r(this,{portal:this.portal},t);s.catch(o=>{X.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return e?.set(i,n.clone()),n}};u([p({json:{write:!1}})],js.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],js.prototype,"styleName",void 0),u([p({type:ce,json:{write:!1}})],js.prototype,"portal",void 0),u([p({type:String,json:{read:zA,write:dg}})],js.prototype,"styleUrl",void 0),u([p({type:ky,json:{read:!1}})],js.prototype,"thumbnail",void 0),u([p({type:String,json:{write:!0}})],js.prototype,"name",void 0),u([Ee({styleSymbolReference:"web-style"},{readOnly:!0})],js.prototype,"type",void 0),u([p()],js.prototype,"_fetchCacheKey",null),js=V5=u([M("esri.symbols.WebStyleSymbol")],js);function S3(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Qa(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Jp={base:kr,key:"type",typeMap:{"simple-fill":Vn,"picture-fill":uo,"picture-marker":An,"simple-line":sr,"simple-marker":Ni,text:ii,"label-3d":Al,"line-3d":Yl,"mesh-3d":Qd,"point-3d":jn,"polygon-3d":Ja,"web-style":js,cim:cn},errorContext:"symbol"},Mmt={base:kr,key:"type",typeMap:{"picture-marker":An,"simple-marker":Ni,"point-3d":jn,cim:cn},errorContext:"symbol"},Cmt={base:kr,key:"type",typeMap:{"simple-line":sr,"line-3d":Yl,cim:cn},errorContext:"symbol"},Pmt={base:kr,key:"type",typeMap:{"simple-fill":Vn,"picture-fill":uo,"polygon-3d":Ja,cim:cn},errorContext:"symbol"},rRe={base:kr,key:"type",typeMap:{"picture-marker":An,"simple-marker":Ni,text:ii,"web-style":js,cim:cn},errorContext:"symbol"},sRe=w_({types:Jp}),mle={base:kr,key:"type",typeMap:{"simple-fill":Vn,"picture-fill":uo,"picture-marker":An,"simple-line":sr,"simple-marker":Ni,text:ii,"line-3d":Yl,"mesh-3d":Qd,"point-3d":jn,"polygon-3d":Ja,"web-style":js,cim:cn},errorContext:"symbol"},nRe={base:kr,key:"type",typeMap:{text:ii,"label-3d":Al},errorContext:"symbol"},EH={base:kr,key:"type",typeMap:{"line-3d":Yl,"mesh-3d":Qd,"point-3d":jn,"polygon-3d":Ja,"web-style":js,cim:cn},errorContext:"symbol"},oRe={base:kr,key:"type",typeMap:{"label-3d":Al},errorContext:"symbol"},yle=Ou(Jp);var U5;function aRe(t){if(!t)return null;const e={};for(const i in t){const r=Nu(t[i]);r&&(e[i]=r)}return Object.keys(e).length!==0?e:null}function lRe(t){if(t==null)return null;const e={};for(const i in t){const r=t[i];r&&(e[i]=r.toJSON())}return Object.keys(e).length!==0?e:null}var iw;let Wi=(iw=class extends Le(Y){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:pT(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&dxe(X.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",i,e))}set popupTemplate(e){const i=this._get("popupTemplate");i!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}get version(){return this._version}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}cloneShallow(){return new U5({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const i=hOe(this.origin);if(i)return i.popupTemplate??(e?i.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const s of[r,this.sourceLayer,this.layer])if(s&&typeof s=="object"){if("popupTemplate"in s&&s.popupTemplate)return s.popupTemplate;if(e&&"defaultPopupTemplate"in s&&s.defaultPopupTemplate!=null)return s.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",r,i,e)}else this.attributes={[e]:i}}getObjectId(){const e=SH(this.origin);if(e)return $H(this,e);const i=this.sourceLayer??this.layer;return i?$H(this,i):null}getGlobalId(){const e=SH(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const i=this.sourceLayer??this.layer;return i&&"globalIdField"in i&&i.globalIdField?this.getAttribute(i.globalIdField):null}toJSON(){return{aggregateGeometries:lRe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:c$(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:i}=this;if(i?.type==="mesh"){const r={origin:i.origin,transform:i.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,i,r,s){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:i,newValue:r};e==="origin-transform"&&(n.action=s),e==="attributes"&&(n.attributeName=s),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([Ts(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:i})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===i||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=i,this.notifyMeshTransformChanged())}),Ts(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,i)=>e===i,sync:!0})])}},U5=iw,iw);u([p({value:null,json:{read:aRe}})],Wi.prototype,"aggregateGeometries",null),u([p({value:null})],Wi.prototype,"attributes",null),u([p({value:null,types:k_,json:{read:Nu}})],Wi.prototype,"geometry",null),u([p({type:Boolean})],Wi.prototype,"isAggregate",void 0),u([p({clonable:!1})],Wi.prototype,"layer",void 0),u([p({clonable:"reference"})],Wi.prototype,"origin",void 0),u([p({type:Uf,value:null})],Wi.prototype,"popupTemplate",null),u([p({clonable:"reference"})],Wi.prototype,"sourceLayer",void 0),u([p({value:null,types:Jp})],Wi.prototype,"symbol",null),u([p({clonable:!1,json:{read:!1,write:!1}})],Wi.prototype,"_version",void 0),u([p({type:Boolean,value:!0})],Wi.prototype,"visible",null),Wi=U5=u([M("esri.Graphic")],Wi);let $S=class extends lS{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};u([n6({Type:Wi,ensureType:Mi(Wi)})],$S.prototype,"itemType",void 0),$S=u([M("esri.support.GraphicsCollection")],$S);let ld=class extends _e{constructor(e){super(e),this.view=null,this.baseLayerViews=new ue,this.groundLayerViews=new ue,this.referenceLayerViews=new ue,this._loadingHandle=de(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Fi)}destroy(){this._set("view",null),this._loadingHandle=_i(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.groundLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};u([p({constructOnly:!0})],ld.prototype,"view",void 0),u([p({readOnly:!0})],ld.prototype,"baseLayerViews",void 0),u([p({readOnly:!0})],ld.prototype,"groundLayerViews",void 0),u([p({readOnly:!0})],ld.prototype,"referenceLayerViews",void 0),u([p({readOnly:!0})],ld.prototype,"suspended",null),u([p({type:Boolean,readOnly:!0})],ld.prototype,"updating",null),ld=u([M("esri.views.BasemapView")],ld);const cRe=ld;let No=class extends _e{constructor(e){super(e),this.factor=1.5,this.offset=ls(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([p({type:Number})],No.prototype,"factor",void 0),u([p({nonNullable:!0})],No.prototype,"offset",void 0),u([p()],No.prototype,"position",void 0),u([p({type:Number,range:{min:0}})],No.prototype,"size",void 0),u([p()],No.prototype,"maskUrl",void 0),u([p()],No.prototype,"maskEnabled",void 0),u([p()],No.prototype,"overlayUrl",void 0),u([p()],No.prototype,"overlayEnabled",void 0),u([p({readOnly:!0})],No.prototype,"version",null),u([p({type:Boolean})],No.prototype,"visible",void 0),No=u([M("esri.views.Magnifier")],No);const gle=No;let I0=class{constructor(e){this._observable=new p_,this._map=new Map(e)}get size(){return Ue(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const i=this._map.delete(e);return i&&this._observable.notify(),i}entries(){return Ue(this._observable),this._map.entries()}forEach(e,i){Ue(this._observable),this._map.forEach((r,s)=>e.call(i,r,s,this),i)}get(e){return Ue(this._observable),this._map.get(e)}has(e){return Ue(this._observable),this._map.has(e)}keys(){return Ue(this._observable),this._map.keys()}set(e,i){return this._map.set(e,i),this._observable.notify(),this}values(){return Ue(this._observable),this._map.values()}[Symbol.iterator](){return Ue(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var B5;let uy=B5=class extends Y{constructor(t){super(t),this.name=null,this.code=null}clone(){return new B5({name:this.name,code:this.code})}};u([p({type:String,json:{write:{isRequired:!0}}})],uy.prototype,"name",void 0),u([p({type:[String,Number],json:{write:{isRequired:!0}}})],uy.prototype,"code",void 0),uy=B5=u([M("esri.layers.support.CodedValue")],uy);const uRe=new We({inherited:"inherited",codedValue:"coded-value",range:"range"});let Zp=class extends Y{constructor(e){super(e),this.name=null,this.type=null}};u([p({type:String,json:{write:!0}})],Zp.prototype,"name",void 0),u([Ee(uRe),p({json:{write:{isRequired:!0}}})],Zp.prototype,"type",void 0),Zp=u([M("esri.layers.support.Domain")],Zp);var q5,rw;let Yp=(rw=class extends Zp{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let i=null;if(this.codedValues){const r=String(e);this.codedValues.some(s=>(String(s.code)===r&&(i=s.name),!!i))}return i}clone(){return new q5({codedValues:U(this.codedValues),name:this.name})}},q5=rw,rw);u([p({type:[uy],json:{write:{isRequired:!0}}})],Yp.prototype,"codedValues",void 0),u([Ee({codedValue:"coded-value"})],Yp.prototype,"type",void 0),Yp=q5=u([M("esri.layers.support.CodedValueDomain")],Yp);var G5,sw;let IS=(sw=class extends Zp{constructor(e){super(e),this.type="inherited"}clone(){return new G5}},G5=sw,sw);u([Ee({inherited:"inherited"})],IS.prototype,"type",void 0),IS=G5=u([M("esri.layers.support.InheritedDomain")],IS);var H5,nw;let Zm=(nw=class extends Zp{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new H5({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},H5=nw,nw);u([p({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]},isRequired:!0}}})],Zm.prototype,"maxValue",void 0),u([p({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]},isRequired:!0}}})],Zm.prototype,"minValue",void 0),u([Ee({range:"range"})],Zm.prototype,"type",void 0),Zm=H5=u([M("esri.layers.support.RangeDomain")],Zm);const vle={key:"type",base:Zp,typeMap:{range:Zm,"coded-value":Yp,inherited:IS}};function $3(t){if(!t?.type)return null;switch(t.type){case"range":return Zm.fromJSON(t);case"codedValue":return Yp.fromJSON(t);case"inherited":return IS.fromJSON(t)}return null}const r8=new We({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var W5;const dRe=new We({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var ow;let ss=(ow=class extends Y{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?.value??null}readValueType(e,{description:i}){let r=null;try{r=i?JSON.parse(i):null}catch{}return r?dRe.fromJSON(r.fieldValueType):null}clone(){return new W5({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},W5=ow,ow);u([p({type:String,json:{write:!0}})],ss.prototype,"alias",void 0),u([p({type:[String,Number],json:{write:{allowNull:!0}}})],ss.prototype,"defaultValue",void 0),u([p()],ss.prototype,"description",void 0),u([Q("description")],ss.prototype,"readDescription",null),u([p({types:vle,json:{read:{reader:$3},write:!0}})],ss.prototype,"domain",void 0),u([p({type:Boolean,json:{write:!0}})],ss.prototype,"editable",void 0),u([p({type:Ke,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],ss.prototype,"length",void 0),u([p({type:String,json:{write:!0}})],ss.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0}})],ss.prototype,"nullable",void 0),u([Ee(r8)],ss.prototype,"type",void 0),u([p()],ss.prototype,"valueType",void 0),u([Q("valueType",["description"])],ss.prototype,"readValueType",null),u([p({type:Boolean,json:{read:!1}})],ss.prototype,"visible",void 0),ss=W5=u([M("esri.layers.support.Field")],ss);var J5;let Yd=J5=class extends Y{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new J5({mapLayerId:t,gdbVersion:e})}};u([Ee({mapLayer:"map-layer"}),p({json:{write:{isRequired:!0}}})],Yd.prototype,"type",void 0),u([p({type:Ke,json:{write:{isRequired:!0}}})],Yd.prototype,"mapLayerId",void 0),u([p({type:String,json:{write:!0}})],Yd.prototype,"gdbVersion",void 0),Yd=J5=u([M("esri.layers.support.source.MapLayerSource")],Yd);var Z5;let cd=Z5=class extends Y{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:t,query:e,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:s};return new Z5(n)}};u([Ee({queryTable:"query-table"}),p({json:{write:{isRequired:!0}}})],cd.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],cd.prototype,"workspaceId",void 0),u([p({type:String,json:{write:!0}})],cd.prototype,"query",void 0),u([p({type:String,json:{write:!0}})],cd.prototype,"oidFields",void 0),u([p({type:fe,json:{write:!0}})],cd.prototype,"spatialReference",void 0),u([Ee(tC)],cd.prototype,"geometryType",void 0),cd=Z5=u([M("esri.layers.support.source.QueryTableDataSource")],cd);var Y5;let Wv=Y5=class extends Y{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new Y5({workspaceId:t,dataSourceName:e})}};u([Ee({raster:"raster"}),p({json:{write:{isRequired:!0}}})],Wv.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Wv.prototype,"dataSourceName",void 0),u([p({type:String,json:{write:!0}})],Wv.prototype,"workspaceId",void 0),Wv=Y5=u([M("esri.layers.support.source.RasterDataSource")],Wv);var K5;let Sm=K5=class extends Y{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new K5({workspaceId:t,gdbVersion:e,dataSourceName:i})}};u([Ee({table:"table"}),p({json:{write:{isRequired:!0}}})],Sm.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Sm.prototype,"workspaceId",void 0),u([p({type:String,json:{write:!0}})],Sm.prototype,"gdbVersion",void 0),u([p({type:String,json:{write:!0}})],Sm.prototype,"dataSourceName",void 0),Sm=K5=u([M("esri.layers.support.source.TableDataSource")],Sm);var X5,Q5;const hRe=Qr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Do=X5=class extends Y{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return MH()(t,e,i)}castLeftTableSource(t){return Ou(ez(),t)}readRightTableSource(t,e,i){return MH()(t,e,i)}castRightTableSource(t){return Ou(ez(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:t,rightTableKey:e,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:s};return new X5(n)}};u([Ee({joinTable:"join-table"}),p({json:{write:{isRequired:!0}}})],Do.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Do.prototype,"leftTableKey",void 0),u([p({type:String,json:{write:!0}})],Do.prototype,"rightTableKey",void 0),u([p({json:{write:!0}})],Do.prototype,"leftTableSource",void 0),u([Q("leftTableSource")],Do.prototype,"readLeftTableSource",null),u([Mt("leftTableSource")],Do.prototype,"castLeftTableSource",null),u([p({json:{write:!0}})],Do.prototype,"rightTableSource",void 0),u([Q("rightTableSource")],Do.prototype,"readRightTableSource",null),u([Mt("rightTableSource")],Do.prototype,"castRightTableSource",null),u([Ee(hRe)],Do.prototype,"joinType",void 0),Do=X5=u([M("esri.layers.support.source.JoinTableDataSource")],Do);let $O=null;function MH(){return $O||($O=w_({types:ez()})),$O}let IO=null;function ez(){return IO||(IO={key:"type",base:null,typeMap:{"data-layer":Dn,"map-layer":Yd}}),IO}const pRe={key:"type",base:null,typeMap:{"join-table":Do,"query-table":cd,raster:Wv,table:Sm}};var aw;let Dn=(aw=class extends Y{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:i}=this;return new Q5({fields:e,dataSource:i})}},Q5=aw,aw);u([Ee({dataLayer:"data-layer"}),p({json:{write:{isRequired:!0}}})],Dn.prototype,"type",void 0),u([p({type:[ss],json:{write:!0}})],Dn.prototype,"fields",void 0),u([p({types:pRe,json:{write:!0}})],Dn.prototype,"dataSource",void 0),Dn=Q5=u([M("esri.layers.support.source.DataLayerSource")],Dn),Dn.from=Mi(Dn);let $m=class extends Le(Y){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([p({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],$m.prototype,"onFields",void 0),u([p({type:String,json:{write:!0}})],$m.prototype,"operator",void 0),u([p({type:String,json:{write:!0}})],$m.prototype,"searchTerm",void 0),u([p({type:String,json:{write:!0}})],$m.prototype,"searchType",void 0),$m=u([M("esri.rest.support.FullTextSearch")],$m);const fRe=$m;var tz;const CH=new We({upperLeft:"upper-left",lowerLeft:"lower-left"});let Ip=tz=class extends Y{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new tz(U({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([p({type:Pe,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ip.prototype,"extent",void 0),u([p({type:["view","edit"],json:{write:!0}})],Ip.prototype,"mode",void 0),u([p({type:String,json:{read:CH.read,write:CH.write}})],Ip.prototype,"originPosition",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Ip.prototype,"tolerance",void 0),Ip=tz=u([M("esri.rest.support.QuantizationParameters")],Ip);const mRe=t=>{const e=t;let i=class extends e{};return i=u([M("esri.rest.support.QueryMixin")],i),i},yRe=new We({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var iz;const PH=new We({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let bl=iz=class extends Y{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=U(t))}clone(){return new iz({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:U(this.statisticParameters)})}};u([p({type:Number,json:{write:!0}})],bl.prototype,"maxPointCount",void 0),u([p({type:Number,json:{write:!0}})],bl.prototype,"maxRecordCount",void 0),u([p({type:Number,json:{write:!0}})],bl.prototype,"maxVertexCount",void 0),u([p({type:String,json:{write:!0}})],bl.prototype,"onStatisticField",void 0),u([p({type:String,json:{write:!0}})],bl.prototype,"outStatisticFieldName",void 0),u([p({type:String,json:{read:{source:"statisticType",reader:PH.read},write:{target:"statisticType",writer:PH.write}}})],bl.prototype,"statisticType",void 0),u([p({type:Object})],bl.prototype,"statisticParameters",void 0),u([oe("statisticParameters")],bl.prototype,"writeStatisticParameters",null),bl=iz=u([M("esri.rest.support.StatisticDefinition")],bl);var rE;const gRe=new We({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var Ly;let Te=(Ly=class extends mRe(Y){static from(e){return ag(rE,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeParameterValues(e,i){if(e){const r={};for(const s in e){const n=e[s];Array.isArray(n)?r[s]=n.map(o=>o instanceof Date?o.getTime():o):n instanceof Date?r[s]=n.getTime():r[s]=n}i.parameterValues=r}}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,i.where="1=1"}writeWhere(e,i){i.where=e||"1=1"}clone(){return new rE(U({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},rE=Ly,Ly.MAX_MAX_RECORD_COUNT_FACTOR=5,Ly);u([p({json:{write:!0}})],Te.prototype,"aggregateIds",void 0),u([p({type:Boolean,json:{write:!0}})],Te.prototype,"cacheHint",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"compactGeometryEnabled",void 0),u([p({json:{write:!0}})],Te.prototype,"datumTransformation",void 0),u([Mt("datumTransformation")],Te.prototype,"castDatumTransformation",null),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"defaultSpatialReferenceEnabled",void 0),u([p({type:Number,json:{write:!0}})],Te.prototype,"distance",void 0),u([p({type:Dn,json:{write:!0}})],Te.prototype,"dynamicDataSource",void 0),u([p({type:String,json:{write:!0}})],Te.prototype,"formatOf3DObjects",void 0),u([p({type:[fRe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Te.prototype,"fullText",void 0),u([p({type:String,json:{write:!0}})],Te.prototype,"gdbVersion",void 0),u([p({types:k_,json:{read:Nu,write:!0}})],Te.prototype,"geometry",void 0),u([p({type:Number,json:{write:!0}})],Te.prototype,"geometryPrecision",void 0),u([p({type:[String],json:{write:!0}})],Te.prototype,"groupByFieldsForStatistics",void 0),u([p({type:String,json:{write:!0}})],Te.prototype,"having",void 0),u([p({type:Date})],Te.prototype,"historicMoment",void 0),u([oe("historicMoment")],Te.prototype,"writeHistoricMoment",null),u([p({type:Number,json:{write:!0}})],Te.prototype,"maxAllowableOffset",void 0),u([p({type:Number,cast:t=>t<1?1:t>Te.MAX_MAX_RECORD_COUNT_FACTOR?Te.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Te.prototype,"maxRecordCountFactor",void 0),u([p({type:["xyFootprint"],json:{write:!0}})],Te.prototype,"multipatchOption",void 0),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Te.prototype,"num",void 0),u([p({json:{write:!0}})],Te.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Te.prototype,"orderByFields",void 0),u([p({type:[String],json:{write:!0}})],Te.prototype,"outFields",void 0),u([p({type:fe,json:{name:"outSR",write:!0}})],Te.prototype,"outSpatialReference",void 0),u([p({type:[bl],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Te.prototype,"outStatistics",void 0),u([p({json:{write:!0}})],Te.prototype,"parameterValues",void 0),u([oe("parameterValues")],Te.prototype,"writeParameterValues",null),u([p({type:Fe,json:{write:!0}})],Te.prototype,"pixelSize",void 0),u([p({type:Ip,json:{write:!0}})],Te.prototype,"quantizationParameters",void 0),u([p({type:[Object],json:{write:!0}})],Te.prototype,"rangeValues",void 0),u([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Te.prototype,"relationParameter",void 0),u([p({type:String,json:{write:!0}})],Te.prototype,"resultType",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnCentroid",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnDistinctValues",void 0),u([p({type:Boolean,json:{default:!0,write:!0}})],Te.prototype,"returnExceededLimitFeatures",void 0),u([p({type:Boolean,json:{write:!0}})],Te.prototype,"returnGeometry",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnQueryGeometry",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"returnM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Te.prototype,"returnZ",void 0),u([p({type:Boolean,json:{write:!0}})],Te.prototype,"returnTrueCurves",void 0),u([p({type:fe,json:{write:!0}})],Te.prototype,"sourceSpatialReference",void 0),u([Ee(yRe,{ignoreUnknown:!1,name:"spatialRel"})],Te.prototype,"spatialRelationship",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Te.prototype,"start",void 0),u([oe("start"),oe("num")],Te.prototype,"writeStart",null),u([p({type:String,json:{write:!0}})],Te.prototype,"sqlFormat",void 0),u([p({type:String,json:{write:!0}})],Te.prototype,"text",void 0),u([p({type:pt,json:{write:!0}})],Te.prototype,"timeExtent",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Te.prototype,"timeReferenceUnknownClient",void 0),u([Ee(gRe,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],Te.prototype,"units",void 0),u([p({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Te.prototype,"where",void 0),u([oe("where")],Te.prototype,"writeWhere",null),Te=rE=u([M("esri.rest.support.Query")],Te);function Zh(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Ca=class extends Pg{constructor(e){super(e),this._selectionMap=new I0,this._sources=new ue,this._trashCan=[],this._layerEditHandles=new ue,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([de(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),de(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},Fi),ks(()=>this.sources,"change",e=>{const i=this._selectionMap,r=[];for(const s of e.removed){const n=i.get(s);n&&(i.delete(s),n.highlightHandle?.remove(),r.push({layer:s,selection:[],added:[],removed:[...n.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(_i)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[i,r]=e;return{layer:i,selection:[...r.selection]}})}get count(){let e=0;for(const i of this._selectionMap.values())e+=i.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Iu(e,this._sources)}syncSources(){const e=new Set,i=this.view?.map;if(!i)return;const r=s=>{HPe(s)?(s.layers?.forEach(r),s.tables?.forEach(r)):GPe(s)?(s.sublayers?.forEach(r),s.subtables?.forEach(r)):iH(s)?s.sublayers?.forEach(r):Zh(s)&&e.add(s)};i.allLayers.forEach(r),i.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,i={},r="layerView"){const{view:s,selections:n}=this;if(!s&&r==="layerView")return X.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?n.filter(a=>e.includes(a.layer)):n).map(async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const d=Op(l)?l.parent:l;if(d!=null){if(s&&r==="layerView"&&!AH(d)&&LH(d)){const h=await s.whenLayerView(d).catch(()=>null);if(h)return OH(h,c,i)}return OH(d,c,i)}}).filter(Ei);return(await Promise.all(o)).filter(Ei)}updateSelection(e){const i=new Map;for(const[n,o]of this._selectionMap)i.set(n,[...o.selection]);let r=!1;const s=e.current.concat(e.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Zh(o)||Op(o))&&a!==null){const l=Ch(i,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const n of e.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Zh(o)||Op(o))&&a!==null){const l=i.get(o),c=l?.indexOf(a);c!==void 0&&c>=0&&(l?.splice(c,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,c]of i){const d=n.get(l);d!==void 0&&o.push(d),n.set(l,{selection:c}),a.push({layer:l,selection:c,...kB(d!==void 0?d.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,i){this._setSelection(e,i)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,i){const r=this._selectionMap.get(e),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(e,s)}removeFromSelection(e,i){const r=this._selectionMap.get(e);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(e,s)}toggleInSelection(e,i){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,i);const s=new Set(r.selection),n=new Set(i),o=o1e(s,n);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const o of e){const a=r.get(o),l=Op(o)?o.parent:o;if(l!=null&&LH(l)){if(AH(l))continue;i.whenLayerView(l).then(c=>{a?.highlightHandle?.remove(),a!=null&&s&&n===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=c.highlight(a.selection,this.highlightName))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(_i);const e=new Set(this.sources.map(i=>Op(i)?i.parent:i));for(const i of e)Zh(i)&&"on"in i&&i.on&&this._layerEditHandles.push(i.on("edits",r=>this._onLayerEdit(r,i)))}_onLayerEdit(e,i){if(iH(i))this._onParentLayerEdit(e,i);else if(e.deletedFeatures.length&&this._selectionMap.has(i)){const r=[];e.deletedFeatures.forEach(({error:s,objectId:n})=>{n!=null&&s==null&&r.push(n)}),this.removeFromSelection(i,r)}}_onParentLayerEdit(e,i){const{deletedFeatures:r,edits:s,updatedFeatures:n}=e;if(s?.updateFeatures?.forEach(o=>{const a=o.getObjectId()??o.attributes[i.objectIdField];if(a==null||n.find(d=>d.objectId===a)?.error)return;const l=i.findSublayerForFeature(o);if(!Zh(l))return;const c=i.sublayers.find(d=>!(!Zh(d)||!this.getSelection(d)?.includes(a)));Zh(c)&&c!==l&&(this.removeFromSelection(c,[a]),this.appendToSelection(l,[a]))}),r.length){const o=[];r.forEach(({error:a,objectId:l})=>{l!=null&&a==null&&o.push(l)}),i.sublayers.forEach(a=>{Zh(a)&&this._selectionMap.has(a)&&this.removeFromSelection(a,o)})}}_setSelection(e,i){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!bRe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...i]});const s={layer:e,selection:[...i],...kB(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};u([p()],Ca.prototype,"_selectionMap",void 0),u([p()],Ca.prototype,"_sources",void 0),u([p({readOnly:!0,nonNullable:!0})],Ca.prototype,"selections",null),u([p({readOnly:!0,nonNullable:!0})],Ca.prototype,"count",null),u([p()],Ca.prototype,"view",void 0),u([p({readOnly:!0,nonNullable:!0})],Ca.prototype,"hasSelection",null),u([p()],Ca.prototype,"showHighlight",void 0),u([p()],Ca.prototype,"sources",null),u([p()],Ca.prototype,"highlightName",void 0),Ca=u([M("esri.views.SelectionManager")],Ca);const AH=t=>Op(t)?t.parent?.isTable===!0:t.isTable,vRe=t=>t.layer!==void 0,LH=t=>t?.when!==void 0,bRe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const i=[...t.selection],r=[...e.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},OH=async(t,e,i={})=>{let r;if(vRe(t)){const s=t;r=s===void 0?null:await s.queryFeatures(new Te({...i,objectIds:e})).then(n=>({data:n,layer:t.layer}))}else{const s=t;r=s===void 0?null:await s.queryFeatures(new Te({...i,objectIds:e})).then(n=>({data:n,layer:s}))}return r},wRe=Ca;let cx=class extends Le(_e){constructor(e){super(e),this.accentColor=new ne([255,127,0]),this.textColor=new ne([255,255,255])}};u([p({type:ne,nonNullable:!0})],cx.prototype,"accentColor",void 0),u([p({type:ne,nonNullable:!0})],cx.prototype,"textColor",void 0),cx=u([M("esri.views.Theme")],cx);const rz=cx,ble=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],wle={};function _le(t){return!!wle[t]}function _Re(t){for(const e of t)if(!_le(e))return!1;return!0}ble.forEach(t=>{wle[t]=!0});let xle=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager?.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,r,s){const n=Array.isArray(e)?e:e.split(",");if(!_Re(n))return n.some(_le)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s??uh.DEFAULT;const l=this._createUniqueGroupName(),c=new xRe(this.view,n,a,o);this._handlers.set(l,{handler:c,priority:s});for(const d of n){const h=this._handlerCounts.get(d)||0;this._handlerCounts.set(d,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],s),Et(()=>this._removeHandler(l,n))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},xRe=class extends hs{constructor(e,i,r,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(IRe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s(kRe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(TRe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(ERe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>s(MRe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(CRe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(PRe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(m1(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(m1(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(m1(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(ARe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(LRe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(m1(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(m1(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(ORe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(SRe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s($Re(o))})}}_wrapDrag(e){const i=e.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,c=i.buttons,{cancelable:d,timestamp:h}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:f,pointerType:o,button:a,buttons:c,radius:i.radius,angle:tie(i.angle),native:l,timestamp:h,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:m=>e.defer(m),preventDefault:()=>e.preventDefault()}}};function SRe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function $Re(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function IRe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:d}=e;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:d,screenPoint:ls(n,o),mapPoint:O2(t,n,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function kRe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:d}=e;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:d,mapPoint:O2(t,n,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function TRe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:d,timestamp:h}=e;return{type:"immediate-click",pointerId:c,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:O2(t,n,o),eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function ERe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:d,timestamp:h}=e;return{type:"immediate-double-click",pointerId:c,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:O2(t,n,o),eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function MRe(t,e){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:c,mapPoint:O2(t,n,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:d=>e.defer(d),preventDefault:()=>e.preventDefault()}}function O2(t,e,i){return t.toMap(ls(e,i),{exclude:[]})}function CRe(t){const{key:e,repeat:i,native:r}=t.data,{cancelable:s,timestamp:n}=t;return{type:"key-down",key:e,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function PRe(t){const{key:e,native:i}=t.data,{cancelable:r,timestamp:s}=t;return{type:"key-up",key:e,native:i,timestamp:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:n=>t.defer(n),preventDefault:()=>t.preventDefault()}}function m1(t,e){const{x:i,y:r,button:s,buttons:n,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:d,timestamp:h}=t;return{type:e,x:i,y:r,pointerId:l,pointerType:c,button:s,buttons:n,native:o,timestamp:h,eventId:a,cancelable:d,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function ARe(t){const{x:e,y:i,buttons:r,native:s,eventId:n}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,d={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:h,timestamp:f}=t;return{type:"pointer-drag",x:e,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:d,native:s,timestamp:f,eventId:n,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:m=>t.defer(m),preventDefault:()=>t.preventDefault()}}function LRe(t){const{cancelable:e,data:i,timestamp:r}=t,{x:s,y:n,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function ORe(t){const{action:e,state:i,device:r}=t.data,{cancelable:s,timestamp:n}=t,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:n,action:e,buttons:o,axes:a,cancelable:s,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const RRe="z",NRe="r",Sle={cancel:"Escape",complete:"Enter"},Umt={...Sle,redo:NRe,undo:RRe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},Bmt={toggle:"Control"},qmt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},Gmt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:yoe,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let Hmt=class{constructor(){this._bindings=new Map}add(e,i){return this.addToggle(e,r=>{r.type==="key-down"&&i(r)})}addToggle(e,i){const r=DRe.fromDefinition(e,i),s=Ch(this._bindings,r.key,()=>[]);return s.push(r),Et(()=>iU(s,r))}register(e,i=uh.WIDGET){return Tg([e.on("key-down",r=>this.dispatch(e.inputManager,r),i),e.on("key-up",r=>this.dispatch(e.inputManager,r),i)])}dispatch(e,i){const r=i.key,s=this._bindings.get(r);if(s)for(const n of s)n.process(e,i)}},DRe=class sz{constructor(e,i,r,s,n){this.key=e,this.modifiers=i,this.repeats=r,this.continuePropagation=s,this.callback=n}process(e,i){if(!(i.key!==this.key||"repeat"in i&&i.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||i.stopPropagation(),this.callback(i)}}static fromDefinition(e,i){if(typeof e=="string")return new sz(e,[],!1,!1,i);const{key:r,modifier:s,repeats:n,continuePropagation:o}=e;return new sz(r,s?Array.isArray(s)?s:[s]:[],!!n,!!o,i)}};function FRe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return X.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function nz(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function zRe(t){return t.type==="key-down"&&t.key===Sle.cancel}function wc(t){return ls(t.x,t.y)}function $le(t,e){const i=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return i?ls(e.clientX-i.left,e.clientY-i.top):ls(0,0)}function Ile(t,e){return e instanceof Event?$le(t,e):wc(e)}function kle(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let sE=class extends _e{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new I0,this._grabbedManipulators=new I0,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,i){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":RH(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!NH(e))break;const s=wc(e),n=ov(s,e.pointerType,i.tools);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!NH(e))break;const s=this._grabbedManipulators.get(e.pointerId),n=s?.manipulator,o=s?.tool;if(n==null||o==null)break;const a=wc(e);a.x=bn(a.x,0,i.view.width),a.y=bn(a.y,0,i.view.height);const l=s.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,c?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,c&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}r();break}case"immediate-click":{const s=wc(e),n=ov(s,e.pointerType,i.tools);if(!jRe(e)){for(const c of i.tools)if((n==null||n.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let d=!1;c.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,d=!0)}),d&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),kO(o,r);break}case"click":{const s=wc(e),n=ov(s,e.pointerType,i.tools),o=n?.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const s=wc(e),n=ov(s,e.pointerType,i.tools),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),kO(o,r);break}case"immediate-double-click":{const s=wc(e),n=ov(s,e.pointerType,i.tools),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&kO(o,r);break}}this._onFocusChange(i.tools)}_releaseManipulatorBeforeDragging(e,i,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:wc(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,i){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:wc(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>i.add(s)),this._hoveredManipulators.forEach(({tool:s})=>r.add(s));for(const s of e){s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=hxe(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:i,setActiveTool:r},s=!0,n){const o=(a,l)=>a===e&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},d)=>{o(a,l)&&(this._grabbedManipulators.delete(d),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(ls(i.x,i.y),r,i.pointerType,e)})}handleHoverEvent(e,i){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!RH(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(wc(e),e.pointerId,e.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(e,i,r,s){let n=ov(e,r,s);const o=this._hoveredManipulators.get(i)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:i},r)=>{e===r&&(this._hoveredManipulators.delete(e),i.hovering=!1)})}_cursorFromMap(e,i){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return i}};function ov(t,e,i){for(const r of i){if(r.manipulators==null||!nz(r))continue;const s=r.manipulators.intersect(t,e);if(s!=null)return{tool:r,manipulator:s}}return null}function RH(t){return t==="mouse"}function NH(t){return t.pointerType!=="mouse"||t.button===0}function jRe(t){return!!t.native.shiftKey}function kO(t,e){t?.consumesClicks&&e()}u([p()],sE.prototype,"cursor",null),sE=u([M("esri.views.interactive.ToolViewManagerManipulatorState")],sE);const DH="attached",TO="tools",VRe=1e3;let _c=class extends _e{constructor(e){super(e),this._updatingHandles=new Iy,this._clock=f_,this._manipulatorState=new sE,this.tools=new ue,this._interacting=!1,this._interactingTimeout=VRe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(ble,e=>{this._handleInputEvent(e)},uh.TOOL),...FRe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void X.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),i?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const s=nz(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const i of this.tools)if(i.visible&&i.cursor!=null)return i.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=_i(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([de(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(i=>i.onElevationChange(e)))],DH):this.addHandles(de(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(DH),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const i of this.tools)i.manipulators&&i.manipulators.forEach(({manipulator:r})=>e(r,i))}_handleInputEvent(e){let i=!1;const r={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const s of this.tools)!i&&s.visible&&s.handleInputEvent(r);!i&&zRe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(TO);for(const e of this.tools){if(e instanceof _e){const i=de(()=>[e.cursor,e.visible,e.editable],()=>{nz(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(i,TO)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],TO)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(i=>(e==null||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};u([p({constructOnly:!0,nonNullable:!0})],_c.prototype,"view",void 0),u([p({value:null})],_c.prototype,"activeTool",null),u([p({readOnly:!0,type:ue})],_c.prototype,"tools",void 0),u([p()],_c.prototype,"cursor",null),u([p({readOnly:!0})],_c.prototype,"updating",null),u([p()],_c.prototype,"_interacting",void 0),u([p({readOnly:!0})],_c.prototype,"interacting",null),_c=u([M("esri.views.ToolViewManager")],_c);const URe=new ne("cyan"),BRe=1,qRe=.25,GRe=new ne("black"),HRe=.4,WRe=.2,Ymt=.25,Tle="default",JRe="temporary",ZRe=new ne("yellow");var oz;let Fo=oz=class extends _e{constructor(t){super(t),this.name=Tle,this.color=URe.clone(),this.haloColor=null,this.haloOpacity=BRe,this.fillOpacity=qRe,this.shadowColor=GRe.clone(),this.shadowOpacity=HRe,this.shadowDifference=WRe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new oz({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};u([p({type:String,constructOnly:!0,nonNullable:!0})],Fo.prototype,"name",void 0),u([p({type:ne,nonNullable:!0})],Fo.prototype,"color",void 0),u([p({type:ne})],Fo.prototype,"haloColor",void 0),u([p({nonNullable:!0})],Fo.prototype,"haloOpacity",void 0),u([p({nonNullable:!0})],Fo.prototype,"fillOpacity",void 0),u([p({type:ne,nonNullable:!0})],Fo.prototype,"shadowColor",void 0),u([p({nonNullable:!0})],Fo.prototype,"shadowOpacity",void 0),u([p({nonNullable:!0})],Fo.prototype,"shadowDifference",void 0),u([p({nonNullable:!0})],Fo.prototype,"haloWidth",void 0),u([p({nonNullable:!0})],Fo.prototype,"haloBlur",void 0),Fo=oz=u([M("esri.views.support.HighlightOptions")],Fo);const cf=Fo;function YRe(){return new(ue.ofType(cf))([new cf({name:Tle}),new cf({name:JRe,color:ZRe})])}let Jv=class extends _e{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":KRe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return XRe[this.deviceType]}};u([p({nonNullable:!0,readOnly:!0})],Jv.prototype,"nativeIndex",void 0),u([p({type:String,readOnly:!0})],Jv.prototype,"deviceType",null),u([p({type:Number,readOnly:!0})],Jv.prototype,"axisThreshold",null),Jv=u([M("esri.views.input.gamepad.GamepadInputDevice")],Jv);const s8=Jv,KRe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),XRe={standard:.15,spacemouse:.025,unknown:0};let ux=class extends _e{constructor(e){super(e),this.devices=new ue,this.enabledFocusMode="document"}};u([p({type:ue.ofType(s8),readOnly:!0})],ux.prototype,"devices",void 0),u([p({type:["document","view","none"]})],ux.prototype,"enabledFocusMode",void 0),ux=u([M("esri.views.input.gamepad.GamepadSettings")],ux);const QRe=ux;let nE=class extends _e{constructor(){super(...arguments),this.gamepad=new QRe}};u([p({readOnly:!0})],nE.prototype,"gamepad",void 0),nE=u([M("esri.views.input.Input")],nE);const eNe=nE,EO=()=>p({type:["pan","rotate","zoom","none"],nonNullable:!0});let Im=class extends _e{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([EO()],Im.prototype,"dragPrimary",void 0),u([EO()],Im.prototype,"dragSecondary",void 0),u([EO()],Im.prototype,"dragTertiary",void 0),u([p({type:["zoom","none"],nonNullable:!0})],Im.prototype,"mouseWheel",void 0),Im=u([M("esri.views.navigation.NavigationActionMap")],Im);const n8=Im;let up=class extends _e{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([p({type:Boolean,nonNullable:!0})],up.prototype,"enabled",void 0),u([p({type:s8})],up.prototype,"device",void 0),u([p({type:["pan","zoom"],nonNullable:!0})],up.prototype,"mode",void 0),u([p({type:["forward-down","forward-up"],nonNullable:!0})],up.prototype,"tiltDirection",void 0),u([p({type:Number,nonNullable:!0})],up.prototype,"velocityFactor",void 0),up=u([M("esri.views.navigation.gamepad.GamepadSettings")],up);const Ele=up;let dp=class extends _e{constructor(e){super(e),this.actionMap=new n8,this.browserTouchPanEnabled=!0,this.gamepad=new Ele,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){gD(X.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};u([p({type:n8,nonNullable:!0})],dp.prototype,"actionMap",void 0),u([p({type:Boolean})],dp.prototype,"browserTouchPanEnabled",void 0),u([p({type:Ele,nonNullable:!0})],dp.prototype,"gamepad",void 0),u([p({type:Boolean})],dp.prototype,"momentumEnabled",void 0),u([p({type:Boolean})],dp.prototype,"mouseWheelZoomEnabled",null),dp=u([M("esri.views.navigation.Navigation")],dp);const I3=dp;function ryt(t,e,i){const r=Mle(t),s=e,n=tNe(r,s,i);if(r){const o=Pn.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!i&&o!==r.heightUnit){const a=new R("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new R("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!iNe(t)||n===4)return new R("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(n){case 1:{const o=r?.heightUnit||"unknown",a=s?.heightUnit||"unknown",l=new R("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new R("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}case 2:{const o=r?.heightModel||"unknown",a=s?.heightModel||"unknown",l=new R("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new R("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}case 3:{const o=r?.vertCRS||"unknown",a=s?.vertCRS||"unknown",l=new R("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new R("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:l})}}return null}function tNe(t,e,i){if(!FH(t)||!FH(e))return 4;if(t==null||e==null)return 0;if(!i&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function FH(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function iNe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Ale(t)}function Mle(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?ya(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&Cle(t)&&t.heightModelInfo?t.heightModelInfo:Ale(t)?Pn.deriveUnitFromSR(sNe,t.spatialReference):null}function Cle(t){return"heightModelInfo"in t}function Ple(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Ale(t){return Ple(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Lle(t)}function rNe(t){return t.layers!=null||Lle(t)||Ple(t)||Cle(t)}function Lle(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const sNe=new Pn({heightModel:"gravity-related-height"});let az,MO=null;async function nNe(t){MO||(MO=K(()=>import("./geometryServiceUtils-0wbHXPEV.js"),[]).then(e=>az=e)),await MO,Gt(t)}async function Ole(t,e,i,r){if(!t)return null;const s=t.spatialReference;return Lh()||tc(s,e)?Ff(t,e):az?az.projectGeometry(t,e,i,r):(await Promise.race([nNe(r),$f(r)]),Ole(t,e,i,r))}async function syt(t,e){try{return t?.spatialReference?await Fne(t,e):null}catch{return null}}let ui=class extends _e{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=sg(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(e,s);n!=null&&(e=n)}return e?.length===1})&&e?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(e);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],n=>!(!("tileInfo"in n)||!n.tileInfo?.spatialReference.equals(i))&&(r=n,!0),n=>"tileInfo"in n);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const i=this._collectLayers(this.mapCollections,r=>{const s=Mle(r);return!!s&&(e={heightModelInfo:s,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>rNe(r));return{...e,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],i=this._collectLayers(this.mapCollections,r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of s)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=sg(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:A_(async n=>{try{const o=await Ole(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Xr(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(e==null)return i;const r=new Array;for(const s of e)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const o=aNe(s.viewingMode,n.viewingMode);if(o!==!1){r.push({spatialReference:s.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return e==null||e.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(i))&&(e=e.filter(({spatialReference:r})=>r.equals(i))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,e);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:r})=>i.equals(r.spatialReference))||e[0]}_collectLayers(e,i,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const s=new oNe(r,i);for(const n of e)if(this._collectCollection(n,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(i=>{Yi(i)}),"loading"):e.loadStatus:"loaded"}};u([p()],ui.prototype,"required",void 0),u([p({constructOnly:!0})],ui.prototype,"map",void 0),u([p({constructOnly:!0})],ui.prototype,"getSpatialReferenceSupport",void 0),u([p()],ui.prototype,"defaultSpatialReference",void 0),u([p()],ui.prototype,"userSpatialReference",void 0),u([p()],ui.prototype,"sourcePreloadCount",void 0),u([p()],ui.prototype,"priorityCollection",void 0),u([p()],ui.prototype,"requiresExtentInSpatialReference",void 0),u([p()],ui.prototype,"suspended",void 0),u([p({readOnly:!0})],ui.prototype,"ready",null),u([p({readOnly:!0})],ui.prototype,"heightModelInfoReady",null),u([p({readOnly:!0})],ui.prototype,"spatialReference",null),u([p({readOnly:!0})],ui.prototype,"extent",null),u([p({readOnly:!0})],ui.prototype,"heightModelInfo",null),u([p({readOnly:!0})],ui.prototype,"vcsWkid",null),u([p({readOnly:!0})],ui.prototype,"latestVcsWkid",null),u([p({readOnly:!0})],ui.prototype,"viewingMode",null),u([p({readOnly:!0})],ui.prototype,"tileInfo",null),u([p({readOnly:!0})],ui.prototype,"mapCollections",null),u([p({readOnly:!0})],ui.prototype,"_spatialReferenceTask",null),u([p({readOnly:!0})],ui.prototype,"_tileInfoTask",null),u([p({readOnly:!0})],ui.prototype,"_heightModelInfoTask",null),u([p({readOnly:!0})],ui.prototype,"_extentCandidatesTask",null),u([p()],ui.prototype,"_extentTask",null),u([p()],ui.prototype,"_projectExtentTask",void 0),ui=u([M("esri.views.support.DefaultsFromMap")],ui);let oNe=class{constructor(e,i){this.layerFilter=e,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function aNe(t,e){return t!=null?e!=null?t===e&&t:t:e}function lNe(t){return"tryRecycleWith"in t}let cNe=class{constructor(e,i,r){this.layer=e,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Is(),this.promise=this._deferred.promise,as(this._controller.signal,()=>{this._recycleController?.abort();const s=new R("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!lNe(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const i=this.layer.type,r=this._recycleController.signal;for(let s=0;s<e.length;s++){const n=e[s];if(n.type!==i)continue;const o=this.layerView.tryRecycleWith(n,{signal:r});if(o){e.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=o.then(()=>(Gt(r),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:i,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:i},layer:r}=this;this._map=e.map;try{let s,n;if(await r.load({signal:i}),r.prefetchResources&&await r.prefetchResources({signal:i}),uNe(r))s=await r.createLayerView(e,{signal:i});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new R("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);Gt(i),s="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const o=()=>{n=_i(n),s.destroyed||s.destroy(),this.done=!0};n=as(i,o),Gt(i);try{await s.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred?.reject(new R("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=s,r.emit("layerview-create",{view:e,layerView:s}),e.emit("layerview-create",{layer:r,layerView:s}),this.done=!0,this._deferred?.resolve(s)}catch(s){r.emit("layerview-create-error",{view:e,error:s}),e.emit("layerview-create-error",{layer:r,error:s}),this.done=!0,this._deferred?.reject(new R("layerview:create-error","layerview creation failed",{layer:r,error:s}))}}};function uNe(t){return t.createLayerView!==Bt.prototype.createLayerView}function dNe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let eo=class extends _e{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Iy,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Is(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(y_(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:i}=this.view;if(!i)return void this.clear();if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=d=>{if(d!=null){for(const h of d)if(h){if(this.layerViewFilter?.(h)===!1)continue;r.add(h);const f=this._layerLayerViewInfoMap.get(h);f&&n?f.start():f||this._recyclingInfoMap.has(h)||s.push(h),"layers"in h&&h.layers&&o(h.layers)}}};for(const d of this._rootCollectionNames)o(Ga(this,d));const a=new Array,l=d=>{const h=d.tryRecycle(s);h?(this._recyclingInfoMap.set(d.layer,d),this.notifyChange("updating"),h.then(()=>{this._recyclingInfoMap.delete(d.layer),this._layerLayerViewInfoMap.set(d.layer,d),this._reschedule(),this.notifyChange("updating")}).catch(f=>{Yi(f)||(this._recyclingInfoMap.delete(d.layer),d.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(d)};for(const d of this._layerLayerViewInfoMap.values())r.has(d.layer)||(this._layerLayerViewInfoMap.delete(d.layer),l(d));for(const d of this._recyclingInfoMap.values())r.has(d.layer)||(this._recyclingInfoMap.delete(d.layer),l(d));for(const d of s)this._createLayerView(d);this._refreshCollections(),a.forEach(d=>d.destroy());const c=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.groundLayers,i?.basemap?.referenceLayers,i?.layers].filter(d=>!!d);r.forEach(d=>"layers"in d&&c.push(d.layers)),this.addHandles(c.map(d=>this._watchUpdatingTracking.addOnCollectionChange(()=>d,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([ks(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),de(()=>{const e=this.view,i=e?.map;return[i?.basemap,i?.ground,i?.layers,e?.ready]},()=>this._reschedule(),Vs)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),DI(this._recyclingInfoMap),DI(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(jt()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||_1e(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),DI(this._layerLayerViewInfoMap),DI(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const i=this._layerLayerViewInfoMap.get(e)?.promise;if(!i){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new R("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return i}isCreatingLayerViewsForLayer(e,i){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in e&&e.layers?.length)&&e.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Ga(this,e),Ga(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())Ga(this,e)?.removeAll()}_populateLayerViewsOwners(e,i,r){if(!e||!i)return void i?.removeAll();let s=0;for(const n of e){const o=this._layerLayerViewInfoMap.get(n);if(!o?.layerView)continue;const{layerView:a}=o;a.layer=n,a.parent=r,i.at(s)!==a&&i.splice(s,0,a),"layers"in n&&dNe(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),++s}s<i.length&&i.splice(s)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new cNe(e,this.view,this.layerViewImporter);i.promise?.then(()=>this._refreshCollections(),r=>{r&&(Yi(r)||r.name==="cancelled:layerview-create")||X.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([p()],eo.prototype,"_workPromise",void 0),u([p({readOnly:!0})],eo.prototype,"_watchUpdatingTracking",void 0),u([p({readOnly:!0})],eo.prototype,"_layersToLayerViews",void 0),u([p({constructOnly:!0})],eo.prototype,"layerviewMapping",void 0),u([p({readOnly:!0})],eo.prototype,"_rootCollectionNames",null),u([p({constructOnly:!0})],eo.prototype,"layerViewFilter",void 0),u([p()],eo.prototype,"layerViewImporter",void 0),u([p()],eo.prototype,"supportsGround",void 0),u([p({readOnly:!0})],eo.prototype,"updating",null),u([p({readOnly:!0})],eo.prototype,"updatingRemaining",null),u([p({constructOnly:!0})],eo.prototype,"view",void 0),eo=u([M("esri.views.support.LayerViewManager")],eo);const hNe=eo;let Zv=class extends _e{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([p()],Zv.prototype,"featureTitleFields",void 0),u([p()],Zv.prototype,"utilityNetworkFields",void 0),u([p()],Zv.prototype,"globalIdField",void 0),Zv=u([M("esri.views.support.RequiredFieldsOptions")],Zv);const pNe=Zv;var Yv,gf;let Ae=(gf=class extends t3(A6){constructor(e){super(e),this._userSpatialReference=null,this.handles=new __,this.updatingHandles=new Iy,this.allLayerViews=new ra({getCollections:()=>this.layerviewCollections,getChildrenFunction:mNe}),this.analyses=new Bw,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new $S,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ue,this.magnifier=new gle,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new ue,this._highPriorityCursorHandles=new ue,this.input=new eNe,this.navigation=new I3,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new xle(this),this.persistableViewModels=new ue,this.requiredFieldsOptions=new pNe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(de(()=>this.preconditionsReady,i=>{const r=this.ready;if(i?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Yv.views.add(this)):(this._lockedSpatialReference=null,Yv.views.remove(this)),this.notifyChange("spatialReference"),!i&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(i&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new R("view:startup-error","View._startup failed",s)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},lr))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,g_(()=>this.ready)))),this.basemapView=new cRe({view:this}),this.layerViewManager=new hNe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new _c({view:this}),this.selectionManager=new wRe({view:this}),this.addHandles([Ts(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{X.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),de(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Vs),de(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},lr),de(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Vs)])}get _layerToLayerviewMapping(){return Yv._layerToLayerview}destroy(){this.destroyed||(Yv.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=bi(this.graphics),this.analyses=bi(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=bi(this.analysisViewManager),this.toolViewManager=bi(this.toolViewManager),this.layerViewManager=bi(this.layerViewManager),this.selectionManager=bi(this.selectionManager),this.basemapView=bi(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=bi(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return X.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ui({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,i)=>this.getSpatialReferenceSupport(e,i),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??YRe()}set highlights(e){this._set("highlights",Iu(e,this._get("highlights"),ue.ofType(cf)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||vF(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(X.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),vF(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,i=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&i&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=A_(s=>fU(H("view-readyState-waiting-delay"),null,s)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=sg(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const i=!Mr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),i&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??ga}set timeZone(e){this._userTimeZone=e,$Ee(e)||X.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,i="low"){const r=i==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,s={cursor:e},n=Et(()=>r.remove(s));return r.add(s),this.addHandles(n),n}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new rz}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new R("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,i){return this.isResolved()&&!this.ready&&X.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,i)}forceReadyCycle(){this.ready&&(Ts(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,i){return super.on(e,i)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const i=document.createElement("div");i.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const s=document.createElement("div");s.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",s.setAttribute("style","font-size: 18px;");const n=document.createElement("a");n.innerHTML="https://esriurl.com/webgl-faq",n.target="_blank",n.setAttribute("style","font-size: 18px;"),n.href="https://esriurl.com/webgl-faq",i.appendChild(r),i.appendChild(s),i.appendChild(n);const o=this.getSurface();throw o&&o.appendChild(i),e}}},Yv=gf,gf._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],gf.views=new ue,gf);u([p()],Ae.prototype,"_userSpatialReference",void 0),u([p()],Ae.prototype,"activeTool",null),u([p({readOnly:!0})],Ae.prototype,"allLayerViews",void 0),u([p({readOnly:!0})],Ae.prototype,"layerviewCollections",null),u([p(nF(Bw,"analyses"))],Ae.prototype,"analyses",void 0),u([p()],Ae.prototype,"animation",null),u([p()],Ae.prototype,"basemapView",void 0),u([p()],Ae.prototype,"center",null),u([p()],Ae.prototype,"defaultsFromMapSettings",null),u([p()],Ae.prototype,"defaultsFromMap",null),u([p()],Ae.prototype,"dependencies",void 0),u([p()],Ae.prototype,"displayFilterEnabled",void 0),u([p({type:Pe})],Ae.prototype,"extent",null),u([p()],Ae.prototype,"fatalError",void 0),u([p(nF($S,"graphics"))],Ae.prototype,"graphics",void 0),u([p({readOnly:!0,type:Pn})],Ae.prototype,"heightModelInfo",null),u([p({type:ue.ofType(cf)})],Ae.prototype,"highlights",null),u([p({readOnly:!0})],Ae.prototype,"interacting",null),u([p({constructOnly:!0})],Ae.prototype,"layerViewFilter",void 0),u([p({readOnly:!0})],Ae.prototype,"navigating",null),u([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ae.prototype,"preconditionsReady",null),u([p({readOnly:!0})],Ae.prototype,"typeSpecificPreconditionsReady",void 0),u([p({type:ue,readOnly:!0})],Ae.prototype,"layerViews",void 0),u([p()],Ae.prototype,"resolution",null),u([p({type:gle})],Ae.prototype,"magnifier",void 0),u([p({value:null,type:rae})],Ae.prototype,"map",null),u([p()],Ae.prototype,"padding",void 0),u([p({readOnly:!0})],Ae.prototype,"ready",void 0),u([p()],Ae.prototype,"_readyStateWaitingTask",void 0),u([p({readOnly:!0})],Ae.prototype,"readyState",null),u([p({type:fe})],Ae.prototype,"spatialReference",null),u([p()],Ae.prototype,"stationary",null),u([p({type:pt})],Ae.prototype,"timeExtent",null),u([p({type:String,nonNullable:!0})],Ae.prototype,"timeZone",null),u([p()],Ae.prototype,"tools",null),u([p()],Ae.prototype,"toolViewManager",void 0),u([p({readOnly:!0})],Ae.prototype,"type",void 0),u([p({type:Number})],Ae.prototype,"scale",void 0),u([p({readOnly:!0})],Ae.prototype,"updating",void 0),u([p({readOnly:!0})],Ae.prototype,"initialExtentRequired",void 0),u([p({readOnly:!0})],Ae.prototype,"initialExtent",null),u([p()],Ae.prototype,"cursor",null),u([p({readOnly:!0})],Ae.prototype,"input",void 0),u([p({type:I3,nonNullable:!0})],Ae.prototype,"navigation",void 0),u([p()],Ae.prototype,"layerViewManager",void 0),u([p()],Ae.prototype,"analysisViewManager",void 0),u([p()],Ae.prototype,"selectionManager",void 0),u([p()],Ae.prototype,"width",void 0),u([p()],Ae.prototype,"height",void 0),u([p({readOnly:!0})],Ae.prototype,"resizing",void 0),u([p({value:null,readOnly:!0})],Ae.prototype,"size",null),u([p({readOnly:!0})],Ae.prototype,"suspended",void 0),u([p({readOnly:!0})],Ae.prototype,"viewEvents",void 0),u([p({readOnly:!0})],Ae.prototype,"persistableViewModels",void 0),u([p()],Ae.prototype,"_isValid",void 0),u([p()],Ae.prototype,"_readyCycleForced",void 0),u([p()],Ae.prototype,"_lockedSpatialReference",void 0),u([p()],Ae.prototype,"_userTimeZone",void 0),u([p()],Ae.prototype,"_lockedTimeZone",void 0),u([p()],Ae.prototype,"_userTimeExtent",void 0),u([p()],Ae.prototype,"_lockedTimeExtent",void 0),u([p({type:rz})],Ae.prototype,"theme",void 0),u([p({readOnly:!0,type:rz})],Ae.prototype,"effectiveTheme",null),Ae=Yv=u([M("esri.views.View")],Ae);const CO=globalThis.$arcgis;CO&&!CO.views&&Object.defineProperty(CO,"views",{configurable:!1,enumerable:!0,writable:!1,value:Ae.views});const fNe=Ae;function mNe(t){return t.layerViews}function ur(){return[0,0]}function yNe(t){return[t[0],t[1]]}function R2(t,e){return[t,e]}function gNe(t,e){return[t,e]}function vNe(t,e=ur()){const i=Math.min(2,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Rle(){return ur()}function Nle(){return R2(1,1)}function Dle(){return R2(1,0)}function Fle(){return R2(0,1)}const bNe=Rle(),wNe=Nle(),_Ne=Dle(),xNe=Fle();Object.freeze(Object.defineProperty({__proto__:null,ONES:wNe,UNIT_X:_Ne,UNIT_Y:xNe,ZEROS:bNe,clone:yNe,create:ur,freeze:gNe,fromArray:vNe,fromValues:R2,ones:Nle,unitX:Dle,unitY:Fle,zeros:Rle},Symbol.toStringTag,{value:"Module"}));function SNe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function N2(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function $Ne(t,e,i,r,s,n,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t[4]=n,t[5]=o,t}function o8(t,e){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5];let l=i*n-r*s;return l?(l=1/l,t[0]=n*l,t[1]=-r*l,t[2]=-s*l,t[3]=i*l,t[4]=(s*a-n*o)*l,t[5]=(r*o-i*a)*l,t):null}function INe(t){return t[0]*t[3]-t[1]*t[2]}function qc(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=i[0],d=i[1],h=i[2],f=i[3],m=i[4],y=i[5];return t[0]=r*c+n*d,t[1]=s*c+o*d,t[2]=r*h+n*f,t[3]=s*h+o*f,t[4]=r*m+n*y+a,t[5]=s*m+o*y+l,t}function kf(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),d=Math.cos(i);return t[0]=r*d+n*c,t[1]=s*d+o*c,t[2]=r*-c+n*d,t[3]=s*-c+o*d,t[4]=a,t[5]=l,t}function D2(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=i[0],d=i[1];return t[0]=r*c,t[1]=s*c,t[2]=n*d,t[3]=o*d,t[4]=a,t[5]=l,t}function Eu(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=e[5],c=i[0],d=i[1];return t[0]=r,t[1]=s,t[2]=n,t[3]=o,t[4]=r*c+n*d+a,t[5]=s*c+o*d+l,t}function k3(t,e){const i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function zle(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function a8(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function kNe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function TNe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function ENe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function jle(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function MNe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function CNe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function PNe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ANe(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=e[0],c=e[1],d=e[2],h=e[3],f=e[4],m=e[5],y=Wn();return Math.abs(i-l)<=y*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=y*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-d)<=y*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(n-h)<=y*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-f)<=y*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=y*Math.max(1,Math.abs(a),Math.abs(m))}const LNe=qc,ONe=jle;Object.freeze(Object.defineProperty({__proto__:null,add:ENe,copy:SNe,determinant:INe,equals:ANe,exactEquals:PNe,frob:TNe,fromRotation:k3,fromScaling:zle,fromTranslation:a8,identity:N2,invert:o8,mul:LNe,multiply:qc,multiplyScalar:MNe,multiplyScalarAndAdd:CNe,rotate:kf,scale:D2,set:$Ne,str:kNe,sub:ONe,subtract:jle,translate:Eu},Symbol.toStringTag,{value:"Module"}));function Mu(){return[1,0,0,1,0,0]}function RNe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function NNe(t,e,i,r,s,n){return[t,e,i,r,s,n]}const DNe=Mu();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:DNe,clone:RNe,create:Mu,fromValues:NNe},Symbol.toStringTag,{value:"Module"}));const jI={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new rr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:fe.WebMercator}),minus180Line:new rr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:fe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new rr({paths:[[[180,-180],[180,180]]],spatialReference:fe.WGS84}),minus180Line:new rr({paths:[[[-180,-180],[-180,180]]],spatialReference:fe.WGS84})}};function dy(t,e){return Math.ceil((t-e)/(2*e))}function Vle(t,e){const i=kS(t);for(const r of i)for(const s of r)s[0]+=e;return t}function kS(t){return or(t)?t.rings:t.paths}function FNe(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function Rh(t){return typeof t=="string"?$t(t):U(t)}function zNe(t,e,i){const r={};for(const s in t){if(s==="declaredClass")continue;const n=t[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map(o=>zNe(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i?.[s]);r[s]=e?o:JSON.stringify(o)}else r[s]=e?n:JSON.stringify(n);else r[s]=n}return r}function jNe(t,e){return t?e&&zU(t)?e:FU(t)??ft?.findCredential(t)?.token:null}async function uyt(t,e,i){const r=jNe(t,e);return r||(!ft&&lt.request.useIdentity&&await K(()=>Promise.resolve().then(()=>Yye),void 0),(await ft.getCredential(t,i))?.token)}async function VNe(t,e,i,r){const s=Rh(t),n=e[0].spatialReference,o={...r,responseType:"json",query:{...s.query,f:"json",sr:pg(n),target:JSON.stringify({geometryType:Cg(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await xe(s.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(d=>{const h=Nu(d);return h.spatialReference=n,h})}}function UNe(t){return{geometryType:Cg(t[0]),geometries:t.map(e=>e.toJSON())}}function Ule(t,e,i){const r=eke(e);return t.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function BNe(t,e,i){const r=typeof t=="string"?$t(t):t,s=e[0].spatialReference,n=Cg(e[0]),o={...i,query:{...r.query,f:"json",sr:pg(s),geometries:JSON.stringify(UNe(e))}},{data:a}=await xe(r.path+"/simplify",o);return Ule(a.geometries,n,s)}const Ble=()=>X.getLogger("esri.geometry.support.normalizeUtils");function qNe(t){return t.type==="polygon"}function GNe(t){return t[0].type==="polygon"}function HNe(t){return t[0].type==="polyline"}function zH(t){const e=[];let i=0,r=0;for(let s=0;s<t.length;s++){const n=t[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],e.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&e.push([(i+r)/2,0])}return e}function WNe(t,e){if(!(t instanceof rr||t instanceof vi)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw Ble().error(s),new R("internal:geometry",s)}const i=kS(t),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],c=s[o+1][0],d=s[o+1][1],h=Math.sqrt((c-a)*(c-a)+(d-l)*(d-l)),f=(d-l)/h,m=(c-a)/h,y=h/e;if(y>1){for(let x=1;x<=y-1;x++){const S=x*e,$=m*S+a,T=f*S+l;n.push([$,T])}const v=(h+Math.floor(y-1)*e)/2,b=m*v+a,w=f*v+l;n.push([b,w])}n.push([c,d])}}return qNe(t)?new vi({rings:r,spatialReference:t.spatialReference}):new rr({paths:r,spatialReference:t.spatialReference})}function jH(t,e,i){if(e){const r=WNe(t,1e6);t=Hb(r,!0)}return i&&(t=Vle(t,i)),t}function VH(t,e,i){if(Array.isArray(t)){const r=t[0];if(r>e){const s=dy(r,e);t[0]=r+s*(-2*e)}else if(r<i){const s=dy(r,i);t[0]=r+s*(-2*i)}}else{const r=t.x;if(r>e){const s=dy(r,e);t=t.clone().offset(s*(-2*e),0)}else if(r<i){const s=dy(r,i);t=t.clone().offset(s*(-2*i),0)}}return t}function JNe(t,e){let i=-1;for(let r=0;r<e.cutIndexes.length;r++){const s=e.cutIndexes[r],n=e.geometries[r],o=kS(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let d=0;for(let f=0;f<l.length;f++){const m=l[f][0];d=m>d?m:d}d=Number(d.toFixed(9));const h=-360*dy(d,180);for(let f=0;f<l.length;f++){const m=n.getPoint(a,f);n.setPoint(a,f,m.clone().offset(h,0))}return!0}})}if(s===i){if(GNe(t))for(const a of kS(n))t[s]=t[s].addRing(a);else if(HNe(t))for(const a of kS(n))t[s]=t[s].addPath(a)}else i=s,t[s]=n}return t}async function qle(t,e,i){if(!Array.isArray(t))return qle([t],e);e&&typeof e!="string"&&Ble().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??lt.geometryServiceUrl;let s,n,o,a,l,c,d,h,f=0;const m=[],y=[];for(const $ of t)if($!=null)if(s||(s=$.spatialReference,n=Hn(s),o=s.isWebMercator,c=o?102100:4326,a=jI[c].maxX,l=jI[c].minX,d=jI[c].plus180Line,h=jI[c].minus180Line),n)if($.type==="mesh")y.push($);else if($.type==="point")y.push(VH($.clone(),a,l));else if($.type==="multipoint"){const T=$.clone();T.points=T.points.map(C=>VH(C,a,l)),y.push(T)}else if($.type==="extent"){const T=$.clone()._normalize(!1,!1,n);y.push(T.rings?new vi(T):T)}else if($.extent){const T=$.extent,C=dy(T.xmin,l)*(2*a);let L=C===0?$.clone():Vle($.clone(),C);T.offset(C,0);let{xmin:N,xmax:D}=T;N=Number(N.toFixed(9)),D=Number(D.toFixed(9)),T.intersects(d)&&D!==a?(f=D>f?D:f,L=jH(L,o),m.push(L),y.push("cut")):T.intersects(h)&&N!==l?(f=D*(2*a)>f?D*(2*a):f,L=jH(L,o,360),m.push(L),y.push("cut")):y.push(L)}else y.push($.clone());else y.push($);else y.push($);let v=dy(f,a),b=-90;const w=v,x=new rr;for(;v>0;){const $=360*v-180;x.addPath([[$,b],[$,-1*b]]),b*=-1,v--}if(m.length>0&&w>0){const $=JNe(m,await VNe(r,m,x,i)),T=[],C=[];for(let D=0;D<y.length;D++){const F=y[D];if(F!=="cut")C.push(F);else{const W=$.shift(),Z=t[D];Z!=null&&Z.type==="polygon"&&Z.rings&&Z.rings.length>1&&W.rings.length>=Z.rings.length?(T.push(W),C.push("simplify")):C.push(o?$u(W):W)}}if(!T.length)return C;const L=await BNe(r,T,i),N=[];for(let D=0;D<C.length;D++){const F=C[D];F!=="simplify"?N.push(F):N.push(o?$u(L.shift()):L.shift())}return N}const S=[];for(let $=0;$<y.length;$++){const T=y[$];if(T!=="cut")S.push(T);else{const C=m.shift();S.push(o===!0?$u(C):C)}}return S}function ZNe(t){if(!t)return null;const e=t.extent;if(!e)return null;const i=t.spatialReference&&Hn(t.spatialReference);if(!i)return e;const[r,s]=i.valid,n=2*s,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=s||o>n||l<r||c>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=zH(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=zH(t.paths);break;case"multipoint":a=t.points}const d=e.clone();for(let h=0;h<a.length;h++){let f=a[h][0];f<0?(f+=s,c=Math.max(f,c)):(f-=s,l=Math.min(f,l))}return d.xmin=l,d.xmax=c,d.width<o?(d.xmin-=s,d.xmax-=s,d):e}function l8(t,e,i){const r=Hn(i);if(r==null)return t;const[s,n]=r.valid,o=2*n;let a=0,l=0;e>n?a=Math.ceil(Math.abs(e-n)/o):e<s&&(a=-Math.ceil(Math.abs(e-s)/o)),t>n?l=Math.ceil(Math.abs(t-n)/o):t<s&&(l=-Math.ceil(Math.abs(t-s)/o));let c=t+(a-l)*o;const d=c-e;return d>n?c-=o:d<s&&(c+=o),c}function dyt(t,e){return c8(e)?.normalize(t)??t}function c8(t){const e=Hn(t);if(e==null)return null;const[i,r]=e.valid;return new NA(i,r)}const hyt=c8(fe.WGS84);c8(fe.WebMercator);const Gle=96,Hle=39.37,YNe=180/Math.PI;function Wle(t){return t.wkid?t:t.spatialReference||fe.WGS84}function u8(t,e){return e.type?$r(t,e.x,e.y):d0(t,e)}function Jle(t){return va(t)}function T3(t,e,i=0){let r=t.width,s=t.height;if(i!==0){const a=x_(i),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,s=t.width*c+t.height*l}const n=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/n,s/o)*sDe(t.spatialReference)}async function dx(t,e,i,r){let s,n;if(!t||Array.isArray(t)&&!t.length)return null;if(ue.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(d=>"attributes"in d),l=t.some(d=>!d.geometry);let c=t;if(a&&l&&e&&e.allLayerViews){const d=new Map;for(const y of t){const v=y.layer,b=d.get(v)||[],w=y.attributes[v.objectIdField];w!=null&&b.push(w),d.set(v,b)}const h=[];d.forEach((y,v)=>{const b=e.allLayerViews?.find(w=>w.layer.id===v.id);if(b&&"queryFeatures"in b){const w=v.createQuery();w.objectIds=y,w.returnGeometry=!0,h.push(b.queryFeatures(w))}});const f=await Promise.all(h),m=[];for(const y of f)if(y&&y.features&&y.features.length)for(const v of y.features)v.geometry!=null&&m.push(v.geometry);c=m}for(const d of c)r=await dx(d,e,i,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")s=new Fe(t);else if(t instanceof ns)s=t;else if("geometry"in t){if(t.geometry)s=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews?.find(c=>c.layer.id===a.id);if(l&&"queryFeatures"in l){const c=a.createQuery();c.objectIds=[t.attributes[a.objectIdField]],c.returnGeometry=!0,s=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new Pe({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=ZNe(s);break;default:n=s.extent}if(!n)return null;Lh()||tc(n.spatialReference,i)||await $f();const o=Ff(n,i);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=l8(a.x,r.center.x,i),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function KNe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const r of t){const s=r.layer;s?.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,i=s.maxScale>i?s.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function UH(t,e){const i=Wle(t);return Mr(i,e)||i.imageCoordinateSystem||e.imageCoordinateSystem?t:Ff(t,e)}async function XNe(t,e){if(!t||!e)return new us({targetGeometry:new Fe,scale:0,rotation:0});let i=e.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=e,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;t instanceof us?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof Pe?c=t:t instanceof ns?c=await dx(t,e,i):t&&(c=await dx(t.center,e,i)||await dx(t.target,e,i)||await dx(t,e,i)),!c&&n?.targetGeometry?c=n.targetGeometry:!c&&e.extent&&(c=e.extent),i||(i=Wle(e.spatialReference||e.extent||c)),Lh()||Mr(c.spatialReference,i)||tc(c.spatialReference,i)||await $f();const d=UH(c,i),h="center"in d?d.center:d;e.pickClosestTarget!==!1&&h.type==="point"&&n.targetGeometry?.type==="point"&&(h.x=l8(h.x,n.targetGeometry.x,h.spatialReference));let f=0;l?f=l.rotation:t.hasOwnProperty("rotation")?f=t.rotation:n&&(f=n.rotation);let m=0;m=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?n.scale:T3(UH(c.extent,i),a,f);const y=KNe(t.target??t);y&&(y.min&&y.min<m?m=y.min:y.max&&y.max>m&&(m=y.max));let v=new us({targetGeometry:h,scale:m,rotation:f});return r&&(v=r.fit(v),r.constrainByGeometry(v),r.rotationEnabled||(v.rotation=n.rotation)),v}function fn(t,e){const i=t.targetGeometry,r=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function QNe(t,e,i){return i?$r(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):w2(t,e,.5)}const eDe=function(){const t=ur();return function(e,i,r){const s=i.targetGeometry;u8(t,s);const n=.5*N_(i);return e.xmin=t[0]-n*r[0],e.ymin=t[1]-n*r[1],e.xmax=t[0]+n*r[0],e.ymax=t[1]+n*r[1],e.spatialReference=s.spatialReference,e}}();function tDe(t,e,i,r,s){return lz(t,e,i.center),t.scale=T3(i,r),s?.constraints?.constrain(t),t}function iDe(t,e,i,r){return p8(t,e,i,r),o8(t,t)}const Zle=function(){const t=ur();return function(e,i,r){return YU(e,nDe(e,i),QNe(t,i,r))}}(),rDe=function(){const t=Mu(),e=ur();return function(i,r,s,n){const o=N_(r),a=d8(r);return $r(e,o,o),zle(t,e),kf(t,t,a),Eu(t,t,Zle(e,s,n)),Eu(t,t,[0,n.top-n.bottom]),$r(i,t[4],t[5])}}();function N_(t){return t.scale*Yle(t.targetGeometry?.spatialReference)}function Yle(t){return oa(t)?1/(Jle(t)*Hle*Gle):1}function d8(t){return ZU(t.rotation)||0}function sDe(t){return oa(t)?Jle(t)*Hle*Gle:1}function nDe(t,e){return w2(t,e,.5)}const h8=function(){const t=ur(),e=ur(),i=ur();return function(r,s,n,o,a,l){return gre(t,s),w2(e,n,.5*l),$r(i,1/o*l,-1/o*l),a8(r,e),a&&kf(r,r,a),D2(r,r,i),Eu(r,r,t),r}}(),p8=function(){const t=ur();return function(e,i,r,s){const n=N_(i),o=d8(i);return u8(t,i.targetGeometry),h8(e,t,r,n,o,s)}}(),oDe=function(){const t=ur();return function(e,i,r,s){const n=N_(i);return u8(t,i.targetGeometry),h8(e,t,r,n,0,s)}}();function Kle(t){const e=Hn(t);return e?e.valid[1]-e.valid[0]:0}function aDe(t,e){return Math.round(Kle(t)/e)}const lDe=function(){const t=ur(),e=ur(),i=[0,0,0];return function(r,s,n){p$(t,r,s),DD(t,t),p$(e,r,n),DD(e,e),bre(i,t,e);let o=Math.acos(vre(t,e)/(QM(t)*QM(e)))*YNe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),cDe=function(){const t=ur();return function(e,i,r,s){const n=e.targetGeometry;return fn(e,i),rDe(t,i,r,s),n.x+=t[0],n.y+=t[1],e}}(),lz=function(t,e,i){fn(t,e);const r=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,t},uDe=function(){const t=ur();return function(e,i,r,s,n){n||(n="center"),YU(t,r,s),w2(t,t,.5);const o=t[0],a=t[1];switch(n){case"center":$r(t,0,0);break;case"left":$r(t,-o,0);break;case"top":$r(t,0,a);break;case"right":$r(t,o,0);break;case"bottom":$r(t,0,-a);break;case"top-left":$r(t,-o,a);break;case"bottom-left":$r(t,-o,-a);break;case"top-right":$r(t,o,a);break;case"bottom-right":$r(t,o,-a)}return E3(e,i,t),e}}();function pyt(t,e,i){return fn(t,e),t.rotation+=i,t}function dDe(t,e,i){return fn(t,e),t.rotation=i,t}const hDe=function(){const t=ur();return function(e,i,r,s,n){return fn(e,i),isNaN(r)||r===0||(Qle(t,s,i,n),e.scale=i.scale*r,ece(t,t,e,n),E3(e,e,$r(t,t[0]-s[0],s[1]-t[1]))),e}}();function BH(t,e,i){return fn(t,e),t.scale=i,t}const Xle=function(){const t=ur();return function(e,i,r,s,n,o){return fn(e,i),isNaN(r)||r===0||(Qle(t,n,i,o),e.scale=i.scale*r,e.rotation+=s,ece(t,t,e,o),E3(e,e,$r(t,t[0]-n[0],n[1]-t[1]))),e}}(),fyt=function(){const t=ur(),e=ur();return function(i,r,s,n,o,a,l){return Zle(e,a,l),pre(t,o,e),n?Xle(i,r,s,n,t,a):hDe(i,r,s,t,a)}}(),Qle=function(){const t=Mu();return function(e,i,r,s){return un(e,i,iDe(t,r,s,1))}}(),ece=function(){const t=Mu();return function(e,i,r,s){return un(e,i,p8(t,r,s,1))}}(),E3=function(){const t=ur(),e=Mu();return function(i,r,s){fn(i,r);const n=N_(r),o=i.targetGeometry;return k3(e,d8(r)),D2(e,e,R2(n,n)),un(t,s,e),o.x+=t[0],o.y+=t[1],i}}();function dh(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function pDe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function fDe(t,e,i,r,s,n){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function tce(t,e,i,r){const s=e[r],n=e[r+1];t[r]=i[0]*s+i[2]*n+i[4],t[r+1]=i[1]*s+i[3]*n+i[5]}function ice(t,e,i,r=0,s=0,n=2){const o=s||e.length/n;for(let a=r;a<o;a++)tce(t,e,i,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:pDe,create:dh,fromValues:fDe,transform:tce,transformMany:ice},Symbol.toStringTag,{value:"Module"}));function oE(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function mDe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yDe(t,e,i,r,s,n,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=i,c[3]=r,c[4]=s,c[5]=n,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:mDe,create:oE,fromValues:yDe},Symbol.toStringTag,{value:"Module"}));function T$(){return new Float32Array(2)}function gDe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function bg(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function rce(){return T$()}function sce(){return bg(1,1)}function nce(){return bg(1,0)}function oce(){return bg(0,1)}const vDe=rce(),bDe=sce(),wDe=nce(),_De=oce();Object.freeze(Object.defineProperty({__proto__:null,ONES:bDe,UNIT_X:wDe,UNIT_Y:_De,ZEROS:vDe,clone:gDe,create:T$,fromValues:bg,ones:sce,unitX:nce,unitY:oce,zeros:rce},Symbol.toStringTag,{value:"Module"}));function xDe(t){return t instanceof Float32Array&&t.length>=2}function SDe(t){return Array.isArray(t)&&t.length>=2}function PO(t){return xDe(t)||SDe(t)}var cz;const Gu=[0,0];let ud=cz=class extends Y{constructor(t){super(t),this._viewpoint2D={center:ur(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Pe,this.id=0,this.inverseTransform=Mu(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Mu(),this.transformNoRotation=Mu(),this.displayMat3=oE(),this.displayViewMat3=oE(),this.viewMat3=oE(),this.viewMat2d=dh(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=fn(i,t.viewpoint),this._set("size",d0(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new cz({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return PO(e)?un(t,e,this.inverseTransform):(Gu[0]=e,Gu[1]=i,un(t,Gu,this.inverseTransform))}toScreen(t,e,i){return PO(e)?un(t,e,this.transform):(Gu[0]=e,Gu[1]=i,un(t,Gu,this.transform))}toScreenNoRotation(t,e,i){return PO(e)?un(t,e,this.transformNoRotation):(Gu[0]=e,Gu[1]=i,un(t,Gu,this.transformNoRotation))}wrapMapCoordinate(t,e){d0(t,e);const[i]=e,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=Kle(n)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(t[0]=l8(i,r,n)),t}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return h8(t,i,s,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new us({targetGeometry:new Fe(t[0],t[1],e),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!e||!i)return;this.resolution=N_(o),this.rotation=r,this.scale=i,this.spatialReference=e,d0(this.center,t);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;h0(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=Ire(this.viewMat3),d=bg(n[0]/2,n[1]/2),h=bg(-n[0]/2,-n[1]/2),f=ZU(r);zD(c,c,d),Ere(c,c,f),zD(c,c,h),m$(this.displayViewMat3,this.displayMat3,c);const m=a8(this.viewMat2d,d);return kf(m,m,f),Eu(m,m,h),eDe(this.extent,o,n),p8(this.transform,o,n,s),o8(this.inverseTransform,this.transform),oDe(this.transformNoRotation,o,n,s),this.worldScreenWidth=aDe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([p({readOnly:!0})],ud.prototype,"id",void 0),u([p({value:1,json:{write:!0}})],ud.prototype,"pixelRatio",null),u([p({json:{write:!0}})],ud.prototype,"size",null),u([p()],ud.prototype,"spatialReference",void 0),u([p({type:us,json:{write:!0}})],ud.prototype,"viewpoint",null),u([p({readOnly:!0})],ud.prototype,"visibleArea",null),ud=cz=u([M("esri.views.2d.ViewState")],ud);const qH=ud;var uz,dz;let Bd=uz=class extends _e{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new uz({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([p()],Bd.prototype,"left",void 0),u([p()],Bd.prototype,"top",void 0),u([p()],Bd.prototype,"right",void 0),u([p()],Bd.prototype,"bottom",void 0),Bd=uz=u([M("esri.views.2d.PaddedViewState.Padding")],Bd);let Kv=dz=class extends qH{constructor(...t){super(...t),this.paddedViewState=new qH,this._updateContent=(()=>{const e=ur();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;$r(e,r.left+r.right,r.top+r.bottom),p$(e,i,e),d0(s.size,e);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(de(()=>[this.size,this.padding],()=>this._updateContent(),lr)),this.padding=new Bd,this.size=[0,0]}set padding(t){this._set("padding",t||new Bd)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=cDe(t.clone(),t,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=s,c.scale=n,c.spatialReference=l,this._update()}}clone(){return new dz({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([p()],Kv.prototype,"paddedViewState",void 0),u([p({type:Bd})],Kv.prototype,"padding",null),u([p()],Kv.prototype,"viewpoint",null),Kv=dz=u([M("esri.views.2d.PaddedViewState")],Kv);const f8=Kv;let hx=class extends _e{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([p()],hx.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([p()],hx.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),hx=u([M("esri.views.support.debugFlags")],hx);const $De=new hx,ace=Symbol("Yield");let IDe=class{constructor(){this._tasks=new Array,this._numPendingTasks=kw(0),this._readyToRun=kw(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return ace;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,r){return this._addTask((s,n)=>new HH(s,n,e,i,r),Array.prototype.push)}unshift(e,i,r){return this._addTask((s,n)=>new HH(s,n,e,i,r),Array.prototype.unshift)}pushGenerator(e,i,r){return this._addTask((s,n)=>new kDe(s,n,e,i,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const i=this._tasks.shift();this._updateReadyToRun();try{if(Xr(i.signal))this._cancelTask(i,jt());else switch(i.type){case 0:this._processSimple(i,e);break;case 1:this._processGenerator(i,e);break;case 2:this._processIterator(i,e);break;default:}}catch(r){i.reject(r)}return!0}cancelAll(){const e=jt();for(const i of this._tasks)this._cancelTask(i,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,i){if(e.abortCallback){const r=e.abortCallback(i);e.type===2&&e.iterator.return&&GH(e.iterator.return()),yn(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&GH(e.iterator.throw(i)),e.reject(i)}_onIteratorResult(e,i){i.done?e.resolve(i.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,i){const r=e.callback(i);yn(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,i){const r=e.generatorFunction(i),s=new TDe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(s,i)}_processIterator(e,i){const r=e.iterator.next(i);yn(r)?r.then(s=>this._onIteratorResult(e,s),e.reject):this._onIteratorResult(e,r)}_addTask(e,i){return new Promise((r,s)=>{const n=e(r,s);i.call(this._tasks,n),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function GH(t){yn(t)?t.then(AO,AO):AO(t)}function AO(t){Yi(t)||t instanceof Error||t instanceof R||t!=null&&typeof t=="object"&&"done"in t&&t.done||X.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let m8=class{constructor(e,i,r=void 0,s=void 0){this.resolve=e,this.reject=i,this.signal=r,this.abortCallback=s}},HH=class extends m8{constructor(e,i,r,s,n){super(e,i,s,n),this.callback=r,this.type=0}},kDe=class extends m8{constructor(e,i,r,s,n){super(e,i,s,n),this.generatorFunction=r,this.type=1}},TDe=class extends m8{constructor(e,i,r,s,n){super(e,i,s,n),this.iterator=r,this.type=2}};function EDe(){return new LDe}const dt={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Na=0,WH=new Map([[dt.RESOURCE_CONTROLLER_IMMEDIATE,Na],[dt.RESOURCE_CONTROLLER,4],[dt.SLIDE,Na],[dt.STREAM_DATA_LOADER,Na],[dt.ELEVATION_QUERY,Na],[dt.TERRAIN_SURFACE,1],[dt.SURFACE_GEOMETRY_UPDATES,1],[dt.LOD_RENDERER,2],[dt.GRAPHICS_CORE,2],[dt.I3S_CONTROLLER,2],[dt.POINT_CLOUD_LAYER,2],[dt.FEATURE_TILE_FETCHER,2],[dt.STREAM_CONTROLLER,2],[dt.CLOUDS_GENERATOR,2],[dt.OVERLAY,4],[dt.OVERLAY_RENDERER,4],[dt.STAGE,4],[dt.GRAPHICS_DECONFLICTOR,4],[dt.FILTER_VISIBILITY,4],[dt.SCALE_VISIBILITY,4],[dt.FRUSTUM_VISIBILITY,4],[dt.POINT_OF_INTEREST_FREQUENT,6],[dt.POINT_OF_INTEREST_INFREQUENT,30],[dt.LABELER,8],[dt.FEATURE_QUERY_ENGINE,8],[dt.FEATURE_TILE_TREE,16],[dt.FEATURE_TILE_TREE_ACTIVE,Na],[dt.ELEVATION_ALIGNMENT,12],[dt.ELEVATION_ALIGNMENT_SCENE,14],[dt.TEXT_TEXTURE_ATLAS,12],[dt.TEXTURE_UNLOAD,12],[dt.LINE_OF_SIGHT_TOOL,16],[dt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Na],[dt.SNAPPING,Na],[dt.SHADOW_ACCUMULATOR,30],[dt.FLOW_GENERATOR,12],[dt.MAPVIEW_FETCH_QUEUE,Na],[dt.MAPVIEW_LAYERVIEW_UPDATE,2],[dt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Na]]);function JH(t){return WH.has(t)?WH.get(t):typeof t=="number"?t:1}const MDe=6.5,ZH=1,CDe=30,PDe=1e3/30,ADe=100,YH=.9;let LDe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=kw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new nS("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new lce,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=de(()=>$De.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,Fi);for(const e of Object.keys(dt))this.performanceInfo.tasks.set(dt[e],new nS(String(dt[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,_i(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,i){const r=new ODe(this,e,i);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new nS(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const i=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-i),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let i=MDe,r=e.frameDuration,s=ZH;switch(this.state){case 2:i=0,r=Math.max(ADe,e.frameDuration),s=CDe;break;case 1:r=Math.max(PDe,e.frameDuration)}return r=r-e.elapsedFrameTime-i,this.state!==2&&r<ZH&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,s),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){sD(this._tasks,e),sD(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(i=>{i.name===e&&i.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let i="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?i="r":i!=="r"&&(i="w"))}),i}_getRuntime(e){let i=0;return this._tasks.forEach(r=>{r.name===e&&(i+=r.runtime)}),i}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let i="";return e.forEach((r,s)=>{i+=r>1?` ${r}x ${s}`:` ${s}`}),i}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((i,r)=>r.needsUpdate?++i:i,0);this._load=this._load*YH+e*(1-YH)}_schedule(){for(o_e(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Na&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,i=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==Na&&r.blockFrame!==this._frameNumber&&(e=!0,i=Math.max(i,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===ace&&(i.blockFrame=this._frameNumber)}catch(s){X.getLogger("esri.views.support.Scheduler").error(`Exception in task "${i.name}"`,s),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now()-e;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(dt))this._frameTaskTimes.set(dt[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((i,r)=>this.performanceInfo.tasks.get(r).push(i)),this.performanceInfo.total.push(e)}get test(){return this._test}},ODe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,i,r){this._scheduler=e,this.name=i,this.blockFrame=0,this.runtime=0,this._queue=new IDe,this._handles=new __,this._basePriority=JH(i),this.schedulePriority=this._basePriority,this._task=kw(r??this._queue),this._handles.add(Ts(()=>this.task.readyToRun,s=>e.taskRunningChanged(s)))}remove(){this.processQueue(TS),this._scheduler.removeTask(this),this.schedule=LO.schedule,this.reschedule=LO.reschedule,this.scheduleGenerator=LO.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const i=JH(e);this._basePriority!==Na&&this.schedulePriority===0||(this.schedulePriority=i),this._basePriority=i}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,i,r){return this._queue.push(e,i,r)}reschedule(e,i,r){return this._queue.unshift(e,i,r)}scheduleGenerator(e,i,r){return this._queue.pushGenerator(e,i,r)}processQueue(e){return this._queue.runTask(e)}},lce=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const TS=new lce;TS.enabled=!1;let RDe=class{remove(){}processQueue(){}schedule(e,i,r){try{if(Xr(i)){const s=jt();return r?Promise.resolve(r(s)):Promise.reject(s)}return oD(e(TS))}catch(s){return Promise.reject(s)}}reschedule(e,i,r){return this.schedule(e,i,r)}async scheduleGenerator(e,i,r){if(Xr(i)){const n=jt();if(r)return r(n);throw n}const s=e(TS);for(;;){const n=s.next(TS),o=yn(n)?await n:n;if(Xr(i)){const a=jt();if(r){const c=r(a),d=s.return(null);return yn(d)&&await ng(d),c}const l=s.throw(a);throw yn(l)&&await ng(l),a}if(o.done)return o.value}}};const LO=new RDe;let NDe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=EDe(),this._schedulerHandle=Ts(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||yn(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new f8,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=de(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Tw(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function DDe(t,e){const{spatialReference:i}=e,r=[e.x,e.y];let s,n,o,a;const l=[0,0],c=FDe(t);for(let f=0;f<c.length;f++){const m=c[f];for(let y=0;y<m.length-1;y++){AIe(l,r,m,y);const v=YA(r,l);(s==null||v<s)&&(s=v,n=[...l],o=f,a=y)}}if(s==null||!n||o==null||a==null)throw new R("nearest-coordinate:failed","Failed to find the nearest coordinate");const[d,h]=n;return{coordinate:new Fe({x:d,y:h,spatialReference:i}),distance:s}}function FDe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var hz;let Ym=hz=class extends O6(_e){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ff(this.geometry,this.spatialReference)}catch(t){return X.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?b2(this.normalizedGeometry,i):HU(this.normalizedGeometry,i))return t;const{coordinate:r}=DDe(this.normalizedGeometry,i);return r&&(t.targetGeometry=r),t}clone(){return new hz({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};u([p({constructOnly:!0})],Ym.prototype,"geometry",void 0),u([p({readOnly:!0})],Ym.prototype,"normalizedGeometry",null),u([p({constructOnly:!0})],Ym.prototype,"spatialReference",void 0),Ym=hz=u([M("esri.views.2d.constraints.GeometryConstraint")],Ym);var pz;let px=pz=class extends O6(_e){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new pz({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([p()],px.prototype,"enabled",void 0),u([p()],px.prototype,"rotationEnabled",void 0),px=pz=u([M("esri.views.2d.constraints.RotationConstraint")],px);const cce=px;var fz;let to=fz=class extends O6(_e){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,c=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!e?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);e=e.map(d=>d.clone()),e.sort((d,h)=>h.scale-d.scale),e.forEach((d,h)=>d.level=h);for(const d of e)!l&&i>0&&i>=d.scale&&(o=d.level,l=!0),!c&&r>0&&r>=d.scale&&(a=t?t.level:-1,c=!0),t=d;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?e.length-1:a),s=Math.max(s,0),s=Math.min(s,e.length-1),n=Math.max(n,0),n=Math.min(n,e.length-1),s>n&&([s,n]=[n,s]),i=e[s].scale,r=e[n].scale,e.splice(0,s),e.splice(n-s+1),e.forEach((d,h)=>{this._lodByScale[d.scale]=d,this._scales[h]=d.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=t.targetGeometry,n=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=i!==0&&t.scale>i;if(o||a){const l=a?i:r;if(e&&n){const c=(l-e.scale)/(t.scale-e.scale);s.x=n.x+(s.x-n.x)*c,s.y=n.y+(s.y-n.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.floor(t),r=Math.ceil(t);return e[i]+(t-i)*(e[r]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(i=e[s],r=e[s+1],r===t)return s+this.effectiveMinZoom+1;if(i>t&&r<t)return s+this.effectiveMinZoom+1-(t-r)/(i-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new fz({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};u([p({readOnly:!0})],to.prototype,"effectiveLODs",void 0),u([p({readOnly:!0})],to.prototype,"effectiveMinZoom",void 0),u([p({readOnly:!0})],to.prototype,"effectiveMaxZoom",void 0),u([p({readOnly:!0})],to.prototype,"effectiveMinScale",void 0),u([p({readOnly:!0})],to.prototype,"effectiveMaxScale",void 0),u([p()],to.prototype,"lods",void 0),u([p()],to.prototype,"minZoom",void 0),u([p()],to.prototype,"maxZoom",void 0),u([p()],to.prototype,"minScale",void 0),u([p()],to.prototype,"maxScale",void 0),u([p()],to.prototype,"snapToZoom",void 0),to=fz=u([M("esri.views.2d.constraints.ZoomConstraint")],to);const uce=to,zDe={base:null,key:"type",typeMap:{extent:Pe,polygon:vi}};let mr=class extends _e{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ue}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Ym({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new cce({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===r&&e.maxZoom===s&&e.minScale===n&&e.maxScale===o&&e.snapToZoom===a?e:new uce({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),this.customConstraints.forEach(r=>r.constrain(e,i)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(i=>i.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};u([p({readOnly:!0})],mr.prototype,"effectiveLODs",null),u([p({readOnly:!0})],mr.prototype,"effectiveMinScale",null),u([p({readOnly:!0})],mr.prototype,"effectiveMaxScale",null),u([p({readOnly:!0})],mr.prototype,"effectiveMinZoom",null),u([p({readOnly:!0})],mr.prototype,"effectiveMaxZoom",null),u([p({types:zDe,value:null})],mr.prototype,"geometry",null),u([p({type:[yt]})],mr.prototype,"lods",void 0),u([p()],mr.prototype,"minScale",void 0),u([p()],mr.prototype,"maxScale",void 0),u([p()],mr.prototype,"minZoom",void 0),u([p()],mr.prototype,"maxZoom",void 0),u([p()],mr.prototype,"rotationEnabled",void 0),u([p()],mr.prototype,"snapToZoom",void 0),u([p({type:ue})],mr.prototype,"customConstraints",void 0),u([p()],mr.prototype,"view",void 0),u([p({readOnly:!0})],mr.prototype,"version",null),u([p({type:Ym,readOnly:!0})],mr.prototype,"_geometry",null),u([p({type:cce})],mr.prototype,"_rotation",null),u([p({readOnly:!0,type:uce})],mr.prototype,"_zoom",null),mr=u([M("esri.views.2d.MapViewConstraints")],mr);const KH=mr;let tn=class extends _e{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([de(()=>this.constraints?.version,i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},lr)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Fe({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void X.getLogger(this).error(new R("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const r=this.viewpoint;lz(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void X.getLogger(this).error(new R("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(e,this.state.spatialReference)}catch(s){return void X.getLogger(this).error(new R("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;tDe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;dDe(i,i,e),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;BH(i,i,e),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new R("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new R("mapview:invalid-viewpoint","geometry not defined"))}catch(n){r=new R("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(r)return void X.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new us({targetGeometry:new Fe,scale:0,rotation:0});fn(s,i),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.constraints?.zoomToScale(e)??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;BH(r,r,i),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),d=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let h,f,m;const y=l?.rotation,v=l?.targetGeometry;v?.type==="extent"?h=v:v?.type==="point"&&(f=v,m=l?.scale);const b=n??h;return{center:s??f??b?.center,rotation:a??y,scale:(o??d??m??(b&&T3(b,[e[0]-i.left-i.right,e[1]-i.top-i.bottom])))||void 0}}startup(e,i,r,s){const n=e.targetGeometry;try{this._project(e,r)}catch(o){X.getLogger(this).warn(new pa("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:o})),e.targetGeometry=s||new Fe({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new f8({padding:this.padding,size:i,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,o=new Fe({x:e,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(e){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const l=i.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=l}const r=i.clone(),[s,n]=i.center;let o=null;try{o=this._project(new Fe({x:s,y:n,spatialReference:i.spatialReference}),e)}catch(l){Bie()||X.getLogger(this).warn(new pa("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:l}))}o||(o=new Fe({x:0,y:0,spatialReference:e}));const a=lz(new us({targetGeometry:new Fe,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const c=[i.size[0]/2,i.size[1]/2],d=[c[0]+20,c[1]],h=i.toMap([0,0],d),{x:f,y:m}=this._project(new Fe({x:h[0],y:h[1],spatialReference:i.spatialReference}),e);h[0]=f,h[1]=m,r.toScreen(h,h);const y=lDe(c,h,d),v=Math.hypot(h[0]-c[0],h[1]-c[1])/20;!Number.isFinite(v)||Math.abs(v)>4?(a.rotation=0,a.targetGeometry=new Fe({x:0,y:0,spatialReference:e})):(a.scale*=v,a.scale>H("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(y)?y:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,i){if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[e,i],uDe(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(e){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[e.x,e.y]),n=this.state.spatialReference;return new Fe({x:r,y:s,spatialReference:n})}toScreen(e,i){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),s=[r.x,r.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),ls(s[0],s[1])}_project(e,i){const r=e?.targetGeometry||e;if(!i)return e;if(!r)return null;if(i.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||Mr(i,r.spatialReference))return e;const s=Ff(r,i);if(!s)throw new R("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return jDe(e)?(e.targetGeometry=s,e):s}};function jDe(t){return t?.declaredClass==="esri.Viewpoint"}u([p({type:Fe})],tn.prototype,"center",null),u([p()],tn.prototype,"constraints",void 0),u([p({type:Pe})],tn.prototype,"extent",null),u([p({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],tn.prototype,"padding",null),u([p()],tn.prototype,"ready",void 0),u([p()],tn.prototype,"resizeAlign",void 0),u([p({readOnly:!0})],tn.prototype,"resolution",null),u([p({type:Number})],tn.prototype,"rotation",null),u([p({type:Number})],tn.prototype,"scale",null),u([p({readOnly:!0})],tn.prototype,"state",void 0),u([p({type:us})],tn.prototype,"viewpoint",null),u([p({readOnly:!0})],tn.prototype,"visibleArea",null),u([p()],tn.prototype,"zoom",null),tn=u([M("esri.views.2d.ViewStateManager")],tn);const XH=160;let fx=class extends _e{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=XH&&this.clear()},XH))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([p()],fx.prototype,"_timer",void 0),u([p()],fx.prototype,"stationary",null),fx=u([M("esri.views.2d.support.StationaryManager")],fx);const VDe=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new tn({constraints:new KH({view:this})}),this.stationaryManager=new fx,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new NDe(this),this.viewEvents=new xle(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([de(()=>this.viewpoint,()=>this.stationaryManager.flip(),lr)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const s=this._get("animation");if(r===s)return;if(s&&s.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const n=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const s=this.stateManager.constraints;this.stateManager.constraints=r,s?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:s}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=s}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return u([p({readOnly:!0})],i.prototype,"animationManager",void 0),u([p({readOnly:!0})],i.prototype,"fullOpacity",void 0),u([p()],i.prototype,"stateManager",void 0),u([p()],i.prototype,"constraintsInfo",null),u([p()],i.prototype,"extent",null),u([p({readOnly:!0})],i.prototype,"state",null),u([p({readOnly:!0})],i.prototype,"mapViewNavigation",void 0),u([p()],i.prototype,"renderingOptions",void 0),u([p({readOnly:!0})],i.prototype,"interacting",null),u([p()],i.prototype,"stationary",null),u([p()],i.prototype,"animation",null),u([p({type:KH})],i.prototype,"constraints",null),u([p()],i.prototype,"padding",null),u([p()],i.prototype,"resizeAlign",null),u([p()],i.prototype,"rotation",null),u([p({readOnly:!0})],i.prototype,"viewEvents",void 0),u([p({type:us})],i.prototype,"viewpoint",null),i=u([M("esri.views.Viewport2DBaseMixin")],i),i},UDe=()=>lt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var lw;let Xv=(lw=class extends A6{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Is(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new R("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,i){i||(i=yn(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}},lw.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},lw);u([p({readOnly:!0})],Xv.prototype,"done",null),u([p({readOnly:!0,type:String})],Xv.prototype,"state",void 0),u([p()],Xv.prototype,"target",void 0),Xv=u([M("esri.views.ViewAnimation")],Xv);const mz=Xv;let aE=class extends _e{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,i){if(!e)return void X.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new mz;this.view.animation=r,await g_(()=>this.view.ready,i);const s={...i,animate:i?.animate??(!UDe()&&this.view.animationsEnabled),animationMode:i?.animationMode??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:d,allLayerViews:h}=this.view,f=XNe(e,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:d,allLayerViews:h,pickClosestTarget:i?.pickClosestTarget??!0});return r?.update(f),this._gotoTask={},s.animate?this._gotoAnimated(f,s):this._gotoImmediate(f,s)}_gotoImmediate(e,i){const r=this._gotoTask,s=this.view.animation,n=e.then(o=>{if(Gt(i),r!==this._gotoTask)throw new R("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(e,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=e.then(o=>{if(Gt(i),r!==this._gotoTask)throw new R("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(e,i,r,s){const n=()=>e===this._gotoTask;return Oa(r,s).finally(()=>{n()&&(i.done||i.stop())})}};u([p({constructOnly:!0})],aE.prototype,"view",void 0),aE=u([M("esri.views.2d.GoToManager")],aE);function dce(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function hce(t,e){return e.some(i=>dce(t,i))}function QH(t,{dragPrimary:e,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(s=>s.value===t).map(s=>s.key)}let eW=class extends hs{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(e,i){dce(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},BDe=class extends hs{constructor(e,i,r){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:r}=i;if(r!==this.pointerType)return;e.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,c=this._startScale*l,d=c/this._currentScale;a.setViewpointImmediate(d),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:d}=l;if(!d||!c)return void a.end();const h=l.snapScale(this._currentScale),f=(n.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},M3=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},qDe=class extends hs{constructor(e,i,r){super(!0),this.view=e,this.pointerActions=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new M3({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&hce(r.data,this.pointerActions)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},GDe=class extends hs{constructor(e,i,r){super(!0),this._view=e,this.pointerActions=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new M3({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&hce(o.data,this.pointerActions)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function pce(t){const e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)}function HDe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function WDe(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function JDe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function fce(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function mce(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function yce(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function ZDe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function YDe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function KDe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function XDe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function QDe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function eFe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function tFe(t,e=0,i=1){return t[0]=Math.min(Math.max(t[0],e),i),t[1]=Math.min(Math.max(t[1],e),i),t[2]=Math.min(Math.max(t[2],e),i),t}function iFe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function gce(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function rFe(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function vce(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}function bce(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return i*i+r*r+s*s}function wce(t){const e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function sFe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function nFe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function yz(t,e){const i=e[0],r=e[1],s=e[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n),t}function _ce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function oFe(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2];return t[0]=s*l-n*a,t[1]=n*o-r*l,t[2]=r*a-s*o,t}function aFe(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],c=s*l-n*a,d=n*o-r*l,h=r*a-s*o,f=Math.sqrt(c*c+d*d+h*h);return t[0]=c/f,t[1]=d/f,t[2]=h/f,t}function lFe(t,e,i,r){const s=e[0],n=e[1],o=e[2];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t}function cFe(t,e,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,c=o*(n-1),d=o*(3-2*n);return t[0]=e[0]*a+i[0]*l+r[0]*c+s[0]*d,t[1]=e[1]*a+i[1]*l+r[1]*c+s[1]*d,t[2]=e[2]*a+i[2]*l+r[2]*c+s[2]*d,t}function uFe(t,e,i,r,s,n){const o=1-n,a=o*o,l=n*n,c=a*o,d=3*n*a,h=3*l*o,f=l*n;return t[0]=e[0]*c+i[0]*d+r[0]*h+s[0]*f,t[1]=e[1]*c+i[1]*d+r[1]*h+s[1]*f,t[2]=e[2]*c+i[2]*d+r[2]*h+s[2]*f,t}function dFe(t,e=1){const i=ZA,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=s*e,t}function hFe(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12],t[1]=i[1]*r+i[5]*s+i[9]*n+i[13],t[2]=i[2]*r+i[6]*s+i[10]*n+i[14],t}function pFe(t,e,i){const r=e[0],s=e[1],n=e[2];return t[0]=r*i[0]+s*i[3]+n*i[6],t[1]=r*i[1]+s*i[4]+n*i[7],t[2]=r*i[2]+s*i[5]+n*i[8],t}function fFe(t,e,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=e[0],l=e[1],c=e[2],d=s*c-n*l,h=n*a-r*c,f=r*l-s*a,m=s*f-n*h,y=n*d-r*f,v=r*h-s*d,b=2*o;return t[0]=a+d*b+2*m,t[1]=l+h*b+2*y,t[2]=c+f*b+2*v,t}function mFe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function yFe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function gFe(t,e,i,r){const s=[],n=[];return s[0]=e[0]-i[0],s[1]=e[1]-i[1],s[2]=e[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function vFe(t,e){yz(tW,t),yz(iW,e);const i=_ce(tW,iW);return i>1?0:i<-1?Math.PI:Math.acos(i)}const tW=Df(),iW=Df();function bFe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function wFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function _Fe(t,e){if(t===e)return!0;const i=t[0],r=t[1],s=t[2],n=e[0],o=e[1],a=e[2],l=Wn();return Math.abs(i-n)<=l*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function xFe(t,e,i){const r=i[0]-e[0],s=i[1]-e[1],n=i[2]-e[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=s*o,t[2]=n*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const SFe=fce,$Fe=mce,IFe=yce,kFe=vce,TFe=bce,EFe=pce,MFe=wce;Object.freeze(Object.defineProperty({__proto__:null,abs:KDe,add:JDe,angle:vFe,bezier:uFe,ceil:ZDe,clamp:tFe,copy:HDe,cross:oFe,crossAndNormalize:aFe,direction:xFe,dist:kFe,distance:vce,div:IFe,divide:yce,dot:_ce,equals:_Fe,exactEquals:wFe,floor:YDe,hermite:cFe,inverse:nFe,len:EFe,length:pce,lerp:lFe,max:eFe,min:QDe,mul:$Fe,multiply:mce,negate:sFe,normalize:yz,random:dFe,rotateX:mFe,rotateY:yFe,rotateZ:gFe,round:iFe,scale:gce,scaleAndAdd:rFe,set:WDe,sign:XDe,sqrDist:TFe,sqrLen:MFe,squaredDistance:bce,squaredLength:wce,str:bFe,sub:SFe,subtract:fce,transformMat3:pFe,transformMat4:hFe,transformQuat:fFe},Symbol.toStringTag,{value:"Module"}));function ul(t){let e=t*t;return t<0&&(e*=-1),e}function CFe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function PFe(t,e,i){const r=i,s=t.state,n=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=ul(s.axes[0]),r.translation[1]=ul(s.axes[1]),r.translation[2]=ul(s.buttons[7])-ul(s.buttons[6]),r.heading=ul(s.axes[2]),r.tilt=ul(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*ul(s.axes[0]),r.translation[1]=1.2*ul(s.axes[1]),r.translation[2]=2*-ul(s.axes[2]),r.heading=1.2*ul(s.axes[5]),r.tilt=1.2*ul(s.axes[3])),r.tilt*=o,gce(r.translation,r.translation,a),r}function AFe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let LFe=class extends hs{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new __,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([de(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Tw({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Fi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,CFe(this._transformation)):(this._currentDevice=e.data.device,PFe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const i=this._transformation;if(AFe(i))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=RFe*s*e;E3(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*NFe*e,a=this._view.constraints.rotationEnabled?-i.heading*OFe*e:0,l=this._view.size,c=[l[0]/2,l[1]];Xle(r,r,o,a,c,l);const d=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=d}};const OFe=.06,RFe=.7,NFe=6e-4;function xce(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Et(()=>document.removeEventListener("visibilitychange",e))}let DFe=class extends hs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=xce(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const i=this._currentDirection!=null;if(e!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},FFe=class extends hs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=xce(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const r of e)this._keyToDirection.set(r,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=s!=null,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},zFe=class extends hs{constructor(e,i,r){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=0),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case 0:o=n.zoomIn();break;case 1:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),e.stopPropagation()}};const jFe=.6;let VFe=class extends hs{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=e.data,o=1/jFe**(1/60*n),a=i.zoom(o,[r,s]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()})}},UFe=class extends hs{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new M3({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function rW(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value||1:0),axes:e.axes.map(i=>GFe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function BFe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function qFe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function GFe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let HFe=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,rW(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(sW(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new s8(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Tw({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;sW(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=rW(n),l=r||qFe(a);o&&(o.timestamp===s.timestamp||!o.active&&l||BFe(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(e,i,r){const s=this._latestUpdate[e.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}};function WFe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function sW(t){for(const e of navigator.getGamepads())WFe(e)&&t(e)}const nW=H("edge"),JFe=H("chrome"),ZFe=H("ff"),YFe=H("safari"),oW="esri-view-surface",av={touchNone:`${oW}--touch-none`,touchPan:`${oW}--touch-pan`};var Oy;let KFe=(Oy=class{constructor(e,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new HFe(e,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=bi(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const r=this._active[i];this._element.removeEventListener(OO[i],r),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&OO[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(OO[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,i){i?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?av.touchNone:av.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?av.touchPan:av.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(av.touchNone),this._element.classList.remove(av.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const r=$le(this._element,e);return Oy.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(e,i){const{key:r}=i;r&&e==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&H("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:nW&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}nW?r*=.7:JFe||YFe?r*=.6:ZFe&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const r={native:i};i.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},Oy.test={disableSubpixelCoordinates:!1},Oy);const OO={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let XFe=class extends hs{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const Sce=()=>({maximumClickDelay:300}),QFe=(t={})=>({...Sce(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),y8=(t={})=>({...Sce(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function fC(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function e5e(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}function t5e(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:ls()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[S,$]=t,[T,C]=[$.x-S.x,$.y-S.y];return e.radius=Math.sqrt(T*T+C*C)/2,e.center.x=(S.x+$.x)/2,e.center.y=(S.y+$.y)/2,e}let i=0,r=0;for(let S=0;S<t.length;S++)i+=t[S].x,r+=t[S].y;i/=t.length,r/=t.length;const s=t.map(S=>S.x-i),n=t.map(S=>S.y-r);let o=0,a=0,l=0,c=0,d=0,h=0,f=0;for(let S=0;S<s.length;S++){const $=s[S],T=n[S],C=$*$,L=T*T;o+=C,a+=L,l+=$*T,c+=C*$,d+=L*T,h+=$*L,f+=T*C}const m=.5*(c+h),y=.5*(d+f),v=o*a-l*l,b=(m*a-y*l)/v,w=(o*y-l*m)/v,x=ls(b+i,w+r);return{radius:Math.sqrt(b*b+w*w+(o+a)/t.length),center:x}}function Ty(t){const{native:e}=t,{pointerId:i,button:r,pointerType:s}=e;return s==="mouse"?`${i}:${r}`:`${s}`}let i5e=class extends hs{constructor(e={},i=f_){super(!1),this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=ls(0,0),this._pointerState=new Map,this._parameters=y8(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new M3({start:(r,s)=>this._dragStart(r,s),update:(r,s)=>this._dragUpdate(s),end:(r,s)=>this._dragEnd(s)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=_i(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=_i(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=RO("begin",ls(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=RO("update",ls(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=e,{center:s}=i,n=RO("end",ls(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,r=Ty(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),fC(s.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:r}=i.native,s=Ty(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function RO(t,e,i){const{button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=i;return{action:t,delta:e,button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let r5e=class extends hs{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,r,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:s5e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const i=e.native.pointerId,r=VI(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=lE(s,$ce(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,r=this._activePointerMap.get(i);r?r.event=e:this._addPointer(e)}_removePointer(e){const i=VI(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=VI(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=lE(r,i)-e,r.lastAngle=lE(r,i)-e})}_emitEvent(e,i,r){const s=VI(this._activePointerMap);this._drag.emit(this._createPayload(e,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,r=i.currentEvent,s=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function $ce(t){const e=[];return t.forEach(i=>{e.push(ls(i.event.x,i.event.y))}),t5e(e)}function VI(t){const e=$ce(t);let i=0;return t.forEach(r=>{let s=lE(r,e),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function s5e(t){const e=new Map;return t.forEach((i,r)=>e.set(r,i.event)),e}function lE(t,e){const i=t.event,r=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,r)}let n5e=class extends hs{constructor(e={},i=f_){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=y8(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=Ty(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,r=Ty(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),fC(n,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(i))):fC(s,e.data)>o?this._removeState(i):this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,i){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const i=Ty(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},o5e=class extends hs{constructor(e={},i=f_){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=QFe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=_i(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(UI("update",s,i),void 0,s.modifiers):e5e(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),s.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const i=e.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(UI("start",s,i)):this._pointerDrag.emit(UI("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const r=e.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(UI("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&e.timestamp-n.startTimestamp<=this._parameters.maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function UI(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}let a5e=class extends hs{constructor(e={},i=f_){super(!1),this._clock=i,this._pointerState=new Map,this._parameters=y8(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=_i(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,i){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=_i(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const i=e.data,{pointerType:r}=i.native,s=l5e(i);if(!this._pointerState.has(s))return void this._startClick(e);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;fC(o,i)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=Ty(e.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:r}}=i,s=Ty(i),n=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function l5e(t){const{pointerId:e,pointerType:i,button:r}=t.native;return i==="mouse"?`${e}:${r}`:`${i}`}const BI={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},aW=Symbol("handles");let Qv=class extends _e{initialize(){const e=()=>this.view?.ready;this.addHandles([Ts(()=>!e(),()=>this._disconnect()),Ts(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(aW),this._inputManager=bi(this._inputManager)}_connect(){const e=this.view.surface,i=new KFe(e,this.view.input),r=[new n5e,new o5e,new a5e,new r5e(this.view.navigation),new i5e],s=new gl({eventSource:i,recognizers:r}),n=new qDe(this.view,["primary"]),o=new GDe(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new XFe],uh.INTERNAL),s.installHandlers("navigation",[new UFe(this.view),new LFe(this.view),new VFe(this.view),new eW(this.view),new eW(this.view,[BI.counter]),n,new DFe(this.view,BI.pan),new zFe(this.view,BI.zoom),new FFe(this.view,BI.rotate),o,new BDe(this.view,"touch")],uh.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,this.addHandles([de(()=>this.view?.navigation?.browserTouchPanEnabled,a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},Fi),de(()=>{const{actionMap:a}=this.view.navigation;return{panActions:QH("pan",a),rotateActions:QH("rotate",a)}},({panActions:a,rotateActions:l})=>{n.pointerActions=a,o.pointerActions=l},Vs)],aW)}get test(){}};u([p()],Qv.prototype,"view",void 0),u([p()],Qv.prototype,"latestPointerInfo",null),u([p()],Qv.prototype,"multiTouchActive",null),Qv=u([M("esri.views.2d.input.MapViewInputManager")],Qv);const c5e=Qv,u5e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToManager=new aE({view:this}),this.animationsEnabled=!0,this.inputManager=new c5e({view:this}),this.addHandles([this.on("resize",s=>this.stateManager.resize(s.width,s.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,s,n,o){return this.viewEvents.on(r,s,n,o)||super.on(r,s)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,s){return this.goToManager.goTo(r,s)}toMap(r){if(!this.ready)return null;const s=kle(r)?Ile(this,r):r;return this.stateManager.toMap(s)}};return u([p()],i.prototype,"goToManager",void 0),u([p({readOnly:!0})],i.prototype,"interacting",null),u([p()],i.prototype,"stationary",null),u([p()],i.prototype,"animationsEnabled",void 0),u([p({readOnly:!0})],i.prototype,"inputManager",void 0),i=u([M("esri.views.Viewport2DMixin")],i),i};let lW=class{constructor(e){this._view=e,this.viewpoint=new us({targetGeometry:new Fe,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,i]=this._view.size;return Math.sqrt(e*e+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Yle(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,i){i.pan=are(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=x_(r),i.sourceZoom=this.scale,i.targetZoom=e.scale}interpolate(e,i,r){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=U1(e.center.x,i.center.x,s),l.y=U1(e.center.y,i.center.y,s),this.viewpoint.scale=U1(e.scale,i.scale+a,o);let c=e.rotation;const d=i.rotation;Math.abs(d-c)>=180&&(c+=360*(c<d?1:-1)),this.viewpoint.rotation=U1(c,d,n)}copyFrom(e){fn(this.viewpoint,e.viewpoint),this._view=e.view}};function eb(t,e,i,r){const s=3*t,n=3*(i-t)-s,o=1-s-n,a=3*e,l=3*(r-e)-a,c=1-a-l;function d(y){return((o*y+n)*y+s)*y}function h(y){return((c*y+l)*y+a)*y}function f(y){return(3*o*y+2*n)*y+s}function m(y,v){let b,w,x,S,$,T;for(x=y,T=0;T<8;T++){if(S=d(x)-y,Math.abs(S)<v)return x;if($=f(x),Math.abs($)<1e-6)break;x-=S/$}if(b=0,w=1,x=y,x<b)return b;if(x>w)return w;for(;b<w;){if(S=d(x),Math.abs(S-y)<v)return x;y>S?b=x:w=x,x=.5*(w-b)+b}return x}return function(y,v=1e-6){return h(m(y,v))}}const Fa={};Fa.ease=eb(.25,.1,.25,1),Fa.linear=eb(0,0,1,1),Fa.easeIn=Fa["ease-in"]=eb(.42,0,1,1),Fa.easeOut=Fa["ease-out"]=eb(0,0,.58,1),Fa.easeInOut=Fa["ease-in-out"]=eb(.42,0,.58,1);const d5e=t=>t,E$=t=>t*t,mC=t=>1-E$(1-t),cW=t=>t<.5?E$(2*t)/2:(mC(2*(t-.5))+1)/2,yC=t=>t*t*t,gz=t=>1-yC(1-t),uW=t=>t<.5?yC(2*t)/2:(gz(2*(t-.5))+1)/2,gC=t=>t*t*t*t,vz=t=>1-gC(1-t),dW=t=>t<.5?gC(2*t)/2:(vz(2*(t-.5))+1)/2,vC=t=>t*t*t*t*t,bz=t=>1-vC(1-t),hW=t=>t<.5?vC(2*t)/2:(bz(2*(t-.5))+1)/2,bC=t=>1-Math.cos(t*Math.PI/2),wz=t=>1-bC(1-t),pW=t=>t<.5?bC(2*t)/2:(wz(2*(t-.5))+1)/2,wC=t=>2**(10*(t-1)),_C=t=>1-wC(1-t),fW=t=>t<.5?wC(2*t)/2:(_C(2*(t-.5))+1)/2,xC=t=>-(Math.sqrt(1-t*t)-1),_z=t=>1-xC(1-t),mW=t=>t<.5?xC(2*t)/2:(_z(2*(t-.5))+1)/2;function el(t){const e=2*(t-Math.sqrt((t-1)*t)),i=e/2/t;return r=>r<i?t*r*r:e*r-e+1}function tl(t,e){return(i,r)=>i<e?e*t(i/e,r):1-t((1-i)/(1-e),r)*(1-e)}const yW=tl(el(1),1),gW=tl(el(1),0),SC=tl(el(1),.5),vW=tl(el(2),1),bW=tl(el(2),0),wW=tl(el(2),.5),_W=tl(el(3),1),xW=tl(el(3),0),SW=tl(el(3),.5),$W=tl(el(4),1),IW=tl(el(4),0),kW=tl(el(4),.5),TW={linear:d5e,"in-quad":E$,"out-quad":mC,"in-out-quad":cW,"in-coast-quad":yW,"out-coast-quad":gW,"in-out-coast-quad":SC,"in-cubic":yC,"out-cubic":gz,"in-out-cubic":uW,"in-coast-cubic":vW,"out-coast-cubic":bW,"in-out-coast-cubic":wW,"in-quart":gC,"out-quart":vz,"in-out-quart":dW,"in-coast-quart":_W,"out-coast-quart":xW,"in-out-coast-quart":SW,"in-quint":vC,"out-quint":bz,"in-out-quint":hW,"in-coast-quint":$W,"out-coast-quint":IW,"in-out-coast-quint":kW,"in-sine":bC,"out-sine":wz,"in-out-sine":pW,"in-expo":wC,"out-expo":_C,"in-out-expo":fW,"in-circ":xC,"out-circ":_z,"in-out-circ":mW,"quad-in":E$,"quad-out":mC,"quad-in-out":cW,"quad-in-coast":yW,"quad-out-coast":gW,"quad-in-out-coast":SC,"cubic-in":yC,"cubic-out":gz,"cubic-in-out":uW,"cubic-in-coast":vW,"cubic-out-coast":bW,"cubic-in-out-coast":wW,"quart-in":gC,"quart-out":vz,"quart-in-out":dW,"quart-in-coast":_W,"quart-out-coast":xW,"quart-in-out-coast":SW,"quint-in":vC,"quint-out":bz,"quint-in-out":hW,"quint-in-coast":$W,"quint-out-coast":IW,"quint-in-out-coast":kW,"sine-in":bC,"sine-out":wz,"sine-in-out":pW,"expo-in":wC,"expo-out":_C,"expo-in-out":fW,"circ-in":xC,"circ-out":_z,"circ-in-out":mW,ease:t=>Fa.ease(t),"ease-in":t=>Fa.easeIn(t),"ease-out":t=>Fa.easeOut(t),"ease-in-out":t=>Fa.easeInOut(t)};let h5e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const $C={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Ice={maxDuration:4e3};let p5e=class kce{constructor(e){this._createCamera=e,this.compared=new h5e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:$C.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new kce(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,i,r){this.source!==e&&this.source.copyFrom(e),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??$C.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const i=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Wn()}get hasFov(){return Math.abs(this.compared.fov)>Wn()}get hasRotate(){return this.compared.rotate>Wn()}},f5e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},m5e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,i)=>e+i.time,0)}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+c.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+c.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:d,targetZoom:h}=c.compared,f=i.zoom*(h-d)+d,m=this.segments[0].definition.compared.sourceZoom,y=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(h-m)>Math.abs(d-m)?h:d;i.zoomOffset=v-y,i.zoom=(f-m)/(v-m)}else i.zoom=1;return i}e-=l.time,r+=c.compared.pan,s+=c.compared.rotate}}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r)}},NO=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,i=e.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*e.source.pixelsPerPanAtZoom(r);const n=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;r&&(s&&(o=(i/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(e/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&s&&n){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&s){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&n){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(s&&n){const c=this._panPixelsAtSource/this._rotatePixels,d=1+c;this._panPixelFlow=c/d*l,this._rotatePixelFlow=1/d*l}else s?this._panPixelFlow=l:r?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/y5e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=e*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-e-i)/(r-i)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+e*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*e*this._time)-1))/(i*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,i){e=Math.min(Math.max(e,0),1),i.zoom=this._interpolateComponentsZoom(e),i.pan=this._interpolateComponentsPan(e),i.rotate=this._interpolateComponentsRotate(e),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(e)}};const y5e=x_(45);function g5e(t,e,i){const r=e-t.compared.sourceZoom,s=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(i.ascensionFactor*Math.LN2*t.compared.pan+s)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*s)}function v5e(t,e,i){const r=1/e,s=Math.log(t.compared.sourceZoom*r),n=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*n*o*l*c-t.halfWindowSize*s*n*o*l+t.halfWindowSize*s*n*o*c/(a*a)}function b5e(t,e,i){const r=e-t.compared.sourceZoom,s=1/r,n=1/e,o=Math.log(t.compared.sourceZoom*n),a=(i.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function w5e(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function _5e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function x5e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function S5e(t,e,i){return-t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function $5e(t,e,i){return t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function I5e(t,e,i){return-2*t.compared.pan*t.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function k5e(t,e,i){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function T5e(t,e,i){const r=Math.log(e/t.compared.targetZoom),s=1/t.desiredPixelFlow,n=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-i.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*s*n*a+t.halfWindowSize*r*s*n*l/(o*o)+t.halfWindowSize*s*n*a*l/e}function E5e(t,e,i){const r=e-t.compared.targetZoom,s=1/r,n=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+i.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function M5e(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function C5e(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function P5e(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function A5e(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const i=Math.LN2*t.compared.pan,r=e,s=t.halfWindowPanAtZoom(r),n=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*s);return t.compared.sourceZoom<=t.compared.targetZoom?n*(i-s):n*(i+s)}function L5e(t,e){let i=O5e(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,o=s?w5e:g5e,a=s?_5e:v5e,l=s?x5e:b5e,c=n?M5e:k5e,d=n?C5e:T5e,h=n?P5e:E5e,f=T=>o(t,T,r)+S5e(t,T,r)+c(t,T,r),m=T=>a(t,T,r)+$5e(t,T,r)+d(t,T,r),y=T=>l(t,T,r)+I5e(t,T,r)+h(t,T,r);let v=f(i);const b=A5e(t);let w;const x=e.maximumIterations||20,S=e.maximumDistance!=null?e.maximumDistance:1/0;for(w=0;w<x;w++){const T=e.desiredSlope??1e-6;let C=m(i);Math.abs(C)>T&&(C+=T);const L=C/y(i);if(isNaN(L)||i>=S&&L<0){if(!isFinite(S))return null;i=S,v=f(i);break}if(i-=L,i<=t.compared.sourceZoom||i<=t.compared.targetZoom)return null;const N=f(i);if(Math.abs(N-v)/v<=.005)break;v=N}return isNaN(v)||v>b*(1-.3)||i<=t.compared.sourceZoom||i<=t.compared.targetZoom?null:i}function O5e(t,e){const i=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<i?e.maximumDistance!=null?i+(e.maximumDistance-i)/2:1.5*i:e.maximumDistance?Math.min(e.maximumDistance,r):r}let R5e=class extends m5e{constructor(e,i){super(),this._preallocSegments=[new NO,new NO,new NO],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,i)}update(e,i){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=i?.apex?L5e(e,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,i,r){e.interpolateComponentsAt(i,r),e===this._ascensionSegment?r.zoom=mC(r.zoom):e===this._descensionSegment&&(r.zoom=E$(r.zoom))}_updateWithApex(e,i){const[r,s,n]=this._preallocSegments,o=i?.ascensionFactor??.5,a=Math.min(1-o,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=e,s.definition.compared.targetZoom=e,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=e,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const N5e=new f5e;let D5e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=SC,this.definition=new p5e(e),this.path=new R5e}update(e,i,r){this.definition.update(e,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(W_e(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?SC:_C)}cameraAt(e,i){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,N5e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-i)/(r-i)}_applyTimeSettings(e,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??$C.minDuration/r,n=i.maxDuration??$C.maxDuration/r;return e=i.duration!=null?i.duration:Math.min(Math.max(e/r,s),n)}};const F5e=2e3,z5e=64;let j5e=class{constructor(e){this._view=e,this._animation=new D5e(()=>new lW(this._view)),this._current=new lW(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,i,r={}){fn(this._current.viewpoint,e),fn(this._source.viewpoint,e),fn(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(e,i){this._animation.cameraAt(i,this._current),fn(e,this._current.viewpoint)}},tb=class extends _e{constructor(e){super(e),this._animation=null,this._destinationViewState=new f8,this.updateFunction=null,this.easing=TW.ease,this.viewpoint=new us({targetGeometry:new Fe,scale:0,rotation:0}),this._updateTask=Tw({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new j5e(e.view)}destroy(){this._updateTask=_i(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,i,r){this.stop();const s=this.viewpoint;fn(s,i);const n=e.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(i.scale,n.scale)*z5e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??Ice.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?TW[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,V5e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const r=new mz({target:e.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const i=this.animation;if(i&&i.state!==mz.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,s=this._transition.duration,n=s>0?r/s:1,o=n>=1;this._transition.applyRatio(this.viewpoint,n),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function V5e(t,e,i,r){if(e?.duration!=null)return!0;const{time:s,isLinear:n}=t,o=e?.speedFactor||1;if(s>(e?.maxDuration??Ice.maxDuration/o))return!1;if(n){const l=ur(),c=ls(...r.toScreen(l,...i.center)),d=ls(...i.toScreen(l,...r.center)),h=d!=null&&d.x>-1*i.size[0]&&d.x<(1.5+.5)*i.size[0]&&d.y>-1*i.size[1]&&d.y<(1.5+.5)*i.size[1],f=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(s>F5e/o&&!h&&!f)return!1}return!0}u([p()],tb.prototype,"easing",void 0),u([p()],tb.prototype,"view",void 0),u([p()],tb.prototype,"viewpoint",void 0),tb=u([M("esri.views.2d.AnimationManager")],tb);const U5e=tb;function $i(){return Promise.all([K(()=>import("./webglDeps-DoRE9HE8.js"),__vite__mapDeps([164,122,165,166,167])),K(()=>import("./mapViewDeps-BbgrU6lf.js"),__vite__mapDeps([168,169,170,122,165,166,113,55,171,57,167,121,172,54,78,173,103,105,58,63,174,60,61,164,175,73,176,177,178,111,112,53,56,14,13,179,62,180,59,128,129,68,181,64,70,182,51,183,184,185,186,118,187,188]))])}const y1=()=>$i().then(()=>K(()=>import("./TileLayerView2D-DG4MSdXR.js"),__vite__mapDeps([189,173,172,54,166,167,121,122,78,103,105,175,170,165,113,171,57,73,176,177,169,55,58,63,60,61,111,112,181,53,56,14,13,64,70,182,51,190,191,192,186,193,141,194,184,185,195,196,197,198,199,200]))),Yf=()=>$i().then(()=>K(()=>import("./FeatureLayerView2D-Bzo3579A.js").then(t=>t.F),__vite__mapDeps([201,182,202,203,204,14,21,193,173,141,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,73,71,64,174,205,126,23,66,199,195,196,200]))),EW={"base-dynamic":()=>$i().then(()=>K(()=>import("./BaseDynamicLayerView2D-M4w3SZzx.js"),__vite__mapDeps([206,207,172,54,166,167,121,122,78,173,103,105,191,170,165,113,192,193,141,208,195,196]))),"base-tile":y1,"bing-maps":y1,catalog:()=>$i().then(()=>K(()=>import("./CatalogLayerView2D-BXqY49wx.js"),__vite__mapDeps([209,193,173,141,195]))),"catalog-dynamic-group":()=>$i().then(()=>K(()=>import("./CatalogDynamicGroupLayerView2D-CHiObe8O.js"),__vite__mapDeps([210,193,173,141,195]))),"catalog-footprint":()=>$i().then(()=>K(()=>import("./CatalogFootprintLayerView2D-D8YGpSPO.js"),__vite__mapDeps([211,201,182,202,203,204,14,21,193,173,141,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,73,71,64,174,205,126,23,66,199,195,196,200]))),csv:Yf,"geo-rss":()=>$i().then(()=>K(()=>import("./GeoRSSLayerView2D-D7Y7NUpD.js"),__vite__mapDeps([212,193,173,141,183,184,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,181,53,56,14,13,64,70,182,51,195]))),feature:Yf,geojson:Yf,parquet:Yf,graphics:()=>$i().then(()=>K(()=>import("./GraphicsLayerView2D-GCGuyI5i.js"),__vite__mapDeps([213,193,173,141,183,184,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,181,53,56,14,13,64,70,182,51,195,200]))),group:()=>$i().then(()=>K(()=>import("./GroupLayerView2D-obGSQLBu.js"),__vite__mapDeps([214,193,173,141,195]))),imagery:()=>$i().then(()=>K(()=>import("./ImageryLayerView2D-D0SRoLbi.js"),__vite__mapDeps([215,216,167,121,122,92,172,54,166,78,173,103,105,87,85,193,141,181,53,55,56,57,14,13,169,170,165,113,171,58,63,64,70,182,51,194,184,185,186,207,191,192,208,90,162,202,199,195,196,200]))),"imagery-tile":()=>$i().then(()=>K(()=>import("./ImageryTileLayerView2D-BNqSkowk.js"),__vite__mapDeps([217,218,216,167,121,122,92,172,54,166,78,173,103,105,87,85,193,141,89,219,186,170,165,113,180,171,57,192,220,90,200,162,202,199,195,196]))),kml:()=>$i().then(()=>K(()=>import("./KMLLayerView2D-B8fidfpM.js"),__vite__mapDeps([221,222,191,173,170,122,165,166,113,192,207,172,54,167,121,78,103,105,193,141,183,184,185,55,186,169,171,57,58,63,181,53,56,14,13,64,70,182,51,195,128,129,68,90,178,164,111,112,176,219]))),"knowledge-graph":()=>$i().then(()=>K(()=>import("./KnowledgeGraphLayerView2D-CLmJmD0O.js"),__vite__mapDeps([223,193,173,141,195]))),"link-chart":()=>$i().then(()=>K(()=>import("./KnowledgeGraphLayerView2D-CLmJmD0O.js"),__vite__mapDeps([223,193,173,141,195]))),"knowledge-graph-sublayer":Yf,"map-image":()=>$i().then(()=>K(()=>import("./MapImageLayerView2D-CTuNeTFu.js"),__vite__mapDeps([224,207,172,54,166,167,121,122,78,173,103,105,191,170,165,113,192,193,141,181,53,55,56,57,14,13,169,171,58,63,64,70,182,51,194,184,185,186,208,195,202,196,197,198,199,200]))),"map-notes":()=>$i().then(()=>K(()=>import("./MapNotesLayerView2D-oGOmI-_n.js"),__vite__mapDeps([225,193,173,141,183,184,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,181,53,56,14,13,64,70,182,51,195,200]))),media:()=>$i().then(()=>K(()=>import("./MediaLayerView2D-CEc_J5Ys.js"),__vite__mapDeps([226,227,70,173,172,54,166,167,121,122,78,103,105,175,170,165,113,171,57,73,176,177,169,55,58,63,60,61,111,112,181,53,56,14,13,64,182,51,179,62,228,180,193,141,195]))),"ogc-feature":()=>$i().then(()=>K(()=>import("./OGCFeatureLayerView2D-rLsEC2oY.js"),__vite__mapDeps([229,201,182,202,203,204,14,21,193,173,141,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,73,71,64,174,205,126,23,66,199,195,196,200]))),"open-street-map":y1,"oriented-imagery":Yf,route:()=>$i().then(()=>K(()=>import("./RouteLayerView2D-BuqxZHFq.js"),__vite__mapDeps([230,231,232,193,173,141,183,184,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,181,53,56,14,13,64,70,182,51,195,200]))),stream:()=>$i().then(()=>K(()=>import("./StreamLayerView2D-B7mwdFKU.js"),__vite__mapDeps([233,201,182,202,203,204,14,21,193,173,141,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,73,71,64,174,205,126,23,66,199,195,196,200]))),"subtype-group":()=>$i().then(()=>K(()=>import("./SubtypeGroupLayerView2D-D0anllUQ.js"),__vite__mapDeps([234,201,182,202,203,204,14,21,193,173,141,185,55,54,165,122,186,172,166,167,121,78,103,105,169,170,113,171,57,58,63,73,71,64,174,205,126,23,66,199,195,196,200]))),tile:y1,"vector-tile":()=>$i().then(()=>K(()=>import("./VectorTileLayerView2D-10PKspaY.js"),__vite__mapDeps([235,177,103,122,167,121,172,54,166,78,173,105,186,12,104,193,141,195,196]))),video:()=>$i().then(()=>K(()=>import("./VideoLayerView2D-DIdxy6J9.js"),__vite__mapDeps([236,237,238,228,78,172,54,166,167,121,122,173,103,105,169,170,165,113,55,171,57,58,63,180,239,193,141,183,184,185,186,181,53,56,14,13,64,70,182,51,195]))),wcs:()=>$i().then(()=>K(()=>import("./ImageryTileLayerView2D-BNqSkowk.js"),__vite__mapDeps([217,218,216,167,121,122,92,172,54,166,78,173,103,105,87,85,193,141,89,219,186,170,165,113,180,171,57,192,220,90,200,162,202,199,195,196]))),"web-tile":y1,wfs:Yf,wms:()=>$i().then(()=>K(()=>import("./WMSLayerView2D-tDA7MbAT.js"),__vite__mapDeps([240,207,172,54,166,167,121,122,78,173,103,105,191,170,165,113,192,193,141,208,195,196,202]))),wmts:()=>$i().then(()=>K(()=>import("./WMTSLayerView2D-LayfdtoK.js"),__vite__mapDeps([241,190,191,173,170,122,165,166,113,192,172,54,167,121,78,103,105,186,193,141,195,196]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function B5e(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new R(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const MW={hasLayerViewModule:t=>EW[t.type]!=null,importLayerView:t=>{const e=EW[t.type];if(e==null)throw B5e(t);return e(t)}};var ea;let qf=(ea=class{static getId(e,i,r,s){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${r}/${s}`}constructor(e,i,r,s){this.set(e,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|e<<8|r}acquire(e,i,r,s){this.set(e,i,r,s)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}containsChild(e){const i=e.level-this.level;return i>0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new ea(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,r,s){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[n,o,a,l]=e.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ea(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,i,r){const s=this.clone();return s.col+=e,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const e=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new ea(e,i,r,s),new ea(e,i,r+1,s),new ea(e,i+1,r,s),new ea(e,i+1,r+1,s)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},ea.pool=new Nf(()=>new ea(""),null,null,25,50),ea);function lv(t,e){return[t,e]}function Kf(t,e,i){return t[0]=e,t[1]=i,t}function q5e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}const dl=new qf("0/0/0/0");let G5e=class Tce{static create(e,i,r=null){const s=Hn(e.spatialReference),n=i.origin||lv(e.origin.x,e.origin.y),o=lv(e.size[0]*i.resolution,e.size[1]*i.resolution),a=lv(-1/0,-1/0),l=lv(1/0,1/0),c=lv(1/0,1/0);r!=null&&(Kf(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),Kf(l,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),Kf(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:d,rows:h}=i;let f,m,y,v;return!r&&d&&h&&(Kf(a,d[0],h[0]),Kf(l,d[1],h[1]),Kf(c,d[1]-d[0]+1,h[1]-h[0]+1)),e.isWrappable?(f=lv(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/e.size[0]),c[1]),m=!0,y=s.origin,v=s.valid):(f=c,m=!1),new Tce(i.level,i.resolution,i.scale,n,a,l,c,o,f,m,y,v)}constructor(e,i,r,s,n,o,a,l,c,d,h,f){this.level=e,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=d,this._spatialReferenceOrigin=h,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}normalizeKey(e){if(!this.wrap)return;const i=this.worldSize[0],r=e.col;r<0?(e.col=r+i,e.world-=1):r>=i&&(e.col=r-i,e.world+=1)}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const i=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?s[1]:i:i}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,r=!1){dl.set(i);const s=r?dl.col:this.denormalizeCol(dl.col,dl.world),n=dl.row;return q5e(e,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),e}getTileCoords(e,i,r=!1){dl.set(i);const s=r?dl.col:this.denormalizeCol(dl.col,dl.world);return Array.isArray(e)?Kf(e,this.getXForColumn(s),this.getYForRow(dl.row)):(e.x=this.getXForColumn(s),e.y=this.getYForRow(dl.row)),e}};var Ry;let g8=(Ry=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const o=e.getWorldForColumn(n);yield new qf(e.level,i,e.normalizeCol(n),o)}}forEach(e,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(i,n,o,s.normalizeCol(c),s.getWorldForColumn(c))}},Ry.pool=new Nf(()=>new Ry),Ry),DO=class{constructor(e,i,r){this.row=e,this.colFrom=i,this.colTo=r}};const Ci=new qf("0/0/0/0");let H5e=class Ece{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[r,s]=e,[n,o]=i,a=n-r,l=o-s,c=l!==0?a/l:0,d=(Math.ceil(s)-s)*c,h=(Math.floor(s)-s)*c;return new Ece(r,Math.floor(s),Math.ceil(o),c,a<0?d:h,a<0?h:d,a<0?n:r,a<0?r:n)}constructor(e,i,r,s,n,o,a,l){this.x=e,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Co=[[0,0],[0,0],[0,0],[0,0]],W5e=1e-6;let J5e=class{constructor(e,i=null,r=e.lods[0].level,s=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.filter(a=>a.level>=r&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>G5e.create(e,a,i));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,r=!1){Ci.set(i);const s=this._infoByLevel[Ci.level];return s?s.getTileBounds(e,Ci,r):e}getTileCoords(e,i,r=!1){Ci.set(i);const s=this._infoByLevel[Ci.level];return s?s.getTileCoords(e,Ci,r):e}getTileCoverage(e,i=192,r=!0,s="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=g8.pool.acquire(n),a=this._wrap;let l,c,d,h=1/0,f=-1/0;const m=o.spans;Co[0][0]=Co[0][1]=Co[1][1]=Co[3][0]=-i,Co[1][0]=Co[2][0]=e.size[0]+i,Co[2][1]=Co[3][1]=e.size[1]+i;for(const w of Co)e.toMap(w,w),w[0]=n.getColumnForX(w[0]),w[1]=n.getRowForY(w[1]);const y=[];let v=3;for(let w=0;w<4;w++){if(Co[w][1]===Co[v][1]){v=w;continue}const x=H5e.create(Co[w],Co[v]);h=Math.min(x.ymin,h),f=Math.max(x.ymax,f),y[x.ymin]===void 0&&(y[x.ymin]=[]),y[x.ymin].push(x),v=w}if(h==null||f==null||f-h>100)return null;let b=[];for(l=h;l<f;){y[l]!=null&&(b=b.concat(y[l])),c=1/0,d=-1/0;for(let w=b.length-1;w>=0;w--){const x=b[w];c=Math.min(c,x.getLeftCol()),d=Math.max(d,x.getRightCol())}if(c=Math.floor(c),d=Math.floor(d),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const w=Math.floor(d/n.worldSize[0]);for(let x=Math.floor(c/n.worldSize[0]);x<=w;x++)m.push(new DO(l,Math.max(n.getFirstColumnForWorld(x),c),Math.min(n.getLastColumnForWorld(x),d)))}else m.push(new DO(l,c,d));else c>n.last[0]||d<n.first[0]||(c=Math.max(c,n.first[0]),d=Math.min(d,n.last[0]),m.push(new DO(l,c,d)));l+=1;for(let w=b.length-1;w>=0;w--){const x=b[w];x.ymax>=l?x.incrRow():b.splice(w,1)}}return o}getTileParentId(e){Ci.set(e);const i=this._infoByLevel[Ci.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ci,this._lodInfos[r],Ci),Ci.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){Ci.set(i);const r=this._infoByLevel[Ci.level],s=e.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(Ci,s,Ci);const o=s.denormalizeCol(Ci.col,Ci.world);for(const a of e.spans)if(a.row===Ci.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((v,b)=>(v[0]=Math.min(v[0],b.row),v[1]=Math.max(v[1],b.row),v[2]=Math.min(v[2],b.colFrom),v[3]=Math.max(v[3],b.colTo),v),[1/0,-1/0,1/0,-1/0]),d=r.denormalizeCol(Ci.col,Ci.world),h=s.getColumnForX(r.getXForColumn(d)),f=s.getRowForY(r.getYForRow(Ci.row)),m=s.getColumnForX(r.getXForColumn(d+1))-1,y=s.getRowForY(r.getYForRow(Ci.row+1))-1;return!(h>c||m<l||f>a||y<o)}const n=s.denormalizeCol(Ci.col,Ci.world);return e.spans.some(o=>o.row===Ci.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(e,i,r){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const s=Hn(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);e[0]+=n,e[2]+=n}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(e>i[r]+W5e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=i.length-1;r>=0;r--)if(e<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-e)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,i,r){const s=this._infoByLevel[r.level];return e.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(e.level=i.level,e.col=Math.floor(r.col*s.resolution/i.resolution+.01),e.row=Math.floor(r.row*s.resolution/i.resolution+.01)),e)}},Z5e=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},Y5e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new I0,this._controllers=new I0,this._processingItems=new I0,this._pausedSignal=kw(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new g$(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&i&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=_i(this._schedule),this._task=_i(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,r)=>e(r))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,i){const r=this.get(e);if(r)return r;const s=new AbortController;let n=null;i&&(n=as(i,()=>s.abort()));const o=()=>{const d=this._processingItems.get(e);d&&d.controller.abort(),a(),c.reject(jt())},a=()=>{l.remove(),n?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=hU(s.signal,o),c=Is();return this._deferreds.set(e,c),this._controllers.set(e,s),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(jt()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=y_(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let i;const r=new AbortController,s=new Z5e(e,r);this._processingItems.set(e,s);try{i=this.process(e,r.signal)}catch(n){this._processError(s,n)}yn(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){}};const CW=[0,0];let dd=class extends _e{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:i,scheduler:r,priority:s}=this;this._queue=new Y5e({concurrency:e,scheduler:r,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return i(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=bi(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(e.key),n=Ch(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(e.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(e.key),this._keyToItem.set(i,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const i=new Set;for(const o of e)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(Tte(a,l=>i.has(l))){const l=Math.abs(o-r);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,e).id}_getClosestTileKey(e,i){const r=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of e)if(i.has(a.id)){r.getTileCoords(CW,a);const l=YA(CW,s);l<o&&(o=l,n=a)}return n}};u([p({constructOnly:!0})],dd.prototype,"concurrency",void 0),u([p({constructOnly:!0})],dd.prototype,"priority",void 0),u([p({constructOnly:!0})],dd.prototype,"process",void 0),u([p({constructOnly:!0})],dd.prototype,"scheduler",void 0),u([p()],dd.prototype,"state",void 0),u([p({constructOnly:!0})],dd.prototype,"tileInfoView",void 0),dd=u([M("esri.views.2d.tiling.TileQueue")],dd);const cgt=dd;let K5e=class{constructor(e,i,r){this.maxSize=e,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];PW(this._tilePerId,e);for(let n=0;n<s.length;n++)if(s[n].id===e){s.splice(n,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(e,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==e&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,e))}_pruneAroundCenterTile(e,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],d=[0,0],h=[0,0];for(n.sort((f,m)=>(d[0]=a.x+l*(f.col+.5),d[1]=a.y-c*(f.row+.5),h[0]=a.x+l*(m.col+.5),h[1]=a.y-c*(m.row+.5),f$(d,i)-f$(h,i)));n.length>0;){const f=n.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),PW(this._tilePerId,e)}};function PW(t,e){t.delete(e)}const Xf=new qf(0,0,0,0),Hu=new Map,g1=[],FO=[];let dgt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new K5e(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>a||s<l))return this.tiles.length=0,void this.clear();const d=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!d)return this.tiles.length=0,void this.clear();const{spans:h,lodInfo:f}=d,{level:m}=f;this.tiles.length=0,r.forEach(w=>w.visible=!0);let y=0,v=0;if(h.length>0)for(const{row:w,colFrom:x,colTo:S}of h)for(let $=x;$<=S;$++){y++;const T=Xf.set(m,w,f.normalizeCol($),f.getWorldForColumn($)).id;let C=r.get(T);if(C)C.isReady?(Hu.set(T,C),v++):c||this._addParentTile(T,Hu);else{if(this._tileCache?.has(T)){if(C=this._tileCache.pop(T),this.tileIndex.set(T,C),C.isReady){Hu.set(T,C),v++;continue}}else C=this.acquireTile(Xf),this.tileIndex.set(T,C);c||this._addParentTile(T,Hu)}}const b=v===y;for(const[w,x]of r){if(Hu.has(w))continue;Xf.set(w);const S=this.tileInfoView.intersects(d,Xf),$=this.cachePolicy==="purge"?Xf.level!==m:Xf.level>m;!S||!c&&b?!$&&S||g1.push(x):x.isReady?$&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Xf,m)?g1.push(x):FO.push(x):$&&g1.push(x)}for(const w of FO)w.isReady&&Hu.set(w.key.id,w);for(const w of g1)this._tileCache?this._tileCache.add(w):this.releaseTile(w),r.delete(w.key.id);for(const w of Hu.values())this.tiles.push(w);for(const w of r.values())Hu.has(w.key.id)||(w.visible=!1);this._tileCache?.prune(m,n,o),g8.pool.release(d),FO.length=0,g1.length=0,Hu.clear()}clear(){const{tileIndex:e}=this;for(const i of e.values())this.releaseTile(i);e.clear()}refresh(e){for(const i of this.tileIndex.values())e(i);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let r=e,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s?.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache?.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s?.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(e,i){const r=zr();this.tileInfoView.getTileBounds(r,e,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<e.level){const n=zr();if(this.tileInfoView.getTileBounds(n,s.key,!0),c2e(n,r))return!0}return!1}};const X5e={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>K(()=>import("./ElevationProfileAnalysisView2D-NYize-yY.js"),__vite__mapDeps([242,132,237,243,188,244,245,246,247,248,249,68,250,251,252,253,254,76,77,255,256,257,152,258,259,99,39,82,83,95,134,37,260,69,105,110,94])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function Q5e(t){const e=X5e[t.type];if(!e)throw new R("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let eze=class{constructor(e,i={}){this.events=new tse,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):i.canvas!=null&&(this._canvas=i.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let s=this._canvas.getContext("webgl2",r);s||(s=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=s,this._handles=Tg([ah(this._canvas,"webglcontextlost",n=>this.events.emit("webgl-context-lost",n))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,i){if(this._hasMajorPerformanceCaveat||H("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=H("esri-performance-mode-frames-between-render")&&(i(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,s,n,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${s}, ${n}, ${o}, ${a}, ${l})`}}else i()}resize(e){const i=this._canvas,r=i.style,{state:{size:s},pixelRatio:n}=e,o=s[0],a=s[1],l=Math.round(o*n),c=Math.round(a*n);i.width===l&&i.height===c||(i.width=l,i.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,i){const[r,s]=e.center,[n,o]=i.center,[a,l]=e.toScreen([0,0],n,o),[c,d]=e.toScreen([0,0],r,s),h=c-a,f=d-l,m=e.scale/i.scale,y=i.rotation-e.rotation,v=Mu();return N2(v),D2(v,v,[m,m]),kf(v,v,x_(y)),Eu(v,v,[h,f]),v}};function tze(t,e,i,r,s){Mce(t,e,i||0,r||t.length-1,s||ize)}function Mce(t,e,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,o=e-i+1,a=Math.log(n),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);Mce(t,e,Math.max(i,Math.floor(e-o*l/n+c)),Math.min(r,Math.floor(e+(n-o)*l/n+c)),s)}var d=t[e],h=i,f=r;for(v1(t,i,e),s(t[r],d)>0&&v1(t,i,r);h<f;){for(v1(t,h,f),h++,f--;s(t[h],d)<0;)h++;for(;s(t[f],d)>0;)f--}s(t[i],d)===0?v1(t,i,f):v1(t,++f,r),f<=e&&(i=f+1),e<=f&&(r=f-1)}}function v1(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function ize(t,e){return t<e?-1:t>e?1:0}function IC(t,e){if(!(this instanceof IC))return new IC(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function rze(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function cv(t,e){mx(t,0,t.children.length,e,t)}function mx(t,e,i,r,s){s||(s=ib(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=e;o<i;o++)n=t.children[o],yx(s,t.leaf?r(n):n);return s}function yx(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function AW(t,e){return t.minX-e.minX}function LW(t,e){return t.minY-e.minY}function zO(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function qI(t){return t.maxX-t.minX+(t.maxY-t.minY)}function sze(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function nze(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),n=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function jO(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function GI(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ib(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function OW(t,e,i,r,s){for(var n,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=r||(n=e+Math.ceil((i-e)/r/2)*r,tze(t,n,e,i,s),o.push(e,n,n,i))}IC.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!GI(t,e))return i;for(var s,n,o,a,l=[];e;){for(s=0,n=e.children.length;s<n;s++)o=e.children[s],GI(t,a=e.leaf?r(o):o)&&(e.leaf?i.push(o):jO(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!GI(t,e))return!1;for(var r,s,n,o,a=[];e;){for(r=0,s=e.children.length;r<s;r++)if(n=e.children[r],GI(t,o=e.leaf?i(n):n)){if(e.leaf||jO(t,o))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ib([]),this},remove:function(t,e){if(t==null)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=c.pop(),n=!0),o.leaf&&(s=rze(t,o.children,e))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!jO(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(l.push(o),c.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:AW,compareMinY:LW,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var s,n=i-e+1,o=this._maxEntries;if(n<=o)return cv(s=ib(t.slice(e,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=ib([])).leaf=!1,s.height=r;var a,l,c,d,h=Math.ceil(n/o),f=h*Math.ceil(Math.sqrt(o));for(OW(t,e,i,f,this.compareMinX),a=e;a<=i;a+=f)for(OW(t,a,c=Math.min(a+f-1,i),h,this.compareMinY),l=a;l<=c;l+=h)d=Math.min(l+h-1,c),s.children.push(this._build(t,l,d,r-1));return cv(s,this.toBBox),s},_chooseSubtree:function(t,e,i,r){for(var s,n,o,a,l,c,d,h;r.push(e),!e.leaf&&r.length-1!==i;){for(d=h=1/0,s=0,n=e.children.length;s<n;s++)l=zO(o=e.children[s]),(c=sze(t,o)-l)<h?(h=c,d=l<d?l:d,a=o):c===h&&l<d&&(d=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,s=i?t:r(t),n=[],o=this._chooseSubtree(s,this.data,e,n);for(o.children.push(t),yx(o,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},_split:function(t,e){var i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=ib(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,cv(i,this.toBBox),cv(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=ib([t,e]),this.data.height=t.height+1,this.data.leaf=!1,cv(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,s,n,o,a,l,c,d;for(l=c=1/0,r=e;r<=i-e;r++)o=nze(s=mx(t,0,r,this.toBBox),n=mx(t,r,i,this.toBBox)),a=zO(s)+zO(n),o<l?(l=o,d=r,c=a<c?a:c):o===l&&a<c&&(c=a,d=r);return d},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:AW,s=t.leaf?this.compareMinY:LW;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,s)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var s,n,o=this.toBBox,a=mx(t,0,e,o),l=mx(t,i-e,i,o),c=qI(a)+qI(l);for(s=e;s<i-e;s++)n=t.children[s],yx(a,t.leaf?o(n):n),c+=qI(a);for(s=i-e-1;s>=e;s--)n=t.children[s],yx(l,t.leaf?o(n):n),c+=qI(l);return c},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)yx(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():cv(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function oze(t,{timeZone:e,timeExtent:i}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}let RW=class Cce{constructor(e,i){this.key=new qf(0,0,0,0),this.bounds=zr(),this.objectIds=new Set,this.key.set(i);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return n2e(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return oze(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),i=Fn.acquire();for(let r=0;r<e.length;r++)i[r]=new Cce(this.tileInfoView,e[r]);return i}getQuantizationParameters(){return Ip.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Qf={added:[],removed:[]},VO=new Set,aze=new qf(0,0,0,0);function lze(t,e){const i=Hn(e);if(!i)return null;const[r,s]=i.valid;return t[2]>s?[zr([t[0],t[1],s,t[3]]),zr([r,t[1],r+t[2]-s,t[3]])]:t[0]<r?[zr([r,t[1],t[2],t[3]]),zr([s-(r-t[0]),t[1],s,t[3]])]:null}let cze=class extends s6{constructor(e){super(),this._tiles=new Map,this._index=IC(9,H("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||WA(e)===0||JA(e)===0)return[];const i=lze(e,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const s=new RW(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of e.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const d=aze.set(n,o,s.normalizeCol(c),s.getWorldForColumn(c)).id;if(VO.add(d),!this.has(d)){const h=new RW(this.tileScheme,d);this._tiles.set(d,h),this._index.insert(h),this.tiles.push(h),Qf.added.push(h)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];VO.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Qf.removed.push(a))}(Qf.added.length||Qf.removed.length)&&this.emit("update",Qf),g8.pool.release(i),VO.clear(),Qf.added.length=0,Qf.removed.length=0}};const mgt=1e-30,NW=512,HI=16777216,ygt=8,Pce=29,Ace=24,ggt=4,vgt=0,bgt=0,wgt=0,_gt=1,xgt=2,Sgt=3,$gt=4,Igt=5,kgt=6,Tgt=12,Egt=13,Mgt=5,uze=6,Cgt=5,Pgt=6,Lce=6,dze=1<<Lce,Agt=dze<<1,hze=1.05,Lgt=3,Ogt=1,pze=3,fze=3,Rgt=5,Ngt=6,Dgt=1.15,mze=4,Fgt=128,yze=256,zgt=yze-2*mze,jgt=2,Vgt=128,Oce=1,Ugt=10,gze=1024,Bgt=128,qgt=4,Ggt=1,Hgt=1<<20,Wgt=.75,Jgt=10,Zgt=.75,Ygt=256,vze=32,bze=512,Kgt=0,Xgt=1,wze=1,Qgt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],evt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b1=256,_ze=()=>X.getLogger("esri.views.webgl.checkWebGLError");function Rce(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const Nce=!!H("enable-feature:webgl-debug");function Dce(){return Nce}function tvt(){return Nce}function em(t,e=Dce()){if(e){const i=Rce(t);if(i){const r=new Error().stack;_ze().error(new R("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}const ivt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},nt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Re={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},xze=Object.values(Re),kC={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},ES={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},xz={FLOAT:nt.FLOAT,UNSIGNED_BYTE:nt.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:nt.BYTE,UNSIGNED_SHORT:nt.UNSIGNED_SHORT,SHORT:nt.SHORT,UNSIGNED_INT:nt.UNSIGNED_INT,INT:nt.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},rvt=33984,DW={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},svt=1029,nvt=0,ovt=36064,avt=36065,lvt=36066,cvt=36067,uvt=33306,dvt=36096,hvt=36128,sn={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function pvt(t,e,i,r=0){const s=t.gl;t.bindBuffer(i);for(const n of i.layout){const o=e.get(n.name);if(o==null){console.warn(`There is no location for vertex attribute '${n.name}' defined.`);continue}const a=r*n.stride;if(n.count<=4)s.vertexAttribPointer(o,n.count,n.type,n.normalized,n.stride,n.offset+a),s.enableVertexAttribArray(o),n.divisor>0&&s.vertexAttribDivisor(o,n.divisor);else if(n.count===9)for(let l=0;l<3;l++)s.vertexAttribPointer(o+l,3,n.type,n.normalized,n.stride,n.offset+12*l+a),s.enableVertexAttribArray(o+l),n.divisor>0&&s.vertexAttribDivisor(o+l,n.divisor);else if(n.count===16)for(let l=0;l<4;l++)s.vertexAttribPointer(o+l,4,n.type,n.normalized,n.stride,n.offset+16*l+a),s.enableVertexAttribArray(o+l),n.divisor>0&&s.vertexAttribDivisor(o+l,n.divisor);else console.error("Unsupported vertex attribute element count: "+n.count);if(Dce()){const l=Rce(t.gl);l&&console.error(`Unable to bind vertex attribute "${n.name}" with baseInstanceOffset ${a}:`,l,n)}}}function fvt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function Sze(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Re.R8:case Re.R8I:case Re.R8UI:case Re.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Re.RGBA4:case Re.R16F:case Re.R16I:case Re.R16UI:case Re.RG8:case Re.RG8I:case Re.RG8UI:case Re.RG8_SNORM:case Re.RGB565:case Re.RGB5_A1:case ES.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Re.RGB8:case Re.RGB8I:case Re.RGB8UI:case Re.RGB8_SNORM:case Re.SRGB8:case ES.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Re.RGBA8:case Re.R32F:case Re.R11F_G11F_B10F:case Re.RG16F:case Re.R32I:case Re.R32UI:case Re.RG16I:case Re.RG16UI:case Re.RGBA8I:case Re.RGBA8UI:case Re.RGBA8_SNORM:case Re.SRGB8_ALPHA8:case Re.RGB9_E5:case Re.RGB10_A2UI:case Re.RGB10_A2:case ES.DEPTH_COMPONENT32F:case kC.DEPTH24_STENCIL8:return 4;case kC.DEPTH32F_STENCIL8:return 5;case Re.RGB16F:case Re.RGB16I:case Re.RGB16UI:return 6;case Re.RG32F:case Re.RG32I:case Re.RG32UI:case Re.RGBA16F:case Re.RGBA16I:case Re.RGBA16UI:return 8;case Re.RGB32F:case Re.RGB32I:case Re.RGB32UI:return 12;case Re.RGBA32F:case Re.RGBA32I:case Re.RGBA32UI:return 16;case sn.COMPRESSED_RGB_S3TC_DXT1_EXT:case sn.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case sn.COMPRESSED_RGBA_S3TC_DXT3_EXT:case sn.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case sn.COMPRESSED_R11_EAC:case sn.COMPRESSED_SIGNED_R11_EAC:case sn.COMPRESSED_RGB8_ETC2:case sn.COMPRESSED_SRGB8_ETC2:case sn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case sn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case sn.COMPRESSED_RG11_EAC:case sn.COMPRESSED_SIGNED_RG11_EAC:case sn.COMPRESSED_RGBA8_ETC2_EAC:case sn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let Fce=class{constructor(e=0,i=e){this.width=e,this.height=i,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=xz.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function $ze(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:Sze(t.internalFormat))*(t.target===34067?6:1))}const w1=()=>X.getLogger("esri/views/webgl/textureUtils");function _1(t){const{width:e,height:i,depth:r}=t;(e!=null&&e<0||i!=null&&i<0||r!=null&&r<0)&&w1().error("Negative dimension parameters are not allowed!");const{internalFormat:s}=t;if(s&&(zce(s)||jce(s))){const{linearFilterDepth:n,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&w1().error("Depth textures cannot have mipmaps"),n?a!==9729&&a!==9728&&w1().error("Depth textures cannot sample mipmaps"):(a!==9728&&w1().error("Depth textures without filtering must use NEAREST filtering"),o&&w1().error("Depth textures without filtering cannot use compare function"))}}function Ize(t){return xze.includes(t)}function zce(t){return PA(ES,t)}function jce(t){return PA(kC,t)}function kze(t){return t!=null&&PA(sn,t)}function rb(t){return t!=null&&"type"in t&&t.type==="compressed"}function Tze(t){return t!=null&&"byteLength"in t}function FW(t){return t!=null&&!rb(t)&&!Tze(t)}function uv(t){return t===32879||t===35866}function zW(t,e,i,r=1){let s=Math.max(e,i);return t===32879&&(s=Math.max(s,r)),Math.floor(Math.log2(s))+1}function WI(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case xz.FLOAT:switch(t.pixelFormat){case 6408:return Re.RGBA32F;case 6407:return Re.RGB32F;default:throw new R("texture:unknown-format","Unable to derive format")}case xz.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Re.RGBA8;case 6407:return Re.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?kC.DEPTH24_STENCIL8:e===6402?ES.DEPTH_COMPONENT24:e,t.internalFormat}function Eze(t){let e="width"in t?t.width:t.codedWidth,i="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,i=t.videoHeight),{width:e,height:i,depth:1}}let Mze=class Vce extends Fce{constructor(e,i){switch(super(),this.context=e,Object.assign(this,i),this.internalFormat){case Re.R16F:case Re.R32F:case Re.R8_SNORM:case Re.R8:this.pixelFormat=6403;break;case Re.R8I:case Re.R8UI:case Re.R16I:case Re.R16UI:case Re.R32I:case Re.R32UI:this.pixelFormat=36244}}static validate(e,i){return new Vce(e,i)}};const Cze=!!H("esri-tests-disable-gpu-memory-measurements"),Wu=()=>X.getLogger("esri/views/webgl/Texture");var Jr;let Pze=(Jr=class{constructor(e,i=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=i;else{const s=Mze.validate(e,i);if(!s)throw new R("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=s}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return Cze?0:$ze(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(DW.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new R("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!rb(e)&&this._descriptor.internalFormat&&PA(sn,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!rb(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,i,r,s,n,o,a=0){o||Wu().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Wu().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=WI(l);const{context:c,pixelFormat:d,dataType:h,target:f,isImmutable:m}=l;if(m&&!this._wasImmutablyAllocated)throw new R("texture:uninitialized","Cannot update immutable texture before allocation!");const y=c.bindTexture(this,Jr.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>l.width||r+n>l.height)&&Wu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=c;a&&(s&&n||Wu().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,a)),FW(o)?v.texSubImage2D(f,e,i,r,s,n,d,h,o):rb(o)?v.compressedTexSubImage2D(f,e,i,r,s,n,l.internalFormat,o.levels[e]):v.texSubImage2D(f,e,i,r,s,n,d,h,o),a&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),c.bindTexture(y,Jr.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,n,o,a,l){l||Wu().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||Wu().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=WI(c);const{context:d,pixelFormat:h,dataType:f,isImmutable:m,target:y}=c;if(m&&!this._wasImmutablyAllocated)throw new R("texture:uninitialized","Cannot update immutable texture before allocation!");uv(y)||Wu().warn("Attempting to set 3D texture data on a non-3D texture");const v=d.bindTexture(this,Jr.TEXTURE_UNIT_FOR_UPDATES);d.setActiveTexture(Jr.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>c.width||r+o>c.height||s+a>c.depth)&&Wu().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=d;if(rb(l))l=l.levels[e],b.compressedTexSubImage3D(y,e,i,r,s,n,o,a,c.internalFormat,l);else{const w=l;b.texSubImage3D(y,e,i,r,s,n,o,a,h,f,w)}d.bindTexture(v,Jr.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new R("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,_1(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const i=this._descriptor.context.bindTexture(this,Jr.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Jr.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,Jr.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new R("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,_1(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,_1(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),_1(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=sg(this._compressionAbortController)}_setData(e,i){const r=this._descriptor,s=r.context?.gl;if(!s)return;em(s),this.hasWebGLTextureObject||(this._glName=s.createTexture(),r.context.instanceCounter.increment(DW.Texture,this)),_1(r);const n=r.context.bindTexture(this,Jr.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Jr.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),em(s);const o=i??r.target,a=uv(o);if(FW(e))this._setDataFromTexImageSource(e,o);else{const{width:l,height:c,depth:d}=r;if(l==null||c==null)throw new R("texture:missing-size","Width and height must be specified!");if(a&&d==null)throw new R("texture:missing-depth","Depth must be specified!");if(r.internalFormat=WI(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,l,c,d),rb(e)){if(!kze(r.internalFormat))throw new R("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,l,c,d,e),em(s),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),em(s),r.context.bindTexture(n,Jr.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let i=34069;i<=34074;i++)this._setData(e,i)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,i),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(e,i){const{gl:r}=this._descriptor.context,s=this._descriptor;s.internalFormat=WI(s);const n=uv(i),{width:o,height:a,depth:l}=Eze(e);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=a),n&&s.depth,n&&(s.depth=l),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,s.internalFormat,s.hasMipmap,o,a,l),this._texImage(i,0,s.internalFormat,o,a,l,e),em(r),s.hasMipmap&&(this.generateMipmap(),em(r))}_setDataFromCompressedSource(e,i,r){const s=this._descriptor,{width:n,height:o,depth:a}=s,l=e.levels,c=zW(r,n,o,a),d=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(s.target,33085,d),this._forEachMipmapLevel((h,f,m,y)=>{const v=l[Math.min(h,l.length-1)];this._compressedTexImage(r,h,i,f,m,y,v)},d)}_texStorage(e,i,r,s,n,o){const{gl:a}=this._descriptor.context;if(!Ize(i)&&!zce(i)&&!jce(i))throw new R("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?zW(e,s,n,o):1;if(uv(e)){if(o==null)throw new R("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,i,s,n,o)}else a.texStorage2D(e,l,i,s,n);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,n,o,a){const l=this._descriptor.context.gl,c=uv(e),{isImmutable:d,pixelFormat:h,dataType:f}=this._descriptor;if(d){if(a!=null){const m=a;if(c){if(o==null)throw new R("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,i,0,0,0,s,n,o,h,f,m)}else l.texSubImage2D(e,i,0,0,s,n,h,f,m)}}else{const m=a;if(c){if(o==null)throw new R("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,i,r,s,n,o,0,h,f,m)}else l.texImage2D(e,i,r,s,n,0,h,f,m)}}_compressedTexImage(e,i,r,s,n,o,a){const l=this._descriptor.context.gl,c=uv(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new R("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,s,n,o,r,a)}else l.compressedTexSubImage2D(e,i,0,0,s,n,r,a)}else if(c){if(o==null)throw new R("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,r,s,n,o,0,a)}else l.compressedTexImage2D(e,i,r,s,n,0,a)}async _compressOnWorker(e){const{width:i,height:r,context:s,flipped:n,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=this._descriptor.compress?.compressionTracker,c=this._descriptor.compress?.compressionCallback,{compressedTextureETC:d,compressedTextureS3TC:h}=s.capabilities;if(!Jr.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!d&&!h)return;this.abortCompression();const f=new AbortController;let m;this._compressionAbortController=f,l?.increment();try{e instanceof Uint8Array?m=e.buffer:(m=await createImageBitmap(e,{imageOrientation:n?"flipY":"none"}),Gt(f));const y={data:m,width:i,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!d,hasS3TC:!!h},v=await Jr.compressionWorkerHandle.invoke(y,f.signal,"low");if(Gt(f),v.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=v.internalFormat,this._setData(v.compressedTexture),c?.(b-this.usedMemory)}}catch(y){Yi(y)||Wu().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),m instanceof ImageBitmap&&m.close()}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===32879;if(r==null||s==null||l&&n==null)throw new R("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,s,n),o&&(r!==1||s!==1||l&&n!==1)&&!(c>=i);++c)r=Math.max(1,r>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}_applySamplingMode(){const e=this._descriptor,i=e.context?.gl;let r=e.samplingMode,s=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(s=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(s=9728)),i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){const e=this._descriptor,i=e.context?.gl;typeof e.wrapMode=="number"?(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode)):(i.texParameteri(e.target,i.TEXTURE_WRAP_S,e.wrapMode.s),i.texParameteri(e.target,i.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,i=e.context?.gl,r=e.compareEnabled?i.COMPARE_REF_TO_TEXTURE:i.NONE;i.texParameteri(e.target,i.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&i.texParameteri(e.target,i.TEXTURE_COMPARE_FUNC,i.GREATER),em(i)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,i=e.context.capabilities.textureFilterAnisotropic;i&&e.context.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Jr.TEXTURE_UNIT_FOR_UPDATES=0,Jr.compressionWorkerHandle=null,Jr);const UO=()=>X.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Aze(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Lze=[0,0,0,0];let Uce=class{constructor(){this.type="single",this._highlightOptions=new cf,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*b1),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,i){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,uze),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Lce)-1,activeGradient:this}]}_updateGradientTexture(e){const i=Oze(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,Aze(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*wze,c=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,d=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let h;c&&!d?UO().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&d?UO().error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&d&&UO().error("The highlight is "+Math.max(c,d)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function m(v,b,w){f[0]=(1-w)*v[0]+w*b[0],f[1]=(1-w)*v[1]+w*b[1],f[2]=(1-w)*v[2]+w*b[2],f[3]=(1-w)*v[3]+w*b[3]}const{_texelData:y}=this;for(let v=0;v<b1;++v)h=s+v/(b1-1)*(a-s),h<s?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):h<n?m(Lze,r.outlineColor,(h-s)/(n-s)):h<o?[f[0],f[1],f[2],f[3]]=r.outlineColor:h<a?m(r.outlineColor,r.fillColor,(h-o)/(a-o)):[f[0],f[1],f[2],f[3]]=r.fillColor,y[4*v]=255*f[0],y[4*v+1]=255*f[1],y[4*v+2]=255*f[2],y[4*v+3]=255*f[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const v=new Fce(b1,1);v.wrapMode=33071,this._shadeTex=new Pze(e,v)}this._shadeTex.updateData(0,0,0,b1,1,this._texelData)}};function Oze(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Rze=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let i=0;i<e.length;i++)this.gradients[i]||(this.gradients[i]=new Uce),this.gradients[i].setHighlightOptions(e[i]);for(let i=e.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:e,activeGradient:s}),e<<=1}return i}};const Bce={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},Nze={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Dze={...Bce,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Fze({pixelRatio:t,state:e,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),o=1/2**(r-s.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:e.scale,currentZoom:i,metersPerSRUnit:va(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function qce(t){return t.passOptions?.type==="highlight"}function Gce(t){return t.passOptions?.type==="hittest"}function zze(t){if(!Gce(t))return null;const{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function jze(t){if(!qce(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function vvt(t,e,i){const r={};for(const s in i)typeof i[s]!="function"?r[s]=i[s]:r[s]=i[s](t,e);return r}function bvt(t,e){const{attributeView:i,context:r}=t;return{storage:i.getUniforms(r),view:Fze(t,e),hittestRequest:zze(t),highlight:jze(t)}}function wvt(t){return{inside:t.selection===2,outside:t.selection===3}}function Vze(t){return Gce(t)?Nze:qce(t)&&t.passOptions.stepType==="clear"?Dze:Bce}function _vt(t){const{row:e,col:i}=t.key,r=i*NW,s=e*NW;return{tileOffsetFromLocalOrigin:[r%HI,s%HI],maxIntsToLocalOrigin:[Math.floor(r/HI),Math.floor(s/HI)]}}const Uze=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function xvt(t){return Uze.toJSON(t)}function Svt(t){const{bandCount:e,attributeTable:i,colormap:r,pixelType:s}=t.raster.rasterInfo;return e===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function Bze(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Rze:new Uce),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function $vt(t,e,i,r){const{painter:s,highlightGradient:n}=t,{highlight:o}=s.effects;if(!n)return;const a=t.passOptions,l=n.getReasonsWithGradients();for(let c=0;c<l.length;c++){const d={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(d),i(d),c<l.length-1){let f=0;for(let m=c+1;m<l.length;m++)f|=l[m].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};s.setPipelineState(Vze(t)),s.updatePipelineState(t.context),o.draw(h),o.unbind()}t.passOptions=a}const JI=t=>parseFloat(t)/100;function qze(t,e,i){const r=typeof t.left=="string"?JI(t.left)*e:t.left,s=typeof t.right=="string"?JI(t.right)*e:t.right,n=typeof t.top=="string"?JI(t.top)*i:t.top,o=typeof t.bottom=="string"?JI(t.bottom)*i:t.bottom,a=n;return{xmin:r,xmax:Math.max(e-s,r),ymin:a,ymax:Math.max(i-o,n)}}function Hce(t,e,i,r){switch(e.type){case"rect":{const{width:s,height:n}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=qze(e,s,n),{x:d,y:h}=i;return d>o&&d<a&&h>l&&h<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||WU(e.path,[i.x,i.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?HU(e.geometry,r):b2(e.geometry,r))}}function Gze(t){if(!t.highlights)return null;const e=t.highlights.findIndex(i=>i.name==="default");return e===-1?null:t.highlights.items[e]}function Hze(t,e){if(!t.highlights){if(!e)return;t.highlights=new ue([new cf])}const i=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[i].assignFrom(e):(t.highlights.removeAt(i),t.highlights.length===0&&(t.highlights=null))}async function Wze(t,e,i){const r=kle(e)?Ile(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;i?.include?VW(i.include,jW(t,f=>{s.add(f),BO(f,m=>n.add(m))},(f,m)=>{n.add(f),s.add(m)},f=>{a||(a=new Set),a.add(f)},f=>s.add(f),()=>o=!0)):(o=!0,s=new Set(t.allLayerViews),s.forEach(f=>{BO(f,m=>n.add(m))})),i?.exclude&&VW(i.exclude,jW(t,f=>{s.delete(f),BO(f,m=>n.delete(m))},f=>n.delete(f),f=>{l||(l=new Set),l.add(f)}));const c=t.toMap(r),d=t.allLayerViews.filter(f=>!f.suspended&&s.has(f)&&f.clips.every(m=>Hce(t,m,r,c))).reverse();let h=[...o?t.graphicsView.hitTest(c).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:c})):[],...await Promise.all(d.map(f=>f.hitTest(c,r)).toArray())].filter(Ei).flat().filter(Ei);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||n.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has(Sz(f.graphic)))),l&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(Sz(f.graphic)))),{screenPoint:r,results:h}}function jW(t,e,i,r,s,n){return o=>{if(o instanceof Wi){if(o.layer===t)n?.();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&s?.(a)}r(Sz(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function VW(t,e){if(t)if(VM(t))for(const i of t)if(VM(i))for(const r of i)e(r);else e(i);else e(t)}function Sz(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function BO(t,e){const i=t.layer;i?.type==="subtype-group"&&i.sublayers.forEach(r=>{e(r)})}let x1=null,TC=!0;function Jze(t,e,i){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(TC)try{return new ImageData(t,e)}catch{TC=!1}return Wce(t,e,i)}function Ivt(t,e,i,r){if(!e||!i)throw new Error("Cannot construct image data without dimensions");if(TC)try{return new ImageData(t,e,i)}catch{TC=!1}const s=Wce(e,i,r);return s.data.set(t,0),s}function Zze(){return x1||(x1=document.createElement("canvas"),x1.width=1,x1.height=1),x1}function Wce(t,e,i){return i||(i=Zze()),i.getContext("2d").createImageData(t,e)}async function Yze(t,e){const i=window.URL.createObjectURL(t);try{const{data:r}=await xe(i,{...e,responseType:"image"});return r}catch(r){throw Yi(r)?r:new R("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function Kze(t,e){const{arrayBuffer:i,mediaType:r}=await Xze(t,e),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await K(()=>import("./gif-C7JDGsW3.js"),[]);if(n(i))return o(i,e)}if(s){const{isAnimatedPNG:n,parseApng:o}=await K(()=>import("./apng-ngz7J16i.js"),__vite__mapDeps([261,7]));if(n(i))return o(i,e)}return Yze(new Blob([i],{type:r}),e)}async function Xze(t,e){const i=cg(t);if(i?.isBase64)return{arrayBuffer:fie(i.data),mediaType:i.mediaType};const r=await xe(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function Jce(t,e,i){const{ctx:r,canvas:s}=Yce(t,i),n=r.getImageData(0,0,t.width,t.height),o=Xce(s,e);return Kce(s),{dataUrl:o,data:n}}function Zce(t,e){const{ctx:i,canvas:r}=Yce(t,e),s=i.getImageData(0,0,t.width,t.height);return Kce(r),s}function Yce(t,e){const i=Qze();e.premultipliedAlpha&&r4e(t),i.width=t.width,i.height=t.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&i4e(r),{ctx:r,canvas:i}}function Kce(t){t.width=0,t.height=0}function Qze(){return qO==null&&(qO=document.createElement("canvas")),qO}let qO=null;function Xce(t,e){const i=s4e[e.format],r=e.quality/100;return t.toDataURL(i,r)}function Qce(t,e){const i=t4e(t),r=o4e[i];return{format:i,quality:bn(e??r,0,100)}}function eue(t,e){return e/Math.max(t[0],t[1])}function e4e(t,e,i,r=0,s=0,n=t.width-r,o=t.height-s,a=!1){const{data:l}=t,{width:c,height:d,data:h}=e,f=n/c,m=o/d,y=Math.ceil(f/2),v=Math.ceil(m/2),b=t.width;for(let w=0;w<d;w++)for(let x=0;x<c;x++){const S=4*(x+(a?d-w-1:w)*c);let $=0,T=0,C=0,L=0,N=0,D=0;const F=(w+.5)*m;for(let W=Math.floor(w*m);W<(w+1)*m;W++){const Z=Math.abs(F-(W+.5))/v,V=(x+.5)*f,A=Z*Z;for(let q=Math.floor(x*f);q<(x+1)*f;q++){const J=Math.abs(V-(q+.5))/y,ee=Math.sqrt(A+J*J);if(ee>=1)continue;let re=2*ee*ee*ee-3*ee*ee+1;const me=4*(r+q+(s+W)*b);D+=re*l[me+3],T+=re,!i&&l[me+3]<255&&(re=re*l[me+3]/255),C+=re*l[me],L+=re*l[me+1],N+=re*l[me+2],$+=re}}h[S]=C/$,h[S+1]=L/$,h[S+2]=N/$,h[S+3]=D/T}return e}function t4e(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return n4e}}function i4e(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function r4e(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+3];if(s!==255&&s>0){const n=255/s;e[r]=e[r]*n,e[r+1]=e[r+1]*n,e[r+2]=e[r+2]*n}}}const s4e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},UW=98,n4e="png",o4e={png:100,jpg:UW,jpeg:UW},kvt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Jze,encode:Jce,encodeData:Zce,getFormatAndQuality:Qce,getMaximumResolutionScale:eue,resampleHermite:e4e,toDataUrl:Xce},Symbol.toStringTag,{value:"Module"})),tue={flipY:!0,premultipliedAlpha:!0};async function a4e(t,e){const i=await iue(t,e),{format:r,quality:s}=Qce(e?.format,e?.quality);return Jce(i,{format:r,quality:s},tue)}async function l4e(t,e){const i=await iue(t,e);return Zce(i,tue)}function iue(t,e){const i=d4e(e||{},u4e(t.stage,t.size),t.size,t.padding),r=c4e(e,t.allLayerViews);return t.stage.takeScreenshot(i,r,t.backgroundColor,e?.rotation)}function c4e(t={},e){if(!t.layers)return;const i=[];return t.layers.forEach(r=>{const s=e.find(n=>n.layer.id===r.id);s?.container&&i.push(s.container)}),i}function u4e(t,e){return Math.min(4,eue(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function d4e(t,e,i,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;t.width!=null&&t.height!=null?s=[t.width,t.height]:t.width==null&&t.height!=null?s=[t.height,t.height]:t.width!=null&&t.height==null?s=[t.width,t.width]:t.width==null&&t.height==null&&(s=null);const n=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:n,height:o};if(s){const d=n/o,h=s[0]/s[1];if(h>d){const f=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-f)/2),width:c.width,height:Math.round(f)}}else{const f=c.height*h;c={x:Math.round(c.x+(c.width-f)/2),y:c.y,width:Math.round(f),height:c.height}}}else s=[c.width,c.height];return s[0]>c.width?(a=Math.min(s[0]/c.width,e),l=s[0]/c.width/a):(a=1,l=s[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const h4e=t=>t.includes("Brush");let rue=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),h4e(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const BW=Symbol("analyses-owner-handles");let hp=class extends _e{constructor(e){super(e),this._allAnalysisViews=new ue,this._creatingViewCount=0,this._attachedToViewResolver=qW(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(i,r)=>this.view.emit(i,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(jt("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(jt()),this._attachedToViewResolver=qW()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const i=this._items.get(e);if(i==null||i.state.list===1)throw new R("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return i.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),BW)}_disconnectOwners(){this.removeHandles(BW),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const s of e)this._addAnalysis(s);const i=e.on("after-add",s=>this._addAnalysis(s.item)),r=e.on("after-remove",s=>this._removeAnalysis(s.item));return Et(()=>{i.remove(),r.remove();for(const s of e)this._removeAnalysis(s)})}_addAnalysis(e){const i=this._items.get(e);if(i==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=A_(s=>this._createAnalysisViewPromise(r,s).then(n=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:n}),n),n=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:n}),n}))}else i.state.list=0}_removeAnalysis(e){const i=this._items.get(e);i!=null?(i.state.list=1,this._scheduleUpdate()):X.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=y_(()=>this._update()))}_update(){this._scheduledUpdateHandle=_i(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:i,view:r}=e;switch(this._items.delete(i),e.state.view){case 0:e.createAnalysisViewTask=sg(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=bi(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:i,analysisView:r}))}})}async _createAnalysisViewPromise(e,i){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new R("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(Xr(i))throw this._creatingViewCount-=1,jt("AnalysisView creation aborted");const s=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let n=!0;as(i,()=>{n&&this._destroyAnalysisView(r,s)});try{await s.when()}catch(o){throw n=!1,this._destroyAnalysisView(r,s),o}if(Xr(i))throw jt();return n=!1,e.view=s,e.state.view=1,this._allAnalysisViews.add(s),this._creatingViewCount-=1,s}_destroyAnalysisView(e,i){i.destroyed||(this._creatingViewCount-=1,i.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:i}))}};u([p()],hp.prototype,"updating",null),u([p({constructOnly:!0})],hp.prototype,"importAnalysisViewModule",void 0),u([p({constructOnly:!0})],hp.prototype,"view",void 0),u([p()],hp.prototype,"_allAnalysisViews",void 0),u([p()],hp.prototype,"_creatingViewCount",void 0),hp=u([M("esri.views.support.AnalysisViewManager")],hp);const p4e=hp;function qW(){const t=Is();return t.promise.catch(()=>{}),t}let f4e=class{constructor(e){this.getUnmaskedRenderer=e}};function m4e(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new f4e(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let GW;function $z(){return GW??(GW=v4e()),GW}let y4e=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function g4e(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let i=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=e.getContext("webgl2"),i!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=m4e(i)?.getUnmaskedRenderer()??"unknown")),i==null)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),i}function v4e(){const t=new y4e,e=g4e(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function b4e(t){const e=$z();return e.available?t==="3d"&&e.majorPerformanceCaveat?new R("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new R("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new R("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new R("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function w4e(t){return t&&"nodeType"in t}function _4e(t){return t&&typeof t.render=="function"}const HW={component:"esri-component"};let km=class extends _e{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(HW.component),i&&i.classList.remove(HW.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||w4e(e)?(this._set("widget",null),$6(e)):(_4e(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};u([p()],km.prototype,"id",null),u([p()],km.prototype,"node",null),u([Mt("node")],km.prototype,"castNode",null),u([p({readOnly:!0})],km.prototype,"widget",void 0),km=u([M("esri.views.ui.Component")],km);const cE=km,x4e="--esri-calcite-mode-name";function S4e(){const t=getComputedStyle(document.body).getPropertyValue(x4e).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const sue="calcite-mode-";function nue(t){return S4e()??fwe(t??document.body)}function oue(t){return nue(t)==="dark"}function v8(t){return`${sue}${nue(t)}`}function $4e(t){const e=v8(t);I4e(t),t.classList.add(e)}function I4e(t){Array.from(t.classList).forEach(e=>{e.startsWith(sue)&&t.classList.remove(e)})}const C3=new Map;function aue(){C3.clear()}function k4e(t){return C3.get(t)}function T4e(t,e){C3.set(t,e)}function GO(t){C3.delete(t)}function E4e(...t){const e=Fn.acquire();for(let r=0;r<t.length;r++){const s=t[r],n=typeof s;if(n==="string")e.push(s);else if(Array.isArray(s))e.push.apply(e,s);else if(n==="object")for(const o in s)s[o]&&e.push(o)}const i=e.join(" ");return Fn.release(e),i}const lue=(()=>{const t=new Map,e=new ResizeObserver(r=>{aue();for(const s of r)t.get(s.target)?.(s)}),i=(r,s,n)=>(t.set(r,s),e.observe(r,n),Et(()=>{e.unobserve(r),t.delete(r)}));return(r,s,n)=>{let o=null;return Tg([de(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=i(a,s,n))},Vs),Et(()=>o?.remove())])}})();function M4e(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function Avt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Lvt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function C4e(t){return t==="Enter"||t===" "}async function cue(t,e){await t1e(f2(e));const i=typeof t=="function"?t():t;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const P4e={left:0,top:0,bottom:0,right:0},uue={bottom:30,top:15,right:15,left:15},Ju="esri-ui",Yn={ui:Ju,corner:`${Ju}-corner`,innerContainer:`${Ju}-inner-container`,manualContainer:`${Ju}-manual-container`,cornerContainer:`${Ju}-corner-container`,topLeft:`${Ju}-top-left`,topRight:`${Ju}-top-right`,bottomLeft:`${Ju}-bottom-left`,bottomRight:`${Ju}-bottom-right`};function A4e(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function ZI(t){return t===0?"0":`${t}px`}function HO(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function WO(t,{top:e,bottom:i,left:r,right:s}){t.style.top=e,t.style.bottom=i,t.style.left=r,t.style.right=s}let xc=class extends Pg{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=ko(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&WO(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&WO(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([de(()=>[this.view?.padding,this.container],this._applyViewPadding,Fi),de(()=>this.padding,this._applyUIPadding,Fi),de(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},Fi),a6(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Yn.ui),$4e(e),this._attachContainers(e)),i&&(i.classList.remove(Yn.ui),WO(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const i=this._getViewPadding(),{top:r,bottom:s}=i;return Math.max(e-r-s,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...uue,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const i=this._getViewPadding(),{left:r,right:s}=i;return Math.max(e-r-s,0)}add(e,i){let r,s,n;if(Array.isArray(e))return void e.forEach(a=>this.add(a,i));const o=HO(e);o&&({index:r,position:i,component:e,key:s}=o),i&&typeof i=="object"&&({index:r,key:s,position:i,internal:n}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,r??this._getNumComponentsAtPosition(i),s,n)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,i));const r=this._find(e);if(r){const s=this._componentMap.get(r);if(!s||s.key!==i)return;const n=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===s.position&&l.index>s.index&&l.index--}),this._components.splice(n,1)[0]}}empty(e,i={removeInternal:!1}){if(Array.isArray(e)){for(const n of e)this.empty(n,i);return}const r=this._positionNameToContainerLookup[e??"manual"],s=Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(n=>n==null?!1:!(this._componentMap.get(n)?.internal??!1)||i.removeInternal);for(const n of s)this.remove(n)}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let r;const s=HO(e)||HO(i);if(s&&(r=s.index,i=s.position,e=s.component||e),i&&!this._isValidPosition(i))return;const n=this.remove(e);n&&this.add(n,{position:i,index:r})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getComponents(e,i={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(e,i):this._components.filter(r=>i.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:s})=>r??s)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,r,s,n){e instanceof cE||(e=new cE({node:e}));const{widget:o}=e;o!=null&&o instanceof _e&&o.addHandles(Et(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[i];this._components.some(l=>{const c=this._componentMap.get(l)?.position,d=c?this._positionNameToContainerLookup[c]:null;return a===d&&this._componentMap.get(l)?.index===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),d=c?.position,h=d?this._positionNameToContainerLookup[d]:null;c&&h===a&&c.index>=r&&c.index++}),this._place({component:e,position:i,index:r}),this._components.push(e),this._componentMap.set(e,{key:s,position:i,internal:n,index:r})}_find(e){return e?e instanceof cE?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??P4e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Yn.innerContainer,Yn.cornerContainer);const i=document.createElement("div");i.classList.add(Yn.innerContainer,Yn.manualContainer);const r=document.createElement("div");r.classList.add(Yn.topLeft,Yn.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(Yn.topRight,Yn.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(Yn.bottomLeft,Yn.corner),e.appendChild(n);const o=document.createElement("div");o.classList.add(Yn.bottomRight,Yn.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=M4e();this._cornerNameToContainerLookup={"top-left":r,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:r,"top-trailing":a?r:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.position??"manual",{component:r,index:s}=e,n=this._positionNameToContainerLookup[i],o=s!=null&&s>-1;if(A4e(r.widget)&&r.widget.startup(),!o)return void n.appendChild(r.node);const a=Array.from(n.children);if(a.length!==0){for(const l of a){const c=this._findByNode(l);if(c&&s<(this._componentMap.get(c)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}n.appendChild(r.node)}else n.appendChild(r.node)}_toPixelPosition(e){return{top:ZI(e.top),left:ZI(e.left),right:ZI(e.right),bottom:ZI(e.bottom)}}_findByComponent(e){return this._components.find(i=>i===e)??null}_findById(e){return this._components.find(({id:i})=>i===e)??null}_findByNode(e){return e?this._components.find(({node:i})=>i===e):null}_getComponentsAtPosition(e,i){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(Ei).filter(s=>i.includeInternal||!this._componentMap.get(s)?.internal).map(({widget:s,node:n})=>s??n)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};u([p()],xc.prototype,"_locale",void 0),u([p()],xc.prototype,"container",null),u([p()],xc.prototype,"height",null),u([p({value:uue})],xc.prototype,"padding",null),u([Mt("padding")],xc.prototype,"castPadding",null),u([p()],xc.prototype,"view",void 0),u([p()],xc.prototype,"width",null),xc=u([M("esri.views.ui.UI")],xc);const L4e=xc,O4e={handleInterceptedEvent:(t,e,i,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||i,[r]))},R4e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.startsWith("-")?t.style.setProperty(e,i):t.style[e]=i}},N4e=t=>({...R4e,...t}),D4e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},F4e=(t,e)=>t.find(e),WW=(t,e,i=!1)=>{let r=t;return e.forEach((s,n)=>{const o=r?.children?F4e(r.children,a=>a.domNode===s):void 0;i&&!o&&n!==e.length-1||(r=o)}),r},z4e=t=>{let e;const i={...O4e,...t},r=N4e(i),s=r.performanceLogger;let n,o=!0,a=!1;const l=[],c=[],d=(f,m,y)=>{let v;r.eventHandlerInterceptor=(w,x,S,$)=>function(T){let C;s("domEvent",T);const L=D4e(T.currentTarget,v.domNode),N=L.some(F=>customElements.get(F?.tagName?.toLowerCase()));if(T.eventPhase===Event.CAPTURING_PHASE||!N)L.reverse(),C=WW(v.getLastRender(),L);else{const F=T.composedPath(),W=F.slice(F.indexOf(T.currentTarget),F.indexOf(v.domNode)).reverse();C=WW(v.getLastRender(),W,!0)}let D;return C&&(D=i.handleInterceptedEvent(e,C,this,T)),s("domEventProcessed",T),D},i.postProcessProjectionOptions?.(r);const b=y();v=f(m,b,r),r.eventHandlerInterceptor=void 0,l.push(v),c.push(y),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(v,b)};let h=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let f=0;f<l.length;f++){const m=c[f]();s("rendered",void 0);try{l[f].update(m)}catch(y){console.error(y)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(h=i.modifyDoRenderImplementation(h,l,c)),e={renderNow:h,scheduleRender:()=>{n||a||(n=requestAnimationFrame(h))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,m)=>{d(Hp.append,f,m)},insertBefore:(f,m)=>{d(Hp.insertBefore,f,m)},merge:(f,m)=>{d(Hp.merge,f,m)},replace:(f,m)=>{d(Hp.replace,f,m)},detach:f=>{for(let m=0;m<c.length;m++)if(c[m]===f)return c.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */let due=!1;const j4e=t=>{due=!0,y0e(t)};let hue;function V4e(){due||j4e(Us(Li(hue)))}function F2(t){const e=[];for(const i of Object.keys(t))customElements.get(`calcite-${i}`)||e.push(t[i]?.());return e.length>0?Promise.all(e):null}hue="components/assets";const pue=Symbol("widget"),fue=Symbol("widget-test-data"),U4e=[],B4e={},EC=new WeakMap;function mue(t,e){let i=e.children;if(i?.length)for(let s=0;s<i.length;++s)i[s]=mue(t,i[s]);else i=U4e;const r=e.vnodeSelector;if(MC(r)){const s=e.properties||B4e,n=s.key||r,o={key:n,afterCreate:q4e,afterUpdate:G4e,afterRemoved:yue,parentWidget:t,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function q4e(t,e,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){const o=new s(n);o.container=t,EC.set(t,o),o.afterCreate?.(o,t),r.addHandles(Et(()=>yue(t))),queueMicrotask(()=>{o[fue].projector?.renderNow()})}function G4e(t,e,i,{widgetProperties:r}){const s=EC.get(t);s&&(s.set(r),s.afterUpdate?.(s,t))}function yue(t){const e=EC.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),EC.delete(t))}function MC(t){return typeof t=="function"&&t[pue]}const JW=new Set;function H4e(t){JW.add(t),t.finally(()=>JW.delete(t))}function W4e(t){return Et()}var ZW;let J4e=0;function gue(t,e){const i=Object.prototype.hasOwnProperty;for(const r in e)i.call(e,r)&&i.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?gue(t[r],e[r]):t[r]=e[r]);return t}const Z4e=z4e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(r,s,n,o)=>{const a=e?.(r,s,n,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||l){const c=r[2].toLowerCase()+r.slice(3),d=m=>a?.call(n,m);n.addEventListener(c,d,l);const h=()=>n.removeEventListener(c,d,l),f=o.afterRemoved;o.afterRemoved=m=>{f?.(m),h()}}return a}},handleInterceptedEvent(t,e,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(aue(),t.scheduleRender(),l[a].call(l.bind||i,r))}});let JO=!1;var Ny;let gs=(Ny=class extends d3(Pg){constructor(e,i){super(e,i),this._attached=!1,this._projector=Z4e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=m_(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:c,propertyName:d})=>{if(this.destroyed)return;let h=await wne(c);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(h=gue(U(h),this.uiStrings)),this[d]=h)}));if(this.destroyed)return;for(const c of l)c.status==="rejected"&&X.getLogger(this).error("widget-intl:locale-error",this.declaredClass,c.reason)}await this.loadLocale()}),this.addHandles(W4e()),V4e();const r="esri-widget-uid-"+R_(),s=this.render.bind(this);this._trackingTarget=new h2(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;const l=s()??n(),c=l.properties??(l.properties={});if(c.key??(c.key=r),MC(l.vnodeSelector)){if(!this.visible)return n()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),(h=c.styles).display??(h.display="");let d=0;return l.children?.forEach(f=>{var m;MC(f.vnodeSelector)||(f.properties??(f.properties={}),(m=f.properties).key??(m.key=`${this.id}--${d++}`))}),mue(this,l)};this.render=()=>{if(JO)return o();let l=k4e(this)??null;if(l)return l;this._trackingTarget.clear(),JO=!0;try{l=Lu(this._trackingTarget,o)}catch(c){throw X.getLogger(this).error(c),c}finally{JO=!1}return l&&T4e(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),H4e(this._resourcesFetch)}normalizeCtorArgs(e,i){const r={...e};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(NB):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(bi(this._trackingTarget),bi(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,GO(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return $6(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+J4e++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(ZW=pue,fue)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(GO(this),this._projector.scheduleRender())}classes(...e){return E4e.apply(this,e)}renderNow(){GO(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(de(()=>this.viewModel,(i,r)=>{r&&this.removeHandles("delegated-events"),i&&LA(i)&&this.addHandles(this._delegatedEventNames.map(s=>ah(i,s,n=>{this.emit(s,n)})),"delegated-events")},Vs)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(NB),this.scheduleRender()};this.addHandles([a6(e),de(()=>this.uiStrings,e)]),this.addHandles(Ts(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},Ny[ZW]=!0,Ny.vnodeSelector="div",Ny);u([p()],gs.prototype,"_readyForTrueRender",void 0),u([p({value:null})],gs.prototype,"container",null),u([Mt("container")],gs.prototype,"castContainer",null),u([p()],gs.prototype,"icon",null),u([p()],gs.prototype,"id",null),u([p()],gs.prototype,"label",null),u([p()],gs.prototype,"renderable",null),u([p()],gs.prototype,"uiStrings",void 0),u([p()],gs.prototype,"viewModel",void 0),u([p({value:!0})],gs.prototype,"visible",null),u([p()],gs.prototype,"key",void 0),u([p()],gs.prototype,"children",void 0),u([p()],gs.prototype,"afterCreate",void 0),u([p()],gs.prototype,"afterUpdate",void 0),u([p()],gs.prototype,"afterRemoved",void 0),gs=u([M("esri.widgets.Widget")],gs);const Ng=gs,Y4e=new Map;function K4e(t){return Y4e.get(t)}function YW(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function X4e(t,e){return t.length!==e.length||t.some((i,r)=>i.text!==e[r].text)}function YI(t,e,i){!i||!e||t.find(r=>r.layerView===e&&r.text===i)||t.push({text:i,layerView:e})}function Q4e(t){return t.type==="bing-maps"}const dc=[];let sb=class extends _e{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ue,this.view=null,this._allLayerViewsChange=i=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(s=>de(()=>[s.suspended,s.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i?.removed&&i.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([ks(()=>this.view?.allLayerViews,"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ts(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e?.allLayerViews;dc.length=0;let r=!1,s=null;if(!e||!i)return void this._clear();i.forEach(o=>{if(o.suspended||!o.layer?.attributionVisible)return;const a=o.layer;if(YW(a,"user"))return void YI(dc,o,a.copyright);if(a.type==="integrated-mesh-3dtiles"&&a.hasGoogleUrl&&(r=!0,s=o),a.hasAttributionData){if(this._fetchedAttributionData.has(o)){const c=this._fetchedAttributionData.get(o);return void(c?YI(dc,o,this._getDynamicAttribution(c,e,a)):YW(a)&&YI(dc,o,a.copyright))}return void this._fetchAttributionData(o)}const l="portalItem"in a?a.portalItem?.accessInformation:void 0;YI(dc,o,l||a.copyright)});const n=i.find(o=>o.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){const o=K4e(this.view);if(o){const a=o.getAttributionText();for(let l=a.length-1;l>-1;--l)dc.unshift({text:a[l],layerView:n})}}r&&s&&dc.unshift({text:"Google Maps",layerView:s}),X4e(this.items,dc)&&(this.items.removeAll(),this.items.addMany(dc)),dc.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await u3(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=i.ok?this._createContributionIndex(i.value,Q4e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,i){const r=e.contributors,s={};if(!r)return s;for(let n=0;n<r.length;n++){const o=r[n],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,d=l.zoomMin-(i&&l.zoomMin?1:0),h=l.zoomMax-(i&&l.zoomMax?1:0),f=new Pe({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:fe.WGS84}),m={extent:$u(f),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:n};for(let y=d;y<=h;y++)s[y]??(s[y]=[]),s[y].push(m)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,i,r){const{extent:s,scale:n}=i;let o=r.tileInfo?.scaleToZoom(n)??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const a=e[o],l=qA(s.center.clone().normalize(),fe.WebMercator),c=new Set;return a?a.filter(d=>{const h=d.id,f=!c.has(h)&&l&&d.extent&&b2(d.extent,l);return f&&c.add(h),f}).sort((d,h)=>h.score-d.score||d.objectId-h.objectId).map(d=>d.attribution).join(", "):""}};u([p({readOnly:!0,type:ue})],sb.prototype,"items",void 0),u([p({readOnly:!0})],sb.prototype,"state",null),u([p()],sb.prototype,"view",void 0),sb=u([M("esri.widgets.Attribution.AttributionViewModel")],sb);const vue=sb,pn={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",hidden:"esri-hidden",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function eje(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:ije(t[e])}}}function tje(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function ije(t){return function(e,...i){tje(e)?C4e(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function Tf(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var rje=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},bue=function(t,e){for(var i=0,r=t.length;i<r;i++){var s=t[i];Array.isArray(s)?bue(s,e):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=rje(s)),e.push(s))}},sje=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var s=[];return bue(i,s),{vnodeSelector:t,properties:e||void 0,children:s,text:void 0,domNode:null}};function he(t,e,...i){return typeof t!="function"||MC(t)?sje(t,e??null,...i):t(e,...i)}function Nvt(...t){return t}const dv="esri-attribution",hv={base:dv,poweredBy:`${dv}__powered-by`,sources:`${dv}__sources`,open:`${dv}--open`,sourcesOpen:`${dv}__sources--open`,link:`${dv}__link`};let In=class extends Ng{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:s})=>{this._scheduleOverflowCheck(s)})}),this._mutationObserver=new MutationObserver(r=>{let s=!1;for(const n of r)if(n.type==="childList"||n.type==="characterData"||n.type==="attributes"){s=!0;break}s&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new vue}initialize(){this.addHandles(ks(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[hv.open]:this._isOpen};return he("div",{bind:this,class:this.classes(hv.base,pn.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return he("div",{class:hv.poweredBy},"Powered by"," ",he("a",{class:hv.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[hv.sourcesOpen]:e,[pn.interactive]:i};return he("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(hv.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=e,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([p()],In.prototype,"_isOpen",void 0),u([p()],In.prototype,"_isInteractive",null),u([p()],In.prototype,"_attributionTextOverflowed",void 0),u([p()],In.prototype,"_prevSourceNodeHeight",void 0),u([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],In.prototype,"attributionText",null),u([p()],In.prototype,"icon",null),u([p()],In.prototype,"itemDelimiter",void 0),u([p()],In.prototype,"label",null),u([p(),Tf("esri/widgets/Attribution/t9n/Attribution")],In.prototype,"messages",void 0),u([p()],In.prototype,"view",null),u([p({type:vue})],In.prototype,"viewModel",void 0),u([eje()],In.prototype,"_toggleState",null),In=u([M("esri.widgets.Attribution")],In);const nje=In;function oje(){const t=H("mapview-essential-goto-duration");return t==null?t:t}function aje(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function lje(t,e,i){return t.goTo(e,i)}const cje=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:s}=this;return Rf(s),this.goToOverride?this.goToOverride(s,r):lje(s,r.target,r.options)}};return u([p()],i.prototype,"goToOverride",void 0),u([p()],i.prototype,"view",void 0),i=u([M("esri.widgets.support.GoTo")],i),i};let Tm=class extends cje(_e){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Fi)}destroy(){this.view=null}get canShowNorth(){return aje(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:oje()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?de(()=>e?.rotation,this._updateForRotation,Fi):de(()=>e?.camera,this._updateForCamera,Fi))}_watchForView(e){this.addHandles(de(()=>this.view,this._updateRotationWatcher,e))}};u([p({readOnly:!0})],Tm.prototype,"canShowNorth",null),u([p({readOnly:!0})],Tm.prototype,"orientation",void 0),u([p({readOnly:!0})],Tm.prototype,"state",null),u([p()],Tm.prototype,"view",void 0),Tm=u([M("esri.widgets.Compass.CompassViewModel")],Tm);const wue=Tm,KW="esri-compass",XW={base:KW,iconContainer:`${KW}__icon-container`};let hd=class extends Ng{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new wue,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return F2({button:()=>K(()=>Promise.resolve().then(()=>W2),void 0),icon:()=>K(()=>Promise.resolve().then(()=>kee),void 0)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,{messages:r}=this;return he("div",{class:this.classes(XW.base,pn.widget)},he("calcite-button",{class:pn.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},he("div",{"aria-hidden":"true",class:XW.iconContainer,title:r.reset},he("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};u([p()],hd.prototype,"goToOverride",null),u([p()],hd.prototype,"icon",null),u([p()],hd.prototype,"label",null),u([p(),Tf("esri/widgets/Compass/t9n/Compass")],hd.prototype,"messages",void 0),u([p()],hd.prototype,"view",null),u([p({type:wue})],hd.prototype,"viewModel",void 0),hd=u([M("esri.widgets.Compass")],hd);const uje=hd,QW="esri-navigation-toggle",eJ={base:QW,isLayoutHorizontal:`${QW}--horizontal`};let nb=class extends _e{constructor(e){super(e),this._navigationMode="pan",this.view=null,e?.isDefaultViewModel||uxe(X.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(e={}){const{isDefaultViewModel:i,...r}=e;return r}initialize(){this.addHandles(Ts(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const e=this.view?.navigation?.actionMap;if(!e)return;const i=this._navigationMode==="pan";e.dragPrimary=i?"pan":"rotate",e.dragSecondary=i?"rotate":"pan"}};u([p({readOnly:!0})],nb.prototype,"state",null),u([p()],nb.prototype,"_navigationMode",void 0),u([p()],nb.prototype,"view",void 0),nb=u([M("esri.widgets.NavigationToggle.NavigationToggleViewModel")],nb);const _ue=nb;let pd=class extends Ng{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new _ue({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;cue(r),this.toggle()},e?.isDefaultUI||cxe(X.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:i,...r}=e;return r}loadDependencies(){return F2({button:()=>K(()=>Promise.resolve().then(()=>W2),void 0)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return he("div",{class:this.classes(eJ.base,pn.widget,{[eJ.isLayoutHorizontal]:this.layout==="horizontal"})},he("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:i?"outline-fill":"solid",class:pn.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),he("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:i?"solid":"outline-fill",class:pn.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};u([p()],pd.prototype,"icon",null),u([p()],pd.prototype,"label",null),u([p({value:"vertical"})],pd.prototype,"layout",null),u([p(),Tf("esri/widgets/NavigationToggle/t9n/NavigationToggle")],pd.prototype,"messages",void 0),u([p()],pd.prototype,"view",null),u([p({type:_ue})],pd.prototype,"viewModel",void 0),pd=u([M("esri.widgets.NavigationToggle")],pd);const dje=pd;let Em=class extends _e{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};u([p({readOnly:!0})],Em.prototype,"canZoomIn",null),u([p({readOnly:!0})],Em.prototype,"canZoomOut",null),u([p()],Em.prototype,"view",void 0),u([p()],Em.prototype,"_scale",null),Em=u([M("esri.widgets.Zoom.ZoomConditions2D")],Em);const hje=Em;let ob=class extends _e{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([p({readOnly:!0})],ob.prototype,"canZoomIn",null),u([p({readOnly:!0})],ob.prototype,"canZoomOut",null),u([p()],ob.prototype,"view",void 0),ob=u([M("esri.widgets.Zoom.ZoomConditions3D")],ob);const pje=ob;let pp=class extends _e{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new hje({view:e}):e.type==="3d"&&(this._zoomConditions=new pje({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():ng(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():ng(e.goTo({zoomFactor:.5})))}};u([p()],pp.prototype,"_zoomConditions",void 0),u([p()],pp.prototype,"canZoomIn",null),u([p()],pp.prototype,"canZoomOut",null),u([p({readOnly:!0})],pp.prototype,"state",null),u([p()],pp.prototype,"view",null),pp=u([M("esri.widgets.Zoom.ZoomViewModel")],pp);const xue=pp,tJ={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let fd=class extends Ng{constructor(e,i){super(e,i),this.messages=null,this.viewModel=new xue,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return F2({button:()=>K(()=>Promise.resolve().then(()=>W2),void 0)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[tJ.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return he("div",{class:this.classes(tJ.base,pn.widget,e)},he("calcite-button",{class:pn.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),he("calcite-button",{class:pn.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};u([p()],fd.prototype,"icon",null),u([p()],fd.prototype,"label",null),u([p({value:"vertical"})],fd.prototype,"layout",null),u([p(),Tf("esri/widgets/Zoom/t9n/Zoom")],fd.prototype,"messages",void 0),u([p()],fd.prototype,"view",null),u([p({type:xue})],fd.prototype,"viewModel",void 0),fd=u([M("esri.widgets.Zoom")],fd);const fje=fd;function mje(t){return t?.view!==void 0}let uE=class extends L4e{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const s=this._find(r),n=s?.widget;mje(n)&&(n.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([de(()=>this.components,this._componentsWatcher,Fi),de(()=>this.view,this._updateViewAwareWidgets,Fi)])}_add(e,i,r,s,n){let o=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;o=this._createComponent(e)}super._add(o,i,r,s,n)}_removeComponents(e){e.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);return new cE({id:e,node:i})}_createWidget(e){const i=this.view;switch(e){case"attribution":return new nje({view:i});case"compass":return new uje({view:i});case"navigation-toggle":return new dje({view:i,isDefaultUI:!0});case"zoom":return new fje({view:i})}}};u([p()],uE.prototype,"components",void 0),uE=u([M("esri.views.ui.DefaultUI")],uE);const Sue=uE;let dE=class extends Sue{constructor(e){super(e),this.components=["attribution","zoom"]}};u([p()],dE.prototype,"components",void 0),dE=u([M("esri.views.ui.2d.DefaultUI2D")],dE);const $ue=dE;let yje=class{constructor(e={},i={},r=8,s=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=i,this.maxAnisotropy=r,this.maxPreferredTexturePixels=s}},b8=class Iz{constructor(e,i,r=""){this.major=e,this.minor=i,this._context=r}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}greaterEqual(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new R(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new Iz(this.major,this.minor,this._context)}static parse(e,i=""){const[r,s]=e.split("."),n=/^\s*\d+\s*$/;if(!r?.match||!n.test(r))throw new R((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s?.match||!n.test(s))throw new R((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(s,10);return new Iz(o,a,i)}},k0=class extends b8{constructor(e,i){super(e,i,"webmap")}};function ZO(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}const Iue=new k0(2,35);var kz;let hE=kz=class extends Y{constructor(t){super(t),this.color=new ne([0,0,0,1])}clone(){return new kz(U({color:this.color}))}};u([p({type:ne,json:{write:!0}})],hE.prototype,"color",void 0),hE=kz=u([M("esri.webmap.background.ColorBackground")],hE);const P3=hE;let kue,Tue,Eue,Mue,Cue,Pue,Aue;async function gje(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([K(()=>import("./webglDeps-DoRE9HE8.js"),__vite__mapDeps([164,122,165,166,167])),K(()=>import("./mapViewDeps-BbgrU6lf.js"),__vite__mapDeps([168,169,170,122,165,166,113,55,171,57,167,121,172,54,78,173,103,105,58,63,174,60,61,164,175,73,176,177,178,111,112,53,56,14,13,179,62,180,59,128,129,68,181,64,70,182,51,183,184,185,186,118,187,188]))]);Tue=t,Eue=e,Mue=i,Cue=r,Pue=s,Aue=n,kue=o}var cw;let St=(cw=class extends u5e(VDe(JMe(kPe(sPe(fNe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new ra({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new I3({actionMap:new n8({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new Bw,this.analysisViewManager=new p4e({importAnalysisViewModule:i=>Q5e(i),view:this}),this.floors=new ue,this.grid=null,this.map=null,this.timeline=new rue,this.type="2d",this.view2dType=null,this.ui=new $ue,this.animationsEnabled=!0,this.test={takeScreenshot:async i=>l4e(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},nMe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=bi(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new cze(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,i=this.spatialReference;return{lods:e?.spatialReference?.equals(i)?e.lods:null,spatialReference:i}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:i,center:r,viewpoint:s,extent:n}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(i?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(s?.targetGeometry==null||s.targetGeometry.type!=="extent"&&!s.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=e.targetGeometry,r=this.spatialReference;return Rne(i.spatialReference,r)}get background(){return ZO(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return Gze(this)}set highlightOptions(e){Hze(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&X.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),i=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(H("esri-2d-log-updating")){const r=this.allLayerViews.reduce((s,n)=>({...s,[`${n.layer.id}(${n.layer.type})`]:!n.destroyed&&!("layerViews"in n)&&n.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return i}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new vi({rings:[e.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,i){return Wze(this,e,i)}async takeScreenshot(e){return a4e(this._getScreenshotView(e),e)}toScreen(e,i){return this.stateManager.toScreen(e,i)}async whenAnalysisView(e){if(e.parent==null)throw new R("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return ZO(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return ZO(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return MW.hasLayerViewModule(e)}importLayerView(e){return MW.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(X.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const i=this.toMap(e),r=await this.hitTest(e),s=this.allLayerViews.toArray().filter(c=>c.clips.every(d=>Hce(this,d,e,i))).reverse(),n=new globalThis.Map(s.map(c=>[c.layer.uid,c])),o=[];let a=0,l=0;for(;a<r.results.length||l<s.length;){const c=r.results.at(a);if(c&&c.type!=="graphic"){++a;continue}const d=n.get((c?.layer??c?.graphic.layer)?.uid);if((!c||d)&&l<s.length&&s.at(l)!==d){const h=s.at(l);"fetchPopupFeaturesAtLocation"in h&&o.push({mapPoint:i,layerView:h}),++l}else c&&(o.push({graphic:c.graphic,layerView:d}),++a)}return{hits:o,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=b4e(this.type);if(H("safari")&&H("safari")<9&&(e=new R("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:H("safari")})),e!=null)throw X.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return gje()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:s,size:n}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o?.viewpoint,c=l?.targetGeometry?.extent??i,d=c?.center,h=l?.rotation??0,f=l?.scale||c&&T3(c,[n[0]-s.left-s.right,n[1]-s.top-s.bottom]),m=a.center??d,y=a.rotation??h,v=a.scale??f;return m&&v?new us({targetGeometry:m,scale:v,rotation:y}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const i=new eze(this.surface),r=new kue(this.surface,{canvas:this.renderCanvas,contextOptions:new yje(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},i);this.stage=r,this._magnifierView=new Pue,this._magnifierView.magnifier=this.magnifier,this._gridView=new Aue;const s=new Mue({view:this});this._set("labelManager",s);const n=new U5e({view:this});this._set("animationManager",n);const o=new Cue({view:this,animationManager:n});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),de(()=>this.stationary,l=>r.stationary=l,Vs),de(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},Vs),de(()=>this.magnifier,l=>this._magnifierView.magnifier=l,Vs),de(()=>this.grid,l=>this._gridView.grid=l,Vs),de(()=>this.renderingOptions,l=>r.renderingOptions=l,Vs),de(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=Bze(r.highlightGradient,this.highlights.items)},Vs),de(()=>this.state.id,()=>r.state=this.state,Vs),de(()=>this.animationsEnabled,l=>{this.stage.animationsEnabled=l},Vs)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new J5e(Ti.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Tue({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Eue(e)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:i,padding:r,size:s,stage:n}=this;return{allLayerViews:i,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:s,stage:n}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},cw.type="2d",cw);u([p({constructOnly:!0})],St.prototype,"deactivatedWebGLExtensions",void 0),u([p({constructOnly:!0})],St.prototype,"debugWebGLExtensions",void 0),u([p({readOnly:!0})],St.prototype,"featuresTilingScheme",void 0),u([p({readOnly:!0})],St.prototype,"graphicsTileStore",null),u([p()],St.prototype,"graphicsView",void 0),u([p()],St.prototype,"constraintsInfo",null),u([p()],St.prototype,"initialExtentRequired",null),u([p()],St.prototype,"labelManager",void 0),u([p({type:I3,nonNullable:!0})],St.prototype,"navigation",void 0),u([p({constructOnly:!0})],St.prototype,"renderCanvas",void 0),u([p()],St.prototype,"renderingOptions",void 0),u([p({constructOnly:!0})],St.prototype,"supersampleScreenshotsEnabled",void 0),u([p()],St.prototype,"defaultsFromMapSettings",null),u([p({readOnly:!0})],St.prototype,"typeSpecificPreconditionsReady",null),u([p(nF(Bw,"analyses"))],St.prototype,"analyses",void 0),u([p()],St.prototype,"analysisViewManager",void 0),u([p({type:P3})],St.prototype,"background",null),u([p()],St.prototype,"center",null),u([p({type:ue})],St.prototype,"floors",void 0),u([p()],St.prototype,"grid",void 0),u([p({type:cf})],St.prototype,"highlightOptions",null),u([p()],St.prototype,"map",void 0),u([p()],St.prototype,"padding",null),u([p({readOnly:!0})],St.prototype,"rendering",null),u([p({readOnly:!0})],St.prototype,"resolution",null),u([p()],St.prototype,"scale",null),u([p({type:Boolean,value:!1})],St.prototype,"spatialReferenceLocked",null),u([p({readOnly:!0})],St.prototype,"tileInfo",null),u([p({type:rue,readOnly:!0})],St.prototype,"timeline",void 0),u([p({readOnly:!0})],St.prototype,"type",void 0),u([p({readOnly:!0})],St.prototype,"updating",null),u([p({readOnly:!0})],St.prototype,"view2dType",void 0),u([p({readOnly:!0})],St.prototype,"visibleArea",null),u([p()],St.prototype,"zoom",null),u([p({readOnly:!0})],St.prototype,"navigating",null),u([p(),Mt(t=>t instanceof Sue?t:ag($ue,t))],St.prototype,"ui",void 0),u([p()],St.prototype,"animationsEnabled",void 0),St=u([M("esri.views.View2D")],St);const vje=St;let pE=class extends vje{constructor(e){super(e),this.view2dType="map"}};u([p({readOnly:!0})],pE.prototype,"view2dType",void 0),pE=u([M("esri.views.MapView")],pE);const bje=pE;let wje=class Lue{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(vD),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new Lue,r=this._originStores[0];r&&r.forEach((s,n)=>{i.set(n,U(s),0)});for(let s=2;s<vD;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{e&&e.has(a)||i.set(a,U(o),s)})}return i}get(e,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,r=7){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,r),n!==i}return!1}delete(e,i=7){const r=this._originStores[i];if(!r)return;const s=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,n);break}}}return s}has(e,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const r=this._originStores[i],s=r?.get(e),n=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,i),n!==s}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,i){return this.has(e,i)&&this.originOf(e)===i}isBelowOrigin(e,i){return!this.has(e)||this.originOf(e)<i}forEach(e){this._values.forEach(e)}};const Oue=t=>{const e=t;let i=class extends e{constructor(...r){super(...r);const s=cs(this),n=s.store,o=new wje;s.store=o,aie(s,n,o)}read(r,s){cie(this,r,s)}getAtOrigin(r,s){const n=YO(this),o=_o(s);if(typeof r=="string")return n.get(r,o);const a={};return r.forEach(l=>{a[l]=n.get(l,o)}),a}originOf(r){return lg(this.originIdOf(r))}originIdOf(r){return YO(this).originOf(r)}revert(r,s){const n=YO(this),o=_o(s),a=cs(this);let l;l=typeof r=="string"?r==="*"?n.keys(o):[r]:r,l.forEach(c=>{a.invalidate(c),n.revert(c,o),a.commit(c)})}};return i=u([M("esri.core.ReadOnlyMultiOriginJSONSupport")],i),i};function YO(t){return cs(t).store}Oue(_e);const _je=t=>{const e=t;let i=class extends e{constructor(...r){super(...r)}clear(r,s="user"){cs(this).clearOrigin(r,_o(s))}write(r,s){return pie(this,r=r||{},s),r}setAtOrigin(r,s,n){cs(this).setAtOrigin(r,s,_o(n))}removeOrigin(r){const s=iJ(this),n=_o(r),o=s.keys(n);for(const a of o)s.originOf(a)===n&&s.set(a,s.get(a,n),7)}updateOrigin(r,s){const n=iJ(this),o=_o(s),a=Ga(this,r);for(let l=o+1;l<vD;++l)n.delete(r,l);n.set(r,a,o)}toJSON(r){return this.write({},r)}};return i=u([M("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function iJ(t){return cs(t).store}const oc=t=>{const e=_je(Oue(t));let i=class extends e{};return i=u([M("esri.core.MultiOriginJSONSupport")],i),i},Rue=oc(_e);async function xje(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return Hb(t);const i=fe.WGS84;return await S6(e,i),Ff(t,i)}function Sje(t,e){if(!w8(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function w8(t,e){return!!t.typeKeywords?.includes(e)}function rJ(t){return w8(t,_8.HOSTED_SERVICE)}function $je(t,e){const i=t.typeKeywords;if(i){const r=i.indexOf(e);r>-1&&i.splice(r,1)}}function Kvt(t,e,i){i?Sje(t,e):$je(t,e)}async function Xvt(t){const e=t.clone().normalize();let i;if(e.length>1)for(const r of e)i?r.width>i.width&&(i=r):i=r;else i=e[0];return xje(i)}const _8={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function Ije(t){const{portal:e,isOrgItem:i,itemControl:r}=t,s=e.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!s?.includes("features:user:fullEdit");const a=r==="update"||r==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}let fp=class extends Y{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([p({type:String,json:{write:{isRequired:!0}}})],fp.prototype,"facilityIdField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],fp.prototype,"layerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],fp.prototype,"nameField",void 0),u([p({type:String,json:{write:!0}})],fp.prototype,"siteIdField",void 0),u([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],fp.prototype,"sublayerId",void 0),fp=u([M("esri.layers.support.FacilityLayerInfo")],fp);const kje=fp;let wl=class extends Y{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"facilityIdField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"layerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"levelIdField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"levelNumberField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"longNameField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"shortNameField",void 0),u([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],wl.prototype,"sublayerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],wl.prototype,"verticalOrderField",void 0),wl=u([M("esri.layers.support.LevelLayerInfo")],wl);const Tje=wl;let Mm=class extends Y{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([p({type:String,json:{write:{isRequired:!0}}})],Mm.prototype,"layerId",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],Mm.prototype,"nameField",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],Mm.prototype,"siteIdField",void 0),u([p({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Mm.prototype,"sublayerId",void 0),Mm=u([M("esri.layers.support.SiteLayerInfo")],Mm);const Eje=Mm;let ab=class extends Y{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};u([p({type:Tje,json:{write:{isRequired:!0}}})],ab.prototype,"levelLayer",void 0),u([p({type:kje,json:{write:{isRequired:!0}}})],ab.prototype,"facilityLayer",void 0),u([p({type:Eje,json:{write:!0}})],ab.prototype,"siteLayer",void 0),ab=u([M("esri.support.MapFloorInfo")],ab);const Mje=ab;var Tz;let lb=Tz=class extends Y{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Tz(U({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};u([p({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],lb.prototype,"activeRange",void 0),u([p({type:[Number],json:{write:!0}})],lb.prototype,"currentRangeExtent",void 0),u([p({type:[Number],json:{write:!0}})],lb.prototype,"fullRangeExtent",void 0),lb=Tz=u([M("esri.webdoc.RangeInfo")],lb);const x8=lb;var Ez;let Sc=Ez=class extends Y{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Ez(U({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};u([p({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Sc.prototype,"enabled",void 0),u([p({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Sc.prototype,"longNames",void 0),u([p({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Sc.prototype,"minimized",void 0),u([p({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Sc.prototype,"pinnedLevels",void 0),u([p({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Sc.prototype,"site",void 0),u([p({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Sc.prototype,"facility",void 0),u([p({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Sc.prototype,"level",void 0),Sc=Ez=u([M("esri.webdoc.widgets.FloorFilter")],Sc);const Cje=Sc;var Mz;const KI=new We({slider:"slider",picker:"picker"});let cb=Mz=class extends Y{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new Mz({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};u([p({type:KI.apiValues,nonNullable:!0,json:{type:KI.jsonValues,default:null,read:{reader:KI.read},write:{isRequired:!0,writer:KI.write}}})],cb.prototype,"interactionMode",void 0),u([p({type:Ke,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],cb.prototype,"numStops",void 0),u([p({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],cb.prototype,"stopInterval",void 0),cb=Mz=u([M("esri.webdoc.widgets.Range")],cb);const Pje=cb,S8=Qr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let $o=class extends Le(Y){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return woe(this.value,this.unit,"milliseconds")}};u([Ee(S8,{nonNullable:!0})],$o.prototype,"unit",void 0),u([p({type:Number,json:{write:!0},nonNullable:!0})],$o.prototype,"value",void 0),$o=u([M("esri.time.TimeInterval")],$o);var Cz;let ts=Cz=class extends Y{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){return t?pt.fromArray(t):void 0}writeCurrentTimeExtent(t,e,i){t&&Tr(i,t.toArray(),e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const r=i.endTime!=null?new Date(i.endTime):null,s=i.startTime!=null?new Date(i.startTime):null;return new pt({start:s,end:r})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},r=t.end,s=t.start;r&&(i.endTime=r!=null?r.getTime():null),s&&(i.startTime=s!=null?s.getTime():null)}readStopInterval(t,e,i){return t?$o.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,r){if(!t)return;const s=t.toJSON(r);Tr("properties.timeStopInterval",{interval:s.value,units:s.unit},e)}readStops(t){return t?.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t?.length&&Tr(i,t.map(r=>r.getTime()),e)}clone(){return new Cz(U({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};u([p({type:pt,json:{type:[[Ke,v_]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ts.prototype,"currentTimeExtent",void 0),u([Q("currentTimeExtent")],ts.prototype,"readCurrentTimeExtent",null),u([oe("currentTimeExtent")],ts.prototype,"writeCurrentTimeExtent",null),u([p({type:pt,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ts.prototype,"fullTimeExtent",void 0),u([Q("fullTimeExtent")],ts.prototype,"readFullTimeExtent",null),u([oe("fullTimeExtent")],ts.prototype,"writeFullTimeExtent",null),u([p({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ts.prototype,"loop",void 0),u([p({type:Ke,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const t=!!this.stopInterval,e=!!this.stops?.length,i=!(t||e);return{enabled:i,isRequired:i}}}}})],ts.prototype,"numStops",void 0),u([p({type:[1,2],nonNullable:!0,json:{type:Ke,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ts.prototype,"numThumbs",void 0),u([p({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ts.prototype,"stopDelay",void 0),u([p({type:$o,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:S8.jsonValues.filter(t=>t!=="esriTimeUnitsUnknown")}},overridePolicy(){const t=this.numStops!=null,e=!!this.stops?.length;return{enabled:!e,isRequired:!(t||e)}}}}})],ts.prototype,"stopInterval",void 0),u([Q("stopInterval")],ts.prototype,"readStopInterval",null),u([oe("stopInterval")],ts.prototype,"writeStopInterval",null),u([p({type:[Date],json:{type:[Ke],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],ts.prototype,"stops",void 0),u([Q("stops")],ts.prototype,"readStops",null),u([oe("stops")],ts.prototype,"writeStops",null),ts=Cz=u([M("esri.webdoc.widgets.TimeSlider")],ts);const Nue=ts;var Pz;let ub=Pz=class extends Y{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Pz(U({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};u([p({type:Pje,json:{write:!0}})],ub.prototype,"range",void 0),u([p({type:Nue,json:{write:!0}})],ub.prototype,"timeSlider",void 0),u([p({type:Cje,json:{write:!0}})],ub.prototype,"floorFilter",void 0),ub=Pz=u([M("esri.webdoc.Widgets")],ub);const Due=ub,Aje={width:600,height:400},XI=1.5;function Lje(t,e){e=e||Aje;let{width:i,height:r}=e;const s=i/r;return s<XI?r=i/XI:s>XI&&(i=r*XI),i>t.width&&(r*=t.width/i,i=t.width),r>t.height&&(i*=t.height/r,r=t.height),{width:Math.round(i),height:Math.round(r)}}function Fue(t,e){return{...zue(t,e),readResourcePaths:[]}}function sbt(t,e,i){const r=$t(t.itemUrl);return{...zue(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function zue(t,e){return{origin:e,url:$t(t.itemUrl),portal:t.portal||ce.getDefault(),portalItem:t}}let kp=class extends Y{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(s=>s.toJSON()),i=this.geometries[0],r={};return r.outSR=pg(this.outSpatialReference),r.inSR=pg(i.spatialReference),r.geometries=JSON.stringify({geometryType:Cg(i),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};u([p()],kp.prototype,"geometries",void 0),u([p({type:fe,json:{read:{source:"outSR"}}})],kp.prototype,"outSpatialReference",void 0),u([p()],kp.prototype,"transformation",void 0),u([p()],kp.prototype,"transformForward",void 0),kp=u([M("esri.rest.support.ProjectParameters")],kp);const Oje=Mi(kp);async function Rje(t,e,i){e=Oje(e);const r=Rh(t),s={...r.query,f:"json",...e.toJSON()},n=e.outSpatialReference,o=Cg(e.geometries[0]),a=FNe(s,i);return xe(r.path+"/project",a).then(({data:{geometries:l}})=>Ule(l,o,n))}function Nje(t,e){return e.resourceInfo?jue(e,e.resourceInfo,{origin:t.origin}):e.portalItem?.id?Dje(t,e,e.portalItem):Promise.resolve()}function jue(t,e,i){const r={context:{...i,layerContainerType:"operational-layers"}};return t.portalItem&&(r.context.portal=t.portalItem.portal||ce.getDefault()),K(async()=>{const{populateOperationalLayers:s}=await import("./layersCreator-bLz-Ln8H.js");return{populateOperationalLayers:s}},__vite__mapDeps([150,147,146,145,148,144])).then(({populateOperationalLayers:s})=>{const n=[],o=e.operationalLayers;o?.length&&n.push(s(t.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l?.length&&n.push(s(t.tables,l,a)),Promise.allSettled(n).then(()=>{})})}async function Dje(t,e,i){if(await i.load().catch(o=>{throw new R(`${t.name}:load-portal-item`,"Failed to load portal item",{error:o})}),i.type!==t.itemType)throw new R(`${t.name}:invalid-portal-item`,`Invalid portal item type '${i.type}', expected '${t.itemType}'`,{type:i.type});const r=await i.fetchData();e.resourceInfo=r;const s=Fue(i,t.origin);await Fje(t,e,r,s),e.resourceReferences={portalItem:i,paths:s.readResourcePaths};const n=await jje(e.initialViewProperties,i,X.getLogger(e));if(n){const o=e.initialViewProperties?.clone()??t.createInitialViewProperties();o.viewpoint=n,e.initialViewProperties=o}}function Fje(t,e,i,r){const s=zje(t,i);return e.read(s,r),jue(e,s,r)}function zje(t,e){const i=t.parseVersion(e.version||"",t.name);return t.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}async function jje(t,e,i){if(t?.viewpoint?.targetGeometry)return null;const s=await Vje(t,e,i);return s?new us({targetGeometry:s}):null}async function Vje(t,e,i){const r=t?.spatialReference,s=e?.extent;if(!r||!s)return null;if(r.isWGS84)return s.clone();if(r.isWebMercator)return $u(s);const{getGeometryServiceURL:n}=await K(()=>import("./geometryServiceUtils-0wbHXPEV.js"),[]);try{const o=await n(e),a=new kp({geometries:[s],outSpatialReference:r});return(await Rje(o,a))[0]}catch(o){i.error("Error projecting item's extent:",o)}return null}function sJ(t){return{enabled:!!t?.length}}var Az;let db=Az=class extends Y{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Az({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([p({type:Boolean,json:{write:!0}})],db.prototype,"exactMatch",void 0),u([p({type:String,json:{write:!0}})],db.prototype,"name",void 0),u([Ee(r8)],db.prototype,"type",void 0),db=Az=u([M("esri.webdoc.applicationProperties.SearchLayerField")],db);const Uje=db;var Lz;let hb=Lz=class extends Y{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new Lz(U({field:this.field,id:this.id,subLayer:this.subLayer}))}};u([p({type:Uje,json:{write:{isRequired:!0}}})],hb.prototype,"field",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],hb.prototype,"id",void 0),u([p({type:Ke,json:{write:!0}})],hb.prototype,"subLayer",void 0),hb=Lz=u([M("esri.webdoc.applicationProperties.SearchLayer")],hb);const Bje=hb;var Oz;let pb=Oz=class extends Y{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Oz({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([p({type:Boolean,json:{write:!0}})],pb.prototype,"exactMatch",void 0),u([p({type:String,json:{write:!0}})],pb.prototype,"name",void 0),u([Ee(r8)],pb.prototype,"type",void 0),pb=Oz=u([M("esri.webdoc.applicationProperties.SearchTableField")],pb);const qje=pb;var Rz;let gx=Rz=class extends Y{constructor(t){super(t),this.field=null,this.id=null}clone(){return new Rz(U({field:this.field,id:this.id}))}};u([p({type:qje,json:{write:{isRequired:!0}}})],gx.prototype,"field",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],gx.prototype,"id",void 0),gx=Rz=u([M("esri.webdoc.applicationProperties.SearchTable")],gx);const Gje=gx;var Nz;const Vue=ue.ofType(Bje),Uue=ue.ofType(Gje);let $c=Nz=class extends Y{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Vue,this.tables=new Uue}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new Nz(U({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};u([p({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],$c.prototype,"addressSearchEnabled",void 0),u([Q("addressSearchEnabled")],$c.prototype,"readAddressSearchEnabled",null),u([oe("addressSearchEnabled")],$c.prototype,"writeAddressSearchEnabled",null),u([p({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],$c.prototype,"enabled",void 0),u([p({type:String,json:{write:!0}})],$c.prototype,"hintText",void 0),u([p({type:Vue,json:{write:{overridePolicy:sJ},origins:{"web-scene":{write:{isRequired:!0}}}}})],$c.prototype,"layers",void 0),u([p({type:Uue,json:{read:!0,write:{overridePolicy:sJ}}})],$c.prototype,"tables",void 0),$c=Nz=u([M("esri.webdoc.applicationProperties.Search")],$c);const Hje=$c;var Dz;let fE=Dz=class extends Y{constructor(t){super(t),this.search=null}clone(){return new Dz(U({search:this.search}))}};u([p({type:Hje,json:{write:!0}})],fE.prototype,"search",void 0),fE=Dz=u([M("esri.webdoc.applicationProperties.Viewing")],fE);const Wje=fE;var Fz;let fb=Fz=class extends Y{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Fz(U({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};u([p({json:{write:!0}})],fb.prototype,"editing",void 0),u([p({json:{write:!0}})],fb.prototype,"offline",void 0),u([p({type:Wje,json:{write:!0}})],fb.prototype,"viewing",void 0),fb=Fz=u([M("esri.webmap.ApplicationProperties")],fb);const Jje=fb;var zz;let Kd=zz=class extends Y{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return Sie(this.url)}get isDataURI(){return Ah(this.url)}clone(){return new zz({url:this.url})}};u([p({type:String,json:{write:{isRequired:!0}}})],Kd.prototype,"url",void 0),u([p()],Kd.prototype,"isSecureUrl",null),u([p()],Kd.prototype,"isDataURI",null),Kd=zz=u([M("esri.webdoc.support.SlideThumbnail")],Kd);const Zje={type:pt,json:{read:{source:"timeExtent",reader:t=>t?Array.isArray(t)?pt.fromArray(t):pt.fromJSON(t):null},write:{writer:(t,e,i,r)=>{t&&(t.isEmpty?r?.messages&&r.messages.push(new R("invalid-timeExtent","TimeExtent cannot be empty")):e[i]=t.toArray())},target:{timeExtent:{type:[[Ke,v_]]}}}}};var jz;let Ic=jz=class extends O_(Y){constructor(t){super(t),this.name=null,this.thumbnail=new Kd,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new Kd({url:t}):Mi(Kd,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;e!=null&&e.type==="point"&&i==null&&X.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:r}=e;return us.fromJSON(r||{targetGeometry:i})}writeViewpoint(t,e,i,r){if(!t)return;const{targetGeometry:s}=t;if(s!=null&&s.type!=="extent"){const n="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";return void(r?.messages?r.messages.push(new R("property:unsupported",n)):X.getLogger(this).error(n))}s!=null&&(e.extent=s.toJSON()),e[i]=t.toJSON()}clone(){return new jz(U({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};u([p({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Ic.prototype,"name",void 0),u([p({type:Kd,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Ic.prototype,"thumbnail",void 0),u([Mt("thumbnail")],Ic.prototype,"castThumbnail",null),u([p(Zje)],Ic.prototype,"timeExtent",void 0),u([p({type:us,nonNullable:!0,json:{write:!0}})],Ic.prototype,"viewpoint",null),u([Q("viewpoint",["extent","viewpoint"])],Ic.prototype,"readViewpoint",null),u([oe("viewpoint")],Ic.prototype,"writeViewpoint",null),Ic=jz=u([M("esri.webmap.Bookmark")],Ic);const Yje=Ic;let md=class extends Le(_e){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=ga,this.viewpoint=null}};u([p({type:P3})],md.prototype,"background",void 0),u([p({type:x8})],md.prototype,"rangeInfo",void 0),u([p({type:fe})],md.prototype,"spatialReference",void 0),u([p({type:pt})],md.prototype,"timeExtent",void 0),u([p({nonNullable:!0})],md.prototype,"timeZone",void 0),u([p({type:us})],md.prototype,"viewpoint",void 0),md=u([M("esri.webmap.InitialViewProperties")],md);const CC=md,Bue=ue.ofType(Yje),Kje=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Xje="ArcGIS Pro",Qje=_8.JSAPI;let xi=class extends oc(L6(d3(rae))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Bue,this.floorInfo=null,this.initialViewProperties=new CC,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=m_(async(i,r,s)=>{const{save:n,saveAs:o}=await K(()=>import("./webdocSaveUtils-0hQ9niVZ.js"),__vite__mapDeps([262,263,264,265,266,267]));switch(i){case 0:return n(this.context,this,r);case 1:return o(this.context,this,s,r)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=bi(this.portalItem)}initialize(){if(this.when().catch(e=>{X.getLogger(this).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=Qje}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=Aie}readInitialViewProperties(e,i){const r=new CC;i.background&&(r.background=P3.fromJSON(i.background));const s=i.initialState?.timeExtent;s&&(r.timeExtent=pt.fromArray(s));const n=i.initialState?.viewpoint;return n&&(n.rotation&&k0.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===Xje&&(n.rotation*=-1),r.viewpoint=us.fromJSON(n)),i.mapRangeInfo&&(r.rangeInfo=x8.fromJSON(i.mapRangeInfo)),i.spatialReference&&(r.spatialReference=fe.fromJSON(i.spatialReference)),i.timeZone&&(r.timeZone=i.timeZone),r}writeInitialViewProperties(e,i,r,s){if(!e)return;e.background?.color&&(i.background=e.background.write({},s));const{timeExtent:n,viewpoint:o}=e;if(o||n){const a={};o&&(a.viewpoint=o.write({},s)),n&&(a.timeExtent=n.toArray()),i.initialState=a}e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(s)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},s)),i.timeZone=e.timeZone}writeLayers(e,i,r,s){i[r]=this._writeLayers(e,s,"operational-layers")}get loaded(){return super.loaded}readSourceVersion(e,i){const[r,s]=i.version.split(".");return new k0(parseInt(r,10),parseInt(s,10))}writeSourceVersion(e,i,r){i[r]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,i,r,s){const n=this._writeLayers(e,s,"tables");n.length&&(i[r]=n)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(Nje(this.context,this)),Promise.resolve(this)}loadAll(){return L_(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:this.context.origin};const r=this._getAuthoringPropsState();uie(this,e,s=>super.read(e,s),i),this._restoreAuthoringPropsFromState(r)}write(e,i){if(this.loadStatus!=="loaded"){const r=new R("webmap:not-loaded","Web map must be loaded before it can be serialized");throw X.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),r}return this._removeDanglingLayerRefs(),i={...i,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}async updateFrom(e,i){const r=this._updateFromInternal(e,i);this._updateFromPromise=r,await r,r===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){const i=this.resourceInfo;return this._collectAllLayersJSON([...i?.baseMap?.baseMapLayers||[],...i?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(r=>r.id===e.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:Tie(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((i,r)=>(i.push(r),r.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(r.layers||[]))),i),[])}_writeLayers(e,i,r){return i={...i,layerContainerType:r},e.map(s=>NT(s,r==="tables"?null:this.getLayerJSONFromResourceInfo(s),i)).filter(Ei).toArray()}_validateJSON(e){const i=k0.parse(e.version||"","webmap");return this.context.currentVersion.validate(i),e.version=`${i.major}.${i.minor}`,e}_removeDanglingLayerRefs(){const e=this.applicationProperties,i=e?.viewing?.search,r=o=>this.allLayers.some(a=>a.id===o);if(i?.layers&&(i.layers=i.layers.filter(o=>r(o.id))),i?.tables&&(i.tables=i.tables.filter(o=>this.tables.some(a=>a.id===o.id))),e){const o=e.editing?.locationTracking;o?.info&&!r(o.info.layerId)&&(e.editing=null)}const s="presentation"in this?this.presentation:null,n=s?.slides;n&&n.forEach(o=>{o.visibleLayers&&(o.visibleLayers=o.visibleLayers.filter(a=>r(a.id)))})}async _updateFromInternal(e,i){if(i??(i={}),await g_(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const r of e.allLayerViews)"visible"in r&&"visible"in r.layer&&r._isOverridden("visible")&&(r.layer.visible=r.visible),"featureEffect"in r&&"featureEffect"in r.layer&&r._isOverridden("featureEffect")&&(r.layer.featureEffect=r.featureEffect);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){if(i.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,i.viewpointExcluded||(this.initialViewProperties.viewpoint=new us({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const r of e.persistableViewModels)r.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),r=e.extent.clone(),s=r.width/2;return r.xmin=i.x-s,r.xmax=i.x+s,r}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const r=Lje(e,i.thumbnailSize),s=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Ah(e)){const i=cg(e),r=i?.mediaType,s=r&&Kje.get(r.toLowerCase())||null,n=`thumbnail${Date.now()}`;return s?`${n}.${s}`:n}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};u([p()],xi.prototype,"_updateFromPromise",void 0),u([p({type:Jje,json:{write:!0}})],xi.prototype,"applicationProperties",void 0),u([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],xi.prototype,"authoringApp",null),u([oe("authoringApp")],xi.prototype,"writeAuthoringApp",null),u([p({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],xi.prototype,"authoringAppVersion",null),u([oe("authoringAppVersion")],xi.prototype,"writeAuthoringAppVersion",null),u([p({type:Bue,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],xi.prototype,"bookmarks",void 0),u([p({type:Mje,json:{name:"mapFloorInfo",write:!0}})],xi.prototype,"floorInfo",void 0),u([p({type:CC,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:P3},"initialState.timeExtent":{type:pt},"initialState.viewpoint":{type:us},mapRangeInfo:{type:x8},spatialReference:{type:fe},"timeZone:":{type:String}}}}})],xi.prototype,"initialViewProperties",void 0),u([Q("initialViewProperties")],xi.prototype,"readInitialViewProperties",null),u([oe("initialViewProperties")],xi.prototype,"writeInitialViewProperties",null),u([p({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],xi.prototype,"layers",void 0),u([oe("layers")],xi.prototype,"writeLayers",null),u([p({type:Be})],xi.prototype,"portalItem",void 0),u([p()],xi.prototype,"resourceInfo",void 0),u([p({readOnly:!0,type:k0,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],xi.prototype,"sourceVersion",void 0),u([Q("sourceVersion")],xi.prototype,"readSourceVersion",null),u([oe("sourceVersion")],xi.prototype,"writeSourceVersion",null),u([p({json:{read:!1,write:{ignoreOrigin:!0}}})],xi.prototype,"tables",void 0),u([oe("tables")],xi.prototype,"writeTables",null),u([p()],xi.prototype,"thumbnailUrl",null),u([p()],xi.prototype,"updatingFromView",null),u([p({type:Due,json:{write:!0}})],xi.prototype,"widgets",void 0),xi=u([M("esri.WebDocument2D")],xi);const eVe=xi,pi=(t=>t)(["operational-layers","basemap-base-layers","basemap-ground-layers","ground"]);var Vz;let Cm=Vz=class extends Y{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Vz({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([p({type:String,json:{write:!0}})],Cm.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],Cm.prototype,"name",void 0),u([p({type:["boolean","date","number","string"],json:{write:!0}})],Cm.prototype,"returnType",void 0),u([p({type:String,json:{write:!0}})],Cm.prototype,"title",void 0),Cm=Vz=u([M("esri.form.ExpressionInfo")],Cm);const tVe=Cm;let bo=class extends Y{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([p({type:String,json:{write:!0}})],bo.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],bo.prototype,"label",void 0),u([p()],bo.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],bo.prototype,"visibilityExpression",void 0),bo=u([M("esri.form.elements.Element")],bo);let mE=class extends Le(Y){constructor(e){super(e),this.type=null}};u([p()],mE.prototype,"type",void 0),mE=u([M("esri.form.elements.inputs.attachments.Input")],mE);const Ef=mE,A3=["any","capture","upload"];let mb=class extends Ef{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([p({type:["audio"],readOnly:!0,json:{write:!0}})],mb.prototype,"type",void 0),u([p({type:A3,json:{write:!0}})],mb.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],mb.prototype,"maxDuration",void 0),mb=u([M("esri.form.elements.inputs.attachments.AudioInput")],mb);const nJ=mb;let vx=class extends Ef{constructor(e){super(e),this.type="document",this.maxFileSize=null}};u([p({type:["document"],readOnly:!0,json:{write:!0}})],vx.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],vx.prototype,"maxFileSize",void 0),vx=u([M("esri.form.elements.inputs.attachments.DocumentInput")],vx);const oJ=vx;let yb=class extends Ef{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([p({type:["image"],readOnly:!0,json:{write:!0}})],yb.prototype,"type",void 0),u([p({type:A3,json:{write:!0}})],yb.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],yb.prototype,"maxImageSize",void 0),yb=u([M("esri.form.elements.inputs.attachments.ImageInput")],yb);const aJ=yb;let bx=class extends Ef{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};u([p({type:["signature"],readOnly:!0,json:{write:!0}})],bx.prototype,"type",void 0),u([p({type:A3,json:{write:!0}})],bx.prototype,"inputMethod",void 0),bx=u([M("esri.form.elements.inputs.attachments.SignatureInput")],bx);const lJ=bx;let gb=class extends Ef{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([p({type:["video"],readOnly:!0,json:{write:!0}})],gb.prototype,"type",void 0),u([p({type:A3,json:{write:!0}})],gb.prototype,"inputMethod",void 0),u([p({type:Number,json:{write:!0}})],gb.prototype,"maxDuration",void 0),gb=u([M("esri.form.elements.inputs.attachments.VideoInput")],gb);const cJ=gb;function que(t){return{nestableTypes:{base:Ef,key:"type",typeMap:{audio:nJ,document:oJ,image:aJ,signature:lJ,video:cJ}},allTypes:{base:Ef,key:"type",typeMap:{attachment:t,audio:nJ,document:oJ,image:aJ,signature:lJ,video:cJ}}}}function iVe(t,e,i){return t?t.map(r=>Ou(e.nestableTypes,r)):null}function rVe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function sVe(t,e,i){if(!t)return null;const r=e.nestableTypes.typeMap;return t.filter(s=>r[s.type]).map(s=>s.toJSON())}let Pc=class extends Ef{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return iVe(e,KO)}readInputs(e,i){return rVe(i.inputTypes,KO)}writeInputs(e,i){i.inputTypes=sVe(e,KO)}};u([p({type:["attachment"],readOnly:!0,json:{write:!0}})],Pc.prototype,"type",void 0),u([p({type:["any","exact","exactOrNone"],json:{write:!0}})],Pc.prototype,"attachmentAssociationType",void 0),u([p({json:{write:{isRequired:!0}}})],Pc.prototype,"inputTypes",void 0),u([Mt("inputTypes")],Pc.prototype,"castInputs",null),u([Q("inputTypes")],Pc.prototype,"readInputs",null),u([oe("inputTypes")],Pc.prototype,"writeInputs",null),Pc=u([M("esri.form.elements.inputs.attachments.AttachmentInput")],Pc);const KO=que(Pc),nVe=Pc;var Uz;const oVe=que(nVe);let zo=Uz=class extends bo{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new Uz({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([p({type:Boolean,json:{write:!0}})],zo.prototype,"allowUserRename",void 0),u([p({type:String,json:{write:{isRequired:!0}}})],zo.prototype,"attachmentKeyword",void 0),u([p({type:Boolean,json:{write:!0}})],zo.prototype,"displayFilename",void 0),u([p({type:String,json:{write:!0}})],zo.prototype,"editableExpression",void 0),u([p({type:String,json:{write:!0}})],zo.prototype,"filenameExpression",void 0),u([p({types:oVe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],zo.prototype,"input",void 0),u([p({type:Number,json:{write:!0}})],zo.prototype,"maxAttachmentCount",void 0),u([p({type:Number,json:{write:!0}})],zo.prototype,"minAttachmentCount",void 0),u([p({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],zo.prototype,"type",void 0),u([p({type:Boolean,json:{write:!0}})],zo.prototype,"useOriginalFilename",void 0),zo=Uz=u([M("esri.form.elements.AttachmentElement")],zo);const uJ=zo;let yE=class extends Y{constructor(e){super(e),this.type=null}};u([p()],yE.prototype,"type",void 0),yE=u([M("esri.form.elements.inputs.Input")],yE);const Nh=yE;let wx=class extends Nh{constructor(e){super(e),this.maxLength=null,this.minLength=0}};u([p({type:Number,json:{write:!0}})],wx.prototype,"maxLength",void 0),u([p({type:Number,json:{write:!0}})],wx.prototype,"minLength",void 0),wx=u([M("esri.form.elements.inputs.TextInput")],wx);const $8=wx;var Bz;let gE=Bz=class extends $8{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new Bz({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],gE.prototype,"type",void 0),gE=Bz=u([M("esri.form.elements.inputs.BarcodeScannerInput")],gE);const aVe=gE;var qz;let vb=qz=class extends Nh{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new qz({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([p({type:String,json:{write:!0}})],vb.prototype,"noValueOptionLabel",void 0),u([p({type:Boolean,json:{write:!0}})],vb.prototype,"showNoValueOption",void 0),u([p({type:["combo-box"],json:{read:!1,write:!0}})],vb.prototype,"type",void 0),vb=qz=u([M("esri.form.elements.inputs.ComboBoxInput")],vb);const lVe=vb;var Gz;function dJ(t){return t??null}function hJ(t){return t??null}let kc=Gz=class extends Nh{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,e){return dJ(e.max)}writeMax(t,e){e.max=hJ(t)}readMin(t,e){return dJ(e.min)}writeMin(t,e){e.min=hJ(t)}clone(){return new Gz({max:this.max,min:this.min})}};u([p({type:String,json:{type:String,write:!0}})],kc.prototype,"max",void 0),u([Q("max")],kc.prototype,"readMax",null),u([oe("max")],kc.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],kc.prototype,"min",void 0),u([Q("min")],kc.prototype,"readMin",null),u([oe("min")],kc.prototype,"writeMin",null),u([p({type:["date-picker"],json:{read:!1,write:!0}})],kc.prototype,"type",void 0),kc=Gz=u([M("esri.form.elements.inputs.DatePickerInput")],kc);const cVe=kc;var Hz;function XO(t){return t??null}function QO(t){return t??null}let io=Hz=class extends Nh{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,e){return XO(e.max)}writeMax(t,e){e.max=QO(t)}readMin(t,e){return XO(e.min)}writeMin(t,e){e.min=QO(t)}readTimeResolution(t,e){return XO(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=QO(t)}clone(){return new Hz({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([p({type:Boolean,json:{write:!0}})],io.prototype,"includeTimeOffset",void 0),u([p({type:String,json:{type:String,write:!0}})],io.prototype,"max",void 0),u([Q("max")],io.prototype,"readMax",null),u([oe("max")],io.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],io.prototype,"min",void 0),u([Q("min")],io.prototype,"readMin",null),u([oe("min")],io.prototype,"writeMin",null),u([p({type:String,json:{type:String,write:!0}})],io.prototype,"timeResolution",void 0),u([Q("timeResolution")],io.prototype,"readTimeResolution",null),u([oe("timeResolution")],io.prototype,"writeTimeResolution",null),u([p({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],io.prototype,"type",void 0),io=Hz=u([M("esri.form.elements.inputs.DateTimeOffsetPickerInput")],io);const uVe=io;var Wz;function pJ(t){return t!=null?new Date(t):null}function fJ(t){return t?t.getTime():null}let _l=Wz=class extends Nh{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return pJ(e.max)}writeMax(t,e){e.max=fJ(t)}readMin(t,e){return pJ(e.min)}writeMin(t,e){e.min=fJ(t)}clone(){return new Wz({includeTime:this.includeTime,max:this.max,min:this.min})}};u([p({type:Boolean,json:{write:!0}})],_l.prototype,"includeTime",void 0),u([p({type:Date,json:{type:Number,write:!0}})],_l.prototype,"max",void 0),u([Q("max")],_l.prototype,"readMax",null),u([oe("max")],_l.prototype,"writeMax",null),u([p({type:Date,json:{type:Number,write:!0}})],_l.prototype,"min",void 0),u([Q("min")],_l.prototype,"readMin",null),u([oe("min")],_l.prototype,"writeMin",null),u([p({type:["datetime-picker"],json:{read:!1,write:!0}})],_l.prototype,"type",void 0),_l=Wz=u([M("esri.form.elements.inputs.DateTimePickerInput")],_l);const dVe=_l;var Jz;let bb=Jz=class extends Nh{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Jz({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([p({type:String,json:{write:!0}})],bb.prototype,"noValueOptionLabel",void 0),u([p({type:Boolean,json:{write:!0}})],bb.prototype,"showNoValueOption",void 0),u([p({type:["radio-buttons"],json:{read:!1,write:!0}})],bb.prototype,"type",void 0),bb=Jz=u([M("esri.form.elements.inputs.RadioButtonsInput")],bb);const hVe=bb;var Zz;let wb=Zz=class extends Nh{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Zz({offValue:this.offValue,onValue:this.onValue})}};u([p({type:[String,Number],json:{write:!0}})],wb.prototype,"offValue",void 0),u([p({type:[String,Number],json:{write:!0}})],wb.prototype,"onValue",void 0),u([p({type:["switch"],json:{read:!1,write:!0}})],wb.prototype,"type",void 0),wb=Zz=u([M("esri.form.elements.inputs.SwitchInput")],wb);const pVe=wb;var Yz;let vE=Yz=class extends $8{constructor(t){super(t),this.type="text-area"}clone(){return new Yz({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["text-area"],json:{read:!1,write:!0}})],vE.prototype,"type",void 0),vE=Yz=u([M("esri.form.elements.inputs.TextAreaInput")],vE);const fVe=vE;var Kz;let bE=Kz=class extends $8{constructor(t){super(t),this.type="text-box"}clone(){return new Kz({maxLength:this.maxLength,minLength:this.minLength})}};u([p({type:["text-box"],json:{read:!1,write:!0}})],bE.prototype,"type",void 0),bE=Kz=u([M("esri.form.elements.inputs.TextBoxInput")],bE);const mVe=bE;var Xz;function eR(t){return t??null}function tR(t){return t??null}let jo=Xz=class extends Nh{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,e){return eR(e.max)}writeMax(t,e){e.max=tR(t)}readMin(t,e){return eR(e.min)}writeMin(t,e){e.min=tR(t)}readTimeResolution(t,e){return eR(e.timeResolution)}writeTimeResolution(t,e){e.timeResolution=tR(t)}clone(){return new Xz({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([p({type:String,json:{type:String,write:!0}})],jo.prototype,"max",void 0),u([Q("max")],jo.prototype,"readMax",null),u([oe("max")],jo.prototype,"writeMax",null),u([p({type:String,json:{type:String,write:!0}})],jo.prototype,"min",void 0),u([Q("min")],jo.prototype,"readMin",null),u([oe("min")],jo.prototype,"writeMin",null),u([p({type:String,json:{type:String,write:!0}})],jo.prototype,"timeResolution",void 0),u([Q("timeResolution")],jo.prototype,"readTimeResolution",null),u([oe("timeResolution")],jo.prototype,"writeTimeResolution",null),u([p({type:["time-picker"],json:{read:!1,write:!0}})],jo.prototype,"type",void 0),jo=Xz=u([M("esri.form.elements.inputs.TimePickerInput")],jo);const yVe=jo,gVe=aVe,vVe=lVe,bVe=cVe,wVe=uVe,_Ve=dVe,xVe=hVe,SVe=pVe,$Ve=fVe,IVe=mVe,kVe=yVe,TVe={base:Nh,key:"type",typeMap:{"barcode-scanner":gVe,"combo-box":vVe,"date-picker":bVe,"datetime-picker":_Ve,"datetimeoffset-picker":wVe,"radio-buttons":xVe,switch:SVe,"text-area":$Ve,"text-box":IVe,"time-picker":kVe}};var Qz;let Zo=Qz=class extends bo{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Qz({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([p({types:vle,json:{read:{reader:$3},write:!0}})],Zo.prototype,"domain",void 0),u([p({type:Boolean,json:{write:!0}})],Zo.prototype,"editable",void 0),u([p({type:String,json:{write:!0}})],Zo.prototype,"editableExpression",void 0),u([p({type:String,json:{write:!0}})],Zo.prototype,"fieldName",void 0),u([p({type:String,json:{write:!0}})],Zo.prototype,"hint",void 0),u([p({types:TVe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Zo.prototype,"input",void 0),u([p({type:String,json:{write:!0}})],Zo.prototype,"requiredExpression",void 0),u([p({type:String,json:{read:!1,write:!0}})],Zo.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Zo.prototype,"valueExpression",void 0),Zo=Qz=u([M("esri.form.elements.FieldElement")],Zo);var e4;let yd=e4=class extends bo{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new e4({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:U(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([p({type:Number,json:{write:!0}})],yd.prototype,"displayCount",void 0),u([p({type:["list"],json:{write:!0}})],yd.prototype,"displayType",void 0),u([p({type:String,json:{write:!0}})],yd.prototype,"editableExpression",void 0),u([p({type:[J6],json:{write:!0}})],yd.prototype,"orderByFields",void 0),u([p({type:Number,json:{write:!0}})],yd.prototype,"relationshipId",void 0),u([p({type:["relationship"],json:{read:!1,write:!0}})],yd.prototype,"type",void 0),yd=e4=u([M("esri.form.elements.RelationshipElement")],yd);const mJ=yd;var t4;let _b=t4=class extends bo{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new t4({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([p({type:String,json:{write:!0}})],_b.prototype,"text",void 0),u([p({type:String,json:{write:!0}})],_b.prototype,"textFormat",void 0),u([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],_b.prototype,"type",void 0),_b=t4=u([M("esri.form.elements.TextElement")],_b);const yJ=_b;let xb=class extends Le(bo){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([p({type:[Hae],json:{write:{isRequired:!0}}})],xb.prototype,"associationTypes",void 0),u([p({type:String,json:{write:!0}})],xb.prototype,"editableExpression",void 0),u([p({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],xb.prototype,"type",void 0),xb=u([M("esri.form.elements.UtilityNetworkAssociationsElement")],xb);const gJ=xb,EVe=t=>t.type==="field",MVe=t=>t.type==="group",CVe=t=>t.type==="text";function Gue(t){return{typesWithGroup:{base:bo,key:"type",typeMap:{attachment:uJ,field:Zo,group:t,relationship:mJ,text:yJ,utilityNetworkAssociations:gJ}},typesWithoutGroup:{base:bo,key:"type",typeMap:{attachment:uJ,field:Zo,relationship:mJ,text:yJ,utilityNetworkAssociations:gJ}}}}function Hue(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function Wue(t,e,i=!0){if(!t)return null;const r=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(s=>r[s.type]).map(s=>s.toJSON())}function Jue(t,e,i=!0){return t?t.map(r=>Ou(i?e.typesWithGroup:e.typesWithoutGroup,r)):null}var i4;let Ac=i4=class extends bo{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Jue(t,iR,!1)}readElements(t,e){return Hue(e.formElements,iR,!1)}writeElements(t,e){e.formElements=Wue(t,iR,!1)}clone(){return new i4({description:this.description,elements:U(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([p({json:{write:!0}})],Ac.prototype,"elements",void 0),u([Mt("elements")],Ac.prototype,"castElements",null),u([Q("elements",["formElements"])],Ac.prototype,"readElements",null),u([oe("elements")],Ac.prototype,"writeElements",null),u([p({type:["collapsed","expanded"],json:{write:!0}})],Ac.prototype,"initialState",void 0),u([p({type:String,json:{read:!1,write:!0}})],Ac.prototype,"type",void 0),Ac=i4=u([M("esri.form.elements.GroupElement")],Ac);const iR=Gue(Ac),PVe=Ac;var r4;const rR=Gue(PVe);let xl=r4=class extends Y{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Jue(t,rR)}readElements(t,e){return Hue(e.formElements,rR)}writeElements(t,e){e.formElements=Wue(t,rR)}clone(){return new r4({description:this.description,expressionInfos:U(this.expressionInfos),elements:U(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,e){const i=new Set,{description:r,elements:s,expressionInfos:n,title:o}=this;if(MS(i,t,r),MS(i,t,o),!s)return[];const a=AVe(s,n).map(l=>Hs(i,t,null,l));await Promise.all(a);for(const l of s)Zue(i,{fieldsIndex:t,relationships:e},l);return Array.from(i).sort()}};function Zue(t,e,i){const{fieldsIndex:r}=e;if(!r||r.fields.length!==t.size)switch(MS(t,r,i.label),MS(t,r,i.description),i.type){case"field":vn(t,r,i.fieldName);break;case"group":i.elements.forEach(s=>Zue(t,e,s));break;case"relationship":if(e.relationships){const s=e.relationships.find(n=>n.id===i.relationshipId);s&&vn(t,r,s.keyField)}If(t,r,i.orderByFields?.map(s=>s.field));break;case"text":MS(t,r,i.text)}}function AVe(t,e){if(!e||e.length===0)return[];const i=Yue(t),r=[];for(const s of e)i.has(s.name)&&r.push(s.expression);return r}function Yue(t){const e=new Set;for(const i of t)if(FB(e,i.visibilityExpression),!CVe(i)){if(MVe(i))CM(e,Yue(i.elements));else if(FB(e,i.editableExpression),EVe(i)){const{requiredExpression:r,valueExpression:s}=i;CM(e,[r,s])}}return e}function MS(t,e,i){If(t,e,q6(i))}u([p({type:String,json:{write:!0}})],xl.prototype,"description",void 0),u([p({json:{write:!0}})],xl.prototype,"elements",void 0),u([Mt("elements")],xl.prototype,"castElements",null),u([Q("elements",["formElements"])],xl.prototype,"readElements",null),u([oe("elements")],xl.prototype,"writeElements",null),u([p({type:[tVe],json:{write:!0}})],xl.prototype,"expressionInfos",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],xl.prototype,"preserveFieldValuesWhenHidden",void 0),u([p({type:String,json:{write:!0}})],xl.prototype,"title",void 0),xl=r4=u([M("esri.form.FormTemplate")],xl);const I8=Symbol("getSliceableSymbol");let wg=class{};wg=u([M("esri.graphic.GraphicOrigin")],wg);const LVe=Symbol("isFeatureGraphicOrigin");var vJ;let OVe=class extends wg{get[(vJ=LVe,E2)](){return this.layer}get[K6](){return this.layer}get[I8](){return this.layer}constructor(e){super(),this[vJ]=!0,this.type="feature",this.layer=e}get id(){return this.layer.id}};function bJ(t,e,i){if(t.hasM==null||t.hasZ)for(const r of e)for(const s of r)s.length>2&&(s[2]*=i)}function RVe(t,e,i){if(!t&&!e||!i)return;const r=Cw(i);wJ(t,i,r),wJ(e,i,r)}function wJ(t,e,i){if(t)for(const r of t)NVe(r.geometry,e,i)}function NVe(t,e,i){if(!t?.spatialReference||Mr(t.spatialReference,e))return;const r=Cw(t.spatialReference)/i;if(r!==1){if("x"in t)t.z!=null&&(t.z*=r);else if("rings"in t)bJ(t,t.rings,r);else if("paths"in t)bJ(t,t.paths,r);else if("points"in t&&(t.hasM==null||t.hasZ))for(const s of t.points)s.length>2&&(s[2]*=r)}}function s4(t,e,i){if(!i?.features||!i.hasZ)return;const r=_6(i.geometryType,e,t.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}var n4;const o4=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Rr=n4=class extends Y{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){return this.readFeaturesWithClass(t,e,Wi)}writeGeometryType(t,e,i,r){if(t)return void o4.write(t,e,i,r);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void o4.write(n.geometry.type,e,i,r)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,r=Nu(t);return r&&!i&&e.spatialReference&&(r.spatialReference=fe.fromJSON(e.spatialReference)),r}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(e.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new n4(this.cloneProperties())}cloneProperties(){return U({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const r=e.features[i];if(r.geometry){const s=t?.[i];r.geometry=s?.toJSON()||r.geometry}}return e}quantize(t){const{scale:[e,i],translate:[r,s]}=t,n=c=>Math.round((c-r)/e),o=c=>Math.round((s-c)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let c=0,d=a.length;c<d;c++)l?.(a[c].geometry)||(a.splice(c,1),c--,d--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=f=>f*n+r,l=f=>s-f*o;let c=null,d=null;if(this.hasZ&&i?.scale?.[2]!=null){const{translate:[,,f],scale:[,,m]}=i;c=y=>y*m+f}if(this.hasM&&i?.scale?.[3]!=null){const{translate:[,,,f],scale:[,,,m]}=i;d=y=>y==null?y:y*m+f}const h=this._getHydrationFunction(t,a,l,c,d);for(const{geometry:f}of e)f!=null&&h&&h(f);return this.transform=null,this}readFeaturesWithClass(t,e,i){const r=fe.fromJSON(e.spatialReference),s=[];for(let n=0;n<t.length;n++){const o=t[n],a=i.fromJSON(o),l=o.geometry?.spatialReference;a.geometry==null||l||(a.geometry.spatialReference=r);const c=o.aggregateGeometries,d=a.aggregateGeometries;if(c&&d!=null)for(const h in d){const f=d[h],m=c[h],y=m?.spatialReference;f==null||y||(f.spatialReference=r)}s.push(a)}return s}_quantizePoints(t,e,i){let r,s;const n=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const c=e(l[0]),d=i(l[1]);c===r&&d===s||(n.push([c-r,d-s]),r=c,s=d)}else r=e(l[0]),s=i(l[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(t,e,i){return t==="point"?r=>(r.x=e(r.x),r.y=i(r.y),r):t==="polyline"||t==="polygon"?r=>{const s=or(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._quantizePoints(l,e,i);c&&n.push(c)}return n.length>0?(or(r)?r.rings=n:r.paths=n,r):null}:t==="multipoint"?r=>{const s=this._quantizePoints(r.points,e,i);return s&&s.length>0?(r.points=s,r):null}:t==="extent"?r=>r:null}_getHydrationFunction(t,e,i,r,s){return t==="point"?n=>{n.x=e(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:t==="polyline"||t==="polygon"?n=>{const o=or(n)?n.rings:n.paths;let a,l;for(let c=0,d=o.length;c<d;c++){const h=o[c];for(let f=0,m=h.length;f<m;f++){const y=h[f];f>0?(a+=y[0],l+=y[1]):(a=y[0],l=y[1]),y[0]=e(a),y[1]=i(l)}}if(r&&s)for(let c=0,d=o.length;c<d;c++){const h=o[c];for(let f=0,m=h.length;f<m;f++){const y=h[f];y[2]=r(y[2]),y[3]=s(y[3])}}else if(r)for(let c=0,d=o.length;c<d;c++){const h=o[c];for(let f=0,m=h.length;f<m;f++){const y=h[f];y[2]=r(y[2])}}else if(s)for(let c=0,d=o.length;c<d;c++){const h=o[c];for(let f=0,m=h.length;f<m;f++){const y=h[f];y[2]=s(y[2])}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=i(n.ymin),n.xmax=e(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:t==="multipoint"?n=>{const o=n.points;let a,l;for(let c=0,d=o.length;c<d;c++){const h=o[c];c>0?(a+=h[0],l+=h[1]):(a=h[0],l=h[1]),h[0]=e(a),h[1]=i(l)}if(r&&s)for(let c=0,d=o.length;c<d;c++){const h=o[c];h[2]=r(h[2]),h[3]=s(h[3])}else if(r)for(let c=0,d=o.length;c<d;c++){const h=o[c];h[2]=r(h[2])}else if(s)for(let c=0,d=o.length;c<d;c++){const h=o[c];h[2]=s(h[2])}}:null}};u([p({type:String,json:{write:!0}})],Rr.prototype,"displayFieldName",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Rr.prototype,"exceededTransferLimit",void 0),u([p({type:[Wi],json:{write:!0}})],Rr.prototype,"features",void 0),u([Q("features")],Rr.prototype,"readFeatures",null),u([p({type:[ss],json:{write:!0}})],Rr.prototype,"fields",void 0),u([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:o4.read}}})],Rr.prototype,"geometryType",void 0),u([oe("geometryType")],Rr.prototype,"writeGeometryType",null),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Rr.prototype,"hasM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Rr.prototype,"hasZ",void 0),u([p({types:k_,json:{write:!0}})],Rr.prototype,"queryGeometry",void 0),u([Q("queryGeometry")],Rr.prototype,"readQueryGeometry",null),u([p({type:fe,json:{write:!0}})],Rr.prototype,"spatialReference",void 0),u([oe("spatialReference")],Rr.prototype,"writeSpatialReference",null),u([p({json:{write:!0}})],Rr.prototype,"transform",void 0),Rr=n4=u([M("esri.rest.support.FeatureSet")],Rr),Rr.prototype.toJSON.isDefaultToJSON=!0;let DVe=0,Cd=class extends L6(d3(ue)){constructor(e){super(e),this._idToClientGeometry=null,this.type="memory"}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);s4(e,this.layer.spatialReference,r);const s=Rr.fromJSON(r);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],l=this._idToClientGeometry.get(a);l!==void 0&&(o.geometry=l)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new R("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return s4(e,this.layer.spatialReference,r),r}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(r=>({count:r.count,extent:Pe.fromJSON(r.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async queryAttributeBins(e,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",e?.toJSON(),i)}async _applyEdits(e){if(!this._connection)throw new R("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=d=>"objectId"in d&&d.objectId!=null?d.objectId:"attributes"in d&&d.attributes[i]!=null?d.attributes[i]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const d of e.deleteFeatures){const h=o(d);h!=null&&s.push(h)}const a=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(const d of e.updateFeatures)if(n.push(this._serializeFeature(d)),a&&d.geometry!=null){const h=o(d);h!=null&&a.set(h,d)}}RVe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:l,featureEditResults:c}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=l,r&&r.finish(c.uidToObjectId),this._updateIdToClientGeometries(a,c),this._createEditsResult(c)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:s}of e)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateIdToClientGeometries(e,i){if(this._idToClientGeometry){if(e)for(const r of i.updateResults){if(!r.success)continue;const s=e.get(r.objectId);s!=null&&this._addIdToClientGeometry(s)}for(const r of i.deleteResults)r.success&&this._idToClientGeometry.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:""};return{objectId:e.objectId,globalId:e.globalId,error:i?new R("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,r=new Array(e.length);let s=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);s||a.geometry==null||(s=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const l in o){const c=o[l],d=i.get(l);d&&(d.attributes||(d.attributes={}),c===-1?delete d.attributes[a]:d.attributes[a]=c,n._addIdToClientGeometry(d))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;const i=this.sourceJSON.objectIdField,r=e.attributes?.[i];r!=null&&this._idToClientGeometry.set(r,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,r=this._geometryForSerialization(e),s=(DVe++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?vi.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await oMe("MemorySourceWorker",{strategy:H("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const d=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",y=>{X.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),y.preventDefault()}));const h={features:d.features,fields:i?.map(y=>y.toJSON()),geometryType:Rq.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:c?null:r&&r.toJSON(),timeInfo:a?.toJSON()??null,dateFieldsTimeZone:l},f=await this._connection.invoke("load",h,{signal:e});for(const y of f.warnings)X.getLogger(this.layer).warn("#load()",`${y.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:y});f.featureErrors.length&&X.getLogger(this.layer).warn("#load()",`Encountered ${f.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:f.featureErrors});const m=f.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(m.geometryType=Rq.toJSON(d.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),d.finish(f.assignedObjectIds)}};u([n6({Type:Wi,ensureType:Mi(Wi)})],Cd.prototype,"itemType",void 0),u([p()],Cd.prototype,"type",void 0),u([p({constructOnly:!0})],Cd.prototype,"layer",void 0),u([p({readOnly:!0})],Cd.prototype,"_workerGeometryType",null),u([p()],Cd.prototype,"sourceJSON",void 0),Cd=u([M("esri.layers.graphics.sources.MemorySource")],Cd);function FVe(t){return"portalItem"in t}const L3=t=>{const e=t;let i=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):FVe(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([p({type:String})],i.prototype,"apiKey",null),i=u([M("esri.layers.mixins.APIKeyMixin")],i),i},O3=t=>{const e=t;let i=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=ya(this.url);if(r?.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",$Se(r,X.getLogger(this)))}};return u([p()],i.prototype,"title",null),u([p({type:String})],i.prototype,"url",null),i=u([M("esri.layers.mixins.ArcGISService")],i),i};let _J=class extends SyntaxError{constructor(e,i,r,s){super(e),this.expected=i,this.found=r,this.location=s,this.name="SyntaxError"}format(e){let i="Error: "+this.message;if(this.location){let r=null;const s=e.find(l=>l.source===this.location.source);s&&(r=s.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,a=this.location.source+":"+o.line+":"+o.column;if(r){const l=this.location.end,c="".padEnd(o.line.toString().length," "),d=r[n.line-1],h=(n.line===l.line?l.column:d.length+1)-n.column||1;i+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+d+`
`+c+" | "+"".padEnd(n.column-1," ")+"".padEnd(h,"^")}else i+=`
 at `+a}return i}static buildMessage(e,i){function r(f){return f.codePointAt(0).toString(16).toUpperCase()}const s=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(f){return s?f.replace(s,m=>"\\u{"+r(m)+"}"):f}function o(f){return n(f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,m=>"\\x0"+r(m)).replace(/[\x10-\x1F\x7F-\x9F]/g,m=>"\\x"+r(m)))}function a(f){return n(f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,m=>"\\x0"+r(m)).replace(/[\x10-\x1F\x7F-\x9F]/g,m=>"\\x"+r(m)))}const l={literal:f=>'"'+o(f.text)+'"',class(f){const m=f.parts.map(y=>Array.isArray(y)?a(y[0])+"-"+a(y[1]):a(y));return"["+(f.inverted?"^":"")+m.join("")+"]"+(f.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:f=>f.description};function c(f){return l[f.type](f)}function d(f){const m=f.map(c);if(m.sort(),m.length>0){let y=1;for(let v=1;v<m.length;v++)m[v-1]!==m[v]&&(m[y]=m[v],y++);m.length=y}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function h(f){return f?'"'+o(f)+'"':"end of input"}return"Expected "+d(e)+" but "+h(i)+" found."}};function zVe(t,e){const i={},r=(e=e!==void 0?e:{}).grammarSource,s={start:q7};let n=q7;const o="none",a=")",l=",",c="(",d="%",h="px",f="cm",m="mm",y="in",v="pt",b="pc",w="deg",x="rad",S="grad",$="turn",T="#",C=".",L="e",N=/^[ \t\n\r]/,D=/^[a-z\-]/,F=/^[0-9a-fA-F]/,W=/^[+\-]/,Z=/^[0-9]/,V=jh("none"),A=ps("none",!1),q=ps(")",!1),J=ps(",",!1),ee=X_([" ","	",`
`,"\r"],!1,!1,!1),re=jh("function"),me=ps("(",!1),ze=jh("identifier"),Ce=X_([["a","z"],"-"],!1,!1,!1),at=jh("percentage"),vt=ps("%",!1),Rt=jh("length"),Cs=ps("px",!1),ac=ps("cm",!1),ae=ps("mm",!1),Ie=ps("in",!1),qe=ps("pt",!1),Ge=ps("pc",!1),Nt=jh("angle"),bt=ps("deg",!1),ni=ps("rad",!1),zi=ps("grad",!1),Ps=ps("turn",!1),lc=jh("number"),Y_=jh("color"),lve=ps("#",!1),j7=X_([["0","9"],["a","f"],["A","F"]],!1,!1,!1),V7=X_(["+","-"],!1,!1,!1),zh=X_([["0","9"]],!1,!1,!1),cve=ps(".",!1),uve=ps("e",!1);function dve(){return[]}function hve(z,te){return{type:"function",name:z,parameters:te||[]}}function pve(z,te){return te.length>0?Hve(z,te,3):[z]}function fve(z){return{type:"quantity",value:z.value,unit:z.unit}}function mve(z){return{type:"color",colorType:z.type,value:z.value}}function Nct(z){return z}function yve(){return nI()}function gve(z){return{value:z,unit:"%"}}function vve(z){return{value:z,unit:"px"}}function bve(z){return{value:z,unit:"cm"}}function wve(z){return{value:z,unit:"mm"}}function _ve(z){return{value:z,unit:"in"}}function xve(z){return{value:z,unit:"pt"}}function Sve(z){return{value:z,unit:"pc"}}function $ve(z){return{value:z,unit:"deg"}}function Ive(z){return{value:z,unit:"rad"}}function kve(z){return{value:z,unit:"grad"}}function Tve(z){return{value:z,unit:"turn"}}function Eve(z){return{value:z,unit:null}}function Mve(){return{type:"hex",value:nI()}}function Cve(z){return{type:"function",value:z}}function Pve(){return{type:"named",value:nI()}}function Ave(){return parseFloat(nI())}let ie=0|e.peg$currPos,ji=ie;const Yg=[{line:1,column:1}];let K_,rl=ie,sI=e.peg$maxFailExpected||[],je=0|e.peg$silentFails;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');n=s[e.startRule]}function nI(){return t.substring(ji,ie)}function Lve(z=ie){const te=t.codePointAt(z);return te===void 0?"":String.fromCodePoint(te)}function ps(z,te){return{type:"literal",text:z,ignoreCase:te}}function X_(z,te,ye,Ze){return{type:"class",parts:z,inverted:te,ignoreCase:ye,unicode:Ze}}function Ove(){return{type:"end"}}function jh(z){return{type:"other",description:z}}function U7(z){let te,ye=Yg[z];if(ye)return ye;if(z>=Yg.length)te=Yg.length-1;else for(te=z;!Yg[--te];);for(ye=Yg[te],ye={line:ye.line,column:ye.column};te<z;)t.charCodeAt(te)===10?(ye.line++,ye.column=1):ye.column++,te++;return Yg[z]=ye,ye}function B7(z,te,ye){const Ze=U7(z),Xt=U7(te);return{source:r,start:{offset:z,line:Ze.line,column:Ze.column},end:{offset:te,line:Xt.line,column:Xt.column}}}function ut(z){ie<rl||(ie>rl&&(rl=ie,sI=[]),sI.push(z))}function Rve(z,te,ye){return new _J(_J.buildMessage(z,te),z,te,ye)}function q7(){let z;return z=Nve(),z===i&&(z=Dve()),z}function Nve(){let z,te;return je++,z=ie,fs(),t.substr(ie,4)===o?(te=o,ie+=4):(te=i,je===0&&ut(A)),te!==i?(fs(),ji=z,z=dve()):(ie=z,z=i),je--,z===i&&je===0&&ut(V),z}function Dve(){let z,te;if(z=[],te=SL(),te!==i)for(;te!==i;)z.push(te),te=SL();else z=i;return z}function SL(){let z,te,ye,Ze;return z=ie,fs(),te=zve(),te!==i?(fs(),ye=Fve(),ye===i&&(ye=null),fs(),t.charCodeAt(ie)===41?(Ze=a,ie++):(Ze=i,je===0&&ut(q)),Ze!==i?(fs(),ji=z,z=hve(te,ye)):(ie=z,z=i)):(ie=z,z=i),z}function Fve(){let z,te,ye,Ze,Xt,pr,es,Js;if(z=ie,te=$L(),te!==i){for(ye=[],Ze=ie,Xt=fs(),t.charCodeAt(ie)===44?(pr=l,ie++):(pr=i,je===0&&ut(J)),pr===i&&(pr=null),es=fs(),Js=$L(),Js!==i?(Xt=[Xt,pr,es,Js],Ze=Xt):(ie=Ze,Ze=i);Ze!==i;)ye.push(Ze),Ze=ie,Xt=fs(),t.charCodeAt(ie)===44?(pr=l,ie++):(pr=i,je===0&&ut(J)),pr===i&&(pr=null),es=fs(),Js=$L(),Js!==i?(Xt=[Xt,pr,es,Js],Ze=Xt):(ie=Ze,Ze=i);ji=z,z=pve(te,ye)}else ie=z,z=i;return z}function $L(){let z,te;return z=ie,te=jve(),te===i&&(te=Vve(),te===i&&(te=Uve(),te===i&&(te=Bve()))),te!==i&&(ji=z,te=fve(te)),z=te,z===i&&(z=ie,te=qve(),te!==i&&(ji=z,te=mve(te)),z=te),z}function fs(){let z,te;for(je++,z=[],te=t.charAt(ie),N.test(te)?ie++:(te=i,je===0&&ut(ee));te!==i;)z.push(te),te=t.charAt(ie),N.test(te)?ie++:(te=i,je===0&&ut(ee));return je--,z}function zve(){let z,te,ye;return je++,z=ie,te=G7(),te!==i?(t.charCodeAt(ie)===40?(ye=c,ie++):(ye=i,je===0&&ut(me)),ye!==i?(ji=z,z=te):(ie=z,z=i)):(ie=z,z=i),je--,z===i&&(te=i,je===0&&ut(re)),z}function G7(){let z,te,ye;if(je++,z=ie,te=[],ye=t.charAt(ie),D.test(ye)?ie++:(ye=i,je===0&&ut(Ce)),ye!==i)for(;ye!==i;)te.push(ye),ye=t.charAt(ie),D.test(ye)?ie++:(ye=i,je===0&&ut(Ce));else te=i;return te!==i&&(ji=z,te=yve()),z=te,je--,z===i&&(te=i,je===0&&ut(ze)),z}function jve(){let z,te,ye;return je++,z=ie,fs(),te=ba(),te!==i?(t.charCodeAt(ie)===37?(ye=d,ie++):(ye=i,je===0&&ut(vt)),ye!==i?(ji=z,z=gve(te)):(ie=z,z=i)):(ie=z,z=i),je--,z===i&&je===0&&ut(at),z}function Vve(){let z,te,ye;return je++,z=ie,fs(),te=ba(),te!==i?(t.substr(ie,2)===h?(ye=h,ie+=2):(ye=i,je===0&&ut(Cs)),ye!==i?(ji=z,z=vve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,fs(),te=ba(),te!==i?(t.substr(ie,2)===f?(ye=f,ie+=2):(ye=i,je===0&&ut(ac)),ye!==i?(ji=z,z=bve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,fs(),te=ba(),te!==i?(t.substr(ie,2)===m?(ye=m,ie+=2):(ye=i,je===0&&ut(ae)),ye!==i?(ji=z,z=wve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,fs(),te=ba(),te!==i?(t.substr(ie,2)===y?(ye=y,ie+=2):(ye=i,je===0&&ut(Ie)),ye!==i?(ji=z,z=_ve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,fs(),te=ba(),te!==i?(t.substr(ie,2)===v?(ye=v,ie+=2):(ye=i,je===0&&ut(qe)),ye!==i?(ji=z,z=xve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,fs(),te=ba(),te!==i?(t.substr(ie,2)===b?(ye=b,ie+=2):(ye=i,je===0&&ut(Ge)),ye!==i?(ji=z,z=Sve(te)):(ie=z,z=i)):(ie=z,z=i)))))),je--,z===i&&je===0&&ut(Rt),z}function Uve(){let z,te,ye;return je++,z=ie,te=ba(),te!==i?(t.substr(ie,3)===w?(ye=w,ie+=3):(ye=i,je===0&&ut(bt)),ye!==i?(ji=z,z=$ve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,te=ba(),te!==i?(t.substr(ie,3)===x?(ye=x,ie+=3):(ye=i,je===0&&ut(ni)),ye!==i?(ji=z,z=Ive(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,te=ba(),te!==i?(t.substr(ie,4)===S?(ye=S,ie+=4):(ye=i,je===0&&ut(zi)),ye!==i?(ji=z,z=kve(te)):(ie=z,z=i)):(ie=z,z=i),z===i&&(z=ie,te=ba(),te!==i?(t.substr(ie,4)===$?(ye=$,ie+=4):(ye=i,je===0&&ut(Ps)),ye!==i?(ji=z,z=Tve(te)):(ie=z,z=i)):(ie=z,z=i)))),je--,z===i&&(te=i,je===0&&ut(Nt)),z}function Bve(){let z,te;return je++,z=ie,fs(),te=ba(),te!==i?(ji=z,z=Eve(te)):(ie=z,z=i),je--,z===i&&je===0&&ut(lc),z}function qve(){let z,te,ye,Ze;if(je++,z=ie,t.charCodeAt(ie)===35?(te=T,ie++):(te=i,je===0&&ut(lve)),te!==i){if(ye=[],Ze=t.charAt(ie),F.test(Ze)?ie++:(Ze=i,je===0&&ut(j7)),Ze!==i)for(;Ze!==i;)ye.push(Ze),Ze=t.charAt(ie),F.test(Ze)?ie++:(Ze=i,je===0&&ut(j7));else ye=i;ye!==i?(ji=z,z=Mve()):(ie=z,z=i)}else ie=z,z=i;return z===i&&(z=ie,te=SL(),te!==i&&(ji=z,te=Cve(te)),z=te,z===i&&(z=ie,te=G7(),te!==i&&(ji=z,te=Pve()),z=te)),je--,z===i&&(te=i,je===0&&ut(Y_)),z}function ba(){let z,te,ye,Ze,Xt,pr,es,Js;for(z=ie,te=t.charAt(ie),W.test(te)?ie++:(te=i,je===0&&ut(V7)),te===i&&(te=null),ye=ie,Ze=[],Xt=t.charAt(ie),Z.test(Xt)?ie++:(Xt=i,je===0&&ut(zh));Xt!==i;)Ze.push(Xt),Xt=t.charAt(ie),Z.test(Xt)?ie++:(Xt=i,je===0&&ut(zh));if(t.charCodeAt(ie)===46?(Xt=C,ie++):(Xt=i,je===0&&ut(cve)),Xt!==i){if(pr=[],es=t.charAt(ie),Z.test(es)?ie++:(es=i,je===0&&ut(zh)),es!==i)for(;es!==i;)pr.push(es),es=t.charAt(ie),Z.test(es)?ie++:(es=i,je===0&&ut(zh));else pr=i;pr!==i?(Ze=[Ze,Xt,pr],ye=Ze):(ie=ye,ye=i)}else ie=ye,ye=i;if(ye===i)if(ye=[],Ze=t.charAt(ie),Z.test(Ze)?ie++:(Ze=i,je===0&&ut(zh)),Ze!==i)for(;Ze!==i;)ye.push(Ze),Ze=t.charAt(ie),Z.test(Ze)?ie++:(Ze=i,je===0&&ut(zh));else ye=i;if(ye!==i){if(Ze=ie,t.charCodeAt(ie)===101?(Xt=L,ie++):(Xt=i,je===0&&ut(uve)),Xt!==i){if(pr=t.charAt(ie),W.test(pr)?ie++:(pr=i,je===0&&ut(V7)),pr===i&&(pr=null),es=[],Js=t.charAt(ie),Z.test(Js)?ie++:(Js=i,je===0&&ut(zh)),Js!==i)for(;Js!==i;)es.push(Js),Js=t.charAt(ie),Z.test(Js)?ie++:(Js=i,je===0&&ut(zh));else es=i;es!==i?(Xt=[Xt,pr,es],Ze=Xt):(ie=Ze,Ze=i)}else ie=Ze,Ze=i;Ze===i&&(Ze=null),ji=z,z=Ave()}else ie=z,z=i;return z}function Gve(z,te){return z.map(function(ye){return ye[te]})}function Hve(z,te,ye){return[z].concat(Gve(te,ye))}K_=n();const IL=K_!==i&&ie===t.length;function H7(){throw K_!==i&&ie<t.length&&ut(Ove()),Rve(sI,rl<t.length?Lve(rl):null,rl<t.length?B7(rl,rl+1):B7(rl,rl))}return e.peg$library?{peg$result:K_,peg$currPos:ie,peg$FAILED:i,peg$maxFailExpected:sI,peg$maxFailPos:rl,peg$success:IL,peg$throw:IL?void 0:H7}:IL?K_:void H7()}function k8(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=xJ(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new R("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:xJ(i.value)}});e.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!tae(e[i].effects,e[i+1].effects))throw new R("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});iae(e[i].effects,e[i+1].effects)}return e.sort((i,r)=>r.scale-i.scale),e}function xJ(t){let e;if(!t)return[];try{e=zVe(t)}catch(i){throw new R("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>jVe(i))}function jVe(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return VVe(t);case"opacity":return UVe(t);case"hue-rotate":return BVe(t);case"blur":return qVe(t);case"drop-shadow":return GVe(t);case"bloom":return HVe(t)}}catch(e){throw e.details.filter=t,e}throw new R("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function VVe(t){let e=1;return D_(t.parameters,1),t.parameters.length===1&&(e=Ll(t.parameters[0])),new LF(t.name,e)}function UVe(t){let e=1;return D_(t.parameters,1),t.parameters.length===1&&(e=Ll(t.parameters[0])),new Qoe(e)}function BVe(t){let e=0;return D_(t.parameters,1),t.parameters.length===1&&(e=XVe(t.parameters[0])),new Koe(e)}function qVe(t){let e=0;return D_(t.parameters,1),t.parameters.length===1&&(e=M8(t.parameters[0]),z2(e,t.parameters[0])),new Hoe(e)}function GVe(t){const e=[];let i=null;for(const r of t.parameters)if(r.type==="color"){if(e.length&&Object.freeze(e),i)throw new R("effect:type-error","Accepts only one color",{});i=QVe(r)}else{const s=M8(r);if(Object.isFrozen(e))throw new R("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(s),e.length===3&&z2(s,r)}if(e.length<2||e.length>3)throw new R("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new Zoe(e[0],e[1],e[2]||0,i||Kue("black"))}function HVe(t){let e=1,i=0,r=0;return D_(t.parameters,3),t.parameters[0]&&(e=Ll(t.parameters[0])),t.parameters[1]&&(i=M8(t.parameters[1]),z2(i,t.parameters[1])),t.parameters[2]&&(r=Ll(t.parameters[2])),new qoe(e,i,r)}function D_(t,e){if(t.length>e)throw new R("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function R3(t){if(t.type==="color")return"<color>";if(t.unit){if(t.unit in E8)return"<length>";if(t.unit in T8)return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function z2(t,e){if(t<0)throw new R("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function WVe(t){if(t.type!=="quantity"||t.unit!==null)throw new R("effect:type-error",`Expected <double>, Actual: ${R3(t)}`,{term:t})}function JVe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new R("effect:type-error",`Expected <double> or <percentage>, Actual: ${R3(t)}`,{term:t})}const T8={deg:1,grad:.9,rad:180/Math.PI,turn:360};function ZVe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&T8[t.unit]!=null))throw new R("effect:type-error",`Expected <angle>, Actual: ${R3(t)}`,{term:t})}const E8={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function YVe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&E8[t.unit]!=null))throw new R("effect:type-error",`Expected <length>, Actual: ${R3(t)}`,{term:t})}function Ll(t){JVe(t);const e=t.value;return z2(e,t),t.unit==="%"?.01*e:e}function KVe(t){return WVe(t),z2(t.value,t),t.value}function XVe(t){return ZVe(t),t.value*T8[t.unit]||0}function M8(t){return YVe(t),t.value*E8[t.unit]||0}function QVe(t){switch(t.colorType){case"hex":return cAe(t.value);case"named":return Kue(t.value);case"function":return iUe(t.value)}}function Kue(t){if(!Ioe(t))throw new R("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return lAe(t)}const eUe=/^rgba?/i,tUe=/^hsla?/i;function iUe(t){if(D_(t.parameters,4),eUe.test(t.name))return[Ll(t.parameters[0]),Ll(t.parameters[1]),Ll(t.parameters[2]),t.parameters[3]?Ll(t.parameters[3]):1];if(tUe.test(t.name))return koe(KVe(t.parameters[0]),Ll(t.parameters[1]),Ll(t.parameters[2]),t.parameters[3]?Ll(t.parameters[3]):1);throw new R("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function M$(t,e,i){try{return sUe(t)}catch(r){i?.messages?.push(r)}return null}function C$(t,e,i,r){try{const s=rUe(t);Tr(i,s,e)}catch(s){r.messages&&r.messages.push(s)}}function rUe(t){const e=k8(t);return e?L3e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function sUe(t){if(!t||t.length===0)return null;if(nUe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:a4(i.value)});return e}return a4(t)}function nUe(t){const e=t[0];return!!e&&"scale"in e}function a4(t){if(!t?.length)return"";const e=[];for(const i of t){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Zu(i,"amount")];break;case"blur":r=[Zu(i,"radius","pt")];break;case"hue-rotate":r=[Zu(i,"angle","deg")];break;case"drop-shadow":r=[Zu(i,"xoffset","pt"),Zu(i,"yoffset","pt"),Zu(i,"blurRadius","pt"),oUe(i,"color")];break;case"bloom":r=[Zu(i,"strength"),Zu(i,"radius","pt"),Zu(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;k8(s),e.push(s)}return e.join(" ")}function Zu(t,e,i){if(t[e]==null)throw new R("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function oUe(t,e){if(t[e]==null)throw new R("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const aUe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:pi}},"portal-item":{read:!0,write:{layerContainerTypes:pi}}}}},SJ={read:{reader:M$},write:{allowNull:!0,writer:C$,layerContainerTypes:pi}},lUe={json:{read:!1,write:!1,origins:{"web-map":SJ,"portal-item":SJ}}},Dg=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([p(aUe)],i.prototype,"blendMode",void 0),u([p(lUe)],i.prototype,"effect",void 0),i=u([M("esri.layers.mixins.BlendLayer")],i),i},N3=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([p({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],i.prototype,"customParameters",void 0),i=u([M("esri.layers.mixins.CustomParametersMixin")],i),i},Xue=96;function l4(t,e){const i=t.extent,r=t.width,s=va(i?.spatialReference);return i&&r?i.width/r*s*qU*Xue:0}function Sbt(t,e){return t/(va(e)*qU*Xue)}function cUe(t,e,i){return uUe(t,e)&&dUe(t,i)}function uUe(t,e){return e===0||la(t,e)||t<e}function dUe(t,e){return e===0||la(t,e)||t>e}function hUe(t,e){return la(t,e)?0:(t||Number.POSITIVE_INFINITY)>(e||Number.POSITIVE_INFINITY)?1:-1}const $J={write:{overridePolicy:(t,e,i)=>({enabled:!i||i.filterMode==="scale"})}};let Pd=class extends Le(Y){constructor(e){super(e),this.id=R_(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([p({type:String,json:{write:!0}})],Pd.prototype,"id",void 0),u([p({type:Number,json:$J})],Pd.prototype,"maxScale",void 0),u([p({type:Number,json:$J})],Pd.prototype,"minScale",void 0),u([p({type:String,json:{write:!0}})],Pd.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],Pd.prototype,"where",void 0),Pd=u([M("esri.layers.support.DisplayFilter")],Pd);function pUe(t,e){return{...e,filterMode:t.mode}}function fUe(t,e){return Que(t,e).next().value??null}function Ibt(t,e,i){const r=mUe(t);if(r&&(iie(e,r[0])||bD(i,r[1])))return"";const s=Array.from(Que(t,e,i)),n=yUe(s,e,i)?"1=1":s.map(o=>o.where||"1=1").reduce((o,a)=>NF(o,a),"");return n&&n!=="1=1"?n:""}function mUe(t){if(ede(t)==="manual")return null;const e=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of t.filters)e[0]=Math.max(e[0],P$(i)),e[1]=Math.min(e[1],PC(r));return e}function*Que(t,e,i){if(ede(t)==="manual"){const r=t.filters.find(s=>s.id===t.activeFilterId);r&&(yield r)}else{typeof e=="object"&&(e=e.scale);for(const r of t.filters)gUe(r.minScale,r.maxScale,e,i)&&(yield r)}}function yUe(t,e,i){if(t.length===0)return!0;const r=P$(t.at(0)?.minScale),s=PC(t.at(-1)?.maxScale);if(bD(r,e)||iie(s,i))return!0;for(let n=0;n<t.length-1;n++){const o=t[n],a=t[n+1];if(bD(P$(a.minScale),PC(o.maxScale)))return!0}return!1}function gUe(t,e,i,r){return t=P$(t),i=P$(i),e=PC(e),!(!la(i,t)&&(r??i)>t)&&!Sxe(e,i)&&(r===void 0||!la(r,t))}function ede(t){return"mode"in t?t.mode:t.filterMode}function P$(t){return t||Number.POSITIVE_INFINITY}function PC(t){return t||0}let Pm=class extends Le(Y){constructor(e){super(e),this.activeFilterId=null,this.filters=new(ue.ofType(Pd)),this.mode="manual"}writeFilters(e,i,r,s){const n=e.toArray();this.mode==="scale"&&n.sort((o,a)=>{const l=hUe(a.minScale,o.minScale),c=o.maxScale-a.maxScale;return l===0?c:l}),i[r]=n.map(o=>o.toJSON(s))}write(e,i){return super.write(e,pUe(this,i))}};u([p({type:String,json:{write:{overridePolicy:(t,e,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],Pm.prototype,"activeFilterId",void 0),u([p({type:ue.ofType(Pd),nonNullable:!0,json:{write:!0}})],Pm.prototype,"filters",void 0),u([oe("filters")],Pm.prototype,"writeFilters",null),u([p({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],Pm.prototype,"mode",void 0),Pm=u([M("esri.layers.support.DisplayFilterInfo")],Pm);const vUe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([p(bUe)],i.prototype,"displayFilterEnabled",void 0),u([p(wUe)],i.prototype,"displayFilterInfo",void 0),i=u([M("esri.layers.mixins.DisplayFilteredLayer")],i),i},bUe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:t=>!t},write:{layerContainerTypes:pi,writer(t,e,i){Tr(i,!t,e)}},origins:{"web-scene":{write:!1,read:!1}}}},wUe={type:Pm,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:pi},origins:{"web-scene":{write:!1,read:!1}}}},c4=pAe(),tde=new Map,ide=new Map;async function Tbt(t,e,i){if(!t||!i)return!1;if(!e)return!0;const r=new URL(t).host;let s=tde.get(r);if(!s){const n=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await xe(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===e}async function IJ(t,e,i=!1){if(!t||!e)return!0;const r=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=ide.get(r)?.entries();if(s){for(const[n,o]of s)if(o.name===e){const a=!o.stack?.hasForwardEdits();if(!a&&i){const[{deleteForwardEdits:l},{default:c}]=await Promise.all([K(()=>import("./deleteForwardEdits-BMQAs3-f.js"),[]),K(()=>import("./DeleteForwardEditsParameters-8wOHi-Vc.js"),[])]),d=await l(r,n,new c({sessionId:c4,moment:o.moment}));return d.success&&o.stack?.clearForwardEdits(),d.success}return a}}return!0}function wE(t,e){if(!t)return!1;const i=t.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=ide.get(i)?.entries();if(r){for(const[s,n]of r)if(n.name===e)return n.lockType==="edit"}return!1}const C8=new tse;function rde(t){return C8.on("apply-edits",new WeakRef(t))}function sde(t){return C8.on("update-moment",new WeakRef(t))}function kJ(t,e,i=null,r=!1){const s=Is();return r=e==null||r,C8.emit("apply-edits",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const nde=Symbol();function Ebt(t){return t!=null&&typeof t=="object"&&nde in t}function S1(t){return t!=null&&typeof t=="object"&&"gdbVersion"in t}function CS(t,e,i){const r=new URL(t).host,s=tde.get(r),n=o=>!o||o===s;return n(e)&&n(i)||e===i}const _Ue=t=>{var s;var e;const i=t;let r=(s=class extends i{constructor(...n){super(...n),this[e]=!0,this._applyEditsHandler=o=>{const{serviceUrl:a,layerId:l,gdbVersion:c,mayReceiveServiceEdits:d,result:h}=o,f=a===this.url,m=l!=null&&this.layerId!=null&&l===this.layerId,y=S1(this),v=S1(this)&&CS(a,c,this.gdbVersion);if(!f||y&&!v||!m&&!d)return;const b=h.then(w=>{if(this.lastEditsEventDate=new Date,m&&(w.addedFeatures.length||w.updatedFeatures.length||w.deletedFeatures.length||w.addedAttachments.length||w.updatedAttachments.length||w.deletedAttachments.length))return this.emit("edits",U(w)),w;const x=w.editedFeatures?.find(({layerId:$})=>$===this.layerId);if(x){const{adds:$,updates:T,deletes:C}=x.editedFeatures,L={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:$?$.map(({attributes:N})=>({objectId:this.objectIdField&&N[this.objectIdField],globalId:this.globalIdField&&N[this.globalIdField]})):[],deletedFeatures:C?C.map(({attributes:N})=>({objectId:this.objectIdField&&N[this.objectIdField],globalId:this.globalIdField&&N[this.globalIdField]})):[],updatedFeatures:T?T.map(({current:{attributes:N}})=>({objectId:this.objectIdField&&N[this.objectIdField],globalId:this.globalIdField&&N[this.globalIdField]})):[],editedFeatures:U(w.editedFeatures),exceededTransferLimit:!1,historicMoment:U(w.historicMoment)};return this.emit("edits",L),L}const S={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:U(w.editedFeatures),exceededTransferLimit:!1,historicMoment:U(w.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(a,c,S.historicMoment)&&this.emit("edits",S),S}).then(w=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(a,c,w.historicMoment)&&(this.historicMoment=w.historicMoment),w));this.emit("apply-edits",{result:b})},this._updateMomentHandler=o=>{const{serviceUrl:a,gdbVersion:l,moment:c}=o,d=a===this.url,h=S1(this),f=S1(this)&&CS(a,l,this.gdbVersion),m=S1(this)&&!CS(a,this.gdbVersion,null);d&&h&&f&&m&&"historicMoment"in this&&this.historicMoment!==c&&(this.historicMoment=c)},this.when().then(()=>{this.addHandles(rde(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(sde(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(n,o,a){return"historicMoment"in this&&this.historicMoment!==a&&wE(n,o)}},e=nde,s);return u([p()],r.prototype,"lastEditsEventDate",void 0),r=u([M("esri.layers.mixins.EditBusLayer")],r),r};var u4;const sR=new We({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),nR=new We({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Tc=u4=class extends Y{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new Te({geometry:U(i),objectIds:U(n),spatialRelationship:r,timeExtent:U(s),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new u4({geometry:U(e),objectIds:U(s),spatialRelationship:i,timeExtent:U(r),where:t,units:n,distance:o})}};u([p({type:String,json:{write:!0}})],Tc.prototype,"where",void 0),u([p({types:k_,json:{write:!0}})],Tc.prototype,"geometry",void 0),u([p({type:sR.apiValues,json:{name:"spatialRel",read:{reader:sR.read},write:{allowNull:!1,writer:sR.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Tc.prototype,"spatialRelationship",void 0),u([p({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Tc.prototype,"distance",void 0),u([p({type:[Number],json:{write:!0}})],Tc.prototype,"objectIds",void 0),u([p({type:nR.apiValues,json:{read:nR.read,write:{writer:nR.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],Tc.prototype,"units",void 0),u([p({type:pt,json:{write:!0}})],Tc.prototype,"timeExtent",void 0),Tc=u4=u([M("esri.layers.support.FeatureFilter")],Tc);const xUe=Tc;var d4;const TJ={read:{reader:M$},write:{writer:C$,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},EJ={read:{reader:M$},write:{writer:C$,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},MJ={name:"showExcludedLabels",default:!0};let Am=d4=class extends Y{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){const i=super.write(t,e);if(e?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return e.messages?.push(new R("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return e.messages?.push(new R("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new d4({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([p({type:xUe,json:{write:{allowNull:!0,writer(t,e,i,r){const s=t?.write({},r);s&&Object.keys(s).length!==0?Tr(i,s,e):Tr(i,null,e)}}}})],Am.prototype,"filter",void 0),u([p({json:{read:M$,write:{writer:C$,allowNull:!0},origins:{"web-map":TJ,"portal-item":TJ}}})],Am.prototype,"includedEffect",void 0),u([p({json:{read:M$,write:{writer:C$,allowNull:!0},origins:{"web-map":EJ,"portal-item":EJ}}})],Am.prototype,"excludedEffect",void 0),u([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":MJ,"portal-item":MJ}}})],Am.prototype,"excludedLabelsVisible",void 0),Am=d4=u([M("esri.layers.support.FeatureEffect")],Am);const CJ={write:{allowNull:!0}},SUe={type:Am,json:{origins:{"web-map":CJ,"portal-item":CJ}}},$Ue=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([p(SUe)],i.prototype,"featureEffect",void 0),i=u([M("esri.layers.mixins.FeatureEffectLayer")],i),i};var h4;let _x=h4=class extends Y{constructor(t){super(t),this.expression=void 0,this.title=void 0}async collectRequiredFields(t,e){return Hs(t,e,null,this.expression)}clone(){return new h4({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};u([p({type:String,json:{write:{isRequired:!0}}})],_x.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],_x.prototype,"title",void 0),_x=h4=u([M("esri.symbols.support.FeatureExpressionInfo")],_x);const PJ=_x,D3={unknown:1,inches:_r(1,"meters","inches"),feet:_r(1,"meters","feet"),"us-feet":_r(1,"meters","us-feet"),yards:_r(1,"meters","yards"),miles:_r(1,"meters","miles"),"nautical-miles":_r(1,"meters","nautical-miles"),millimeters:_r(1,"meters","millimeters"),centimeters:_r(1,"meters","centimeters"),decimeters:_r(1,"meters","decimeters"),meters:_r(1,"meters","meters"),kilometers:_r(1,"meters","kilometers"),"decimal-degrees":1/C$e(1,"meters",dr.radius)};function Mbt(t){return!!t&&D3[t]!=null}function Cbt(t){return 1/(D3[t]||1)}function IUe(){const t=Object.keys(D3);return iU(t,"decimal-degrees"),t.sort(),t}const kUe=IUe(),QI=Qr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),AJ=new We({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Ml=class extends Le(Y){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,i){return e!=null?e.expression?e:void 0:i.featureExpression&&i.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,i,r,s){i[r]=e.write({},s),e.expression==="0"&&(i.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:i}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||i?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,i){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,i):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&O_e(this.featureExpressionInfo,e.featureExpressionInfo)}};u([p({type:PJ,json:{write:!0}})],Ml.prototype,"featureExpressionInfo",void 0),u([Q("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Ml.prototype,"readFeatureExpressionInfo",null),u([oe("featureExpressionInfo",{featureExpressionInfo:{type:PJ},"featureExpression.value":{type:[0]}})],Ml.prototype,"writeFeatureExpressionInfo",null),u([p({type:QI.apiValues,nonNullable:!0,json:{type:QI.jsonValues,read:QI.read,write:{writer:QI.write,isRequired:!0}}})],Ml.prototype,"mode",null),u([p({type:Number,json:{write:!0}})],Ml.prototype,"offset",void 0),u([p({type:kUe,json:{type:String,read:AJ.read,write:AJ.write}})],Ml.prototype,"unit",null),Ml=u([M("esri.symbols.support.ElevationInfo")],Ml);let Sb=class extends Y{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};u([p({type:String,json:{write:!0}})],Sb.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Sb.prototype,"label",void 0),u([p()],Sb.prototype,"type",void 0),Sb=u([M("esri.tables.elements.AttributeTableElement")],Sb);const F_=Sb;let xx=class extends Le(F_){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};u([p({type:["auto"],json:{write:!0}})],xx.prototype,"displayType",void 0),u([p({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],xx.prototype,"type",void 0),xx=u([M("esri.tables.elements.AttributeTableAttachmentElement")],xx);const ode=xx;let Lm=class extends Le(F_){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};u([p({type:String,json:{read:!1,write:!1}})],Lm.prototype,"description",void 0),u([p({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Lm.prototype,"fieldName",void 0),u([p({type:String,json:{read:!1,write:!1}})],Lm.prototype,"label",void 0),u([p({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Lm.prototype,"type",void 0),Lm=u([M("esri.tables.elements.AttributeTableFieldElement")],Lm);const ade=Lm;let Sx=class extends Le(F_){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};u([p({type:Number,json:{type:Ke,write:{enabled:!0,isRequired:!0}}})],Sx.prototype,"relationshipId",void 0),u([p({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],Sx.prototype,"type",void 0),Sx=u([M("esri.tables.elements.AttributeTableRelationshipElement")],Sx);const lde=Sx,cde={base:F_,key:"type",typeMap:{attachment:ode,field:ade,relationship:lde}};function TUe(t){return{typesWithGroup:{base:F_,key:"type",typeMap:{attachment:ode,field:ade,group:t,relationship:lde}},typesWithoutGroup:cde}}let $x=class extends Le(F_){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};u([p({types:[cde],json:{name:"attributeTableElements",write:!0}})],$x.prototype,"elements",void 0),u([p({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],$x.prototype,"type",void 0),$x=u([M("esri.tables.elements.AttributeTableGroupElement")],$x);const EUe=$x;let Ix=class extends Le(Y){constructor(e){super(e),this.field=null,this.order=null}};u([p({type:String,json:{write:!0}})],Ix.prototype,"field",void 0),u([p({type:["asc","desc"],json:{write:!0}})],Ix.prototype,"order",void 0),Ix=u([M("esri.tables.support.FieldOrder")],Ix);const MUe=Ix;var p4;const CUe=TUe(EUe);let kx=p4=class extends Y{constructor(t){super(t),this.elements=null,this.orderByFields=null}clone(){return new p4({elements:U(this.elements),orderByFields:U(this.orderByFields)})}};u([p({types:[CUe.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],kx.prototype,"elements",void 0),u([p({type:[MUe],json:{write:!0}})],kx.prototype,"orderByFields",void 0),kx=p4=u([M("esri.tables.AttributeTableTemplate")],kx);const ude=kx,PUe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:pi}}},j2={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},F3={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:pi}}},V2={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:dg}}},dde={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:pi}}},AUe={value:null,type:Ml,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:pi}}};function Fbt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const hde={write:{enabled:!0,layerContainerTypes:pi},read:!0},f4={type:Number,json:{origins:{"web-document":hde,"portal-item":{write:{layerContainerTypes:pi}}}}},LUe={...f4,json:{...f4.json,origins:{"web-document":{...hde,write:{enabled:!0,layerContainerTypes:pi,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition?.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?S$(e.layerDefinition.drawingInfo.transparency):void 0:S$(e.drawingInfo.transparency)}}},zbt={type:Pe,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Pe.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=fe.fromJSON(e.spatialReference)),i}}}},read:!1}},pde={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},OUe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:pi}}},RUe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:pi}}},fde={json:{write:{ignoreOrigin:!0,layerContainerTypes:pi},origins:{"web-map":{read:!1,write:!1}}}},NUe={type:ude,json:{name:"attributeTableInfo",write:!0}};let gd=class extends Le(Y){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([p()],gd.prototype,"creatorField",void 0),u([p()],gd.prototype,"creationDateField",void 0),u([p()],gd.prototype,"editorField",void 0),u([p()],gd.prototype,"editDateField",void 0),u([p()],gd.prototype,"realm",void 0),u([p(Fw("dateFieldsTimeReference",!0))],gd.prototype,"timeZone",void 0),gd=u([M("esri.layers.support.EditFieldsInfo")],gd);let Lc=class extends Le(Y){constructor(e){super(e)}};u([p({constructOnly:!0,json:{write:!0}})],Lc.prototype,"name",void 0),u([p({constructOnly:!0,json:{write:!0}})],Lc.prototype,"fields",void 0),u([p({constructOnly:!0,json:{write:!0}})],Lc.prototype,"isAscending",void 0),u([p({constructOnly:!0,json:{write:!0}})],Lc.prototype,"indexType",void 0),u([p({constructOnly:!0,json:{write:!0}})],Lc.prototype,"isUnique",void 0),u([p({constructOnly:!0,json:{write:!0}})],Lc.prototype,"description",void 0),Lc=u([M("esri.layers.support.FeatureIndex")],Lc);async function mde(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=yde(t));const r=DUe(t),s=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let n=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;e.start+=r}return n}function DUe(t){return yde(t)*FUe(t)}function FUe(t){return t.capabilities.query.maxRecordCount||2e3}function yde(t){return t.capabilities.query.supportsMaxRecordCountFactor?Te.MAX_MAX_RECORD_COUNT_FACTOR:1}var m4;let Tx=m4=class extends Y{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new m4({minValue:this.minValue,maxValue:this.maxValue})}};u([p({type:Number,json:{write:!0}})],Tx.prototype,"minValue",void 0),u([p({type:Number,json:{write:!0}})],Tx.prototype,"maxValue",void 0),Tx=m4=u([M("esri.renderers.support.AuthoringInfoClassBreakInfo")],Tx);var y4;let Tp=y4=class extends Y{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new y4({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:U(this.classBreakInfos)})}};u([p({type:String,json:{write:!0}})],Tp.prototype,"field",void 0),u([p({type:String,json:{write:!0}})],Tp.prototype,"normalizationField",void 0),u([p({type:String,json:{write:!0}})],Tp.prototype,"label",void 0),u([p({type:[Tx],json:{write:!0}})],Tp.prototype,"classBreakInfos",void 0),Tp=y4=u([M("esri.renderers.support.AuthoringInfoFieldInfo")],Tp);var g4;let $b=g4=class extends Y{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new g4({label:this.label,value:this.value,size:this.size})}};u([p({type:String,json:{write:!0}})],$b.prototype,"label",void 0),u([p({type:Number,json:{write:!0}})],$b.prototype,"size",void 0),u([p({type:Number,json:{write:!0}})],$b.prototype,"value",void 0),$b=g4=u([M("esri.renderers.support.AuthoringInfoSizeStop")],$b);const zUe=$b;var v4;const ek=new We({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),tk=new We({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),LJ={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},OJ=["high-to-low","above-and-below","centered-on","extremes"],RJ=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size","spike"])],NJ=["seconds","minutes","hours","days","months","years"],jUe=["circle","diamond","hexagon-flat","hexagon-pointy","square"],VUe=["triangle-closed-outline","triangle-gradient-fill-closed","triangle-gradient-fill-closed-outline","triangle-gradient-fill-open","triangle-gradient-fill-open-outline","triangle-open-outline","triangle-solid-fill-closed","triangle-solid-fill-closed-outline","triangle-solid-fill-open","triangle-solid-fill-open-outline"];let is=v4=class extends Y{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}get normalizationField(){return this.theme==="reference-size"||this.theme==="spike"?this._get("normalizationField"):null}set normalizationField(t){this._set("normalizationField",t)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(t){this._set("referenceSizeScale",t)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(t){this._set("referenceSizeSymbolStyle",t)}get spikeSymbolStyle(){return this.theme==="spike"?this._get("spikeSymbolStyle"):null}set spikeSymbolStyle(t){this._set("spikeSymbolStyle",t)}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get sizeStops(){return this.theme==="reference-size"||this.theme==="spike"?this._get("sizeStops"):null}set sizeStops(t){this._set("sizeStops",t)}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new v4({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:U(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([p({types:LJ,json:{write:!0}})],is.prototype,"endTime",void 0),u([Mt("endTime")],is.prototype,"castEndTime",null),u([p({type:String,json:{write:!0}})],is.prototype,"field",void 0),u([p({type:Number,json:{write:!0}})],is.prototype,"maxSliderValue",void 0),u([p({type:Number,json:{write:!0}})],is.prototype,"minSliderValue",void 0),u([p({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],is.prototype,"normalizationField",null),u([p({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],is.prototype,"referenceSizeScale",null),u([p({type:jUe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],is.prototype,"referenceSizeSymbolStyle",null),u([p({type:VUe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],is.prototype,"spikeSymbolStyle",null),u([p({types:LJ,json:{write:!0}})],is.prototype,"startTime",void 0),u([Mt("startTime")],is.prototype,"castStartTime",null),u([p({type:[zUe],json:{origins:{"web-scene":{write:!1}},write:!0}})],is.prototype,"sizeStops",null),u([p({type:ek.apiValues,value:null,json:{type:ek.jsonValues,read:ek.read,write:ek.write}})],is.prototype,"style",null),u([p({type:RJ,value:null,json:{type:RJ,origins:{"web-scene":{type:OJ,write:{writer:(t,e)=>{OJ.includes(t)&&(e.theme=t)}}}},write:!0}})],is.prototype,"theme",null),u([p({type:tk.apiValues,json:{type:tk.jsonValues,read:tk.read,write:tk.write}})],is.prototype,"type",void 0),u([p({type:NJ,json:{type:NJ,write:!0}})],is.prototype,"units",void 0),is=v4=u([M("esri.renderers.support.AuthoringInfoVisualVariable")],is);const UUe=is;let T0=class extends Y{constructor(e){super(e),this.type=null}};u([p({readOnly:!0,json:{read:!1,write:!0}})],T0.prototype,"type",void 0),T0=u([M("esri.rest.support.ColorRamp")],T0);var b4;let qd=b4=class extends T0{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new b4({fromColor:U(this.fromColor),toColor:U(this.toColor),algorithm:this.algorithm})}};u([Ee({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],qd.prototype,"algorithm",void 0),u([p({type:ne,json:{type:[Ke],write:{isRequired:!0}}})],qd.prototype,"fromColor",void 0),u([p({type:ne,json:{type:[Ke],write:{isRequired:!0}}})],qd.prototype,"toColor",void 0),u([p({type:["algorithmic"],json:{write:{isRequired:!0}}})],qd.prototype,"type",void 0),qd=b4=u([M("esri.rest.support.AlgorithmicColorRamp")],qd);var w4;let Ad=w4=class extends T0{constructor(t){super(t),this.colorRamps=null,this.type="multipart",this.weights=void 0}writeColorRamps(t,e,i,r){const s=t?.map(o=>o.toJSON(r)),{weights:n}=this;if(s&&n?.length&&s.length===n?.length){const o=100/n.reduce((l,c)=>l+c);let a=0;s.forEach((l,c)=>{l.start=a,a+=n[c]*o,l.stop=a})}e.colorRamps=s}readWeights(t,e){const i=e.colorRamps?.map(({start:r,stop:s})=>r==null||s==null?-1:s-r);if(!i?.some(r=>r<0))return i}clone(){return new w4({colorRamps:U(this.colorRamps)})}};u([p({type:[qd],json:{write:{isRequired:!0}}})],Ad.prototype,"colorRamps",void 0),u([oe("colorRamps")],Ad.prototype,"writeColorRamps",null),u([p({type:["multipart"],json:{write:{isRequired:!0}}})],Ad.prototype,"type",void 0),u([p({type:[Number]})],Ad.prototype,"weights",void 0),u([Q("weights",["colorRamps"])],Ad.prototype,"readWeights",null),Ad=w4=u([M("esri.rest.support.MultipartColorRamp")],Ad);const BUe={key:"type",base:T0,typeMap:{algorithmic:qd,multipart:Ad}};function qUe(t){return t?.type?t.type==="algorithmic"?qd.fromJSON(t):t.type==="multipart"?Ad.fromJSON(t):null:null}var _4;const tm=new We({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ik=new We({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),DJ=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],GUe=["high-to-low","above-and-below","above","below"],HUe=["flow-line","wave-front"],WUe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Ai=_4=class extends Y{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?qUe(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new _4({classificationMethod:this.classificationMethod,colorRamp:U(this.colorRamp),fadeRatio:U(this.fadeRatio),fields:this.fields?.slice(),field1:U(this.field1),field2:U(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([p({type:tm.apiValues,value:null,json:{type:tm.jsonValues,read:tm.read,write:tm.write,origins:{"web-document":{default:"manual",type:tm.jsonValues,read:tm.read,write:tm.write}}}})],Ai.prototype,"classificationMethod",null),u([p({types:BUe,json:{write:!0}})],Ai.prototype,"colorRamp",void 0),u([Q("colorRamp")],Ai.prototype,"readColorRamp",null),u([p({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ai.prototype,"fadeRatio",void 0),u([p({type:[String],value:null,json:{write:!0}})],Ai.prototype,"fields",null),u([p({type:Tp,value:null,json:{write:!0}})],Ai.prototype,"field1",null),u([p({type:Tp,value:null,json:{write:!0}})],Ai.prototype,"field2",null),u([p({type:HUe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ai.prototype,"flowTheme",null),u([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Ai.prototype,"focus",null),u([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Ai.prototype,"isAutoGenerated",void 0),u([p({type:Number,value:null,json:{type:Ke,write:!0}})],Ai.prototype,"numClasses",null),u([p({type:DJ,json:{type:DJ,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Ai.prototype,"lengthUnit",void 0),u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ai.prototype,"maxSliderValue",void 0),u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ai.prototype,"minSliderValue",void 0),u([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Ai.prototype,"statistics",null),u([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Ai.prototype,"standardDeviationInterval",null),u([p({type:ik.apiValues,value:null,json:{type:ik.jsonValues,read:ik.read,write:ik.write}})],Ai.prototype,"type",null),u([p({type:[UUe],json:{write:!0}})],Ai.prototype,"visualVariables",void 0),u([p({type:WUe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ai.prototype,"univariateSymbolStyle",null),u([p({type:GUe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ai.prototype,"univariateTheme",null),Ai=_4=u([M("esri.renderers.support.AuthoringInfo")],Ai);const oR=new We({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let aa=class extends Y{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([p({type:Ai,json:{write:!0}})],aa.prototype,"authoringInfo",void 0),u([p({type:oR.apiValues,readOnly:!0,json:{type:oR.jsonValues,read:!1,write:{writer:oR.write,ignoreOrigin:!0,isRequired:!0}}})],aa.prototype,"type",void 0),aa=u([M("esri.renderers.Renderer")],aa);let Ex=class extends Le(Y){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([p({type:Boolean,json:{write:!0}})],Ex.prototype,"showLegend",void 0),u([p({type:String,json:{write:!0}})],Ex.prototype,"title",void 0),Ex=u([M("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Ex);const gde=Ex,aR=new We({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let nn=class extends Y{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(X.getLogger(this).error(".field: field must be a string value"),null):y2(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([p()],nn.prototype,"index",void 0),u([p({type:aR.apiValues,readOnly:!0,json:{read:aR.read,write:{writer:aR.write,isRequired:!0}}})],nn.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],nn.prototype,"field",void 0),u([Mt("field")],nn.prototype,"castField",null),u([p({type:String,json:{write:!0}})],nn.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],nn.prototype,"valueExpressionTitle",void 0),u([p({readOnly:!0})],nn.prototype,"arcadeRequired",null),u([p({type:gde,json:{write:!0}})],nn.prototype,"legendOptions",void 0),nn=u([M("esri.renderers.visualVariables.VisualVariable")],nn);var x4;let Om=x4=class extends Y{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new x4({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([p({type:ne,json:{type:[Ke],write:{isRequired:!0}}})],Om.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],Om.prototype,"label",void 0),u([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Om.prototype,"value",void 0),u([oe("value")],Om.prototype,"writeValue",null),Om=x4=u([M("esri.renderers.visualVariables.support.ColorStop")],Om);const JUe=Om;var S4;let Ep=S4=class extends nn{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new S4({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([p({readOnly:!0})],Ep.prototype,"cache",null),u([p({type:["color"],json:{type:["colorInfo"]}})],Ep.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Ep.prototype,"normalizationField",void 0),u([p({type:[JUe],json:{write:!0}})],Ep.prototype,"stops",null),Ep=S4=u([M("esri.renderers.visualVariables.ColorVariable")],Ep);var $4;let mp=$4=class extends Y{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return S$(e.transparency)}writeOpacity(t,e,i){e[i]=p3(t)}clone(){return new $4({label:this.label,opacity:this.opacity,value:this.value})}};u([p({type:String,json:{write:!0}})],mp.prototype,"label",void 0),u([p({type:Number,json:{type:Ke,write:{target:"transparency",isRequired:!0}}})],mp.prototype,"opacity",void 0),u([Q("opacity",["transparency"])],mp.prototype,"readOpacity",null),u([oe("opacity")],mp.prototype,"writeOpacity",null),u([p({type:Number,json:{write:{isRequired:!0}}})],mp.prototype,"value",void 0),mp=$4=u([M("esri.renderers.visualVariables.support.OpacityStop")],mp);const ZUe=mp;var I4;let Gd=I4=class extends nn{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new I4({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};u([p({readOnly:!0})],Gd.prototype,"cache",null),u([p({type:["opacity"],json:{type:["transparencyInfo"]}})],Gd.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Gd.prototype,"normalizationField",void 0),u([p({type:[ZUe],json:{write:!0}})],Gd.prototype,"stops",null),Gd=I4=u([M("esri.renderers.visualVariables.OpacityVariable")],Gd);var k4;let Mp=k4=class extends nn{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new k4({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};u([p({readOnly:!0})],Mp.prototype,"cache",null),u([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Mp.prototype,"axis",void 0),u([p({type:["rotation"],json:{type:["rotationInfo"]}})],Mp.prototype,"type",void 0),u([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Mp.prototype,"rotationType",void 0),Mp=k4=u([M("esri.renderers.visualVariables.RotationVariable")],Mp);function YUe(t){return Tt(t)}var T4;let Ol=T4=class extends Y{constructor(t){super(t),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new T4({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([p({type:String,json:{write:!0}})],Ol.prototype,"label",void 0),u([p({type:Number,cast:Tt,json:{write:{isRequired:!0}}})],Ol.prototype,"size",void 0),u([p({type:Number,json:{write:{isRequired:!0}}})],Ol.prototype,"value",void 0),u([p({type:Boolean,json:{write:!1}})],Ol.prototype,"useMinValue",void 0),u([p({type:Boolean,json:{write:!1}})],Ol.prototype,"useMaxValue",void 0),Ol=T4=u([M("esri.renderers.visualVariables.support.SizeStop")],Ol);let _E=class extends gde{constructor(){super(...arguments),this.customValues=null}};u([p({type:[Number],json:{write:!0}})],_E.prototype,"customValues",void 0),_E=u([M("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],_E);const vde=_E;function e0(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function _g(t){return t!=null&&!isNaN(t)&&isFinite(t)}function bde(t){return t.valueExpression?"expression":t.field&&typeof t.field=="string"?"field":"unknown"}function KUe(t,e){const i=e||bde(t),r=t.valueUnit||"unknown";return i==="unknown"?"constant":t.stops?"stops":t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?"clamped-linear":r==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}const wde=()=>X.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),z3=t=>wde().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${t}`),j3=()=>wde().error("Use of arcade expressions requires an arcade context"),FJ=new Wi,xE=Math.PI,_de=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function xde(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(y=>y.type==="color"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void z3("ColorVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let a=s?e:null;const l=r.field,{ipData:c,hasExpression:d}=r.cache;let h=r.cache.compiledFunc;if(!l&&!d){const y=r.stops;return y&&y[0]&&y[0].color}if(typeof a!="number")if(d){if(i?.arcade==null)return void j3();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(y),w=v.createExecContext(n,b,i.timeZone);if(!h){const x=v.createSyntaxTree(r.valueExpression);h=v.createFunction(x),r.cache.compiledFunc=h}a=v.executeFunction(h,w)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){_g(m)&&!s&&(a/=m);const y=P8(a,c);if(y){const v=y[0],b=y[1],w=v===b?r.stops[v].color:ne.blendColors(r.stops[v].color,r.stops[b].color,y[2],i?.color);return new ne(w)}}}function Sde(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(y=>y.type==="opacity"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void z3("OpacityVariable");const s=typeof e=="number",n=s?null:e,o=n?.attributes;let a=s?e:null;const l=r.field,{ipData:c,hasExpression:d}=r.cache;let h=r.cache.compiledFunc;if(!l&&!d){const y=r.stops;return y&&y[0]&&y[0].opacity}if(typeof a!="number")if(d){if(i?.arcade==null)return void j3();const y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(y),w=v.createExecContext(n,b,i.timeZone);if(!h){const x=v.createSyntaxTree(r.valueExpression);h=v.createFunction(x),r.cache.compiledFunc=h}a=v.executeFunction(h,w)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){_g(m)&&!s&&(a/=m);const y=P8(a,c);if(y){const v=y[0],b=y[1];if(v===b)return r.stops[v].opacity;{const w=r.stops[v].opacity;return w+(r.stops[b].opacity-w)*y[2]}}}}function $de(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(m=>m.type==="rotation"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void z3("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a?.attributes,c=r.field,{hasExpression:d}=r.cache;let h=r.cache.compiledFunc,f=null;if(!c&&!d)return f;if(d){if(i?.arcade==null)return void j3();const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},y=i.arcade.arcadeUtils,v=y.getViewInfo(m),b=y.createExecContext(a,v,i.timeZone);if(!h){const w=y.createSyntaxTree(r.valueExpression);h=y.createFunction(w),r.cache.compiledFunc=h}f=y.executeFunction(h,b)}else l&&(f=l[c]);return f=typeof f!="number"||isNaN(f)?null:n+o*f,f}function XUe(t,e,i){const r=typeof e=="number",s=r?null:e,n=s?.attributes;let o=r?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const d=i?.scale,h=i?.view;o=d==null||h==="3d"?QUe(t):d}else if(!r)switch(t.inputValueType){case"expression":{if(i?.arcade==null)return void j3();const d={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},h=i.arcade.arcadeUtils,f=h.getViewInfo(d),m=h.createExecContext(s,f,i.timeZone);if(!l){const y=h.createSyntaxTree(t.valueExpression);l=h.createFunction(y),t.cache.compiledFunc=l}o=h.executeFunction(l,m);break}case"field":n&&(o=n[t.field]);break;case"unknown":o=null}if(!_g(o))return null;if(r||!t.normalizationField)return o;const c=n?parseFloat(n[t.normalizationField]):null;return _g(c)&&c!==0?o/c:null}function QUe(t){let e=null,i=null;const r=t.stops;return r?(e=r[0].value,i=r[r.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function V3(t,e,i){const r="visualVariables"in t?t.visualVariables?.find(n=>n.type==="size"):t;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void z3("SizeVariable");const s=kde(XUe(r,e,i),r,e,i,r.cache.ipData);return s==null||isNaN(s)?void 0:s}function To(t,e,i){return t==null?null:e0(t)?V3(t,e,i):_g(t)?t:null}function Ide(t,e,i){return _g(i)&&t>i?i:_g(e)&&t<e?e:t}function e6e(t,e,i,r){const s=To(e.minSize,i,r)||e.minDataValue;return t==null&&s==null?null:(t??0)+(s??0)}function t6e(t,e,i){const r=t.stops;let s=r?.length&&r[0].size;return s==null&&(s=t.minSize),To(s,e,i)}function i6e(t,e,i,r){const s=To(e.minSize,i,r);if(t==null)return s;const{minDataValue:n,maxDataValue:o}=e;if(n==null||o==null)return null;const a=(t-n)/(o-n),l=To(e.maxSize,i,r),c=r?.shape;if(t<=n)return s;if(t>=o)return l;if(s==null||l==null)return null;if(e.scaleBy==="area"&&c){const d=c==="circle",h=d?xE*(s/2)**2:s*s,f=h+a*((d?xE*(l/2)**2:l*l)-h);return d?2*Math.sqrt(f/xE):Math.sqrt(f)}return s+a*(l-s)}function r6e(t,e,i,r){const s=To(e.minSize,i,r);if(t==null||s==null)return s;const n=r?.shape,{minDataValue:o}=e;if(o==null)return null;const a=t/o,l=To(e.maxSize,i,r);let c=null;return c=n==="circle"?2*Math.sqrt(a*(s/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(a*s**2):a*s,Ide(c,s,l)}function s6e(t,e,i,r,s){if(t==null)return null;const[n,o,a]=P8(t,s);if(n===o)return To(e.stops?.[n].size,i,r);{const l=To(e.stops?.[n].size,i,r),c=To(e.stops?.[o].size,i,r);return l==null||c==null?null:l+(c-l)*a}}function n6e(t,e,i,r){const s=(r?.resolution??1)*D3[e.valueUnit],n=To(e.minSize,i,r),o=To(e.maxSize,i,r),{valueRepresentation:a}=e;if(t==null)return n;let l=null;return l=a==="area"?2*Math.sqrt(t/xE)/s:a==="radius"||a==="distance"?2*t/s:t/s,Ide(l,n,o)}function kde(t,e,i,r,s){switch(e.transformationType){case"additive":return e6e(t,e,i,r);case"constant":return t6e(e,i,r);case"clamped-linear":return i6e(t,e,i,r);case"proportional":return r6e(t,e,i,r);case"stops":return s6e(t,e,i,r,s);case"real-world-size":return n6e(t,e,i,r);case"identity":return t;case"unknown":return null}}function o6e(t,e,i){const{isScaleDriven:r}=t.cache;if(!(r&&i==="3d"||e))return null;const s={scale:e,view:i};let n=To(t.minSize,FJ,s),o=To(t.maxSize,FJ,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function a6e(t,e,i){if(!t.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach(l=>{const c=xde(l,e,i);r.push({variable:l,value:c})}),n.forEach(l=>{const c=Sde(l,e,i);r.push({variable:l,value:c})}),a.forEach(l=>{const c=$de(l,e,i);r.push({variable:l,value:c})}),o.forEach(l=>{const c=V3(l,e,i);r.push({variable:l,value:c})}),r}function P8(t,e){if(!e)return;let i=0,r=e.length-1;return e.some((s,n)=>t<s?(r=n,!0):(i=n,!1)),[i,r,(t-e[i])/(e[r]-e[i])]}function l6e(t,e,i){const r=["proportional","proportional","proportional"];for(const s of t){const n=s.useSymbolValue?"symbol-value":V3(s,e,i)??"proportional";switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const Fg=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:l6e,getColor:xde,getOpacity:Sde,getRotationAngle:$de,getSize:V3,getSizeForValue:kde,getSizeFromNumberOrVariable:To,getSizeRangeAtScale:o6e,getVisualVariableValues:a6e,viewScaleRE:_de},Symbol.toStringTag,{value:"Module"}));var E4;const rk=new We({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),M4=new We({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function zJ(t){if(t!=null)return typeof t=="string"||typeof t=="number"?YUe(t):t.type==="size"?e0(t)?t:(delete(t={...t}).type,new Ct(t)):void 0}function jJ(t,e,i){if(typeof t!="object")return t;const r=new Ct;return r.read(t,i),r}let Ct=E4=class extends nn{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&_de.test(this.valueExpression)}}set index(t){e0(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),e0(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return bde(this)}set maxDataValue(t){t&&this.stops&&(X.getLogger(this).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(X.getLogger(this).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return zJ(t)}readMaxSize(t,e,i){return jJ(t,e,i)}set minDataValue(t){t&&this.stops&&(X.getLogger(this).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(X.getLogger(this).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return zJ(t)}readMinSize(t,e,i){return jJ(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(X.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return KUe(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,r){if(t==="$view.scale"){if(r?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new R("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else e[i]=t}readValueUnit(t){return t?M4.read(t):null}clone(){return new E4({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:e0(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:e0(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType==="stops"){const t=this.stops;if(!t)return this;const e=t.map(r=>r.size).reverse(),i=t.length;for(let r=0;r<i;r++)t[r].size=e[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(t=>t.value||0)}};u([p({readOnly:!0})],Ct.prototype,"cache",null),u([p({type:rk.apiValues,json:{type:rk.jsonValues,origins:{"web-map":{read:!1}},read:rk.read,write:rk.write}})],Ct.prototype,"axis",void 0),u([p()],Ct.prototype,"index",null),u([p({type:String,readOnly:!0})],Ct.prototype,"inputValueType",null),u([p({type:vde,json:{write:!0}})],Ct.prototype,"legendOptions",void 0),u([p({type:Number,value:null,json:{write:!0}})],Ct.prototype,"maxDataValue",null),u([p({type:Number,value:null,json:{write:!0}})],Ct.prototype,"maxSize",null),u([Mt("maxSize")],Ct.prototype,"castMaxSize",null),u([Q("maxSize")],Ct.prototype,"readMaxSize",null),u([p({type:Number,value:null,json:{write:!0}})],Ct.prototype,"minDataValue",null),u([p({type:Number,value:null,json:{write:!0}})],Ct.prototype,"minSize",null),u([Mt("minSize")],Ct.prototype,"castMinSize",null),u([Q("minSize")],Ct.prototype,"readMinSize",null),u([p({type:String,json:{write:!0}})],Ct.prototype,"normalizationField",void 0),u([p({readOnly:!0})],Ct.prototype,"arcadeRequired",null),u([p({type:String})],Ct.prototype,"scaleBy",void 0),u([p({type:[Ol],value:null,json:{write:!0}})],Ct.prototype,"stops",null),u([p({type:["outline"],json:{write:!0}})],Ct.prototype,"target",void 0),u([p({type:String,readOnly:!0})],Ct.prototype,"transformationType",null),u([p({type:["size"],json:{type:["sizeInfo"]}})],Ct.prototype,"type",void 0),u([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ct.prototype,"useSymbolValue",void 0),u([p({type:String,json:{write:!0}})],Ct.prototype,"valueExpression",void 0),u([Q("valueExpression",["valueExpression","expression"])],Ct.prototype,"readValueExpression",null),u([oe("web-scene","valueExpression")],Ct.prototype,"writeValueExpressionWebScene",null),u([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ct.prototype,"valueRepresentation",void 0),u([p({type:M4.apiValues,json:{write:M4.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ct.prototype,"valueUnit",void 0),u([Q("valueUnit")],Ct.prototype,"readValueUnit",null),Ct=E4=u([M("esri.renderers.visualVariables.SizeVariable")],Ct);const c6e={color:Ep,size:Ct,opacity:Gd,rotation:Mp},u6e=new We({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),d6e=/^\[([^\]]+)\]$/i;let SE=class extends _e{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(i=>!!i),e?.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,r){const{rotationExpression:s,rotationType:n}=i,o=s?.match(d6e),a=o?.[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:a})),e)return e.map(l=>{const c=u6e.read(l.type),d=c6e[c];d||(X.getLogger(this).warn(`Unknown variable type: ${c}`),r?.messages&&r.messages.push(new pa("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const h=new d;return h.read(l,r),h})}writeVariables(e,i){const r=[];for(const s of e){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([p()],SE.prototype,"visualVariables",null),SE=u([M("esri.renderers.visualVariables.VisualVariableFactory")],SE);const h6e={base:nn,key:"type",typeMap:{opacity:Gd,color:Ep,rotation:Mp,size:Ct}},z_=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this._vvFactory=new SE}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,s,n){return this._vvFactory.readVariables(r,s,n)}writeVisualVariables(r,s,n,o){s[n]=this._vvFactory.writeVariables(r,o)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:r})=>r)??!1}hasVisualVariables(r,s){return r?this.getVisualVariablesForType(r,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(r,s){return this.visualVariables?.filter(n=>n.type===r&&(typeof s=="string"?n.target===s:s!==!1||!n.target))??[]}async collectVVRequiredFields(r,s){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const o of n)o&&(o.field&&vn(r,s,o.field),o.normalizationField&&vn(r,s,o.normalizationField),o.valueExpression&&(p6e(o.valueExpression,r,s)||await Hs(r,s,null,o.valueExpression)))}};return u([p({types:[h6e],value:null,json:{write:!0}})],i.prototype,"visualVariables",null),u([Q("visualVariables",["visualVariables","rotationType","rotationExpression"])],i.prototype,"readVisualVariables",null),u([oe("visualVariables")],i.prototype,"writeVisualVariables",null),i=u([M("esri.renderers.mixins.VisualVariablesMixin")],i),i};function p6e(t,e,i){const r=nLe(t);return r!=null&&(vn(e,i,r),!0)}const A8=[252,146,31,255],f6e=[153,153,153,255],m6e={type:"esriSMS",style:"esriSMSCircle",size:6,color:A8,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},y6e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:A8},g6e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},v6e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},b6e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},w6e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},_6e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},AC=Ni.fromJSON(m6e),U3=sr.fromJSON(y6e),Tde=Vn.fromJSON(g6e),x6e=ii.fromJSON(v6e);function Jbt(t){if(t==null)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return AC;case"polyline":return U3;case"polygon":case"extent":return Tde}return null}const Zbt=Ni.fromJSON(b6e),Ybt=sr.fromJSON(w6e),Kbt=Vn.fromJSON(_6e),S6e=jn.fromSimpleMarkerSymbol(AC),$6e=Yl.fromSimpleLineSymbol(U3),I6e=Ja.fromSimpleFillSymbol(Tde),k6e=new Qd({symbolLayers:new ue([new Rn({material:{color:A8},edges:new Jae({size:Zt(1),color:new ne(f6e)})})])}),T6e=new Yl({symbolLayers:new ue([new On({material:{color:new ne([0,0,0])},size:Zt(1)})])}),E6e=new Ja({symbolLayers:new ue([new Rn({outline:{color:new ne([0,0,0]),size:Zt(1)}})])});function Xbt(t){if(t==null)return null;switch(t.type){case"mesh":return k6e;case"point":case"multipoint":return S6e;case"polyline":return $6e;case"polygon":case"extent":return I6e}return null}const VJ="#useCIMFallbackSymbology()",Hd={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Hw(t,e=Hd){if(!t)return{symbol:null};const{retainId:i=Hd.retainId,ignoreDrivers:r=Hd.ignoreDrivers,hasLabelingContext:s=Hd.hasLabelingContext,retainCIM:n=Hd.retainCIM,cimFallbackEnabled:o=Hd.cimFallbackEnabled}=e;let a=null;if(Qa(t))a=t.clone();else if(t.type==="web-style")a=t.clone();else if(t.type==="cim"){const l=t.data?.symbol?.type;switch(l){case"CIMPointSymbol":a=n?t.clone():jn.fromCIMSymbol(t);break;case"CIMLineSymbol":o&&(a=T6e.clone(),e?.logWarning?.(VJ,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=E6e.clone(),e?.logWarning?.(VJ,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new R("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${l||"unknown"}' is unsupported in 3D`,{symbol:t})}}else if(t instanceof sr)a=Yl.fromSimpleLineSymbol(t);else if(t instanceof Ni)a=jn.fromSimpleMarkerSymbol(t);else if(t instanceof An)a=jn.fromPictureMarkerSymbol(t);else if(t instanceof Vn)a=e.geometryType&&e.geometryType==="mesh"?Qd.fromSimpleFillSymbol(t):Ja.fromSimpleFillSymbol(t);else{if(!(t instanceof ii))return{error:new R("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};a=s?Al.fromTextSymbol(t):jn.fromTextSymbol(t)}return i&&a&&a.type!=="cim"&&(a.id=t.id),!r||a.type==="cim"||a instanceof js||a.symbolLayers.forEach(l=>l.ignoreDrivers=!0),{symbol:a}}function LC(t,e,i,r){const s=Ede(t,{},{context:r,isLabelSymbol:!1});s!=null&&Tr(i,s,e)}function UJ(t,e,i,r){const s=Ede(t,{},{context:r,isLabelSymbol:!0});s!=null&&(e[i]=s)}function BJ(t){return Qa(t)||t instanceof js}function M6e(t){return t?.type==="polygon-3d"||t?.type==="line-3d"}function Ede(t,e,i){if(t==null)return null;const{context:r,isLabelSymbol:s}=i,n=r?.origin,o=r?.messages;if(n==="web-scene"&&!BJ(t)){const a=Hw(t,{retainCIM:!0,hasLabelingContext:s});return a.symbol!=null?a.symbol.write(e,r):(o?.push(new R("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:r,error:a.error})),null)}return IF(r?.layer)&&M6e(t)?(o?.push(new R("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:t,context:r})),null):(n==="web-map"||n==="portal-item"&&!IF(r?.layer))&&BJ(t)?(o?.push(new R("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:r})),null):t.write(e,r)}function Mde(t,e){return sRe(t,null,e)}const B3={types:mle,json:{write:{writer:LC},origins:{"web-scene":{types:EH,write:{writer:LC},read:{reader:w_({types:EH})}}}}},L8=uU({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},B3),O8={types:{base:kr,key:"type",typeMap:{"simple-fill":Jp.typeMap["simple-fill"],"picture-fill":Jp.typeMap["picture-fill"],"polygon-3d":Jp.typeMap["polygon-3d"],cim:Jp.typeMap.cim}},json:{write:{writer:LC},origins:{"web-scene":{type:Ja,write:{writer:LC}}}}},$E={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t?.toString()}}}};var C4;let Un=C4=class extends z_(aa){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new C4({description:this.description,label:this.label,symbol:U(this.symbol),visualVariables:U(this.visualVariables),authoringInfo:U(this.authoringInfo)})}};u([p({type:String,json:{write:!0}})],Un.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Un.prototype,"label",void 0),u([p(L8)],Un.prototype,"symbol",void 0),u([Ee({simple:"simple"})],Un.prototype,"type",void 0),Un=C4=u([M("esri.renderers.SimpleRenderer")],Un);const C6e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function P4(t){return t instanceof _e}function qJ(t){return t instanceof ue?Object.keys(t.items):P4(t)?cs(t).keys():t?Object.keys(t):[]}function sk(t,e){return t instanceof ue?t.items[e]:t[e]}function P6e(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function PS(t){return t?t.declaredClass:null}function Cde(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const r=qJ(t),s=qJ(e);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||P6e(t,e))return{type:"complete",oldValue:t,newValue:e};const n=s.filter(h=>!r.includes(h)),o=r.filter(h=>!s.includes(h)),a=r.filter(h=>s.includes(h)&&sk(t,h)!==sk(e,h)).concat(n,o).sort(),l=PS(t);if(l&&C6e.has(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let c;const d=P4(t)&&P4(e);for(const h of a){const f=sk(t,h),m=sk(e,h);let y;if((d||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(i&&i[h]&&typeof i[h]=="function")y=i[h]?.(f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;y={type:"complete",oldValue:f,newValue:m}}else y=typeof f=="object"&&typeof m=="object"&&PS(f)===PS(m)?Cde(f,m):{type:"complete",oldValue:f,newValue:m};y!=null&&(c!=null?c.diff[h]=y:c={type:"partial",diff:{[h]:y}})}}return c}function Qbt(t,e){if(t==null)return!1;const i=e.split(".");let r=t;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function A6e(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&PS(t)!==PS(e)?{type:"complete",oldValue:t,newValue:e}:Cde(t,e)}function nk(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!nk(i))return!1;for(const i of e.removed)if(!nk(i))return!1;for(const i of e.changed)if(!nk(i))return!1;return!0}case"partial":for(const e in t.diff)if(!nk(t.diff[e]))return!1;return!0}}var A4;const L6e=Qr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Mx=A4=class extends Le(Y){static from(t){return ag(A4,t)}constructor(t){super(t),this.title=null,this.order=null}};u([p({type:String,json:{write:!0}})],Mx.prototype,"title",void 0),u([Ee(L6e)],Mx.prototype,"order",void 0),Mx=A4=u([M("esri.renderers.support.RendererLegendOptions")],Mx);const R8=Mx;let Hl=class extends Le(Y){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};u([p($E)],Hl.prototype,"value",void 0),u([p($E)],Hl.prototype,"value2",void 0),u([p($E)],Hl.prototype,"value3",void 0),Hl=u([M("esri.renderers.support.UniqueValue")],Hl);let Ld=class extends Le(Y){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(r=>new Hl({value:r})):i==="object"?e[0]instanceof Hl?e:e.map(r=>new Hl(r)):null}};u([p({type:String,json:{write:!0}})],Ld.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Ld.prototype,"label",void 0),u([p(B3)],Ld.prototype,"symbol",void 0),u([p({type:[Hl],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new Hl({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const r of t){const s=[r.value,r.value2,r.value3].filter(Ei).map(n=>n.toString());i.push(s)}e.values=i}}}})],Ld.prototype,"values",void 0),u([Mt("values")],Ld.prototype,"castValues",null),Ld=u([M("esri.renderers.support.UniqueValueClass")],Ld);let hy=class extends Le(Y){constructor(e){super(e),this.heading=null,this.classes=null}};u([p({type:String,json:{write:!0}})],hy.prototype,"heading",void 0),u([p({type:[Ld],json:{write:{isRequired:!0}}})],hy.prototype,"classes",void 0),hy=u([M("esri.renderers.support.UniqueValueGroup")],hy);var L4;let jl=L4=class extends Y{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new L4({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${t}`}};u([p({type:String,json:{write:!0}})],jl.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],jl.prototype,"label",void 0),u([p(L8)],jl.prototype,"symbol",void 0),u([p($E)],jl.prototype,"value",void 0),jl=L4=u([M("esri.renderers.support.UniqueValueInfo")],jl);const GJ=new Map;async function O6e(t,e){try{return{data:(await N8(t,e)).data,baseUrl:DA(t),styleUrl:t}}catch(i){return Ss(i),null}}function R6e(t,e,i){const r=e.portal!=null?e.portal:ce.getDefault();let s;const n=`${r.url} - ${r.user?.username} - ${t}`,o=GJ.get(n);if(o)return o;const a=N6e(t,r,i).then(l=>(s=l,l.fetchData())).then(l=>({data:l,baseUrl:s.itemUrl??"",styleName:t}));return GJ.set(n,a),a}function N6e(t,e,i){return e.load(i).then(()=>{const r=new xr({disableExtraQuery:!0,query:`owner:${HJ} AND type:${WJ} AND typekeywords:"${t}"`});return e.queryItems(r,i)}).then(({results:r})=>{let s=null;const n=t.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords?.some(l=>l.toLowerCase()===n)&&o.type===WJ&&o.owner===HJ){s=o;break}}if(!s)throw new R("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(i)})}function Pde(t,e,i){return t?.styleUrl!=null?O6e(t.styleUrl,i):t?.styleName!=null?R6e(t.styleName,e,i):Promise.reject(new R("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Ade(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function D6e(t,e){for(const i of e)switch(i){case"cim":if(t.cimRef)return{format:i,url:encodeURI(t.cimRef)};break;case"web-gltf-basisu":{const r=lR(t,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=lR(t,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=lR(t,"gltf");if(r)return{format:"web-gltf",url:r};if(t.webRef)return{format:i,url:encodeURI(t.webRef)};break}}}function lR(t,e){if(!H("enable-feature:force-wosr"))return t.formatInfos?.find(i=>i.type===e)?.href}function N8(t,e){const i={responseType:"json",query:{f:"json"},...e};return xe(Gn(t),i)}const HJ="esri_en",WJ="Style",F6e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Cx;const JJ="uvInfos-watcher",ZJ="uvGroups-watcher",z6e=",",j6e=Mi(jl);function V6e(t){const{field1:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=t,a=!(!e||!i);return[{classes:(n??[]).map(l=>{const{symbol:c,label:d,value:h,description:f}=l,[m,y,v]=a?h?.toString()?.split(s||"")||[]:[h],b=[];return(e||o)&&b.push(m),i&&b.push(y),r&&b.push(v),{symbol:c,label:d,values:[b],description:f}})}]}function pv(t){return t!=null&&t!==""&&(typeof t!="string"||t.trim()!==""&&t.toLowerCase()!=="<null>")||(t=null),t+""}let yi=Cx=class extends z_(aa){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=e.find(a=>a.value===i[n].value);o?A6e(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<e.length;n++)i.find(o=>o.value===e[n].value)||(s.removed.push(e[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:y2(t)}writeField(t,e,i,r){typeof t=="string"?e[i]=t:r?.messages?r.messages.push(new R("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):X.getLogger(this).error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||ce.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const r=gh(e.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(t,e,i,r){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=ug(t.styleUrl,r))}set uniqueValueGroups(t){this.styleOrigin?X.getLogger(this).error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?X.getLogger(this).error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){if(this.styleOrigin)return void X.getLogger(this).error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?j6e(t):new jl({value:t,symbol:yle(e)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[pv(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void X.getLogger(this).error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e)for(let i=0;i<e.length;i++){const r=e[i];if(String(r.value)===String(t)){delete this._valueInfoMap[pv(t)],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await wh()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){return this.valueExpression&&e?.arcade==null?void X.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(t,e)?.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&i?.arcade==null){const s=await wh(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}return this._getUniqueValueInfo(t,i)?.symbol||this.defaultSymbol}get symbols(){const t=[];if(this._isInfosSource)for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);else for(const e of this.uniqueValueGroups??[])for(const i of e.classes??[])i.symbol&&t.push(i.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,s)=>r+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new Cx({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:U(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:U(this.visualVariables),legendOptions:U(this.legendOptions),authoringInfo:U(this.authoringInfo),backgroundFillSymbol:U(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=U(this.uniqueValueInfos),i=U(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(U(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Hs(t,e,null,this.valueExpression)];vn(t,e,this.field),vn(t,e,this.field2),vn(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Pde(this.styleOrigin,{portal:this.portal}).then(t=>{const e=[];return this._valueInfoMap={},t?.data&&Array.isArray(t.data.items)&&t.data.items.forEach(i=>{const r=new js({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new jl({value:i.name,symbol:r});e.push(s),this._valueInfoMap[pv(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",z6e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[pv(e.value)]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(JJ);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(de(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,JJ)}}_watchUniqueValueGroups(){this.removeHandles(ZJ);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(de(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])e.push(de(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,ZJ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of n)for(const c of l.classes??[]){const{symbol:d,label:h,values:f,description:m}=c;for(const y of f??[]){const{value:v,value2:b,value3:w}=y,x=[v];i&&x.push(b),r&&x.push(w);const S=a?x.join(s||""):x[0]??void 0;t.push(new jl({symbol:d,label:h,value:S,description:m}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!e&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=n.map(c=>{const{symbol:d,label:h,value:f,description:m}=c,[y,v,b]=o?f?.toString()?.split(s||"")||[]:[f];return new Ld({symbol:d,label:h,description:m,values:[new Hl({value:y,value2:v,value3:b})]})}),l=[new hy({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=e??{};let a=this._cache.compiledFunc;const l=n.arcadeUtils;if(!a){const d=l.createSyntaxTree(this.valueExpression);a=l.createFunction(d),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._valueInfoMap[pv(c)]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,o=[];e&&o.push(i[e]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else e&&(r=i[e]);return this._valueInfoMap[pv(r)]}static fromPortalStyle(t,e){const i=new Cx(e?.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e?.portal||ce.getDefault());const r=i.populateFromStyle();return r.catch(s=>{X.getLogger(this.prototype).error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(t,e){const i=new Cx(e?.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const r=i.populateFromStyle();return r.catch(s=>{X.getLogger(this.prototype).error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};u([p({readOnly:!0})],yi.prototype,"_cache",null),u([Ee({uniqueValue:"unique-value"})],yi.prototype,"type",void 0),u([p(O8)],yi.prototype,"backgroundFillSymbol",void 0),u([p({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],yi.prototype,"field",null),u([Mt("field")],yi.prototype,"castField",null),u([oe("field")],yi.prototype,"writeField",null),u([p({type:String,value:null,json:{write:!0}})],yi.prototype,"field2",null),u([p({type:String,value:null,json:{write:!0}})],yi.prototype,"field3",null),u([p({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],yi.prototype,"orderByClassesEnabled",void 0),u([p({type:String,value:null,json:{write:!0}})],yi.prototype,"valueExpression",null),u([p({type:String,json:{write:!0}})],yi.prototype,"valueExpressionTitle",void 0),u([p({type:R8,json:{write:!0}})],yi.prototype,"legendOptions",void 0),u([p({type:String,json:{write:!0}})],yi.prototype,"defaultLabel",void 0),u([p(uU({...B3},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],yi.prototype,"defaultSymbol",null),u([p({type:String,value:null,json:{write:!0}})],yi.prototype,"fieldDelimiter",null),u([p({type:ce,readOnly:!0})],yi.prototype,"portal",void 0),u([Q("portal",["styleName"])],yi.prototype,"readPortal",null),u([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],yi.prototype,"styleOrigin",void 0),u([Q("styleOrigin",["styleName","styleUrl"])],yi.prototype,"readStyleOrigin",null),u([oe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],yi.prototype,"writeStyleOrigin",null),u([p({type:[hy],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||V6e(e)).map(r=>hy.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],yi.prototype,"uniqueValueGroups",null),u([p({type:[jl],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],yi.prototype,"uniqueValueInfos",null),yi=Cx=u([M("esri.renderers.UniqueValueRenderer")],yi);var O4,uw;let Gr=(uw=class extends Y{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10}clone(){return new O4(U({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}},O4=uw,uw);u([p({type:[String],json:{write:!0}})],Gr.prototype,"attachmentTypes",void 0),u([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Gr.prototype,"attachmentsWhere",void 0),u([p({type:Boolean,json:{write:!0}})],Gr.prototype,"cacheHint",void 0),u([p({type:[String],json:{write:!0}})],Gr.prototype,"keywords",void 0),u([p({type:[String],json:{write:!0}})],Gr.prototype,"globalIds",void 0),u([p({json:{write:!0}})],Gr.prototype,"name",void 0),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Gr.prototype,"num",void 0),u([p({type:[Number],json:{write:!0}})],Gr.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Gr.prototype,"orderByFields",void 0),u([p({type:Boolean,json:{default:!1,write:!0}})],Gr.prototype,"returnMetadata",void 0),u([p({type:[Number],json:{write:!0}})],Gr.prototype,"size",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Gr.prototype,"start",void 0),u([oe("start"),oe("num")],Gr.prototype,"writeStart",null),u([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Gr.prototype,"where",void 0),Gr=O4=u([M("esri.rest.support.AttachmentQuery")],Gr),Gr.from=Mi(Gr);const Lde=Qr()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),YJ="percent-of-total",KJ="field",r0t=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const s=!!this.normalizationField,n=this.normalizationTotal!=null;return s||n?(r=s&&KJ||n&&YJ||null,s&&n&&X.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==KJ&&r!==YJ||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return u([p({type:String,json:{name:"parameters.normalizationField",write:!0}})],i.prototype,"normalizationField",void 0),u([p({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],i.prototype,"normalizationMaxValue",void 0),u([p({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],i.prototype,"normalizationMinValue",void 0),u([p({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],i.prototype,"normalizationTotal",void 0),u([Ee(Lde,{name:"parameters.normalizationType"})],i.prototype,"normalizationType",null),i=u([M("esri.rest.support.NormalizationBinParametersMixin")],i),i};var R4,dw;let Ii=(dw=class extends Y{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,i){i.historicMoment=e&&e.getTime()}writeStart(e,i){i.resultOffset=this.start,i.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(i.definitionExpression="1=1")}clone(){return new R4(U({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}},R4=dw,dw);u([p({type:Boolean,json:{write:!0}})],Ii.prototype,"cacheHint",void 0),u([p({type:Dn,json:{write:!0}})],Ii.prototype,"dynamicDataSource",void 0),u([p({type:String,json:{write:!0}})],Ii.prototype,"gdbVersion",void 0),u([p({type:Number,json:{write:!0}})],Ii.prototype,"geometryPrecision",void 0),u([p({type:Date})],Ii.prototype,"historicMoment",void 0),u([oe("historicMoment")],Ii.prototype,"_writeHistoricMoment",null),u([p({type:Number,json:{write:!0}})],Ii.prototype,"maxAllowableOffset",void 0),u([p({json:{write:!0}})],Ii.prototype,"objectIds",void 0),u([p({type:[String],json:{write:!0}})],Ii.prototype,"orderByFields",void 0),u([p({type:[String],json:{write:!0}})],Ii.prototype,"outFields",void 0),u([p({type:fe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ii.prototype,"outSpatialReference",void 0),u([p({json:{write:!0}})],Ii.prototype,"relationshipId",void 0),u([p({type:Number,json:{read:{source:"resultOffset"}}})],Ii.prototype,"start",void 0),u([oe("start"),oe("num")],Ii.prototype,"writeStart",null),u([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Ii.prototype,"num",void 0),u([p({json:{write:!0}})],Ii.prototype,"returnGeometry",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ii.prototype,"returnM",void 0),u([p({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ii.prototype,"returnZ",void 0),u([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ii.prototype,"where",void 0),Ii=R4=u([M("esri.rest.support.RelationshipQuery")],Ii),Ii.from=Mi(Ii);const XJ=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ii}},Symbol.toStringTag,{value:"Module"})),N4=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function U6e(t,e,i,r){const s=await Gf(t);if(await D8(t,e,r),!s.addAttachment)throw new R(r,"Layer source does not support addAttachment capability");return s.addAttachment(e,i)}function D8(t,e,i){const{attributes:r}=e,{objectIdField:s}=t;return t.capabilities?.data?.supportsAttachment?e?r?s&&r[s]?Promise.resolve():Promise.reject(new R(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new R(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new R(i,"A feature is required to add/delete/update attachments")):Promise.reject(new R(i,"this layer doesn't support attachments"))}async function B6e(t,e,i,r,s){const n=await Gf(t);if(await D8(t,e,s),!n.updateAttachment)throw new R(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(e,i,r)}async function q6e(t,e,i){const{applyEdits:r}=await K(()=>import("./editingSupport-BpA7e-w3.js"),[]),s=await t.load();let n=i;return s.type==="feature"&&s.infoFor3D&&e.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await h8e(s,e.deleteFeatures,s.globalIdField)}),r(s,s.source,e,i)}async function G6e(t,e,i){const{uploadAssets:r}=await K(()=>import("./editingSupport-BpA7e-w3.js"),[]),s=await t.load();return r(s,s.source,e,i)}async function H6e(t,e,i,r){const s=await Gf(t);if(await D8(t,e,r),!s.deleteAttachments)throw new R(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(e,i)}async function W6e(t,e,i){const r=(await t.load({signal:e?.signal})).source;if(!r.fetchRecomputedExtents)throw new R(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)}async function J6e(t,e,i,r){e=Gr.from(e),await t.load();const s=t.source,n=t.capabilities;if(!n?.data?.supportsAttachment)throw new R(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:c,size:d,start:h,where:f}=e;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||d?.length>0||c||h||f))throw new R(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a?.length||l?.length||f))throw new R(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!s.queryAttachments)throw new R(r,"Layer source does not support queryAttachments capability",e);return!n?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),s.queryAttachments(e)}async function Z6e(t,e,i,r){const s=await Gf(t);if(!s.queryObjectIds)throw new R(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Te.from(e)??t.createQuery(),i)}async function Y6e(t,e,i,r){const s=await Gf(t);if(!s.queryFeatureCount)throw new R(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Te.from(e)??t.createQuery(),i)}async function K6e(t,e,i,r){const s=await Gf(t);if(!s.queryExtent)throw new R(r,"Layer source does not support queryExtent capability");return s.queryExtent(Te.from(e)??t.createQuery(),i)}async function X6e(t,e,i,r){const s=await Gf(t);if(!s.queryRelatedFeatures)throw new R(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(Ii.from(e),i)}async function Q6e(t,e,i,r){const s=await Gf(t);if(!s.queryRelatedFeaturesCount)throw new R(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(Ii.from(e),i)}async function e8e(t){const e=t.source;if(e?.refresh)try{const{dataChanged:i,updates:r}=await e.refresh();if(r!=null&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await V6(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function t8e(t){const e=new Te;e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,e.outFields=["*"],e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null;const i=t.capabilities?.query;i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference);const r=t.capabilities?.data;r?.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),r?.supportsM&&t.returnM!=null&&(e.returnM=t.returnM);const{timeOffset:s,timeExtent:n}=t;return e.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,e}function Ode(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function Rde(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function i8e(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function r8e(t,e,i,r){const s=i?.feature,n=!!t.subtypes?.length;if(n&&!i?.excludeImpliedDomains){const l=n8e(t,e);if(l)return l}const o=n&&s8e(t,s);if(o){const l=o?.domains?.[e];return l?.type==="inherited"?r:l}const a=z8(t.types,t.typeIdField,s);if(a){const l=a.domains&&a.domains[e];if(l&&l?.type!=="inherited")return l}if(r)return r;if(!i?.excludeImpliedDomains){const l=o8e(t,e);if(l)return l}return null}function s8e(t,e){const{subtypes:i,subtypeField:r}=t;if(!e?.attributes||!i?.length||!r)return null;const s=e.attributes[r];return s==null?null:i.find(n=>n.code===s)}function n8e(t,e){const{fieldsIndex:i,subtypeField:r}=t,{name:s,type:n}=i.get(e)??{};if(!s)return null;if((r&&i.get(r)?.name)===s&&t.subtypes?.length){const o=t.subtypes.map(a=>new uy({code:Nde(a.code,n),name:a.name}));if(o?.length)return new Yp({codedValues:o})}return null}function o8e(t,e){const{fieldsIndex:i}=t,{name:r,type:s}=i.get(e)??{};if(!r)return null;if(("typeIdField"in t?i.get(t.typeIdField)?.name:null)===r&&"types"in t&&t.types?.length){const n=t.types.map(o=>new uy({code:Nde(o.id,s),name:o.name}));return new Yp({codedValues:n})}return null}function Nde(t,e){return e?bae({type:e})&&typeof t=="number"?`${t}`:LLe({type:e})&&typeof t=="string"?Number.parseInt(t,10):t:t}async function Gf(t){return(await t.load()).source}async function s0t(t,e){if(!ft)return;const i=ft.findCredential(t);if(i)return i.userId;let r;try{const s=await D6(t,e);s&&(r=await ft.checkSignInStatus(`${s}/sharing`))}catch{}return r?r.userId:null}async function Dde(t,e){if(!ft||ft.findCredential(t))return;let i;try{const r=await D6(t,e);r&&(i=await ft.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=e!=null?e.signal:null;await ft.getCredential(t,{signal:r})}catch{}}async function a8e(t,e,i){const r=t.parsedUrl?.path;r&&t.authenticationTriggerEvent===e&&await Dde(r,i)}async function n0t(t){const e=t.parsedUrl?.path;e&&l8e(t)&&await Dde(e)}function l8e(t){return c8e(t)&&("serviceDefinitionExpression"in t&&OC(t.serviceDefinitionExpression)||"definitionExpression"in t&&OC(t.definitionExpression))}function c8e(t){return!(!Soe(t)||!t.capabilities?.query.supportsCurrentUser)}function OC(t){return!!t?.toLowerCase().includes("current_user")}function u8e(t){return!IE(t)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const cR=w_({types:mle});function F8(t,e){if(t.defaultSymbol)return t.types?.length?new yi({defaultSymbol:cR(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(i=>({id:i.id,symbol:cR(i.symbol,i,e)}))}):new Un({symbol:cR(t.defaultSymbol,t,e)})}function d8e(t){let e=t.sourceJSON?.cacheMaxAge;if(!e)return!1;const i=t.editingInfo?.lastEditDate?.getTime();return i==null||(e*=1e3,Date.now()-i<e)}async function h8e(t,e,i){if(e==null)return null;const r=[],{objectIdField:s}=t;if(e.forEach(c=>{let d=null;if("attributes"in c){const{attributes:h}=c;d={globalId:h[i],objectId:h[s]!=null&&h[s]!==-1?h[s]:null}}else d={globalId:c.globalId,objectId:c.objectId!=null&&c.objectId!==-1?c.objectId:null};d.globalId!=null&&(d.objectId!=null&&d.objectId!==-1||r.push(d.globalId))}),r.length===0)return null;const n=t.createQuery();n.where=r.map(c=>`${i}='${c}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const o=await cPe(mde(t,n));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const c of l){const d=c.attributes[i],h=c.attributes[s];d!=null&&h!=null&&h!==-1&&a.set(fAe(d),h)}return a}function z8(t,e,i){if(!e||!i||!t)return null;const r=i.getAttribute(e);return r==null?null:t.find(s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()})??null}function IE(t){return t.sourceJSON?.isMultiServicesView||p8e(t)}function p8e(t){return!!t.sourceJSON?.capabilities?.toLowerCase().split(",").map(e=>e.trim()).includes("map")}function f8e(t,e,i){const r=e?.queryAttributeBins;if(!e?.operations?.supportsQueryBins||!r)throw new R(i,"Layer source does not support binning");switch(t.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new R(i,"Layer source does not support auto-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!QJ(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new R(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new R(i,"Layer source does not support date binning");if(t.binParameters.snapToData&&!r.supportsSnapToData)throw new R(i,"Layer source does not support snapToData binning");if(t.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new R(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new R(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new R(i,"Layer source does not support fixed-interval binning");if(t.binParameters.normalizationType&&(!r.supportsNormalization||!QJ(t.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new R(i,"Layer source does not support normalization binning")}if(t.binParameters.stackBy&&!r.supportsStackBy)throw new R(i,"Layer source does not support stackBy binning");if(t.binParameters.splitBy&&!r.supportsSplitBy)throw new R(i,"Layer source does not support splitBy binning");if(t.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new R(i,"Layer source does not support firstDayOfWeek binning");const s=r?.supportedStatistics;if(t.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of t.outStatistics){const a=n.get(o);if(a&&!s[a])throw new R(i,`Layer source does not support ${o} statistic type`)}}}function QJ(t,e){return t!=null&&!!e?.[Lde.toJSON(t)]}let Ib=class extends Le(Y){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Ib.prototype,"shapeAreaField",void 0),u([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Ib.prototype,"shapeLengthField",void 0),u([p({type:String,json:{read:t=>D$e.read(t)||F$e.read(t)}})],Ib.prototype,"units",void 0),Ib=u([M("esri.layers.support.GeometryFieldsInfo")],Ib);var D4;let Km=D4=class extends Y{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ue}clone(){return new D4({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([p({type:String,json:{write:{isRequired:!0}}})],Km.prototype,"floorField",void 0),u([p({json:{read:!1,write:!1}})],Km.prototype,"viewAllMode",void 0),u([p({json:{read:!1,write:!1}})],Km.prototype,"viewAllLevelIds",void 0),Km=D4=u([M("esri.layers.support.LayerFloorInfo")],Km);function m8e(t){const{nonStandardUrlAllowed:e=!1,separator:i}=t??{},r=U(V2),s=r.json?.write;return typeof s=="object"&&s&&(s.writer=function(n,o,a,l){kSe(this,n,i,o,l)}),{...r,set:function(n){if(n==null)return void this._set("url",n);const o=ISe({layer:this,url:n,nonStandardUrlAllowed:e,logger:X.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}}}function y8e(t,e){const{separator:i}=e??{},r=$t(t.url);return r!=null&&(t.dynamicDataSource!=null?r.path=fa(r.path,"dynamicLayer"):t.layerId!=null&&(r.path=fa(r.path,i??"",t.layerId.toString()))),r}const eZ=new We({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),tZ=new We({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let lo=class extends Le(Y){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([p({json:{read:eZ.read,write:eZ.write}})],lo.prototype,"cardinality",void 0),u([p({json:{name:"catalogID"}})],lo.prototype,"catalogId",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"composite",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"id",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"keyField",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"keyFieldInRelationshipTable",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"name",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"relatedTableId",void 0),u([p({json:{read:!0,write:!0}})],lo.prototype,"relationshipTableId",void 0),u([p({json:{read:tZ.read,write:tZ.write}})],lo.prototype,"role",void 0),lo=u([M("esri.layers.support.Relationship")],lo);const g8e=[["binary","application/octet-stream","bin",""]];function l0t(t,e){return Ude(e.name,t?.supportedFormats??[])!=null}function c0t(t,e){if(!t)return!1;const i=v8e(e,t.supportedFormats??[]);return i!=null&&t.editFormats.includes(i)}function Fde(t,e){return V8(_8e(t,e))}function zde(t,e){return V8(Ude(t,e))}function u0t(t,e){return Bde(w8e(t,e))}function v8e(t,e){return zde(t.name,e)??Fde(t.type,e)}function q3(t,e,i){return Fde(t,i)??zde(e,i)}function jde({supportedFormats:t}){return q3("model/gltf-binary","glb",t)}function d0t(t){const e=jde(t);return e!=null&&t.editFormats.includes(e)}function b8e({supportedFormats:t}){return q3("model/gltf+json","gltf",t)}function Vde(t){if(!t)return null;const e=jde(t),i=b8e(t);let r=null;for(const s of t.queryFormats){if(s===e)return s;s===i&&(r=s)}return r}function h0t({supportedFormats:t}){return q3("application/esri3do-SR_world","wld",t)}function p0t({supportedFormats:t}){return q3("application/esri3do-SR_prj","prj",t)}function j8(t){return[...g8e,...t]}function w8e(t,e){return j8(e).find(i=>V8(i)===t)}function _8e(t,e){const i=t.toLowerCase();return j8(e).find(r=>Bde(r)===i)}function Ude(t,e){const i=t.toLowerCase();return j8(e).find(r=>x8e(r).some(s=>i.endsWith(s)))}function V8(t){return t?.[0]}function Bde(t){return t?.[1].toLowerCase()}function x8e(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function f0t(t){return t.tables?.find(e=>e.role==="assetMaps")}function we(t,e,i){return!!qde(t,e,i)}function kb(t,e,i){return qde(t,e,i)}function qde(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}const S8e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function $8e(t){const e=t?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function U2(t,e){return!!t?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(e.toLowerCase())}function I8e(t){const e=t?.supportedStatisticTypes?.map(i=>i.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_cont"),percentileDiscrete:!!e?.includes("percentile_disc"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function k8e(t){const e=t?.supportedNormalizationTypes?.map(i=>i.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function U8(t,e){return{analytics:T8e(t),attachment:E8e(t),data:M8e(t),metadata:C8e(t),operations:P8e(t.capabilities,t,e),query:A8e(t,e),queryAttributeBins:R8e(t),queryRelated:L8e(t),queryTopFeatures:O8e(t),editing:N8e(t)}}function T8e(t){return{supportsCacheHint:U2(t.advancedQueryCapabilities,"queryAnalytics")}}function E8e(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:U2(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:we(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:we(t,"supportsAttachmentsResizing",!1),supportsTypeWildcard:we(t.advancedQueryCapabilities,"supportsQueryAttachmentWithTypeWildcard",!1)};return e&&Array.isArray(e)&&e.forEach(r=>{const s=S8e[r.name];s&&(i[s]=!!r.isEnabled)}),i}function M8e(t){return{isVersioned:we(t,"isDataVersioned",!1),isBranchVersioned:we(t,"isDataBranchVersioned",!1),supportsAttachment:we(t,"hasAttachments",!1),supportsM:we(t,"hasM",!1),supportsZ:we(t,"hasZ",!1)}}function C8e(t){return{supportsAdvancedFieldProperties:we(t,"supportsFieldDescriptionProperty",!1)}}function P8e(t,e,i){const r=t?.toLowerCase().split(",").map(f=>f.trim())??[],s=i?ya(i):null,n=r.includes(s?.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!e.datesInUnknownTimezone&&e.uniqueIdInfo?.OIDFieldContainsHashValue!==!0;let a=o&&r.includes("create"),l=o&&r.includes("delete"),c=o&&r.includes("update");const d=r.includes("changetracking"),h=e.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:we(e,"supportsCalculate",!1),supportsTruncate:we(e,"supportsTruncate",!1),supportsValidateSql:we(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:d,supportsQuery:n,supportsQueryAnalytics:we(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:we(h,"supportsQueryAttachments",!1),supportsQueryBins:we(h,"supportsQueryBins",!1)||!!e.queryBinsCapabilities,supportsQueryPivot:we(h,"supportsQueryPivot",!1),supportsQueryTopFeatures:we(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:we(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:we(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:we(e,"supportsAsyncConvert3D",!1)}}function A8e(t,e){const i=t.advancedQueryCapabilities,r=t.ownershipBasedAccessControlForFeatures,s=t.archivingInfo,n=t.currentVersion,o=e?.includes("MapServer"),a=!o||n>=H("mapserver-pbf-version-support"),l=u$(e),c=new Set((t.supportedQueryFormats??"").split(",").map(d=>d.toLowerCase().trim()));return{maxRecordCount:kb(t,"maxRecordCount",void 0),maxRecordCountFactor:kb(t,"maxRecordCountFactor",void 0),maxUniqueIDCount:kb(t,"maxUniqueIDCount",void 0),standardMaxRecordCount:kb(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:$8e(i),supportsCacheHint:we(i,"supportsQueryWithCacheHint",!1)||U2(i,"query"),supportsCentroid:we(i,"supportsReturningGeometryCentroid",!1),supportsCentroidOnDegeneratedQuantizedGeometry:l||e==null,supportsCompactGeometry:l,supportsCurrentUser:we(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:we(i,"supportsDefaultSR",!1),supportsDegeneratedQuantizedGeometry:we(i,"supportsDegeneratedQuantizedGeometry",!1),supportsDisjointSpatialRelationship:we(i,"supportsDisjointSpatialRel",!1),supportsDistance:we(i,"supportsQueryWithDistance",!1),supportsDistinct:we(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:we(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&c.has("pbf"),supportsFullTextSearch:we(i,"supportsFullTextSearch",!1),supportsGeometryProperties:we(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:we(i,"supportsHavingClause",!1),supportsHistoricMoment:we(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:we(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:we(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:we(i,"supportsPagination",!1),supportsPaginationOnAggregatedQueries:we(i,"supportsPaginationOnAggregatedQueries",!1),supportsPercentileStatistics:we(i,"supportsPercentileStatistics",!1),supportsQuantization:we(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:we(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:we(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:we(r,"allowOthersToQuery",!0),supportsQueryGeometry:we(t,"supportsReturningQueryGeometry",!1),supportsResultType:we(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!Vde(t.infoFor3D),supportsSpatialAggregationStatistics:we(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:we(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:we(t,"useStandardizedQueries",!1),supportsStatistics:we(i,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:we(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:we(i,"supportsTrueCurve",!1),tileMaxRecordCount:kb(t,"tileMaxRecordCount",void 0)}}function L8e(t){const e=t.advancedQueryCapabilities,i=we(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:we(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:U2(e,"queryRelated")}}function O8e(t){return{supportsCacheHint:U2(t.advancedQueryCapabilities,"queryTopFilter")}}function R8e(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:we(e,"supportsDateBin",!1),supportsFixedInterval:we(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:we(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:we(e,"supportsFixedBoundariesBin",!1),supportsStackBy:we(e,"supportsStackBy",!1),supportsSplitBy:we(e,"supportsSplitBy",!1),supportsSnapToData:we(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:we(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:we(e,"supportsFirstDayOfWeek",!1),supportsNormalization:we(e,"supportsNormalization",!1),supportedStatistics:I8e(e),supportedNormalizationTypes:k8e(e)}}function N8e(t){const e=t.ownershipBasedAccessControlForFeatures,i=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:we(t,"allowGeometryUpdates",!0),supportsGlobalId:we(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:we(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:we(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:we(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:we(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:we(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:we(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:we(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:we(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:we(i,"supportsAsyncApplyEdits",!1),zDefault:kb(t,"zDefault",void 0)}}function m0t(t){return{operations:{supportsAppend:we(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:we(t,"supportsExportClip",!1),supportsExportFrameset:we(t,"supportsExportFrameset",!1),supportsMensuration:we(t,"supportsMensuration",!1),supportsPreviews:we(t,"supportsPreviews",!1),supportsUpdate:we(t,"supportsUpdate",!1)}}}let vd=class extends Le(Y){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const i={};for(const r of Object.keys(e))i[r]=$3(e[r]);return i}writeDomains(e,i){if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=e[s]?.toJSON());i.domains=r}};u([p({type:Number,json:{write:!0}})],vd.prototype,"code",void 0),u([p({type:Object,json:{write:!0}})],vd.prototype,"defaultValues",void 0),u([p({json:{write:!0}})],vd.prototype,"domains",void 0),u([Q("domains")],vd.prototype,"readDomains",null),u([oe("domains")],vd.prototype,"writeDomains",null),u([p({type:String,json:{write:!0}})],vd.prototype,"name",void 0),vd=u([M("esri.layers.support.Subtype")],vd);const D8e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ue.ofType(Lc)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=fe.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(r,s){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:o,editing:a}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||o.supportsEditing&&!(a.supportsUpdateByOthers&&a.supportsUpdateByAnonymous&&a.supportsDeleteByOthers&&a.supportsDeleteByAnonymous))return"load"}if(OC(this.serviceDefinitionExpression)||OC(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(d8e(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s?.creatorField||s?.editorField)&&r?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(r,s){return U8(s,this.url)}readEditingInfo(r,s){const{editingInfo:n}=s;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const s=U(r),{operations:n,editing:o}=s;return IE(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=o.supportsGeometryUpdate=!0),s)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,s){return Ode(s)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||IE(this))return!1;const{operations:s,editing:n}=r;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:s,editing:n}=r;return IE(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,s){return s.type==="Table"}readMaxScale(r,s){return s.effectiveMaxScale||r||0}readMinScale(r,s){return s.effectiveMinScale||r||0}readObjectIdFieldFromService(r,s){return Rde(s)}get parsedUrl(){return y8e(this)}readServiceDefinitionExpression(r,s){return s.definitionQuery||s.definitionExpression}readUniqueIdFields(r,s){return s.uniqueIdInfo?.OIDFieldContainsHashValue?s.uniqueIdInfo.fields:null}readVersion(r,s){return i8e(s)}get isUrlHostModified(){const{loaded:r,url:s,_isUrlHostModified:n}=this;if(n)return!0;if(!r||!s||this.originIdOf("url")<7)return!1;const o=this.sourceJSON?.preferredHost;if(!o||!_s(s,`https://${o}`,!0))return!1;for(let a=6;a>=3;a--){const l=this.getAtOrigin("url",lg(a));if(l)return!_s(s,l,!0)}return!1}applyPreferredHost(r){const{url:s,portalItem:n}=this;!s||kF(n)}applyHostFromPortalItem(){const{url:r,portalItem:s}=this;if(!r||this.originIdOf("url")===7||!s?.url||!kF(s)||!w8(s,_8.HOSTED_SERVICE)||_s(r,s.url,!0)||!this._isUrlHostModificationEnabled)return;const n=pSe(s.url);this._set("url",Iie(r,n)),this._isUrlHostModified=!0}};return u([p({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),u([p({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),u([p({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),u([Q("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),u([p(Fw("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),u([p({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),u([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),u([p({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),u([p({readOnly:!0,type:gd})],i.prototype,"editFieldsInfo",void 0),u([p({readOnly:!0})],i.prototype,"editingInfo",void 0),u([Q("editingInfo")],i.prototype,"readEditingInfo",null),u([p({readOnly:!0})],i.prototype,"effectiveCapabilities",null),u([p()],i.prototype,"effectiveEditingEnabled",null),u([p((()=>{const r=U(AUe),s=r.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},r})())],i.prototype,"elevationInfo",void 0),u([p()],i.prototype,"fieldsIndex",void 0),u([p({type:Km,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:pi}}})],i.prototype,"floorInfo",void 0),u([p({type:Pe,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),u([p()],i.prototype,"gdbVersion",void 0),u([p({readOnly:!0,type:Ib,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),u([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:N4.read}}}})],i.prototype,"geometryType",void 0),u([p({type:String})],i.prototype,"globalIdField",void 0),u([Q("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),u([p({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),u([p({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),u([p({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),u([p({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),u([p({readOnly:!0,type:Pn})],i.prototype,"heightModelInfo",void 0),u([p({type:Date})],i.prototype,"historicMoment",void 0),u([p({type:ue.ofType(Lc),readOnly:!0})],i.prototype,"indexes",void 0),u([p({readOnly:!0})],i.prototype,"isTable",void 0),u([Q("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),u([p({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),u([p(RUe)],i.prototype,"maxScale",void 0),u([Q("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),u([p(OUe)],i.prototype,"minScale",void 0),u([Q("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),u([p({type:String})],i.prototype,"objectIdField",void 0),u([Q("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),u([p({readOnly:!0})],i.prototype,"parsedUrl",null),u([p(Fw("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),u([p({type:[lo],readOnly:!0})],i.prototype,"relationships",void 0),u([p({type:Boolean})],i.prototype,"returnM",void 0),u([p({type:Boolean})],i.prototype,"returnZ",void 0),u([p({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),u([p({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),u([Q("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),u([p({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),u([p()],i.prototype,"sourceJSON",void 0),u([p({type:fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),u([p({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),u([p({type:[vd],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),u([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),u([p({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),u([Q("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),u([p(m8e({nonStandardUrlAllowed:!0}))],i.prototype,"url",void 0),u([p({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),u([Q("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),u([p({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=u([M("esri.layers.mixins.FeatureLayerBase")],i),i};let F8e=class extends wg{constructor(e){super(),this.type="aggregate",this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[E2](){const e=this.featureReductionProvider.featureReduction;return e&&"popupTemplate"in e?e:null}},Np=class extends Le(Y){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};u([p({type:String,json:{write:!0}})],Np.prototype,"expression",void 0),u([p({type:String,json:{write:!0}})],Np.prototype,"title",void 0),u([p({type:String,json:{write:!0}})],Np.prototype,"returnType",void 0),Np=u([M("esri.layers.support.ExpressionInfo")],Np);var F4,hw;let ln=(hw=class extends Y{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new F4({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:U(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}},F4=hw,hw);u([p({type:Boolean,json:{write:!0}})],ln.prototype,"isAutoGenerated",void 0),u([p({type:String,json:{write:!0}})],ln.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],ln.prototype,"alias",void 0),u([p({type:String,json:{write:!0}})],ln.prototype,"onStatisticField",void 0),u([p({type:Np,json:{write:!0}})],ln.prototype,"onStatisticExpression",void 0),u([p({type:String,json:{write:!0}})],ln.prototype,"statisticType",void 0),ln=F4=u([M("esri.layers.support.AggregateField")],ln);let uf=class extends Y{constructor(){super(...arguments),this.type=null}};u([p({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],uf.prototype,"type",void 0),uf=u([M("esri.layers.support.FeatureReduction")],uf);const B8="__begin__",q8="__end__",z8e=new RegExp(B8,"ig"),j8e=new RegExp(q8,"ig"),iZ=new RegExp("^"+B8,"i"),rZ=new RegExp(q8+"$","i"),RC='"',V8e=RC+" + ",U8e=" + "+RC;function B8e(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function q8e(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function G8(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=B8e(t.labelExpression),e.type="conventional"),e}function G8e(t){const e=G8(t);if(!e)return null;switch(e.type){case"conventional":return z4(e.expression);case"arcade":return e.expression}return null}function H8e(t){const e=G8(t);if(!e)return null;switch(e.type){case"conventional":return J8e(e.expression);case"arcade":return Gde(e.expression)}return null}function z4(t){let e;return t?(e=Mh(t,i=>B8+'$feature["'+i+'"]'+q8),e=iZ.test(e)?e.replace(iZ,""):RC+e,e=rZ.test(e)?e.replace(rZ,""):e+RC,e=e.replaceAll(z8e,V8e).replaceAll(j8e,U8e)):e='""',e}const W8e=/^\s*\{([^}]+)\}\s*$/i;function J8e(t){return t?.match(W8e)?.[1].trim()||null}const Z8e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,Y8e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,K8e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Gde(t){if(!t)return null;let e=Z8e.exec(t)||Y8e.exec(t);return e?e[1]||e[3]:(e=K8e.exec(t),e?e[2]:null)}var j4,pw;let Od=(pw=class extends Y{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,i){return i.value?z4(i.value):e}writeExpression(e,i,r){this.value!=null&&(e=z4(this.value)),e!=null&&(i[r]=e)}clone(){return new j4({expression:this.expression,title:this.title,value:this.value})}},j4=pw,pw);u([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Od.prototype,"expression",void 0),u([Q("expression",["expression","value"])],Od.prototype,"readExpression",null),u([oe("expression")],Od.prototype,"writeExpression",null),u([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Od.prototype,"title",void 0),u([p({json:{read:!1,write:!1}})],Od.prototype,"value",void 0),Od=j4=u([M("esri.layers.support.LabelExpressionInfo")],Od);var V4;const ok=new We({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function ak(t,e,i){return{enabled:!IF(i?.layer)}}function Hde(t){return!t||t.origin!=="service"&&t.layer?.type!=="map-image"}function X8e(t){return t?.type==="map-image"}function Wde(t){return!!X8e(t)&&!!t.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function Q8e(t){return Hde(t)||Wde(t?.layer)}var fw;let gi=(fw=class extends Y{static evaluateWhere(e,i){const r=(s,n,o)=>{switch(n){case"=":return s==o;case"<>":return s!=o;case">":return s>o;case">=":return s>=o;case"<":return s<o;case"<=":return s<=o}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return r(i[s[0]],s[1],s[2]);if(s.length===7){const n=r(i[s[0]],s[1],s[2]),o=s[3],a=r(i[s[4]],s[5],s[6]);switch(o){case"AND":return n&&a;case"OR":return n||a}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=x6e,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,i){const r=i.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,i,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=q8e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=Gde(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(i[r]=e)}writeLabelExpressionInfo(e,i,r,s){if(e==null&&this.labelExpression!=null&&Hde(s))e=new Od({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(s);n.expression&&(i[r]=n)}writeMaxScale(e,i){(e||this.minScale)&&(i.maxScale=e)}writeMinScale(e,i){(e||this.maxScale)&&(i.minScale=e)}getLabelExpression(){return G8(this)}getLabelExpressionArcade(){return G8e(this)}getLabelExpressionSingleField(){return H8e(this)}hash(){return JSON.stringify(this)}clone(){return new V4({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:U(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:U(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}},V4=fw,fw);u([p({type:String,json:{write:!0}})],gi.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:ak}}}}})],gi.prototype,"allowOverrun",void 0),u([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:ak}}}}})],gi.prototype,"deconflictionStrategy",void 0),u([p({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&i?.origin==="service"&&Wde(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],gi.prototype,"labelExpression",void 0),u([Q("labelExpression")],gi.prototype,"readLabelExpression",null),u([oe("labelExpression")],gi.prototype,"writeLabelExpression",null),u([p({type:Od,json:{write:{overridePolicy:(t,e,i)=>Q8e(i)?{allowNull:!0}:{enabled:!1}}}})],gi.prototype,"labelExpressionInfo",void 0),u([oe("labelExpressionInfo")],gi.prototype,"writeLabelExpressionInfo",null),u([p({type:ok.apiValues,json:{type:ok.jsonValues,read:ok.read,write:ok.write}})],gi.prototype,"labelPlacement",void 0),u([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],gi.prototype,"labelPosition",void 0),u([p({type:Number})],gi.prototype,"maxScale",void 0),u([oe("maxScale")],gi.prototype,"writeMaxScale",null),u([p({type:Number})],gi.prototype,"minScale",void 0),u([oe("minScale")],gi.prototype,"writeMinScale",null),u([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:ak}}}}})],gi.prototype,"repeatLabel",void 0),u([p({type:Number,cast:Tt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:ak}}}}})],gi.prototype,"repeatLabelDistance",void 0),u([p({types:nRe,json:{origins:{"web-scene":{types:oRe,write:UJ,default:null}},write:UJ,default:null}})],gi.prototype,"symbol",void 0),u([p({type:Boolean,json:{write:!0}})],gi.prototype,"useCodedValues",void 0),u([p({type:String,json:{write:!0}})],gi.prototype,"where",void 0),gi=V4=u([M("esri.layers.support.LabelClass")],gi);var U4;let Rl=U4=class extends Y{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new U4({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};u([p({type:String,json:{write:!0}})],Rl.prototype,"description",void 0),u([p({type:String,json:{write:!0}})],Rl.prototype,"label",void 0),u([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Rl.prototype,"minValue",void 0),u([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Rl.prototype,"maxValue",void 0),u([p(L8)],Rl.prototype,"symbol",void 0),Rl=U4=u([M("esri.renderers.support.ClassBreakInfo")],Rl);var B4;const Jde="log",kE="percent-of-total",TE="field",lk=new We({esriNormalizeByLog:Jde,esriNormalizeByPercentOfTotal:kE,esriNormalizeByField:TE}),e9e=Mi(Rl);let Ar=B4=class extends z_(aa){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let r=e.minValue;return t.map(s=>{const n=new Rl;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(t,e,i,r){const s=t.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),e[i]=s}castField(t){return t==null?t:typeof t=="function"?(X.getLogger(this).error(".field: field must be a string value"),null):y2(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&TE||i&&kE||null,e&&i&&X.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):t!==TE&&t!==kE||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let r=null;r=typeof t=="number"?new Rl({minValue:t,maxValue:e,symbol:yle(i)}):e9e(U(t)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===t&&s[1]===e){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(t,e){return this.valueExpression&&e?.arcade==null&&X.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&e?.arcade==null&&(i={...i,arcade:await wh()});const r=this.getBreakIndex(t,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(t,e){if(this.valueExpression&&e?.arcade==null)return void X.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&e?.arcade==null){const s=await wh(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(t,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new B4({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:U(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:U(this.visualVariables),legendOptions:U(this.legendOptions),authoringInfo:U(this.authoringInfo)})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.symbols.map(r=>r.collectRequiredFields(t,e)),Hs(t,e,null,this.valueExpression)];vn(t,e,this.field),vn(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=e??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=n.arcadeUtils;if(!l){const h=c.createSyntaxTree(a);l=c.createFunction(h),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const d=c.executeFunction(l,c.createExecContext(t,c.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._getBreakIndexfromInfos(d)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,r=this.normalizationType;let s=parseFloat(i[e]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===Jde)s=Math.log(s)*Math.LOG10E;else if(r!==kE||n==null||isNaN(n)){if(r===TE&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=t&&(e?t<=r[1]:t<r[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};u([p(O8)],Ar.prototype,"backgroundFillSymbol",void 0),u([p({type:[Rl],json:{write:{isRequired:!0}}})],Ar.prototype,"classBreakInfos",void 0),u([Q("classBreakInfos")],Ar.prototype,"readClassBreakInfos",null),u([oe("classBreakInfos")],Ar.prototype,"writeClassBreakInfos",null),u([p({type:String,json:{write:!0}})],Ar.prototype,"defaultLabel",void 0),u([p(B3)],Ar.prototype,"defaultSymbol",void 0),u([p({type:String,json:{write:!0}})],Ar.prototype,"field",void 0),u([Mt("field")],Ar.prototype,"castField",null),u([p({type:Boolean})],Ar.prototype,"isMaxInclusive",void 0),u([p({type:R8,json:{write:!0}})],Ar.prototype,"legendOptions",void 0),u([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ar.prototype,"minValue",null),u([p({type:String,json:{write:!0}})],Ar.prototype,"normalizationField",void 0),u([p({type:Number,json:{write:!0}})],Ar.prototype,"normalizationTotal",void 0),u([p({type:lk.apiValues,value:null,json:{type:lk.jsonValues,read:lk.read,write:lk.write}})],Ar.prototype,"normalizationType",null),u([Ee({classBreaks:"class-breaks"})],Ar.prototype,"type",void 0),u([p({type:String,json:{write:!0}})],Ar.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],Ar.prototype,"valueExpressionTitle",void 0),Ar=B4=u([M("esri.renderers.ClassBreaksRenderer")],Ar);const q4=-3,t9e=q4-1,i9e=!!H("esri-tests-disable-gpu-memory-measurements");let r9e=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db=null}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,i){return this._db.get(e.id+i)?.size??0}put(e,i,r,s,n){i=e.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,0)),s>this._maxSize)return void this._notifyRemove(i,r,s,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return i9e||console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,0);const a=1+Math.max(n,t9e)-q4;this._db.set(i,new s9e(r,s,a)),this._size+=s,e.size+=s,this._checkSize()}updateSize(e,i){i=e.id+i;const r=this._db.get(i);if(!r)return;this._size-=r.size,e.size-=r.size;let s=r.entry.usedMemory;for(;s>this._maxSize;){const n=this._notifyRemove(i,r.entry,s,1);if(!(n!=null&&n>0))return void this._db.delete(i);s=n}r.size=s,this._size+=s,e.size+=s,this._checkSize()}pop(e,i){i=e.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(e,i){i=e.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(e,i){const r=this._db.get(e.id+i);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forEach(c=>{const{id:d,name:h}=c;if(a.startsWith(d)){const f=i[h]||0;i[h]=f+o.size}})});const s={};this._users.forEach(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(i);n.sort((o,a)=>i[a]-i[o]),n.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(e["Priority "+(o+q4-1)]=Math.round(a/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){const i=e.id;this._db.forEach((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,0))}),e.size=0}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(const[i,r]of this._db)i.startsWith(e.id)&&(yield r.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,r,s){const n=this._users.get(e.split(uR)[0])?.removeFunc,o=n?.(i,s,r);return typeof o=="number"?o:null}_checkSize(){this._sizeLimits.forEach((e,i)=>this._checkSizeLimits(e,i)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,i){i==null||i<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,i)}_checkSizeLimits(e,i){const r=i??this;if(r.size<=e)return;const s=i?.id;let n=!0;for(;n;){n=!1;for(const[o,a]of this._db)if(a.lifetime===0&&(!s||o.startsWith(s))){const l=i??this._users.get(o.split(uR)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return;n||(n=this._db.has(o))}}for(const[o,a]of this._db)if(!s||o.startsWith(s)){const l=i??this._users.get(o.split(uR)[0]);if(this._purgeItem(o,a,l),r.size<=.9*e)return}}_purgeItem(e,i,r){if(this._db.delete(e),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(e,i.entry,i.size,1);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(e,i))}else--i.lives,this._db.set(e,i)}},s9e=class{constructor(e,i,r){this.entry=e,this.size=i,this.lifetime=r,this.lives=r}};const uR=":";let H8=class{constructor(e,i){this.removeFunc=i,this._storage=new r9e,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,i,r=1){this._storage.put(this,e,i,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},sZ=class Zde{static parse(e,i,r){const s=[],n=[],o=e.split(";");for(let a=0;a<o.length;a++){const l=o[a];if(l){if(l.includes("po:")){const c=l.slice(3).split("|");if(c.length===3){const[d,h,f]=c,m=o9e(d,h,f);m&&n.push(m)}continue}if(l.includes("|")){for(const c of l.split("|"))if(i.has(c)){s.push(c);break}}else if(i.has(l))s.push(l);else if(a===0){s.length=0,s.push(a9e(r));break}}}return new Zde(s,n)}constructor(e,i){this.partNames=e,this.overrides=i}};function n9e(t,e){if(t==="DashTemplate")return e.split(" ").map(i=>Number(i));if(t==="Color"){const i=new ne(e).toRgba();return[i[0],i[1],i[2],255*i[3]]}return Number(e)}function o9e(t,e,i){return{primitiveName:t,propertyName:e,value:n9e(e,i),defaultValue:null}}function a9e(t){switch(t){case"esriGeometryPolyline":return"Invalid_L";case"esriGeometryPolygon":return"Invalid_A";default:return"Invalid_P"}}var mw;let Uc=(mw=class{},mw.instance=new Mo("Etc/UTC"),mw);function l9e(t){return t instanceof Lg?t===Uc.instance:t?.toString().toLowerCase()==="unknown"}function S0t(t){return l9e(t)?Uc.instance:t}function c9e(t){return"timeZone"in t}function u9e(t){return"timeZone"in t}function d9e(t){return"dateFieldsTimeZone"in t}const h9e=new Map;let Ww=class EE{static fromJSON(e){return new EE(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new EE(e.fields??[],oZ(e))}static fromLayerJSON(e){return new EE(e.fields??[],oZ(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const n=s?.name,o=nZ(n);if(n&&o){const a=Xm(n);this._fieldsMap.set(n,s),this._fieldsMap.set(a,s),this._normalizedFieldsMap.set(o,s),r.push(`${a}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),v3(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):B6(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),fH(s)||mH(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)fH(e)||mH(e)||e.nullable||SLe(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(Xm(e))??this._normalizedFieldsMap.get(nZ(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(e){const i=this.get(e&&typeof e!="string"?e.name:e);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(X.getLogger("esri.layers.support.FieldsIndex").errorOnce(new R("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Du):Yde.has(i.type)?vh:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===vh?Uc.instance:i===Du?jr.utcInstance:Ch(h9e,i,()=>Mo.create(i)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return xae(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>c$(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Xm(t){return t.trim().toLowerCase()}function nZ(t){return cLe(t)?.toLowerCase()??""}const Yde=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function oZ(t){const e=new Map;if(!t.fields)return e;const i=t.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=t,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=d9e(t)?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?MT(t.dateFieldsTimeReference):null,l=s?c9e(s)?s.timeZone??a:s.dateFieldsTimeReference?MT(s.dateFieldsTimeReference):a??Du:null,c=r?u9e(r)?r.timeZone??a:r.timeReference?MT(r.timeReference):a:null,d=new Map([[Xm(s?.creationDateField??""),l],[Xm(s?.editDateField??""),l],[Xm(n),c],[Xm(o),c]]);for(const{name:h,type:f}of t.fields)if(Yde.has(f))e.set(h,vh);else if(f!=="date"&&f!=="esriFieldTypeDate")e.set(h,null);else if(i)e.set(h,vh);else{const m=d.get(Xm(h??""))??a;e.set(h,m)}return e}const Kde={TypeNotAllowedInFeature:"Feature attributes only support dates, numbers, strings, guids.",LogicError:"Logic error - {reason}",CannotCompareDateAndTime:"Cannot compare date or dateonly with timeonly types",NeverReach:"Encountered unreachable logic",AsyncNotEnabled:"Async Arcade must be enabled for this script",ModuleAccessorMustBeString:"Module accessor must be a string",ModuleExportNotFound:"Module has no export with provided identifier",ModulesNotSupported:"Current profile does not support modules",ArrayAccessMustBeNumber:"Array accessor must be a number",FunctionNotFound:"Function not found",FieldNotFound:"Key not found - {key}",CircularModules:"Circular module dependencies are not allowed",Cancelled:"Execution cancelled",UnsupportedHashType:"Type not supported in hash function",IllegalResult:"Value is not a supported return type",PortalRequired:"Portal is required",InvalidParameter:"Invalid parameter",WrongNumberOfParameters:"Call with wrong number of parameters",Unrecognized:"Unrecognized code structure",UnrecognizedType:"Unrecognized type",WrongSpatialReference:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",BooleanConditionRequired:"Conditions must use booleans",NoFunctionInDictionary:"Dictionaries cannot contain functions.",NoFunctionInArray:"Arrays cannot contain functions.",NoFunctionInTemplateLiteral:"Template Literals do not expect functions by value.",KeyAccessorMustBeString:"Accessor must be a string",KeyMustBeString:"Object keys must be a string",Immutable:"Object is immutable",UnexpectedToken:"Unexpected token",MemberOfNull:"Cannot access property of null object",MaximumCallDepth:"Exceeded maximum function depth",OutOfBounds:"Out of bounds",InvalidIdentifier:"Identifier not recognized",CallNonFunction:"Expression is not a function",InvalidMemberAccessKey:"Cannot access value using a key of this type",AssignModuleFunction:"Cannot assign function to module variable",UnsupportUnaryOperator:"Unsupported unary operator",UnsupportedOperator:"Unsupported operator",LogicalExpressionOnlyBoolean:"Logical expressions must be boolean",LogicExpressionOrAnd:"Logical expression can only be combined with || or &&",CannotChangeTimeZoneTime:"Cannot change the timezone of a Time",CannotChangeTimeZoneDateOnly:"Cannot change the timezone of a DateOnly",FeatureSetDoesNotHaveSubtypes:"FeatureSet does not have subtypes"};let p9e=class extends Error{constructor(...e){super(...e)}},aZ=class Xde extends p9e{constructor(e,i){super(W8(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,Xde),i?.loc&&(this.loc=i.loc)}},f9e=class Qde extends Error{constructor(e,i,r,s){super("Execution error - "+W8(r)+Mh(Kde[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,Qde),r?.loc&&(this.loc=r.loc)}};function W8(t){return t&&t.loc?`Line : ${t.loc.start?.line}, ${t.loc.start?.column}: `:""}let I0t=class ehe extends Error{constructor(e,i,r,s){super("Compilation error - "+W8(r)+Mh(Kde[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,ehe),r?.loc&&(this.loc=r.loc)}},k0t=class the extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,the)}};function T0t(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e?.loc?new aZ(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e?.loc?new aZ(i,{cause:i}):i)}const m9e={UnrecognizedUri:"Unrecognized uri - {uri}",UnsupportedUriProtocol:"Unrecognized uri protocol"};let E0t=class ihe extends Error{constructor(e,i){super(Mh(m9e[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,ihe)}};function ME(t){return t.toLowerCase().replaceAll(/[\s-]+/g,"")}let M0t=class{constructor(e,i){const r=new Map;for(const s of e){const n=ME(s);if(r.has(n))throw new Error(`${s} already added as ${r.get(n)}`);r.set(n,s)}if(i!=null)for(const[s,n]of i){const o=ME(s);if(r.has(o))throw new Error(`${s} already associated with ${r.get(o)}`);r.set(o,n)}this._enumMap=r}lookup(e){return this._enumMap.get(ME(e))}get(e){const i=this.lookup(e);if(i==null)throw new f9e(null,"InvalidParameter",null);return i}};const y9e={TimeZoneNotRecognized:"Timezone identifier has not been recognized."};let g9e=class rhe extends Error{constructor(e,i){super(Mh(y9e[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,rhe)}};function fv(t,e,i){return t<e?t-e:t>i?t-i:0}function mv(t,e,i){return t<e?e:t>i?i:t}let eh=class Cr{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,r=1,s=0,n=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))return null;const c=ke.local(e,i).daysInMonth;let d=ke.fromObject({day:mv(r,1,c),year:e,month:mv(i,1,12),hour:mv(s,0,23),minute:mv(n,0,59),second:mv(o,0,59),millisecond:mv(a,0,999)},{zone:Rc(l)});return d=d.plus({months:fv(i,1,12),days:fv(r,1,c),hours:fv(s,0,23),minutes:fv(n,0,59),seconds:fv(o,0,59),milliseconds:fv(a,0,999)}),new Cr(d)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const r=Rc(i);return e.isUnknownTimeZone||r===Uc.instance?Cr.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Cr(e._date.setZone(r))}static dateJSToArcadeDate(e){return new Cr(ke.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){const r=Rc(i);return new Cr(ke.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new Cr(ke.fromMillis(e,{zone:Uc.instance}))}static unknownDateJSToArcadeDate(e){return new Cr(ke.fromMillis(e.getTime(),{zone:Uc.instance}))}static epochToArcadeDate(e,i="system"){const r=Rc(i);return new Cr(ke.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new Cr(e)}clone(){return new Cr(this._date)}changeTimeZone(e){const i=Rc(e);return Cr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const r=Rc(i);return e.zone===Uc.instance||r===Uc.instance?Cr.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new Cr(e.setZone(r))}static nowToArcadeDate(e){const i=Rc(e);return new Cr(ke.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new Cr(ke.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Cr.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===Uc.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new Cr(this._date.plus(e))}diff(e,i){return this._date.diff(e._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,i){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(e,i){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Cr(this._date.toUTC())}toLocal(){return new Cr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const i=ke.fromISO(e,{setZone:!0});return new Cr(i)}};function Rc(t,e=!0){if(t instanceof Lg)return t;switch(ME(t)){case"system":return"system";case"utc":return"UTC";case"unknown":return Uc.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(t)){const r=jr.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}const i=Mo.create(t);if(!i.isValid){if(e)throw new g9e("TimeZoneNotRecognized");return null}return i}function lZ(t){t=t.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}const cZ="esri.core.sql.dateonly";let v9e=class Vo{constructor(e,i,r){this._year=e,this._month=i,this._day=r,this.declaredRootClass=cZ}static isDateOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===cZ}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return Vo.isDateOnly(e)&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new Vo(this._year,this._month,this._day)}toDateTime(e){return ke.fromObject({day:this.day,month:this.month,year:this.year},{zone:Rc(e)})}toDateTimeLuxon(e){return ke.fromObject({day:this.day,month:this.month,year:this.year},{zone:Rc(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=null,i=!0){if(e===null||e==="")return this.toString();if(i&&(e=lZ(e)),!e)return"";const r=this.toDateTime("unknown");return eh.dateTimeToArcadeDate(r).toFormat(e,{locale:ko(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return eh.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(e,i){return Vo.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}toUTCDateTime(){return ke.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}static fromMilliseconds(e){const i=ke.fromMillis(e,{zone:jr.utcInstance});return i.isValid?Vo.fromParts(i.year,i.month,i.day):null}static fromSeconds(e){const i=ke.fromSeconds(e,{zone:jr.utcInstance});return i.isValid?Vo.fromParts(i.year,i.month,i.day):null}static fromReader(e){if(!e)return null;const i=e.split("-");return i.length!==3?null:new Vo(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10))}static fromParts(e,i,r){const s=new Vo(e,i,r);return s.isValid===!1?null:s}static fromDateJS(e){return Vo.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return Vo.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];if(i)(i=lZ(i))&&r.push(i);else if(i===null||i===""){const s=ke.fromISO(e,{setZone:!0});return s.isValid?Vo.fromParts(s.year,s.month,s.day):null}for(const s of r){const n=ke.fromFormat(e,i??s);if(n.isValid)return new Vo(n.year,n.month,n.day)}return null}static fromNow(e="system"){const i=ke.fromJSDate(new Date).setZone(Rc(e));return new Vo(i.year,i.month,i.day)}};function P0t(t){if(t==null)return null;switch(t.type){case"polygon":case"multipoint":case"polyline":return t.extent;case"point":return new Pe({xmin:t.x,ymin:t.y,xmax:t.x,ymax:t.y,spatialReference:t.spatialReference});case"extent":return t}return null}function A0t(t){if(t==null)return null;const e=t.clone();return t.cache._geVersion!==void 0&&(e.cache._geVersion=t.cache._geVersion),e}function ck(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function uZ(t){if(!t)return"";const e=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let i="";for(const r of t.match(e)||[])switch(r){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":i+=r;break;case"A":case"a":i+="a";break;default:i+=`'${r}'`}return i}const dZ="esri.core.sql.timeonly";let b9e=class Ec{constructor(e,i,r,s){this._hour=e,this._minute=i,this._second=r,this._millisecond=s,this.declaredRootClass=dZ}static isTimeOnly(e){return typeof e=="object"&&e!=null&&"declaredRootClass"in e&&e.declaredRootClass===dZ}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return Ec.isTimeOnly(e)&&e.hour===this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new Ec(this.hour,this.minute,this.second,this.millisecond)}isValid(){return ck(this.hour)&&ck(this.minute)&&ck(this.second)&&ck(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(e=null){return e===null||e===""?this.toString():(e=uZ(e))?ke.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:ko(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(e,i,r,s){const n=new Ec(e,i,r,s);return n.isValid()?n:null}static fromReader(e){if(!e)return null;const i=e.split(":");return i.length!==3?null:new Ec(parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10),0)}static fromMilliseconds(e){if(e>864e5||e<0)return null;const i=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),n=Math.floor(e%1e3);return new Ec(s,r,i,n)}static fromDateJS(e){return new Ec(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new Ec(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,i=null){if(e===""||e===null)return null;const r=[];i?(i=uZ(i))&&r.push(i):i!==null&&i!==""||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const s of r){const n=ke.fromFormat(e,s);if(n.isValid)return new Ec(n.hour,n.minute,n.second,n.millisecond)}return null}plus(e,i){switch(e){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return Ec.fromDateTime(this.toUTCDateTime().plus({[e]:i}))}return null}toUTCDateTime(){return ke.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,i){switch(i.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return i==="M"?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years}}};const w9e=["geometry","scale","timeProperties"];function L0t(t,e){if(e!=null)for(const i of w9e)e.hasArcadeDependency(i)&&t.add(i);return t}function _9e(t,e){return she.create(t,e,null,["$feature","$view"])}function x9e(t,e,i){return she.create(t,e,i,["$feature","$view","$config"])}let she=class nhe{static async create(e,i,r,s){const{arcade:n,Dictionary:o}=await wh();let a;try{a=n.parseScript(e)}catch(m){throw new R("arcade-bad-expression","Failed to parse arcade script",{script:e,error:m})}const l=n.scriptUsesGeometryEngine(a);l&&await n.enableGeometrySupport(),await n.loadDependentModules(new Set,a,null,!1,l);const c={vars:s.reduce((m,y)=>({...m,[y]:null}),{}),spatialReference:i,useAsync:!1},d=n.compileScript(a,c);let h=null;r!=null&&(h=new o(r),h.immutable=!0);const f=new o;return f.immutable=!1,f.setField("scale",0),new nhe(e,n,a,d,i,f,h,o)}constructor(e,i,r,s,n,o,a,l){this.script=e,this._arcade=i,this._syntaxTree=r,this._compiled=s,this._spatialReference=n,this._viewDict=o,this._configDict=a,this._dictionaryCtor=l,this._dependencies=new Map,this._featureReader=new ohe,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}evaluate(e,i){const r=i.$view?.timeZone;if(i.$view){let s;if(this._viewDict.setField("scale",i.$view.scale),i.$view.timeProperties!=null){const{currentStart:n,currentEnd:o}=i.$view.timeProperties;s=new this._dictionaryCtor({currentStart:n!=null?r!=null?eh.epochToArcadeDate(n,r):eh.unknownEpochToArcadeDate(n):void 0,currentEnd:o!=null?r!=null?eh.epochToArcadeDate(o,r):eh.unknownEpochToArcadeDate(o):void 0,startIncluded:!0,endIncluded:!0})}this._viewDict.setField("timeProperties",s)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:r})}repurposeFeature(e,i){return this._featureReader.bind(e,i,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},ohe=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}bind(e,i,r){const s=i??new Ww(ahe(e.attributes));this._boundTarget=e,this._boundSchema.fields=s.fields,this._boundSchema.fieldsIndex=s,this._boundSchema.spatialReference=r}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if("fromJSON"in this._boundTarget)return this._boundTarget.geometry;const e=Nu(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw new Error("InternalError: Expected spatial reference to be defined");e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===vh}field(e,i=!0){const r=this._getField(e);if(r){const s=this._boundTarget.attributes[r.name];if(s==null)return null;switch(r.type){case"date-only":case"esriFieldTypeDateOnly":return v9e.fromReader(s);case"time-only":case"esriFieldTypeTimeOnly":return b9e.fromReader(s);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return eh.fromReaderAsTimeStampOffset(s);case"date":case"esriFieldTypeDate":return this.isUnknownDateTimeField(e)?eh.unknownEpochToArcadeDate(s):eh.epochToArcadeDate(s,this.contextTimeZone??ga);default:return s}}if(i)throw new Error(`Field ${e} does not exist`);return null}setField(e,i){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:e?.keepGeometryType===!0?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,i=null){return Promise.resolve(this.castAsJson(i))}};function ahe(t){const e=[];for(const i in t)e.push({name:i,alias:i,type:typeof t[i]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"});return e}let S9e=class lhe{static async from(e,i,r){const s=e.dictionary_version?b8.parse(e.dictionary_version):null,n=new Set(e.itemsNames),o={};if(i)for(const h in i)o[h]=i[h];if(e.authoringInfo.configuration)for(const h of e.authoringInfo.configuration)o.hasOwnProperty(h.name)||(o[h.name]=h.value);const a=new Set(e.authoringInfo.symbol);for(const h of Object.keys(r))a.delete(h);a.size&&X.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("missing-fields: fieldMap entries for the following symbol fields are missing",{symbolFields:a});const l=await x9e(e.expression,null,o);if(!l)throw new R("dictionary-renderer:expression-error","Unable to create dictionary renderer expression");const c=!s||!s.greaterEqual(4,0);c&&X.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("Dictionary script does not support native field types. Applying fallback",{version:s});const d=new $9e(r,c);return new lhe(c,n,l,d)}constructor(e,i,r,s){this._requiresFieldCoercionToString=e,this._itemNames=i,this._compiled=r,this._reader=s}get itemNames(){return this._itemNames}evaluate(e,i,r,s){try{return this._reader.bind(e,r,s),this._compiled.evaluate(this._reader,{$view:{scale:i}})}catch(n){X.getLogger("esri.renderers.support.DictionaryScriptEvaluator").warnOnce("arcade: dictionary script evaluation failed",{error:n})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new Ww(e);const i=e.map(r=>({...r,type:"esriFieldTypeString"}));return new Ww(i)}},$9e=class extends ohe{constructor(e,i){super(),this._fieldMap=e,this._requiresFieldCoercionToString=i}_getField(e){const i=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(i)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);const i=this._getField(e);return i==null||this._boundTarget.attributes[i.name]==null?"":""+this._boundTarget.attributes[i.name]}};const hZ={Relative:0,Absolute:1},I9e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Er={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:hZ.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:hZ.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0,easing:"Linear"},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function k9e(t){return typeof t=="function"}function N0t(t,e,i,r){return k9e(t)?t(e,i,r):t}function D0t(t){return[t.r,t.g,t.b,t.a]}const T9e=` /-,
`;function pZ(t){let e=t.length;for(;e--;)if(!T9e.includes(t.charAt(e)))return!1;return!0}function E9e(t,e){const i=[];let r=0,s=-1;do if(s=t.indexOf("[",r),s>=r){if(s>r){const n=t.slice(r,s);i.push([n,null,pZ(n)])}if(r=s+1,s=t.indexOf("]",r),s>=r){if(s>r){const n=e[t.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<t.length){const n=t.slice(r);i.push([n,null,pZ(n)])}return i}function F0t(t,e,i){let r="",s=null;for(const n of e){const[o,a,l]=n;if(o!=null&&o!=="")l?s=o:(s!=null&&(r+=s,s=null),r+=o);else{const c=t.readAttribute(a);c!=null&&c!==""&&(s!==null&&(r+=s,s=null),r+=c)}}return che(r,i)}function M9e(t,e,i,r){let s="",n=null;for(const o of e){const[a,l,c]=o;if(a!=null&&a!=="")c?n=a:(n!=null&&(s+=n,n=null),s+=a);else{let d=l;i!=null&&(d=U9e(l,i));const h=t.attributes[d];h!=null&&h!==""&&(n!=null&&(s+=n,n=null),s+=h)}}return che(s,r)}function che(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function z0t(t,e,i,r,s,n,o=!0){const a=e/s,l=i/n,c=Math.ceil(a/2),d=Math.ceil(l/2);for(let h=0;h<n;h++)for(let f=0;f<s;f++){const m=4*(f+(o?n-h-1:h)*s);let y=0,v=0,b=0,w=0,x=0,S=0,$=0;const T=(h+.5)*l;for(let C=Math.floor(h*l);C<(h+1)*l;C++){const L=Math.abs(T-(C+.5))/d,N=(f+.5)*a,D=L*L;for(let F=Math.floor(f*a);F<(f+1)*a;F++){let W=Math.abs(N-(F+.5))/c;const Z=Math.sqrt(D+W*W);Z>=-1&&Z<=1&&(y=2*Z*Z*Z-3*Z*Z+1,y>0&&(W=4*(F+C*e),$+=y*t[W+3],b+=y,t[W+3]<255&&(y=y*t[W+3]/250),w+=y*t[W],x+=y*t[W+1],S+=y*t[W+2],v+=y))}}r[m]=w/v,r[m+1]=x/v,r[m+2]=S/v,r[m+3]=$/b}}function uhe(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function J8(t){return t.data?.symbol??null}function Z8(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function dhe(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function C9e(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function G3(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const Je=(t,e=0)=>t==null||isNaN(t)?e:t,j0t=(t,e)=>t??e,V0t=(t,e)=>t??e,U0t=t=>t.tintColor?uhe(t.tintColor):[255,255,255,1];let P9e=class{constructor(e){this._import=e}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(e=>this.module=e)),this._promise}};function zg(t){return new P9e(t)}function A9e(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function L9e(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function hhe(t){let e="normal",i="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}function phe(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function AS(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=AS(e);if(i!=null)return i}break;case"CIMTextSymbol":return AS(t.symbol);case"CIMSolidFill":return t.color}return null}function NC(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const r=NC(i);if(r!=null)return r}break}case"CIMTextSymbol":return NC(t.symbol);case"CIMSolidStroke":return t.color}}function q0t(t){for(const e of t)if(e.enable)switch(e.type){case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return!0}return!1}function DC(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=DC(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return DC(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function O9e(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function R9e(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function N9e(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const yv=t=>t.includes("data:image/svg+xml");function FC(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function B2(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function G0t(t,e,i,r,s,n,o=!0){const{infos:a}=n;let l=1,c=0,d=0,h=0,f=1;for(const{absoluteAnchorPoint:v,offsetX:b,offsetY:w,rotation:x,size:S,frameHeight:$,rotateClockWise:T,scaleSymbolsProportionally:C}of a)f=v?1:l,d=yZ(b,w,c,f,d),h=mZ(b,w,c,f,h),$&&(C||o)&&(l*=S/$),c=gZ(x,T,c);const m=yZ(r,s,c,f,d),y=mZ(r,s,c,f,h);return{size:t*l,rotation:gZ(e,i,c),offsetX:m,offsetY:y}}function D9e(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>D9e(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function F9e(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...I9e[e]];const i=Er[t];if(!i)throw new Error(`InternalError: default value for type ${t}.`);return i[e]}function z9e(t){return t.split(" ").map(e=>Number(e))}function j9e(t){return typeof t=="string"?z9e(t):t}function fhe(t){return t?.dashTemplate&&(t.dashTemplate=j9e(t.dashTemplate)),t}function G4(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const i of e)if(i.type==="CIMVectorMarker")return G4(i)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const i of e)if(i.symbol)return G4(i.symbol)}}return"Normal"}function V9e(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??Er.CIMVectorMarker.size;r>e&&(e=r);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(const i of t.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>e&&(e=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&G3(i.markerPlacement)){const r=i.size??Er.CIMVectorMarker.size;r>e&&(e=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>e&&(e=r)}}}return e}}}function U9e(t,e){if(e!==null){const i=e.get(t);return i?i.name:t}return t}function B9e(t){return t.map(e=>({...e,propertyName:B2(e.propertyName)}))}function fZ(t){const e={};for(const i in t){const r=t[i];e[B2(i)]=r}return e}function mZ(t,e,i,r,s){const n=i*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*t+o*e)*r+s}return e*r+s}function yZ(t,e,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*r+s:t*r+s}function gZ(t,e,i){return e?i-t:i+t}function H0t(t,e,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=e[B2(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=F9e(e.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),e.primitiveName!=null){const o=t[e.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(n=a,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:a,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function W0t(t,e,i){if(e[B2(i)]!=null)return!0;if(e.primitiveName!=null){const r=t[e.primitiveName];if(r!=null&&r[i]!=null)return!0}return!1}function $1(t,e){return Math.max(Math.min((t??e)/100,1),0)}const q9e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let mhe=class{constructor(e,i,r,s){this.url=e,this.fieldMap=r,this.dictionaryInfo=s,this._symbolPartCache=new H8(100);const n=async()=>S9e.from(await s,i,r);this._evaluator=n()}async getSymbolAsync(e,i,r=!0){const s=await this._evaluator,n=i?.fields??ahe(e.attributes),o=s.createDictionaryFieldsIndex(n),a=s.evaluate(e,i?.scale??0,o,i?.spatialReference);if(a==null)return null;const l=Cg(e.geometry),c=sZ.parse(a,s.itemNames,l),d=l==="esriGeometryPoint"&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,d,i,r,o)}async getSymbolForControlString(e,i,r){const s=await this._evaluator,n=sZ.parse(e,s.itemNames,i),o=i==="esriGeometryPoint"&&!r,a=vZ(await Promise.all(n.partNames.map(l=>this._getSymbolPart(l))),n.overrides,o);return new cn({data:a})}async _cimPartsToCIMSymbol(e,i,r,s,n,o,a){const l=i.map(h=>this._getSymbolPart(h,n));let c=await Promise.all(l);if(o&&this.fieldMap&&c.length>0){const{OverrideHelper:h}=await K(()=>Promise.resolve().then(()=>$Xe),void 0);c=U(c);for(const f of c)h.applyDictionaryTextOverrides(f,e,this.fieldMap,a,G4(f))}const d=vZ(c,r,s);return new cn({data:d})}async _fetchSymbolPart(e,i){const r=await this.dictionaryInfo,s=(this.url+"/"+r.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:n}=await xe(s,{responseType:"json",query:{f:"json"},...i});return n}async _getSymbolPart(e,i){let r=this._symbolPartCache.get(e);return r||(r=this._fetchSymbolPart(e,i),this._symbolPartCache.put(e,r)),r}};function vZ(t,e,i){if(!t||t.length===0)return null;const r={...t[0]};if(t.length>1){r.effects=null,r.symbolLayers=[];for(const s of t){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=q9e),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:e}}var H4;let Sl=H4=class extends z_(aa){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){const t=this.getDictionaryInfo();return new mhe(this.url,this.config,this.fieldMap??{},t)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,r){r?.origin||super.writeVisualVariables(t,e,i,r)}clone(){return new H4({config:U(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:U(this.fieldMap),url:U(this.url),visualVariables:U(this.visualVariables)})}async getSymbolAsync(t,e,i=!0){return this._loader.getSymbolAsync(t,e,i)}async getSymbolForControlString(t,e,i){return this._loader.getSymbolForControlString(t,e,i)}getDictionaryInfo(){return this._dictionaryInfoPromise||(this._dictionaryInfoPromise=this._fetchDictionaryInfo()),this._dictionaryInfoPromise}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Hs(t,e,null,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];e.has(r)&&t.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){const{data:t}=await xe(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"}});return t}};u([p({type:mhe})],Sl.prototype,"_loader",null),u([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Sl.prototype,"config",void 0),u([p({type:Object,json:{write:!0}})],Sl.prototype,"fieldMap",void 0),u([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Sl.prototype,"scaleExpression",void 0),u([oe("scaleExpression")],Sl.prototype,"writeData",null),u([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Sl.prototype,"scaleExpressionTitle",void 0),u([p({type:String,json:{write:!0}})],Sl.prototype,"url",void 0),u([oe("visualVariables")],Sl.prototype,"writeVisualVariables",null),Sl=H4=u([M("esri.renderers.DictionaryRenderer")],Sl);var W4;let bd=W4=class extends Y{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(X.getLogger(this).error(".field: field must be a string value"),null):y2(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new W4({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([p({type:ne,json:{type:[Number],write:!0}})],bd.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],bd.prototype,"field",void 0),u([Mt("field")],bd.prototype,"castField",null),u([p({type:String,json:{write:!0}})],bd.prototype,"label",void 0),u([p({type:String,json:{write:!0}})],bd.prototype,"valueExpression",void 0),u([p({type:String,json:{write:!0}})],bd.prototype,"valueExpressionTitle",void 0),bd=W4=u([M("esri.renderers.support.AttributeColorInfo")],bd);const yhe=bd;var J4;let CE=J4=class extends Y{constructor(){super(...arguments),this.unit=null}clone(){return new J4({unit:this.unit})}};u([p({type:String,json:{write:!0}})],CE.prototype,"unit",void 0),CE=J4=u([M("esri.renderers.support.DotDensityLegendOptions")],CE);const G9e=CE;var Z4;let ro=Z4=class extends z_(aa){constructor(t){super(t),this.attributes=null,this.backgroundColor=new ne([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new sr,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}set visualVariables(t){super.visualVariables=t}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Vn({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((t,e)=>t+e.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Z4({attributes:U(this.attributes),backgroundColor:U(this.backgroundColor),dotBlendingEnabled:U(this.dotBlendingEnabled),dotShape:U(this.dotShape),dotSize:U(this.dotSize),dotValue:U(this.dotValue),legendOptions:U(this.legendOptions),outline:U(this.outline),referenceScale:U(this.referenceScale),seed:U(this.seed),visualVariables:U(this.visualVariables),authoringInfo:U(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Hs(t,e,null,i.valueExpression),i.field&&t.add(i.field)}};u([p({type:[yhe],json:{write:!0}})],ro.prototype,"attributes",void 0),u([p({type:ne,json:{write:!0}})],ro.prototype,"backgroundColor",void 0),u([p({type:Boolean,json:{write:!0}})],ro.prototype,"dotBlendingEnabled",void 0),u([p({type:String,json:{write:!1}})],ro.prototype,"dotShape",void 0),u([p({type:Number,json:{write:!0}})],ro.prototype,"dotSize",void 0),u([p({type:G9e,json:{write:!0}})],ro.prototype,"legendOptions",void 0),u([p({type:sr,json:{default:null,write:!0}})],ro.prototype,"outline",void 0),u([p({type:Number,json:{write:!0}})],ro.prototype,"dotValue",void 0),u([p({type:Number,json:{write:!0}})],ro.prototype,"referenceScale",void 0),u([p({type:Number,json:{write:!0}})],ro.prototype,"seed",void 0),u([Ee({dotDensity:"dot-density"})],ro.prototype,"type",void 0),ro=Z4=u([M("esri.renderers.DotDensityRenderer")],ro);var Y4;let th=Y4=class extends Y{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new Y4({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([p({type:ne,json:{type:[Ke],default:null,write:{isRequired:!0}}})],th.prototype,"color",void 0),u([p({type:Number,json:{write:{isRequired:!0}}})],th.prototype,"ratio",void 0),th=Y4=u([M("esri.renderers.support.HeatmapColorStop")],th);let Tb=class extends Le(Y){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([p({type:String,json:{write:!0}})],Tb.prototype,"minLabel",void 0),u([p({type:String,json:{write:!0}})],Tb.prototype,"maxLabel",void 0),u([p({type:String,json:{write:!0}})],Tb.prototype,"title",void 0),Tb=u([M("esri.renderers.support.HeatmapLegendOptions")],Tb);function H9e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function W9e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function J9e(t,e,i,r,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}function Z9e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function ghe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function vhe(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function bhe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Y9e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function K9e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function X9e(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Q9e(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function e7e(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function t7e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function i7e(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function whe(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function _he(t,e){const i=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2],n=e[3]-t[3];return i*i+r*r+s*s+n*n}function xhe(t){const e=t[0],i=t[1],r=t[2],s=t[3];return Math.sqrt(e*e+i*i+r*r+s*s)}function She(t){const e=t[0],i=t[1],r=t[2],s=t[3];return e*e+i*i+r*r+s*s}function r7e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function s7e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function n7e(t,e){const i=e[0],r=e[1],s=e[2],n=e[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=r*o,t[2]=s*o,t[3]=n*o),t}function o7e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function $he(t,e,i,r){const s=e[0],n=e[1],o=e[2],a=e[3];return t[0]=s+r*(i[0]-s),t[1]=n+r*(i[1]-n),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function a7e(t,e=1){const i=ZA;let r,s,n,o,a,l;do r=2*i()-1,s=2*i()-1,a=r*r+s*s;while(a>=1);do n=2*i()-1,o=2*i()-1,l=n*n+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*s,t[2]=e*n*c,t[3]=e*o*c,t}function l7e(t,e,i){const r=e[0],s=e[1],n=e[2],o=e[3];return t[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,t[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,t[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,t[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,t}function c7e(t,e,i){const r=e[0],s=e[1],n=e[2],o=i[0],a=i[1],l=i[2],c=i[3],d=c*r+a*n-l*s,h=c*s+l*r-o*n,f=c*n+o*s-a*r,m=-o*r-a*s-l*n;return t[0]=d*c+m*-o+h*-l-f*-a,t[1]=h*c+m*-a+f*-o-d*-l,t[2]=f*c+m*-l+d*-a-h*-o,t[3]=e[3],t}function u7e(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function d7e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function h7e(t,e){const i=t[0],r=t[1],s=t[2],n=t[3],o=e[0],a=e[1],l=e[2],c=e[3],d=Wn();return Math.abs(i-o)<=d*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=d*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))}const p7e=ghe,f7e=vhe,m7e=bhe,y7e=whe,g7e=_he,v7e=xhe,b7e=She;Object.freeze(Object.defineProperty({__proto__:null,add:Z9e,ceil:Y9e,copy:H9e,copyVec3:W9e,dist:y7e,distance:whe,div:m7e,divide:bhe,dot:o7e,equals:h7e,exactEquals:d7e,floor:K9e,inverse:s7e,len:v7e,length:xhe,lerp:$he,max:Q9e,min:X9e,mul:f7e,multiply:vhe,negate:r7e,normalize:n7e,random:a7e,round:e7e,scale:t7e,scaleAndAdd:i7e,set:J9e,sqrDist:g7e,sqrLen:b7e,squaredDistance:_he,squaredLength:She,str:u7e,sub:p7e,subtract:ghe,transformMat4:l7e,transformQuat:c7e},Symbol.toStringTag,{value:"Module"}));function H3(){return[0,0,0,0]}function w7e(t){return[t[0],t[1],t[2],t[3]]}function jg(t,e,i,r){return[t,e,i,r]}function _7e(t,e,i,r){return[t,e,i,r]}function x7e(t,e=H3()){const i=Math.min(4,t.length);for(let r=0;r<i;++r)e[r]=t[r];return e}function Ihe(){return H3()}function khe(){return jg(1,1,1,1)}function The(){return jg(1,0,0,0)}function Ehe(){return jg(0,1,0,0)}function Mhe(){return jg(0,0,1,0)}function Che(){return jg(0,0,0,1)}const S7e=Ihe(),$7e=khe(),I7e=The(),k7e=Ehe(),T7e=Mhe(),E7e=Che();Object.freeze(Object.defineProperty({__proto__:null,ONES:$7e,UNIT_W:E7e,UNIT_X:I7e,UNIT_Y:k7e,UNIT_Z:T7e,ZEROS:S7e,clone:w7e,create:H3,freeze:_7e,fromArray:x7e,fromValues:jg,ones:khe,unitW:Che,unitX:The,unitY:Ehe,unitZ:Mhe,zeros:Ihe},Symbol.toStringTag,{value:"Module"}));const Y8=2.4;function M7e(t){return Zt(t*Y8)}function C7e(t){return zt(t)/Y8}function P7e(t,e,i,r){let{color:s,ratio:n}=e,{color:o,ratio:a}=i;a===n&&(a===1?n-=1e-6:a+=1e-6);const l=bn((r-n)/(a-n),0,1);$he(t,s.toArray(),o.toArray(),l)}function Y0t(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let r=t[0],s=t[0],n=1;const o=H3();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>s.ratio&&n<t.length;)r=s,s=t[n++];P7e(o,r,s,l),i.set(o,4*a)}return i}function K0t(t,e,i){const r=Math.sqrt(t**2+e**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function X0t(t){return typeof t=="function"?t:t?e=>+e[t]:()=>1}var K4;function bZ(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:r}=t;if(e!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=t;return a}}return t}let rs=K4=class extends aa{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new th({ratio:0,color:new ne("rgba(255, 140, 0, 0)")}),new th({ratio:.75,color:new ne("rgba(255, 140, 0, 1)")}),new th({ratio:.9,color:new ne("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return bZ(t)}get blurRadius(){return C7e(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",M7e(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(Y8**2*this.blurRadius**4)}read(t,e){t=bZ(t),super.read(t,e)}getSymbol(){return new Ni}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&vn(t,e,i),r&&typeof r=="string"&&await Hs(t,e,null,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new K4({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:U(this.colorStops),field:this.field,legendOptions:U(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([p({type:Ai,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],rs.prototype,"authoringInfo",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],rs.prototype,"blurRadius",null),u([p({type:[th],json:{write:{isRequired:!0}}})],rs.prototype,"colorStops",void 0),u([p({type:String,json:{write:!0}})],rs.prototype,"field",void 0),u([p({type:Tb,json:{write:!0}})],rs.prototype,"legendOptions",void 0),u([p({type:Number,json:{write:!0}})],rs.prototype,"maxDensity",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],rs.prototype,"maxPixelIntensity",null),u([p({type:Number,json:{write:!0}})],rs.prototype,"minDensity",void 0),u([p({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],rs.prototype,"minPixelIntensity",null),u([p({type:Number,cast:Tt,json:{write:!0}})],rs.prototype,"radius",void 0),u([p({type:Number,range:{min:0},json:{default:0,write:!0}})],rs.prototype,"referenceScale",void 0),u([Ee({heatmap:"heatmap"})],rs.prototype,"type",void 0),u([p({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],rs.prototype,"valueExpression",void 0),u([p({type:String})],rs.prototype,"valueExpressionTitle",void 0),u([p({readOnly:!0})],rs.prototype,"_pixelIntensityToDensity",null),rs=K4=u([M("esri.renderers.HeatmapRenderer")],rs);let Qm=class extends Le(Y){constructor(){super(...arguments),this.color=new ne([0,0,0,0]),this.label=null,this.threshold=0}};u([p({type:ne,json:{write:!0}})],Qm.prototype,"color",void 0),u([p({type:String,json:{write:!0}})],Qm.prototype,"label",void 0),u([p({type:Number,range:{min:0,max:1},json:{write:!0}})],Qm.prototype,"threshold",void 0),Qm=u([M("esri.renderers.support.OthersCategory")],Qm);const A7e={base:nn,key:"type",typeMap:{size:Ct,opacity:Gd}};let so=class extends z_(Le(aa)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ne([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Qm,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new Ni({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Ei)}getAttributeHash(){return this.visualVariables?.reduce((e,i)=>e+i.getAttributeHash(),"")??""}getMeshHash(){return this.symbols.reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const r of this.attributes)r.valueExpression&&await Hs(e,i,null,r.valueExpression),r.field&&e.add(r.field)}};u([p({type:[yhe],json:{write:!0}})],so.prototype,"attributes",void 0),u([p(O8)],so.prototype,"backgroundFillSymbol",void 0),u([p({type:ne,json:{write:!0}})],so.prototype,"defaultColor",void 0),u([p({type:String,json:{write:!0}})],so.prototype,"defaultLabel",void 0),u([p({type:Number,range:{min:0,max:1},json:{write:!0}})],so.prototype,"holePercentage",void 0),u([p({type:Qm,json:{write:!0}})],so.prototype,"othersCategory",void 0),u([p({type:R8,json:{write:!0}})],so.prototype,"legendOptions",void 0),u([p({type:sr,json:{default:null,write:!0}})],so.prototype,"outline",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],so.prototype,"size",void 0),u([Ee({pieChart:"pie-chart"})],so.prototype,"type",void 0),u([p({types:[A7e]})],so.prototype,"visualVariables",void 0),so=u([M("esri.renderers.PieChartRenderer")],so);const j_={key:"type",base:aa,typeMap:{heatmap:rs,simple:Un,"unique-value":yi,"class-breaks":Ar,"dot-density":ro,dictionary:Sl,"pie-chart":so},errorContext:"renderer"},Phe={key:"type",base:aa,typeMap:{simple:Un,"unique-value":yi,"class-breaks":Ar,heatmap:rs},errorContext:"renderer",validate:L7e};function L7e(t){switch(t.type){case"simple":return O7e(t);case"unique-value":return R7e(t);case"class-breaks":return N7e(t);case"heatmap":return t}}function O7e(t){if(t.symbol)return t;X.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function R7e(t){const e=t.uniqueValueInfos,i=e?.filter(({symbol:r,label:s},n)=>(r||X.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.uniqueValueInfos=i),t}function N7e(t){const e=t.classBreakInfos,i=e?.filter(({symbol:r,label:s},n)=>(r||X.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==e?.length&&(t.classBreakInfos=i),t}function D7e(t,e){return A$(t,null,e)}const F7e=w_({types:j_});function A$(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i?.messages&&i.messages.push(new pa("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):F7e(t,e,i):null}var X4;let Ds=X4=class extends uf{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Tt("12px"),this.fields=[],this.renderer=null}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Tr(i,r,e)}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?A$(r,e,i)??void 0:F8(e,i)}clone(){return new X4({fields:U(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:U(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:U(this.popupTemplate),renderer:U(this.renderer),binType:U(this.binType),size:this.size})}};u([Ee({binning:"binning"})],Ds.prototype,"type",void 0),u([Ee({geohash:"geohash",square:"square"}),p({type:["geohash","square"]})],Ds.prototype,"binType",void 0),u([p({type:Number,json:{write:!0}})],Ds.prototype,"fixedBinLevel",void 0),u([p({type:[gi],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Ds.prototype,"labelingInfo",void 0),u([p(F3)],Ds.prototype,"labelsVisible",void 0),u([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Ds.prototype,"maxScale",void 0),u([p(j2)],Ds.prototype,"popupEnabled",void 0),u([p({type:Uf,json:{name:"popupInfo",write:!0}})],Ds.prototype,"popupTemplate",void 0),u([p({cast:t=>t==="auto"?t:zn(Tt(t))})],Ds.prototype,"size",void 0),u([p({type:[ln],json:{write:!0}})],Ds.prototype,"fields",void 0),u([oe("fields")],Ds.prototype,"writeFields",null),u([p({types:j_,json:{write:{target:"drawingInfo.renderer"}}})],Ds.prototype,"renderer",void 0),u([Q("renderer",["drawingInfo.renderer"])],Ds.prototype,"readRenderer",null),Ds=X4=u([M("esri.layers.support.FeatureReductionBinning")],Ds);var Q4;function wZ(t){return t.type==="simple"&&!t.visualVariables?.length}let Lr=Q4=class extends Y{constructor(t){super(t),this.type="cluster",this.clusterRadius=Tt("80px"),this.clusterMinSize=Tt("12px"),this.clusterMaxSize=Tt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?wZ(r)?null:A$(r,e,i)??void 0:F8(e,i)}readSymbol(t,e,i){const r=e.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&wZ(r)?A$(r,e,i)?.symbol:null}writeSymbol(t,e,i,r){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new Un({symbol:t});e.drawingInfo={renderer:n.write({},r)}}}writeFields(t,e,i){const r=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Tr(i,r,e)}readFields(t,e,i){return t.filter(r=>!r.isAutoGenerated).map(r=>ln.fromJSON(r))}clone(){return new Q4({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:U(this.labelingInfo),labelsVisible:this.labelsVisible,fields:U(this.fields),maxScale:this.maxScale,renderer:U(this.renderer),symbol:U(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:U(this.popupTemplate)})}};u([p({type:["cluster"],readOnly:!0,json:{write:!0}})],Lr.prototype,"type",void 0),u([p({cast:t=>t==="auto"?t:zn(Tt(t)),json:{write:!0}})],Lr.prototype,"clusterRadius",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],Lr.prototype,"clusterMinSize",void 0),u([p({type:Number,cast:Tt,json:{write:!0}})],Lr.prototype,"clusterMaxSize",void 0),u([p({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Lr.prototype,"maxScale",void 0),u([p(j2)],Lr.prototype,"popupEnabled",void 0),u([p({type:Uf,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Lr.prototype,"popupTemplate",void 0),u([p({types:j_,json:{write:{target:"drawingInfo.renderer"}}})],Lr.prototype,"renderer",void 0),u([Q("renderer",["drawingInfo.renderer"])],Lr.prototype,"readRenderer",null),u([p({types:rRe})],Lr.prototype,"symbol",void 0),u([Q("symbol",["drawingInfo.renderer"])],Lr.prototype,"readSymbol",null),u([oe("symbol")],Lr.prototype,"writeSymbol",null),u([p({type:[gi],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Lr.prototype,"labelingInfo",void 0),u([p(F3)],Lr.prototype,"labelsVisible",void 0),u([p({type:[ln],json:{write:!0}})],Lr.prototype,"fields",void 0),u([oe("fields")],Lr.prototype,"writeFields",null),u([Q("fields")],Lr.prototype,"readFields",null),Lr=Q4=u([M("esri.layers.support.FeatureReductionCluster")],Lr);var ej;let LS=ej=class extends uf{constructor(t){super(t),this.type="selection"}clone(){return new ej}};u([p({type:["selection"]})],LS.prototype,"type",void 0),LS=ej=u([M("esri.layers.support.FeatureReductionSelection")],LS);const _Z={key:"type",base:uf,typeMap:{cluster:Lr,binning:Ds}},z7e={types:{key:"type",base:uf,typeMap:{selection:LS,cluster:Lr,binning:Ds}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:_Z},"portal-item":{types:_Z},"web-scene":{types:{key:"type",base:uf,typeMap:{selection:LS}},name:"layerDefinition.featureReduction",write:{allowNull:!0,layerContainerTypes:pi}}}}},j7e=()=>X.getLogger("esri.views.2d.layers.support.clusterUtils");H.add("esri-cluster-arcade-enabled",!0);const V7e=H("esri-cluster-arcade-enabled"),U7e=new Set(["simple-line","simple-fill","picture-fill"]);function xZ(t,e){let i=e.clone();if(!B7e(i))return i;if(e.symbols.some(r=>U7e.has(r.type))&&(i=new Un({symbol:new Ni})),i.authoringInfo||(i.authoringInfo=new Ai),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");r.forEach(s=>{s.type==="rotation"?s.field?s.field=im(t,s.field,"avg_angle","number"):s.valueExpression&&(s.field=I1(t,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=im(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=im(t,s.field,"avg","number"):s.valueExpression&&(s.field=I1(t,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=im(t,r.field,"sum","number"):r.valueExpression&&(r.field=I1(t,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=im(t,i.field,"mode","string"):i.valueExpression&&(i.field=I1(t,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=im(t,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=im(t,i.field,"avg","number"):i.valueExpression&&(i.field=I1(t,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const B7e=t=>{const e=i=>j7e().error(new R("Unsupported-renderer",i,{renderer:t}));if(!t)return!1;switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!V7e){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function q7e(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const r=i,s="field",n=e.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+z6(n)}}}function I1(t,e,i,r){const s=z6(e),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return t.some(o=>o.name===n)||t.push(new ln({name:n,isAutoGenerated:!0,onStatisticExpression:new Np({expression:e,returnType:r}),statisticType:i})),n}function im(t,e,i,r,s){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const n=q7e(i,e,s);return t.some(o=>o.name===n)||(i==="avg_norm"?t.push(new ln({name:n,isAutoGenerated:!0,onStatisticExpression:new Np({expression:`$feature.${e} / $feature.${s}`,returnType:r}),statisticType:"avg"})):t.push(new ln({name:n,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),n}const G7e=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.aggregateGraphicOrigin=new F8e(this),this.addHandles(de(()=>this.renderer,()=>{if(this.featureReduction){const s=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",s)}},lr))}set featureReduction(r){const s=this._normalizeFeatureReduction(r);this._set("featureReduction",s)}set renderer(r){}_withClusterVariable(r,s,n){const o=r.clone();return"visualVariables"in o&&(o.visualVariables||(o.visualVariables=[]),o.visualVariables.some(a=>a.type==="size")||o.visualVariables.push(new Ct({field:"cluster_count",stops:[new Ol({value:1}),new Ol({useMinValue:!0,size:s}),new Ol({useMaxValue:!0,size:n})]}))),o}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const s=r.clone(),n=[new ln({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=(s.fields??[]).filter(f=>!f.isAutoGenerated),a=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:l,clusterMaxSize:c}=s;if(a){s.fields=[...n,...o];const f=this._withClusterVariable(s.renderer,l,c);return s.effectiveFeatureRenderer=f,s.effectiveClusterRenderer=f,s}if(r.symbol){if(s.fields=[...n,...o],s.renderer=null,!this.renderer)return s.effectiveFeatureRenderer=null,s.effectiveClusterRenderer=null,s;const f=xZ(n,this.renderer),m=this._withClusterVariable(f,l,c),y="visualVariables"in m&&m.visualVariables?m.visualVariables:[],v=new Un({symbol:r.symbol,visualVariables:y});return s.fields=[...n,...o],s.effectiveFeatureRenderer=m,s.effectiveClusterRenderer=v,s}if(!this.renderer)return r;const d=xZ(n,this.renderer);s.fields=[...n,...o],s.renderer=d;const h=this._withClusterVariable(d,l,c);return s.effectiveFeatureRenderer=h,s.effectiveClusterRenderer=h,s}};return u([p({readOnly:!0,clonable:!1})],i.prototype,"aggregateGraphicOrigin",void 0),u([p(z7e)],i.prototype,"featureReduction",null),i=u([M("esri.layers.mixins.FeatureReductionLayer")],i),i},SZ={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},$Z={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},IZ={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},H7e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":SZ,"web-map/basemap-base-layers":$Z,"web-map/tables":IZ,"link-chart/operational-layers":{...SZ,LinkChartLayer:!0},"link-chart/basemap-base-layers":$Z,"link-chart/tables":IZ,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Vg=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,s,n){return n?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,s,n,o){(o&&o.layerContainerType==="ground"||r&&hie(this,n,{},o))&&(s[n]=r)}writeOperationalLayerType(r,s,n){r&&(s[n]=r)}writeTitle(r,s){s.title=r??"Layer"}readVisibilityTimeExtent(r){return r?pt.fromArray(r):null}writeVisibilityTimeExtent(r,s,n,o){r&&o.layerContainerType!=="tables"&&(r.isEmpty?o?.messages&&o.messages.push(new R("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):s[n]=r.toArray())}read(r,s){s&&(s.layer=this),uie(this,r,n=>super.read(r,n),s)}write(r,s){if(!this.persistenceEnabled&&!s?.ignorePersistenceEnabled)return null;if(s?.origin){const a=`${s.origin}/${s.layerContainerType||"operational-layers"}`;let c=!!H7e[a]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&a==="web-scene/operational-layers"&&(c=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&a==="web-map/operational-layers"&&(c=!1),!c)return s.messages?.push(new R("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${a}'`,{layer:this})),null}const n=super.write(r,{...s,layer:this}),o=!!s&&!!s.messages&&!!s.messages.filter(a=>a instanceof R&&a.name==="web-document-write:property-required").length;return $_(n?.url)?(s?.messages?.push(new R("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:n}beforeSave(){}};return u([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],i.prototype,"id",void 0),u([Q("id",["id"])],i.prototype,"readId",null),u([p(fde)],i.prototype,"listMode",void 0),u([oe("listMode")],i.prototype,"writeListMode",null),u([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:pi,isRequired:!0}}}}})],i.prototype,"operationalLayerType",void 0),u([oe("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),u([p(f4)],i.prototype,"opacity",void 0),u([p({type:Boolean,readOnly:!1})],i.prototype,"persistenceEnabled",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],i.prototype,"title",void 0),u([oe("title"),oe(["web-scene"],"title")],i.prototype,"writeTitle",null),u([p({type:pt,json:{origins:{"web-scene":{write:{layerContainerTypes:pi}}}}})],i.prototype,"visibilityTimeExtent",void 0),u([Q("visibilityTimeExtent")],i.prototype,"readVisibilityTimeExtent",null),u([oe(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ke,v_]]}})],i.prototype,"writeVisibilityTimeExtent",null),u([p({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:pi}}})],i.prototype,"visible",void 0),i=u([M("esri.layers.mixins.OperationalLayer")],i),i};var tj;const uk=new We({asc:"ascending",desc:"descending"});var yw;let Dp=(yw=class extends Y{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new tj({field:this.field,valueExpression:this.valueExpression,order:this.order})}},tj=yw,yw);u([p({type:String,json:{write:!0}})],Dp.prototype,"field",void 0),u([p({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Dp.prototype,"valueExpression",void 0),u([p({type:uk.apiValues,json:{type:uk.jsonValues,read:uk.read,write:uk.write}})],Dp.prototype,"order",void 0),Dp=tj=u([M("esri.layers.support.OrderByInfo")],Dp);function Ahe(t,e,i){if(!t)return null;const r=t.find(n=>!!n.field);if(!r)return null;const s=new Dp;return s.read(r,i),[s]}function W7e(t,e,i,r){const s=t.find(n=>!!n.field);s&&Tr(i,[s.toJSON()],e)}const J7e={type:[Dp],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:Ahe},write:{writer:W7e}}},Z7e=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([p(J7e)],i.prototype,"orderBy",void 0),i=u([M("esri.layers.mixins.OrderedLayer")],i),i},Ug=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=bi(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,s,n){if(s.itemId)return new Be({id:s.itemId,portal:n?.portal})}writePortalItem(r,s){r?.id&&(s.itemId=r.id)}async loadFromPortal(r,s){if(this.portalItem?.id)try{const{load:n}=await K(()=>import("./layersLoader-4tcilTpW.js"),__vite__mapDeps([268,146,147,145]));return Gt(s),await n({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},s)}catch(n){throw Yi(n)||X.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(s=>(Ss(s),!0)))}async setUserPrivileges(r,s){if(!lt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(s);if(this.url)try{const{features:{edit:n,fullEdit:o},content:{updateItem:a}}=await this._fetchUserPrivileges(r,s);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",a)}catch(n){Ss(n)}}async _fetchUserPrivileges(r,s){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(s);const o=!ft?.findCredential(this.url),a=r===n.id;if(a&&n.portal.user)return this._getUserPrivileges(n,o);let l,c;if(a)l=n.portal.url;else try{l=await D6(this.url,s)}catch(m){Ss(m)}if(!l||!tSe(l,n.portal.url))return this._fetchFallbackUserPrivileges(s);try{const m=s!=null?s.signal:null;c=await ft?.getCredential(`${l}/sharing`,{prompt:!1,signal:m})}catch(m){Ss(m)}const d=!0,h=!1,f=!1;if(!c)return{features:{edit:d,fullEdit:h},content:{updateItem:f}};try{if(a?await n.reload():(n=new Be({id:r,portal:{url:l}}),await n.load(s)),n.portal.user)return this._getUserPrivileges(n,o)}catch(m){Ss(m)}return{features:{edit:d,fullEdit:h},content:{updateItem:f}}}_getUserPrivileges(r,s){const n=Ije(r);return s&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(r){let s=!0;try{s=await this._fetchUserHasEditingPrivileges(r)}catch(n){Ss(n)}return{features:{edit:s,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const s=this.url?ft?.findCredential(this.url):null;if(!s)return!0;const n=dk.credential===s?dk.user:await this._fetchEditingUser(r);return dk.credential=s,dk.user=n,n?.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const s=this.portalItem?.portal?.user;if(s)return s;const n=ft?.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const o=`${n.owningSystemUrl}/sharing/rest`,a=ce.getDefault();if(a&&a.loaded&&Gn(a.restUrl)===Gn(o))return a.user;const l=`${o}/community/self`,c=r!=null?r.signal:null,d=await u3(xe(l,{authMode:"no-prompt",query:{f:"json"},signal:c}));return d.ok?ti.fromJSON(d.value.data):null}read(r,s){s&&(s.layer=this),super.read(r,s)}write(r,s){const n=s?.portal,o=this.portalItem?.id&&(this.portalItem.portal||ce.getDefault());return n&&o&&!_ie(o.restUrl,n.restUrl)?(s.messages&&s.messages.push(new R("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...s,layer:this})}};return u([p({type:Be})],i.prototype,"portalItem",null),u([Q("web-document","portalItem",["itemId"])],i.prototype,"readPortalItem",null),u([oe("web-document","portalItem",{itemId:{type:String}})],i.prototype,"writePortalItem",null),u([p({clonable:!1})],i.prototype,"resourceReferences",void 0),u([p({type:Boolean,readOnly:!0})],i.prototype,"userHasEditingPrivileges",void 0),u([p({type:Boolean,readOnly:!0})],i.prototype,"userHasFullEditingPrivileges",void 0),u([p({type:Boolean,readOnly:!0})],i.prototype,"userHasUpdateItemPrivileges",void 0),i=u([M("esri.layers.mixins.PortalLayer")],i),i},dk={credential:null,user:null};let Px=class extends _e{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([p()],Px.prototype,"updating",void 0),u([p()],Px.prototype,"status",void 0),Px=u([M("esri.layers.support.PublishingInfo")],Px);const Y7e=Symbol(),K7e=t=>{var s;var e;const i=t;let r=(s=class extends i{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const o=new Px;return this._checkPublishingStatus(o),o}_checkPublishingStatus(n){let l=0;const c=async h=>{let f;n.updating=!0;try{f=await this.fetchPublishingStatus()}catch{f="unavailable"}f!=="published"&&f!=="unavailable"||(n.status==="publishing"&&this.refresh(),d.remove()),n.status=f,n.updating=!1,d.removed||(l=setTimeout(c,h,h+125))},d={removed:!1,remove(){this.removed=!0,clearTimeout(l)}};this.when().catch(()=>d.remove()),c(250),this.addHandles(d)}},e=Y7e,s);return u([p({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([M("esri.layers.mixins.PublishableLayer")],r),r},Kp=new ue,OS=new WeakMap;function X7e(t){eBe(t)&&Kp.push(new WeakRef(t))}function Q7e(t){const e=Kp.find(i=>i.deref()===t);e&&Kp.remove(e)}function eBe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function Lhe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:Lhe(e,t%e):0}let dR=0,hk=0;function tBe(){const t=Date.now();let e=!1;for(const i of Kp){const r=i.deref();r?r.refreshInterval&&t-(OS.get(r)??0)+5>=6e4*r.refreshInterval&&(OS.set(r,t),r.refresh(t)):e=!0}if(e)for(let i=Kp.length-1;i>=0;i--)Kp.at(i).deref()||Kp.removeAt(i)}Ate(()=>{const t=Date.now();let e=0;for(const i of Kp){const r=i.deref();r&&(e=Lhe(Math.round(6e4*r.refreshInterval),e),r.refreshInterval?OS.get(r)||OS.set(r,t):OS.delete(r))}if(e!==hk){if(hk=e,clearInterval(dR),hk===0)return void(dR=0);dR=setInterval(tBe,hk)}},lr);const kZ=.1,Bg=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=m_(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||X7e(this)},()=>{})}destroy(){Q7e(this)}castRefreshInterval(r){return r>=kZ?r:r<=0?0:kZ}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){ng(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:s})},s=>{X.getLogger(this).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}get test(){}};return u([p({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:pi}}}}})],i.prototype,"refreshInterval",void 0),u([Mt("refreshInterval")],i.prototype,"castRefreshInterval",null),u([p({readOnly:!0})],i.prototype,"refreshTimestamp",void 0),u([p({readOnly:!0})],i.prototype,"refreshParameters",null),i=u([M("esri.layers.mixins.RefreshableLayer")],i),i},qg=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s?.effectiveScaleRange!==void 0&&iBe(r,s.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return u([p({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),u([p({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=u([M("esri.layers.mixins.ScaleRangeLayer")],i),i};function iBe(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}function TZ(t,e){return $o.fromJSON({value:t,unit:e})}let vs=class extends Le(Y){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?pt.fromArray(i.timeExtent):null}writeFullTimeExtent(e,i){e?.start!=null&&e.end!=null?i.timeExtent=e.toArray():i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?TZ(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?TZ(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=e?.toJSON().value??null,i.timeIntervalUnits=e?.toJSON().unit??null}};u([p({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],vs.prototype,"cumulative",void 0),u([p({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],vs.prototype,"endField",void 0),u([p({type:pt,json:{write:{enabled:!0,allowNull:!0}}})],vs.prototype,"fullTimeExtent",void 0),u([Q("fullTimeExtent",["timeExtent"])],vs.prototype,"readFullTimeExtent",null),u([oe("fullTimeExtent")],vs.prototype,"writeFullTimeExtent",null),u([p({type:Boolean,json:{write:!0}})],vs.prototype,"hasLiveData",void 0),u([p({type:$o,json:{write:{enabled:!0,allowNull:!0}}})],vs.prototype,"interval",void 0),u([Q("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],vs.prototype,"readInterval",null),u([oe("interval")],vs.prototype,"writeInterval",null),u([p({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],vs.prototype,"startField",void 0),u([p(Fw("timeReference",!0))],vs.prototype,"timeZone",void 0),u([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],vs.prototype,"trackIdField",void 0),u([p({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],vs.prototype,"useTime",void 0),u([p({type:[Date],json:{read:!1}})],vs.prototype,"stops",void 0),vs=u([M("esri.layers.support.TimeInfo")],vs);const rBe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:pi}}},K8=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,s){const n=s.timeInfo.exportOptions;if(!n)return null;const o=n.timeOffset,a=S8.fromJSON(n.timeOffsetUnits);return o&&a?new $o({value:o,unit:a}):null}set timeInfo(r){uae(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([p({type:pt,json:{write:!1}})],i.prototype,"timeExtent",void 0),u([p({type:$o})],i.prototype,"timeOffset",void 0),u([Q("service","timeOffset",["timeInfo.exportOptions"])],i.prototype,"readOffset",null),u([p({value:null,type:vs,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],i.prototype,"timeInfo",null),u([p(rBe)],i.prototype,"useViewTime",void 0),i=u([M("esri.layers.mixins.TemporalLayer")],i),i};let sBe=class extends wg{constructor(e){super(),this.type="track",this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[E2](){return this.trackInfoProvider.trackInfo}},Ua=class extends Le(Y){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([p({type:[gi],json:{write:!0}})],Ua.prototype,"labelingInfo",void 0),u([p(F3)],Ua.prototype,"labelsVisible",void 0),u([p({types:j_,json:{write:!0}})],Ua.prototype,"renderer",void 0),u([p({type:Boolean,json:{write:!0}})],Ua.prototype,"visible",void 0),Ua=u([M("esri.layers.support.TrackPartInfo")],Ua);let no=class extends Le(Y){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new Ua({renderer:new Un({symbol:AC.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new Ua({renderer:new Un({symbol:AC.clone()})}),this.trackLines=new Ua({renderer:new Un({symbol:U3.clone()})}),this.timeField="startTimeField"}writeFields(e,i,r){const s=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Tr(r,s,i)}};u([p({type:Boolean,json:{write:!0}})],no.prototype,"enabled",void 0),u([p({type:[ln],json:{write:!0}})],no.prototype,"fields",void 0),u([oe("fields")],no.prototype,"writeFields",null),u([p({type:Ua,json:{write:!0}})],no.prototype,"latestObservations",void 0),u([p({type:$o,json:{write:!0}})],no.prototype,"maxDisplayDuration",void 0),u([p({type:Number,json:{write:!0}})],no.prototype,"maxDisplayObservationsPerTrack",void 0),u([p(j2)],no.prototype,"popupEnabled",void 0),u([p({type:Uf,json:{name:"popupInfo",write:!0}})],no.prototype,"popupTemplate",void 0),u([p({type:Ua,json:{write:!0}})],no.prototype,"previousObservations",void 0),u([p({type:Ua,json:{write:!0}})],no.prototype,"trackLines",void 0),u([p({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],no.prototype,"timeField",void 0),no=u([M("esri.layers.support.TrackInfo")],no);const nBe=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.trackGraphicOrigin=new sBe(this),this.trackInfo=null}};return u([p({readOnly:!0,clonable:!1})],i.prototype,"trackGraphicOrigin",void 0),u([p({type:no})],i.prototype,"trackInfo",void 0),i=u([M("esri.layers.mixins.TrackableLayer")],i),i},EZ=new We({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Nc=class extends Le(Y){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([p({json:{write:!0}})],Nc.prototype,"name",void 0),u([p({json:{write:!0}})],Nc.prototype,"description",void 0),u([p({json:{read:EZ.read,write:EZ.write}})],Nc.prototype,"drawingTool",void 0),u([p({json:{write:!0}})],Nc.prototype,"prototype",void 0),u([p({json:{write:!0}})],Nc.prototype,"thumbnail",void 0),Nc=u([M("esri.layers.support.FeatureTemplate")],Nc);let Cl=class extends Le(Y){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const r of Object.keys(e))i[r]=$3(e[r]);return i}writeDomains(e,i){const r={};for(const s of Object.keys(e))e[s]&&(r[s]=e[s]?.toJSON());i.domains=r}};u([p({json:{write:!0}})],Cl.prototype,"id",void 0),u([p({json:{write:!0}})],Cl.prototype,"name",void 0),u([p({json:{write:!0}})],Cl.prototype,"domains",void 0),u([Q("domains")],Cl.prototype,"readDomains",null),u([oe("domains")],Cl.prototype,"writeDomains",null),u([p({type:[Nc],json:{write:!0}})],Cl.prototype,"templates",void 0),Cl=u([M("esri.layers.support.FeatureType")],Cl);let Fp=class extends Le(Y){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};u([p({type:String,json:{write:!0}})],Fp.prototype,"alias",void 0),u([p({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Fp.prototype,"name",void 0),u([p({types:Mae,json:{write:!0}})],Fp.prototype,"fieldFormat",void 0),Fp=u([M("esri.layers.support.FieldConfiguration")],Fp);function oBe(t){const{popupTemplate:e,fieldsIndex:i}=t,r=e?.fieldInfos;if(!r?.length||!i)return;const s=[];for(const n of r){const{fieldName:o,label:a}=n,l=i.get(o);if(!l)continue;const c=a&&a!==l.alias?a:null,d=WLe(n,l);(c||d)&&s.push(new Fp({name:l.name,alias:c,fieldFormat:d}))}return s.length?s:null}function aBe(t){const{fields:e}=t;if(!e?.length)return;const i=[];for(const r of e){const s=Rg(r)?vS(r):null;s&&i.push(new Fp({name:r.name,fieldFormat:s}))}return i.length?i:null}function lBe(t,e){const{popupTemplate:i,fieldsIndex:r}=t;if(!i||!r)return;const s=cBe(t,e,i.fieldInfos);if(!s)return;const n=i.clone();return n.fieldInfos=s,n}function cBe(t,e,i){e??(e=[]),i=U(i)??[];let r=!1;const s=new Map;for(const n of e){const o=t.fieldsIndex.get(n.name);o&&s.set(o.name,n)}for(const n of i){const o=t.fieldsIndex.get(n.fieldName);if(!o)continue;const a=s.get(o.name);n.label=a?.alias||o.alias,n.format=Rg(o)&&a?.fieldFormat?H6(a.fieldFormat,o):null,r=!0,s.delete(o.name)}for(const n of s.values()){const o=uBe(t,n);o&&(i.push(o),r=!0)}return r?i:null}function uBe(t,e){const{name:i,alias:r,fieldFormat:s}=e,n=t.fieldsIndex.get(i);if(!n||!r&&!s)return;const o=r||n.alias,a=Rg(n)&&s?H6(s,n):null;return new w3({fieldName:n.name,label:o,format:a,visible:!1,isEditable:fae(n,t)})}function dBe(){return{fields:{type:[ss],value:null,set:function(t){if(t&&H("big-integer-warning-enabled")){const e=t.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(e.length){const i=e.map(r=>`'${r.name}'`).join(", ");X.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",t)}},fieldsIndex:{readOnly:!0,get(){return Ww.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){const t=this._userOutFields;if(!t?.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const e of t)this.fieldsIndex?.has(e)||X.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${e} found in outFields`,{layer:this,outFields:t});return g3(this.fieldsIndex,t)}}}}const hR=()=>X.getLogger("esri.layers.support.labelingInfo"),hBe=/\[([^[\]]+)\]/gi;function MZ(t,e,i){return t?t.map(r=>{const s=new gi;if(s.read(r,i),s.labelExpression){const n=e.fields||e.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(hBe,(o,a)=>`[${pBe(a,n)}]`)}return s}):null}function pBe(t,e){if(!e)return t;const i=t.toLowerCase();for(let r=0;r<e.length;r++){const s=e[r].name;if(s.toLowerCase()===i)return s}return t}const CZ=["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],fBe={esriGeometryPoint:CZ,esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:CZ,esriGeometryEnvelope:null};function mBe(t,e){const i=[];for(const r of t){const s=r.labelPlacement,n=fBe[e];if(!r.symbol)return hR().warn("No ILabelClass symbol specified."),[];if(!n)return hR().error(new R("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),[];if(n.includes(s))i.push(r);else{const o=n[0];s&&hR().warn(`Found invalid label placement type ${s} for ${e}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const yBe="relationships/",gBe="expression/",vBe=/<br\s*\/*>/gi;let kn=class extends _e{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||A_(()=>wh()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??K(()=>import("./featureUtils-DgxbUALK.js"),[]).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new ue;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const i of this.expressionsUsedInTitle??[])e.push({name:i.name,invalid:!0});return e}for(const i of this.expressionsUsedInTitle)try{const r=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(r.isAsync){e.push({name:i.name,invalid:!0});break}e.push({name:i.name,syntax:r,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(r,{vars:{$feature:"any"}})})}catch{e.push({name:i.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return typeof e!="string"?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(i=>e.includes(`{expression/${i.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>e.invalid===!0)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const r of this.calculatedExpressions?.toArray()??[])try{const s=this._arcadeTask.value.arcade.extractFieldLiterals(r.syntax);for(const n of s){const o=n.split("."),a=this.fieldsIndex.get(o.at(-1)??"");a&&e.add(a.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const r of i){const s=this.fieldsIndex.get(r);s&&e.add(s.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return e===""||e==null||this.hasBadExpressions||typeof e!="string"?this.titleFromDisplayField:e}async getTitle(e,i,r){const s=i.getObjectId()??i.attributes[e.objectIdField];return(await this.getTitles(e,[i],r)).get(s)??""}async getTitles(e,i,r){const s=new Map,n=r?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);r?.fetchMissingFields&&(i=await this._checkAndReQueryGraphics(e,i));const{fieldInfoMap:a,workingTitle:l}=this,c=l&&a;i.forEach(d=>{const h=d.getObjectId()??d.attributes[e.objectIdField];let f=c?o({attributes:d.attributes,expressionAttributes:null,fieldInfoMap:a,globalAttributes:this._createFormattedAttributes(e,d,n).global,layer:e,text:l}):"";r?.removeHTML&&(f=BCe.sanitize(f).replaceAll(vBe," ")),s.set(h,f)})}catch{}return s}async _checkAndReQueryGraphics(e,i){const r=i.map(s=>s.getObjectId()??s.attributes[e.objectIdField]).filter(Ei);if(r.length!==i.length)return i;if(i.some(s=>!VLe(s,this.requiredFields))){const s=e.createQuery();s.where="1=1",s.outFields=[...this.requiredFields],s.objectIds=r;const n=await e.queryFeatures(s);if(n?.features.length===i.length)return n.features}return i}_createFieldInfoMap(e){const i=new Map;if(!e)return i;for(const r of e){if(!r.fieldName)continue;const s=this.fieldsIndex.get(r.fieldName),n=s?.name??r.fieldName;r.fieldName=n,i.set(n.toLowerCase(),r)}return i}_createFormattedAttributes(e,i,r="system"){const s=this.effectivePopupTemplate?.fieldInfos??[],n={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const a=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,e,null);for(const l of this.calculatedExpressions)try{n[`expression/${l.name}`]=l.func({vars:{$feature:a}})}catch{}}const o={...i.attributes,...n};return{global:this._featureUtils.formatAttributes({fieldInfos:s,attributes:o,graphic:i,timeZone:r,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return q6(e).filter(i=>!(i.startsWith(yBe)||i.startsWith(gBe)))}};u([p({readOnly:!0})],kn.prototype,"_arcadeTask",null),u([p()],kn.prototype,"_featureUtils",void 0),u([p({readOnly:!0})],kn.prototype,"featureUtilsPromise",null),u([p({readOnly:!0})],kn.prototype,"calculatedExpressions",null),u([p()],kn.prototype,"displayField",void 0),u([p()],kn.prototype,"effectivePopupTemplate",void 0),u([p()],kn.prototype,"expressionsUsedInTitle",null),u([p()],kn.prototype,"fieldsIndex",void 0),u([p()],kn.prototype,"fieldInfoMap",null),u([p()],kn.prototype,"fields",void 0),u([p()],kn.prototype,"objectIdField",void 0),u([p()],kn.prototype,"requiredFields",null),kn=u([M("esri.layers.support.TitleCreator")],kn);const Eb=[];function Ohe(t,e){if(u$(t.url??""))return!0;const{wkid:i}=e;for(const r of Eb){if((t.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}Eb.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=23301;e<=23333;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102934;e<=102955;e++)t.add(e);return t}]),Eb.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),Eb.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),Eb.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),Eb.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]);async function bBe(t,e,i){const r=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await u3(r.populateFromStyle());if(Gt(i),s.ok===!1){const n=s.error;e?.messages&&e.messages.push(new pa("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:e})),t.clear("renderer",e?.origin)}}}function Rhe({displayField:t,editFieldsInfo:e,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=SBe({editFieldsInfo:e,fields:i,objectIdField:r},n);if(!o.length)return null;const a=kBe({titleBase:s,fields:i,displayField:t}),l=IBe();return new Uf({title:a,content:l,fieldInfos:o})}const wBe=(t,e)=>e.visibleFieldNames?e.visibleFieldNames.has(t.name):xLe(t,e);function _Be({fields:t,ignoreFieldTypes:e,sortDisabled:i}){const r=t;return e&&(t=t.filter(s=>!e.includes(s.type))),t===r&&(t=t.slice()),i!==!0&&t.sort(xBe),t}function xBe(t,e){return t.type==="oid"?-1:e.type==="oid"?1:PZ(t)?-1:PZ(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function SBe(t,e){const i=e?.visibleFieldNames;return _Be({fields:t.fields??[],ignoreFieldTypes:e?.ignoreFieldTypes||TBe,sortDisabled:e?.sortDisabled}).map(r=>new w3({fieldName:r.name,isEditable:fae(r,t),label:r.alias,format:$Be(r),visible:wBe(r,{...t,visibleFieldNames:i})}))}function $Be(t){switch(t.type){case"small-integer":case"integer":return new Tu({digitSeparator:!0,places:0});case"single":case"double":return new Tu({digitSeparator:!0,places:2});case"string":return BLe(t.name)?new Tu({digitSeparator:!0,places:0}):void 0;default:return}}function IBe(){return[new Gw,new qw]}function kBe(t){const e=hLe(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function PZ(t){return(t.name&&t.name.toLowerCase())==="name"?!0:t.alias?.toLowerCase()==="name"}const TBe=["geometry","blob","raster","guid","xml"],ys="FeatureLayer";function pk(t,e){return new R("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function AZ(t){return t&&t instanceof ue}const pR=dBe();function fR(t,e,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let Se=class extends D8e(G7e($Ue(K7e(_Ue(vUe(Dg(Z7e(K8(nBe(qg(Bg(O3(Vg(Ug(oc(N3(L3(Le(Bt))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new OVe(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=fe.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=m_(async(i,r,s)=>{const{save:n,saveAs:o}=await K(()=>import("./featureLayerUtils-D9cvKfuL.js"),__vite__mapDeps([269,263,270,267,146]));switch(i){case 0:return n(this,r);case 1:return o(this,s,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Ss).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstValidLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new R("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>a8e(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return bi(e),new kn({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,i){return i=i.layerDefinition||i,U8(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,r){return this._readEditingEnabled(i,!0,r)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,r,s){this._writeEditingEnabled(e,i,!0,s)}get effectiveEditingEnabled(){return u8e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override("fieldConfigurations",e),!this.loaded))return;const i=lBe(this,e);i&&this._set("popupTemplate",i)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden("fieldConfigurations")?this._get("fieldConfigurations"):oBe(this)||null}readIsTable(e,i){return(i=i?.layerDefinition??i).type==="Table"||!i.geometryType}writeIsTable(e,i,r,s){s?.writeLayerSchema&&Tr(r,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return Ode(i.layerDefinition||i)}readObjectIdField(e,i){return Rde(i.layerDefinition||i)}writePopupTemplate(e,i,r,s){e&&(i[r]=e.toJSON({...s,writeFieldFormat:!s?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){DF(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,r){i=i.layerDefinition||i;const s=i.drawingInfo?.renderer;if(s){const n=A$(s,i,r)??void 0;return n||X.getLogger(this).error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:r}),n}return F8(i,r)}set source(e){const i=this._get("source");i!==e&&(AZ(i)&&this._resetMemorySource(i),AZ(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ue?new Cd({layer:this,items:e}):e:null}readSource(e,i){const r=Rr.fromJSON(i.featureSet);return new Cd({layer:this,items:r?.features??[]})}readTemplates(e,i){const r=i.editFieldsInfo,s=r?.creatorField,n=r?.editorField;return e=e?.map(o=>Nc.fromJSON(o)),this._fixTemplates(e,s),this._fixTemplates(e,n),e}readTitle(e,i){const r=i.layerDefinition?.name??i.name,s=i.title||i.layerDefinition?.title;if(r){const n=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?SSe(this.url,r):r;let o=r;if(!o&&this.url){const a=ya(this.url);a!=null&&(o=a.title)}return o?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==o&&(o=n+" - "+o),DU(o)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,i){return i.title||i.layerDefinition?.name}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const s=i.fields.find(n=>n.name.toLowerCase()===r);s&&(r=s.name)}return r}readTypes(e,i){e=(i=i.layerDefinition||i).types;const r=i.editFieldsInfo,s=r?.creatorField,n=r?.editorField;return e?.map(o=>(o=Cl.fromJSON(o),this._fixTemplates(o.templates,s),this._fixTemplates(o.templates,n),o))}readVisible(e,i){return i.layerDefinition?.defaultVisibility!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){const r=await U6e(this,e,i,ys);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,i,r){const s=await B6e(this,e,i,r,ys);return this.lastEditsEventDate=new Date,s}async applyEdits(e,i){return q6e(this,e,i)}async uploadAssets(e,i){return G6e(this,e,i)}createFieldConfigurations(){return aBe(this)}createPopupTemplate(e){return Rhe(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await Oa(K(()=>import("./FeatureLayerSource-DvpneCUP.js"),__vite__mapDeps([271,35,40,272,273,274,76,77,275,276,24,19])),e);return new i({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=t8e(this);e.dynamicDataSource=this.dynamicDataSource;const i=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=$0(this.definitionExpression,i);return e.where=r||"1=1",e}async deleteAttachments(e,i){const r=await H6e(this,e,i,ys);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return W6e(this,e,ys)}async getFeatureTitle(e,i){return this._titleCreator.getTitle(this,e,i)}async getFeatureTitles(e,i){return this._titleCreator.getTitles(this,e,i)}getFeatureType(e){return z8(this.types,this.typeIdField,e)}getFieldAlias(e){const i=this.getField(e);if(i)return this.getFieldConfiguration(i.name)?.alias||i.alias}getFieldConfiguration(e){return e=e.toLowerCase(),this.fieldConfigurations?.find(i=>i.name.toLowerCase()===e)}getFieldDomain(e,i){return r8e(this,e,i,this.getField(e)?.domain??null)}async queryAttachments(e,i){return J6e(this,e,i,ys)}async queryFeatures(e,i){const r=await this.load(),s=await r.source.queryFeatures(Te.from(e)??r.createQuery(),i),n=this.graphicOrigin;if(s?.features)for(const o of s.features)o.layer=o.sourceLayer=r,o.origin=n;return s}async queryObjectIds(e,i){return await Z6e(this,e,i,ys)}async queryFeatureCount(e,i){return Y6e(this,e,i,ys)}async queryExtent(e,i){return K6e(this,e,i,ys)}async queryRelatedFeatures(e,i){return X6e(this,e,i,ys)}async queryRelatedFeaturesCount(e,i){return Q6e(this,e,i,ys)}async queryPivot(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryPivot||!s?.operations?.supportsQueryPivot)throw new R(ys,"Layer source does not support queryPivot capability");const n=await K(()=>import("./PivotQuery-CY7g4isN.js").then(a=>a.P),[]),o=await r.queryPivot(n.default.from(e),i);if(o?.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryTopFeatures(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopFeatures||!s?.query?.supportsTopFeaturesQuery)throw new R(ys,"Layer source does not support queryTopFeatures capability");const n=await K(()=>import("./TopFeaturesQuery-BjmompIg.js"),[]),o=await r.queryTopFeatures(n.default.from(e),i);if(o?.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryAttributeBins(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryAttributeBins)throw new R(ys,"Layer source does not support queryAttributeBins capability");f8e(e,s,ys);const n=await K(()=>import("./AttributeBinsQuery-k2p38Poh.js"),__vite__mapDeps([204,14,21])),o=await r.queryAttributeBins(n.default.from(e),i);if(o.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o}async queryTopObjectIds(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopObjectIds||!s?.query.supportsTopFeaturesQuery)throw new R(ys,"Layer source does not support queryTopObjectIds capability");const n=await K(()=>import("./TopFeaturesQuery-BjmompIg.js"),[]);return(await r.queryTopObjectIds(n.default.from(e),i)).filter(W3e)}async queryTopFeaturesExtent(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopExtents||!s?.query?.supportsTopFeaturesQuery)throw new R(ys,"Layer source does not support queryTopExtents capability");const n=await K(()=>import("./TopFeaturesQuery-BjmompIg.js"),[]);return r.queryTopExtents(n.default.from(e),i)}async queryTopFeatureCount(e,i){const{source:r,capabilities:s}=await this.load();if(!r.queryTopCount||!s?.query?.supportsTopFeaturesQuery)throw new R(ys,"Layer source does not support queryFeatureCount capability");const n=await K(()=>import("./TopFeaturesQuery-BjmompIg.js"),[]);return r.queryTopCount(n.default.from(e),i)}read(e,i){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const{layers:s,showLegend:n}=r;s?.length===1&&(super.read(s[0],i),n!=null&&super.read({showLegend:n},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:i?.origin??void 0,writeLayerSchema:i?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:s,messages:n}=i;if(this.dynamicDataSource)return n?.push(pk(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&s!=="tables")return n?.push(pk(this,`a table source can only be written to tables, not ${s}`)),null;if(this._hasMemorySource())return n?.push(pk(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&s==="tables")return n?.push(pk(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new R(ys,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||Ohe(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}_readEditingEnabled(e,i,r){let s=e.layerDefinition?.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,i&&r?.origin==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,r,s){if(!e){const n=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Tr("layerDefinition.capabilities",n,i),r&&!s?.writeLayerSchema&&(i.capabilities=n)}}_fetchFirstValidLayerId(e){return xe(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const r=i.data;if(r)return this.applyPreferredHost(r),this.findFirstValidLayerId(r)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),DF(this.renderer,this.fieldsIndex),uae(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),bBe(this,{origin:"service"})}async hasDataChanged(){return e8e(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(r=>{const s=r.prototype?.attributes;s&&i&&delete s[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new R("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new R("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this.addHandles([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([p({clonable:!1,readOnly:!0})],Se.prototype,"_titleCreator",null),u([p(NUe)],Se.prototype,"attributeTableTemplate",void 0),u([Q("service","capabilities")],Se.prototype,"readCapabilities",null),u([p({json:{origins:{"web-scene":{write:!1}},write:!0}})],Se.prototype,"charts",void 0),u([p({readOnly:!0})],Se.prototype,"createQueryVersion",null),u([p({json:{read:{source:"layerDefinition.copyrightText"}}})],Se.prototype,"copyright",void 0),u([p({json:{read:{source:"layerDefinition.displayField"}}})],Se.prototype,"displayField",void 0),u([p({types:Jp,readOnly:!0})],Se.prototype,"defaultSymbol",void 0),u([p({type:Dn})],Se.prototype,"dynamicDataSource",void 0),u([p({type:Boolean})],Se.prototype,"editingEnabled",null),u([Q(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Se.prototype,"readEditingEnabled",null),u([Q("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Se.prototype,"readEditingEnabledFromWebMap",null),u([oe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Se.prototype,"writeEditingEnabled",null),u([oe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Se.prototype,"writeEditingEnabledToWebMap",null),u([p({readOnly:!0})],Se.prototype,"effectiveEditingEnabled",null),u([p({clonable:!1,readOnly:!0})],Se.prototype,"featureTitleFields",null),u([p({type:[Fp],json:{name:"layerDefinition.fieldConfigurations",write:{overridePolicy(t,e,i){return{enabled:!i?.writeLayerSchema,ignoreOrigin:this.originIdOf(e)===1}}}}})],Se.prototype,"fieldConfigurations",null),u([p({...pR.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:fR}}}}})],Se.prototype,"fields",void 0),u([p(pR.fieldsIndex)],Se.prototype,"fieldsIndex",void 0),u([p({type:xl,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Se.prototype,"formTemplate",void 0),u([p({json:{read:{source:"layerDefinition.extent"}}})],Se.prototype,"fullExtent",void 0),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:fR,writer(t,e,i){const r=t?N4.toJSON(t):null;r&&Tr(i,r,e)}}}},read:{source:"layerDefinition.geometryType",reader:N4.read}}})],Se.prototype,"geometryType",void 0),u([p({readOnly:!0,clonable:!1})],Se.prototype,"graphicOrigin",void 0),u([p({json:{read:{source:"layerDefinition.hasM"}}})],Se.prototype,"hasM",void 0),u([p({json:{read:{source:"layerDefinition.hasZ"}}})],Se.prototype,"hasZ",void 0),u([p(pde)],Se.prototype,"id",void 0),u([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Se.prototype,"infoFor3D",void 0),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Se.prototype,"isTable",void 0),u([Q("service","isTable",["type","geometryType"]),Q("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Se.prototype,"readIsTable",null),u([oe("web-map","isTable")],Se.prototype,"writeIsTable",null),u([p(F3)],Se.prototype,"labelsVisible",void 0),u([p({type:[gi],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:MZ,write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:MZ,write:{layerContainerTypes:pi}}})],Se.prototype,"labelingInfo",void 0),u([p((()=>{const t=U(LUe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,r){Tr(r,p3(e),i)}}},t})())],Se.prototype,"opacity",void 0),u([p(dde)],Se.prototype,"legendEnabled",void 0),u([p({type:["show","hide"],json:(()=>{const t=U(fde.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],Se.prototype,"listMode",void 0),u([Q("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Se.prototype,"readGlobalIdField",null),u([p({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:fR}}}}})],Se.prototype,"objectIdField",void 0),u([Q("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Se.prototype,"readObjectIdField",null),u([p({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:pi}}})],Se.prototype,"operationalLayerType",void 0),u([p(pR.outFields)],Se.prototype,"outFields",void 0),u([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Se.prototype,"path",void 0),u([p(j2)],Se.prototype,"popupEnabled",void 0),u([p({type:Uf,json:{name:"popupInfo",write:!0}})],Se.prototype,"popupTemplate",void 0),u([oe("popupTemplate")],Se.prototype,"writePopupTemplate",null),u([p({readOnly:!0})],Se.prototype,"defaultPopupTemplate",null),u([p({types:j_,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Phe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:pi,overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:pi})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i?.writeLayerSchema,layerContainerTypes:pi})}}})],Se.prototype,"renderer",null),u([Q("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Q("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Se.prototype,"readRenderer",null),u([p()],Se.prototype,"resourceInfo",void 0),u([p((()=>{const t=U(PUe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],Se.prototype,"screenSizePerspectiveEnabled",void 0),u([p({clonable:!1})],Se.prototype,"source",null),u([Mt("source")],Se.prototype,"castSource",null),u([Q("portal-item","source",["featureSet"]),Q("web-map","source",["featureSet"])],Se.prototype,"readSource",null),u([p({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Se.prototype,"spatialReference",void 0),u([p({type:Number})],Se.prototype,"subtypeCode",void 0),u([p({type:[Nc]})],Se.prototype,"templates",void 0),u([Q("templates",["editFieldsInfo","creatorField","editorField","templates"])],Se.prototype,"readTemplates",null),u([p({type:vs})],Se.prototype,"timeInfo",void 0),u([p()],Se.prototype,"title",void 0),u([Q("service","title",["name"]),Q("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Se.prototype,"readTitle",null),u([Q("web-map","title",["layerDefinition.name","title"])],Se.prototype,"readTitleFromWebMap",null),u([p({type:String})],Se.prototype,"sublayerTitleMode",void 0),u([p({json:{read:!1}})],Se.prototype,"type",void 0),u([p({type:String})],Se.prototype,"typeIdField",void 0),u([Q("service","typeIdField"),Q("typeIdField",["layerDefinition.typeIdField"])],Se.prototype,"readTypeIdField",null),u([p({type:[Cl]})],Se.prototype,"types",void 0),u([Q("service","types",["types"]),Q("types",["layerDefinition.types"])],Se.prototype,"readTypes",null),u([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility",layerContainerTypes:pi}}}}})],Se.prototype,"visible",void 0),u([Q("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Se.prototype,"readVisible",null),Se=u([M("esri.layers.FeatureLayer")],Se);const EBe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Se}},Symbol.toStringTag,{value:"Module"}));let wd=class extends Y{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],wd.prototype,"moment",void 0),u([p({type:Boolean,json:{write:!0}})],wd.prototype,"fullUpdate",void 0),u([p({type:Boolean,json:{write:!0}})],wd.prototype,"validateErrorsCreated",void 0),u([p({type:Boolean,json:{write:!0}})],wd.prototype,"exceededTransferLimit",void 0),u([p({type:[Object],json:{write:!0}})],wd.prototype,"serviceEdits",void 0),u([p({type:[Object],json:{write:!0}})],wd.prototype,"discoveredSubnetworks",void 0),wd=u([M("esri.rest.networks.support.ValidateNetworkTopologyResult")],wd);const MBe=wd,CBe=Qr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let yp=class extends MBe{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await xe(this.statusUrl,i);return this.read(r),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((s,n)=>{this._clearTimer();const o=setInterval(()=>{this._timer||n(jt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),n(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([p()],yp.prototype,"editsResolver",void 0),u([p({type:String,json:{write:!0}})],yp.prototype,"statusUrl",void 0),u([Ee(CBe)],yp.prototype,"status",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],yp.prototype,"submissionTime",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],yp.prototype,"lastUpdatedTime",void 0),yp=u([M("esri.networks.support.TopologyValidationJobInfo")],yp);const PBe=yp;function ABe(t,e,i="from"){const{fromRuleElement:r,viaRuleElement:s,toRuleElement:n}=Nhe(t),o=[];switch(t.ruleType){case 2:case 3:i==="from"&&Nl(e,r,!1)?o.push(n):i==="to"&&Nl(e,n,!1)&&o.push(r);break;case 4:case 1:Nl(e,r,!0)?o.push(n):Nl(e,n,!0)&&o.push(r);break;case 5:s&&(Nl(e,s,!0)?(o.push(r),o.push(n)):(Nl(e,r,!0)||Nl(e,n,!0))&&o.push(s));break;default:return[]}return o}function Ax(t,e,i){const{fromRuleElement:r,viaRuleElement:s,toRuleElement:n}=Nhe(t);switch(t.ruleType){case 2:case 3:return fk(e,i,r,n,!1,!1);case 4:case 1:return fk(e,i,r,n,!0,!0);case 5:return fk(e,i,r,s,!0,!0)||fk(e,i,n,s,!0,!0);default:return!1}}function fk(t,e,i,r,s,n){if(!i||!r)return!1;const o=Nl(t,i,n),a=Nl(e,r,n);if(s){const l=Nl(t,r,n),c=Nl(e,i,n);return o&&a||l&&c}return o&&a}function LBe(t,e){const i=t.terminal?.terminalId,r=e.terminalId;return i==null&&r==null||(i===1?r==null||r===1:i===r)}function Nl(t,e,i){const{assetGroupCode:r,assetTypeCode:s}=t;return("layerId"in t?t.layerId===e.networkSource?.layerId:t.networkSourceId===e.networkSource?.sourceId)&&(r==null||r===e.assetGroup?.assetGroupCode)&&(s==null||s===e.assetType?.assetTypeCode)&&(!i||!("terminalId"in t)||LBe(e,t))}function Nhe(t){return{fromRuleElement:{networkSource:t.fromNetworkSource,assetGroup:t.fromAssetGroup,assetType:t.fromAssetType,terminal:t.fromTerminal},viaRuleElement:t.viaNetworkSource?{networkSource:t.viaNetworkSource,assetGroup:t.viaAssetGroup,assetType:t.viaAssetType,terminal:t.viaTerminal}:void 0,toRuleElement:{networkSource:t.toNetworkSource,assetGroup:t.toAssetGroup,assetType:t.toAssetType,terminal:t.toTerminal}}}function gv(t){let e=null,i=null,r=null;if(nae(t))e=ij(t),[i,r]=OBe(t);else if(Op(t)){e=t.parent?.layerId??null;const[s]=zC(t);s===t.subtypeField&&(i=t.subtypeCode)}else e=t.layerId??null;return{layerId:e,assetGroupCode:i,assetTypeCode:r}}function ij(t){const{sourceLayer:e}=t;let i;return N6(e)?i=e.layerId:Op(e)&&(i=e.parent?.layerId),i??null}function OBe(t){const[e,i]=zC(t.sourceLayer);return[e?t.attributes[e]:null,i?t.attributes[i]:null]}function zC(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}async function LZ(t,e){if(t==="Utility Network Layer"){const{default:i}=await K(()=>Promise.resolve().then(()=>ZBe),void 0);return new i({layerUrl:e})}return null}async function RBe(t){let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof Be||(e={...e,portalItem:new Be(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new R("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const r=i.url,s=await xe(r,{responseType:"json",query:{f:"json"}}),n="Network Layer";if(s.data.type?.includes(n))return LZ(s.data.type,r);if(s.data.layers){const o=s.data.layers.find(a=>a.type.includes(n));if(o){const a=`${r}/${o.id}`;return LZ(o.type,a)}}return null}let Xi=class extends oc(zf){static fromPortalItem(e){return RBe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this._historicMoment=null,this._gdbVersion=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=i=>{const{serviceUrl:r,gdbVersion:s,result:n}=i,o=r===this.featureServiceUrl,a=CS(r,s,this.gdbVersion);o&&a&&n.then(l=>{wE(r,s)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=i=>{const{serviceUrl:r,gdbVersion:s,moment:n}=i,o=r===this.featureServiceUrl,a=CS(r,s,this.gdbVersion);o&&a&&(this.historicMoment=n)},this.when().then(()=>{this.addHandles([rde(this._applyEditsHandler),sde(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{Yi(e)||X.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get loaded(){return super.loaded}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??null}get parsedUrl(){return $t(this.layerUrl)}get featureServiceUrl(){return ya(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return ya(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}get gdbVersion(){return this._gdbVersion}set gdbVersion(e){this._gdbVersion=e}get historicMoment(){return this._historicMoment}set historicMoment(e){this._historicMoment=e}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await Promise.all([this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e),this._fetchLayerMetaData(this.layerUrl,e)])}getLayerIdBySourceId(e){if(!this.dataElement)return null;const i=this._layerIdBySourceId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,s=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return s>=0?s:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const i=this._sourceIdByLayerId.get(e);if(i!=null)return i;const r=this.dataElement.domainNetworks,s=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return s>=0?s:null}getObjectIdsFromElements(e){const i=[],r=new Map;for(const n of e){const o=this.getLayerIdBySourceId(n.networkSourceId);if(o==null)continue;let a=r.get(o);a===void 0&&(a=[]),a.push(n.objectId),r.set(o,a)}const s=this.featureServiceUrl;return r.forEach((n,o)=>i.push({layerUrl:`${s}/${o}`,objectIds:n})),i}async queryNamedTraceConfigurations(e,i){const[{queryNamedTraceConfigurations:r},{default:s}]=await Promise.all([K(()=>import("./queryNamedTraceConfigurations-B4batdcj.js"),[]),K(()=>import("./QueryNamedTraceConfigurationsParameters-B57J93zD.js"),[])]),n=this.networkServiceUrl,o=s.from(e);return(await r(n,o,{...i}))?.namedTraceConfigurations}async validateTopology(e,i){if(!e.validateArea)throw new R("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:s}]=await Promise.all([K(()=>import("./validateNetworkTopology-D0mUkQRp.js"),[]),K(()=>import("./ValidateNetworkTopologyParameters-PAlikwo_.js"),[])]),n=s.from(e);wE(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=c4,await IJ(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion;const o=this.networkServiceUrl,a=this.featureServiceUrl,l=kJ(a,null,this.gdbVersion,!0),c=await r(o,n,{...i});if(c?.serviceEdits){const d=[];for(const h of c.serviceEdits){const{editedFeatures:f}=h,m=f?.spatialReference?new fe(f.spatialReference):null;d.push({layerId:h.layerId,editedFeatures:{adds:f?.adds?.map(y=>mk(y,m))||[],updates:f?.updates?.map(y=>({original:mk(y[0],m),current:mk(y[1],m)}))||[],deletes:f?.deletes?.map(y=>mk(y,m))||[],spatialReference:m}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:d,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,i){let r=null;if(!e.validateArea)throw new R("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const d=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await xe(d,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:s},{default:n}]=await Promise.all([K(()=>import("./validateNetworkTopology-D0mUkQRp.js"),[]),K(()=>import("./ValidateNetworkTopologyParameters-PAlikwo_.js"),[])]),o=n.from(e);wE(this.featureServiceUrl,this.gdbVersion||null)?(o.sessionID=c4,await IJ(this.featureServiceUrl,this.gdbVersion,!0)):o.sessionID=null,o.gdbVersion=this.gdbVersion||r;const a=this.networkServiceUrl,l=this.featureServiceUrl?kJ(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await s(a,o,{...i});return new PBe({statusUrl:c,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const i of this.dataElement.domainNetworks)for(const r of[i.edgeSources??[],i.junctionSources??[]])for(const s of r)if(s.sourceId===e)return r===i.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,i,r,s,n){for(const o of e)for(const a of[o.edgeSources??[],o.junctionSources??[]])for(const l of a)if(l[r]===n)return i.set(n,l[s]),l[s];return-1}async _fetchLayerMetaData(e,i){const r=await xe(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,i,r){if(this.dataElement)return;const s=await xe(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...r}).then(n=>n.data.layerDataElements?.[0]);s&&this.read(s,{origin:"service"})}};function mk(t,e){return new Wi({attributes:t.attributes,geometry:Nu({...t.geometry,spatialReference:e})})}u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Xi.prototype,"id",void 0),u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Xi.prototype,"title",void 0),u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Xi.prototype,"layerUrl",void 0),u([p({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Xi.prototype,"dataElement",void 0),u([p({type:Pe,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Xi.prototype,"fullExtent",void 0),u([p({type:fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Xi.prototype,"spatialReference",void 0),u([p({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Xi.prototype,"type",void 0),u([p({readOnly:!0})],Xi.prototype,"datasetName",null),u([p({readOnly:!0})],Xi.prototype,"owner",null),u([p({readOnly:!0})],Xi.prototype,"schemaGeneration",null),u([p({readOnly:!0})],Xi.prototype,"parsedUrl",null),u([p({readOnly:!0})],Xi.prototype,"featureServiceUrl",null),u([p({readOnly:!0})],Xi.prototype,"networkServiceUrl",null),u([p({readOnly:!0})],Xi.prototype,"layerId",null),u([p()],Xi.prototype,"sourceJSON",void 0),u([p({readOnly:!0})],Xi.prototype,"networkSystemLayers",null),u([p({type:String})],Xi.prototype,"gdbVersion",null),u([p({type:Date})],Xi.prototype,"historicMoment",null),u([p()],Xi.prototype,"_historicMoment",void 0),u([p()],Xi.prototype,"_gdbVersion",void 0),Xi=u([M("esri.networks.Network")],Xi);const NBe=Xi;let gp=class extends Ph(zf){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=xe}initialize(){}async load(e){const i=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeaturesCanAssociateWithClause(e,i,r){const s=new Map,[n,o]=zC(e.sourceLayer);if(!n||!o)return"";const a=gv(e),l=gv(i);r.forEach(d=>{const{type:h,direction:f}=d;this._getRulesForAssociationType(h).forEach(m=>{ABe(m,a,f).filter(y=>y.networkSource?.layerId===l.layerId).forEach(y=>{const v=y.assetGroup?.assetGroupCode,b=y.assetType?.assetTypeCode;if(v!=null&&b!=null){const w=s.get(v)??new Set;w.add(b),s.set(v,w)}})})});let c=[];return this._mergeAssetCodes(s).forEach((d,h)=>{const f=`${n} IN (${h})`,m=q3e(o,[...d]);f&&m&&c.push($0(f,m))}),c.length>1&&(c=c.map(d=>`(${d})`)),c.join(" OR ")}getFeaturesCanAssociateWith(e,i,r){return ij(e)==null?[]:i.filter(s=>this.canAssociateFeatures(e,s,r))}canAssociateFeatures(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const s=gv(e),n=gv(i);return r.some(o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some(c=>l==="to"?Ax(c,n,s):Ax(c,s,n))})}getLayersCanAssociateWith(e,i,r){return ij(e)==null?[]:i.filter(s=>this.canAssociateFeatureToLayer(e,s,r))}canAssociateFeatureToLayer(e,i,r){if(!this._canSupportAssociations([e,i]))return!1;const s=gv(e),n=gv(i);return r.some(o=>{const{type:a,direction:l}=o;return this._getRulesForAssociationType(a).some(c=>l==="to"?Ax(c,n,s):Ax(c,s,n))})}getFeatureSQL(e,i){const r=e.layerId.toString(),s=e.fieldsIndex?.normalizeFieldName("assetGroup"),n=e.fieldsIndex?.normalizeFieldName("assetType"),o=s?i.attributes[s]:null,a=n?i.attributes[n]:null,l=this.rulesHash[r];if(l){const c=l.assetGroupHash[o];if(c)return c.assetTypeHash[a]||null}return null}_initializeRulesTable(){const e={},i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const r of this.rules){if(r.ruleType===3){this.rulesCategorized.attachment.push(r);continue}if(r.ruleType===2){this.rulesCategorized.containment.push(r);continue}if(r.ruleType===1){this.rulesCategorized.connectivity.push(r);continue}this.rulesCategorized.connectivity.push(r);let s=[[0,1],[1,0]];r.ruleType===5&&(s=[[0,2],[2,0],[1,2],[2,1]]);for(const n of s){const o=n.shift(),a=n.shift();let l=!1;switch(r.ruleType){case 5:l=o===0||o===1;break;case 4:l=o===1}const c=i[o],d=r[c.networkSourceId]?.layerId.toString()??"",h=r[c.assetGroupId]?.assetGroupCode?.toString(),f=r[c.assetTypeId],m=f?.assetTypeCode?.toString(),y=i[a],v=r[y.networkSourceId]?.layerId.toString()??"",b=r[y.assetGroupId]?.assetGroupCode?.toString(),w=r[y.assetTypeId],x=w?.assetTypeCode?.toString(),S=e[d]??{assetGroupHash:{}};if(!(h&&m&&b&&x))continue;const $=S.assetGroupHash[h]??{assetTypeHash:{}},T=$.assetTypeHash[m]??{};if(T[v]=T[v]??{},l){T[d]=T[d]??{};const L=$0(`assetgroup = ${h}`,`assettype = ${m}`);w?.connectivityPolicy==="esriNECPEndVertex"?T[d].endVertex=T[d]?.endVertex?`${T[d].endVertex}`:`(${L})`:T[d].anyVertex=T[d].anyVertex?`${T[d].anyVertex}`:`(${L})`}const C=$0(`assetgroup = ${b}`,`assettype = ${x}`);w?.connectivityPolicy==="esriNECPEndVertex"?T[v].endVertex=T[v]?.endVertex?NF(T[v].endVertex,C):`(${C})`:T[v].anyVertex=T[v]?.anyVertex?NF(T[v].anyVertex,C):`(${C})`,$.assetTypeHash[m]=T,S.assetGroupHash[h]=$,e[d]=S}}this._set("rulesHash",e)}_getRulesForAssociationType(e){const{rulesCategorized:i}=this;switch(e){case"attachment":return i.attachment;case"containment":return i.containment;case"connectivity":case"junction-junction-connectivity":return i.connectivity.filter(r=>r.ruleType===1);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return i.connectivity.filter(r=>r.ruleType===4||r.ruleType===5);default:return[]}}_areSetsEqual(e,i){if(e.size!==i.size)return!1;for(const r of e)if(!i.has(r))return!1;return!0}_mergeAssetCodes(e){const i=new Map,r=new Set;for(const[s,n]of e){const o=new Set([s]);for(const[l,c]of e)s!==l&&!r.has(l)&&this._areSetsEqual(n,c)&&(o.add(l),r.add(l));const a=Array.from(o).sort().join(",");i.set(a,n)}return i}_canSupportAssociations(e){return e.every(i=>{const r=nae(i)?i.sourceLayer:i,[s,n]=zC(r);return s!=null&&n!=null})}};u([p({constructOnly:!0})],gp.prototype,"rulesLayer",void 0),u([p({constructOnly:!0})],gp.prototype,"rules",void 0),u([p({readOnly:!0})],gp.prototype,"rulesHash",void 0),u([p()],gp.prototype,"rulesCategorized",void 0),u([p({constructOnly:!0})],gp.prototype,"request",void 0),gp=u([M("esri.networks.RulesTable")],gp);let Pa=class extends Y{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};u([p({type:[Object],json:{write:!0}})],Pa.prototype,"conditionBarriers",void 0),u([p({type:[Object],json:{write:!0}})],Pa.prototype,"outputConditions",void 0),u([p({type:[Object],json:{write:!0}})],Pa.prototype,"functions",void 0),u([p({type:[Object],json:{write:!0}})],Pa.prototype,"functionBarriers",void 0),u([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Pa.prototype,"traversabilityScope",void 0),u([p({type:String,json:{write:!0}})],Pa.prototype,"shortestPathNetworkAttributeName",void 0),u([p({type:Boolean,json:{write:!0}})],Pa.prototype,"includeBarriers",void 0),u([p({type:Boolean,json:{write:!0}})],Pa.prototype,"validateConsistency",void 0),u([p({type:Boolean,json:{write:!0}})],Pa.prototype,"ignoreBarriersAtStartingPoints",void 0),Pa=u([M("esri.networks.support.TraceConfiguration")],Pa);const X8=Pa,mR=new We({Clean:"clean",Dirty:"dirty"}),Xp=new We({Physical:"physical",Virtual:"virtual"}),yR=new We({"Start and end":"start-and-end",Start:"start",Midspan:"midspan",End:"end"}),yk=new We({startingPoint:"starting-point",barrier:"barrier",stoppingPoint:"stopping-point"}),gk=new We({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation",path:"path",circuit:"circuit"}),DBe="{00000000-0000-0000-0000-000000000000}",FBe=new We({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),zBe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},ywt=new We({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let di=class extends X8{constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};u([p({type:[Object],json:{write:!0}})],di.prototype,"filterBarriers",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"arcadeExpressionBarrier",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"circuitName",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"domainNetworkName",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"filterBitsetNetworkAttributeName",void 0),u([p({type:[Object],json:{write:!0}})],di.prototype,"filterFunctionBarriers",void 0),u([p({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],di.prototype,"filterScope",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"includeContainers",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"includeContent",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"includeIsolated",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"includeStructures",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"allowIndeterminateFlow",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"includeUpToFirstSpatialContainer",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"inferConnectivity",void 0),u([p({type:Number,json:{write:!0}})],di.prototype,"maxHops",void 0),u([p({type:Object,json:{write:!0}})],di.prototype,"nearestNeighbor",void 0),u([p({type:Number,json:{write:!0}})],di.prototype,"numPaths",void 0),u([p({type:[Object],json:{write:!0}})],di.prototype,"outputFilterCategories",void 0),u([p({type:[Object],json:{write:!0}})],di.prototype,"outputFilters",void 0),u([p({type:[Object],json:{write:!0}})],di.prototype,"propagators",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"subnetworkName",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"targetTierName",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"diagramTemplateName",void 0),u([p({type:String,json:{write:!0}})],di.prototype,"tierName",void 0),u([p({type:Boolean,json:{write:!0}})],di.prototype,"validateLocatability",void 0),di=u([M("esri.networks.support.UNTraceConfiguration")],di);const jBe=di;let oo=class extends Rue{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?jBe.fromJSON(e):X8.fromJSON(e)}};u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],oo.prototype,"globalId",void 0),u([p({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],oo.prototype,"title",void 0),u([p({type:X8,json:{origins:{service:{read:!0,write:!0}},read:!1}})],oo.prototype,"traceConfiguration",void 0),u([Q("service","traceConfiguration")],oo.prototype,"readTraceConfiguration",null),u([p({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],oo.prototype,"creationDate",void 0),u([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],oo.prototype,"creator",void 0),u([p({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],oo.prototype,"description",void 0),u([p({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],oo.prototype,"minStartingPoints",void 0),u([p({json:{origins:{service:{read:!0,write:!0}},read:!1}})],oo.prototype,"resultTypes",void 0),u([p({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],oo.prototype,"tags",void 0),u([p({type:gk.apiValues,json:{type:gk.jsonValues,origins:{service:{read:gk.read,write:gk.write}},read:!1}})],oo.prototype,"traceType",void 0),oo=u([M("esri.networks.support.NamedTraceConfiguration")],oo);const VBe=oo;function UBe(t){const e=t?.fieldsIndex,i="fromnetworksourceid",r="fromglobalid",s="fromterminalid",n="fromfirstunit",o="fromnumunits",a="tonetworksourceid",l="toglobalid",c="toterminalid",d="tofirstunit",h="tonumunits",f="status",m="associationtype",y="iscontentvisible",v="percentalong",b="globalid";return{fromNetworkSourceId:e?.get(i)?.name??i,fromGlobalId:e?.get(r)?.name??r,fromTerminalId:e?.get(s)?.name??s,fromFirstUnit:e?.get(n)?.name??n,fromNumUnits:e?.get(o)?.name??o,toNetworkSourceId:e?.get(a)?.name??a,toGlobalId:e?.get(l)?.name??l,toTerminalId:e?.get(c)?.name??c,toFirstUnit:e?.get(d)?.name??d,toNumUnits:e?.get(h)?.name??h,status:e?.get(f)?.name??f,associationType:e?.get(m)?.name??m,isContentVisible:e?.get(y)?.name??y,percentAlong:e?.get(v)?.name??v,globalId:e?.get(t?.globalIdField??b)?.name??b}}function bwt(t,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in t.map?t.map.utilityNetworks??[]:[];for(const r of i)if(r.isUtilityLayer(e)){const s=e.fieldsIndex.get("assetgroup"),n=e.fieldsIndex.get("assettype");return[s?.name,n?.name].filter(o=>o!=null)}return[]}let Uo=class extends _e{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTable=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){this.associationsTable?.destroy()}async loadAssociationsTable(e){if(!this.associationsTable){const{associationsTableUrl:i}=this;if(!i)throw new R("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new Se({url:i})}return await this.associationsTable.load(e),this.associationsTable}async loadSubnetworksTable(e){if(!this.subnetworksTable){const{subnetworksTableUrl:i}=this;if(!i)throw new R("utility-network-system-layers:missing-subnetworks-table-url","Unable to load the subnetworks table, as the `subnetworksTableUrl` is not set.");this.subnetworksTable=new Se({url:i})}return await this.subnetworksTable.load(e),this.subnetworksTable}};u([p({constructOnly:!0})],Uo.prototype,"rulesTableId",void 0),u([p({constructOnly:!0})],Uo.prototype,"rulesTableUrl",void 0),u([p()],Uo.prototype,"subnetworksTable",void 0),u([p({constructOnly:!0})],Uo.prototype,"subnetworksTableId",void 0),u([p({constructOnly:!0})],Uo.prototype,"subnetworksTableUrl",void 0),u([p({constructOnly:!0})],Uo.prototype,"dirtyAreasLayerId",void 0),u([p({constructOnly:!0})],Uo.prototype,"dirtyAreasLayerUrl",void 0),u([p()],Uo.prototype,"associationsTable",void 0),u([p({constructOnly:!0})],Uo.prototype,"associationsTableId",void 0),u([p({constructOnly:!0})],Uo.prototype,"associationsTableUrl",void 0),Uo=u([M("esri.networks.support.NetworkSystemLayers")],Uo);let Mb=class extends Y{constructor(e){super(e),this.id=null,this.name=null}};u([p({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Mb.prototype,"id",void 0),u([p({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Mb.prototype,"name",void 0),u([p({type:Boolean,json:{write:!0}})],Mb.prototype,"isUpstreamTerminal",void 0),Mb=u([M("esri.networks.support.Terminal")],Mb);const BBe=Mb,vk=new We({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Rd=class extends Y{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};u([p({type:String,json:{write:!0}})],Rd.prototype,"defaultConfiguration",void 0),u([p({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Rd.prototype,"id",void 0),u([p({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Rd.prototype,"name",void 0),u([p({type:[BBe],json:{write:!0}})],Rd.prototype,"terminals",void 0),u([p({type:vk.apiValues,json:{type:vk.jsonValues,read:vk.read,write:vk.write}})],Rd.prototype,"traversabilityModel",void 0),Rd=u([M("esri.networks.support.TerminalConfiguration")],Rd);let ho=class extends Y{constructor(e){super(e),this.type="networkElement",this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};u([p({json:{write:!1}})],ho.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"assetGroupCode",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"assetTypeCode",void 0),u([p({type:String,json:{write:!0}})],ho.prototype,"globalId",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"networkSourceId",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"objectId",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"positionFrom",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"positionTo",void 0),u([p({type:Number,json:{write:!0}})],ho.prototype,"terminalId",void 0),ho=u([M("esri.rest.networks.support.NetworkElement")],ho);let qa=class extends ho{constructor(e){super(e),this.type="telecomNetworkElement",this.firstUnit=null,this.numUnits=null}};u([p({json:{write:!1}})],qa.prototype,"type",void 0),u([p({json:{write:!0}})],qa.prototype,"firstUnit",void 0),u([p({json:{write:!0}})],qa.prototype,"numUnits",void 0),qa=u([M("esri.rest.networks.support.TelecomNetworkElement")],qa);let _d=class extends Y{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,i){return new qa({networkSourceId:i.edgeNetworkSourceId,globalId:i.edgeGlobalId,objectId:i.edgeObjectId,positionFrom:i.edgePositionFrom,positionTo:i.edgePositionTo,firstUnit:i.edgeFirstUnit,numUnits:i.edgeNumUnits})}writeEdgeElement(e,i){i.edgeNetworkSourceId=e.networkSourceId,i.edgeGlobalId=e.globalId,i.edgeObjectId=e.objectId,i.edgePositionFrom=e.positionFrom,i.edgePositionTo=e.positionTo,i.edgeFirstUnit=e.firstUnit,i.edgeNumUnits=e.numUnits}readJunctionElement(e,i){return new qa({networkSourceId:i.junctionNetworkSourceId,globalId:i.junctionGlobalId,objectId:i.junctionObjectId,terminalId:i.junctionTerminalId,firstUnit:i.junctionFirstUnit,numUnits:i.junctionNumUnits})}writeJunctionElement(e,i){i.junctionNetworkSourceId=e.networkSourceId,i.junctionGlobalId=e.globalId,i.junctionObjectId=e.objectId,i.junctionTerminalId=e.terminalId,i.junctionFirstUnit=e.firstUnit,i.junctionNumUnits=e.numUnits}};u([p({type:qa,json:{read:{source:["edgeNetworkSourceId","edgeGlobalId","edgeObjectId","edgePositionFrom","edgePositionTo","edgeFirstUnit","edgeNumUnits"]},write:!0}})],_d.prototype,"edgeElement",void 0),u([Q("edgeElement")],_d.prototype,"readEdgeElement",null),u([oe("edgeElement")],_d.prototype,"writeEdgeElement",null),u([p({type:qa,json:{read:{source:["junctionNetworkSourceId","junctionGlobalId","junctionObjectId","junctionTerminalId","junctionFirstUnit","junctionNumUnits"]},write:!0}})],_d.prototype,"junctionElement",void 0),u([Q("junctionElement")],_d.prototype,"readJunctionElement",null),u([oe("junctionElement")],_d.prototype,"writeJunctionElement",null),_d=u([M("esri.networks.support.CircuitPathConnectivityElement")],_d);const qBe=_d;let $l=class extends Y{constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null,this.networkSourceId=null}};u([p({type:String,json:{write:!0}})],$l.prototype,"globalId",void 0),u([p({type:Boolean,json:{write:!0}})],$l.prototype,"isFilterBarrier",void 0),u([p({type:Number,json:{write:!0}})],$l.prototype,"percentAlong",void 0),u([p({type:Number,json:{write:!0}})],$l.prototype,"terminalId",void 0),u([p({type:yk.apiValues,json:{type:yk.jsonValues,read:{reader:yk.read,source:"traceLocationType"},write:{writer:yk.write,target:"traceLocationType"}}})],$l.prototype,"type",void 0),u([p({type:Number,json:{write:!0}})],$l.prototype,"firstUnit",void 0),u([p({type:Number,json:{write:!0}})],$l.prototype,"numUnits",void 0),u([p({type:Number})],$l.prototype,"networkSourceId",void 0),$l=u([M("esri.rest.networks.support.TraceLocation")],$l);const OZ=$l;let xd=class extends Y{constructor(e){super(e),this.pathId=null,this.order=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};u([p({type:Number,json:{write:!0}})],xd.prototype,"pathId",void 0),u([p({type:Number,json:{write:!0}})],xd.prototype,"order",void 0),u([p({type:OZ,json:{write:!0}})],xd.prototype,"startingPoint",void 0),u([p({type:OZ,json:{write:!0}})],xd.prototype,"stoppingPoint",void 0),u([p({type:[qBe],json:{write:!0}})],xd.prototype,"pathConnectivity",void 0),u([p({type:rr,json:{write:!0}})],xd.prototype,"geometry",void 0),xd=u([M("esri.networks.support.CircuitPath")],xd);const Q8=xd;let vp=class extends Y{constructor(e){super(e),this.sourceId=null,this.globalId=null,this.terminalId=1,this.firstUnit=1,this.numUnits=1}};u([p({type:Number,json:{write:!0}})],vp.prototype,"sourceId",void 0),u([p({type:String,json:{write:!0}})],vp.prototype,"globalId",void 0),u([p({type:Number,json:{write:!0}})],vp.prototype,"terminalId",void 0),u([p({type:Number,json:{write:!0}})],vp.prototype,"firstUnit",void 0),u([p({type:Number,json:{write:!0}})],vp.prototype,"numUnits",void 0),vp=u([M("esri.networks.support.CircuitLocation")],vp);const jC=vp;let Sd=class extends Y{constructor(e){super(e),this.name=null,this.globalId=null,this.providerId=null,this.consumerId=null,this.isReserved=!1,this.attributes=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};u([p({type:String,json:{write:!0}})],Sd.prototype,"name",void 0),u([p({type:String,json:{write:!0}})],Sd.prototype,"globalId",void 0),u([p({type:String})],Sd.prototype,"providerId",void 0),u([p({type:String})],Sd.prototype,"consumerId",void 0),u([p({type:Boolean,json:{write:!0}})],Sd.prototype,"isReserved",void 0),u([p({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],Sd.prototype,"attributes",void 0),Sd=u([M("esri.networks.support.Subcircuit")],Sd);const Dhe=Sd;let Mc=class extends Y{constructor(e){super(e),this.sectionId=null,this.role="start-and-end",this.sectionType="physical",this.startLocation=null,this.stopLocation=null,this.subcircuit=null,this.path=null}normalizeCtorArgs(e){if(e===void 0)return e;const{sectionId:i,startLocation:r,stopLocation:s,subcircuit:n}=e;return(r||s)&&n?(delete e.startLocation,delete e.stopLocation,X.getLogger(this).warn("Cannot instantiate CircuitSection with both start/stop locations and subcircuit.",`CircuitSection with ID '${i}' was defaulted to having a subcircuit only.`)):(r&&!s||!r&&s)&&!n&&X.getLogger(this).warn(`CircuitSection with ID '${i}' must have both start and stop locations.`,"Create/alter operations involving this section will fail unless both are populated."),e}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.subcircuit=null}setSubcircuit(e){this.subcircuit=e,this.startLocation=null,this.stopLocation=null}};u([p({type:Number,json:{write:!0}})],Mc.prototype,"sectionId",void 0),u([p({type:yR.apiValues,json:{type:yR.jsonValues,read:yR.read},readOnly:!0})],Mc.prototype,"role",void 0),u([p({type:Xp.apiValues,json:{type:Xp.jsonValues,read:Xp.read,write:Xp.write}})],Mc.prototype,"sectionType",void 0),u([p({type:jC,json:{write:!0}})],Mc.prototype,"startLocation",void 0),u([p({type:jC,json:{write:!0}})],Mc.prototype,"stopLocation",void 0),u([p({type:Dhe,json:{write:!0}})],Mc.prototype,"subcircuit",void 0),u([p({type:Q8,readOnly:!0})],Mc.prototype,"path",void 0),Mc=u([M("esri.networks.support.CircuitSection")],Mc);let Hr=class extends Y{constructor(e){super(e),this._sectionIdLookup=new Map,this.attributes=null,this.circuitManager=null,this.circuitType="physical",this.globalId=null,this.isDeleted=!1,this.lastExportedTime=null,this.lastVerifiedTime=null,this.name=null,this.sections=null,this.startLocation=null,this.status="dirty",this.stopLocation=null,this.subcircuits=[]}initialize(){this.addHandles([de(()=>this.sections,e=>{this._sectionIdLookup.clear(),e!=null&&Array.from(e.keys()).forEach(i=>this._sectionIdLookup.set(i.sectionId,i))},Fi)])}normalizeCtorArgs(e){if(e===void 0)return e;const{name:i,startLocation:r,stopLocation:s,sections:n}=e;return(r||s)&&n?(delete e.startLocation,delete e.stopLocation,X.getLogger(this).warn("Cannot instantiate Circuit with both start/stop locations and sections.",`Circuit '${i}' was defaulted to having sections only.`)):(r&&!s||!r&&s)&&!n&&X.getLogger(this).warn(`Non-sectioned circuit '${i}' must have both start and stop locations.`,"Create/alter operations involving this circuit will fail unless both are populated."),e}get isSectioned(){return this.startLocation==null&&this.stopLocation==null&&this.sections!=null}readSections(e,i){const{sectionOrder:r,sections:s}=i,n=new Map;if(s==null)return null;if(this._sectionIdLookup.clear(),s.forEach(o=>this._sectionIdLookup.set(o.sectionId,Mc.fromJSON(o))),r==null)return Array.from(this._sectionIdLookup.values()).forEach(o=>n.set(o,[])),n;for(const[o,a]of Object.entries(r)){const l=Number(o),c=this._sectionIdLookup.get(l);if(c==null)continue;const d=a.map(h=>this._sectionIdLookup.get(h)).filter(Ei);n.set(c,d)}return n}writeSections(e,i){const r={},s=[];e?.forEach((n,o)=>{const a=o.sectionId.toString(),l=n.map(c=>c.sectionId);r[a]=l,s.push(o.toJSON())}),i.sectionOrder=r,i.sections=s}getSectionById(e){return this._sectionIdLookup.get(e)??null}setStartStopLocations(e,i){this.startLocation=e,this.stopLocation=i,this.sections=null}setSections(e){this.sections=e,this.startLocation=null,this.stopLocation=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,i){this.attributes?this.attributes[e]=i:this.attributes={[e]:i}}};u([p({json:{write:{allowNull:!0,writer:(t,e)=>e.attributes=t??{}}}})],Hr.prototype,"attributes",void 0),u([p()],Hr.prototype,"circuitManager",void 0),u([p({type:Xp.apiValues,json:{type:Xp.jsonValues,read:Xp.read,write:Xp.write}})],Hr.prototype,"circuitType",void 0),u([p({type:String,json:{write:!0}})],Hr.prototype,"globalId",void 0),u([p({type:Boolean,readOnly:!0})],Hr.prototype,"isDeleted",void 0),u([p({type:Boolean,json:{write:!0},readOnly:!0})],Hr.prototype,"isSectioned",null),u([p({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],Hr.prototype,"lastExportedTime",void 0),u([p({type:Date,json:{read:{reader:t=>typeof t=="number"?new Date(t):null}},readOnly:!0})],Hr.prototype,"lastVerifiedTime",void 0),u([p({type:String,json:{write:!0}})],Hr.prototype,"name",void 0),u([p({json:{read:{source:["sectionOrder","sections"]},write:!0}})],Hr.prototype,"sections",void 0),u([Q("sections")],Hr.prototype,"readSections",null),u([oe("sections")],Hr.prototype,"writeSections",null),u([p({type:jC,json:{write:!0}})],Hr.prototype,"startLocation",void 0),u([p({type:mR.apiValues,json:{type:mR.jsonValues,read:mR.read}})],Hr.prototype,"status",void 0),u([p({type:jC,json:{write:!0}})],Hr.prototype,"stopLocation",void 0),u([p({type:[Dhe],json:{write:!0}})],Hr.prototype,"subcircuits",void 0),Hr=u([M("esri.networks.support.Circuit")],Hr);let Rm=class extends Y{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,i){return Hr.fromJSON(i)}};u([p({type:Hr,json:{write:!0,read:{source:["name","globalId","isSectioned","sectionOrder","startLocation","stopLocation","sections","subcircuits","lastVerifiedTime","lastExportedTime","circuitType","status"]}}})],Rm.prototype,"circuit",void 0),u([Q("circuit")],Rm.prototype,"readCircuit",null),u([p({type:rr,json:{write:!0}})],Rm.prototype,"geometry",void 0),u([p({type:Q8,json:{write:!0}})],Rm.prototype,"path",void 0),Rm=u([M("esri.rest.networks.circuits.support.CircuitTraceResult")],Rm);const GBe=Rm;let Cb=class extends Y{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};u([p({type:rr,json:{write:!0},readOnly:!0})],Cb.prototype,"line",void 0),u([p({type:ja,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Cb.prototype,"multipoint",void 0),u([p({type:vi,json:{write:!0},readOnly:!0})],Cb.prototype,"polygon",void 0),Cb=u([M("esri.rest.networks.support.AggregatedGeometry")],Cb);const HBe=Cb;let Pb=class extends Y{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};u([p({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],Pb.prototype,"functionType",void 0),u([p({type:String,json:{write:!0},readOnly:!0})],Pb.prototype,"networkAttributeName",void 0),u([p({type:Number,json:{write:!0},readOnly:!0})],Pb.prototype,"result",void 0),Pb=u([M("esri.rest.networks.support.FunctionResult")],Pb);const WBe=Pb;let Bo=class extends Y{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,i){return i.elements!=null&&Array.isArray(i.elements)?i.elements.map(r=>"firstUnit"in r&&"numUnits"in r?new qa({...r}):new ho({...r})):[]}writeNetworkElements(e,i){i.elements=e.map(r=>r.toJSON())}};u([p({type:HBe,json:{write:!0},readOnly:!0})],Bo.prototype,"aggregatedGeometry",void 0),u([p({type:[GBe],json:{write:!0},readOnly:!0})],Bo.prototype,"circuits",void 0),u([p({type:[ho],json:{write:!0},readOnly:!0})],Bo.prototype,"elements",void 0),u([Q("elements")],Bo.prototype,"readNetworkElements",null),u([oe("elements")],Bo.prototype,"writeNetworkElements",null),u([p({type:[WBe],json:{write:!0},readOnly:!0})],Bo.prototype,"globalFunctionResults",void 0),u([p({type:Boolean,json:{write:!0},readOnly:!0})],Bo.prototype,"kFeaturesForKNNFound",void 0),u([p({type:[Q8],json:{write:!0},readOnly:!0})],Bo.prototype,"paths",void 0),u([p({type:Boolean,json:{write:!0},readOnly:!0})],Bo.prototype,"startingPointsIgnored",void 0),u([p({type:[String],json:{write:!0},readOnly:!0})],Bo.prototype,"warnings",void 0),Bo=u([M("esri.rest.networks.support.TraceResult")],Bo);const JBe=Qr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Nm=class extends Bo{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:r}=await xe(this.statusUrl,i),s=r.traceResults?{...r.traceResults,...r}:r;return this.read(s),this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:r}=e;return new Promise((s,n)=>{this._clearTimer();const o=setInterval(()=>{this._timer||n(jt()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),s(this);break;case"job-waiting":case"job-executing":r&&r(this)}},a=>{this._clearTimer(),n(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([p({type:String,json:{write:!0}})],Nm.prototype,"statusUrl",void 0),u([Ee(JBe)],Nm.prototype,"status",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Nm.prototype,"submissionTime",void 0),u([p({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Nm.prototype,"lastUpdatedTime",void 0),Nm=u([M("esri.networks.support.TraceJobInfo")],Nm);let Aa=class extends NBe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}initialize(){this.addHandles(de(()=>[this.gdbVersion,this.historicMoment],()=>{this.networkSystemLayers.associationsTable&&(this.networkSystemLayers.associationsTable.gdbVersion!==this.gdbVersion&&(this.networkSystemLayers.associationsTable.gdbVersion=this.gdbVersion),this.networkSystemLayers.associationsTable.historicMoment!==this.historicMoment&&(this.networkSystemLayers.associationsTable.historicMoment=this.historicMoment))}))}get _rulesLayer(){const{gdbVersion:e,historicMoment:i}=this,r=this.networkSystemLayers.rulesTableUrl;return new Se({url:r,gdbVersion:e,historicMoment:i})}get _utilityLayerList(){const e=new Set;return this.dataElement?.domainNetworks?.map(i=>{i?.edgeSources?.map(({layerId:r,sourceId:s})=>{this._layerIdBySourceId.set(s,r),this._sourceIdByLayerId.set(r,s),e.add(r)}),i?.junctionSources?.map(({layerId:r,sourceId:s})=>{this._layerIdBySourceId.set(s,r),this._sourceIdByLayerId.set(r,s),e.add(r)})}),e}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new Uo({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(e=>Rd.fromJSON(e))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(e=>e.domainNetworkName)||[]}get hasTelecomNetwork(){return this.dataElement?.domainNetworks.some(e=>e.isTelecomNetwork)??!1}get associationsTable(){return this.networkSystemLayers.associationsTable}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await super._load(e),await Promise.all([this._loadNamedTraceConfigurationsFromNetwork(e),this.networkSystemLayers.loadAssociationsTable(e)])}getTerminalConfiguration(e){let i=null,r=null;const s=e.sourceLayer;let n=null;if(s?.type==="feature"){if(n=s.layerId,n===null)return null}else if(s?.type!=="subtype-sublayer"||(n=s?.parent?.layerId??null,n===null))return null;const o=e.attributes;if(o==null)return null;for(const c of Object.keys(o))c.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(c)),c.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(c));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const c of l){const d=c.junctionSources?.find(h=>h.layerId===n);if(d){const h=d.assetGroups?.find(f=>f.assetGroupCode===i);if(h){const f=h.assetTypes?.find(m=>m.assetTypeCode===r);if(f?.isTerminalConfigurationSupported){a=f.terminalConfigurationId;break}}}}if(a!=null){const c=this.dataElement.terminalConfigurations,d=c?.find(h=>h.terminalConfigurationId===a);return d?Rd.fromJSON(d):null}return null}getTierNames(e){return this.dataElement?.domainNetworks.find(r=>r.domainNetworkName===e)?.tiers?.map(r=>r.name)||[]}async getRulesTable(){const e=this._rulesLayer;e.loaded||await e.load();const i=this.dataElement?.domainNetworks;if(!i)return null;const r=i.flatMap(n=>[...n.edgeSources||[],...n.junctionSources||[]]),s=(await this._queryRulesTable(e)).map(n=>this._hydrateRuleInfo(e,r,n));return new gp({rulesLayer:e,rules:s})}async getCircuitManager(e){if(!this.hasTelecomNetwork)return null;const i=this.dataElement?.domainNetworks.find(s=>s.domainNetworkName===e&&s.isTelecomNetwork);if(!i)return null;const{default:r}=await K(()=>import("./CircuitManager-tLvDi9EL.js"),[]);return Ch(this._circuitManagerMap,e,()=>new r({utilityNetwork:this,telecomDomainNetwork:i}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;const{default:e}=await K(()=>import("./UnitIdentifierManager-74BXv0sq.js"),[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){if(!this.dataElement||e==null)return null;const i=this._terminalById.get(e);return i??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(s=>{this._terminalById.set(s.id,s)})}),this._terminalById.get(e))}isUtilityLayer(e){return"layerId"in e?e.layerId!=null&&this._utilityLayerList.has(e.layerId)&&(e.url?.startsWith(this.featureServiceUrl)??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(e.parent.url?.startsWith(this.featureServiceUrl)??!1)}async queryAssociations(e,i){const[{queryAssociations:r},{default:s}]=await Promise.all([K(()=>import("./queryAssociations-Bxi-HmTz.js"),__vite__mapDeps([277,278])),K(()=>import("./QueryAssociationsParameters-5uidAfpx.js"),[])]),n=s.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await r(this.networkServiceUrl,n,i)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:i},{default:r}]=await Promise.all([K(()=>import("./synthesizeAssociationGeometries-CjX0B0yu.js"),__vite__mapDeps([279,278])),K(()=>import("./SynthesizeAssociationGeometriesParameters-DZhLXWvj.js"),[])]),s=r.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async trace(e){const[{trace:i},{default:r}]=await Promise.all([K(()=>import("./trace-BxmYYNXa.js"),[]),K(()=>import("./TraceParameters-BB5bGTCK.js"),[])]),s=r.from(e);return s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment,i(this.networkServiceUrl,s)}async submitTraceJob(e){const[{submitTraceJob:i},{default:r}]=await Promise.all([K(()=>import("./trace-BxmYYNXa.js"),[]),K(()=>import("./TraceParameters-BB5bGTCK.js"),[])]),s=r.from(e);s.gdbVersion=this.gdbVersion,s.moment=this.historicMoment;const n=await i(this.networkServiceUrl,s);return new Nm({statusUrl:n})}async canAddAssociation(e){const i=await this.getRulesTable();if(!i)return!1;const{fromNetworkElement:r,toNetworkElement:s}=e;if(!r||!s)return!1;await i.load();let n=null;switch(e.associationType){case"containment":n=i.rulesCategorized.containment;break;case"attachment":n=i.rulesCategorized.attachment;break;default:n=i.rulesCategorized.connectivity}return n.some(o=>Ax(o,r,s))}generateAddAssociations(e){const{associationsTable:i}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:s,fromTerminalId:n,fromFirstUnit:o,fromNumUnits:a,toNetworkSourceId:l,toGlobalId:c,toTerminalId:d,toFirstUnit:h,toNumUnits:f,associationType:m,isContentVisible:y,percentAlong:v,globalId:b}=UBe(i);return{addFeatures:e.map(w=>{const x=new Wi({attributes:{[r]:w.fromNetworkElement?.networkSourceId,[s]:w.fromNetworkElement?.globalId,[n]:w.fromNetworkElement?.terminalId,[l]:w.toNetworkElement?.networkSourceId,[c]:w.toNetworkElement?.globalId,[d]:w.toNetworkElement?.terminalId,[m]:zBe[w.associationType],[y]:w.isContentVisible==null?void 0:w.isContentVisible?1:0,[v]:w.percentAlong,[b]:w.globalId}});return w.fromNetworkElement instanceof qa&&(x.attributes[o]=w.fromNetworkElement?.firstUnit,x.attributes[a]=w.fromNetworkElement?.numUnits),w.toNetworkElement instanceof qa&&(x.attributes[h]=w.toNetworkElement?.firstUnit,x.attributes[f]=w.toNetworkElement?.numUnits),x}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:i,associationsTableId:r}=this.networkSystemLayers,s={id:r,identifierFields:{globalIdField:i?.globalIdField??"globalid",objectIdField:i?.objectIdField??"objectid"}};if(this.dataElement?.schemaGeneration===-8){const o=this._generateDeleteTelecomAssociationPayload(e);return{...s,deleteAssociations:o}}const n=e.map(o=>({globalId:o.globalId}));return{...s,deleteFeatures:n}}generateCombineNetworkElements(e){return{id:this._ensureSingleSourceIdAsValidLayerId(e),combineGroupedObjects:[{globalIds:e.map(i=>i.globalId)}]}}generateDivideNetworkElements(e,i){return{id:this._ensureSingleSourceIdAsValidLayerId([e]),divideGroupedObjects:[{globalId:e.globalId,numUnits:i}]}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async loadSubnetworksTable(){return this.networkSystemLayers.loadSubnetworksTable()}async _loadNamedTraceConfigurationsFromNetwork(e){if(this.sharedNamedTraceConfigurations?.length===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),r=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const n=r?.find(o=>o.globalId===s.globalId);if(n){const o=n.write({},{origin:"service"});s.read(o,{origin:"service"})}}}_hydrateRuleInfo(e,i,r){const s=e.fieldsIndex,n=s.get("RULETYPE"),o=s.get("CREATIONDATE"),a=s.get("FROMNETWORKSOURCEID"),l=s.get("FROMASSETGROUP"),c=s.get("FROMASSETTYPE"),d=s.get("FROMTERMINALID"),h=s.get("TONETWORKSOURCEID"),f=s.get("TOASSETGROUP"),m=s.get("TOASSETTYPE"),y=s.get("TOTERMINALID"),v=s.get("VIANETWORKSOURCEID"),b=s.get("VIAASSETGROUP"),w=s.get("VIAASSETTYPE"),x=s.get("VIATERMINALID"),S=r.attributes[n.name],$=new Date(r.attributes[o.name]),T=[{networkSourceId:r.attributes[a.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[c.name],terminalId:r.attributes[d.name]},{networkSourceId:r.attributes[h.name],assetGroupId:r.attributes[f.name],assetTypeId:r.attributes[m.name],terminalId:r.attributes[y.name]},{networkSourceId:r.attributes[v.name],assetGroupId:r.attributes[b.name],assetTypeId:r.attributes[w.name],terminalId:r.attributes[x.name]}],C={ruleType:S,creationDate:$};for(const L of[0,1,2]){if(S!==5&&L===2)continue;const N=T[L],D=i.find(A=>A.sourceId===N.networkSourceId),F=D?.assetGroups.find(A=>A.assetGroupCode===N.assetGroupId),W=F?.assetTypes.find(A=>A.assetTypeCode===N.assetTypeId),Z=this._getTerminal(W,N);let V="";switch(L){case 0:V="from";break;case 1:V="to";break;case 2:V="via"}C[`${V}NetworkSource`]=D,C[`${V}AssetGroup`]=F,C[`${V}AssetType`]=W,C[`${V}Terminal`]=Z?.toJSON()}return C}_getTerminal(e,i){const r=e?.terminalConfigurationId;return this.terminalConfigurations?.find(n=>n.id===r)?.terminals?.find(n=>n.id===i.terminalId)??null}async _queryRulesTable(e){const{gdbVersion:i,historicMoment:r}=this,s=new Te({where:"1=1",outFields:["*"],gdbVersion:i,historicMoment:r});return(await mde(e,s)).features}_generateDeleteTelecomAssociationPayload(e){return e.map(i=>({globalId:i.globalId??DBe,associationType:FBe.toJSON(i.associationType),fromSourceId:i.fromNetworkElement.networkSourceId,fromGlobalId:i.fromNetworkElement.globalId,fromTerminalId:i.fromNetworkElement.terminalId,toSourceId:i.toNetworkElement.networkSourceId,toGlobalId:i.toNetworkElement.globalId,toTerminalId:i.toNetworkElement.terminalId}))}_ensureSingleSourceIdAsValidLayerId(e){const i=r_e(e.map(n=>n.networkSourceId));if(i.length>1)throw new R("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");const r=i[0],s=this.getLayerIdBySourceId(r);if(s==null)throw new R("utility-network:invalid-source-id","'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.");return s}};u([p({readOnly:!0})],Aa.prototype,"_rulesLayer",null),u([p({type:[VBe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],Aa.prototype,"sharedNamedTraceConfigurations",void 0),u([p({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],Aa.prototype,"type",void 0),u([p({readOnly:!0})],Aa.prototype,"serviceTerritoryFeatureLayerId",null),u([p({readOnly:!0})],Aa.prototype,"networkSystemLayers",null),u([p({readOnly:!0})],Aa.prototype,"terminalConfigurations",null),u([p({readOnly:!0})],Aa.prototype,"domainNetworkNames",null),u([p({readOnly:!0})],Aa.prototype,"hasTelecomNetwork",null),u([p({readOnly:!0,json:{read:!1}})],Aa.prototype,"associationsTable",null),Aa=u([M("esri.networks.UtilityNetwork")],Aa);const Fhe=Aa,ZBe=Object.freeze(Object.defineProperty({__proto__:null,default:Fhe},Symbol.toStringTag,{value:"Module"}));let Ab=class extends Le(Y){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};u([p({type:String,json:{write:{isRequired:!0}}})],Ab.prototype,"expression",void 0),u([p({type:["number","string"],json:{write:!0}})],Ab.prototype,"returnType",void 0),u([p({type:String,json:{write:!0}})],Ab.prototype,"title",void 0),Ab=u([M("esri.webdoc.geotriggersInfo.ExpressionInfo")],Ab);const zhe=Ab,bk=new We({deviceLocation:"device-location"});let Lx=class extends Le(Y){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};u([p({type:zhe,json:{write:!0}})],Lx.prototype,"filterExpression",void 0),u([p({type:bk.apiValues,readOnly:!0,json:{type:bk.jsonValues,read:bk.read,write:bk.write}})],Lx.prototype,"type",void 0),Lx=u([M("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],Lx);const YBe=Lx;let Ox=class extends Le(Y){constructor(e){super(e),this.geometry=null,this.where=null}};u([p({types:k_,json:{read:Nu,write:!0}})],Ox.prototype,"geometry",void 0),u([p({type:String,json:{write:!0}})],Ox.prototype,"where",void 0),Ox=u([M("esri.webdoc.geotriggersInfo.FeatureFilter")],Ox);const KBe=Ox;let Lb=class extends Le(Y){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};u([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Lb.prototype,"layerId",void 0),u([p({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Lb.prototype,"layerUrl",void 0),u([Ee({featureLayer:"feature-layer"},{readOnly:!0})],Lb.prototype,"type",void 0),Lb=u([M("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Lb);const XBe=Lb;let Dm=class extends Le(Y){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};u([p({type:XBe,json:{write:{isRequired:!0}}})],Dm.prototype,"fenceSource",void 0),u([p({type:KBe,json:{write:!0}})],Dm.prototype,"filter",void 0),u([p({type:Number,json:{write:!0}})],Dm.prototype,"bufferDistance",void 0),u([Ee({features:"features"},{readOnly:!0})],Dm.prototype,"type",void 0),Dm=u([M("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Dm);const QBe=Dm;let PE=class extends Le(Y){constructor(e){super(e),this.type="fence"}};u([Ee({fence:"fence"},{readOnly:!0})],PE.prototype,"type",void 0),PE=u([M("esri.webdoc.geotriggersInfo.Geotrigger")],PE);const jhe=PE;let Rx=class extends Le(Y){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};u([p({type:zhe,json:{write:!0}})],Rx.prototype,"expressionInfo",void 0),u([p({type:[String],json:{write:!0}})],Rx.prototype,"requestedActions",void 0),Rx=u([M("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Rx);const eqe=Rx,tqe=new We({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),iqe=new We({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),wk=new We({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Il=class extends jhe{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};u([Ee(tqe)],Il.prototype,"enterExitRule",void 0),u([p({type:YBe,json:{write:{isRequired:!0}}})],Il.prototype,"feed",void 0),u([Ee(iqe)],Il.prototype,"feedAccuracyMode",void 0),u([p({type:wk.apiValues,json:{type:wk.jsonValues,read:wk.read,write:{writer:wk.write,isRequired:!0}}})],Il.prototype,"fenceNotificationRule",void 0),u([p({type:QBe,json:{write:{isRequired:!0}}})],Il.prototype,"fenceParameters",void 0),u([p({type:String,json:{write:!0}})],Il.prototype,"name",void 0),u([p({type:eqe,json:{write:!0}})],Il.prototype,"notificationOptions",void 0),u([Ee({fence:"fence"},{readOnly:!0})],Il.prototype,"type",void 0),Il=u([M("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Il);const rqe=Il,sqe={base:jhe,key:"type",typeMap:{fence:rqe}};let AE=class extends Le(Y){constructor(e){super(e),this.geotriggers=null}};u([p({types:[sqe],json:{write:{isRequired:!0}}})],AE.prototype,"geotriggers",void 0),AE=u([M("esri.webdoc.GeotriggersInfo")],AE);const nqe=AE;let LE=class extends Le(Y){constructor(e){super(e),this.enabled=!0}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],LE.prototype,"enabled",void 0),LE=u([M("esri.webdoc.ips.AppleIPSProperties")],LE);const oqe=LE;let OE=class extends Le(Y){constructor(e){super(e),this.enabled=!0}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],OE.prototype,"enabled",void 0),OE=u([M("esri.webdoc.ips.GNSSProperties")],OE);const aqe=OE;let Ob=class extends Le(Y){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units="meter"}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],Ob.prototype,"enabled",void 0),u([p({type:Number,nonNullable:!0,json:{write:!0}})],Ob.prototype,"distance",void 0),u([p({type:["feet","meter"],nonNullable:!0,json:{write:!0}})],Ob.prototype,"units",void 0),Ob=u([M("esri.webdoc.ips.PathSnappingProperties")],Ob);const lqe=Ob;let RE=class extends Le(Y){constructor(e){super(e),this.enabled=!0}};u([p({type:Boolean,nonNullable:!0,json:{write:!0}})],RE.prototype,"enabled",void 0),RE=u([M("esri.webdoc.ips.SmoothingProperties")],RE);const cqe=RE;let Fm=class extends Le(Y){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};u([p({type:oqe,json:{name:"AppleIPS",write:!0}})],Fm.prototype,"appleIPS",void 0),u([p({type:aqe,json:{name:"GNSS",write:!0}})],Fm.prototype,"gnss",void 0),u([p({type:cqe,json:{write:!0}})],Fm.prototype,"smoothing",void 0),u([p({type:lqe,json:{write:!0}})],Fm.prototype,"pathSnapping",void 0),Fm=u([M("esri.webdoc.ips.Configuration")],Fm);const uqe=Fm;let Rb=class extends Le(Y){constructor(e){super(e),this.portalItem=null}readPortalItem(e,i,r){const{itemId:s}=i;if(s)return new Be({id:s,portal:r?.portal})}writePortalItem(e,i){e?.id&&(i.itemId=e.id)}};u([p({type:Be,json:{write:{isRequired:!0}}})],Rb.prototype,"portalItem",void 0),u([Q("portalItem",["itemId"])],Rb.prototype,"readPortalItem",null),u([oe("portalItem",{itemId:{type:String}})],Rb.prototype,"writePortalItem",null),Rb=u([M("esri.webdoc.ips.PositioningService")],Rb);const dqe=Rb;let Nx=class extends Le(Y){constructor(e){super(e),this.positioningService=null,this.configuration=null}};u([p({type:dqe,json:{write:{isRequired:!0}}})],Nx.prototype,"positioningService",void 0),u([p({type:uqe,json:{write:!0}})],Nx.prototype,"configuration",void 0),Nx=u([M("esri.webdoc.IPSInfo")],Nx);const hqe=Nx,pqe={currentVersion:Iue,createInitialViewProperties:()=>new CC,parseVersion:k0.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},fqe=ue.ofType(Fhe);var gw;let zm=(gw=class extends eVe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const i of e)i.destroy();this.utilityNetworks.destroy()}}get context(){return pqe}loadAll(){return L_(this,e=>{e(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new R("webmap:empty-resource","Expected a JSON resource but got nothing")}},gw.VERSION=Iue,gw);u([p({type:nqe,json:{write:!0}})],zm.prototype,"geotriggersInfo",void 0),u([p({type:hqe,json:{write:!0,name:"mapIPSInfo"}})],zm.prototype,"ipsInfo",void 0),u([p({json:{write:!0}})],zm.prototype,"presentation",void 0),u([p({type:fqe,json:{read:!0,write:!0}})],zm.prototype,"utilityNetworks",void 0),zm=u([M("esri.WebMap")],zm);const mqe=zm,Pr=(t,e)=>{const r=c_().manager;r.onLoaded(()=>r.onLifecycle(()=>ks(t,e,s.emit)));const s=WV();return s},Vhe=(t,e)=>i=>yqe(i,t);var by,vw,Vp;class e9 extends SA{constructor(i,r){super(i);_t(this,by);_t(this,vw);_t(this,Vp);this.Y=new Map,this.A=void 0,mt(this,vw,mte());const s=this;mt(s,Vp,r),s.Z(),s.setProvisionalExports(Uhe(i,new WeakRef(s),i.M.length-1,s.instance,s.Y),!1),GV(i,n=>{if(n){const o=de(()=>i[n],a=>{if(a===s.instance)return;const l=s.instance;s.exports=a,s.instance=a,s.Y.forEach((c,d)=>i.requestUpdate(c,l[d])),pe(s,by)&&l.destroy(),mt(s,by,!1)},{sync:!0});s.onDestroy(o.remove)}},s.exports)}get exports(){return yte(pe(this,vw)),super.exports}set exports(i){super.exports=i,pe(this,vw).notify()}Z(){var r;const i=this;i.instance="prototype"in pe(i,Vp)&&"declaredClass"in pe(i,Vp).prototype?new(pe(i,Vp)):pe(r=i,Vp).call(r),mt(i,by,!0)}hostConnected(){this.exports=this.instance}hostDestroy(){pe(this,by)&&this.instance.destroy?.()}}by=new WeakMap,vw=new WeakMap,Vp=new WeakMap;const yqe=l2(e9),Uhe=(t,e,i,r,s)=>new Proxy(r,{get:(n,o)=>{const a=n[o];if(typeof o=="symbol"||s.has(o))return a;const l=t.M[i];return l.A=o,HV(t,c=>{if(l.A=void 0,c!==void 0){const d=c.key;s.set(o,d);const h=t.constructor.getPropertyOptions(d),f=o!==d&&d.toLowerCase().includes("disable");gqe(e,h,o,d,f),h.i===void 0&&vqe(h,i,o,f)}},a)}}),gqe=(t,e,i,r,s,n)=>n=de(()=>{const o=t.deref();return o===void 0||o.component.manager.destroyed?n=n.remove():o.exports[i]},(o,a)=>{if(!n)return;t.deref().component?.requestUpdate(r,s?!a:a),e.c=!1},{sync:!0}),vqe=(t,e,i,r)=>{t.d.get=function(){const s=this.M[e]?.exports[i];return r?!s:s},t.d.set=function(s){const n=this.M[e];n.A!==i&&(n.exports[i]=r?!s:s)}},bqe=t=>t.Y,wqe=(t,e)=>{const i=e.manager.useRefSync(t);i?.hostDestroy(),i?.Z(),i?.hostConnected()};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const _qe=Qe`@charset "UTF-8";@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-view{--esri-view-outline-color: var(--calcite-color-brand);--esri-view-outline: 2px solid var(--esri-view-outline-color);--esri-view-outline-offset: -2px;margin:0;padding:0;display:flex;height:100%;width:100%}.esri-view .esri-view-user-storage{overflow:hidden}.esri-view .esri-view-root{-webkit-tap-highlight-color:var(--calcite-color-foreground-1);-webkit-tap-highlight-color:transparent;border:none;flex:100%;margin:0;padding:0;position:relative}.esri-view .esri-view-surface{-webkit-user-select:none;user-select:none;direction:ltr;border:none;outline:0;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-view .esri-view-surface--touch-none{touch-action:none}.esri-view .esri-view-surface--touch-pan{touch-action:pan-x pan-y}.esri-view .esri-view-surface:focus:after{box-sizing:border-box;z-index:999;outline:var(--esri-view-outline);outline-offset:var(--esri-view-outline-offset);content:"";pointer-events:none;width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.esri-view .esri-view-surface[data-navigating=true]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=copy]{cursor:copy}.esri-view .esri-view-surface[data-cursor=crosshair]{cursor:crosshair}.esri-view .esri-view-surface[data-cursor=help]{cursor:help}.esri-view .esri-view-surface[data-cursor=move]{cursor:move}.esri-view .esri-view-surface[data-cursor=pointer]{cursor:pointer}.esri-view .esri-view-surface[data-cursor=progress]{cursor:progress}.esri-view .esri-view-surface[data-cursor=grab]{cursor:grab}.esri-view .esri-view-surface[data-cursor=grabbing]{cursor:grabbing}.esri-view .esri-view-surface[data-cursor=n-resize]{cursor:n-resize}.esri-view .esri-view-surface[data-cursor=e-resize]{cursor:e-resize}.esri-view .esri-view-surface[data-cursor=s-resize]{cursor:s-resize}.esri-view .esri-view-surface[data-cursor=w-resize]{cursor:w-resize}.esri-view .esri-view-surface[data-cursor=ne-resize]{cursor:ne-resize}.esri-view .esri-view-surface[data-cursor=nw-resize]{cursor:nw-resize}.esri-view .esri-view-surface[data-cursor=se-resize]{cursor:se-resize}.esri-view .esri-view-surface[data-cursor=sw-resize]{cursor:sw-resize}.esri-view .esri-view-surface[data-cursor=ew-resize]{cursor:ew-resize}.esri-view .esri-view-surface[data-cursor=ns-resize]{cursor:ns-resize}.esri-view .esri-view-surface[data-cursor=nesw-resize]{cursor:nesw-resize}.esri-view .esri-view-surface[data-cursor=nwse-resize]{cursor:nwse-resize}.esri-view .esri-view-surface[data-cursor=none]{cursor:none}.esri-view .esri-display-object,.esri-view .esri-bitmap{-webkit-user-drag:none;-webkit-user-select:none;user-select:none;border:none;margin:0;padding:0;position:absolute}.esri-view .esri-bitmap{transform-origin:0 0;max-width:none}:root{view-transition-name:none}::view-transition{pointer-events:none}.esri-ui{box-sizing:border-box;z-index:0;pointer-events:none;contain:layout;font-size:var(--calcite-font-size);position:absolute;inset:0;overflow:hidden;container:esri-view-canvas/size}.esri-ui calcite-flow,.esri-ui calcite-panel{z-index:1;position:relative}.esri-ui .esri-component{pointer-events:auto}.esri-ui .esri-fov-overlay-outer{pointer-events:none;place-content:center;width:100%;height:100%;display:grid}.esri-ui .esri-fov-overlay{text-shadow:0 0 1px var(--calcite-color-foreground-1),0 0 2px var(--calcite-color-foreground-1),0 0 3px var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);font-size:var(--calcite-font-size-3);-webkit-user-select:none;user-select:none;pointer-events:none;flex-direction:row;align-items:center;gap:7px;animation:1s forwards fadeInAnimation;display:flex}.esri-ui .esri-fov-overlay-reset{cursor:pointer;pointer-events:auto}.esri-ui .esri-fov-overlay-text{pointer-events:none}@keyframes fadeInAnimation{0%{opacity:0}to{opacity:1}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}.esri-ui-corner{display:flex;position:absolute}.esri-ui-inner-container{position:absolute;inset:0}.esri-ui-manual-container>.esri-component{position:absolute}.esri-ui-manual-container .esri-swipe{z-index:-1}.esri-ui-top-left,.esri-ui-top-right{flex-flow:column}.esri-ui-top-left{align-items:flex-start;top:0;left:0}.esri-ui-top-right{align-items:flex-end;top:0;right:0}.esri-ui-bottom-left,.esri-ui-bottom-right{flex-flow:row;align-items:flex-end}.esri-ui-bottom-right{flex-flow:row-reverse;bottom:0;right:0}.esri-ui-bottom-right .esri-component{margin-left:10px}.esri-ui-top-right .esri-component,.esri-ui-top-left .esri-component{margin-bottom:10px}.esri-ui-bottom-left{bottom:0;left:0}.esri-ui-bottom-left .esri-component{margin-right:10px}:dir(rtl) .esri-ui-top-left{align-items:flex-end}:dir(rtl) .esri-ui-top-right{align-items:flex-start}:dir(rtl) .esri-ui-bottom-left{flex-direction:row-reverse}:dir(rtl) .esri-ui-bottom-right{flex-direction:row}.esri-zoom-box__container{width:100%;height:100%;position:relative}.esri-zoom-box__overlay{cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0}.esri-zoom-box__overlay-background{fill:#0000001a}.esri-zoom-box__outline{fill:var(--calcite-color-transparent);stroke:var(--calcite-color-brand);stroke-dasharray:1 1;stroke-width:var(--calcite-spacing-base)}.esri-overlay-surface{z-index:0;pointer-events:none;-webkit-user-select:none;user-select:none;border:none;width:100%;height:100%;margin:0;padding:0;position:absolute;top:0;left:0;overflow:clip}.esri-text-overlay-item{white-space:nowrap;font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight);display:block;position:absolute;overflow:hidden}.esri-text-overlay-item-anchor-bottom{transform:translate(-50%,-100%)}.esri-text-overlay-item-anchor-bottom-right{transform:translate(-100%,-100%)}.esri-text-overlay-item-anchor-bottom-left{transform:translateY(-100%)}.esri-text-overlay-item-anchor-top{transform:translate(-50%)}.esri-text-overlay-item-anchor-top-right{transform:translate(-100%)}.esri-text-overlay-item-anchor-top-left{transform:translate(0)}.esri-text-overlay-item-anchor-center{transform:translate(-50%,-50%)}.esri-text-overlay-item-anchor-right{transform:translate(-100%,-50%)}.esri-text-overlay-item-anchor-left{transform:translateY(-50%)}.esri-line-overlay-item,.esri-outline-overlay-item,.esri-box-overlay-item{white-space:nowrap;display:block;position:absolute;overflow:hidden}.esri-shadow-cast__tooltip{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-shadow-cast__tooltip__content{margin-top:-8px-var(--calcite-spacing-xxs);padding:var(--calcite-spacing-xs) var(--calcite-spacing-sm);background:var(--calcite-color-foreground-1);width:max-content;position:absolute;transform:translate(-50%,-100%)}.esri-shadow-cast__tooltip__content:after{content:"";border:8px solid var(--calcite-color-transparent);border-top-color:var(--calcite-color-foreground-1);box-sizing:inherit;width:0;height:0;display:block;position:absolute;bottom:1px;left:50%;transform:translate(-50%,100%)}.esri-attribution{position:absolute;bottom:0;left:0;right:0;background-color:var(--calcite-color-transparent-tint)!important;flex-flow:row;justify-content:space-between;align-items:center;font-size:var(--calcite-font-size-sm)!important;line-height:var(--calcite-font-line-height-fixed-base)!important;display:flex}.esri-attribution__link{color:var(--calcite-color-text-1)}.esri-attribution__link:hover,.esri-attribution__link:active,.esri-attribution__link:visited,.esri-attribution__link:focus{color:var(--calcite-color-text-1)}.esri-attribution__sources{text-overflow:ellipsis;white-space:nowrap;flex:1 0;align-self:flex-start;padding:0 5px;font-weight:var(--calcite-font-weight-light);overflow:hidden}.esri-attribution__sources[role=button]{font-size:1em}.esri-attribution__powered-by{color:var(--calcite-color-text-2);text-align:right;white-space:nowrap;align-self:flex-end;padding:0 5px;font-weight:var(--calcite-font-weight-normal)}.esri-attribution--open{z-index:2}.esri-attribution__sources--open{white-space:normal}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}.esri-hidden{display:none!important}[class^=esri-icon-],[class*=" esri-icon-"]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:var(--calcite-font-weight-normal);line-height:1;font-family:CalciteWebCoreIcons!important}.esri-icon-close:before{content:"";color:inherit}.esri-icon-drag-horizontal:before{content:"";color:inherit}.esri-icon-drag-vertical:before{content:"";color:inherit}.esri-icon-handle-horizontal:before{content:"";color:inherit}.esri-icon-handle-vertical:before{content:"";color:inherit}.esri-icon-check-mark:before{content:"";color:inherit}.esri-icon-left-triangle-arrow:before{content:"";color:inherit}.esri-icon-right-triangle-arrow:before{content:"";color:inherit}.esri-icon-down-arrow:before{content:"";color:inherit}.esri-icon-up-arrow:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-left:before{content:"";color:inherit}.esri-icon-overview-arrow-bottom-right:before{content:"";color:inherit}.esri-icon-overview-arrow-top-left:before{content:"";color:inherit}.esri-icon-overview-arrow-top-right:before{content:"";color:inherit}.esri-icon-maximize:before{content:"";color:inherit}.esri-icon-minimize:before{content:"";color:inherit}.esri-icon-checkbox-unchecked:before{content:"";color:inherit}.esri-icon-checkbox-checked:before{content:"";color:inherit}.esri-icon-radio-unchecked:before{content:"";color:inherit}.esri-icon-radio-checked:before{content:"";color:inherit}.esri-icon-up-arrow-circled:before{content:"";color:inherit}.esri-icon-down-arrow-circled:before{content:"";color:inherit}.esri-icon-left-arrow-circled:before{content:"";color:inherit}.esri-icon-right-arrow-circled:before{content:"";color:inherit}.esri-icon-zoom-out-fixed:before{content:"";color:inherit}.esri-icon-zoom-in-fixed:before{content:"";color:inherit}.esri-icon-refresh:before{content:"";color:inherit}.esri-icon-edit:before{content:"";color:inherit}.esri-icon-authorize:before{content:"";color:inherit}.esri-icon-map-pin:before{content:"";color:inherit}.esri-icon-blank-map-pin:before{content:"";color:inherit}.esri-icon-table:before{content:"";color:inherit}.esri-icon-plus:before{content:"+";color:inherit}.esri-icon-minus:before{content:"";color:inherit}.esri-icon-beginning:before{content:"";color:inherit}.esri-icon-reverse:before{content:"";color:inherit}.esri-icon-pause:before{content:"";color:inherit}.esri-icon-play:before{content:"";color:inherit}.esri-icon-forward:before{content:"";color:inherit}.esri-icon-end:before{content:"";color:inherit}.esri-icon-erase:before{content:"";color:inherit}.esri-icon-up-down-arrows:before{content:"";color:inherit}.esri-icon-left:before{content:"";color:inherit}.esri-icon-right:before{content:"";color:inherit}.esri-icon-announcement:before{content:"";color:inherit}.esri-icon-notice-round:before{content:"";color:inherit}.esri-icon-notice-triangle:before{content:"";color:inherit}.esri-icon-home:before{content:"";color:inherit}.esri-icon-locate:before{content:"";color:inherit}.esri-icon-expand:before{content:"";color:inherit}.esri-icon-collapse:before{content:"";color:inherit}.esri-icon-layer-list:before{content:"";color:inherit}.esri-icon-basemap:before{content:"";color:inherit}.esri-icon-globe:before{content:"";color:inherit}.esri-icon-applications:before{content:"";color:inherit}.esri-icon-arrow-up-circled:before{content:"";color:inherit}.esri-icon-arrow-down-circled:before{content:"";color:inherit}.esri-icon-arrow-left-circled:before{content:"";color:inherit}.esri-icon-arrow-right-circled:before{content:"";color:inherit}.esri-icon-minus-circled:before{content:"";color:inherit}.esri-icon-plus-circled:before{content:"";color:inherit}.esri-icon-add-attachment:before{content:"";color:inherit}.esri-icon-attachment:before{content:"";color:inherit}.esri-icon-calendar:before{content:"";color:inherit}.esri-icon-close-circled:before{content:"";color:inherit}.esri-icon-browser:before{content:"";color:inherit}.esri-icon-collection:before{content:"";color:inherit}.esri-icon-comment:before{content:"";color:inherit}.esri-icon-configure-popup:before{content:"";color:inherit}.esri-icon-contact:before{content:"";color:inherit}.esri-icon-dashboard:before{content:"";color:inherit}.esri-icon-deny:before{content:"";color:inherit}.esri-icon-description:before{content:"";color:inherit}.esri-icon-directions:before{content:"";color:inherit}.esri-icon-directions2:before{content:"";color:inherit}.esri-icon-documentation:before{content:"";color:inherit}.esri-icon-duplicate:before{content:"";color:inherit}.esri-icon-review:before{content:"";color:inherit}.esri-icon-environment-settings:before{content:"";color:inherit}.esri-icon-error:before{content:"";color:inherit}.esri-icon-error2:before{content:"";color:inherit}.esri-icon-experimental:before{content:"";color:inherit}.esri-icon-feature-layer:before{content:"";color:inherit}.esri-icon-filter:before{content:"";color:inherit}.esri-icon-grant:before{content:"";color:inherit}.esri-icon-group:before{content:"";color:inherit}.esri-icon-key:before{content:"";color:inherit}.esri-icon-labels:before{content:"";color:inherit}.esri-icon-tag:before{content:"";color:inherit}.esri-icon-layers:before{content:"";color:inherit}.esri-icon-left-arrow:before{content:"";color:inherit}.esri-icon-right-arrow:before{content:"";color:inherit}.esri-icon-link-external:before{content:"";color:inherit}.esri-icon-link:before{content:"";color:inherit}.esri-icon-loading-indicator:before{content:"";color:inherit}.esri-icon-maps:before{content:"";color:inherit}.esri-icon-marketplace:before{content:"";color:inherit}.esri-icon-media:before{content:"";color:inherit}.esri-icon-media2:before{content:"";color:inherit}.esri-icon-menu:before{content:"";color:inherit}.esri-icon-mobile:before{content:"";color:inherit}.esri-icon-phone:before{content:"";color:inherit}.esri-icon-navigation:before{content:"";color:inherit}.esri-icon-pan:before{content:"";color:inherit}.esri-icon-printer:before{content:"";color:inherit}.esri-icon-pie-chart:before{content:"";color:inherit}.esri-icon-chart:before{content:"";color:inherit}.esri-icon-line-chart:before{content:"";color:inherit}.esri-icon-question:before{content:"";color:inherit}.esri-icon-resend-invitation:before{content:"";color:inherit}.esri-icon-rotate:before{content:"";color:inherit}.esri-icon-save:before{content:"";color:inherit}.esri-icon-settings:before{content:"";color:inherit}.esri-icon-settings2:before{content:"";color:inherit}.esri-icon-share:before{content:"";color:inherit}.esri-icon-sign-out:before{content:"";color:inherit}.esri-icon-support:before{content:"";color:inherit}.esri-icon-user:before{content:"";color:inherit}.esri-icon-time-clock:before{content:"";color:inherit}.esri-icon-trash:before{content:"";color:inherit}.esri-icon-upload:before{content:"";color:inherit}.esri-icon-download:before{content:"";color:inherit}.esri-icon-zoom-in-magnifying-glass:before{content:"";color:inherit}.esri-icon-search:before{content:"";color:inherit}.esri-icon-zoom-out-magnifying-glass:before{content:"";color:inherit}.esri-icon-locked:before{content:"";color:inherit}.esri-icon-unlocked:before{content:"";color:inherit}.esri-icon-favorites:before{content:"";color:inherit}.esri-icon-compass:before{content:"";color:inherit}.esri-icon-down:before{content:"";color:inherit}.esri-icon-up:before{content:"";color:inherit}.esri-icon-chat:before{content:"";color:inherit}.esri-icon-dock-bottom:before{content:"";color:inherit}.esri-icon-dock-left:before{content:"";color:inherit}.esri-icon-dock-right:before{content:"";color:inherit}.esri-icon-organization:before{content:"";color:inherit}.esri-icon-north-navigation:before{content:"";color:inherit}.esri-icon-locate-circled:before{content:"";color:inherit}.esri-icon-dial:before{content:"";color:inherit}.esri-icon-polygon:before{content:"";color:inherit}.esri-icon-polyline:before{content:"";color:inherit}.esri-icon-visible:before{content:"";color:inherit}.esri-icon-non-visible:before{content:"";color:inherit}.esri-icon-link-vertical:before{content:"";color:inherit}.esri-icon-unlocked-link-vertical:before{content:"";color:inherit}.esri-icon-link-horizontal:before{content:"";color:inherit}.esri-icon-unlocked-link-horizontal:before{content:"";color:inherit}.esri-icon-swap:before{content:"";color:inherit}.esri-icon-cta-link-external:before{content:"";color:inherit}.esri-icon-reply:before{content:"";color:inherit}.esri-icon-public:before{content:"";color:inherit}.esri-icon-share2:before{content:"";color:inherit}.esri-icon-launch-link-external:before{content:"";color:inherit}.esri-icon-rotate-back:before{content:"";color:inherit}.esri-icon-pan2:before{content:"";color:inherit}.esri-icon-tracking:before{content:"";color:inherit}.esri-icon-expand2:before{content:"";color:inherit}.esri-icon-arrow-down:before{content:"";color:inherit}.esri-icon-arrow-up:before{content:"";color:inherit}.esri-icon-hollow-eye:before{content:"";color:inherit}.esri-icon-play-circled:before{content:"";color:inherit}.esri-icon-volume-off:before{content:"";color:inherit}.esri-icon-volume-on:before{content:"";color:inherit}.esri-icon-bookmark:before{content:"";color:inherit}.esri-icon-lightbulb:before{content:"";color:inherit}.esri-icon-sketch-rectangle:before{content:"";color:inherit}.esri-icon-north-navigation-filled:before{content:"";color:inherit}.esri-icon-default-action:before{content:"";color:inherit}.esri-icon-undo:before{content:"";color:inherit}.esri-icon-redo:before{content:"";color:inherit}.esri-icon-cursor:before{content:"";color:inherit}.esri-icon-cursor-filled:before{content:"";color:inherit}.esri-icon-measure:before{content:"";color:inherit}.esri-icon-measure-line:before{content:"";color:inherit}.esri-icon-measure-area:before{content:"";color:inherit}.esri-icon-legend:before{content:"";color:inherit}.esri-icon-sliders:before{content:"";color:inherit}.esri-icon-sliders-horizontal:before{content:"";color:inherit}.esri-icon-cursor-marquee:before{content:"";color:inherit}.esri-icon-lasso:before{content:"";color:inherit}.esri-icon-elevation-profile:before{content:"";color:inherit}.esri-icon-slice:before{content:"";color:inherit}.esri-icon-line-of-sight:before{content:"";color:inherit}.esri-icon-zoom-to-object:before{content:"";color:inherit}.esri-icon-urban-model:before{content:"";color:inherit}.esri-icon-measure-building-height-shadow:before{content:"";color:inherit}.esri-icon-partly-cloudy:before{content:"";color:inherit}.esri-attachments__progress-bar:before,.esri-attachments__progress-bar:after{opacity:var(--calcite-opacity-100);content:"";height:1px;transition:opacity .5s ease-in-out;position:absolute;top:0}.esri-attachments__progress-bar:before{z-index:0;background-color:var(--calcite-color-foreground-2);width:100%}.esri-attachments__progress-bar:after{z-index:0;background-color:var(--calcite-color-text-2);width:20%;animation:1.5s linear infinite looping-progresss-bar-ani}.esri-attachments{background-color:var(--calcite-color-background)!important;width:100%}.esri-attachments__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-attachments__loader{background:url(data:image/gif;base64,R0lGODlhIQAnALMKAAB6wrze86TR7Y3F53W44V6s2kaf1C+TzheGyNPq+f///wAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDdDRTgwM0Q3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDdDRTgwMkQ3MjAxMUU0QjJCRTkxRjI3NjA5MTc2MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmQyYThhNjgzLWIwNjctNDhhZi05Nzc0LTZiOTZkM2RhMjI2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MkRGQzEzOEQ3MUIxMUU0QjJCRTkxRjI3NjA5MTc2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkEAAoALAAAAAAhACcAAASOUMlJq70W6L2xv1z4jVPIkaTZoZ+qsa0Ley4wY7WU7Dyv9z1JTgEMEos7oeyI/DUVQ2SSWVSqnFUq0GrCbrXGqNQbXkoTZB/UPAarxc8zV+SeytfXOlo/P/H/cFl3gV+DbHFthEaGeXeMXX+PdI6Jh4KVjW2SfpRPQzcVn6AlS6OkeaZ9K6l4kKyirLEXEQAh+QQJBAAKACwAAAAAIQAnAAAEqFDJSau9OOutkP8fx4GkuJGgqaGhirGe+8JSYN+3CCM1jkuJoFAo2fV8NuBwWKQpkDnFktlxQpPSabDJOiKVWi7K6wNPxaXn1bxEp9RQNtUI/2bD1W69fD/nx3s/fW1/aVcBckSFb4eJW4stjYNzVmuTinSSWo+ZlpsJbpGem6ExgVGfpTynWKmQppqkr6uxeJ1xl5yVuCdOMhV0vxTBwqrFw77HysvFEQAh+QQFBAAKACwAAAAAIQAnAAAEqFDJSau9OOvNez5gGHqaaJKfOaKXugpwHHcuKMk4Xd/4rCTAYFBSO/B6AolwSdwpkDDlcqgoHnvSaaLpuuZ+2m3VCU2CtVyVV5adpk9PaJs57saRc+FbtPaFxVZ3WGdudWqCX397L3KEdIFleVSQjYqGcJGOepd8iGyak2SVYYs2nn6knIx4oEClRqdRrYCirJaUtqm4gxu7X71OLBWBwhTExcjJysseEQAh+QQJBAAKACwBAAMAFAAhAAAEU9DIOZW9WNGd+6Zd9lXKYJ7nKFloqxpsm6qxPLy1jJf2TfO2Xc83yrl+Q2FPGUQunc0iUAelSpPV4/W5jX6MKKb1O9WSsd0xpxzOtqUhyy6u+dEjACH5BAkEAAoALAAAAAAhACcAAASAUMlJq7046827/10hjiOIkahErCwboqXSzi9cqLPL2SKeEzWYLxdMyX7AHW9IU9qYrSIJqtvwbsefNIZMWpdZolMYbn6f5ejY2N320lXNlbpyY9vrKbye5yLtdF5yYHhnZIWDaIgZc3uCjIR/fW+LJ5Fak3eShkYmnp+goaKjHREAIfkECQQACgAsAAAAACEAJwAABKhQyUmrvTjrzbv/IFaMJNkRaJpKZXuqKtuaHBwrM73ZK54XkoRwOJTwULJckEg0HpOzJVPo5EFdimlRcSRcS9Jp1falaancp0+ZPY9h5VGY+b79gG1tvXefN9NWa1F5YoBkglhnCXtIiGCEdIZwjmZuknY/fltdcXiKjF6UcpB/nKKelqZ9pJtqq5+XfJmsaKqzsLZsuK6zO7xsvoGrIRXDxMfIycrLxBEAIfkEBQQACgAsAAAAACEAJwAABKdQyUmrvTjrzbu3RiiKXzaeJXaO3eC+r7SSHGzLs9HasZLrioRwOJTwej8JcWk8DnAz5bKocD59Oek00TxCV9ppl/dFBbfcqrPMOm/HN2zULVZ75WA6007Gm9FpVmw0gHAwgyFhe4J+bYV8cUl6RIZIWZNUjJKPmpeca42EaJUuiECfd5ujkIehiZhCpFeqb6yWc6h9khudcykVu78TwcKuQMXIycrKEQAh+QQJBAAKACwBAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnhjMNC3BiFzXN6zvsx7rBxSiiDsjCclT4Jg2p48DjD6p1YAytclqpUNsddvqZskxcRF8VCfZS3fzah7DuRovOie3TutrdHlnd2WDdoIZeoVpgG+JGIuQF5J/LhWTl5kumyqdJp+XoqMiEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OIPNef5VJ4KkInYleHqptgKtu8bYC5NJruuSLe3AH5BnegmHieOwZ1Qgc8pgceZ8RndM6jNZRWZPV+L2O+ouzVIfGrsmqsdt6BQc58Lf1joZpe/jvX5NcHeCeYRahnl/Z4d0g4qFgI1lj4CLUpN8lWeXbCpNNCGgoRNqpKWjp6anc2WsrXyvrBEAIfkECQQACgAsAAAAACEAJwAABKlQyUmrvTjrzZH/H9eBoLiRpZmhoYqxnvvCUmDft5TsPC/BiBoOp+v1fjTFkKgwHhVA4TJQdCaQLOmy6sSitEOu0UsCM607cmpqEz+jSrbbB02yqU20unWfp+tZcVN+V4Bfglt5VnsxiGGKXYZljmd6kmtykGOXfJlohXB9mm92npahpoucjaKfjEGUOaN0qIOzf7WJJ6W2u4EyFXDAFMLDr8bEScjLzBoRACH5BAUEAAoALAAAAAAhACcAAASqUMlJq7046827t0coil82niV2jum1koogz3P3hhKtS0nv+5LbIaerKX7I4I1YFPCQQIWQWXxCE8oXdXe8YqXLWNPZvWZXW5oVekaJm+skWPuultlzdJ3r/U73andyf2NkfW0sgEaHeW6FcT+IMI+CkY2JlIyEY5BRm3CVnmGZXpI4ijKdPaZDqIall5Ocoauxp6Rmtq2UG592vaOzwHQtFH/FE8fIy8zNzBEAIfkECQQACgAsDAADABQAIQAABFPQyDmVvVjRnfumXfZVymCe5yhZaKsabJuqsTy8tYyX9k3ztl3PN8q5fkNhTxlELp3NIlAHpUqT1eP1uY1+jCim9TvVkrHdMacczralIcsurvnRIwAh+QQJBAAKACwAAAAAIQAnAAAEgFDJSau9OOvNu/8gVowkGV5lKhFs23ZpubouHI8zzdp3rvMxHw2oUuhenBvOeCQQZczj0xT9JZXC2rVXHW6DXe1GWcgix9jwWUM2777FphMOlU+Xdjo1j+by2Wl/GW1qb31ggiKBTXdlhXOHcYx6eJORdZaAfpmDaSefoKGio58RACH5BAkEAAoALAAAAAAhACcAAASoUMlJq7046827/2AoFWRZdkSqqqNpouvauiQcpzMtJXzfSzeWgnZS+I7AICHn2h1/CuVySCw4n4lkkPkyYrNRJbf4BUvHNS9We0Nb1U92zH2Nh7dUYh15b+d1cHxnf02BPnIyhF1liEJVb4x9c4pkX404lGmRg497h5KJnYZQnFWepGKZkJagjqajPJdTopuptKylehy5gBu8hb62ryIUosTHyMnKyxIRACH5BAUEAAoALAAAAAAhACcAAASpUMlJq7046827/5IhjiOIkah5oWQ3vDAcsqIbxzMtJXzfSzecglZT+I7A4CvH2h1/CuVySHQ+E0klM2W8YqPSbat7zQbFJfLTfEMXvV/pwG2wrsFaqk6NxJ/1TXw+bEJEdYJQcnR2fYqAXHCEMo9jkX5tlGmWjoaMg5eFVYg8klOdo3FhmW9epXOrh5uqp7J5tK2gk6cbnKK8s74qE7vCi8XDwcfKy8wWEQAh+QQJBAAKACwMAAMAFAAhAAAEVVDJSdW5GNed+65dJowkKYVYqZ7ooZYs+ppWO49xeAt5t/eiGzAlrMmKLRfStjzOhpefUdekPqe+avaalHa1QS5T7HxBlWSrGRtef9OezyQpn7fq5wgAIfkECQQACgAsAAAAACEAJwAABIBQyUmrvTjrzTf6INh5YThqpXliqbhe7dcFdF1LMTLbNh7vPJqvBQwOU0XesZTsKXLN2/PHCUqhVWtgqdpot1Ni1sp1ebVl2dgYRq6VbebbiT2T413NN62bX6l2bHV6aHhmhHeDGXuGaoFwihiMkReTgC8UlC+aK5wnniOgmKOjEQAh+QQJBAAKACwAAAAAIQAnAAAEjlDJSau9OGsFuvdbyH2fuJGlmaGgirGd+8LyBQNSou97zvOSm++nGxKDNAWxp1wmkCzjTwocRZtLKlOIPXanVpS2+K1ync/yNokep89ON1SsJrfDJHn9zY7v53l/gnBZg32Fd4ReiYeLfopgjFd3knSUj42RmJN+lYE1FFygE6KjeCmmpy2ppaOtoK+pFhEAIfkECQQACgAsAAAAACEAJwAABI1QyUmrvTjrzTf6INh5YThqpXliqbhe7ffCsZTcOG7nuRQjO94tKPTVFEIdMpkwtog8aE/xkyqZTeoRax1qn8tkN1sNF83Rb2rMVpfaXLcqHi/Tmc41elrf4vdKdn99YHdici6GZ4KHhHqKaYxnjm+AXpRzg3+SaZguMxRloBOio4gypnmVqaWjramwLxEAIfkEBQQACgAsAAAAACEAJwAABIpQyUmrvTjrzbv/0iGOI4iRqHmhpGqxpUvBopTcOG7neUjvvBsw6IMNeceegnZI6hTBJ9MphEYTRRYVa41mU11iGLn8jZVX7vT8TH9b7Kq7bIxz5+s53qy/vmN9XnRadlt/NYWJeX6KfIx7dYFii4KQhJJklGKWYJhKazKHTaGipKWmoKGppqytrBEAIfkECQQACgAsFwADAAkAIQAABBLQyEmrvTjrzbv/YCiOZGmeZQQAIfkECQQACgAsAAAAACEAJwAABFBQyUmrvTjrzbv/YCgVZFmKlqmilWqylHvCo1zQtYwr9o33O+DPFiQOdUdXEUkTNo1PJsw5hValLGrWusWitF9u2CsCl8Vncsi8Ru/e8PguAgAh+QQJBAAKACwAAAAAIQAnAAAEhlDJSau9OOvNu/9gKIZEaZpjda4ptZ5SIs9zTNPSiyo3zveynI5gAxZ7Qt3xtvQNiT9jFKl4NmtTZnV4DWad3C8W6LWKveRE8tVVn93mdHvNes+3Srs+Tr7zpXJ4bHqBf1SFYYGIeYp9gnWNUoZai4ORVJM+lXUtjzCdnjudZqClpqeoqRsRACH5BAUEAAoALAAAAAAhACcAAASFUMlJq7046827/2AojuQ2nChaTmkrJXAcv7IstSldw/p+46deTWhTAIOK3SypTPyAxGXTaTxGeUzlE3elTreurE88rELJxa+Zi5Y2wbk2Vn0cdO/rsJpulXvfeXF7gHV4fGeDWoEqfniFjZCPiWOSgIdsk2WVipdhK4+ffSujpKWmp6grEQAh+QQJBAAKACwXAAYACQAbAAAEEFDISau9OOvNu/9gKI5kyUUAIfkECQQACgAsAAAAACEAJwAABElQyUmrvTjrzbv/YCiOZGkqQaqqJ7qu7QufMkvXQYzrNS/7L+DMhMvdesdfMrgclopCG3HXlD6pU2RWuWV2nSRoa0wum8/o9CYCACH5BAUEAAoALAAAAAAhACcAAARsUMlJq7046827/2AojmRpckmqqtLqti6rxDKdwjQe6+9s8ytg7efLFXfHni0hvCWDz6Fx2WRGndSrNcsldqfeMHiM/JbFZ7ISvVZDze20PE5/s+1u6Ry/19f9fH9Yd4CFTieIiYqLjI2OjyQRACH5BAUEAAoALAAAAAABAAEAAAQCUEUAIfkEBQQACgAsAAAAAAEAAQAABAJQRQA7) 50% no-repeat;width:100%;height:64px}.esri-attachments__actions{flex-flow:wrap;padding:6px 7px;display:flex}.esri-attachments__item-add-icon{font-size:var(--calcite-font-size-xl);margin:0;padding:0 7px}.esri-attachments__delete-button{color:var(--calcite-color-status-danger);width:auto;margin-right:auto}.esri-attachments .esri-attachments__items{width:100%;margin:0;padding:0;display:flex}.esri-attachments .esri-attachments__item{margin:0;line-height:var(--calcite-font-line-height-relative-tight);list-style-type:none}.esri-attachments__item-button{outline-offset:-4px;cursor:pointer;width:100%;text-align:unset;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-foreground-1);border-radius:var(--calcite-border-width-md);align-items:center;margin:0 0 var(--calcite-spacing-xs);padding:var(--calcite-spacing-xs) 7px;text-decoration:none;transition:border-color .125s ease-in-out;display:flex;box-shadow:0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-button:focus,.esri-attachments__item-button:hover{border-color:var(--calcite-color-border-white)}.esri-attachments__item-link{text-decoration:none;display:block;position:relative}.esri-attachments__item-link:hover .esri-attachments__item-link-overlay,.esri-attachments__item-link:focus .esri-attachments__item-link-overlay{opacity:1}.esri-attachments__item-add{background-color:var(--calcite-color-background);padding:6px 0}.esri-attachments__add-attachment-button{align-items:baseline!important;border-radius:var(--calcite-corner-radius-xs);border:none!important;justify-content:flex-start!important;padding:12px 3px!important;font-size:var(--calcite-font-size-sm)!important;transition:background-color .25s ease-in-out}.esri-attachments__add-attachment-button:hover{background-color:var(--calcite-color-foreground-1)!important;text-decoration:none;box-shadow:0 1px 2px #0000004d}.esri-attachments__item-link-overlay{opacity:0;pointer-events:none;-webkit-user-select:none;user-select:none;justify-content:center;align-items:center;transition:opacity .25s ease-in-out;display:flex;position:absolute;inset:0}.esri-attachments__item-link-overlay-icon{color:var(--calcite-color-foreground-2);background-color:var(--calcite-color-foreground-1);border-radius:100%;justify-content:center;align-items:center;padding:18px;display:flex}.esri-attachments__item-link-overlay-icon svg{fill:var(--calcite-color-foreground-1)}.esri-attachments__item-mask{justify-content:center;align-items:center;width:64px;height:64px;display:flex;position:relative;overflow:hidden;box-shadow:0 0 0 1px var(--calcite-color-foreground-1)}.esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-2);padding:24px 0}.esri-attachments__item-mask--icon .esri-attachments__image{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}.esri-attachments__metadata{justify-content:space-between;margin-top:3px;display:flex}.esri-attachments__metadata .esri-attachments__metadata-fieldset{text-align:center;background-color:var(--calcite-color-foreground-1);border:none;flex:0 calc(50% - 1px);margin:0;padding:6px 7px;font-size:var(--calcite-font-size-sm)}.esri-attachments__file-name{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;margin-bottom:3px;font-size:var(--calcite-font-size-sm);display:inline-block}.esri-attachments__file-fieldset{border:none;margin:0;padding:var(--calcite-spacing-md) 7px}.esri-attachments__file-input{opacity:0;z-index:-1;width:.1px;height:.1px;position:absolute;overflow:hidden}.esri-attachments__container--list .esri-attachments__items{flex-flow:column}.esri-attachments__container--list .esri-attachments__item-mask{flex:none;margin-right:7px;position:relative}.esri-attachments__container--list .esri-attachments__image{max-width:unset;max-height:unset;left:50%}.esri-attachments__container--list .esri-attachments__label{flex:auto;justify-content:space-between;display:flex}.esri-attachments__container--list .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;cursor:pointer;flex:1 0 0}.esri-attachments__container--list .esri-attachments__item-chevron-icon{cursor:pointer;flex:none;padding:0 15px}.esri-attachments__container--preview .esri-attachments__items{flex-flow:wrap;align-items:center}.esri-attachments__container--preview .esri-attachments__item{width:100%;margin-bottom:var(--calcite-spacing-md)}.esri-attachments__container--preview .esri-attachments__item-mask{width:100%;height:auto}.esri-attachments__container--preview .esri-attachments__item-button{box-shadow:none;flex-flow:column}.esri-attachments__container--preview .esri-attachments__item-button .esri-attachments__label{margin:var(--calcite-spacing-md) 0}.esri-attachments__container--preview .esri-attachments__image{max-width:100%}.esri-attachments__container--preview .esri-attachments__filename{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;text-align:center;text-overflow:ellipsis;width:calc(100% - 15px);margin-top:var(--calcite-spacing-md);overflow:hidden}.esri-attachments__container--preview .esri-attachments__item-mask--icon{background-color:var(--calcite-color-foreground-1)}.esri-attachments__form-node{background-color:var(--calcite-color-foreground-1);padding:6px 7px;box-shadow:var(--calcite-shadow-sm)}.esri-attachments__form-node .esri-attachments__item-mask{box-shadow:none;width:unset;height:unset}.esri-attachments__form-node .esri-attachments__image{max-width:100%}.esri-attachments__error-message{background-color:var(--calcite-color-foreground-1);border-top:3px solid var(--calcite-color-status-danger);margin:6px 7px;padding:var(--calcite-spacing-md) 15px;animation:.25s ease-in-out esri-fade-in-down;box-shadow:0 1px 2px #0000004d}.esri-attachments__progress-bar{width:100%;position:absolute}.esri-attachments__item-mask:dir(rtl){margin-left:7px;margin-right:0}.esri-feature-form{letter-spacing:0em;background:var(--calcite-color-background);padding:var(--esri-widget-padding)}.esri-feature-form__disabled-notice{margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form .esri-feature-utility-network-associations,.esri-feature-form .esri-feature-form-utility-network-association-list{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info__description{color:var(--calcite-color-text-2)}.esri-feature-form .esri-feature-utility-network-associations .esri-feature-element-info h5{font-size:inherit}.esri-feature-form__form{flex-direction:column;display:flex}.esri-feature-form__centered-button{align-self:center}.esri-feature-form__description-text{color:var(--calcite-color-text-2);font-size:var(--calcite-font-size-sm)}.esri-feature-form__list-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature-form__related-records_header{margin-bottom:var(--calcite-spacing-xs);display:flex}.esri-feature-form__related-records_header span{flex-grow:1}.esri-feature-form__related-records_label calcite-notice,.esri-feature-form__related-records_label .esri-feature-form__description-text{margin-bottom:var(--calcite-spacing-xs)}.esri-feature-form__related-records_list{min-height:40px;margin-bottom:var(--calcite-spacing-xs)}label.esri-feature-form__label{gap:.5em;margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__label{opacity:1;flex-direction:column;justify-content:space-between;margin-bottom:var(--calcite-spacing-xs);transition:opacity .25s,margin .25s;display:flex;position:relative}.esri-feature-form__label:last-child{margin-bottom:0}.esri-feature-form__label-text-content{white-space:pre-wrap;word-break:break-word;word-wrap:break-word;align-items:center;display:flex}.esri-feature-form__form-header{margin-bottom:var(--calcite-spacing-md)}.esri-feature-form__form-header .esri-feature-form__description-text~.esri-widget__heading{margin-bottom:0}.esri-feature-form__input{width:100%}.esri-feature-form__input:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}textarea.esri-feature-form__input{resize:vertical}.esri-feature-form__input--disabled{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__field-error-message{padding:7px 0;font-size:var(--calcite-font-size-sm)}.esri-feature-form__date-input-container{flex-direction:column;display:flex}.esri-feature-form__date-input-container .esri-feature-form__input{margin-bottom:3px}.esri-feature-form__date-input-container :last-child{margin-bottom:0}.esri-feature-form__input--radio-group{flex-direction:column;display:flex}.esri-feature-form__input--radio-label{align-items:center;display:flex}.esri-feature-form__input--switch{margin:7px 0}.esri-feature-form__group{margin:0 0 var(--calcite-spacing-md);background-color:inherit;margin-inline:-10px}.esri-feature-form__group--sequential{border-bottom:none;border-inline-start:3px solid #adadad4d}.esri-feature-form__group--active{border-inline-start-color:var(--calcite-color-status-info)}.esri-feature-form__text-element{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal)}.esri-feature-form__text-element a{transition:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start inset-size,opacity,outline-color,transform var(--calcite-animation-timing) ease-in-out 0s,outline 0s,outline-offset 0s;background-color:var(--calcite-color-background);background-image:linear-gradient(currentColor,currentColor),linear-gradient(var(--calcite-color-brand-underline),var(--calcite-color-brand-underline));color:var(--calcite-color-text-link);background-position-x:0%,100%;background-position-y:min(1.5em,100%);background-repeat:no-repeat,no-repeat;background-size:0% 1px,100% 1px;border-style:none;padding:0;text-decoration:none;display:inline;position:relative}.esri-feature-form__text-element a:hover,.esri-feature-form__text-element a:focus{background-size:100% 1px,100% 1px}.esri-feature-form__text-element a:active{background-size:100% 2px,100% 2px}.esri-feature-form__text-element a.calcite--rtl{background-position:100% 100%,100% 100%}.esri-feature-form__text-element code{border:1px solid var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-3);white-space:normal;word-break:break-word;color:var(--calcite-color-text-2);font-family:var(--calcite-code-family);border-radius:var(--calcite-spacing-base);padding:.25em;font-size:85%}.esri-feature-form__text-element h1,.esri-feature-form__text-element h2,.esri-feature-form__text-element h3,.esri-feature-form__text-element h4,.esri-feature-form__text-element h5{color:var(--calcite-color-text-1);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size-0);font-weight:var(--calcite-font-weight-bold);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element h5{font-weight:var(--calcite-font-weight-medium)}.esri-feature-form__text-element h6{color:var(--calcite-color-text-2);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-medium);margin-bottom:var(--calcite-spacing-xxs)}.esri-feature-form__text-element p{color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-snug);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-normal);margin-bottom:var(--calcite-spacing-xl)}.esri-feature-form__text-element strong{font-weight:var(--calcite-font-weight-bold)}:dir(rtl) .esri-feature-form__date-input-part:first-child .esri-feature-form__input{border-left:none;border-right:1px solid #adadad4d}.esri-feature-form-utility-network-association-layers{background-color:var(--calcite-color-background)}.esri-feature-form-utility-network-association-layers__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-layers__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-layers__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__list-container{min-height:var(--calcite-spacing-xxxl);margin-bottom:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__feature-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-feature-form-utility-network-association-layers__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);top:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-layers__filter-options-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header{flex-direction:row;align-items:baseline;display:flex}.esri-feature-form-utility-network-association-layers__filter-options-header span{flex-grow:1}.esri-feature-form-utility-network-association-layers__spatial-select-container{flex-direction:column;align-items:flex-end;gap:6px;display:flex}.esri-feature-form-utility-network-association-layers__spatial-select-toolbar{--calcite-action-group-border-color: transparent;border-width:var(--calcite-border-width-sm, 1px);border-radius:var(--calcite-corner-radius-round, 4px);border-style:solid;border-color:var(--calcite-color-border-3, var(--calcite-color-inverse));width:100%;min-height:min-content;overflow:hidden}.esri-feature-form-utility-network-association-layers__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-feature-form-utility-network-association-layers__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-form-utility-network-association-list{background-color:var(--calcite-color-foreground-1)}.esri-feature-form-utility-network-association-list__header>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__header>:last-child{color:var(--calcite-color-text-3)}.esri-feature-form-utility-network-association-list__header calcite-block{margin-block-start:-18px;margin-inline:-15px}.esri-feature-form-utility-network-association-list__heading-content{align-items:center;display:flex}.esri-feature-form-utility-network-association-list__heading-content calcite-icon{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-list__list-container{flex-direction:column;min-height:var(--calcite-spacing-xxxl);display:flex}.esri-feature-form-utility-network-association-list__list-container calcite-fab{margin-block:var(--calcite-spacing-md);flex-direction:row;align-self:center;display:flex}.esri-feature-form-utility-network-association-settings{--calcite-block-padding: 0;background-color:var(--calcite-color-foreground-1);flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings calcite-block{border:1px solid var(--calcite-color-border-3);margin-block:0}.esri-feature-form-utility-network-association-settings calcite-block:first-of-type{border-radius:var(--calcite-spacing-sm) var(--calcite-spacing-sm) 0 0}.esri-feature-form-utility-network-association-settings calcite-block:last-of-type{border-top:none;border-radius:0 0 var(--calcite-spacing-sm) var(--calcite-spacing-sm);margin-block-end:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings calcite-block calcite-label{margin-inline:var(--calcite-spacing-md)}.esri-feature-form-utility-network-association-settings__info-container{flex-direction:column;display:flex}.esri-feature-form-utility-network-association-settings__info-container>*{margin-block-end:var(--calcite-spacing-md)}.esri-feature{letter-spacing:0em;isolation:isolate;position:relative;width:100%}.esri-feature__title{word-break:break-word;word-wrap:break-word;font-size:var(--calcite-font-size);display:block}.esri-feature calcite-icon{box-sizing:content-box}.esri-feature__attachments{display:flex}.esri-feature__loading-container{justify-content:center;width:100%;padding:var(--calcite-spacing-md) 0;display:flex}.esri-feature-relationship{position:relative}.esri-feature-relationship__list{min-height:var(--calcite-spacing-xxxl)}.esri-feature-relationship__list-item--hidden{display:none}.esri-feature-utility-network-associations{position:relative}.esri-feature__filter-container{z-index:1;margin-bottom:var(--calcite-spacing-md);position:sticky;top:var(--calcite-spacing-md)}.esri-feature__feature-observer{z-index:2;text-align:center;position:relative;bottom:var(--calcite-spacing-xxl)}.esri-feature__sticky-loading-container{z-index:2;pointer-events:none;justify-content:center;align-items:center;height:var(--calcite-spacing-xxxl);margin:0;padding:0;display:flex;position:sticky;bottom:10px}.esri-icon-loading-indicator{display:inline-block}.esri-feature__content-element{margin-bottom:24px;padding:0 7px}.esri-feature__content-element .esri-widget__heading{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature__content-element:only-child,.esri-feature__content-node--text{margin-bottom:3px}.esri-feature__content-node{flex-direction:column;display:flex}.esri-feature__text{line-height:var(--calcite-font-line-height-relative-tight)}.esri-feature-attachments{flex-flow:column wrap;align-items:flex-start}.esri-feature__last-edited-info{padding-top:var(--calcite-spacing-xs);font-size:var(--calcite-font-size-sm)}:dir(rtl) .esri-feature__attachments-title{margin:0 0 0 auto}:dir(rtl) .esri-feature__attachments--list .esri-feature__attachment-item-mask{margin-left:7px;margin-right:0}.esri-feature-content__loader-container{justify-content:center;align-items:center;height:150px;padding:0;display:flex}.esri-feature-content__loader{background:url(./assets/attachments/images/loading-throb.gif) 50% no-repeat;width:100%;height:64px}.esri-feature-content{font-size:var(--calcite-font-size)}.esri-feature-content h1,.esri-feature-content h2,.esri-feature-content h3,.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{letter-spacing:0;color:var(--calcite-color-text-2);margin:.5em 0;font-weight:var(--calcite-font-weight-semibold);line-height:normal}.esri-feature-content h1{font-size:1.75em}.esri-feature-content h2{font-size:1.5em}.esri-feature-content h3{font-size:1.25em}.esri-feature-content h4,.esri-feature-content h5,.esri-feature-content h6{font-size:1em}.esri-widget__heading.esri-feature-element-info__title{color:var(--calcite-color-text-2);margin-top:0;margin-bottom:.2em;font-size:var(--calcite-font-size-xl);font-weight:var(--calcite-font-weight-normal)}.esri-feature-element-info__description{margin-bottom:var(--calcite-font-size-xs);font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-normal)}.esri-feature-content p{margin:0 0 1.2em;font-size:var(--calcite-font-size)}.esri-feature-content p:last-child{margin-block-end:0}.esri-feature-content img{image-orientation:from-image;max-width:100%;max-height:100%}.esri-feature-content video{max-width:100%;max-height:100%}.esri-feature-content figure{margin:0;padding:0}.esri-feature-content figcaption{margin:.2em 0 0;padding:0;font-size:var(--calcite-font-size-sm);font-style:italic;display:block}.esri-feature-content ul,.esri-feature-content ol{margin-block:1rem}.esri-feature-content ul:first-child,.esri-feature-content ol:first-child{margin-block-start:0}.esri-feature-content a{color:var(--calcite-color-text-3)}.esri-feature-content a:hover,.esri-feature-content a:focus{color:var(--calcite-color-text-2)}.esri-features{--calcite-color-background: $background-color;flex-direction:column;display:flex}.esri-features img{image-orientation:from-image}.esri-features__flow-item--collapsed{--calcite-flow-item-header-border-block-end: none}.esri-features__container{background-color:var(--calcite-color-background)}.esri-features__container:not(:empty){padding:var(--calcite-spacing-md)}.esri-features .esri-feature,.esri-features .esri-feature-relationship,.esri-features .esri-feature-utility-network-associations{background-color:#0000}.esri-features__heading{word-break:break-word;word-wrap:break-word}.esri-features__header,.esri-features__footer{background-color:var(--calcite-color-foreground-1);flex:1;justify-content:flex-end;align-items:center;display:flex}.esri-features__pagination-text{padding-inline:var(--calcite-spacing-sm);color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.esri-features__loader{align-self:center;padding-inline:1rem}.esri-features__pagination-action-bar{flex:1}.esri-features__pagination-menu-button{border-inline-start:1px solid var(--calcite-color-border-3)}.esri-features__icon{flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg);display:inline-block}.esri-features__action-image{background-position:50%;background-repeat:no-repeat;background-size:contain;flex:0 0 var(--calcite-spacing-lg);width:var(--calcite-spacing-lg);height:var(--calcite-spacing-lg)}.esri-features__header{border-block-end:1px solid var(--calcite-color-border-3)}.esri-features__content-feature{--calcite-flow-item-footer-padding: 0}.esri-features__feature-menu-observer{z-index:2;text-align:center;position:relative;bottom:20px}.esri-features__action--exit{transform:scaleX(-1)}.esri-feature-media__container{flex-flow:wrap;align-items:center;width:100%;min-height:150px;margin-top:var(--calcite-spacing-xs);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button{cursor:pointer;color:var(--calcite-color-text-3);background:0 0;border:none;justify-content:center;align-items:center;padding-block:var(--calcite-spacing-xs);padding-inline:var(--calcite-spacing-sm);display:flex}.esri-feature-media__container .esri-feature-media__pagination-button:hover,.esri-feature-media__container .esri-feature-media__pagination-button:focus{color:var(--calcite-color-text-2);fill:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-2)}.esri-feature-media__item-title{margin:0;font-size:var(--calcite-font-size-md)}.esri-feature-media__item-caption{padding-block-start:3px;font-size:var(--calcite-font-size-sm)}.esri-feature-media__item{justify-content:center;align-items:flex-start;width:100%;height:auto;margin-block:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-navigation{flex:0 100%;justify-content:space-between;align-items:flex-start;margin-block-end:var(--calcite-spacing-xs);display:flex}.esri-feature-media__item-text{margin-inline-end:var(--calcite-spacing-md)}.esri-feature-media__pagination{flex:none;align-items:center;display:flex;overflow:hidden}.esri-feature-media__pagination:only-child{margin-inline-start:auto}.esri-feature-media__pagination-text{color:var(--calcite-color-text-3);padding-inline:var(--calcite-spacing-base);font-size:var(--calcite-font-size-sm)}.esri-feature-media__item-container{flex:0 auto;width:100%}.esri-feature-media__item-container img{max-width:100%}.esri-feature-media__item-container img[src$=".SVG"],.esri-feature-media__item-container img[src$=".svg"]{width:100%}.esri-feature-media__chart{background-color:var(--calcite-color-foreground-1);width:100%;height:155px}:dir(rtl) .esri-feature-media__image-summary{margin:0 .5em 0 0}:dir(rtl) .esri-feature-media__pagination-icon{transform:rotate(180deg)}.esri-identity-modal__info,.esri-identity-modal__notice{margin:0;margin-bottom:var(--calcite-spacing-md)}.esri-ui .esri-popup{z-index:1;pointer-events:none;flex-flow:column;display:flex;position:absolute}.esri-ui .esri-popup .esri-features{flex:1;width:100%}.esri-ui .esri-popup .esri-widget__heading{margin:0}.esri-ui .esri-popup--hidden{display:none}.esri-popup--shadow{box-shadow:0 1px 4px #000c}.esri-popup--aligned-top-center{transform-origin:50% 100%}.esri-popup--aligned-bottom-center{transform-origin:50% -5%}.esri-popup--aligned-top-left,.esri-popup--aligned-bottom-left{transform-origin:100%}.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-right{transform-origin:-5%}.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right{animation:.2s ease-in-out popup-intro-animation-down}.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right{animation:.2s ease-in-out popup-intro-animation-up}.esri-popup__main-container{z-index:1;pointer-events:auto;background-color:var(--calcite-color-foreground-1);width:340px;min-height:48px;max-height:340px;display:flex;position:relative;overflow:hidden}.esri-popup__pointer{width:0;height:0;position:absolute}.esri-popup__pointer-direction{content:"";background-color:var(--calcite-color-foreground-1);width:var(--calcite-spacing-md);height:var(--calcite-spacing-md);position:absolute}.esri-popup--aligned-top-center .esri-popup__pointer{margin:0 0 0 -6px;top:100%;left:50%}.esri-popup--aligned-bottom-center .esri-popup__pointer{margin:0 0 0 -6px;bottom:100%;left:50%}.esri-popup--aligned-top-left .esri-popup__pointer{bottom:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-bottom-left .esri-popup__pointer{top:var(--calcite-spacing-xs);right:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-top-right .esri-popup__pointer{bottom:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(45deg)}.esri-popup--aligned-bottom-right .esri-popup__pointer{top:var(--calcite-spacing-xs);left:var(--calcite-spacing-xs);transform:rotate(-45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction,.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{transform:scale(.75,2) rotate(45deg)}.esri-popup--aligned-top-left .esri-popup__pointer-direction,.esri-popup--aligned-bottom-left .esri-popup__pointer-direction,.esri-popup--aligned-top-right .esri-popup__pointer-direction,.esri-popup--aligned-bottom-right .esri-popup__pointer-direction{top:-6px;left:-6px;transform:scaleY(3.5) rotate(45deg)}.esri-popup--aligned-top-center .esri-popup__pointer-direction{top:-6px;left:0}.esri-popup--aligned-bottom-center .esri-popup__pointer-direction{bottom:-6px;left:0}.esri-view-width-xlarge .esri-popup__main-container{width:460px}.esri-view-width-large .esri-popup__main-container{width:400px}.esri-view-width-medium .esri-popup__main-container{width:340px}.esri-view-width-less-than-medium .esri-popup__main-container{width:280px}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{margin-bottom:var(--calcite-spacing-xl)}.esri-view-width-xsmall .esri-popup--is-docked-top-center,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center{width:auto;margin:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container,.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{width:100%;max-height:75%;position:absolute;left:0;right:0}.esri-view-width-xsmall .esri-popup--is-docked-bottom-center .esri-popup__main-container{bottom:0}.esri-view-width-xsmall .esri-popup--is-docked-top-center .esri-popup__main-container{top:0}.esri-view-height-xlarge .esri-popup__main-container{max-height:460px}.esri-view-height-xlarge.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:410px}.esri-view-height-large .esri-popup__main-container{max-height:400px}.esri-view-height-large.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:350px}.esri-view-height-less-than-medium .esri-popup__main-container{max-height:300px}.esri-view-height-less-than-medium.esri-popup--feature-menu-open .esri-popup__feature-menu-viewport{max-height:250px}.esri-popup--is-docked{margin:15px 15px 30px;animation:.25s ease-out esri-docking-animation;inset:0}.esri-ui .esri-popup--is-docked{flex-flow:row}.esri-popup--is-docked-top-left,.esri-popup--is-docked-top-center,.esri-popup--is-docked-top-right{align-items:flex-start}.esri-popup--is-docked-bottom-left,.esri-popup--is-docked-bottom-center,.esri-popup--is-docked-bottom-right{align-items:flex-end}.esri-popup--is-docked-top-left,.esri-popup--is-docked-bottom-left{justify-content:flex-start}.esri-popup--is-docked-top-center,.esri-popup--is-docked-bottom-center{justify-content:center}.esri-popup--is-docked-top-right,.esri-popup--is-docked-bottom-right{justify-content:flex-end}.esri-popup--is-docked-top-left .esri-popup__main-container,.esri-popup--is-docked-top-right .esri-popup__main-container,.esri-popup--is-docked-bottom-left .esri-popup__main-container,.esri-popup--is-docked-bottom-right .esri-popup__main-container{max-height:80%}.esri-popup--is-docked-top-center .esri-popup__main-container,.esri-popup--is-docked-bottom-center .esri-popup__main-container{max-height:40%}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none}}.esri-tooltip{--calcite-input-padding-inline: .5rem;--calcite-input-height: 1.5rem;--field-height: .875rem;--field-height--input: var(--calcite-input-height);--field-row-gap: 1px;--field-column-gap: var(--calcite-app-spacing-2);--field-input-width: 6.5rem;--field-title-extra-margin: var(--calcite-app-spacing-6);--field-title-color: var(--calcite-color-text-2);--field-value-color: var(--calcite-color-text-1);--font-size: var(--calcite-font-size--3);--font-size--input: var(--calcite-font-size--2);--content-padding-inline: var(--calcite-app-spacing-2);--content-padding-block: var(--calcite-app-spacing-2);--help-message-border-spacing: var(--calcite-app-spacing-2);--help-message-min-width: 7rem;--icon-size--feedback: .625rem;z-index:1;will-change:transform;width:fit-content;position:absolute;top:0;left:0;overflow:visible}.esri-tooltip-content{gap:var(--content-padding-block);border:solid 1px var(--calcite-color-border-3);padding-block:var(--content-padding-block);padding-inline:var(--content-padding-inline);color:var(--calcite-color-text-2);width:min-content;line-height:var(--calcite-font-line-height-relative-tight);font-size:var(--font-size);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);touch-action:none;view-transition-name:tooltip-content;background:var(--calcite-color-foreground-2);border-radius:.25rem;flex-direction:column;display:flex;position:relative;box-shadow:0 6px 20px -4px #0000001a,0 4px 12px -2px #00000014;outline:none!important}.esri-tooltip-content:empty{opacity:0}.esri-tooltip-content__header{margin-block-start:calc(var(--content-padding-block) * -1);margin-inline:calc(var(--content-padding-inline) * -1);border-block-end:solid 1px var(--calcite-color-border-3);justify-content:flex-start;block-size:24px;padding-block-end:0;display:flex}.esri-tooltip-content__header__spacer{flex-grow:1;flex-shrink:1}.esri-tooltip-content__header__actions{flex-grow:0;flex-shrink:0;padding-inline-end:var(--content-padding-inline)}.esri-tooltip-content__header calcite-button{--calcite-offset-invert-focus: 1}.esri-tooltip-content--input{--field-height: var(--field-height--input);background:var(--calcite-color-foreground-1);pointer-events:all;-webkit-backdrop-filter:none;backdrop-filter:none}.esri-tooltip-content--input:not(:focus-within){opacity:.8}.esri-tooltip.calcite-mode-dark .esri-tooltip-content,.esri-tooltip.calcite-mode-dark .esri-tooltip-content--input{background:var(--calcite-color-foreground-1)}.esri-tooltip-table{grid-gap:var(--field-row-gap) var(--field-column-gap);grid-template-columns:max-content 1fr max-content max-content;align-items:flex-start;width:max-content;display:grid}.esri-tooltip-field{display:contents}.esri-tooltip-field__title,.esri-tooltip-field__value{block-size:var(--field-height);white-space:nowrap;color:var(--calcite-color-text-3);justify-content:flex-start;align-items:center;display:flex}.esri-tooltip-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-field__value{color:var(--field-value-color);grid-column:span 3}.esri-tooltip-editable-field{display:contents}.esri-tooltip-editable-field__title,.esri-tooltip-editable-field__value{block-size:var(--field-height);white-space:nowrap;justify-content:flex-start;align-items:center}.esri-tooltip-editable-field__title{display:flex}.esri-tooltip-editable-field__value{font-variant-numeric:tabular-nums;display:contents}.esri-tooltip-editable-field__value__content{grid-column:span 3;align-items:center;min-width:max-content;display:flex}.esri-tooltip-editable-field__value__content--read-only{padding-inline:var(--calcite-input-padding-inline);block-size:var(--calcite-input-height);line-height:var(--calcite-input-height);font-size:var(--calcite-font-size--2)}.esri-tooltip-editable-field--feedback.esri-tooltip-editable-field--locked .esri-tooltip-editable-field__value__content{grid-column:span 2}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__title{color:var(--field-title-color);margin-inline-end:var(--field-title-extra-margin)}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__value__content{color:var(--field-value-color);align-self:center}.esri-tooltip-editable-field--feedback .esri-tooltip-editable-field__lock-icon{width:var(--icon-size--feedback);min-width:var(--icon-size--feedback);height:var(--icon-size--feedback);min-height:var(--icon-size--feedback);align-self:center;margin-top:-2px}.esri-tooltip-editable-field--input{padding:0}.esri-tooltip-editable-field--input .esri-tooltip-editable-field__title{font-size:var(--font-size--input)}.esri-tooltip-editable-field__input-wrapper{inline-size:var(--field-input-width)}.esri-tooltip-editable-field__input-message{text-wrap:auto;width:100%;margin-block-end:var(--calcite-input-message-spacing-value)}.esri-tooltip-editable-field__input-suffix{line-height:var(--field-height--input)}.esri-tooltip-editable-field__button{width:var(--field-height--input)}.esri-tooltip-value-by-value span:nth-child(2){margin-inline:7px}.esri-tooltip-help-message{gap:var(--calcite-app-spacing-2);margin-inline:calc(var(--content-padding-inline) * -1);border-block-start:solid 1px var(--calcite-color-border-3);padding-block-start:var(--content-padding-inline);padding-inline:var(--content-padding-inline);width:auto;min-width:var(--help-message-min-width);text-align:left;text-wrap:balance;white-space:break-spaces;font-size:var(--font-size);border-block-end:1px solid var(--calcite-color-foreground-1);justify-content:center;align-items:center;display:flex}.esri-tooltip-help-message:only-child{border-block:none;padding-block-start:var(--field-row-gap)}.esri-tooltip-help-message__icon{color:var(--calcite-color-status-info)}.esri-tooltip-help-message__text{padding-block-start:2px}.esri-tooltip ::view-transition-old(tooltip-content){animation-duration:.1s}.esri-tooltip ::view-transition-new(tooltip-content){animation-duration:.1s}.esri-tooltip{--offset-start: calc(-100% - var(--offset))}.esri-tooltip--debug:after{--size: 10px;margin-top:calc(var(--size) * -.5);margin-left:calc(var(--size) * -.5);width:var(--size);height:var(--size);content:"";background:var(--calcite-color-status-danger);position:absolute;top:0;left:0}.esri-tooltip--bottom .esri-tooltip-content{transform:translate(-50%,var(--offset))}.esri-tooltip--bottom-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--bottom-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--bottom-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--bottom-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}.esri-tooltip--leading.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),-50%)}.esri-tooltip--leading-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--leading-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--trailing-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset))}.esri-tooltip--top .esri-tooltip-content{transform:translate(-50%,var(--offset-start))}.esri-tooltip--top-left.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-right.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset-start),var(--offset-start))}.esri-tooltip--top-right.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--top-left.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-start.esri-tooltip--rtl .esri-tooltip-content,.esri-tooltip--top-end.esri-tooltip--ltr .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),-50%)}.esri-tooltip--trailing-start.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-start.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset-start))}.esri-tooltip--trailing-end.esri-tooltip--ltr .esri-tooltip-content,.esri-tooltip--leading-end.esri-tooltip--rtl .esri-tooltip-content{transform:translate(var(--offset),var(--offset))}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const As="arcgis-map",Ui={base:As,containerUI:`${As}-container-ui`,containerElement:`${As}-container-ui__element`,containerElementDefaultSlot:`${As}-container-ui__element-default`,containerElementPopupSlot:`${As}-container-ui__element-popup`,containerTopLeftColumn:`${As}-container-ui__top-left-column`,containerTopRightColumn:`${As}-container-ui__top-right-column`,containerBottomLeftRow:`${As}-container-ui__bottom-left-row`,containerBottomRightRow:`${As}-container-ui__bottom-right-row`,containerElementTopLeft:`${As}-container-ui__element-top-left`,containerElementTopRight:`${As}-container-ui__element-top-right`,containerElementBottomLeft:`${As}-container-ui__element-bottom-left`,containerElementBottomRight:`${As}-container-ui__element-bottom-right`,containerElementTopStart:`${As}-container-ui__element-top-start`,containerElementTopEnd:`${As}-container-ui__element-top-end`,containerElementBottomStart:`${As}-container-ui__element-bottom-start`,containerElementBottomEnd:`${As}-container-ui__element-bottom-end`},Po={topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",topStart:"top-start",topEnd:"top-end",bottomStart:"bottom-start",bottomEnd:"bottom-end",popup:"popup"};function xqe(t,e,i){return j`<div class=${O({[Ui.containerElementPopupSlot]:!0})}><slot name=${Po.popup} @slotchange=${e}></slot></div><div class=${O({[Ui.containerElementDefaultSlot]:!0})}>${i}<slot></slot></div><div class=${O({[Ui.containerTopLeftColumn]:!0})}><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementTopLeft]:!0})}><slot name=${Po.topLeft}></slot></div><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementTopStart]:!0})}><slot name=${t==="ltr"?Po.topStart:Po.topEnd}></slot></div></div><div class=${O({[Ui.containerTopRightColumn]:!0})}><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementTopRight]:!0})}><slot name=${Po.topRight}></slot></div><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementTopEnd]:!0})}><slot name=${t==="ltr"?Po.topEnd:Po.topStart}></slot></div></div><div class=${O({[Ui.containerBottomLeftRow]:!0})}><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementBottomLeft]:!0})}><slot name=${Po.bottomLeft}></slot></div><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementBottomStart]:!0})}><slot name=${t==="ltr"?Po.bottomStart:Po.bottomEnd}></slot></div></div><div class=${O({[Ui.containerBottomRightRow]:!0})}><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementBottomRight]:!0})}><slot name=${Po.bottomRight}></slot></div><div class=${O({[Ui.containerElement]:!0,[Ui.containerElementBottomEnd]:!0})}><slot name=${t==="ltr"?Po.bottomEnd:Po.bottomStart}></slot></div></div>`}const Sqe=Qe`:host{--arcgis-internal-color-black-30: color-mix(in srgb, #000000 30.2%, transparent);--arcgis-internal-box-shadow: var(--calcite-spacing-none) var(--calcite-spacing-px) var(--calcite-spacing-base) var(--arcgis-internal-color-black-30);--arcgis-internal-top-max-width: calc(min(100cqw, 100vw) - var(--calcite-spacing-xxxl));--arcgis-internal-panel-width: 300px;--arcgis-internal-panel-height: 100%;--arcgis-internal-panel-height-sm: 240px;--arcgis-internal-panel-height-md: 420px;--arcgis-internal-panel-height-lg: 540px;--arcgis-internal-panel-height-xl: 680px;--arcgis-internal-basemap-gallery-width-lg: 450px;--arcgis-expand-max-height: var(--calcite-spacing-xxxl);--arcgis-collapse-icon-flip: scaleX(1);--arcgis-row-direction: row;--arcgis-legend-internal-width: 300px;--arcgis-layout-overlay-space-top: 0px;--arcgis-layout-overlay-space-bottom: 0px;--arcgis-layout-overlay-space-left: 0px;--arcgis-layout-overlay-space-right: 0px;--arcgis-internal-sketch-justify-content: flex-start}:host{display:block;position:relative;height:100%;width:100%;padding:var(--calcite-spacing-none);margin:var(--calcite-spacing-none);container:arcgis-map-container/size;contain:layout}::slotted(:is([closed],[closed="true"])){display:none}:dir(rtl) ::slotted(:not(arcgis-swipe)){direction:rtl}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-attachments,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-coordinate-conversion,arcgis-daylight,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-elevation-profile,arcgis-expand,arcgis-feature-form,arcgis-features,arcgis-feature-table,arcgis-fullscreen,arcgis-grid-controls,arcgis-home,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-link-chart-layout-switcher,arcgis-locate,arcgis-measurement,arcgis-navigation-toggle,arcgis-oriented-imagery-viewer,arcgis-print,arcgis-search,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-time-slider,arcgis-time-zone-label,arcgis-track,arcgis-utility-network-associations,arcgis-utility-network-trace,arcgis-utility-network-validate-topology,arcgis-version-management,arcgis-video-player,arcgis-weather,arcgis-zoom)){box-shadow:var(--arcgis-internal-box-shadow)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width);min-width:var(--calcite-spacing-xxxl);min-height:var(--calcite-spacing-xxxl);transition:max-height .25s ease-in-out;overflow-y:auto}.arcgis-map-container-ui{position:absolute;inset:var(--calcite-spacing-none);padding:var(--calcite-spacing-none);z-index:var(--calcite-z-index);pointer-events:none;background:none}.arcgis-map-container-ui__element{display:flex;flex-direction:column;pointer-events:none;width:max-content;max-width:100%}.arcgis-map-container-ui__element .esri-widget--panel{min-width:var(--arcgis-internal-panel-width)}.arcgis-map-container-ui__element-popup,.arcgis-map-container-ui__element-default{pointer-events:none;max-width:100%;position:absolute;display:block;inset:var(--calcite-spacing-none);width:100%;::slotted(:not(arcgis-swipe)){pointer-events:auto}}.arcgis-map-container-ui__top-left-column{position:absolute;top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-top:var(--calcite-spacing-lg);margin-left:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-left:var(--arcgis-layout-overlay-space-left);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}}.arcgis-map-container-ui__top-left-column:dir(rtl){align-items:flex-end;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__top-right-column{position:absolute;top:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;margin-top:var(--calcite-spacing-lg);margin-right:var(--calcite-spacing-lg);padding-top:var(--arcgis-layout-overlay-space-top);padding-right:var(--arcgis-layout-overlay-space-right);::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__top-right-column:dir(rtl){align-items:flex-start;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-top-left{top:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-left:dir(rtl){align-items:flex-end}.arcgis-map-container-ui__element-top-right{position:relative;justify-content:flex-start;align-items:flex-end;margin-left:auto;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-right:dir(rtl){align-items:flex-start}.arcgis-map-container-ui__element-top-start{position:relative;justify-content:flex-start;align-items:flex-start;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-start:dir(rtl){align-items:flex-end;--arcgis-internal-sketch-justify-content: flex-start;::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}}.arcgis-map-container-ui__element-top-end{position:relative;justify-content:flex-start;align-items:flex-end;::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column wrap-reverse}::slotted(*){margin-bottom:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-top-end:dir(rtl){align-items:flex-start;--arcgis-internal-sketch-justify-content: flex-end}.arcgis-map-container-ui__bottom-left-row{position:absolute;bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:row;align-items:flex-end;max-width:100%;margin-left:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-left:var(--arcgis-layout-overlay-space-left);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-right:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}}.arcgis-map-container-ui__bottom-left-row:dir(rtl){flex-direction:row-reverse;::slotted(arcgis-floor-filter){--arcgis-row-direction: row-reverse}}.arcgis-map-container-ui__bottom-right-row{position:absolute;bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);display:flex;flex-direction:row-reverse;align-items:flex-end;max-width:100%;margin-right:var(--calcite-spacing-lg);margin-bottom:var(--calcite-spacing-xxxl);padding-right:var(--arcgis-layout-overlay-space-right);padding-bottom:var(--arcgis-layout-overlay-space-bottom);::slotted(:last-child){margin-left:var(--calcite-spacing-xxl)}::slotted(arcgis-floor-filter){--arcgis-internal-floor-filter-column-direction: column-reverse;--arcgis-internal-floor-filter-button-border-width: 0 0 1px}::slotted(*){max-width:var(--arcgis-internal-top-max-width)}::slotted(arcgis-expand){--arcgis-internal-sketch-justify-content: flex-end}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}}.arcgis-map-container-ui__bottom-right-row:dir(rtl){flex-direction:row;::slotted(arcgis-floor-filter){--arcgis-row-direction: row}}.arcgis-map-container-ui__element-bottom-left{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-right{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}}.arcgis-map-container-ui__element-bottom-start{bottom:var(--calcite-spacing-none);left:var(--calcite-spacing-none);display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;flex-flow:row;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: none;--arcgis-expand-icon-number-right: calc(-1 * var(--calcite-spacing-xs))}::slotted(:is(arcgis-floor-filter,arcgis-expand)){--arcgis-collapse-icon-flip: scaleX(-1)}::slotted(arcgis-sketch){--sketch-pad-flex-flow: wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end}::slotted(*){margin-right:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-right:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-start}}.arcgis-map-container-ui__element-bottom-end{bottom:var(--calcite-spacing-none);right:var(--calcite-spacing-none);align-items:flex-end;justify-content:flex-end;margin-left:auto;flex-flow:row-reverse;::slotted(arcgis-coordinate-conversion){--arcgis-coordinate-conversion-flex-direction: column-reverse}::slotted(arcgis-expand){--arcgis-expand-icon-number-left: calc(-1 * var(--calcite-spacing-xs));--arcgis-expand-icon-number-right: none}::slotted(arcgis-sketch){--sketch-pad-flex-flow: row-reverse wrap-reverse}::slotted(arcgis-sketch[layout="vertical"]){--sketch-pad-flex-flow: column-reverse wrap-reverse}::slotted(arcgis-floor-filter){--arcgis-floor-filter-align-items: flex-end;--arcgis-row-direction: row-reverse}::slotted(*){margin-left:var(--calcite-spacing-sm-plus)}::slotted(:dir(rtl)){margin-left:var(--calcite-spacing-none);--arcgis-internal-sketch-justify-content: flex-end}}.arcgis-map-container-ui__element>*{pointer-events:auto}@container arcgis-map-container (height >= 0){::slotted(arcgis-sketch){--responsive-toolbar-vert-width: var(--calcite-spacing-none);--responsive-toolbar-vert-height: min(100vh - 120px, 100cqh - 120px);--responsive-toolbar-horiz-width: min(100vw - 60px, 100cqw - 60px);--responsive-toolbar-horiz-height: var(--calcite-spacing-none)}}@container arcgis-map-container (max-height: 544px) or (max-width: 544px){::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-button-display: none;--arcgis-internal-floor-filter-menu-width: 225px}}@container arcgis-map-container (max-height: 499.99px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-sm);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-sm)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-sm)}}@container arcgis-map-container (min-height: 500px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-md);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-md)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 320px;--arcgis-internal-floor-filter-levels-max-height: 320px}}@container arcgis-map-container (min-height: 768px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-floor-filter)){--arcgis-internal-floor-filter-menu-max-height: 420px;--arcgis-internal-floor-filter-levels-max-height: 420px}}@container arcgis-map-container (min-height: 992px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-lg);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-lg)}}@container arcgis-map-container (min-height: 1200px){.arcgis-map-container-ui__element>*{--arcgis-expand-max-height: var(--arcgis-internal-panel-height-xl);--arcgis-internal-panel-height: var(--arcgis-internal-panel-height-xl)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-legend,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){max-height:var(--arcgis-internal-panel-height-xl)}}@container arcgis-map-container (min-width: 544px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 768px){::slotted(:is(arcgis-legend[card-style-layout="auto"])){--arcgis-legend-internal-width: auto}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 992px){::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-gallery,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}@container arcgis-map-container (min-width: 1200px){::slotted(:is(arcgis-basemap-gallery)){width:var(--arcgis-internal-basemap-gallery-width-lg)}::slotted(:is(arcgis-area-measurement-2d,arcgis-area-measurement-3d,arcgis-basemap-layer-list,arcgis-bookmarks,arcgis-building-explorer,arcgis-catalog-layer-list,arcgis-directions,arcgis-direct-line-measurement-3d,arcgis-distance-measurement-2d,arcgis-editor,arcgis-feature-form,arcgis-features,arcgis-layer-list,arcgis-line-of-sight,arcgis-print,arcgis-shadow-cast,arcgis-slice,arcgis-table-list,arcgis-utility-network-trace,arcgis-grid-controls)){width:var(--arcgis-internal-panel-width)}}`;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const $qe={"top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right","bottom-leading":"bottom-start","bottom-trailing":"bottom-end","top-leading":"top-start","top-trailing":"top-end"},Iqe=["manual"];function _k(t){t.el.childElem&&(t.el.childElem.ownedBy=t.el),t.position&&Iqe.includes(t.position)?t.el.removeAttribute("slot"):t.position&&(t.el.slot=$qe[t.position]);const e=kqe(t);if(!e){const i=Aqe(t);if(!i){qhe(t);return}return NZ(i,t,!0),i}return Tqe(e,t.el.parent)||(t.el.parent=e,e.localName==="arcgis-expand"?Eqe(e,t):e.localName==="arcgis-placement"?Mqe(e,t):NZ(e,t,!1)),e}function kqe({el:t}){for(let e=t.parentElement;e;e=e?.parentElement??null){if(RZ.has(e.localName))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&RZ.has(e.ownedBy.localName))return e.ownedBy}}const RZ=new Set(["arcgis-map","arcgis-scene","arcgis-link-chart","arcgis-expand","arcgis-placement"]);function Tqe(t,e){if(t!==e)return!1;const i=t.localName;return i==="arcgis-expand"||i==="arcgis-placement"}function W3(t,e,i="arcgisReady"){const r=t;if(r.view)e(r.view);else{let s=function(n){n.target===t&&(W3(t,e,i),t.removeEventListener(i,s))};t.addEventListener(i,s)}}const Eqe=(t,e)=>W3(t,i=>{const r=t9(e);e.el.shadowRoot?t.content=e.el:e.el.childElem&&t.content!=null&&r.append(e.el.childElem),e.el.view=i}),Mqe=(t,e)=>W3(t,i=>{const r=t9(e);e.el.childElem&&r.append(e.el.childElem),e.el.view=i}),NZ=(t,e,i)=>W3(t,r=>{i&&qhe(e),e.el.view=r,e.referenceElement=t},"arcgisViewReadyChange");function Cqe(t,e){return e===void 0||t?.targetGeometry!==e?.targetGeometry||t?.rotation!==e?.rotation||t?.scale!==e?.scale}function Pqe(t,e){return Bhe(e?.center,t)}function Bhe(t,e){if(typeof e=="string")return Bhe(t,e.split(",").map(Number));if(!t)return e;if(Array.isArray(e)){const i=e[0],r=e[1],s=e.length>2?e[2]:void 0;if(i!==t.longitude||r!==t.latitude||s!==t.z)return e}else if(e&&!t?.equals(e))return e}function qhe(t){t.el.childElem&&t9(t).append(t.el.childElem)}function t9(t){return t.el.shadowRoot??t.el}function Aqe(t,e){const i=t.referenceElement;if(typeof i!="string")return i??void 0;const r=i.includes("#")||i.includes(".")||i.includes("["),s=t.el.getRootNode();return(r?void 0:s.querySelector(`#${i}`))??s.querySelector(i)??void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */let Lqe=class extends SA{constructor(e){super(e),this.direction=EA(),this.component.listen("arcgisViewClick",i=>{this._handleOpenPopup(i.detail)}),this.component.listenOn(globalThis,"unhandledrejection",i=>{if(i.reason?.name==="webgl:required"){const{name:r}=i.reason;this.webGLError={name:r}}})}hostLifecycle(){return Ts(()=>this.component.view.popup?.visible,()=>{this.popupRef?.visible&&(this.popupRef.visible=!1)})}openPopup(e){this.popupRef?this.popupRef.open(e):this.component.view.openPopup(e)}closePopup(){this.popupRef?this.popupRef.visible=!1:this.component.view.closePopup()}async _handleOpenPopup(e){if(this.popupRef&&!this.component.popupDisabled){e.stopPropagation();const{location:i,promises:r}=await this.popupRef?.handleViewClick(e);r?.length&&(this.component.view.closePopup(),this.popupRef?.open({location:i,promises:r}))}}_handlePopupSlotChange(e){const i=dwe(e.target,"arcgis-popup");!this.popupRef&&i.length?this.popupRef=i[0]:i.length||(this.popupRef=void 0)}_webGLErrorAlert(){return this.webGLError?j`<calcite-alert icon=x-octagon kind=danger open .label=${this.webGLError.name}><div slot=title>Unable to display map. WebGL2 support is required.</div><div slot=message>Ensure that your browser and hardware meet the minimum requirements.</div><calcite-link slot=link href=https://esriurl.com/webgl-faq>https://esriurl.com/webgl-faq</calcite-link></calcite-alert>`:null}render(){return xqe(this.direction,e=>this._handlePopupSlotChange(e),this._webGLErrorAlert())}};const Oqe=c2((t,e)=>{const i=ve();return e.onLifecycle(()=>de(()=>{const{map:r}=t;if(!r||r.destroyed)return[];const s=[];return r.loadError&&s.push(r),r.basemap?.loadError&&s.push(r.basemap),r.ground.loadError&&s.push(r.ground),[...r.allLayers,...r.allTables].forEach(n=>{n.loadError&&s.push(n)}),s},r=>{r.length&&(t.loadErrorSources=r,i.emit())})),i}),Rqe=c2((t,e)=>{const i=ve();return e.onLifecycle(()=>de(()=>t.view?.readyState,r=>{(r==="map-content-error"||r==="rendering-error")&&i.emit()})),i});/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const Nqe=Vhe(mqe),Dqe=Vhe(bje);var Dy;let Fqe=(Dy=class extends it{constructor(){super(),this._containerRef=wi(),this._mapRef=wi(),this._uiController=new Lqe(this),this.extraContent=new ue,this.arcgisLoadError=Oqe(this),this.arcgisViewReadyError=Rqe(this),this._map=Nqe(this),this.view=Dqe(this),this.animationsDisabled=this.view.animationsEnabled,this.allLayerViews=this.view.allLayerViews,this.analyses=this.view.analyses,this.autoDestroyDisabled=!1,this.background=this.view.background,this.basemap=this._map.basemap,this.basemapView=this.view.basemapView,this.constraints=this.view.constraints,this.displayFilterDisabled=this.view.displayFilterEnabled,this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.graphics=this.view.graphics,this.ground=this._map.ground,this.highlights=this.view.highlights,this.highlightOptions=this.view.highlightOptions,this.ipsInfo=this._map.ipsInfo,this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.map=this.view.map,this.navigation=this.view.navigation,this.padding=this.view.padding,this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.ready=this.view.ready,this.resizeAlign=this.view.resizeAlign,this.resolution=this.view.resolution,this.rotation=this.view.rotation,this.spatialReference=this.view.spatialReference,this.spatialReferenceLocked=this.view.spatialReferenceLocked,this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.timeZone=this.view.timeZone,this.updating=this.view.updating,this.visibleArea=this.view.visibleArea,this.arcgisViewAnalysisViewCreate=Pr(()=>this.view,"analysis-view-create"),this.arcgisViewAnalysisViewCreateError=Pr(()=>this.view,"analysis-view-create-error"),this.arcgisViewAnalysisViewDestroy=Pr(()=>this.view,"analysis-view-destroy"),this.arcgisViewChange=ve(),this.arcgisViewClick=Pr(()=>this.view,"click"),this.arcgisViewDoubleClick=Pr(()=>this.view,"double-click"),this.arcgisViewDrag=Pr(()=>this.view,"drag"),this.arcgisViewHold=Pr(()=>this.view,"hold"),this.arcgisViewImmediateClick=Pr(()=>this.view,"immediate-click"),this.arcgisViewImmediateDoubleClick=Pr(()=>this.view,"immediate-double-click"),this.arcgisViewKeyDown=Pr(()=>this.view,"key-down"),this.arcgisViewKeyUp=Pr(()=>this.view,"key-up"),this.arcgisViewLayerviewCreate=Pr(()=>this.view,"layerview-create"),this.arcgisViewLayerviewCreateError=Pr(()=>this.view,"layerview-create-error"),this.arcgisViewLayerviewDestroy=Pr(()=>this.view,"layerview-destroy"),this.arcgisViewMouseWheel=Pr(()=>this.view,"mouse-wheel"),this.arcgisViewPointerDown=Pr(()=>this.view,"pointer-down"),this.arcgisViewPointerEnter=Pr(()=>this.view,"pointer-enter"),this.arcgisViewPointerLeave=Pr(()=>this.view,"pointer-leave"),this.arcgisViewPointerMove=Pr(()=>this.view,"pointer-move"),this.arcgisViewPointerUp=Pr(()=>this.view,"pointer-up"),this.arcgisViewReadyChange=ve(),this.view.ui={components:["attribution"]}}get aria(){return this.view?.aria}set aria(e){this.view&&(this.view.aria=e)}get center(){return this.view.center}set center(e){const i=Pqe(e,this.view);i&&(this.view.center=i)}get extent(){return this.view.extent}set extent(e){e&&!this.extent?.equals(e)&&(this.view.extent=e)}get focusAreas(){return this.map?this.map.focusAreas:{areas:[],style:"bright"}}set focusAreas(e){this.map&&(this.map.focusAreas=e)}get gamepad(){return this.view.input.gamepad}get interacting(){return this.view.interacting}get itemId(){return this._map.portalItem?.id}set itemId(e){wqe(this._map,this),this._map.portalItem={id:e},this.view.map=this._map}get navigating(){return this.view.navigating}get scale(){return this.view.scale}set scale(e){this.view.scale=e}get stationary(){return this.view.stationary}get viewpoint(){return this.view.viewpoint}set viewpoint(e){Cqe(this.viewpoint,e)&&(this.view.viewpoint=e)}get zoom(){return this.view.zoom}set zoom(e){this.view.zoom=e}async addLayer(e,i){this.map?.add(e,i)}async addLayers(e,i){this.map?.addMany(e,i)}async addTable(e){this.map?.tables.add(e)}async addTables(e,i){this.map?.tables.addMany(e,i)}async closePopup(){this._uiController.closePopup()}async destroy(){await this.manager.destroy()}async goTo(e,i){return await this.view.goTo(e,i)}async hitTest(e,i){return await this.view.hitTest(e,i)}async openPopup(e){this._uiController.openPopup(e)}async takeScreenshot(e){return await this.view.takeScreenshot(e)}toMap(e){return this.view.toMap(e)}toScreen(e,i){return this.view.toScreen(e,i)}async tryFatalErrorRecovery(){this.view.tryFatalErrorRecovery()}async viewOnReady(e,i){return await this.componentOnReady(),await this.view.whenReady().then(()=>e?.()).catch(i)}async whenAnalysisView(e){return await this.view.whenAnalysisView(e)}async whenLayerView(e){return await this.view?.whenLayerView(e)}loaded(){var i;const e=this;e.el.childElem=this._mapRef.value,(i=this.view).container??(i.container=e.el.childElem),this.map||(this.map=this._map),this.manager.onLifecycle(()=>[de(()=>this.map,r=>{r&&(this._map=r)},{initial:!0,sync:!0}),de(()=>this.view.stationary,()=>this.arcgisViewChange.emit(),{initial:!0}),de(()=>this.view.ready,()=>this.arcgisViewReadyChange.emit(),{initial:this.view.ready})])}renderMain(){return j`<div class=${O(Ui.base)} ${ct(this._mapRef)}></div>`}render(){return j`<section class=${O(Ui.containerUI)} ${ct(this._containerRef)}>${this._uiController.render()}${this.extraContent}</section>${this.renderMain()}`}},Dy.properties={_map:16,view:32,animationsDisabled:5,aria:0,allLayerViews:0,analyses:0,autoDestroyDisabled:5,background:0,basemap:1,basemapView:0,center:1,constraints:0,displayFilterDisabled:5,extent:0,fatalError:0,floors:0,focusAreas:0,gamepad:32,graphics:0,ground:1,highlights:0,highlightOptions:0,interacting:32,ipsInfo:0,itemId:3,layerViews:0,magnifier:0,map:0,navigating:32,navigation:0,padding:0,popup:0,popupDisabled:5,ready:4,resizeAlign:1,resolution:8,rotation:9,scale:9,spatialReference:0,spatialReferenceLocked:5,stationary:32,suspended:7,theme:0,timeExtent:0,timeZone:1,updating:4,viewpoint:0,visibleArea:0,zoom:9,loadErrorSources:0},Dy.styles=[_qe,Sqe],Dy);Ms("arcgis-map",Fqe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const zqe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:var(--calcite-z-index);inline-size:100%;overflow:hidden;background-color:var(--calcite-progress-background-color, var(--calcite-color-border-3))}.bar{z-index:var(--calcite-z-index);background-color:var(--calcite-progress-fill-color, var(--calcite-color-brand))}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) / var(--calcite-internal-duration-factor) * 11 / var(--calcite-internal-duration-factor)) linear infinite}.indeterminate.calcite--rtl{animation-name:looping-progress-bar-ani-rtl}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-progress-text-color, var(--calcite-color-text-2))}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%,0,0)}50%{inline-size:40%}to{transform:translate3d(600%,0,0)}}@keyframes looping-progress-bar-ani-rtl{0%{transform:translate3d(100%,0,0)}50%{inline-size:40%}to{transform:translate3d(-600%,0,0)}}:host([hidden]){display:none}[hidden]{display:none}`,gR={track:"track",bar:"bar",text:"text"},KP=class KP extends it{constructor(){super(...arguments),this.reversed=!1,this.type="determinate",this.value=0}render(){const e=this.type==="determinate",i=e?{width:`${this.value}%`}:{},r=Of(this.el);return j`<div .ariaLabel=${this.label||this.text} .ariaValueMax=${e?"100":void 0} .ariaValueMin=${e?"0":void 0} .ariaValueNow=${e?this.value:void 0} role=progressbar><div class=${O(gR.track)}><div class=${O({[gR.bar]:!0,indeterminate:this.type==="indeterminate",[$A.rtl]:r==="rtl",reversed:this.reversed})} style=${ot(i)}></div></div>${this.text?j`<div class=${O(gR.text)}>${this.text}</div>`:null}</div>`}};KP.properties={label:1,reversed:[7,{},{reflect:!0,type:Boolean}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},KP.styles=zqe;let rj=KP;fi("calcite-progress",rj);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const DZ=(t,e,i)=>{const r=new Map;for(let s=e;s<=i;s++)r.set(t[s],s);return r},jqe=u_(class extends d_{constructor(t){if(super(t),t.type!==Vc.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let r;i===void 0?i=e:e!==void 0&&(r=e);const s=[],n=[];let o=0;for(const a of t)s[o]=r?r(a,o):o,n[o]=i(a,o),o++;return{values:n,keys:s}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,r]){const s=Qbe(t),{values:n,keys:o}=this.dt(e,i,r);if(!Array.isArray(s))return this.ut=o,n;const a=this.ut??(this.ut=[]),l=[];let c,d,h=0,f=s.length-1,m=0,y=n.length-1;for(;h<=f&&m<=y;)if(s[h]===null)h++;else if(s[f]===null)f--;else if(a[h]===o[m])l[m]=Wf(s[h],n[m]),h++,m++;else if(a[f]===o[y])l[y]=Wf(s[f],n[y]),f--,y--;else if(a[h]===o[y])l[y]=Wf(s[h],n[y]),e1(t,l[y+1],s[h]),h++,y--;else if(a[f]===o[m])l[m]=Wf(s[f],n[m]),e1(t,s[h],s[f]),f--,m++;else if(c===void 0&&(c=DZ(o,m,y),d=DZ(a,h,f)),c.has(a[h]))if(c.has(a[f])){const v=d.get(o[m]),b=v!==void 0?s[v]:null;if(b===null){const w=e1(t,s[h]);Wf(w,n[m]),l[m]=w}else l[m]=Wf(b,n[m]),e1(t,s[h],b),s[v]=null;m++}else EL(s[f]),f--;else EL(s[h]),h++;for(;m<=y;){const v=e1(t,l[y+1]);Wf(v,n[m]),l[m++]=v}for(;h<=f;){const v=s[h++];v!==null&&EL(v)}return this.ut=o,JV(t,l),na}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Vqe={max:"320px"},Uqe={max:"476px"},Bqe={max:"768px"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const vR={width:{small:bR(Bqe.max),xsmall:bR(Uqe.max),xxsmall:bR(Vqe.max)}};function bR(t){return parseInt(t)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function VC(t,e){return(t+e)%e}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const qqe=6e3,fr={container:"container",containerOverlaid:"container--overlaid",containerEdged:"container--edged",itemContainer:"item-container",itemContainerForward:"item-container--forward",itemContainerBackward:"item-container--backward",pagination:"pagination",paginationItems:"pagination-items",paginationItem:"pagination-item",paginationItemIndividual:"pagination-item--individual",paginationItemVisible:"pagination-item--visible",paginationItemOutOfRange:"pagination-item--out-of-range",paginationItemSelected:"pagination-item--selected",paginationItemRangeEdge:"pagination-item--range-edge",pageNext:"page-next",pagePrevious:"page-previous",autoplayControl:"autoplay-control",autoplayProgress:"autoplay-progress"},vv={chevronLeft:"chevron-left",chevronRight:"chevron-right",inactive:"bullet-point",active:"bullet-point-large",pause:"pause-f",play:"play-f"},k1={medium:7,small:5,xsmall:3,xxsmall:1},Gqe="calcite-carousel-container",Hqe={host:t=>`${Gqe}-${t}`},Wqe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%;--calcite-internal-carousel-pagination-space: 1.5rem;--calcite-internal-carousel-pagination-space-wide: 3.5rem;--calcite-internal-carousel-pagination-background-color: var( --calcite-carousel-pagination-background-color, transparent );--calcite-internal-carousel-pagination-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, transparent );--calcite-internal-carousel-pagination-background-color-press: var( --calcite-carousel-pagination-background-color-press, transparent );--calcite-internal-carousel-pagination-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, transparent );--calcite-internal-carousel-pagination-overlay-background-color: var( --calcite-carousel-pagination-background-color, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-overlay-background-color-hover: var( --calcite-carousel-pagination-background-color-hover, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-active: var( --calcite-carousel-pagination-background-color-press, var(--calcite-color-foreground-2) );--calcite-internal-carousel-pagination-overlay-background-color-selected: var( --calcite-carousel-pagination-background-color-selected, var(--calcite-color-foreground-1) );--calcite-internal-carousel-pagination-icon-color-hover: var( --calcite-carousel-pagination-icon-color-hover, var(--calcite-color-text-1) );--calcite-internal-carousel-pagination-icon-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-border-1) );--calcite-internal-carousel-pagination-icon-color-selected: var( --calcite-carousel-pagination-icon-color-selected, var(--calcite-color-brand) );--calcite-internal-carousel-control-icon-color-hover: var( --calcite-carousel-control-icon-color-hover, var(--calcite-internal-carousel-pagination-icon-color-hover) );--calcite-internal-carousel-control-icon-color: var( --calcite-carousel-control-icon-color, var(--calcite-carousel-pagination-icon-color, var(--calcite-color-text-3)) );--calcite-internal-carousel-autoplay-progress-background-color: var( --calcite-carousel-autoplay-progress-background-color, var(--calcite-color-border-3) );--calcite-internal-carousel-autoplay-progress-fill-color: var( --calcite-carousel-autoplay-progress-fill-color, var(--calcite-color-brand) );--calcite-internal-carousel-autoplay-control-color: var( --calcite-carousel-pagination-icon-color, var(--calcite-color-text-3) )}.container{position:relative;display:flex;inline-size:100%;flex-direction:column;overflow:hidden;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-color-text-2);outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container--edged:not(.container--overlaid){padding-inline:var(--calcite-internal-carousel-pagination-space-wide);inline-size:calc(100% - var(--calcite-internal-carousel-pagination-space-wide) * 2)}.item-container{display:flex;flex:1 1 auto;align-items:flex-start;justify-content:center;overflow:auto;padding:.25rem;animation-name:none;animation-duration:var(--calcite-animation-timing)}.container--overlaid .item-container{padding:0}.item-container--forward{animation-name:item-forward}.item-container--backward{animation-name:item-backward}calcite-carousel-item:not([selected]){opacity:0}.pagination{margin:.75rem;display:flex;flex-direction:row;align-items:center;justify-content:center;inline-size:auto}.pagination-items{display:flex;flex-direction:row;align-items:center}.container--overlaid .pagination{position:absolute}.pagination-item.page-next,.pagination-item.page-previous{color:var(--calcite-internal-carousel-control-icon-color);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color)}.pagination-item.page-next:hover,.pagination-item.page-previous:hover{color:var(--calcite-internal-carousel-control-icon-color-hover);--calcite-icon-color: var(--calcite-internal-carousel-control-icon-color-hover)}.container--edged .page-next,.container--edged .page-previous{block-size:3rem;inline-size:3rem;position:absolute;inset-block-start:50%;transform:translateY(-50%)}.container--edged .page-next{inset-inline-end:0}.container--edged .page-previous{inset-inline-start:0}.container--overlaid .pagination{inset-block-start:unset;inset-block-end:0;inset-inline:0}.pagination-item.autoplay-control{position:relative;color:var(--calcite-internal-carousel-autoplay-control-color);--calcite-progress-fill-color: var(--calcite-internal-carousel-autoplay-progress-fill-color);--calcite-progress-background-color: var(--calcite-internal-carousel-autoplay-progress-background-color)}.autoplay-control:focus .autoplay-progress{inset-block-end:4px;inset-inline:2px;inline-size:calc(100% - 4px)}.autoplay-progress{position:absolute;inset-block-end:2px;inset-inline:0;inline-size:100%}.pagination-item{margin:0;block-size:2rem;inline-size:2rem;cursor:pointer;align-items:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;-webkit-appearance:none;display:flex;align-content:center;justify-content:center;background-color:var(--calcite-internal-carousel-pagination-background-color);color:var(--calcite-internal-carousel-pagination-icon-color)}.pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-background-color-hover);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-background-color-press);outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-background-color-press);color:var(--calcite-internal-carousel-pagination-icon-color-hover)}.pagination-item calcite-icon{color:inherit;pointer-events:none}.pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}.pagination-item--individual{pointer-events:none;inline-size:0px;padding:0;opacity:0;visibility:hidden;transition:var(--calcite-animation-timing) ease-in-out inline-size,var(--calcite-animation-timing) ease-in-out padding,var(--calcite-animation-timing) ease-in-out opacity}.pagination-item--individual.pagination-item--visible{pointer-events:auto;inline-size:2rem;opacity:1;visibility:visible}.pagination-item--range-edge calcite-icon{scale:.75;transition:var(--calcite-animation-timing) ease-in-out scale}.container--overlaid .pagination-item{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color)}.container--overlaid .pagination-item:hover{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-hover)}.container--overlaid .pagination-item:focus{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item:active{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-active)}.container--overlaid .pagination-item.pagination-item--selected{background-color:var(--calcite-internal-carousel-pagination-overlay-background-color-selected);color:var(--calcite-internal-carousel-pagination-icon-color-selected)}@keyframes item-forward{0%{transform:translate3d(100px,0,0)}to{transform:translateZ(0)}}@keyframes item-backward{0%{transform:translate3d(-100px,0,0)}to{transform:translateZ(0)}}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,XP=class XP extends it{constructor(){super(...arguments),this.autoplayHandler=()=>{this.clearIntervals(),this.slideDurationInterval=setInterval(this.timer,this.autoplayDuration/100)},this.containerRef=wi(),this.containerId=Hqe.host(Lf()),this.itemContainerRef=wi(),this.resizeHandler=({contentRect:{width:e}})=>{this.setMaxItemsToBreakpoint(e)},this.resizeObserver=Ya("resize",e=>e.forEach(this.resizeHandler)),this.slideDurationInterval=null,this.slideInterval=null,this.tabListRef=wi(),this.timer=()=>{let e=this.slideDurationRemaining;(!this.suspendedDueToFocus&&!this.suspendedDueToHover||this.userPreventsSuspend)&&(e<=.01?(e=1,this.direction="forward",this.nextItem(!1)):e=e-.01),e>0&&(this.slideDurationRemaining=e)},this.messages=xn(),this.focusSetter=ds()(this),this.direction="standby",this.items=[],this.maxItems=k1.xxsmall,this.playing=!1,this.slideDurationRemaining=1,this.suspendedDueToFocus=!1,this.suspendedDueToHover=!1,this.suspendedSlideDurationRemaining=1,this.userPreventsSuspend=!1,this.arrowType="inline",this.autoplay=!1,this.autoplayDuration=qqe,this.controlOverlay=!1,this.disabled=!1,this.calciteCarouselChange=ve({cancelable:!1}),this.calciteCarouselPause=ve({cancelable:!1}),this.calciteCarouselPlay=ve({cancelable:!1}),this.calciteCarouselResume=ve({cancelable:!1}),this.calciteCarouselStop=ve({cancelable:!1})}async play(){this.playing||this.autoplay!==""&&!this.autoplay&&this.autoplay!=="paused"||this.handlePlay(!0)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}async stop(){this.playing&&this.handlePause(!0)}connectedCallback(){super.connectedCallback(),this.resizeObserver?.observe(this.el)}async load(){(this.autoplay===""||this.autoplay)&&this.autoplay!=="paused"?this.handlePlay(!1):this.autoplay==="paused"&&(this.paused=!0)}willUpdate(e){e.has("autoplay")&&this.hasUpdated&&this.autoplayWatcher(this.autoplay),e.has("direction")&&(this.hasUpdated||this.direction!=="standby")&&this.directionWatcher(this.direction),e.has("playing")&&(this.hasUpdated||this.playing!==!1)&&(this.paused=!this.playing),(e.has("suspendedDueToFocus")&&(this.hasUpdated||this.suspendedDueToFocus!==!1)||e.has("suspendedDueToHover")&&(this.hasUpdated||this.suspendedDueToHover!==!1))&&this.suspendWatcher()}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),this.clearIntervals(),this.resizeObserver?.disconnect()}autoplayWatcher(e){e||this.handlePause(!1)}async directionWatcher(e){e==="standby"||!this.itemContainerRef.value||(await J0e(this.itemContainerRef.value,e==="forward"?"item-forward":"item-backward"),this.direction="standby")}suspendWatcher(){!this.suspendedDueToFocus&&!this.suspendedDueToHover?this.suspendEnd():this.suspendStart()}setMaxItemsToBreakpoint(e){if(e){if(e>=vR.width.small){this.maxItems=k1.medium;return}if(e>=vR.width.xsmall){this.maxItems=k1.small;return}if(e>=vR.width.xxsmall){this.maxItems=k1.xsmall;return}this.maxItems=k1.xxsmall}}clearIntervals(){clearInterval(this.slideDurationInterval),clearInterval(this.slideInterval)}nextItem(e){this.playing&&e&&(this.playing=!1);const i=VC(this.selectedIndex+1,this.items.length);this.setSelectedItem(i,e)}previousItem(){this.playing=!1;const e=VC(Math.max(this.selectedIndex-1,-1),this.items.length);this.setSelectedItem(e,!0)}handlePlay(e){this.playing=!0,this.autoplayHandler(),this.slideInterval=setInterval(this.autoplayHandler,this.autoplayDuration),e&&this.calciteCarouselPlay.emit()}handlePause(e){this.playing=!1,this.clearIntervals(),this.slideDurationRemaining=1,this.suspendedSlideDurationRemaining=1,e&&this.calciteCarouselStop.emit()}suspendStart(){this.suspendedSlideDurationRemaining=this.slideDurationRemaining}suspendEnd(){this.slideDurationRemaining=this.suspendedSlideDurationRemaining}handleSlotChange(e){const i=yM(e);if(i.length<1)return;const r=i.findIndex(n=>n.selected),s=r>-1?r:0;this.items=i,this.setSelectedItem(s,!1)}setSelectedItem(e,i){const r=this.selectedIndex;this.items.forEach((s,n)=>{const o=e===n;s.selected=o,o&&(this.selectedItem=s,this.selectedIndex=n)}),i&&(this.playing=!1,r!==this.selectedIndex&&this.calciteCarouselChange.emit())}handleArrowClick(e){const i=e.target.dataset.direction;this.playing&&this.handlePause(!0),i==="next"?(this.direction="forward",this.nextItem(!0)):i==="previous"&&(this.direction="backward",this.previousItem())}handleItemSelection(e){const i=e.target,r=parseInt(i.dataset.index);r!==this.selectedIndex&&(this.playing&&this.handlePause(!0),this.direction=r>this.selectedIndex?"forward":"backward",this.setSelectedItem(r,!0))}toggleRotation(){this.userPreventsSuspend=!0,this.playing?this.handlePause(!0):this.handlePlay(!0)}handleFocusIn(){const e=this.playing;e&&(this.suspendedDueToFocus=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseIn(){const e=this.playing;e&&(this.suspendedDueToHover=!0),(!this.suspendedDueToFocus||!this.suspendedDueToHover)&&e&&this.calciteCarouselPause.emit()}handleMouseOut(e){const i=!this.el.contains(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToHover=!1),i&&r&&!this.suspendedDueToFocus&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}handleFocusOut(e){const i=!e.composedPath().includes(e.relatedTarget),r=this.playing;i&&r&&(this.suspendedDueToFocus=!1),i&&r&&!this.suspendedDueToHover&&(this.userPreventsSuspend=!1,this.calciteCarouselResume.emit())}containerKeyDownHandler(e){if(e.target!==this.containerRef.value)return;const i=this.items.length-1;switch(e.key){case" ":case"Enter":e.preventDefault(),(this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.toggleRotation();break;case"ArrowRight":e.preventDefault(),this.direction="forward",this.nextItem(!0);break;case"ArrowLeft":e.preventDefault(),this.direction="backward",this.previousItem();break;case"Home":if(e.preventDefault(),this.selectedIndex===0)return;this.direction="backward",this.setSelectedItem(0,!0);break;case"End":if(e.preventDefault(),this.selectedIndex===i)return;this.direction="forward",this.setSelectedItem(i,!0);break}}tabListKeyDownHandler(e){const i=Array(...this.tabListRef.value.querySelectorAll(`button:not(.${fr.paginationItemOutOfRange})`)),r=e.target;switch(e.key){case"ArrowRight":Up(i,r,"next");break;case"ArrowLeft":Up(i,r,"previous");break;case"Home":e.preventDefault(),Up(i,r,"first");break;case"End":e.preventDefault(),Up(i,r,"last");break}}renderRotationControl(){const e=this.playing?this.messages.pause:this.messages.play,i=this.slideDurationRemaining*100;return j`<button .ariaLabel=${e} class=${O({[fr.paginationItem]:!0,[fr.autoplayControl]:!0})} @click=${this.toggleRotation} title=${e??ge}><calcite-icon .icon=${this.playing?vv.pause:vv.play} scale=s></calcite-icon>${this.playing&&j`<calcite-progress class=${O(fr.autoplayProgress)} .label=${this.messages.carouselItemProgress} .value=${i}></calcite-progress>`||""}</button>`}renderPaginationArea(){return j`<div class=${O({[fr.pagination]:!0,[fr.containerOverlaid]:this.controlOverlay})} @keydown=${this.tabListKeyDownHandler} ${ct(this.tabListRef)}>${(this.playing||this.autoplay===""||this.autoplay||this.autoplay==="paused")&&this.renderRotationControl()||""}${this.arrowType==="inline"&&this.renderArrow("previous")||""}${this.renderPaginationItems()}${this.arrowType==="inline"&&this.renderArrow("next")||""}</div>`}renderPaginationItems(){const{selectedIndex:e,maxItems:i,items:r,label:s,handleItemSelection:n}=this;return j`<div .ariaLabel=${s} class=${O(fr.paginationItems)} role=tablist>${jqe(r,o=>o.id,(o,a)=>{const l=r.length,c=a===e,d=a===0,h=a===l-1,f=l-i-1,m=e<i,y=e>=f,v=m?0:e-Math.floor(i/2),b=y?l:v+i,w=m?0:y?f:v,x=m?i+1:b,S=!d&&!h&&!c&&(a===w-1||a===x),$=c||a<=x&&a>=w-1,T=l-1<=i,C=c?vv.active:vv.inactive;return j`<button aria-controls=${(c?void 0:o.id)??ge} .ariaSelected=${c} class=${O({[fr.paginationItem]:!0,[fr.paginationItemIndividual]:!0,[fr.paginationItemSelected]:c,[fr.paginationItemRangeEdge]:l-1>i&&S,[fr.paginationItemOutOfRange]:!(T||$),[fr.paginationItemVisible]:T||$})} data-index=${a??ge} @click=${n} role=tab title=${o.label??ge}><calcite-icon .icon=${C} scale=l></calcite-icon></button>`})}</div>`}renderArrow(e){const i=e==="previous",r=Of(this.el),s=this.arrowType==="edge"?"m":"s",n=i?fr.pagePrevious:fr.pageNext,o=i?this.messages.previous:this.messages.next,a=i?vv.chevronLeft:vv.chevronRight;return j`<button aria-controls=${this.containerId??ge} class=${O({[fr.paginationItem]:!0,[n]:!0})} data-direction=${e??ge} @click=${this.handleArrowClick} title=${o??ge}><calcite-icon .flipRtl=${r==="rtl"} .icon=${a} .scale=${s}></calcite-icon></button>`}render(){const{direction:e}=this;return _n({disabled:this.disabled,children:j`<div .ariaLabel=${this.label} .ariaLive=${this.playing?"off":"polite"} .ariaRoleDescription=${this.messages.carousel} class=${O({[fr.container]:!0,[fr.containerOverlaid]:this.controlOverlay,[fr.containerEdged]:this.arrowType==="edge"})} @focusin=${this.handleFocusIn} @focusout=${this.handleFocusOut} @keydown=${this.containerKeyDownHandler} @mouseenter=${this.handleMouseIn} @mouseleave=${this.handleMouseOut} role=group tabindex=0 ${ct(this.containerRef)}><section class=${O({[fr.itemContainer]:!0,[fr.itemContainerForward]:e==="forward",[fr.itemContainerBackward]:e==="backward"})} id=${this.containerId??ge} ${ct(this.itemContainerRef)}><slot @slotchange=${this.handleSlotChange}></slot></section>${this.items.length>1&&this.renderPaginationArea()||""}${this.arrowType==="edge"&&this.renderArrow("previous")||""}${this.arrowType==="edge"&&this.renderArrow("next")||""}</div>`})}};XP.properties={direction:[16,{},{state:!0}],items:[16,{},{state:!0}],maxItems:[16,{},{state:!0}],playing:[16,{},{state:!0}],selectedIndex:[16,{},{state:!0}],slideDurationRemaining:[16,{},{state:!0}],suspendedDueToFocus:[16,{},{state:!0}],suspendedDueToHover:[16,{},{state:!0}],suspendedSlideDurationRemaining:[16,{},{state:!0}],userPreventsSuspend:[16,{},{state:!0}],arrowType:[3,{},{reflect:!0}],autoplay:[3,{},{reflect:!0}],autoplayDuration:[11,{},{type:Number,reflect:!0}],controlOverlay:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],label:1,messageOverrides:[0,{},{attribute:!1}],paused:[5,{},{type:Boolean}],selectedItem:[0,{},{attribute:!1}]},XP.styles=Wqe;let sj=XP;fi("calcite-carousel",sj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const FZ={container:"container",selected:"selected"},Jqe="calcite-carousel-item",Zqe={host:t=>`${Jqe}-${t}`},Yqe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex}.container{display:none;inline-size:var(--calcite-container-size-content-fluid)}:host([selected]) .container{display:block}:host([hidden]){display:none}[hidden]{display:none}`,QP=class QP extends it{constructor(){super(...arguments),this.guid=Zqe.host(Lf()),this.selected=!1}render(){const e=this.el.id||this.guid;return o2(this.el,"id",e),j`<div .ariaLabel=${this.label} class=${O({[FZ.container]:!0,[FZ.selected]:this.selected})} role=tabpanel><slot></slot></div>`}};QP.properties={label:1,selected:[7,{},{reflect:!0,type:Boolean}]},QP.styles=Yqe;let nj=QP;fi("calcite-carousel-item",nj);function Kqe(t){return p_e(t)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */function Xqe(t,e){return e}function hh(t,e,i){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return Kqe(e);if("value"in e||"unit"in e)return zw(t.dotValue??"",e);if("colorName"in e&&"bandName"in e){const s=t[e.colorName],n=t[e.bandName]||e.bandName;return`${s}: ${n}`}if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let r=null;return Xqe(e,i)?r=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:Ghe(e,i)&&(r=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),r?zw(r==="showField"?"{field}":t[r]??"",{field:e.field,normField:e.normField}):void 0}function Ghe(t,e){return!e}function Hhe(t,e){if(!t.title||typeof t.title=="string")return t.title;const i=t.type==="color-ramp"||t.type==="opacity-ramp",r=t.title,s=hh(e,r,i);return Ghe(r,i)&&r.title?`${r.title} (${s})`:s}const Qqe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/iu;function Whe(t,e,i){switch(e){case"heatmap-ramp":return(i[t.label]||t.label)??null;case"stretch-ramp":const r="value"in t?t.value:void 0,s=t.label?i[t.label]:"";return s?`${s}: ${typeof r=="string"?r:Sf(r??0,{style:"decimal",notation:r?.toString().toLowerCase().includes("e")?"scientific":"standard"})}`:"";default:return t.label??null}}function Jhe(t,e){return!!(e&&e==="Stretched"&&"version"in t&&typeof t.version=="number"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function Ql(t){return t?t/72*96:0}function eGe(t){return t?t*72/96:0}function tGe(t){if(typeof t=="string"){const e=t.match(Qqe);if(e){const i=Number(e[1]),r=e[3]?.toLowerCase(),s=t.startsWith("-"),n=r==="px"?eGe(i):i;return s?-n:n}return null}return t}function _h(t,e){const i=hh(t,e,!1),r=i?t.previewTemplateAriaLabel:t.previewAriaLabel;return zw(r??"",{label:i})}function zu(t,e){!e||!t||(t.querySelector("svg")??t.querySelector("canvas")??t).setAttribute("aria-label",e)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const iGe=Qe`.arcgis-spike-ramp__container{display:flex;flex-direction:row;gap:var(--calcite-spacing-sm-plus);margin-left:var(--calcite-spacing-sm)}.arcgis-spike-ramp__preview-container{display:flex;position:relative;gap:var(--calcite-spacing-sm-plus);border-bottom:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:0 var(--calcite-spacing-xl)}.arcgis-spike-ramp__preview{display:flex;gap:var(--calcite-spacing-sm-plus);align-items:end}.arcgis-spike-ramp__symbol-preview{display:flex}.arcgis-spike-ramp__lines{display:flex;position:absolute;bottom:0}.arcgis-spike-ramp__labels-container{display:flex;position:relative;top:-5px;flex:1;min-width:120px}.arcgis-spike-ramp__label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;word-break:break-all;font-size:var(--calcite-font-size-sm)}.arcgis-spike-ramp__label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}`,Yu={spikeRampContainer:"arcgis-spike-ramp__container",spikeRampPreviewContainer:"arcgis-spike-ramp__preview-container",spikeRampPreview:"arcgis-spike-ramp__preview",spikeRampSymbolPreview:"arcgis-spike-ramp__symbol-preview",spikeRampLines:"arcgis-spike-ramp__lines",spikeRampLabelsContainer:"arcgis-spike-ramp__labels-container",spikeRampLabel:"arcgis-spike-ramp__label"},rGe="#ddd",Ls=window.devicePixelRatio;function wR(t){return t.infos.filter((e,i)=>i%2===0)}function zZ(t){return!!(t&&typeof t=="object")}var Fy;let sGe=(Fy=class extends it{constructor(){super(...arguments),this.legendElement=null}render(){return this.legendElement.infos.length!==5?null:j`<div class=${O(Yu.spikeRampContainer)}><div class=${O(Yu.spikeRampPreviewContainer)}>${this._renderSpikeRampLines()}${this._renderSpikeRampPreview()}</div>${this._renderSpikeRampLabels()}</div>`}_renderSpikeRampPreview(){const e=this.legendElement,[i,r,s]=wR(e).map(({preview:n,label:o})=>{if(!n)return null;const a=n.cloneNode(!0);return a.classList.add(Yu.spikeRampSymbolPreview),zu(a,_h(this.messages,o)),a});return!i||!r||!s?null:j`<div class=${O(Yu.spikeRampPreview)}><div>${s}</div><div>${r}</div><div>${i}</div></div>`}_renderSpikeRampLines(){const e=this.legendElement,[{width:i,height:r},{width:s},{width:n,height:o}]=wR(e).map(({size:D})=>zZ(D)?{width:Ql(D.width),height:Ql(D.height)}:{width:0,height:0}),a=10,l=8,c=i+s+n+a*3,d=r,h=document.createElement("canvas");h.width=(c+a)*Ls,h.height=d*Ls,h.style.width=`${h.width/Ls}px`,h.style.height=`${h.height/Ls}px`;const f=h.getContext("2d");f.beginPath();const m=c-(i/2+a),y=0,v=c+l;f.moveTo(m*Ls,y*Ls),f.lineTo(v*Ls,0*Ls);const w=(c-l)/2,x=(r-o)/2,S=c+l,$=(r-o)/2;f.moveTo(w*Ls,x*Ls),f.lineTo(S*Ls,$*Ls);const T=n/2,C=d-o,L=c+l,N=d-o;return f.moveTo(T*Ls,C*Ls),f.lineTo(L*Ls,N*Ls),f.strokeStyle=rGe,f.lineWidth=.5*Ls,f.stroke(),j`<div class=${O(Yu.spikeRampLines)}>${h}</div>`}_renderSpikeRampLabels(){const e=this.legendElement,[{label:i,height:r},{label:s},{label:n,height:o}]=wR(e).map(({label:h,size:f})=>({label:h,height:zZ(f)?Ql(f.height):0})),a=r-o,l={position:"absolute",top:"0"},c={position:"absolute",top:`${a/2}px`},d={position:"absolute",top:`${a}px`};return j`<div class=${O(Yu.spikeRampLabelsContainer)}><div class=${O(Yu.spikeRampLabel)} style=${ot(l)}>${i}</div><div class=${O(Yu.spikeRampLabel)} style=${ot(c)}>${s}</div><div class=${O(Yu.spikeRampLabel)} style=${ot(d)}>${n}</div></div>`}},Fy.properties={legendElement:0,messages:0},Fy.styles=iGe,Fy);Ms("arcgis-legend-spike-ramp",sGe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const nGe=Qe`.arcgis-legend--card__size-ramp--container{display:flex;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--vertical-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.arcgis-legend--card__size-ramp--label{margin:0 .5em;white-space:nowrap}.arcgis-legend--card__size-ramp--vertical-ramp{display:flex;flex-direction:column;align-items:center}.arcgis-legend--card__size-ramp--ramp{display:flex;flex-direction:row-reverse;align-items:center}.arcgis-legend--card__size-ramp--preview{display:flex}`,Yh={container:"arcgis-legend--card__size-ramp--container",verticalContainer:"arcgis-legend--card__size-ramp--vertical-container",label:"arcgis-legend--card__size-ramp--label",ramp:"arcgis-legend--card__size-ramp--ramp",verticalRamp:"arcgis-legend--card__size-ramp--vertical-ramp",preview:"arcgis-legend--card__size-ramp--preview"},oGe="#ddd";function aGe(t){if(!t)return;if(t.type.includes("3d")){if(!("symbolLayers"in t)||!t.symbolLayers?.length)return;const i=t.symbolLayers.at(-1),r=i&&"resource"in i?i.resource?.primitive:void 0;return r==="circle"||r==="cross"||r==="kite"||r==="sphere"||r==="cube"||r==="diamond"}const e="style"in t?t.style:void 0;return e==="circle"||e==="diamond"||e==="cross"}function lGe(t){if(t){if(t.type.includes("3d")){if(!("symbolLayers"in t)||!t.symbolLayers?.length)return;const e=t.symbolLayers.at(-1),i=e&&"resource"in e?e.resource?.primitive:void 0;return i==="triangle"||i==="cone"||i==="tetrahedron"}return"style"in t&&t.style==="triangle"}}var zy;let cGe=(zy=class extends it{constructor(){super(...arguments),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(this.legendElement.theme==="spike")return j`<div style=${ot({display:"flex",flex:"1",justifyContent:"center"})}><arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp></div>`;const{legendElement:e,hasIndicators:i,opacity:r}=this,s=e.infos,n=s.at(0),o=s.at(-1);if(!n||!o)return null;const{label:a,...l}=n,{label:c,...d}=o;let h=l.preview,f=d.preview;if(!h||!f)return null;h=h.cloneNode(!0),h.style.display="flex",zu(h,_h(this.messages,a)),f=f.cloneNode(!0),f.style.display="flex",zu(f,_h(this.messages,c));const m={opacity:`${r??""}`};return j`<div class=${O(i?Yh.verticalContainer:Yh.container)}><div class=${O(Yh.label)}>${i?a:c}</div><div class=${O(i?Yh.verticalRamp:Yh.ramp)}><div class=${O(Yh.preview)} style=${ot(m)}>${h}</div>${this._renderSizeRampLines(e)}<div class=${O(Yh.preview)} style=${ot(m)}>${f}</div></div><div class=${O(Yh.label)}>${i?c:a}</div></div>`}_renderSizeRampLines(e){const i=e.infos,r=i.at(0),s=i.at(-1);if(!r||!s)return null;const n=r.symbol,o=this.hasIndicators,a=r.size&&typeof r.size=="number"?r.size:0,l=s.size&&typeof s.size=="number"?s.size:0,c=r.outlineSize||0,d=s.outlineSize||0,h=Ql(a+c),f=Ql(l+d),m=o?h:h+50,y=o?h/2+50:h,v=lGe(n),b=aGe(n),w=document.createElement("canvas");w.width=m,w.height=y,w.style.width=`${w.width}px`,w.style.height=`${w.height}px`;const x=w.getContext("2d");if(o){x.beginPath();const S=0,$=0,T=m/2-f/2,C=y;x.moveTo(S,$),x.lineTo(T,C);const L=m,N=0,D=m/2+f/2,F=y;x.moveTo(L,N),x.lineTo(D,F)}else{x.beginPath();const S=0,$=y/2-f/2,T=m;x.moveTo(S,$),x.lineTo(T,0);const L=0,N=y/2+f/2,D=m,F=y;x.moveTo(L,N),x.lineTo(D,F)}return x.strokeStyle=oGe,x.stroke(),j`<div style=${ot(o?{display:"flex",marginTop:`-${v?0:b?h/2:0}px`,marginBottom:`-${v?f:b?f/2:0}px`}:{display:"flex",marginRight:`-${v?0:b?h/2:0}px`,marginLeft:`-${v?0:b?f/2:0}px`})}>${w}</div>`}},zy.properties={hasIndicators:5,legendElement:0,opacity:9,messages:0},zy.styles=nGe,zy);Ms("arcgis-legend-card-size-ramp",cGe);function Zhe(t,e,i,r){if(t)if(t.type!=="CIMTextSymbol"){if(t.effects)for(const s of t.effects)jZ(s,e);if(t.symbolLayers)for(const s of t.symbolLayers){switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":uGe(s,e,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&s.width&&(s.width*=e);break;case"CIMPictureFill":s.height&&(s.height*=e),s.offsetX&&(s.offsetX*=e),s.offsetY&&(s.offsetY*=e);break;case"CIMHatchFill":Zhe(s.lineSymbol,e,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=e),s.offsetY&&(s.offsetY*=e),s.separation&&(s.separation*=e)}if(s.effects)for(const n of s.effects)jZ(n,e)}}else t.height!=null&&(t.height*=e)}function uGe(t,e,i){if(t&&(t.markerPlacement&&dGe(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const r of t.markerGraphics)t.scaleSymbolsProportionally||Zhe(r.symbol,e,!0,i)}function dGe(t,e){switch(G3(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(r=>r*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function jZ(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(r=>r*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function Yhe(t){const e=[];return oj(J8(t),e),e.length?new ne(uhe(e[0])):null}function oj(t,e){if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const r=t.type==="CIMPolygonSymbol";if(i?.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(dhe(s)||Z8(s)&&s.markerPlacement&&G3(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&UC(e,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics?.forEach(n=>{oj(n.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":UC(e,s.color);break;case"CIMGradientFill":hGe(e,s);break;case"CIMHatchFill":oj(s.lineSymbol,e)}}}function UC(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function hGe(t,e){switch(e.colorRamp?.type){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach(r=>{r.type==="CIMLinearContinuousColorRamp"&&VZ(t,r)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":VZ(t,e.colorRamp)}}function VZ(t,e){e&&(e.fromColor&&UC(t,e.fromColor),e.toColor&&UC(t,e.toColor))}function Khe(t,e,i){e instanceof ne||(e=new ne(e));const r=J8(t);r&&aj(r,e)}function aj(t,e,i){if(!t)return;let r;r=t.type==="CIMTextSymbol"?t.symbol:t;const s=r?.type==="CIMPolygonSymbol";if(r?.symbolLayers)for(const n of r.symbolLayers){if(n.colorLocked||s&&(dhe(n)||Z8(n)&&n.markerPlacement&&G3(n.markerPlacement)))continue;const o=e.toArray();switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor=o;break;case"CIMVectorMarker":n.markerGraphics?.forEach(a=>{aj(a.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":n.color=o;break;case"CIMGradientFill":pGe(n,e);break;case"CIMHatchFill":aj(n.lineSymbol,e)}}}function pGe(t,e){switch(t.colorRamp?.type){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach(r=>{r.type==="CIMLinearContinuousColorRamp"&&UZ(r,e)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":UZ(t.colorRamp,e)}}function UZ(t,e){if(t&&(t.fromColor&&(t.fromColor=e.toArray()),t.toColor)){const i=e.clone();i.a=0,t.toColor=i.toArray()}}function fGe(t,e,i=!1){const r=J8(t);if(i&&(e=360-e),r?.type!=="CIMTextSymbol"){if(r?.type==="CIMPointSymbol"&&r.symbolLayers){const s=e-(r.angle||0);for(const n of r.symbolLayers)if(Z8(n)){let o=n.rotation||0;n.rotateClockwise?o-=s:o+=s,n.rotation=o}r.angle=e}}else r.angle=e}const Xhe="picture-fill",Qhe="simple-fill",mGe="simple-line",epe="simple-marker",yGe="text",gGe="cim",BZ=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),qZ=new H8(1e3);function vGe(t){const e=t.style;let i=null;if(t)switch(t.type){case epe:e!=="cross"&&e!=="x"&&(i=t.color);break;case Qhe:e&&e!=="solid"?e!=="none"&&(i={type:"pattern",x:0,y:0,src:Li(`esri/symbols/patterns/${e}.png`),width:5,height:5}):i=t.color;break;case Xhe:i={type:"pattern",src:t.url,width:zt(t.width)*t.xscale,height:zt(t.height)*t.yscale,x:zt(t.xoffset),y:zt(t.yoffset)};break;case yGe:i=t.color;break;case gGe:i=Yhe(t)}return i}function bGe(t,e){const i=t+"-"+e,r=qZ.get(i);return r!=null?Promise.resolve(r):xe(t,{responseType:"image"}).then(s=>{const n=s.data,o=n.naturalWidth,a=n.naturalHeight,l=document.createElement("canvas");l.width=o,l.height=a;const c=l.getContext("2d");c.fillStyle=e,c.fillRect(0,0,o,a),c.globalCompositeOperation="destination-in",c.drawImage(n,0,0);const d=l.toDataURL();return qZ.put(i,d),d})}function L$(t){if(!t)return null;let e=null;switch(t.type){case Qhe:case Xhe:case epe:e=L$(t.outline);break;case mGe:{const i=zt(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:i9(t.style),width:i,cap:t.cap,join:t.join==="miter"?zt(t.miterLimit):t.join},e.dashArray=tpe(e).join(",")||"none");break}default:e=null}return e}function tpe(t){if(!t?.style)return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(o=>Number(o));const s=r??0,n=BZ.has(i)?BZ.get(i).map(o=>o*s):[];if(t.cap!=="butt")for(const[o,a]of n.entries())n[o]=o%2==1?a+s:Math.max(a-s,1);return n}const i9=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replaceAll("-","");return t[e]=i,i}})(),wGe=new ne([128,128,128]);let _Ge=0;function xGe(){return _Ge++}let SGe=0;function $Ge(){return SGe++}let IGe=0;function kGe(){return IGe++}const TGe="http://www.w3.org/2000/svg",GZ=H("android"),EGe=H("chrome")||GZ&&GZ>=4?"auto":"optimizeLegibility",MGe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},CGe=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let Hi={},Wt={};const PGe=Math.PI;function Qp(t,e){const i=t*(PGe/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function ipe(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function rpe(t,e,i,r,s){if(t){if(t.type==="circle")return he("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return he("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return he("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return he("image",{alt:s||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const n=typeof t.path!="string"?ipe(t.path):t.path;return he("path",{d:n,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return Rf(r),he("text",{"dominant-baseline":r.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":r.font.family,"font-size":r.font.size,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,kerning:r.kerning,rotate:r.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":r.align,"text-decoration":r.decoration,"text-rendering":EGe,x:t.x,y:t.y},t.text)}return null}function spe(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new ne(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${xGe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${$Ge()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new ne(i.color).toString()}))}}}function npe(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new ne(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=tpe(t).join(",")||"none")),e}function ope(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,s=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=s,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",Rf(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function AGe(t){const{pattern:e,linearGradient:i}=t;if(e)return he("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},he("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const r=i.stops.map((s,n)=>he("stop",{key:`${n}-stop`,offset:s.offset,"stop-color":s.color}));return he("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},r)}return null}function LGe(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:s,fill:n,stroke:o,font:a}=r,l=spe(n),c=npe(o),d=s.type==="text"?ope(s,a):null,h=rpe(s,l.fill,c,d);h&&i.push(h)}return he("mask",{id:e,maskUnits:"userSpaceOnUse"},he("g",null,i))}function HZ(t,e,i){return Eu(t,N2(t),[e,i])}function WZ(t,e,i,r,s){return D2(t,N2(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-s*i+s,t}function OGe(t,e,i,r){const s=e%360*Math.PI/180;kf(t,N2(t),s);const n=Math.cos(s),o=Math.sin(s),a=t[4],l=t[5];return t[4]=a*n-l*o+r*o-i*n+i,t[5]=l*n+a*o-i*o-r*n+r,t}function Sn(t,e){Hi&&"left"in Hi?(Hi.left!=null&&Hi.left>t&&(Hi.left=t),(Hi.right==null||Hi.right<t)&&(Hi.right=t),(Hi.top==null||Hi.top>e)&&(Hi.top=e),(Hi.bottom==null||Hi.bottom<e)&&(Hi.bottom=e)):Hi={left:t,bottom:e,right:t,top:e}}function JZ(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)Sn(e[r],e[r+1]);Wt.x=e[i-2],Wt.y=e[i-1];break;case"H":for(r=0;r<i;++r)Sn(e[r],Wt.y);Wt.x=e[i-1];break;case"V":for(r=0;r<i;++r)Sn(Wt.x,e[r]);Wt.y=e[i-1];break;case"m":{let s=0;for(("x"in Wt)||(Sn(Wt.x=e[0],Wt.y=e[1]),s=2),r=s;r<i;r+=2)Sn(Wt.x+=e[r],Wt.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)Sn(Wt.x+=e[r],Wt.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)Sn(Wt.x+=e[r],Wt.y);break;case"v":for(r=0;r<i;++r)Sn(Wt.x,Wt.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)Sn(Wt.x+e[r],Wt.y+e[r+1]),Sn(Wt.x+e[r+2],Wt.y+e[r+3]),Sn(Wt.x+=e[r+4],Wt.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)Sn(Wt.x+e[r],Wt.y+e[r+1]),Sn(Wt.x+=e[r+2],Wt.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)Sn(e[r+5],e[r+6]);Wt.x=e[i-2],Wt.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)Sn(Wt.x+=e[r+5],Wt.y+=e[r+6])}}function ZZ(t,e,i){const r=MGe[t.toLowerCase()];let s;typeof r=="number"&&(r?e.length>=r&&(s={action:t,args:e.slice(0,e.length-e.length%r)},i.push(s),JZ(s)):(s={action:t,args:[]},i.push(s),JZ(s)))}function RGe(t){const e=(typeof t.path!="string"?ipe(t.path):t.path).match(CGe),i=[];if(Hi={},Wt={},!e)return null;let r="",s=[];const n=e.length;for(let a=0;a<n;++a){const l=e[a],c=parseFloat(l);isNaN(c)?(r&&ZZ(r,s,i),s=[],r=l):s.push(c)}ZZ(r,s,i);const o={x:0,y:0,width:0,height:0};return Hi&&"left"in Hi&&(o.x=Hi.left,o.y=Hi.top,o.width=Hi.right-Hi.left,o.height=Hi.bottom-Hi.top),o}function ape(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=RGe(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function lpe(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),r=Math.max(r,n.x+n.width),s=Math.max(s,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,r=n.x+n.width,s=n.y+n.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function cpe(t,e,i,r,s,n,o,a,l){let c=(o&&n?Qp(n,e):e)/2,d=(o&&n?Qp(n,i):i)/2;if(l){const x=l[0],S=l[1];c=(o&&n?Qp(n,x):x)/2,d=(o&&n?Qp(n,S):S)/2}const h=t.width+r,f=t.height+r,m=dh(),y=dh();let v=!1;if(s&&h!==0&&f!==0){const x=e!==i?e/i:h/f,S=e>i?e:i;let $=1,T=1;isNaN(S)||(x>1?($=S/h,T=S/x/f):(T=S/f,$=S*x/h)),qc(y,y,WZ(m,$,T,c,d)),v=!0}const b=t.x+(h-r)/2,w=t.y+(f-r)/2;if(qc(y,y,HZ(m,c-b,d-w)),!v&&(h>e||f>i)){const x=h/e>f/i,S=(x?e:i)/(x?h:f);qc(y,y,WZ(m,S,S,b,w))}return a&&qc(y,y,HZ(m,a[0],a[1])),n&&qc(y,y,OGe(m,n,b,w)),`matrix(${y[0]},${y[1]},${y[2]},${y[3]},${y[4]},${y[5]})`}function upe(t){const e=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!e)return null;const[,i,r,s]=e;return{strength:Number(i),radius:zt(Tt(r)),threshold:Number(s)}}function NGe(t,e,i){const r=upe(t);if(!r)return null;const{strength:s,radius:n}=r,o=s>0?n:0,a=(s+o)*e,l=4*s+1;return he("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},he("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(s+.5*o)*(5**(e/100)*(.4+e/100)),result:"dilate"}),he("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:a/25}),he("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:a/50}),he("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},he("feFuncR",{slope:l,type:"linear"}),he("feFuncG",{slope:l,type:"linear"}),he("feFuncB",{slope:l,type:"linear"})),he("feMerge",null,he("feMergeNode",{in:"intensityBlur"}),he("feMergeNode",{in:"intensityBrightness"}),he("feGaussianBlur",{stdDeviation:s/10})))}function DGe(t,e,i,r={}){const s=[],n=[],o=kGe(),a=NGe(r.cssEffectFilter,e,o);let l=null;if(a){const f=upe(r.cssEffectFilter),m=r.clipBloomEffect||!f?.strength?0:(f.strength+f.radius/2)/3,y=e+e*m,v=i+i*m;l=[Math.max(y,10),Math.max(v,10)]}let c=e,d=i;if(r.useRotationSize)for(let f=0;f<t.length;f++){const m=r.rotations?.[f]??0;c=Math.max(Qp(m,e),c),d=Math.max(Qp(m,i),d)}for(let f=0;f<t.length;f++){const m=t[f],y=[],v=[];let b=0,w=0,x=0;for(const C of m){const{shape:L,fill:N,stroke:D,font:F,offset:W}=C;r.ignoreStrokeWidth||L.type==="text"||(b+=D?.width||0);const Z=spe(N),V=npe(D),A=L.type==="text"?ope(L,F):null;s.push(AGe(Z)),y.push(rpe(L,Z.fill,V,A,r.ariaLabel)),v.push(ape(L)),W&&(w+=W[0],x+=W[1])}const S=r.rotations?.[f]??0;r.useRotationSize&&(w+=(c-Qp(S,e))/2,x+=(d-Qp(S,i))/2);const $=cpe(lpe(v),e,i,b,r.scale??!1,S,r.useRotationSize??!1,[w,x],l);let T=null;if(r.masking){const C=`mask-${f}`,L=r.masking[f];s.push(LGe(L,C)),T=`url(#${C})`}n.push(T?he("g",{mask:T},he("g",{transform:$},y)):he("g",{transform:$},y))}return a&&(Rf(l),c=l[0],d=l[1]),he("svg",{"aria-label":r.ariaLabel,focusable:!1,height:d,role:"img",style:"display: block;",width:c,xmlns:TGe},a,he("defs",null,s),a?he("g",{filter:`url(#bloom${o})`},n):n)}function dpe(t){return ape(t)}function hpe(t){return lpe(t)}function lj(t,e,i,r,s,n,o,a,l){return cpe(t,e,i,r,s,n,o,a,l)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */let FGe=0;function zGe(){return FGe++}let jGe=0;function VGe(){return jGe++}let UGe=0;function BGe(){return UGe++}const YZ=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),qGe="http://www.w3.org/2000/svg",GGe=Math.PI;function ppe(t){const{pattern:e,linearGradient:i}=t;if(e)return Ji`<pattern height=${e.height??le} id=${e.id??le} patternUnits=userSpaceOnUse width=${e.width??le} x=${e.x??0??le} y=${e.y??0??le}><image height=${e.image.height??le} href=${e.image.href??le} width=${e.image.width??le} x=${e.image.x??le} y=${e.image.y??le} /></pattern>`;if(i){const r=i.stops.map(s=>Ji`<stop offset=${s.offset??le} stop-color=${s.color??le} />`);return Ji`<linearGradient gradientUnits=userSpaceOnUse id=${i.id??le} x1=${i.x1??le} x2=${i.x2??le} y1=${i.y1??le} y2=${i.y2??le}>${r}</linearGradient>`}return null}function r9(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new ne(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${zGe()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${VGe()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new ne(i.color).toString()}))}}}function s9(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new ne(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=HGe(t).join(",")||"none")),e}function HGe(t){if(!t?.style)return[];const{dashArray:e,style:i,width:r}=t;if(typeof e=="string"&&e!=="none")return e.split(",").map(o=>Number(o));const s=r??0,n=YZ.has(i)?YZ.get(i).map(o=>o*s):[];if(t.cap!=="butt")for(const[o,a]of n.entries())n[o]=o%2===1?a+s:Math.max(a-s,1);return n}function WGe(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function n9(t,e){if(t==null)throw new Error("value is None")}function o9(t,e,i,r,s){if(t){if(t.type==="circle")return Ji`<circle cx=${t.cx??le} cy=${t.cy??le} fill=${e??le} fill-rule=evenodd r=${t.r??le} stroke=${i.color??le} stroke-dasharray=${i.dashArray??void 0??le} stroke-dashoffset=${i.dashOffset??void 0??le} stroke-linecap=${i.cap??le} stroke-linejoin=${i.join??le} stroke-miterlimit=4 stroke-width=${i.width??le} />`;if(t.type==="ellipse")return Ji`<ellipse cx=${t.cx??le} cy=${t.cy??le} fill=${e??le} fill-rule=evenodd rx=${t.rx??le} ry=${t.ry??le} stroke=${i.color??le} stroke-dasharray=${i.dashArray??void 0??le} stroke-linecap=${i.cap??le} stroke-linejoin=${i.join??le} stroke-miterlimit=4 stroke-width=${i.width??le} />`;if(t.type==="rect")return Ji`<rect fill=${e??le} fill-rule=evenodd height=${t.height??le} stroke=${i.color??le} stroke-dasharray=${i.dashArray??void 0??le} stroke-linecap=${i.cap??le} stroke-linejoin=${i.join??le} stroke-miterlimit=4 stroke-width=${i.width??le} width=${t.width??le} x=${t.x??le} y=${t.y??le} />`;if(t.type==="image")return Ji`<image aria-label=${s??""??le} height=${t.height??le} href=${t.src??le} preserveAspectRatio=none width=${t.width??le} x=${t.x??le} y=${t.y??le} />`;if(t.type==="path"){const n=typeof t.path!="string"?WGe(t.path):t.path;return Ji`<path d=${n??le} fill=${e??le} fill-rule=evenodd stroke=${i.color??le} stroke-dasharray=${i.dashArray??void 0??le} stroke-linecap=${i.cap??le} stroke-linejoin=${i.join??le} stroke-miterlimit=4 stroke-width=${i.width??le} />`}if(t.type==="text")return n9(r),Ji`<text dominant-baseline=${(r.dominantBaseline==="inherit"||r.dominantBaseline==="alphabetic"||r.dominantBaseline==="auto"||r.dominantBaseline==="central"||r.dominantBaseline==="hanging"||r.dominantBaseline==="ideographic"||r.dominantBaseline==="mathematical"||r.dominantBaseline==="middle"||r.dominantBaseline==="text-bottom"||r.dominantBaseline==="text-top"?r.dominantBaseline:void 0)??le} fill=${e??le} fill-rule=evenodd font-family=${r.font.family??le} font-size=${r.font.size??le} font-style=${r.font.style??le} font-variant=${r.font.variant??le} font-weight=${r.font.weight??le} kerning=${r.kerning??le} rotate=${r.rotate??le} stroke=${i.color??le} stroke-dasharray=${i.dashArray??void 0??le} stroke-linecap=${i.cap??le} stroke-linejoin=${i.join??le} stroke-miterlimit=4 stroke-width=${i.width??le} text-anchor=${(r.align==="inherit"||r.align==="middle"||r.align==="end"||r.align==="start"?r.align:void 0)??le} text-decoration=${(r.decoration==="inherit"||r.decoration==="none"||r.decoration==="blink"||r.decoration==="line-through"||r.decoration==="overline"||r.decoration==="underline"?r.decoration:void 0)??le} text-rendering=auto x=${t.x??le} y=${t.y??le}>${t.text}</text>`}return null}function JGe(t,e,i){const r=mpe(t);if(!r)return null;const{strength:s,radius:n}=r,o=s>0?n:0,a=5**(e/100)*(.4+e/100),l=(s+o*.5)*a,c=(s+o)*e,d=s*4+1;return Ji`<filter filterUnits=userSpaceOnUse height=300% .id=${`bloom${i}`} width=300% x=-100% y=-100%><feMorphology in=SourceGraphic operator=dilate radius=${l??le} result=dilate /><feGaussianBlur in=dilate result=blur stdDeviation=${c/25} /><feGaussianBlur in=blur result=intensityBlur stdDeviation=${c/50} /><feComponentTransfer in=SourceGraphic result=intensityBrightness><feFuncR slope=${d??le} type=linear /><feFuncG slope=${d??le} type=linear /><feFuncB slope=${d??le} type=linear /></feComponentTransfer><feMerge><feMergeNode in=intensityBlur /><feMergeNode in=intensityBrightness /><feGaussianBlur stdDeviation=${s/10} /></feMerge></filter>`}function xk(t,e){const i=t*(GGe/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function fpe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const r=t.alignBaseline,s=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=t.align,i.dominantBaseline=s,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",n9(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size?.toString()||"10pt",i.font.family=e.family||"serif"}return i}function ZGe(t,e){if(!t||t.length===0)return null;const i=[];for(const r of t){const{shape:s,fill:n,stroke:o,font:a}=r,l=r9(n),c=s9(o),d=s.type==="text"?fpe(s,a):null,h=o9(s,l.fill,c,d);h&&i.push(h)}return Ji`<mask id=${e??le} maskUnits=userSpaceOnUse><g>${i}</g></mask>`}function mpe(t){const e=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/iu);if(!e)return null;const[,i,r,s]=e;return{strength:Number(i),radius:Ql(tGe(r)),threshold:Number(s)}}function YGe(t,e,i,r={}){const s=[],n=[],o=BGe(),a=JGe(r.cssEffectFilter,e,o);let l=null;if(a){const h=mpe(r.cssEffectFilter),f=r.clipBloomEffect||!h?.strength?0:(h.strength+h.radius/2)/3,m=e+e*f,y=i+i*f;l=[Math.max(m,10),Math.max(y,10)]}let c=e,d=i;if(r.useRotationSize)for(let h=0;h<t.length;h++){const f=r.rotations?.[h]??0;c=Math.max(xk(f,e),c),d=Math.max(xk(f,i),d)}for(let h=0;h<t.length;h++){const f=t[h],m=[],y=[];let v=0,b=0,w=0;for(const C of f){const{shape:L,fill:N,stroke:D,font:F,offset:W}=C;!r.ignoreStrokeWidth&&L.type!=="text"&&(v+=D?.width||0);const Z=r9(N),V=s9(D),A=L.type==="text"?fpe(L,F):null;s.push(ppe(Z)),m.push(o9(L,Z.fill,V,A,r.ariaLabel)),y.push(dpe(L)),W&&(b+=W[0],w+=W[1])}const x=r.rotations?.[h]??0;r.useRotationSize&&(b+=(c-xk(x,e))/2,w+=(d-xk(x,i))/2);const S=hpe(y),$=lj(S,e,i,v,r.scale??!1,x,r.useRotationSize??!1,[b,w],l);let T=null;if(r.masking){const C=`mask-${h}`,L=r.masking[h];s.push(ZGe(L,C)),T=`url(#${C})`}n.push(T?Ji`<g mask=${T??le}><g transform=${$??le}>${m}</g></g>`:Ji`<g transform=${$??le}>${m}</g>`)}return a&&(n9(l),c=l[0],d=l[1]),j`<svg aria-label=${r.ariaLabel??le} height=${d??le} role=img style=${ot("display: block;")} width=${c??le} xmlns=${qGe}>${Ji`${a}<defs>${s}</defs>${a?Ji`<g filter=${`url(#bloom${o})`}>${n}</g>`:n}`}</svg>`}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const KGe=Qe`:host{display:flex}.arcgis-legend--card__layer-row{display:flex;flex:1}.arcgis-legend--card__color-ramp-container{justify-content:center}.arcgis-legend--card__symbol-container{display:flex;flex-direction:column}.arcgis-legend--card__interval-separators-container{text-align:center}.arcgis-legend--card__interval-separator{font-size:.5em}.arcgis-legend--card__ramp-label{margin:0 .5em;white-space:nowrap;height:25px;line-height:var(--calcite-font-line-height-fixed-xl)}`,bv={layerRow:"arcgis-legend--card__layer-row",colorRampContainer:"arcgis-legend--card__color-ramp-container",symbolContainer:"arcgis-legend--card__symbol-container",intervalSeparatorsContainer:"arcgis-legend--card__interval-separators-container",intervalSeparator:"arcgis-legend--card__interval-separator",rampLabel:"arcgis-legend--card__ramp-label"},XGe=25,QGe=25,eHe=100;var jy;let tHe=(jy=class extends it{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return j`<div class=${O(hi(bv.layerRow,bv.colorRampContainer))}>${this._renderRampLabel(e[0])}<div class=${O(bv.symbolContainer)}>${this._renderPreview(e)}${this._renderMiddleStopRampLabel(e)}</div>${this._renderRampLabel(e.at(-1))}</div>`}_renderPreview(e){const{opacity:i}=this,r=this.legendElement.type==="heatmap-ramp",s=e.length-1,n=QGe,o=s>2&&!r?XGe*s:eHe,a=o+20,l=10,c=[[{shape:{type:"path",path:`M0 ${n/2} L${l} 0 L${l} ${n} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:l,y:0,width:o,height:n},fill:{type:"linear",x1:l,y1:0,x2:o+l,y2:0,colors:e.map((m,y)=>({color:m.color,offset:r&&"ratio"in m?m.ratio:y/s}))},stroke:{width:0}},{shape:{type:"path",path:`M${o+l} 0 L${a} ${n/2} L${o+l} ${n} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],d=this.legendElement.type==="opacity-ramp"?this.messages.previewOpacityRampAriaLabel:this.messages.previewColorRampAriaLabel,h=YGe(c,a,n,{ariaLabel:d}),f={filter:this.cssEffectFilter,opacity:i==null?void 0:`${i}`};return j`<div style=${ot(f)}>${h}</div>`}_renderMiddleStopRampLabel(e){const i=e.length%2!==0?e[e.length/2|0]:null;return i?j`<div class=${O(bv.intervalSeparatorsContainer)}><div class=${O(bv.intervalSeparator)}>|</div>${this._renderRampLabel(i)}</div>`:null}_renderRampLabel(e){return j`<div class=${O(bv.rampLabel)}>${Whe(e,this.legendElement.type,this.messages)}</div>`}},jy.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},jy.styles=KGe,jy);Ms("arcgis-legend-card-color-ramp",tHe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const iHe=Qe`.arcgis-relationship-ramp--diamond__container{display:flex;font-size:var(--calcite-font-size-sm)}.arcgis-relationship-ramp--diamond__left-column{align-self:center;padding-right:5px;max-width:85px;text-align:right}.arcgis-relationship-ramp--diamond__right-column{align-self:center;padding-left:5px;max-width:85px;text-align:left}.arcgis-relationship-ramp--diamond__middle-column{display:flex;flex-direction:column;text-align:center}.arcgis-relationship-ramp--diamond__middle-column--label{align-self:center;max-width:85px}.arcgis-relationship-ramp--diamond__middle-column--ramp{width:85px;height:85px}.arcgis-relationship-ramp--square__table{display:table;font-size:var(--calcite-font-size-sm)}.arcgis-relationship-ramp--square__table-row{display:table-row}.arcgis-relationship-ramp--square__table-cell{display:table-cell}.arcgis-relationship-ramp--square__table-label{max-width:95px}.arcgis-relationship-ramp--square__table-label--left-bottom{vertical-align:bottom;text-align:left}.arcgis-relationship-ramp--square__table-label--right-bottom{vertical-align:bottom;text-align:right}.arcgis-relationship-ramp--square__table-label--left-top{vertical-align:top;text-align:left}.arcgis-relationship-ramp--square__table-label--right-top{vertical-align:top;text-align:right}`,rHe="http://www.w3.org/2000/svg",ci={diamondContainer:"arcgis-relationship-ramp--diamond__container",diamondLeftCol:"arcgis-relationship-ramp--diamond__left-column",diamondRightCol:"arcgis-relationship-ramp--diamond__right-column",diamondMidCol:"arcgis-relationship-ramp--diamond__middle-column",diamondMidColLabel:"arcgis-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"arcgis-relationship-ramp--diamond__middle-column--ramp",squareTable:"arcgis-relationship-ramp--square__table",squareTableRow:"arcgis-relationship-ramp--square__table-row",squareTableCell:"arcgis-relationship-ramp--square__table-cell",squareTableLabel:"arcgis-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"arcgis-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"arcgis-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"arcgis-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"arcgis-relationship-ramp--square__table-label--right-top"};var Vy;let sHe=(Vy=class extends it{constructor(){super(...arguments),this._direction=EA(),this.legendElement=null}_getLineMarkers(e,i){const r="arrowStart",s="arrowEnd",n=e==="left",o={markerStart:null,markerEnd:null};switch(i){case"HL":n?o.markerStart=`url(#${s})`:o.markerEnd=`url(#${r})`;break;case"LL":o.markerStart=`url(#${s})`;break;case"LH":n?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${s})`;break;default:o.markerEnd=`url(#${r})`;break}return o}render(){const e=this.legendElement,{focus:i,labels:r}=e,s=!!i,n=this._renderRamp(e),o={justifyContent:"center"},a=this._direction==="rtl";return s?j`<div class=${O(ci.diamondContainer)} style=${ot(o)}><div class=${O(ci.diamondLeftCol)}>${a?r.right:r.left}</div><div class=${O(ci.diamondMidCol)}><div class=${O(ci.diamondMidColLabel)}>${r.top}</div>${n}<div class=${O(ci.diamondMidColLabel)}>${r.bottom}</div></div><div class=${O(ci.diamondRightCol)}>${a?r.left:r.right}</div></div>`:j`<div class=${O(ci.squareTable)}><div class=${O(ci.squareTableRow)}><div class=${O(hi(ci.squareTableCell,ci.squareTableLabel,ci.squareTableLabelRightBottom))}>${a?r.top:r.left}</div><div class=${O(ci.squareTableCell)}></div><div class=${O(hi(ci.squareTableCell,ci.squareTableLabel,ci.squareTableLabelLeftBottom))}>${a?r.left:r.top}</div></div><div class=${O(ci.squareTableRow)}><div class=${O(ci.squareTableCell)}></div>${n}<div class=${O(ci.squareTableCell)}></div></div><div class=${O(ci.squareTableRow)}><div class=${O(hi(ci.squareTableCell,ci.squareTableLabel,ci.squareTableLabelRightTop))}>${a?r.right:r.bottom}</div><div class=${O(ci.squareTableCell)}></div><div class=${O(hi(ci.squareTableCell,ci.squareTableLabel,ci.squareTableLabelLeftTop))}>${a?r.bottom:r.right}</div></div></div>`}_renderRamp(e){const{focus:i,numClasses:r,colors:s,rotation:n}=e,o=this.opacity,a=this.messages.previewRelationshipRampAriaLabel,l=60,c=!!i,d=Math.sqrt(l**2+l**2)+(c?0:5),h=[],f=[],m=[],y=l/r;for(let D=0;D<r;D++){const F=D*y;for(let W=0;W<r;W++){const Z=W*y,V=r9(s[D][W]),A=s9(null),q={type:"rect",x:Z,y:F,width:y,height:y},J=ppe(V);J&&h.push(J);const ee=o9(q,V.fill,A,null);ee&&f.push(ee),m.push(dpe(q))}}const v=15,b=15,w=10;let x;c||(x="margin: -15px -15px -18px -15px");const S=this._getLineMarkers("left",i),$=this._getLineMarkers("right",i),T=hpe(m),C=lj(T,d,d,0,!1,n,!1),L=lj(T,d,d,0,!1,c?-45:null,!1),N={filter:this.cssEffectFilter,opacity:o==null?"":`${o}`};return j`<div class=${O(c?ci.diamondMidColRamp:ci.squareTableCell)} style=${ot(N)}><svg .ariaLabel=${a} height=${d??le} role=img style=${ot(x)} width=${d??le} xmlns=${rHe}>${Ji`<defs><marker .id=${"arrowStart"} markerHeight=10 markerUnits=strokeWidth markerWidth=10 orient=auto refX=5 refY=5><polyline fill=none points="0,0 5,5 0,10" stroke=#555555 stroke-width=1 /></marker><marker .id=${"arrowEnd"} markerHeight=10 markerUnits=strokeWidth markerWidth=10 orient=auto refX=0 refY=5><polyline fill=none points="5,0 0,5 5,10" stroke=#555555 stroke-width=1 /></marker>${h}</defs><g transform=${C??le}>${f}</g><g transform=${L??le}><line fill=none marker-end=${S.markerEnd??void 0??le} marker-start=${S.markerStart??void 0??le} stroke=#555555 stroke-width=1 x1=${-10} x2=${-10} y1=${l-v} y2=${v} /><line fill=none marker-end=${$.markerEnd??void 0??le} marker-start=${$.markerStart??void 0??le} stroke=#555555 stroke-width=1 x1=${b} x2=${l-b} y1=${l+w} y2=${l+w} /></g>`}</svg></div>`}},Vy.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Vy.styles=iHe,Vy);Ms("arcgis-legend-relationship-ramp",sHe);function ype(t){return"r"in t&&"g"in t&&"b"in t}function gpe(t){return"h"in t&&"s"in t&&"v"in t}function vpe(t){return"l"in t&&"a"in t&&"b"in t}function bpe(t){return"l"in t&&"c"in t&&"h"in t}function nHe(t){return"x"in t&&"y"in t&&"z"in t}const oHe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],aHe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function wpe(t,e){const i=[];let r,s;if(t[0].length!==e.length)throw new Error("dimensions do not match");const n=t.length,o=t[0].length;let a=0;for(r=0;r<n;r++){for(a=0,s=0;s<o;s++)a+=t[r][s]*e[s];i.push(a)}return i}function _pe(t){const e=[t.r/255,t.g/255,t.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=wpe(oHe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function a9(t){const e=wpe(aHe,[t.x/100,t.y/100,t.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function xpe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function Spe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function lHe(t){const e=t.l,i=t.a,r=t.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:e,c:s,h:n}}function cHe(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}function uHe(t){return xpe(_pe(t))}function dHe(t){return a9(Spe(t))}function hHe(t){return lHe(xpe(_pe(t)))}function pHe(t){return a9(Spe(cHe(t)))}function fHe(t){const e=t.r,i=t.g,r=t.b,s=Math.max(e,i,r),n=s-Math.min(e,i,r);let o=s,a=n===0?0:s===e?(i-r)/n%6:s===i?(r-e)/n+2:(e-i)/n+4,l=n===0?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function mHe(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,s=r*i,n=s*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function xh(t){return ype(t)?t:bpe(t)?pHe(t):vpe(t)?dHe(t):nHe(t)?a9(t):gpe(t)?mHe(t):t}function J3(t){return gpe(t)?t:fHe(xh(t))}function cj(t){return vpe(t)?t:uHe(xh(t))}function KZ(t){return bpe(t)?t:hHe(xh(t))}function yHe(t){let{r:e,g:i,b:r,a:s}=t;return s<1&&(e=Math.round(s*e+255*(1-s)),i=Math.round(s*i+255*(1-s)),r=Math.round(s*r+255*(1-s))),new ne({r:e,g:i,b:r})}function $pe(t,e){const{r:i,g:r,b:s}=e?.ignoreAlpha?t:yHe(t);return .2126*i+.7152*r+.0722*s}function t_t(t,e=225){return $pe(t,{ignoreAlpha:!0})>e?new ne([0,0,0,t.a]):new ne([255,255,255,t.a])}function i_t(t,e){const i=cj(t);i.l*=1-e;const r=xh(i),s=t.clone();return s.setColor(r),s.a=t.a,s}function r_t(t,e){const i=t.clone();return i.a*=e,i}function s_t(t,e){const i=J3(t);i.s*=e;const r=xh(i),s=t.clone();return s.setColor(r),s.a=t.a,s}function n_t(t){return ne.toUnitRGBA(t)}function o_t(t){return jg(t[0],t[1],t[2],t.length>3?t[3]:1)}function a_t(t,e){const i=ne.toUnitRGBA(t);return i[3]*=e,i}function l_t(t,e,i={}){if(t.length===0||e<=0)return[];if((t=t.map(r=>typeof r=="string"?new ne(r):r)).length===1||e===1){const r=[],s=t[0];for(let n=0;n<e;n++)r.push(s.clone());return r}if(i.shuffle&&(t=Zee(U(t),i.seed)),t.length>=e){const r=[],s=(t.length-1)/(e-1);for(let n=0;n<e;n++){const o=Math.round(n*s);r.push(t[o].clone())}return r}return gHe(t,e,i)}function gHe(t,e,i={}){const r=[],s=t.length-1,n=Math.ceil((e-t.length)/s);e:for(let o=0;o<s;o++){const a=t[o],l=t[o+1];for(let c=1;c<=n;c++){const d=c/(n+1);if(r.push(vHe(a,l,d,i)),r.length+t.length===e)break e}}return[...t.map(o=>o.clone()),...Zee(r,i.seed??1)]}const _R=(t,e)=>{const i=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+i))};function vHe(t,e,i,r={}){const s=t.r,n=t.g,o=t.b,a=e.r,l=e.g,c=e.b,d=Math.round(s+(a-s)*i),h=Math.round(n+(l-n)*i),f=Math.round(o+(c-o)*i);if(!r.offset)return new ne([d,h,f]);const m=tU(r.seed);return new ne([_R(d,m),_R(h,m),_R(f,m)])}const XZ=gF();function bHe(t,e){XZ.append(t,e),XZ.detach(e)}function V_(t,e,i){const r=Math.ceil(e[0]),s=Math.ceil(e[1]);if(!t.some(o=>!!o.length))return null;const n=i?.node||document.createElement("div");return i.opacity!=null&&(n.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(n.style.filter=i.cssEffectFilter),bHe(n,()=>DGe(t,r,s,i)),n}function wHe(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const r=i.getContext("2d");return r.clearRect(0,0,t,e),r}function _He(t,e,i){return t?xe(t,{responseType:"image"}).then(r=>{const s=r.data,n=s.width,o=s.height,a=n/o;let l=e;if(i){const c=Math.max(n,o);l=Math.min(l,c)}return{image:s,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new R("renderUtils: imageDataSize","href not provided."))}function xHe(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function SHe(t,e,i,r,s){switch(s){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const n=J3({r:t[e],g:t[e+1],b:t[e+2]});n.h=r.h,n.s=r.s,n.v=n.v/100*r.v;const o=xh(n);t[e]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function $He(t,e,i,r,s){return _He(t,e,s).then(n=>{const o=n.width??e,a=n.height??e;if(n.image&&xHe(i,r)){let l=n.image.width,c=n.image.height;H("edge")&&/\.svg$/i.test(t)&&(l-=1,c-=1);const d=wHe(o,a);d.drawImage(n.image,0,0,l,c,0,0,o,a);const h=d.getImageData(0,0,o,a),f=[i.r/255,i.g/255,i.b/255,i.a],m=J3(i);for(let y=0;y<h.data.length;y+=4)SHe(h.data,y,f,m,r);d.putImageData(h,0,0),t=d.canvas.toDataURL("image/png")}else{const l=ft?.findCredential(t);if(l?.token){const c=t.includes("?")?"&":"?";t=`${t}${c}token=${l.token}`}}return{url:t,width:o,height:a}}).catch(()=>({url:t,width:e,height:e}))}function IHe(t){const e=t.symbolLayers?.at(-1);if(e&&"outline"in e)return e?.outline?.size}function kHe(t){if(!t)return 0;if(Qa(t)){const e=IHe(t);return e??0}return Zt(L$(t)?.width)}function Z3(t){if(t==null||!("symbolLayers"in t)||t.symbolLayers==null)return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function THe(t){return t.resource?.href??""}function c_t(t,e){if(!t)return null;let i=null;return Qa(t)?i=EHe(t):S3(t)&&(i=t.type==="cim"?Yhe(t):t.color?new ne(t.color):null),i?E0(i,e):null}function EHe(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(r=>{r.type==="object"&&r.resource?.href||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new ne(i):null}function E0(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new ne(i)}function MHe(t,e,i){const r=t.symbolLayers;if(!r)return;const s=(n,o=!1)=>{let a=e??n??null;return i?.override!=null&&(!a&&o&&(a=new ne([255,255,255])),a&&(a.a=i.override)),E0(a,i?.add)};r.forEach(n=>{if(n.type==="water")return void(n.color=E0(n.color,i?.add));const o=n.material!=null?n.material.color:null,a=s(o,n.type==="icon"&&n.resource?.href!=null);n.material==null?n.material=new So({color:a}):n.material.color=a,"outline"in n&&n.outline?.color&&i?.add!=null&&(n.outline.color=E0(n.outline.color,i.add)),"marker"in n&&n.marker!=null&&(n.marker.color=s(n.marker.color))})}function CHe(t,e,i){e=e??t.color,i?.override!=null&&e&&(e.a=i.override),e&&(t.color=E0(e,i?.add)),"outline"in t&&t.outline?.color&&(t.outline.color=E0(t.outline.color,i?.add))}function xR(t,e,i){t&&(e||i!=null)&&(e&&(e=new ne(e)),Qa(t)?MHe(t,e,i):S3(t)&&CHe(t,e,i))}async function PHe(t,e){const i=t.symbolLayers;i&&await nPe(i,async r=>AHe(r,e))}async function AHe(t,e){switch(t.type){case"extrude":OHe(t,e);break;case"icon":case"line":case"text":LHe(t,e);break;case"path":NHe(t,e);break;case"object":await RHe(t,e)}}function LHe(t,e){const i=Ipe(e);i!=null&&(t.size=i)}function Ipe(t){for(const e of t)if(typeof e=="number")return e;return null}function OHe(t,e){const i=e[2];typeof i=="number"&&(t.size=i)}async function RHe(t,e){const{resourceSize:i,symbolSize:r}=await DHe(t),s=kpe(e,i,r);s!=null&&(t.width=RS(e[0],r[0],i[0],s),t.depth=RS(e[1],r[1],i[1],s),t.height=RS(e[2],r[2],i[2],s))}function NHe(t,e){const i=kpe(e,Pne,[t.width,void 0,t.height]);i!=null&&(t.width=RS(e[0],t.width,1,i),t.height=RS(e[2],t.height,1,i))}function kpe(t,e,i){for(let r=0;r<3;r++){const s=t[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/e[r]:1}case"proportional":break;default:if(s&&e[r])return s/e[r]}}return null}async function DHe(t){const{computeObjectLayerResourceSize:e}=await K(()=>import("./symbolLayerUtils-BpR4wCBj.js"),[]),i=await e(t,10),{width:r,height:s,depth:n}=t,o=[r,n,s];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function RS(t,e,i,r){switch(t){case"proportional":return i*r;case"symbol-value":return e??i;default:return t}}function FHe(t,e){const i=Ipe(e);if(i!=null)switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const r=t.width/t.height;r>1?(t.width=i,t.height=i*r):(t.width=i*r,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function zHe(t,e){if(t&&e)return Qa(t)?PHe(t,e):void(S3(t)&&FHe(t,e))}function jHe(t,e,i){if(t&&e!=null){if(Qa(t)){const r=t.symbolLayers;r&&r.forEach(s=>{if(s.type==="object")switch(i){case"tilt":s.tilt=(s.tilt??0)+e;break;case"roll":s.roll=(s.roll??0)+e;break;default:s.heading=(s.heading??0)+e}s.type==="icon"&&(s.angle+=e)})}else if(S3(t))switch(t.type){case"simple-marker":case"picture-marker":case"text":t.angle+=e;break;case"cim":fGe(t,e,!0)}}}function VHe(t,e){if(!t)return null;const i=t.effects.map(r=>r.toJSON());return a4(i)}function u_t(t){return t!=null&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}const NS={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function UHe(t,e,i){let s=22,n=22;t<1?s*=.75:t>1&&(n*=1.25);const o=0,a=0;let l=22,c=22;return e&&i&&(s=n=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?s-.5*l:a,n-.5*c]},{command:"L",values:[s-.5*l,n-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*c]},{command:"L",values:[s-.5*l,e?n-.5*c:c]},{command:"L",values:[s-.5*l,n-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*l,n-.5*c]},{command:"L",values:[i?s-.5*l:a,n-.5*c]},{command:"L",values:[i?s-.5*l:a,e?n-.5*c:c]},{command:"L",values:[s-.5*l,e?n-.5*c:c]},{command:"Z",values:[]}]}]}function BHe(t){const i=.5*t,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*22*.5]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[s,.7*22+i-.7*22*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,.7*22]},{command:"L",values:[.3*22,.7*22+i]},{command:"L",values:[22,i]},{command:"L",values:[22,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*22,r]},{command:"L",values:[22,r]},{command:"L",values:[.3*22,.7*22]},{command:"L",values:[s,.7*22*.5]},{command:"Z",values:[]}]}]}function qHe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function GHe(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const s=0,n=0,o=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[n,.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[.5*i,t]},{command:"L",values:[n,t-.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[.5*i,t]},{command:"L",values:[i,t-.5*o]},{command:"L",values:[i,.5*o]},{command:"Z",values:[]}]}]}function HHe(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const s=.5*i,n=.15*i,o=0,a=t-n;return[{type:"ellipse",cx:.5*i,cy:a,rx:s,ry:n},{type:"path",path:[{command:"M",values:[o,n]},{command:"L",values:[o,a]},{command:"L",values:[i,a]},{command:"L",values:[i,n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:n,rx:s,ry:n}]}function WHe(t,e){let i=e?20:t;const r=e?4:6;i-=i<=22?.5*r:r;const s=.15*i,n=t-s;return[{type:"ellipse",cx:.5*i,cy:n,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,n]},{command:"L",values:[0,n]},{command:"Z",values:[]}]}]}function JHe(t){let e=t;const i=6;e-=e<22?.5*i:i;const r=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,t-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:r}]}function ZHe(t){let e=t;const i=t,r=4;e-=e<22?.5*r:r;const s=0,n=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,s]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[n,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function YHe(t){let i=t;i-=i<22?.5*2:2;const r=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,r]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function df(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function d_t(t,e){if(t==null)return new ne;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new ne(t);return new ne([df(i.r,e),df(i.g,e),df(i.b,e),i.a])}function KHe(t){return t=t||globalThis.location.hostname,XHe.some(e=>t?.match(e)!=null)}function QZ(t,e){return t?(e=e||globalThis.location.hostname)?e.match(Tpe)!=null||e.match(Mpe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(Epe)!=null||e.match(Cpe)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t:null}const Tpe=/^devext\.arcgis\.com$/,Epe=/^qaext\.arcgis\.com$/,Mpe=/^[\w-]*\.mapsdevext\.arcgis\.com$/,Cpe=/^[\w-]*\.mapsqa\.arcgis\.com$/,XHe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,Tpe,Epe,/^jsapps\.esri\.com$/,Mpe,Cpe],QHe=["web-gltf","web","cim"];function Ppe(t,e,i){const r=t.name;return r==null?Promise.reject(new R("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?eWe(r,e,i):Pde(t,e,i).then(s=>Lpe(s,r,e,D6e,i))}function Ape(t,e){return e.items.find(i=>i.name===t)}async function Lpe(t,e,i,r,s){const n=i?.portal!=null?i.portal:ce.getDefault(),o={portal:n,url:$t(t.baseUrl)},a=Ape(e,t.data);if(!a)throw new R("symbolstyleutils:symbol-name-not-found",`The symbol name '${e}' could not be found`,{symbolName:e});const l=s?.acceptedFormats??QHe,c=r(a,l);if(!c)throw new R("symbolstyleutils:symbol-reference-no-accepted-format",`The symbol name '${e}' does not have an accepted format (one of ${l})`,{symbolName:e});const{url:d,format:h}=c;let f=gh(d,o),m=a.thumbnail?.href??null;const y=a.thumbnail?.imageData;KHe()&&(f=QZ(f)??"",m=QZ(m));const v={portal:n,url:$t(DA(f)),origin:"portal-item"};return N8(f,s).then(b=>{const w=h==="cim"?Ade(b.data):b.data,x=Mde(w,v);if(x&&Qa(x)){if(m){const S=gh(m,o);x.thumbnail=new ky({url:S})}else y&&(x.thumbnail=new ky({url:`data:image/png;base64,${y}`}));t.styleUrl?x.styleOrigin=new zl({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(x.styleOrigin=new zl({portal:i.portal,styleName:t.styleName,name:e}))}return x})}function eWe(t,e,i){const r=F6e.replaceAll(/\{SymbolName\}/gi,t),s=e.portal!=null?e.portal:ce.getDefault();return N8(r,i).then(n=>{const o=Ade(n.data);return Mde(o,{portal:s,url:$t(DA(r)),origin:"portal-item"})})}const tWe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:Lpe,getStyleItemFromStyle:Ape,resolveWebStyleSymbol:Ppe},Symbol.toStringTag,{value:"Module"})),ey=22,NE=120,Y3=80,eY=50,uj=20;function t0(t){const e=t.outline,i=t.material!=null?t.material.color:null,r=i!=null?i.toHex():null;if(e==null||"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=zt(e.size)||0;return{color:"rgba("+(e.color!=null?e.color.toRgba():"255,255,255,1")+")",width:Math.min(s,Y3),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?i9(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}async function iWe(t,e){if(t.thumbnail?.url)return t.thumbnail.url;if(e.type==="icon"&&e?.resource?.href)return THe(e);const i=Li("esri/images/Legend/legend3dsymboldefault.png");if(t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)){const r=await Ppe(t.styleOrigin,{portal:t.styleOrigin.portal}).catch(()=>null);if(r&&"thumbnail"in r&&r.thumbnail?.url)return r.thumbnail.url}return i}function SR(t,e=1){const i=t.a,r=J3(t),s=r.h,n=r.s/e,o=100-(100-r.v)/e,{r:a,g:l,b:c}=xh({h:s,s:n,v:o});return[a,l,c,i]}function BC(t){return t.type==="water"?t.color==null?null:t.color:t.material?.color==null?null:t.material.color}function Ut(t,e=0){const i=BC(t);if(!i){if(t.type==="fill")return null;const s=wGe.r,n=df(s,e);return[n,n,n,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=df(r[s],e);return r}async function Ope(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await bGe(Li(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function tY(t){return t.outline?t0(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function l9(t,e){const i=BC(t);if(!i)return null;let r="rgba(";return r+=df(i.r,e)+",",r+=df(i.g,e)+",",r+=df(i.b,e)+",",r+i.a+");"}function iY(t,e){const i=t.edges;return!i||!i.color||!i.size?null:{color:i.color.toCss(!0),width:Math.min(zt(i.size),e,Y3),join:"round"}}function dj(t,e){const i=l9(t,e);if(!i||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return null;const r={color:i,width:Math.min(t.size?zt(t.size):.75,Y3)};return"pattern"in t&&t.pattern?.type==="style"&&(r.style=i9(t.pattern.style)),"cap"in t&&t.cap&&(r.cap=t.cap),"join"in t&&t.join&&(r.join=t.join==="miter"?zt(2):t.join),r}function Sk(t,e,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function rWe(t){const e=t.depth,i=t.height,r=t.width;return r!==0&&e!==0&&i!==0&&r===e&&r!=null&&i!=null&&r<i}function sWe(t,e,i){const r=[];if(!t)return r;switch(t.type){case"icon":{const o=e,a=e;switch(t.resource?.primitive??DOe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:Ut(t,0),stroke:t0(t)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:Ut(t,0),stroke:t0(t)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:Ut(t,0),stroke:t0(t)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:tY(t)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:tY(t)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:Ut(t,0),stroke:t0(t)})}break}case"object":switch(t.resource?.primitive??UOe){case"cone":{const s=Sk(Ut(t,0),Ut(t,-.6),i?uj:e),n=WHe(e,i);r.push({shape:n[0],fill:s},{shape:n[1],fill:s});break}case"inverted-cone":{const s=Ut(t,0),n=Sk(s,Ut(t,-.6),e),o=JHe(e);r.push({shape:o[0],fill:n},{shape:o[1],fill:s});break}case"cube":{const s=GHe(e,i);r.push({shape:s[0],fill:Ut(t,0)},{shape:s[1],fill:Ut(t,-.3)},{shape:s[2],fill:Ut(t,-.5)});break}case"cylinder":{const s=Sk(Ut(t,0),Ut(t,-.6),i?uj:e),n=HHe(e,i);r.push({shape:n[0],fill:s},{shape:n[1],fill:s},{shape:n[2],fill:Ut(t,0)});break}case"diamond":{const s=ZHe(e);r.push({shape:s[0],fill:Ut(t,-.3)},{shape:s[1],fill:Ut(t,0)},{shape:s[2],fill:Ut(t,-.3)},{shape:s[3],fill:Ut(t,-.7)});break}case"sphere":{const s=Sk(Ut(t,0),Ut(t,-.6));s.x1=0,s.y1=0,s.x2=.25*e,s.y2=.25*e,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:s});break}case"tetrahedron":{const s=YHe(e);r.push({shape:s[0],fill:Ut(t,-.3)},{shape:s[1],fill:Ut(t,0)},{shape:s[2],fill:Ut(t,-.6)});break}}break}return r}function K3(t){const e=typeof t?.size=="number"?t?.size:null;return e?zt(e):null}function nWe(t){return t.type==="icon"?"multiply":"tint"}async function oWe(t,e){const i=K3(e),r=e?.maxSize?zt(e.maxSize):null,s=e?.disableUpsampling??!1,n=t.symbolLayers,o=[],a=[];let l=!1,c=0,d=0,h=0;n.forEach(y=>{if(y.type!=="icon"&&y.type!=="object")return;y&&y.type==="icon"&&(h=Math.max(y.size&&zt(y.size),h));const v=y.type==="icon"?y.size&&zt(y.size):0,b=i||v?Math.ceil(Math.min(i||v,r||NE)):ey;let w=y.type==="icon"?y.angle:null;if(e?.rotation!=null&&(w=(w??0)+e.rotation),a.push(w),y?.resource?.href){const x=iWe(t,y).then(S=>{const $=y?.material?.color,T=nWe(y);return $He(S,b,$,T,s)}).then(S=>{const $=S.width,T=S.height;return c=Math.max(c,$),d=Math.max(d,T),w&&(l=!0),[{shape:{type:"image",x:0,y:0,width:$,height:T,src:S.url},fill:null,stroke:null}]});o.push(x)}else{let x=b;y.type==="icon"&&i&&(x=b*(v/h));const S=e?.symbolConfig==="tall"||e?.symbolConfig?.isTall||y.type==="object"&&rWe(y);c=Math.max(c,S?uj:x),d=Math.max(d,x),w&&y.resource?.primitive&&["square","triangle","x"].includes(y.resource?.primitive)&&(l=!0),o.push(Promise.resolve(sWe(y,x,S)))}});const f=await Promise.allSettled(o),m=[];return f.forEach(y=>{y.status==="fulfilled"?m.push(y.value):y.reason&&X.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",y.reason)}),V_(m,[c,d],{node:e?.node,scale:!1,opacity:e?.opacity,ariaLabel:e?.ariaLabel,rotations:a,useRotationSize:l})}function aWe(t,e){const i=t.symbolLayers,r=[],s=Z3(t),n=K3(e),o=(e?.maxSize?zt(e.maxSize):null)||Y3;let a,l=0,c=0;return i.forEach((d,h)=>{if(!d||d.type!=="line"&&d.type!=="path")return;const f=[];switch(d.type){case"line":{const m=dj(d,0);if(m==null)break;const y=m?.width||0;h===0&&(a=y);const v=Math.min(n||y,o),b=h===0?v:n?v*(y/a):v,w=b>eY/2?2*b:eY;c=Math.max(c,b),l=Math.max(l,w),m.width=b,f.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:m});break}case"path":{const m=Math.min(n||ey,o),y=Ut(d,0),v=Ut(d,-.2),b=l9(d,-.4),w=b?{color:b,width:1}:{};if(d.profile==="quad"){const x=d.width,S=d.height,$=UHe(x&&S?x/S:1,S===0,x===0),T={...w,join:"bevel"};f.push({shape:$[0],fill:v,stroke:T},{shape:$[1],fill:v,stroke:T},{shape:$[2],fill:y,stroke:T})}else f.push({shape:NS.pathSymbol3DLayer[0],fill:v,stroke:w},{shape:NS.pathSymbol3DLayer[1],fill:y,stroke:w});c=Math.max(c,m),l=c}}r.push(f)}),Promise.resolve(V_(r,[l,c],{node:e?.node,scale:s,opacity:e?.opacity,ariaLabel:e?.ariaLabel}))}async function lWe(t,e){const i=t.type==="mesh-3d",r=t.symbolLayers,s=K3(e),n=e?.maxSize?zt(e.maxSize):null,o=s||ey,a=[];let l=0,c=0,d=!1;for(let h=0;h<r.length;h++){const f=r.at(h),m=[];if(!i||f.type==="fill"){switch(f.type){case"fill":{const y=Math.min(o,n||NE);if(l=Math.max(l,y),c=Math.max(c,y),d=!0,i){const v=NS.meshSymbol3DFill,b=l9(f,-.4),w=iY(f,.05*y)??(b?{join:"round",color:b,width:1}:null);m.push({shape:v[0],fill:Ut(f,0),stroke:w},{shape:v[1],fill:Ut(f,-.2),stroke:w},{shape:v[2],fill:Ut(f,-.6),stroke:w})}else{let v=Ut(f,0);const b="pattern"in f?f.pattern:null,w=t0(f),x=BC(f);b!=null&&b.type==="style"&&b.style!=="solid"&&x&&(v=await Ope(b,x)),m.push({shape:NS.fill[0],fill:v,stroke:w})}break}case"line":{const y=dj(f,0);if(y==null)break;const v={stroke:y,shape:NS.fill[0]};l=Math.max(l,ey),c=Math.max(c,ey),m.push(v);break}case"extrude":{const y=Ut(f,0),v=Ut(f,-.2),b=Math.min(o,n||NE),w=BHe(b),x=ey,S=.7*ey+.5*b,$=iY(f,.1*Math.min(x,S))??{join:"round",...dj(f,-.4),width:1};m.push({shape:w[0],fill:v,stroke:$},{shape:w[1],fill:v,stroke:$},{shape:w[2],fill:y,stroke:$}),l=Math.max(l,x),c=Math.max(c,S);break}case"water":{const y=BC(f),v=SR(y),b=SR(y,2),w=SR(y,3),x=qHe();d=!0,m.push({shape:x[0],fill:v},{shape:x[1],fill:b},{shape:x[2],fill:w});const S=Math.min(o,n||NE);l=Math.max(l,S),c=Math.max(c,S);break}}a.push(m)}}return V_(a,[l,c],{node:e?.node,scale:d,opacity:e?.opacity,ariaLabel:e?.ariaLabel})}function cWe(t,e){if(t.symbolLayers.length===0)return Promise.reject(new R("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return oWe(t,e);case"line-3d":return aWe(t,e);case"polygon-3d":case"mesh-3d":return lWe(t,e)}return Promise.reject(new R("symbolPreview: swatchInfo3D","symbol not supported."))}const uWe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Ope,getSizeFromOptions:K3,getSymbolLayerFill:Ut,previewSymbol3D:cWe},Symbol.toStringTag,{value:"Module"})),rY={HH:315,HL:45,LL:135,LH:225},dWe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function hWe(t){if(!t)return;const{type:e}=t;if(e.includes("3d"))return Ut(t.symbolLayers.at(0));if(e==="simple-line"){const i=L$(t);return i&&i.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){const i=L$(t);return i&&i.color}return vGe(t)}function pWe(t,e){const i=e.HH.label,r=e.LL.label,s=e.HL.label,n=e.LH.label;switch(t){case"HH":default:return{top:i,bottom:r,left:s,right:n};case"HL":return{top:s,bottom:n,left:r,right:i};case"LL":return{top:r,bottom:i,left:n,right:s};case"LH":return{top:n,bottom:s,left:i,right:r}}}function fWe(t){const{focus:e,infos:i,numClasses:r}=t,s=dWe[r],n={};i.forEach(a=>{n[a.value]={label:a.label,fill:hWe(a.symbol)}});const o=[];for(let a=0;a<r;a++){const l=[];for(let c=0;c<r;c++){const d=n[s[a][c]];l.push(d.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:o,labels:pWe(e,n),rotation:Rpe(e)}}function Rpe(t){let e=rY[t];return t&&e==null&&(e=rY.HH),e||0}let wv=null;const sY=[255,255,255];function nY(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function mWe(t,e,i){const{backgroundColor:r,outline:s,dotSize:n}=t,o=22,a=.8,l=Math.round(o*o/Math.max(n,.5)**2*a),c=window.devicePixelRatio,d=document.createElement("canvas"),h=o*c;d.width=h,d.height=h,d.style.width=d.width/c+"px",d.style.height=d.height/c+"px";const f=d.getContext("2d");if(r&&(f.fillStyle=r.toCss(!0),f.fillRect(0,0,h,h),f.fill()),f.fillStyle=e?.toCss(!0)??"",wv&&wv.length/2===l)for(let y=0;y<2*l;y+=2){const v=wv[y],b=wv[y+1];f.fillRect(v,b,n*c,n*c),f.fill()}else{wv=[];for(let y=0;y<2*l;y+=2){const v=nY(0,h),b=nY(0,h);wv.push(v,b),f.fillRect(v,b,n*c,n*c),f.fill()}}s&&(s.color&&(f.strokeStyle=s.color.toCss(!0)),f.lineWidth=s.width,f.strokeRect(0,0,h,h));const m=new Image(o,o);return m.src=d.toDataURL(),m.ariaLabel=null,m.alt="",m}function yWe(t,e={}){const i=e.radius||40,r=2*Math.PI*i,s=t.length,n=r/s,o=[],a=L$(e.outline);a?.width!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,c=l&&l.length===s&&l.reduce((y,v)=>y+v,0)===100,d=[0];for(let y=0;y<s;y++){let v=null;c&&(v=l[y]*r/100,d.push(v+d[y])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(v??n)/2} ${r}`,dashoffset:"-"+(c?d[y]/2:y*(n/2)),color:t[y]},offset:[0,0]})}let h=null;const f=2*i+(a?.width||0),m=e.holePercentage;if(m){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*m},fill:null,stroke:a,offset:[0,0]});const y=f/2;h=[[{shape:{type:"circle",cx:y,cy:y,r:y},fill:sY,stroke:a?{...a,color:sY}:null,offset:[0,0]},{shape:{type:"circle",cx:y,cy:y,r:i*m},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return V_([o],[f,f],{cssEffectFilter:e.cssEffectFilter,ignoreStrokeWidth:!0,masking:h,rotations:[-90],ariaLabel:e.ariaLabel})}function jm(t,e={}){const s=e.align==="horizontal",n=s?75:24,o=s?24:75,a=e.width??n,l=e.height??o,c=e.gradient??!0,d=window.devicePixelRatio,h=a*d,f=l*d,m=document.createElement("canvas");m.width=h,m.height=f,m.ariaLabel=e.ariaLabel??null,m.style.width=`${a}px`,m.style.height=`${l}px`;const y=m.getContext("2d"),v=s?h:0,b=s?0:f;if(c){const x=y.createLinearGradient(0,0,v,b),S=t.length,$=S===1?0:1/(S-1);t.forEach((T,C)=>x.addColorStop(C*$,T.toString())),y.fillStyle=x,y.fillRect(0,0,h,f)}else{const x=s?h/t.length:h,S=s?f:f/t.length;let $=0,T=0;for(const C of t)y.fillStyle=C.toString(),y.fillRect($,T,x,S),$=s?$+x:0,T=s?0:T+S}const w=document.createElement("div");return w.style.width=`${a}px`,w.style.height=`${l}px`,vWe(w,e?.cssEffectFilter),w.appendChild(m),w}function gWe(t){const e=t.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return e?e[1]:null}function vWe(t,e){if(!e)return;t.style.filter=e;const i=gWe(e);if(i){const r=zt(Tt(i));r<0?t.style.marginLeft=`${Math.abs(r)}px`:t.style.marginRight=`${r}px`}}async function Npe(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await K(()=>import("./previewWebStyleSymbol-BI-IYG1n.js"),[]);return i(t,Npe,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await K(()=>Promise.resolve().then(()=>uWe),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await K(()=>import("./previewSymbol2D-D0iFN_BY.js"),__vite__mapDeps([280,182]));return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await K(()=>Promise.resolve().then(()=>CXe),void 0);return i(t,e)}default:return}}function Dpe(t){return t&&t.opacity!==void 0?t.opacity*("parent"in t?Dpe(t.parent):1):1}async function h_t(t,e){if(!t)return;const i=t.sourceLayer,r=(e!=null&&e.useSourceLayer?i:t.layer)??i,s=e?.ignoreOpacity?1:Dpe(r);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const $=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):t.symbol.clone();return xR($,null,{add:s}),$}const n=e?.renderer??wWe(r);let o=n&&"getSymbolAsync"in n?await n.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):o.clone(),!(n&&"visualVariables"in n&&n.visualVariables?.length&&bWe(o)))return xR(o,null,{add:s}),o;if("arcadeRequiredForVisualVariables"in n&&n.arcadeRequiredForVisualVariables&&e?.arcade==null){const $={...e};$.arcade=await wh(),e=$}const{getColor:a,getOpacity:l,getAllSizes:c,getRotationAngle:d}=await K(()=>Promise.resolve().then(()=>Fg),void 0),h=[],f=[],m=[],y=[];for(const $ of n.visualVariables)switch($.type){case"color":h.push($);break;case"opacity":f.push($);break;case"rotation":y.push($);break;case"size":$.target||m.push($)}const v=!!h.length&&h[h.length-1],b=v?a(v,t,e):null,w=!!e?.ignoreOpacity,x=!!f.length&&f[f.length-1],S=x?l(x,t,e):null;if(xR(o,b,w?void 0:{override:S,add:s}),m.length&&e?.ignoreSizeVariables!==!0){const $=c(m,t,e);await zHe(o,$)}if(e?.ignoreRotationVariables!==!0)for(const $ of y)jHe(o,d($,t,e),$.axis);return o}function bWe(t){return!Qa(t)||t.symbolLayers.at(0)?.type!=="water"}function wWe(t){if(t)return"renderer"in t?t.renderer:void 0}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const Fpe=10,c9=20,X3=10,u9=20,d9={univariateAboveAndBelowSymbol:"arcgis-univariate-above-and-below-ramp__symbol",colorRamp:"arcgis-legend__color-ramp"};function Jw(t){return typeof t=="number"}function _We(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?j`<svg height=4 width=10>${Ji`<line style=${ot(e)} x1=0 x2=10 y1=2 y2=2 />`}</svg>`:j`<svg height=10 width=10>${Ji`<line style=${ot(e)} x1=5 x2=5 y1=0 y2=10 />`}</svg>`}function xWe(t,e="vertical"){const i={height:`${c9}px`,opacity:t?.toString()};return j`<div class=${O(d9.univariateAboveAndBelowSymbol)} style=${ot(i)}>${_We(e)}</div>`}function zpe(t,e,i,r="vertical",s){t.infos.forEach((n,o)=>{if(s&&o===2){n.preview=a0e(xWe(i,r));return}else{const a=(Jw(n.size)?Ql(n.size):0)+(r==="horizontal"?u9:X3),l=n.preview,c=l?.tagName.toLowerCase()==="div",d=c?l:document.createElement("div");d.className=d9.univariateAboveAndBelowSymbol,r==="horizontal"?d.style.width=`${a}px`:d.style.height=`${a}px`,!c&&l&&d.appendChild(l),zu(d,_h(e,n.label)),n.preview=d}})}function Q3(t,e="classic"){const i=t.infos,r=i.at(0),s=i.at(-1),n=Jw(r.size)?Ql(r.size):0,o=Jw(s.size)?Ql(s.size):0;return e==="classic"?(n+X3)/2:(n-o)/2}function Zw(t,e){if(!t)return null;const i=t.infos.map(s=>s.color),r=jm(e.type==="full"?i:e.type==="above"?i.slice(0,3):i.slice(2,5),{width:e.width??void 0,height:e.height??void 0,align:e.rampAlignment,cssEffectFilter:e.cssEffectFilter,ariaLabel:e.ariaLabel??void 0});return r.className=d9.colorRamp,e.opacity!=null&&(r.style.opacity=e.opacity.toString()),r}function h9(t,e,i,r="vertical"){let s=0;const n=t.infos,o=Math.floor(n.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?n.length-1:o;for(let c=a;c<=l;c++)if(i&&c===o)s+=r==="horizontal"?Fpe:c9;else{const d=n[c].size,h=(Jw(d)?Ql(d):0)+(r==="horizontal"?u9:X3);s+=h}return Math.round(s)}function Yw(t,e,i,r="vertical"){const s=h9(t,e,i,r),n=t.infos,o=Math.floor(n.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?n.length-1:o,c=Jw(n[a].size)?n[a].size:0,d=Jw(n[l].size)?n[l].size:0,h=e==="full"?c+d:e==="above"?c:d,f=i?r==="vertical"?c9:Fpe:0,m=r==="vertical"?X3*(e==="full"?2:1):u9*(e==="full"?2:1);return Math.round(s-(Ql(h)/2+f/2+m/2))}function jpe(t,e,i,r="vertical"){const s=t.infos;let n=s.find(({type:a})=>a==="size-ramp"),o=s.find(({type:a})=>a==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],zpe(n,e,i,r,!0)),o&&(o={...o},o.infos=[...o.infos]),r==="horizontal"&&(n?.infos.reverse(),o?.infos.reverse()),{sizeRampElement:n,colorRampElement:o}}function Vpe(t,e,i="vertical"){const r=t.infos;let s=r.find(({type:o})=>o==="size-ramp"),n=r.find(({type:o})=>o==="color-ramp");return s&&(s={...s},s.infos=[...s.infos],zpe(s,e,null,i,!1)),n&&(n={...n},n.infos=[...n.infos]),i==="horizontal"&&(s?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:s,colorRampElement:n}}const hj={marginLeft:"3px"},i0={display:"table-cell",verticalAlign:"middle"},Upe={display:"flex",alignItems:"flex-start"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const SWe=Qe`.arcgis-legend--card__layer-row{display:flex;align-items:center}.arcgis-legend--card__symbol{display:block;margin:auto}.arcgis-legend--card__symbol-container{position:relative}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__color--card{position:relative}.arcgis-univariate-above-and-below-ramp__color--card:before{content:"";border-left:var(--calcite-border-width-sm) solid var(--calcite-color-background);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-background);width:100%;height:15px;display:block;position:absolute;top:var(--calcite-border-width-sm)}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,_v={layerRow:"arcgis-legend--card__layer-row",symbol:"arcgis-legend--card__symbol",symbolContainer:"arcgis-legend--card__symbol-container",rampLabelsContainer:"arcgis-legend__ramp-labels",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"arcgis-univariate-above-and-below-ramp__color--card"};var Uy;let $We=(Uy=class extends it{constructor(){super(...arguments),this._direction=EA(),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:s}=jpe(e,this.messages,i,"horizontal");if(!r)return null;const n=h9(r,"full",!0,"horizontal"),o=Yw(r,"above",!0,"horizontal"),a=Yw(r,"below",!0,"horizontal"),l=12,c=this.messages?.previewColorRampAriaLabel,d=Zw(s,{width:o,height:l,rampAlignment:"horizontal",opacity:i,type:"above",cssEffectFilter:this.cssEffectFilter,ariaLabel:c}),h=Zw(s,{width:a,height:l,rampAlignment:"horizontal",opacity:i,type:"below",cssEffectFilter:this.cssEffectFilter,ariaLabel:c}),f=Q3(r,"card"),m=r.infos.map($=>$.label),y=m.length-1,v=m.map(($,T)=>T===0||T===y?j`<div>${$}</div>`:null),b={display:"flex",flexDirection:"column"},w={display:"flex",flexDirection:"row"},x={marginTop:"3px",display:"flex"};this._direction==="rtl"?x.marginRight=`${f}px`:x.marginLeft=`${f}px`;const S={width:`${n}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return j`<div class=${O(_v.layerRow)} style=${ot(b)}><div class=${O(_v.symbolContainer)} style=${ot(w)}>${r.infos.map($=>j`<div class=${O(_v.symbol)}>${$.preview}</div>`)}</div>${d?j`<div class=${O(_v.univariateAboveAndBelowColorRamp)} style=${ot(x)}><div>${d}</div><div>${h}</div></div>`:null}<div class=${O(_v.layerInfo)}><div class=${O(_v.rampLabelsContainer)} style=${ot(S)}>${v}</div></div></div>`}},Uy.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Uy.styles=SWe,Uy);Ms("arcgis-legend-card-univariate-above-and-below-ramp",$We);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const IWe=Qe`.arcgis-legend--card__layer-row,.arcgis-legend--card__symbol{display:flex;align-items:center}.arcgis-legend--card__symbol-container{position:relative}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__color--card{position:relative}.arcgis-univariate-above-and-below-ramp__color--card:before{content:"";border-left:var(--calcite-border-width-sm) solid var(--calcite-color-background);border-right:var(--calcite-border-width-sm) solid var(--calcite-color-background);width:100%;height:15px;display:block;position:absolute;top:var(--calcite-border-width-sm)}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,xv={layerRow:"arcgis-legend--card__layer-row",symbol:"arcgis-legend--card__symbol",symbolContainer:"arcgis-legend--card__symbol-container",rampLabelsContainer:"arcgis-legend__ramp-labels",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"arcgis-univariate-above-and-below-ramp__color--card"};var By;let kWe=(By=class extends it{constructor(){super(...arguments),this._direction=EA(),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:s}=Vpe(e,this.messages,"horizontal");if(!r)return null;const n=h9(r,"full",!1,"horizontal"),o=Yw(r,"full",!1,"horizontal"),a=Zw(s,{width:o,height:12,rampAlignment:"horizontal",opacity:i,type:"full",cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages?.previewColorRampAriaLabel}),l=Q3(r,"card"),c=r.infos.length-1,d=r.infos.map((v,b)=>b===0||b===c?j`<div>${v.label}</div>`:null),h={display:"flex",flexDirection:"column"},f={display:"flex",flexDirection:"row"},m={marginTop:"3px",display:"flex"};this._direction==="rtl"?m.marginRight=`${l}px`:m.marginLeft=`${l}px`;const y={width:`${n}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return j`<div class=${O(xv.layerRow)} style=${ot(h)}><div class=${O(xv.symbolContainer)} style=${ot(f)}>${r.infos.map(v=>j`<div class=${O(xv.symbol)}>${v.preview}</div>`)}</div><div class=${O(xv.univariateAboveAndBelowColorRamp)} style=${ot(m)}><div>${a}</div></div><div class=${O(xv.layerInfo)}><div class=${O(xv.rampLabelsContainer)} style=${ot(y)}>${d}</div></div></div>`}},By.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},By.styles=IWe,By);Ms("arcgis-legend-card-univariate-color-size-ramp",kWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const Kw={heading:"esri-widget__heading",panel:"esri-widget--panel",widget:"esri-widget"};/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */function qC({level:t,class:e,id:i,children:r,excludeGlobalCss:s}){const n=EWe(t),o=`h${n}`,a=Gee(o);return u2`<${a} .ariaLevel=${String(n)} class=${O(hi(s?e:Kw.heading,e))} id=${i??le} role=heading>${r}</${a}>`}function TWe(t,e,i){return Math.min(Math.max(t,e),i)}function EWe(t){return TWe(Math.ceil(t),1,6)}/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const MWe=Qe`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.arcgis-legend--card__section{word-break:break-word;word-wrap:break-word;padding:var(--calcite-spacing-sm) var(--calcite-spacing-md);min-width:250px;max-width:500px;height:100%;height:-moz-available;height:-webkit-fill-available;height:fill-available;overflow:auto;font-size:var(--calcite-font-size-sm)}.arcgis-legend--card__carousel-title-container{margin-bottom:var(--calcite-spacing-sm)}.arcgis-legend--card__carousel-title{margin:0}.arcgis-legend--card__section-title{font-weight:var(--calcite-font-weight-normal)}.arcgis-legend--card__layer-caption{padding:var(--calcite-spacing-xs) 0;margin:0;font-weight:var(--calcite-font-weight-normal)}.arcgis-legend--card__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.arcgis-legend--card__image-label{padding-right:var(--calcite-spacing-xs);padding-left:var(--calcite-spacing-xs)}.arcgis-legend--card__label-element{margin:.1em;padding:.5em 1em;min-width:2em;min-height:1em;text-align:center;display:flex;align-items:center;justify-content:center;flex:1}.arcgis-legend--card__layer-row{display:flex;align-items:center}.arcgis-legend--card__symbol{display:block;margin:auto}.arcgis-legend--card__pie-chart-ramp-preview{display:flex;justify-content:center}.arcgis-legend--card__relationship-container{display:flex;flex-direction:column}.arcgis-legend--card__relationship-container .arcgis-legend--card__layer-row{padding-bottom:.5em}.arcgis-legend--card__relationship-container .arcgis-legend--card__layer-row:last-child{padding-bottom:0}.arcgis-legend--card__container{display:flex;gap:var(--calcite-spacing-sm);flex-wrap:wrap}.arcgis-legend--card__background-styles-container{display:flex;flex-wrap:wrap}:host([stacked]) .arcgis-legend--card__container{display:table}:host([stacked]) .arcgis-legend--card__symbol-row{display:table-row;width:100%}:host([stacked]) .arcgis-legend--card__label-cell{display:table-cell;vertical-align:middle;padding:var(--calcite-spacing-xxs)}:host([stacked]) .arcgis-legend--card__symbol-cell{display:table-cell;vertical-align:middle;text-align:center;padding:var(--calcite-spacing-xxs)}:host([stacked]) .arcgis-legend--card__symbol-cell div{display:flex;align-items:center;justify-content:center}`,Ki={carouselTitleContainer:"arcgis-legend--card__carousel-title-container",carouselTitle:"arcgis-legend--card__carousel-title",sectionTitle:"arcgis-legend--card__section-title",imageryLayerStretchedImage:"arcgis-legend--card__imagery-layer-image--stretched",imageLabel:"arcgis-legend--card__image-label",layerCaption:"arcgis-legend--card__layer-caption",labelElement:"arcgis-legend--card__label-element",layerRow:"arcgis-legend--card__layer-row",labelCell:"arcgis-legend--card__label-cell",section:"arcgis-legend--card__section",symbol:"arcgis-legend--card__symbol",symbolRow:"arcgis-legend--card__symbol-row",symbolCell:"arcgis-legend--card__symbol-cell",pieChartRampPreview:"arcgis-legend--card__pie-chart-ramp-preview",relationshipContainer:"arcgis-legend--card__relationship-container",backgroundStylesContainer:"arcgis-legend--card__background-styles-container",container:"arcgis-legend--card__container"};function CWe(t){return t?t.r*.299+t.g*.587+t.b*.114>=127:void 0}var qy;let PWe=(qy=class extends it{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3}_getBackgroundStyles(e){const i=e.symbol,r=i.color,s=!!r?.a,n="outline"in i?i.outline:null,o=!!n?.color?.a,a=s&&r?new ne([r.r,r.g,r.b,r.a*this.layer.opacity]):new ne([255,255,255,0]),l=o&&n.color?new ne([n.color.r,n.color.g,n.color.b,n.color.a*this.layer.opacity]):new ne([255,255,255,0]),c=CWe(e.symbol.color)??!0,d=c?"black":"white",h=c?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:s?a.toCss(!0):"none",color:d,textShadow:`-1px -1px 0 ${h},
                  1px -1px 0 ${h},
                  -1px 1px 0 ${h},
                  1px 1px 0 ${h}`,border:o?`1px solid ${l.toCss(!0)}`:"none",filter:this.cssEffectFilter??""}}render(){const e=this._renderLegendElement(),i=Hhe(this.legendElement,this.messages),r=this.stacked?j`<div class=${O(Ki.carouselTitleContainer)}>${qC({class:hi(Ki.carouselTitle,Kw.heading),level:this.headingLevel,children:this.activeLayerInfo.title})}${i?j`<p class=${O(Ki.layerCaption)}>${i}</p>`:null}</div>`:i?qC({class:hi(Ki.sectionTitle,Kw.heading),level:this.headingLevel,children:i}):null;return j`<section class=${O(Ki.section)} role=tabpanel tabindex=0>${r}${e}</section>`}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return j`<arcgis-legend-card-size-ramp .hasIndicators=${this.stacked} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-size-ramp>`;case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return j`<arcgis-legend-card-color-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-color-ramp>`;case"relationship-ramp":return j`<arcgis-legend-relationship-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .opacity=${this.layer.opacity} .messages=${this.messages}></arcgis-legend-relationship-ramp>`;case"pie-chart-ramp":{const{preview:e}=this.legendElement;return zu(e,this.messages.previewPieChartAriaLabel),j`<div class=${O(Ki.pieChartRampPreview)}>${e}</div>`}case"univariate-above-and-below-ramp":return j`<arcgis-legend-card-univariate-above-and-below-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-univariate-above-and-below-ramp>`;case"univariate-color-size-ramp":return j`<arcgis-legend-card-univariate-color-size-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-card-univariate-color-size-ramp>`;default:return null}}_renderSymbolTable(e){const i=e.infos.map(n=>this._renderElementInfo(n,e.legendType)).filter(Boolean);if(!i.length)return null;const r=e.infos.some(n=>"symbol"in n&&n.symbol?.type.includes("simple-fill")),s=this.activeLayerInfo.legendElements.some(({type:n})=>n==="relationship-ramp")?Ki.relationshipContainer:r?Ki.backgroundStylesContainer:Ki.container;return j`<div class=${O(s)}>${i}</div>`}_renderElementInfo(e,i){const{layer:r}=this,s="label"in e?e.label:null;if("type"in e&&e.type)return j`<arcgis-legend-card-element .activeLayerInfo=${this.activeLayerInfo} .cssEffectFilter=${this.cssEffectFilter} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${r} .legendElement=${e} .messages=${this.messages}></arcgis-legend-card-element>`;if(!("preview"in e&&e.preview)&&!("src"in e&&e.src))return null;const n=Jhe(r,i),o=hh(this.messages,s,!1)||"";if("src"in e&&e.src){const a={[Ki.symbolCell]:this.stacked};return j`<div class=${O(hi(Ki.layerRow,{[Ki.symbolRow]:this.stacked}))}><div class=${O(hi(a))}>${this._renderImage(e,r,n)}</div><div class=${O(hi(Ki.imageLabel,{[Ki.labelCell]:this.stacked}))}>${o}</div></div>`}if("symbol"in e&&e.preview){if(!e.symbol?.type.includes("simple-fill")){if(!e.label)return j`<div>${e.preview}</div>`;const a={[Ki.symbolCell]:this.stacked},{preview:l}=e,c="previewAriaLabel"in e?e.previewAriaLabel:null,d="label"in e?hh(this.messages,e.label,!1):null;return zu(l,_h(this.messages,c||d)),j`<div class=${O(hi(Ki.layerRow,{[Ki.symbolRow]:this.stacked}))}><div class=${O(hi(a))}>${l}</div><div class=${O(hi(Ki.imageLabel,{[Ki.labelCell]:this.stacked}))}>${o}</div></div>`}return j`<div class=${O(Ki.layerRow)}><div class=${O(Ki.labelElement)} style=${ot(this._getBackgroundStyles(e))}>${o}</div></div>`}return null}_renderImage(e,i,r){const{previewAriaLabel:s,src:n,opacity:o}=e,a=hh(this.messages,e.label,!1),l={[Ki.imageryLayerStretchedImage]:r,[Ki.symbol]:!r},c={opacity:`${o??i.opacity}`},d=_h(this.messages,s||a);return j`<img alt=${d??le} .ariaLabel=${d} class=${O(hi(l))} height=${e.height??void 0??le} src=${n??le} style=${ot(c)} width=${e.width??void 0??le}>`}},qy.properties={cssEffectFilter:1,stacked:7,activeLayerInfo:0,headingLevel:9,layer:0,legendElement:0,messages:0},qy.styles=MWe,qy);Ms("arcgis-legend-card-element",PWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const AWe=Qe`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:flex;flex-direction:row;position:relative;transition:max-width .25s ease-in-out;overflow-x:auto}calcite-carousel-item[selected]{flex:1;overflow:auto}.arcgis-legend--card__message{padding:.5em 1em}.arcgis-legend--card__service-caption-text{margin:0}.arcgis-legend--card__service-content{display:flex;flex:1}.arcgis-legend--card__service-content>arcgis-legend-card-element:not(:first-child){border-left:1px solid var(--calcite-color-border-2)}.arcgis-legend--card__service{border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);min-width:fit-content;display:flex;flex-direction:column;flex:1}.arcgis-legend--card__service-caption-container{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-md)}`,rm={message:"arcgis-legend--card__message",serviceCaptionText:"arcgis-legend--card__service-caption-text",serviceContent:"arcgis-legend--card__service-content",service:"arcgis-legend--card__service",serviceCaptionContainer:"arcgis-legend--card__service-caption-container"},LWe=768;var Gy;let OWe=(Gy=class extends it{constructor(){super(...arguments),this.stacked=!1,this.headingLevel=3,this.layout="auto",this.type="card"}loaded(){this.manager.onLifecycle(()=>[de(()=>[this.layout,this.view.width],()=>{this.stacked=this.layout==="stack"||(!this.layout||this.layout==="auto")&&this.view.width<=LWe},{initial:!0})])}render(){return(this.stacked?this._renderCarousel():this._renderLayers())||j`<div class=${O(rm.message)}>${this.messages.noLegend}</div>`}_renderTitle(e){return j`<div class=${O(rm.serviceCaptionContainer)}>${qC({class:hi(rm.serviceCaptionText,Kw.heading),level:this.headingLevel,children:e})}</div>`}_renderCarousel(){const e=[],i=this.activeLayerInfos;if(i)for(const r of i)this._renderSections(r,e);return e?.length?j`<calcite-carousel .label=${this.messages.carousel??""}>${e.map((r,s)=>j`<calcite-carousel-item .label=${zw(this.messages?.pagination?.pageText??"",{index:s+1,total:e.length})}>${r}</calcite-carousel-item>`)}</calcite-carousel>`:null}_renderLayers(){const e=this.activeLayerInfos?.toArray()?.map(i=>this._renderLegendForLayer(i)).filter(Boolean);return e?.length?e:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const i=e.children.toArray().map(this._renderLegendForLayer,this);return j`<section class=${O(rm.service)}>${this._renderTitle(e.title)}<div class=${O(rm.serviceContent)}>${i}</div></section>`}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const i=e.legendElements?.filter(Boolean);if(!i?.length)return null;const r=i.map(s=>j`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${s} .messages=${this.messages}></arcgis-legend-card-element>`);return j`<section class=${O(rm.service)}>${this._renderTitle(e.title)}<div class=${O(rm.serviceContent)}>${r}</div></section>`}_renderSections(e,i){if(!e.ready)return;if(e.children.length)for(const s of e.children)this._renderSections(s,i);const r=e.legendElements;if(r?.length)for(const s of r){const n=j`<arcgis-legend-card-element .activeLayerInfo=${e} .cssEffectFilter=${e.cssEffectFilter??void 0} .stacked=${this.stacked} .headingLevel=${this.headingLevel} .layer=${e.layer} .legendElement=${s} .messages=${this.messages}></arcgis-legend-card-element>`;n&&i.push(n)}}},Gy.properties={stacked:16,activeLayerInfos:0,headingLevel:9,messages:0,view:0,layout:1,type:32},Gy.styles=AWe,Gy);Ms("arcgis-legend-card-view",OWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const RWe=Qe`.arcgis-legend__size-ramp--container{margin-left:var(--calcite-spacing-sm);display:table}:dir(rtl) .arcgis-legend__size-ramp--container{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__size-ramp--row{display:table-row}.arcgis-legend__size-ramp--cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word;display:table-cell}.arcgis-legend__size-ramp--label{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__size-ramp--symbol-container{min-width:10px;text-align:center}.arcgis-legend__size-ramp--symbol{display:flex;justify-content:center}`,sm={container:"arcgis-legend__size-ramp--container",row:"arcgis-legend__size-ramp--row",cell:"arcgis-legend__size-ramp--cell",label:"arcgis-legend__size-ramp--label",symbol:"arcgis-legend__size-ramp--symbol",symbolContainer:"arcgis-legend__size-ramp--symbol-container"};var Hy;let NWe=(Hy=class extends it{constructor(){super(...arguments),this.legendElement=null}render(){const e=this.legendElement.infos.map(i=>this._renderRow(i)).filter(Boolean);return e.length?this.legendElement.theme==="spike"?j`<arcgis-legend-spike-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-spike-ramp>`:j`<div class=${O(sm.container)}>${e}</div>`:null}_renderRow(e){const{preview:i}=e;if(!i)return null;const r=hh(this.messages,e.label,!1);return zu(i,_h(this.messages,r)),j`<div class=${O(sm.row)}><div class=${O(hi(sm.cell,sm.symbolContainer))}><div class=${O(sm.symbol)}>${i}</div></div><div class=${O(hi(sm.cell,sm.label))}>${r}</div></div>`}},Hy.properties={legendElement:0,messages:0},Hy.styles=RWe,Hy);Ms("arcgis-legend-classic-size-ramp",NWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const DWe=Qe`.arcgis-legend__layer-row{display:flex}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--symbols{min-width:10px;text-align:center}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-sm);margin-left:auto}.arcgis-legend__color-ramp{width:24px}.arcgis-legend__opacity-ramp{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExODcxRkM3N0RBQzA4QkVDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEOTY4RkNFNjM1MzYxMUU0ODlDMUFFQ0M2REU5QzFCNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEOTY4RkNFNTM1MzYxMUU0ODlDMUFFQ0M2REU5QzFCNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZDNzdEQUMwOEJFQ0UiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZDNzdEQUMwOEJFQ0UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6SLS5VAAAAKElEQVR42mI8c+YMAwwYGxvD2UwMOADpEoz///+Hc86ePUsLOwACDABC1ghwV8TLOQAAAABJRU5ErkJggg==)}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:var(--calcite-font-size-sm);white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}.arcgis-legend-layer-caption{display:table-caption;padding:var(--calcite-spacing-sm) 0}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}`,Kh={layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",symbolContainer:"arcgis-legend__layer-cell arcgis-legend__layer-cell--symbols",rampContainer:"arcgis-legend__ramps",colorRamp:"arcgis-legend__color-ramp",opacityRamp:"arcgis-legend__opacity-ramp",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label"};var Wy;let FWe=(Wy=class extends it{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const i=this.legendElement.type==="opacity-ramp",r=i?Kh.opacityRamp:"";e.className=`${Kh.colorRamp} ${r}`,this.opacity!=null&&(e.style.opacity=this.opacity.toString());const s=i?this.messages.previewOpacityRampAriaLabel:this.messages.previewColorRampAriaLabel;return zu(e,s),e}render(){const{legendElement:e,_preview:i}=this;if(!i)return null;const r={height:i.style.height};return j`<div class=${O(Kh.layerRow)}><div class=${O(Kh.symbolContainer)}><div class=${O(Kh.rampContainer)}>${i}</div></div><div class=${O(Kh.layerInfo)}><div class=${O(Kh.rampLabelsContainer)} style=${ot(r)}>${e.infos.map(s=>this._renderRampLabel(s,e.type))}</div></div></div>`}_renderRampLabel(e,i){return j`<div class=${O(e.label?Kh.rampLabel:void 0)}>${Whe(e,i,this.messages)}</div>`}},Wy.properties={_preview:16,legendElement:0,opacity:9,messages:0},Wy.styles=DWe,Wy);Ms("arcgis-legend-classic-color-ramp",FWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const zWe=Qe`.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm);display:table}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row{display:table-row}.arcgis-legend__layer-cell{display:table-cell;padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__symbol{display:flex;justify-content:center}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-md)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-md);margin-left:auto}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}.arcgis-univariate-above-and-below-ramp__label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-univariate-above-and-below-ramp__label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.arcgis-univariate-above-and-below-ramp__label:first-child{top:calc(var(--calcite-font-size-sm) / 2.2 * -1)}.arcgis-univariate-above-and-below-ramp__label:last-child{bottom:calc(var(--calcite-font-size-sm) / 2.2 * -1)}:dir(rtl) .arcgis-univariate-above-and-below-ramp__label{margin-right:var(--calcite-spacing-sm);margin-left:auto}:dir(rtl) .arcgis-univariate-above-and-below-ramp__label:before{right:-19px;left:auto}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,Sa={layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",symbol:"arcgis-legend__symbol",rampContainer:"arcgis-legend__ramps",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label",univariateAboveAndBelowLabel:"arcgis-univariate-above-and-below-ramp__label"};var Jy;let jWe=(Jy=class extends it{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:s}=jpe(e,this.messages,i);if(!r)return null;const n=this.messages.previewColorRampAriaLabel,o=Yw(r,"above",!0),a=Yw(r,"below",!0),l=12,c=Zw(s,{width:l,height:o,rampAlignment:"vertical",opacity:i,type:"above",cssEffectFilter:this.cssEffectFilter,ariaLabel:n}),d=Zw(s,{width:l,height:a,rampAlignment:"vertical",opacity:i,type:"below",cssEffectFilter:this.cssEffectFilter,ariaLabel:n}),h=Q3(r),f=r.infos.map(T=>T.label),m=f.map((T,C)=>C===0?j`<div class=${O(T?c?Sa.univariateAboveAndBelowLabel:Sa.rampLabel:void 0)}>${T}</div>`:C===2?j`<div></div>`:null),y=f.length-1,v=Math.floor(f.length/2),b=f.map((T,C)=>C===v||C===y?j`<div class=${O(T?c?Sa.univariateAboveAndBelowLabel:Sa.rampLabel:void 0)}>${T}</div>`:null),w={display:"table-cell",verticalAlign:"middle"},x={marginTop:`${h}px`},S={height:`${o}px`},$={height:`${a}px`};return j`<div style=${ot(Upe)}><div class=${O(Sa.layerBody)}>${r.infos.map((T,C)=>j`<div class=${O(Sa.layerRow)}><div class=${O(Sa.symbol)} style=${ot(w)}>${T.preview}</div>${!c&&C%2===0?j`<div class=${O(Sa.layerInfo)}>${f[C]}</div>`:null}</div>`)}</div>${c?j`<div style=${ot(x)}><div style=${ot(hj)}><div style=${ot(i0)}><div class=${O(Sa.rampContainer)}>${c}</div></div><div style=${ot(i0)}><div class=${O(Sa.rampLabelsContainer)} style=${ot(S)}>${m}</div></div></div><div style=${ot(hj)}><div style=${ot(i0)}><div class=${O(Sa.rampContainer)}>${d}</div></div><div style=${ot(i0)}><div class=${O(Sa.rampLabelsContainer)} style=${ot($)}>${b}</div></div></div></div>`:null}</div>`}},Jy.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Jy.styles=zWe,Jy);Ms("arcgis-legend-classic-univariate-above-and-below-ramp",jWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const VWe=Qe`.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row,.arcgis-legend__symbol{display:flex;justify-content:center}.arcgis-legend__ramps{margin-left:var(--calcite-spacing-md)}:dir(rtl) .arcgis-legend__ramps{margin-right:var(--calcite-spacing-md);margin-left:auto}.arcgis-legend__size-ramp~.arcgis-legend__layer-cell--info{width:80%;max-width:80%}.arcgis-legend__ramp-labels{display:flex;flex-flow:column nowrap;justify-content:space-between}.arcgis-legend__ramp-label{position:relative;padding:0 var(--calcite-spacing-sm);line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__ramp-label:before{display:block;position:absolute;top:.25em;right:100%;border-width:3px 4px 3px 0;border-style:solid;border-color:transparent var(--calcite-color-text-1) transparent transparent;width:0;height:0;content:""}.arcgis-legend__ramp-label:first-child{margin-top:calc(var(--calcite-font-size-sm) / 3 * -1)}.arcgis-legend__ramp-label:last-child{bottom:calc(var(--calcite-font-size-sm) * .25 * -1)}:dir(rtl) .arcgis-legend__ramp-label:before{right:auto;left:100%;border-width:3px 0 3px 4px;border-color:transparent transparent transparent var(--calcite-color-text-1)}.arcgis-legend__univariate-label{position:relative;margin-left:7px;line-height:1em;white-space:nowrap;font-size:var(--calcite-font-size-sm)}.arcgis-legend__univariate-label:before{display:block;position:absolute;top:.45em;left:-19px;border-width:1px 0 0;border-style:solid;width:14px;height:0;content:""}.arcgis-legend__univariate-label:first-child{top:calc(var(--calcite-font-size-sm) / 2.2 * -1)}.arcgis-legend__univariate-label:last-child{bottom:calc(var(--calcite-font-size-sm) / 2.2 * -1)}:dir(rtl) .arcgis-legend__univariate-label{margin-right:var(--calcite-spacing-sm);margin-left:auto}:dir(rtl) .arcgis-legend__univariate-label:before{right:-19px;left:auto}.arcgis-univariate-above-and-below-ramp__symbol{display:flex;align-items:center;justify-content:center}`,Xh={layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",symbol:"arcgis-legend__symbol",rampContainer:"arcgis-legend__ramps",sizeRamp:"arcgis-legend__size-ramp",rampLabelsContainer:"arcgis-legend__ramp-labels",rampLabel:"arcgis-legend__ramp-label",univariateLabel:"arcgis-legend__univariate-label"};var Zy;let UWe=(Zy=class extends it{constructor(){super(...arguments),this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:i}=this,{sizeRampElement:r,colorRampElement:s}=Vpe(e,this.messages);if(!r)return null;const n=Q3(r),o=12,a=Yw(r,"full",!1),l=Zw(s,{width:o,height:a,rampAlignment:"vertical",opacity:i,type:"full",cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewColorRampAriaLabel}),c=r.infos.length-1,d=r.infos.map((y,v)=>v===0||v===c?j`<div class=${O(y.label?s?Xh.univariateLabel:Xh.rampLabel:void 0)}>${y.label}</div>`:null),h={display:"table-cell",verticalAlign:"middle"},f={marginTop:`${n}px`},m={height:`${a}px`};return j`<div style=${ot(Upe)}><div class=${O(Xh.layerBody)}>${r.infos.map(y=>j`<div class=${O(hi(Xh.layerRow,Xh.sizeRamp))}><div class=${O(Xh.symbol)} style=${ot(h)}>${y.preview}</div></div>`)}</div><div style=${ot(f)}><div style=${ot(hj)}><div style=${ot(i0)}><div class=${O(Xh.rampContainer)}>${l}</div></div><div style=${ot(i0)}><div class=${O(Xh.rampLabelsContainer)} style=${ot(m)}>${d}</div></div></div></div></div>`}},Zy.properties={cssEffectFilter:1,legendElement:0,opacity:9,messages:0},Zy.styles=VWe,Zy);Ms("arcgis-legend-classic-univariate-color-size-ramp",UWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const BWe=Qe`.arcgis-legend__layer-table{display:flex;flex-flow:column;margin-bottom:var(--calcite-spacing-md);width:100%}.arcgis-legend__layer-table--size-ramp{display:table}.arcgis-legend__layer-table--size-ramp .arcgis-legend__layer-cell{display:table-cell}.arcgis-legend__layer-caption{display:table-caption;padding:var(--calcite-spacing-sm) 0;word-break:break-word}.arcgis-legend__layer-body{margin-left:var(--calcite-spacing-sm)}:dir(rtl) .arcgis-legend__layer-body{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}.arcgis-legend__layer-row{display:flex}.arcgis-legend__layer-table--size-ramp .arcgis-legend__layer-row{display:table-row}.arcgis-legend__layer-cell{padding:var(--calcite-spacing-xxs) 0;min-width:100px;vertical-align:middle;word-break:break-word;display:flex;align-items:center}.arcgis-legend__layer-cell--info{padding-right:var(--calcite-spacing-sm);padding-left:var(--calcite-spacing-sm);max-width:250px;word-break:normal;word-wrap:normal;font-size:var(--calcite-font-size-sm)}.arcgis-legend__imagery-layer-image--stretched{display:block;margin-bottom:-2px}.arcgis-legend__imagery-layer-info--stretched{padding:0 2px;vertical-align:top}.arcgis-legend__layer-cell--symbols{min-width:10px;text-align:center}.arcgis-legend__symbol{display:flex;justify-content:center}`,$a={layerTable:"arcgis-legend__layer-table",layerTableSizeRamp:"arcgis-legend__layer-table--size-ramp",layerCaption:"arcgis-legend__layer-caption",layerBody:"arcgis-legend__layer-body",layerRow:"arcgis-legend__layer-row",layerInfo:"arcgis-legend__layer-cell arcgis-legend__layer-cell--info",imageryLayerStretchedImage:"arcgis-legend__imagery-layer-image--stretched",imageryLayerInfoStretched:"arcgis-legend__imagery-layer-info--stretched",symbolContainer:"arcgis-legend__layer-cell arcgis-legend__layer-cell--symbols",symbol:"arcgis-legend__symbol"};var Yy;let qWe=(Yy=class extends it{render(){const e=this._renderLegendElement(),i=Hhe(this.legendElement,this.messages),r=i?j`<div class=${O($a.layerCaption)}>${i}</div>`:null,s={[$a.layerTableSizeRamp]:this.legendElement.type==="size-ramp"};return j`<section class=${O(hi($a.layerTable,s))}>${r}${e}</section>`}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return j`<arcgis-legend-classic-size-ramp .legendElement=${this.legendElement} .messages=${this.messages}></arcgis-legend-classic-size-ramp>`;case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return j`<arcgis-legend-classic-color-ramp .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-color-ramp>`;case"relationship-ramp":return j`<arcgis-legend-relationship-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .opacity=${this.layer.opacity} .messages=${this.messages}></arcgis-legend-relationship-ramp>`;case"pie-chart-ramp":{const{preview:e}=this.legendElement;return zu(e,this.messages.previewPieChartAriaLabel),j`<div>${e}</div>`}case"univariate-above-and-below-ramp":return j`<arcgis-legend-classic-univariate-above-and-below-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-univariate-above-and-below-ramp>`;case"univariate-color-size-ramp":return j`<arcgis-legend-classic-univariate-color-size-ramp .cssEffectFilter=${this.cssEffectFilter} .legendElement=${this.legendElement} .messages=${this.messages} .opacity=${this.layer.opacity}></arcgis-legend-classic-univariate-color-size-ramp>`;default:return null}}_renderSymbolTable(e){const i=e.infos.map(r=>this._renderElementInfo(r,e.legendType)).filter(Boolean);return i.length?j`<div class=${O($a.layerBody)}>${i}</div>`:null}_renderElementInfo(e,i){const{layer:r}=this,s="label"in e?e.label:null;if("type"in e&&e.type)return e?j`<arcgis-legend-classic-element .cssEffectFilter=${this.cssEffectFilter} .layer=${r} .legendElement=${e} .messages=${this.messages}></arcgis-legend-classic-element>`:null;if(!("preview"in e&&e.preview)&&!("src"in e&&e.src))return null;const n=Jhe(r,i),o={[$a.imageryLayerInfoStretched]:n},a={[$a.imageryLayerInfoStretched]:n};return j`<div class=${O($a.layerRow)}><div class=${O(hi($a.symbolContainer,a))}>${this._renderPreview(e,n)}</div><div class=${O(hi($a.layerInfo,o))}>${hh(this.messages,s,!1)||""}</div></div>`}_renderPreview(e,i){const{layer:r}=this;if("preview"in e&&e.preview){const{preview:s}=e,n="previewAriaLabel"in e?e.previewAriaLabel:null,o="label"in e?hh(this.messages,e.label,!1):null;return zu(s,_h(this.messages,n||o)),j`<div class=${O($a.symbol)}>${s}</div>`}return"src"in e&&e.src?this._renderImage(e,r,i):null}_renderImage(e,i,r){const{previewAriaLabel:s,src:n,opacity:o}=e,a=hh(this.messages,e.label,!1),l={[$a.imageryLayerStretchedImage]:r,[$a.symbol]:!r},c={opacity:`${o??i.opacity}`},d=_h(this.messages,s||a);return j`<img alt=${d??le} .ariaLabel=${d} class=${O(hi(l))} height=${e.height??void 0??le} src=${n??le} style=${ot(c)} width=${e.width??void 0??le}>`}},Yy.properties={cssEffectFilter:1,layer:0,legendElement:0,messages:0},Yy.styles=BWe,Yy);Ms("arcgis-legend-classic-element",qWe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const GWe=Qe`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}:host{display:block}.arcgis-legend__no-legend{padding:var(--calcite-spacing-sm) var(--calcite-spacing-md)}.arcgis-legend__layer{border-bottom:1px solid var(--calcite-color-border-2);padding:var(--calcite-spacing-sm);word-wrap:break-word}.arcgis-legend__layer:last-child{border-bottom:none}.arcgis-legend__layer--elements{margin-left:var(--calcite-spacing-sm);overflow:auto}.arcgis-legend__layer-child{margin-left:var(--calcite-spacing-sm);padding-right:0;padding-left:0}:dir(rtl) .arcgis-legend__layer--elements,:dir(rtl) .arcgis-legend__layer-child{margin-right:var(--calcite-spacing-sm);margin-left:0;overflow:auto}`,T1={layer:"arcgis-legend__layer",layerElements:"arcgis-legend__layer--elements",layerChild:"arcgis-legend__layer-child",noLegend:"arcgis-legend__no-legend"};var Ky;let HWe=(Ky=class extends it{constructor(){super(...arguments),this.headingLevel=3,this.type="classic"}render(){const e=this.activeLayerInfos?.toArray().map(i=>this._renderLegendForLayer(i)).filter(Boolean);return e?.length?j`<section>${e}</section>`:j`<div class=${O(T1.noLegend)}>${this.messages.noLegend}</div>`}_renderLegendForLayer(e){if(!e.ready)return null;const i=e.title?qC({level:this.headingLevel,children:e.title}):null;if(e.children.length){const r=e.children.toArray().map(s=>this._renderLegendForLayer(s));return j`<section class=${O(T1.layer)}>${i}${r}</section>`}return this._renderLegendElementsForLayer(e,i)}_renderLegendElementsForLayer(e,i){const r=e.legendElements?.filter(Boolean);if(!r?.length)return null;const s=r.map(o=>j`<arcgis-legend-classic-element .cssEffectFilter=${e.cssEffectFilter??void 0} .layer=${e.layer} .legendElement=${o} .messages=${this.messages}></arcgis-legend-classic-element>`),n={[T1.layerChild]:!!e.parent};return j`<section class=${O(hi(T1.layer,n))}>${i}<div class=${O(T1.layerElements)}>${s}</div></section>`}},Ky.properties={activeLayerInfos:0,headingLevel:9,type:32,messages:0},Ky.styles=GWe,Ky);Ms("arcgis-legend-classic-view",HWe);function oY(t,e){const i=t.featureReduction;return i&&i.type!=="selection"&&(!("maxScale"in i)||!i.maxScale||i.maxScale<e.scale)?i:null}const O$=-1;let kl=class extends _e{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=H("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(aY(e))}catch(i){this._transitionTo([]),X.getLogger(this).warn("Invalid Effect",{effect:e,error:i})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&lY(this._current,aY(e),this.scale)}catch{return!1}}transitionStep(e,i){this._applyTimeTransition(e),this._updateForScale(i)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&lY(this._current,e,this.scale)?(this._final=e,this._to=U(e),WWe(this._current,this._to,this.scale),this._from=U(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?U(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const i=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const s=this._current[r],n=this._from[r],o=this._to[r];s.scale=JWe(n.scale,o.scale,i);for(let a=0;a<s.effects.length;a++){const l=s.effects[a],c=n.effects[a],d=o.effects[a];l.interpolate(c,d,i)}}i===1&&(this._current=this._final,this._set("effects",this._current[0]?U(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const i=this._current,r=this._current.length-1;let s,n,o=1;if(i.length===1||e>=i[0].scale)n=s=i[0].effects;else if(e<=i[r].scale)n=s=i[r].effects;else for(let a=0;a<r;a++){const l=i[a],c=i[a+1];if(l.scale>=e&&c.scale<=e){o=(e-l.scale)/(c.scale-l.scale),s=l.effects,n=c.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(s[a],n[a],o)}};function aY(t){const e=k8(t)||[];return ZWe(e)?[{scale:O$,effects:e}]:e}function lY(t,e,i){return!t[0]?.effects||!e[0]?.effects?!0:!((t[0]?.scale===O$||e[0]?.scale===O$)&&(t.length>1||e.length>1)&&i<=0)&&tae(t[0].effects,e[0].effects)}function WWe(t,e,i){const r=t.length>e.length?t:e,s=t.length>e.length?e:t,n=s[s.length-1],o=n?.scale??i,a=n?.effects??[];for(let l=s.length;l<r.length;l++)s.push({scale:o,effects:[...a]});for(let l=0;l<r.length;l++)s[l].scale=s[l].scale===O$?i:s[l].scale,r[l].scale=r[l].scale===O$?i:r[l].scale,iae(s[l].effects,r[l].effects)}function JWe(t,e,i){return t+(e-t)*i}function ZWe(t){const e=t[0];return!!e&&"type"in e}u([p()],kl.prototype,"_to",void 0),u([p()],kl.prototype,"duration",void 0),u([p({value:""})],kl.prototype,"effect",null),u([p({readOnly:!0})],kl.prototype,"effects",void 0),u([p({readOnly:!0})],kl.prototype,"final",null),u([p({readOnly:!0})],kl.prototype,"hasEffects",null),u([p({value:0})],kl.prototype,"scale",null),u([p({readOnly:!0})],kl.prototype,"transitioning",null),kl=u([M("esri.layers.effects.EffectView")],kl);function f_t(t){const e=t.layer;return"floorInfo"in e&&e.floorInfo?.floorField&&"floors"in t.view?Bpe(t.view.floors,e.floorInfo.floorField):null}function cY(t,e){return"floorInfo"in e&&e.floorInfo?.floorField?Bpe(t,e.floorInfo.floorField):null}function Bpe(t,e){if(!t?.length)return null;const i=t.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${e} IN (${i.join(",")}) OR ${e} IS NULL`}function uY(t,e,i){return e.flatten(({sublayers:s})=>s).length!==t.length?!0:!!t.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!qpe(t,e)}function YWe(t,e,i){return!!t.some(r=>{const s=r.source,n=!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(s.gdbVersion==null||s.gdbVersion===i);r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),r.commitProperty("orderBy");const o=r.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1;return!n||r.originIdOf("renderer")>2||r.originIdOf("labelingInfo")>2||r.originIdOf("opacity")>2||r.originIdOf("labelsVisible")>2||o&&r.originIdOf("orderBy")>2})||!qpe(t,e)}function qpe(t,e){if(!t?.length||e==null)return!0;const i=e.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(t.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of t){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function KWe(t){return!!t&&t.some(e=>e.minScale!=null||e.layerDefinition?.minScale!=null)}const XWe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Yo=class extends _e{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(i=>{const r=cY(this.floors,i);return i.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&YWe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",i=>this.notifyChange(XWe[i.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,s)=>{const n=cY(this.floors,s),o=$0(n,s.definitionExpression);return o!=null&&(r[s.id]=o),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const i=this.layer.sublayers,r=this.scale,s=o=>{o.visible&&(r===0||cUe(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):e.unshift(o))};i?.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((o,a)=>e[a]!==o)?e:n}toJSON(){const e=this.layer;let i={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};u([p({readOnly:!0})],Yo.prototype,"dynamicLayers",null),u([p()],Yo.prototype,"floors",void 0),u([p({readOnly:!0})],Yo.prototype,"hasDynamicLayers",null),u([p()],Yo.prototype,"layer",null),u([p({readOnly:!0})],Yo.prototype,"layers",null),u([p({readOnly:!0})],Yo.prototype,"layerDefs",null),u([p({type:Number})],Yo.prototype,"scale",void 0),u([p({readOnly:!0})],Yo.prototype,"version",null),u([p({readOnly:!0})],Yo.prototype,"visibleSublayers",null),Yo=u([M("esri.layers.support.ExportImageParameters")],Yo);const QWe=9999999e31,eJe=2e-7,tJe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function GC(t){return tJe[t]??[-34028234663852886e22,34028234663852886e22]}const iJe={u1:1,u2:1,u4:1,u8:1,s8:1,u16:2,s16:2,u32:4,s32:4,f32:4,f64:8,unknown:4,c64:16,c128:32};function rJe(t){return iJe[t]}function y_t(t){return rJe(t.pixelType)*t.bandCount}function g_t(t,e){return t==null||e==null?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function sJe(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}function v_t(t,e,i,r){let[s,n]=GC(i);const o=sJe(i);return o&&(s-=1e-5,n+=1e-5),o?i.startsWith("u")?nJe(t,e,r,[s,n]):oJe(t,e,r,[s,n]):aJe(t,e,r,[s,n])}function b_t(t,e){for(let i=0;i<e.length;i++)e[i]&&isNaN(t[i])&&(e[i]=0,t[i]=0)}function nJe(t,e,i,r){const[s,n]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<s||a>n?e[o]=0:i[o]=a+.5|0}}function oJe(t,e,i,r){const[s,n]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<s||a>n?e[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function aJe(t,e,i,r){const[s,n]=r;for(let o=0;o<e.length;o++)if(e[o]){const a=t[o];a<s||a>n?e[o]=0:i[o]=a}}function w_t(t,e,i){if(t.depthCount&&t.depthCount>1)return;const{pixels:r,statistics:s,pixelType:n}=t,o=r[0].length,a=t.bandMasks??[],l=t.mask??new Uint8Array(o).fill(255),c=n==="f32"||n==="f64",d=GC(n);let h=!1;for(let m=0;m<r.length;m++){const y=typeof e=="number"?e:e[m];if(y==null)continue;const v=s?.[m]?.minValue??d[0],b=s?.[m]?.maxValue??d[1];if(v>y+Number.EPSILON||b<y-Number.EPSILON)continue;const w=a[m]||l.slice(),x=r[m],S=i?.customFloatTolerance;if(c&&S!==0){let $=S;$||($=Math.abs(y)>=QWe?eJe*Math.abs(y):n==="f32"?2**-23:Number.EPSILON);for(let T=0;T<x.length;T++)w[T]&&Math.abs(x[T]-y)<$&&(x[T]=0,w[T]=0,l[T]=0,h=!0)}else for(let $=0;$<x.length;$++)w[$]&&x[$]===y&&(x[$]=0,w[$]=0,l[$]=0,h=!0);a[m]=w}if(h){const m=t.bandMasks||t.pixels.length>1?a:null;i?.matchAllNoData?t.mask=m&&m.length>1?f(m):l:(t.bandMasks=m,t.mask=l)}function f(m){if(m.length<2)return m[0];const y=m[0].length,v=new Uint8Array(y).fill(0);for(let b=0;b<m.length;b++){const w=m[b];for(let x=0;x<y;x++)w[x]&&(v[x]=255)}return v}h&&"updateStatistics"in t&&t.updateStatistics()}function Gpe(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function __t(t,e){if(t==null)return null;if(!Gpe(t))return new R("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${t.type}'`,{renderer:t});switch(t.type){case"simple":return lJe(t,e);case"unique-value":return cJe(t,e);case"class-breaks":return uJe(t,e);case"dictionary":case"heatmap":return null}return null}function p9(t,e){if(!e)return null;if(Array.isArray(e)||(e=[e]),e.length>0){const i=e.map(s=>s.details.symbol.type||s.details.symbol.declaredClass).filter(s=>!!s);i.sort();const r=new Array;return i.forEach((s,n)=>{n!==0&&s===i[n-1]||r.push(s)}),new R("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${r.join(", ")}) which are not supported in 3D`,{renderer:t,symbolErrors:e})}return null}function lJe(t,e){const i={...Hd,...e,cimFallbackEnabled:!0};return p9(t,Hw(t.symbol,i).error)}function cJe(t,e){const i={...Hd,...e,cimFallbackEnabled:!0},r=t.uniqueValueInfos?.map(n=>Hw(n.symbol,i).error).filter(Ei),s=Hw(t.defaultSymbol,i);return s.error&&r?.unshift(s.error),p9(t,r)}function uJe(t,e){const i={...Hd,...e,cimFallbackEnabled:!0},r=t.classBreakInfos.map(n=>Hw(n.symbol,i).error).filter(Ei),s=Hw(t.defaultSymbol,i);return s.error&&r.unshift(s.error),p9(t,r)}function dJe(t){switch(t){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function f9(t){return t?.type==="CIMVectorMarker"?t.markerGraphics?.[0]:void 0}function Hpe(t){return t?.symbol?.type==="CIMPolygonSymbol"?t.symbol.symbolLayers?.[0]:void 0}function hJe(t,e){t?.type==="CIMVectorMarker"&&e!=null&&(t.size=e)}function pJe(t,e){const i=f9(t);i&&e!=null&&(i.geometry=dJe(e))}function fJe(t,e){const i=Hpe(f9(t));i&&e!=null&&(i.color=e.toArray())}function mJe(t,e,i){const r=Hpe(f9(t));r&&e!=null&&i&&(r.colorLocked=e)}function m9(t,e){const{outerRingSize:i,innerDotSize:r,type:s,color:n,colorLocked:o,primitiveOverrides:a}=e,l=t.data.symbol?.type==="CIMPolygonSymbol"?t.data.symbol.symbolLayers:null;if(l?.length===2)for(const c of l){const d=c.primitiveName==="reference-size-outer-ring";hJe(c,d?i:r),pJe(c,s),fJe(c,n),mJe(c,o,d)}return i!=null&&r!=null&&(t.data.primitiveOverrides=null),a!==void 0&&(t.data.primitiveOverrides=U(a)),t}function yJe(t,e,i){const r=t.effectiveClusterRenderer;if(!r||!("visualVariables"in r)||!r.visualVariables)return null;const s=r.visualVariables.find(d=>d.type==="size");if(!("stops"in s)||!s.stops)return null;const n=s.stops.find(d=>d.useMinValue),o=s.stops.find(d=>d.useMaxValue);if(n==null||o==null)return null;const a=i.featuresTilingScheme.getClosestInfoForScale(i.scale).level,l=s.field,c=e.getDisplayStatistics(a,l);return c?new Ct({field:s.field,minSize:t.clusterMinSize,minDataValue:c.minValue,maxSize:t.clusterMaxSize,maxDataValue:c.maxValue}):null}const gJe=/^-?(\d+)(\.(\d+))?$/i;function vJe(t,e){return t-e}function bJe(t,e){let i,r;return i=Number(t.toFixed(e)),i<t?r=i+1/10**e:(r=i,i-=1/10**e),i=Number(i.toFixed(e)),r=Number(r.toFixed(e)),[i,r]}function wJe(t,e,i,r,s){const n=DE(t,e,i,r),o=n.previous==null||n.previous<=s,a=n.next==null||n.next<=s;return o&&a||n.previous+n.next<=2*s}function HC(t){const e=String(t),i=e.match(gJe);if(i?.[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const r=e.split("e"),s=r[0],n=r[1];if(s&&n){const o=Number(s);let a=Number(n);const l=a>0;l||(a=Math.abs(a));const c=HC(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function DE(t,e,i,r){const s={previous:null,next:null};if(i!=null){const n=t-i,o=e-i-n;s.previous=Math.floor(Math.abs(100*o/n))}if(r!=null){const n=r-t,o=r-e-n;s.next=Math.floor(Math.abs(100*o/n))}return s}function WC(t,e={}){const i=t.slice(),{tolerance:r=2,strictBounds:s=!1,indexes:n=i.map((o,a)=>a)}=e;n.sort(vJe);for(let o=0;o<n.length;o++){const a=n[o],l=i[a],c=a===0?null:i[a-1],d=a===i.length-1?null:i[a+1],h=HC(l).fractional;if(h){let f,m=0,y=!1;for(;m<=h&&!y;){const v=bJe(l,m);f=s&&o===0?v[1]:v[0],y=wJe(l,f,c,d,r),m++}y&&(i[a]=f)}}return i}const _Je={maximumFractionDigits:20};function xJe(t){return Sf(t,_Je)}const x_t=",",SJe={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},$Je=new Set(["integer","small-integer"]);let $R=null;function S_t(t){return v3(t)||wae(t)||_ae(t)}async function $_t(t){const{field:e,field2:i,field3:r,normalizationField:s,valueExpression:n,fields:o}=t;let a=[];if(n){if(!$R){const{arcadeUtils:l}=await wh();$R=l}a=$R.extractFieldNames(n)}return e&&a.push(e),i&&a.push(i),r&&a.push(r),s&&a.push(s),o&&a.push(...o),a}function E1(t){return String(t).padStart(2,"0")}function dY(t,e,i){let r;return e==="date"||e==="number"?(e==="number"&&(t=new Date(t)),r=`TIMESTAMP'${i?t.getFullYear():t.getUTCFullYear()}-${E1((i?t.getMonth():t.getUTCMonth())+1)}-${E1(i?t.getDate():t.getUTCDate())} ${E1(i?t.getHours():t.getUTCHours())}:${E1(i?t.getMinutes():t.getUTCMinutes())}:${E1(i?t.getSeconds():t.getUTCSeconds())}'`):r=t,r}function I_t(t,e,i,r){const{hasQueryEngine:s}=t,n=`(${dY(i,hY(t,i),s)} - ${dY(e,hY(t,e),s)})`;let o=SJe[r],a="/";return o<1&&(o=1/o,a="*"),{sqlExpression:o===1?n:`(${n} ${a} ${o})`,sqlWhere:null}}function hY(t,e){if(e instanceof Date)return"date";if(typeof e=="number")return"number";if(typeof e=="string"){const i=t.getField(e);if(e.toLowerCase()==="<now>")return;if(v3(i))return"field"}}function k_t(t,e){const i=e&&t.getField(e);return!!i&&$Je.has(i.type)}function T_t(t){return`cast(${t} as float)`}function IJe(t,e){const{format:i,fieldFormat:r,timeZoneOptions:s,fieldType:n}=e??{},o=r?PEe(r):null;let a,l;if(s&&({timeZone:a,timeZoneName:l}=SEe(s.layerTimeZone,s.datesInUnknownTimezone,s.viewTimeZone,o||zv(i||"short-date-short-time"),n)),typeof t=="string"&&isNaN(Date.parse(n==="time-only"?`1970-01-01T${t}Z`:t)))return t;switch(n){case"date-only":{const c=o||zv(i||"short-date");return typeof t=="string"?AEe(t,{...c}):xo(t,{...c,timeZone:Du})}case"time-only":{const c=o||zv(i||"short-time");return typeof t=="string"?LEe(t,c):xo(t,{...c,timeZone:Du})}case"timestamp-offset":{if(!a&&typeof t=="string"&&new Date(t).toISOString()!==t)return t;const c=i||o||s?o||zv(i||"short-date-short-time"):void 0,d=c?{...c,timeZone:a,timeZoneName:l}:void 0;return typeof t=="string"?OEe(t,d):xo(t,d)}default:{const c=i||o||s?o||zv(i||"short-date-short-time"):void 0;return xo(typeof t=="string"?new Date(t):t,c?{...c,timeZone:a,timeZoneName:l}:void 0)}}}const Wpe="<",Jpe=">";function Zpe(t,e,i,r){let s="";e===0?s=`${Wpe} `:e===i&&(s=`${Jpe} `);const n=FE(t,r);return n==null?"":s+n}function kJe(t){const{format:e,fieldFormat:i}=t||{};return i?.type==="number"||!!e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)}function FE(t,e){if(t==null)return t;const{fieldType:i,format:r,fieldFormat:s,timeZoneOptions:n}=e||{};if(y9(i))return IJe(t,{fieldType:i,format:r?.dateFormat,fieldFormat:s?.type==="date-time"?s:void 0,timeZoneOptions:n});if(typeof t=="string"&&kJe(e)){const a=Number(t);isNaN(a)||(t=a)}if(typeof t=="string")return t;const o=s?.type==="number"?DEe(s):r?NEe(r):void 0;return o?Sf(t,o):xJe(t)}const TJe=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function pj(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(o=>o.type==="color");if(!e)return null;let i=null,r=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const s=i!=null&&r!=null?i+(r-i)/2:0,{getColor:n}=await K(async()=>{const{getColor:o}=await Promise.resolve().then(()=>Fg);return{getColor:o}},void 0);return n(e,s)??null}async function Ype(t,e){const i=t.trailCap,r=t.trailWidth||1,s=e||await pj(t)||t.color;return new sr({cap:i,color:s,width:r})}function EJe(t,e){if(!e)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const i=t.featureReduction.fields.find(({name:r})=>r.toLowerCase()===e.toLowerCase());return i&&"getField"in t?t.getField(i.onStatisticField):null}}return"getField"in t?t.getField?.(e):null}function MJe(t,e){const i="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(i?.length&&e)return i.find(r=>r.fieldName?.toLowerCase()===e.toLowerCase())}function pY(t){let e=0,i=0;return t.stops?(e=t.stops?.at(0)?.value??e,i=t.stops?.at(-1)?.value??i):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,i=t.maxDataValue??i),i-e>2*SF.days?"short-date":"short-date-short-time"}function y9(t){return["date","date-only","time-only","timestamp-offset"].includes(t||"")}function Kpe(t){return xoe(t)&&!("featureReduction"in t&&t.featureReduction)}function CJe(t,e,i){const r=zE(t,e.field,i);return r?(y9(r.fieldType)&&(Kpe(t)?r.fieldFormat??(r.fieldFormat=new lf({dateStyle:"short",timeStyle:pY(e)==="short-date-short-time"?"short":null})):r.format??(r.format=new Tu({dateFormat:pY(e)}))),r):null}function zE(t,e,i){const r=EJe(t,e),s=r?.name;if(!s)return null;const n=r?.type,o=Kpe(t);return{fieldType:n,format:o?null:MJe(t,s)?.format,fieldFormat:o?t.getFieldConfiguration(s)?.fieldFormat:null,timeZoneOptions:y9(n)?{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:i,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}:null}}function _u(t,e){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find(({theme:i})=>i===e)}function PJe(t,e){let i=t??"";return e!=null&&e&&(i=i?"("+i+") AND ("+e+")":e),i}const AJe=new ne([64,64,64]);function Xpe(t,e){const i=[],r=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,r),t.map((s,n)=>i.includes(n)?Zpe(s,n,r,e):null)}async function fY(t,e,i){let r=!1,s=[],n=[];if(t.stops){const c=t.stops;s=c.map(d=>d.value),r=c.some(d=>!!d.label),r&&(n=c.map(d=>d.label))}const o=s[0],a=s[s.length-1];if(o==null&&a==null)return null;const l=r?null:Xpe(s,i);return(await Promise.all(s.map(async(c,d)=>{const h=t.type==="opacity"?await LJe(c,t,e):(await K(async()=>{const{getColor:m}=await Promise.resolve().then(()=>Fg);return{getColor:m}},void 0)).getColor(t,c),f=r?n[d]:l?.[d]??"";return h==null?null:{value:c,color:h,label:f}}))).filter(Ei).reverse()}async function LJe(t,e,i){const r=new ne(i??AJe),s=(await K(async()=>{const{getOpacity:n}=await Promise.resolve().then(()=>Fg);return{getOpacity:n}},void 0)).getOpacity(e,t);return s!=null&&(r.a=s),r}function OJe(t){let e=!1,i=[],r=[];i=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(r=t.map(a=>a.label??""));const s=i[0],n=i[i.length-1];if(s==null&&n==null)return null;const o=e?null:Xpe(i);return i.map((a,l)=>({value:a,color:Qpe(a,t),label:e?r[l]:o?.[l]??""})).reverse()}function Qpe(t,e){const{startIndex:i,endIndex:r,weight:s}=RJe(t,e);if(i===r)return e[i].color;const n=ne.blendColors(e[i].color,e[r].color,s);return new ne(n)}function RJe(t,e){let i=0,r=e.length-1;return e.some((s,n)=>t<s.value?(r=n,!0):(i=n,!1)),{startIndex:i,endIndex:r,weight:(t-e[i].value)/(e[r].value-e[i].value)}}function NJe(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((r,s)=>{s===0?i.push({value:e.max,color:new ne(r.toColor),label:"high"}):i.push({value:null,color:new ne(r.toColor),label:""}),s===t.colorRamps.length-1?i.push({value:e.min,color:new ne(r.fromColor),label:"low"}):i.push({value:null,color:new ne(r.fromColor),label:""})});else{let r,s;t&&t.type==="algorithmic"?(r=t.fromColor,s=t.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:e.max,color:new ne(s),label:"high"},{value:e.min,color:new ne(r),label:"low"}]}return i}function DJe(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(r=>r.color?.a>0);let i=e.length-1;if(e&&e[0]){const r=e[i];r&&r.ratio!==1&&(e.push(new th({ratio:1,color:r.color})),i++)}return e.map((r,s)=>{let n="";return s===0?n=t.legendOptions?.minLabel||"low":s===i&&(n=t.legendOptions?.maxLabel||"high"),{color:r.color,label:n,ratio:r.ratio}}).reverse()}const FJe="spike-height-override";function zJe(t){const{strokeColor:e,strokeWidth:i,symbolStyle:r}=t,s=r?.includes("solid-fill")||r?.includes("gradient-fill");let n=e?.toArray(),o=!1;return r?.includes("outline")&&s?o=!0:n=t.color?.toArray(),{type:"CIMSolidStroke",effects:jJe(r),enable:!0,colorLocked:o,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:4,width:i??Zt(1),color:n}}function jJe(t){if(!t?.includes("closed"))return[{type:"CIMGeometricEffectAddControlPoints",angleTolerance:90,primitiveName:"spike-control-points"},{type:"CIMGeometricEffectSuppress",suppress:!0,invert:!0,primitiveName:"spike-stroke-suppress"}]}function mY(t){const{color:e,symbolStyle:i}=t,r=i?.includes("solid-fill"),s=i?.includes("gradient-fill");if(!r&&!s||!e)return;if(r)return{type:"CIMSolidFill",enable:!0,colorLocked:!1,color:e?.toArray()};const n=e.clone();return n.a=0,{type:"CIMGradientFill",enable:!0,angle:90,colorRamp:{type:"CIMMultipartColorRamp",colorRamps:[{type:"CIMLinearContinuousColorRamp",fromColor:e.toArray(),toColor:n.toArray()}],weights:[1]},gradientMethod:"Linear",gradientSize:70,gradientSizeUnits:"Relative",gradientType:"Continuous"}}function efe(t,e){const{defaultHeight:i,baseWidth:r,color:s,strokeColor:n,primitiveOverrides:o,symbolStyle:a,strokeWidth:l}=e,c=t.data.symbol?.type==="CIMPointSymbol"?t.data.symbol:null,d=c?.symbolLayers;if(!d)return t;const h=c.effects,f=h?.find(x=>x.type==="CIMGeometricEffectTaperedPolygon"),m=h?.find(x=>x.type==="CIMGeometricEffectRadial"&&x.primitiveName===FJe);r!=null&&f&&(f.fromWidth=r),i!=null&&m&&(m.length=i);const y=d?.find(x=>x.type==="CIMSolidStroke"),v=d?.find(x=>x.type==="CIMSolidFill"),b=d?.find(x=>x.type==="CIMGradientFill"),w=b?.colorRamp?.type==="CIMMultipartColorRamp"&&b.colorRamp.colorRamps[0]?.type==="CIMLinearContinuousColorRamp"?b.colorRamp.colorRamps[0]:null;if(a){const x=v?.color??w?.fromColor??y?.color,S=s??(x?new ne(x):void 0),$=y?.color??x,T=n??($?new ne($):void 0),C=a.includes("solid-fill"),L=a.includes("gradient-fill");if(C||L||IR(d,v??b),S){if(C)IR(d,b),v?v.color=S?.toArray():d.push(mY({...e,color:S}));else if(L)if(IR(d,v),b){if(w&&s){const N=S.clone();N.a=0,w.fromColor=S.toArray(),w.toColor=N.toArray()}}else d.push(mY({...e,color:S}))}if(y){const N=zJe({...e,strokeColor:T,color:S});y.effects=N.effects,y.color=N.color,y.width=N.width,y.colorLocked=N.colorLocked}}else if(y&&(n&&(y.color=n.toArray()),l!=null&&(y.width=l)),v&&s&&(v.color=s.toArray()),w&&s){const x=s.clone();x.a=0,w.fromColor=s.toArray(),w.toColor=x.toArray()}return o!==void 0&&(t.data.primitiveOverrides=U(o)),t}function IR(t,e){if(!e)return;const i=t.indexOf(e);i!==-1&&t.splice(i,1)}const $k=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],Xw=["","","",""],VJe=["","","",""],UJe=["","","",""],JC=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],BJe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],qJe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],GJe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],HJe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],yY=["","","","","","","","","","","","",""],WJe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],gY=["",""],JJe=["",""],ZJe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],YJe=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E=0,se=1,Ve=2,wr=3,I=4,Dc=5,jE=6,k=7,rn=8,$n=9,hl=10,He=11,B=12,KJe=13,XJe=14,QJe=15,eZe=16,tZe=17,Me=18,iZe=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],Oc=100,rZe=[Oc+0,E,E,E,E,Oc+1,Oc+2,Oc+3,se,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,Oc+4,I,I,I,E,I,E,I,E,I,I,I,E,E,I,I,E,E,E,E,E,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,E,E,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,E,E,I,I,E,E,I,I,E,E,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,E,E,E,Oc+5,k,k,Oc+6,Oc+7],sZe=[[Me,Me,Me,Me,Me,Me,Me,Me,Me,jE,Dc,jE,rn,Dc,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Dc,Dc,Dc,jE,rn,I,I,He,He,He,I,I,I,I,I,hl,$n,hl,$n,$n,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,$n,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,I,Me,Me,Me,Me,Me,Me,Dc,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,$n,I,He,He,He,He,I,I,I,I,E,I,I,Me,I,I,He,He,Ve,Ve,I,E,I,I,I,Ve,E,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,E,E,E,E,E,E,E,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,E,I,I,I,I,I,I,I,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,se,B,se,B,B,se,B,B,se,B,I,I,I,I,I,I,I,I,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,I,I,I,I,I,se,se,se,se,se,I,I,I,I,I,I,I,I,I,I,I],[wr,wr,wr,wr,I,I,I,I,k,He,He,k,$n,k,I,I,B,B,B,B,B,B,B,B,B,B,B,k,I,I,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,wr,wr,wr,wr,wr,wr,wr,wr,wr,wr,He,wr,wr,k,k,k,B,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,B,B,B,B,B,B,B,wr,I,B,B,B,B,B,B,k,k,B,B,I,B,B,B,B,k,k,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,k,k,k,k,k,k],[k,k,k,k,k,k,k,k,k,k,k,k,k,k,I,k,k,B,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,I,I,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,B,B,B,B,B,B,B,B,B,B,B,k,I,I,I,I,I,I,I,I,I,I,I,I,I,I,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,B,B,B,B,B,B,B,B,B,se,se,I,I,I,I,se,I,I,I,I,I],[rn,rn,rn,rn,rn,rn,rn,rn,rn,rn,rn,Me,Me,Me,E,se,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,rn,Dc,KJe,XJe,QJe,eZe,tZe,$n,He,He,He,He,He,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,$n,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,rn,Me,Me,Me,Me,Me,I,I,I,I,I,Me,Me,Me,Me,Me,Me,Ve,E,I,I,Ve,Ve,Ve,Ve,Ve,Ve,hl,hl,I,I,I,E,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,hl,hl,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[E,E,E,E,E,E,E,I,I,I,I,I,I,I,I,I,I,I,I,E,E,E,E,E,I,I,I,I,I,se,B,se,se,se,se,se,se,se,se,se,se,hl,se,se,se,se,se,se,se,se,se,se,se,se,se,I,se,se,se,se,se,I,se,I,se,se,I,se,se,I,se,se,se,se,se,se,se,se,se,se,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,B,B,B,B,B,B,B,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,$n,I,$n,I,I,$n,I,I,I,I,I,I,I,I,I,He,I,I,hl,hl,I,I,I,I,I,He,He,I,I,I,I,I,k,k,k,k,k,I,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,I,I,Me],[I,I,I,He,He,He,I,I,I,I,I,hl,$n,hl,$n,$n,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,Ve,$n,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,I,I,I,I,I,I,I,I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,I,I,I,E,E,E,E,E,E,I,I,E,E,E,E,E,E,I,I,E,E,E,E,E,E,I,I,E,E,E,I,I,I,He,He,I,I,I,He,He,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I]];let nZe=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(xZe(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,r))return e;i=this.inputFormat,r=this.outputFormat;let s=e;const n=$Ze,o=wY(i.charAt(1)),a=wY(r.charAt(1)),l=(i.startsWith("I")?"L":i.charAt(0))+o,c=(r.startsWith("I")?"L":r.charAt(0))+a,d=i.charAt(2)+r.charAt(2);n.defInFormat=l,n.defOutFormat=c,n.defSwap=d;const h=Dx(e,l,c,d,n);let f=!1;return r.charAt(1)==="R"?f=!0:r.charAt(1)!=="C"&&r.charAt(1)!=="D"||(f=this.checkContextual(h)==="rtl"),this.sourceToTarget=sa,this.targetToSource=SZe(this.sourceToTarget),YC=this.targetToSource,s=i.charAt(3)===r.charAt(3)?h:r.charAt(3)==="S"?aZe(f,h):uZe(h,f,!0),this.sourceToTarget=sa,this.targetToSource=YC,this.levels=eL,s}_inputFormatSetter(e){if(!_Y.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!_Y.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=ZC(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return TZe.test(e)}};function Dx(t,e,i,r,s){const n=oZe(t,{inFormat:e,outFormat:i,swap:r},s);if(n.inFormat===n.outFormat)return t;e=n.inFormat,i=n.outFormat,r=n.swap;const o=e.slice(0,1),a=e.slice(1,4),l=i.slice(0,1),c=i.slice(1,4);if(s.inFormat=e,s.outFormat=i,s.swap=r,o==="L"&&i==="VLTR"){if(a==="LTR")return s.dir=Sv,Qh(t,s);if(a==="RTL")return s.dir=Fx,Qh(t,s)}if(o==="V"&&l==="V")return s.dir=a==="RTL"?Fx:Sv,kR(t,s);if(o==="L"&&i==="VRTL")return a==="LTR"?(s.dir=Sv,t=Qh(t,s)):(s.dir=Fx,t=Qh(t,s)),kR(t);if(e==="VLTR"&&i==="LLTR")return s.dir=Sv,Qh(t,s);if(o==="V"&&l==="L"&&a!==c)return t=kR(t),a==="RTL"?Dx(t,"LLTR","VLTR",r,s):Dx(t,"LRTL","VRTL",r,s);if(e==="VRTL"&&i==="LRTL")return Dx(t,"LRTL","VRTL",r,s);if(o==="L"&&l==="L"){const d=s.swap;return s.swap=d.slice(0,1)+"N",a==="RTL"?(s.dir=Fx,t=Qh(t,s),s.swap="N"+d.slice(1,3),s.dir=Sv,t=Qh(t,s)):(s.dir=Sv,t=Qh(t,s),s.swap="N"+d.slice(1,3),t=Dx(t,"VLTR","LRTL",s.swap,s)),t}return t}function oZe(t,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;const r=e.inFormat.slice(0,1),s=e.outFormat.slice(0,1);let n,o=e.inFormat.slice(1,4),a=e.outFormat.slice(1,4);return o.startsWith("C")&&(n=ZC(t),o=n==="ltr"||n==="rtl"?n.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=r+o),a.startsWith("C")&&(n=ZC(t),n==="rtl"?a="RTL":n==="ltr"?(n=cZe(t),a=n.toUpperCase()):a=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=s+a),e}function aZe(t,e,i){if(e.length===0)return"";t===void 0&&(t=!0);const r=(e=String(e)).split("");let s=0,n=1,o=r.length;t||(s=r.length-1,n=-1,o=1);const a=lZe(r,s,n,o);let l="";for(let c=0;c<r.length;c++)fZe(a,a.length,c)>-1?(rfe(YC,c,!t,-1),sa.splice(c,1)):l+=r[c];return l}function lZe(t,e,i,r,s){let n=0;const o=[];let a=0;for(let l=e;l*i<r;l+=i)if(ife(t[l])||R$(t[l])){if(t[l]===""&&mZe(t,l+i,i,r)){t[l]=_Ze(t[l+i],n===0?VJe:UJe),l+=i,wZe(t,l,i,r),o[a]=l,a++,n=0;continue}const c=t[l];n===1?t[l]=vY(t,l+i,i,r)?bZe(t[l]):TR(t[l],qJe):vY(t,l+i,i,r)===!0?t[l]=TR(t[l],HJe):t[l]=TR(t[l],BJe),R$(c)||(n=1),vZe(c)===!0&&(n=0)}else n=0;return o}function ZC(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function cZe(t){const e=t.split("");return e.reverse(),ZC(e.join(""))}function uZe(t,e,i){if(t.length===0)return"";e===void 0&&(e=!0);let r="";const s=(t=String(t)).split("");for(let n=0;n<t.length;n++){let o=!1;if(s[n]>=""&&s[n]<"\uFEFF"){const a=t.charCodeAt(n);s[n]>=""&&s[n]<=""?(e?(n>0&&i&&s[n-1]===" "?r=r.slice(0,-1)+"":(r+="",o=!0),r+=Xw[(a-65269)/2]):(r+=Xw[(a-65269)/2],r+="",n+1<t.length&&i&&s[n+1]===" "?n++:o=!0),o&&(rfe(YC,n,!0,1),sa.splice(n,0,sa[n]))):r+=WJe[a-65136]}else r+=s[n]}return r}function Qh(t,e){const i=t.split(""),r=[];return tfe(i,r,e),hZe(i,r,e),bY(2,i,r,e),bY(1,i,r,e),eL=r,i.join("")}function tfe(t,e,i){const r=t.length,s=i.dir?YJe:ZJe;let n=0,o=-1;const a=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let c=0;c<r;c++)a[c]=pZe(t[c]);for(let c=0;c<r;c++){const d=n,h=yZe(t,a,l,c,i);l[c]=h,n=s[d][h];const f=240&n;n&=15;const m=s[n][IZe];if(e[c]=m,f>0)if(f===16){for(let y=o;y<c;y++)e[y]=1;o=-1}else o=-1;if(s[n][kZe])o===-1&&(o=c);else if(o>-1){for(let y=o;y<c;y++)e[y]=m;o=-1}a[c]===Dc&&(e[c]=0),i.hiLevel|=m}i.hasUbatS&&dZe(a,e,r,i)}function dZe(t,e,i,r){for(let s=0;s<i;s++)if(t[s]===jE){e[s]=r.dir;for(let n=s-1;n>=0&&t[n]===rn;n--)e[n]=r.dir}}function hZe(t,e,i){if(i.hiLevel!==0&&i.swap[0]!==i.swap[1])for(let r=0;r<t.length;r++)e[r]===1&&(t[r]=gZe(t[r]))}function pZe(t){const e=t.charCodeAt(0),i=rZe[e>>8];return i<Oc?i:sZe[i-Oc][255&e]}function kR(t,e){const i=t.split("");if(e){const r=[];tfe(i,r,e),eL=r}return i.reverse(),sa.reverse(),i.join("")}function fZe(t,e,i){for(let r=0;r<e;r++)if(t[r]===i)return r;return-1}function ife(t){for(let e=0;e<gY.length;e++)if(t>=gY[e]&&t<=JJe[e])return!0;return!1}function vY(t,e,i,r){for(;e*i<r&&R$(t[e]);)e+=i;return!!(e*i<r&&ife(t[e]))}function mZe(t,e,i,r){for(;e*i<r&&R$(t[e]);)e+=i;let s=" ";if(!(e*i<r))return!1;s=t[e];for(let n=0;n<Xw.length;n++)if(Xw[n]===s)return!0;return!1}function bY(t,e,i,r){if(r.hiLevel<t)return;if(t===1&&r.dir===Fx&&!r.hasUbatB)return e.reverse(),void sa.reverse();const s=e.length;let n,o,a,l,c,d=0;for(;d<s;){if(i[d]>=t){for(n=d+1;n<s&&i[n]>=t;)n++;for(o=d,a=n-1;o<a;o++,a--)l=e[o],e[o]=e[a],e[a]=l,c=sa[o],sa[o]=sa[a],sa[a]=c;d=n}d++}}function yZe(t,e,i,r,s){const n=e[r];return{UBAT_L:()=>(s.lastArabic=!1,E),UBAT_R:()=>(s.lastArabic=!1,se),UBAT_ON:()=>I,UBAT_AN:()=>wr,UBAT_EN:()=>s.lastArabic?wr:Ve,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,se),UBAT_WS:()=>I,UBAT_CS:()=>{let o,a;return r<1||r+1>=e.length||(o=i[r-1])!==Ve&&o!==wr||(a=e[r+1])!==Ve&&a!==wr?I:(s.lastArabic&&(a=wr),a===o?a:I)},UBAT_ES:()=>(r>0?i[r-1]:Dc)===Ve&&r+1<e.length&&e[r+1]===Ve?Ve:I,UBAT_ET:()=>{if(r>0&&i[r-1]===Ve)return Ve;if(s.lastArabic)return I;let o=r+1;const a=e.length;for(;o<a&&e[o]===He;)o++;return o<a&&e[o]===Ve?Ve:I},UBAT_NSM:()=>{if(s.inFormat==="VLTR"){const o=e.length;let a=r+1;for(;a<o&&e[a]===B;)a++;if(a<o){const l=t[r].charCodeAt(0),c=l>=1425&&l<=2303||l===64286,d=e[a];if(c&&(d===se||d===k))return se}}return r<1||e[r-1]===Dc?I:i[r-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,I),UBAT_LRE:()=>(s.lastArabic=!1,I),UBAT_RLE:()=>(s.lastArabic=!1,I),UBAT_LRO:()=>(s.lastArabic=!1,I),UBAT_RLO:()=>(s.lastArabic=!1,I),UBAT_PDF:()=>(s.lastArabic=!1,I),UBAT_BN:()=>I}[iZe[n]]()}function gZe(t){let e,i=0,r=$k.length-1;for(;i<=r;)if(e=Math.floor((i+r)/2),t<$k[e][0])r=e-1;else{if(!(t>$k[e][0]))return $k[e][1];i=e+1}return t}function vZe(t){for(let e=0;e<yY.length;e++)if(yY[e]===t)return!0;return!1}function bZe(t){for(let e=0;e<JC.length;e++)if(t===JC[e])return GJe[e];return t}function TR(t,e){for(let i=0;i<JC.length;i++)if(t===JC[i])return e[i];return t}function R$(t){return t>=""&&t<=""}function wY(t){return t==="L"?"LTR":t==="R"?"RTL":t==="C"?"CLR":t==="D"?"CRL":""}function wZe(t,e,i,r){for(;e*i<r&&R$(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function _Ze(t,e){for(let i=0;i<Xw.length;i++)if(t===Xw[i])return e[i];return t}function xZe(t,e,i){sa=[],eL=[];for(let r=0;r<i;r++)t[r]=r,e[r]=r,sa[r]=r}function SZe(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[t[i]]=i;return e}function rfe(t,e,i,r){for(let s=0;s<t.length;s++)(t[s]>e||!i&&t[s]===e)&&(t[s]+=r)}let sa=[],YC=[],eL=[];const $Ze={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},IZe=5,kZe=6,Sv=0,Fx=1,_Y=/^[(I|V)][(L|RCD)][(Y|N)][(S|N)]N$/,TZe=/[\u0591-\u06ff\ufb1d-\ufefc]/,ER=new nZe;function EZe(t){if(t==null)return["",!1];if(!ER.hasBidiChar(t))return[t,!1];let e;return e=ER.checkContextual(t)==="rtl"?"IDNNN":"ICNNN",[ER.bidiTransform(t,e,"VLYSN"),!0]}function MZe(t){return 32+t.length}const sfe=16;function CZe(t){if(!t)return 0;let e=v9;for(const i in t)t.hasOwnProperty(i)&&(e+=g9(t[i],!1));return e}function PZe(t){if(!t)return 0;if(typeof t[0]=="number")return tL(t);if(Array.isArray(t))return AZe(t);let e=v9;for(const i in t)t.hasOwnProperty(i)&&(e+=g9(t[i]));return e}function AZe(t){const e=t.length;if(e===0||typeof t[0]=="number")return nfe(t,8);let i=ofe;for(let r=0;r<e;r++)i+=g9(t[r]);return i}function g9(t,e=!0){switch(typeof t){case"object":return e?PZe(t):v9;case"string":return MZe(t);case"number":return sfe;case"boolean":return 4;default:return 8}}function tL(...t){return t.reduce((e,i)=>e+(i?Qee(i)?i.byteLength+LZe:Array.isArray(i)?nfe(i,sfe):0:0),0)}function nfe(t,e){return ofe+t.length*e}const v9=32,ofe=16,LZe=145,nm=2;let Vr=class Nb{constructor(e=[],i=[]){this.lengths=e??[],this.coords=i??[]}static fromJSON(e){return new Nb(e.lengths,e.coords)}static fromRect(e){const[i,r,s,n]=e,o=s-i,a=n-r;return new Nb([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}get usedMemory(){return 64+tL(this.lengths,this.coords)}area(){let e=0,i=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];if(s<3)continue;let n=this.coords[nm*i],o=this.coords[nm*i+1];for(let a=1;a<s;a+=1){const l=this.coords[nm*(a+i)],c=this.coords[nm*(a+i)+1];e+=-.5*(l-n)*(c+o),n=l,o=c}i+=s}return e}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)e(this.coords[nm*(n+i)],this.coords[nm*(n+i)+1]);i+=s}}deltaDecode(){const e=this.clone(),{coords:i,lengths:r}=e;let s=0;for(const n of r){for(let o=1;o<n;o++)i[2*(s+o)]+=i[2*(s+o)-2],i[2*(s+o)+1]+=i[2*(s+o)-1];s+=n}return e}clone(e){if(this.lengths.length===0)return new Nb([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*nm,r=this.coords.slice(0,i);return e?(e.set(r),new Nb(this.lengths,e)):new Nb(Array.from(this.lengths),Array.from(r))}},Yt=class{static fromOptimized(e,i,r=!1,s=!1,n=1){return new fj().initialize(e,i,r,s,n)}static fromJSON(e,i=!1,r=!1){const[s,n]=xY(e);return new yj().initialize(s,n,i,r,1)}static fromOptimizedCIM(e,i,r=!1,s=!1,n=1){return new SY().initialize(e,i,r,s,n)}static fromJSONCIM(e,i=!1,r=!1,s=1){const[n,o]=xY(e);return new $Y().initialize(n,o,i,r,s)}static fromFeatureSetReader(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimized(i,r):null}static fromFeatureSetReaderCIM(e){const i=e.readGeometryForDisplay(),r=e.geometryType;return i&&r?this.fromOptimizedCIM(i,r):null}static createEmptyOptimized(e,i=!1,r=!1,s=1){return new fj().initialize(new Vr,e,i,r,s)}static createEmptyJSON(e,i=!1,r=!1){return new yj().initialize([],e,i,r,1)}static createEmptyOptimizedCIM(e,i=!1,r=!1,s=1){return new SY().initialize(new Vr,e,i,r,s)}static createEmptyJSONCIM(e,i=!1,r=!1,s=1){return new $Y().initialize([],e,i,r,s)}asJSON(){const e=QA(this);return this.geometryType==="esriGeometryEnvelope"?{xmin:e[0][0][0],ymin:e[0][0][1],xmax:e[0][2][0],ymax:e[0][2][1]}:this.geometryType==="esriGeometryMultipoint"?{points:e.flat()}:this.geometryType==="esriGeometryPoint"?{x:e[0][0][0],y:e[0][0][1]}:this.geometryType==="esriGeometryPolygon"?{rings:e}:{paths:e}}getCurrentRingArea(){if(this.pathSize<3)return 0;let e,i,r=0;if(this.seekPathStart(),!this.nextPoint())return 0;e=this.x,i=this.y;const s=e,n=i;for(;this.nextPoint();)r+=(e-this.x)*(i+this.y),e=this.x,i=this.y;return r+=(e-s)*(i+n),-.5*r}invertY(){this.yFactor*=-1}},fj=class mj extends Yt{constructor(){super(...arguments),this._end=-1}initialize(e,i,r,s,n){return this.hasZ=r,this.hasM=s,this.geometryType=i,this._stride=2+Number(r)+Number(s),this._geometry=e,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=n,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(e){if(e>=0&&e<this.totalSize){if(this._pathIndex<e)for(;this._pathIndex<e&&this.nextPath(););else if(this._pathIndex>e)for(;this._pathIndex>e&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(e){const i=this._pathOffset+e*this._stride;return i>=0&&i<this._end&&(this._pointOffset=i,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1)&&(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,!0)}prevPath(){return!(this.pathIndex<=0)&&(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,!0)}getCurrentPath(){const e=this._end,i=this._geometry.coords,r=this._pathOffset;return new mj().initialize(new Vr([this.pathSize],i.slice(r,e)),this.geometryType,this.hasZ,this.hasM,this.yFactor)}pathLength(){const e=this._end,i=this._stride,r=this._geometry.coords;let s=0;for(let n=this._pathOffset+i;n<e;n+=i){const o=r[n-i],a=r[n-i+1],l=r[n]-o,c=r[n+1]-a;s+=Math.sqrt(l*l+c*c)}return s}startPath(){this._geometry.lengths.push(0)}pushPath(e){this.startPath(),this.pushPoints(e)}pushPoint(e){for(let i=0;i<this._stride;++i)this._geometry.coords.push(e[i]);this._geometry.lengths[this.totalSize-1]++}pushXY(e,i){this._geometry.coords.push(e,i),this._geometry.lengths[this.totalSize-1]++}pushPoints(e){for(const i of e)for(let r=0;r<this._stride;++r)this._geometry.coords.push(i[r]);this._geometry.lengths[this.totalSize-1]+=e.length}pushCursor(e){const i=e.asOptimized();this._geometry.coords.push(...i.coords),this._geometry.lengths.push(...i.lengths)}asOptimized(){const e=this._geometry.clone();if(this.yFactor!==1)for(let i=1;i<e.coords.length;i+=this._stride)e.coords[i]*=this.yFactor;return this.geometryType==="esriGeometryPoint"&&(e.lengths.length=0),e}isClosed(){const e=this._geometry.coords,i=this._pathOffset,r=this._end-this._stride;for(let s=0;s<this._stride;s++)if(e[i+s]!==e[r+s])return!1;return!0}clone(){return new mj().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce((e,i)=>e+i)}get pathSize(){const{lengths:e}=this._geometry;return this._geometry.isPoint?1:this._pathIndex<0||this._pathIndex>e.length-1?0:e[this._pathIndex]}get totalSize(){return this._geometry.isPoint?1:this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(e){this._geometry.coords[this._pointOffset]=e}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(e){this._geometry.coords[this._pointOffset+1]=this.yFactor*e}get z(){return this._geometry.coords[this._pointOffset+2]}set z(e){this._geometry.coords[this._pointOffset+2]=e}get m(){const e=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+e]}set m(e){this._geometry.coords[this._pointOffset+3]=e}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}};function OZe(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function xY(t){return or(t)?[t.rings,"esriGeometryPolygon"]:xs(t)?[t.paths,"esriGeometryPolyline"]:Sy(t)?[[t.points],"esriGeometryMultipoint"]:Nn(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:Rw(t)?[[[OZe(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}let yj=class gj extends Yt{initialize(e,i,r,s,n){return this._paths=e,this.geometryType=i,this.hasZ=r,this.hasM=s,this._pathIndex=this._pointIndex=-1,this.yFactor=n,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(e){return this._pathIndex=e,this._pointIndex=-1,e>=0&&e<this.totalSize&&(this._currentPath=this._paths[e],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(e){return e>=0&&e<this._currentPath.length&&(this._pointIndex=e,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const e=this._currentPath.length,i=this._currentPath;let r=0;for(let s=1;s<e;s++){const n=i[s-1],o=i[s],a=n[0],l=n[1],c=o[0]-a,d=o[1]-l;r+=Math.sqrt(c*c+d*d)}return r}startPath(){this._paths.push([])}getCurrentPath(){return new gj().initialize([this._currentPath],this.geometryType,this.hasZ,this.hasM,this.yFactor)}pushPath(e){this._paths.push(e)}pushPoint(e){this._paths[this.totalSize-1].push(e)}pushXY(e,i){this._paths[this.totalSize-1].push([e,i])}pushPoints(e){this._paths[this.totalSize-1].push(...e)}pushCursor(e){const i=QA(e);for(const r of i)this.pushPath(r)}asOptimized(){const e=new Vr;if(this.geometryType==="esriGeometryPoint")e.coords.push(...this._paths[0][0]),e.lengths.length=0;else for(const i of this._paths){for(const r of i)e.coords.push(r[0]),e.coords.push(r[1]*this.yFactor),this.hasZ&&e.coords.push(r[2]),this.hasM&&e.coords.push(r[this._mIndex]);e.lengths.push(i.length)}return e}isClosed(){const e=this._currentPath[0],i=this._currentPath[this._currentPath.length-1];for(let r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}clone(){return new gj().initialize(U(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map(e=>e.length).reduce((e,i)=>e+i)}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(e){this._currentPoint[0]=e}get y(){return this.yFactor*this._currentPoint[1]}set y(e){this._currentPoint[1]=this.yFactor*e}get z(){return this._currentPoint[2]}set z(e){this._currentPoint[2]=e}get m(){return this._currentPoint[this._mIndex]}set m(e){this._currentPoint[this._mIndex]=e}get pathIndex(){return this._pathIndex}};const Ik=4,kk=1;let SY=class afe extends fj{initialize(e,i,r,s,n){return super.initialize(e,i,r,s,n),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map(o=>new Set)),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const e=new afe().initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return e._controlPoints=this._controlPoints,e}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(e){this._controlPoints[this.pathIndex].add(e)}getControlPointAt(e){return this._controlPoints[this.pathIndex].has(e)}},$Y=class lfe extends yj{initialize(e,i,r,s,n){return super.initialize(e,i,r,s,n)}clone(){return new lfe().initialize(U(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][Ik]=kk}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][Ik]===kk}setControlPointAt(e){this._paths[this.pathIndex][e][Ik]=kk}getControlPointAt(e){return this._paths[this.pathIndex][e][Ik]===kk}};const RZe=512;let Pt=class zx{constructor(e,i){this.x=e,this.y=i}static fromArray(e){return new zx(e[0],e[1])}clone(){return new zx(this.x,this.y)}equals(e,i){return e===this.x&&i===this.y}isEqual(e){return e.x===this.x&&e.y===this.y}setCoords(e,i){return this.x=e,this.y=i,this}normalize(){const e=this.x,i=this.y,r=Math.sqrt(e*e+i*i);return this.x/=r,this.y/=r,this}rightPerpendicular(){const e=this.x;return this.x=this.y,this.y=-e,this}leftPerpendicular(){const e=this.x;return this.x=-this.y,this.y=e,this}move(e,i){return this.x+=e,this.y+=i,this}assign(e){return this.x=e.x,this.y=e.y,this}assignAdd(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this}assignSub(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this}rotate(e,i){const r=this.x,s=this.y;return this.x=r*e-s*i,this.y=r*i+s*e,this}rotateReverse(e,i){const r=this.x,s=this.y;return this.x=r*e+s*i,this.y=-r*i+s*e,this}scale(e){return this.x*=e,this.y*=e,this}length(){const e=this.x,i=this.y;return Math.sqrt(e*e+i*i)}sub(e){return this.x-=e.x,this.y-=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}static distance(e,i){const r=i.x-e.x,s=i.y-e.y;return Math.sqrt(r*r+s*s)}static add(e,i){return new zx(e.x+i.x,e.y+i.y)}static sub(e,i){return new zx(e.x-i.x,e.y-i.y)}},Tk=class{constructor(e,i,r){this.ratio=e,this.x=i,this.y=r}},NZe=class{constructor(e,i,r,s=8,n=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=s,this._pixelMargin=n,this._tileSize=RZe*s,this._dz=e,this._yPos=i,this._xPos=r}setPixelMargin(e){e!==this._pixelMargin&&(this._pixelMargin=e,this.setExtent(this._extent))}setExtent(e){this._extent=e,this._finalRatio=this._tileSize/e*(1<<this._dz);let i=this._pixelRatio*this._pixelMargin;i/=this._finalRatio;const r=e>>this._dz;i>r&&(i=r),this._margin=i,this._xmin=r*this._xPos-i,this._ymin=r*this._yPos-i,this._xmax=this._xmin+r+2*i,this._ymax=this._ymin+r+2*i}reset(e){this._type=e,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(e,i){this._pushLine(),this._prevIsIn=this._isIn(e,i),this._moveTo(e,i,this._prevIsIn),this._prevPt=new Pt(e,i),this._firstPt=new Pt(e,i),this._dist=0}lineTo(e,i){const r=this._isIn(e,i),s=new Pt(e,i),n=Pt.distance(this._prevPt,s);let o,a,l,c,d,h,f,m;if(r)this._prevIsIn?this._lineTo(e,i,!0):(o=this._prevPt,a=s,l=this._intersect(a,o),this._start=this._dist+n*(1-this._r),this._lineTo(l.x,l.y,!0),this._lineTo(a.x,a.y,!0));else if(this._prevIsIn)a=this._prevPt,o=s,l=this._intersect(a,o),this._lineTo(l.x,l.y,!0),this._lineTo(o.x,o.y,!1);else{const y=this._prevPt,v=s;if(y.x<=this._xmin&&v.x<=this._xmin||y.x>=this._xmax&&v.x>=this._xmax||y.y<=this._ymin&&v.y<=this._ymin||y.y>=this._ymax&&v.y>=this._ymax)this._lineTo(v.x,v.y,!1);else{const b=[];if((y.x<this._xmin&&v.x>this._xmin||y.x>this._xmin&&v.x<this._xmin)&&(c=(this._xmin-y.x)/(v.x-y.x),m=y.y+c*(v.y-y.y),m<=this._ymin?h=!1:m>=this._ymax?h=!0:b.push(new Tk(c,this._xmin,m))),(y.x<this._xmax&&v.x>this._xmax||y.x>this._xmax&&v.x<this._xmax)&&(c=(this._xmax-y.x)/(v.x-y.x),m=y.y+c*(v.y-y.y),m<=this._ymin?h=!1:m>=this._ymax?h=!0:b.push(new Tk(c,this._xmax,m))),(y.y<this._ymin&&v.y>this._ymin||y.y>this._ymin&&v.y<this._ymin)&&(c=(this._ymin-y.y)/(v.y-y.y),f=y.x+c*(v.x-y.x),f<=this._xmin?d=!1:f>=this._xmax?d=!0:b.push(new Tk(c,f,this._ymin))),(y.y<this._ymax&&v.y>this._ymax||y.y>this._ymax&&v.y<this._ymax)&&(c=(this._ymax-y.y)/(v.y-y.y),f=y.x+c*(v.x-y.x),f<=this._xmin?d=!1:f>=this._xmax?d=!0:b.push(new Tk(c,f,this._ymax))),b.length===0)d?h?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):h?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(b.length>1&&b[0].ratio>b[1].ratio)this._start=this._dist+n*b[1].ratio,this._lineTo(b[1].x,b[1].y,!0),this._lineTo(b[0].x,b[0].y,!0);else{this._start=this._dist+n*b[0].ratio;for(let w=0;w<b.length;w++)this._lineTo(b[w].x,b[w].y,!0)}this._lineTo(v.x,v.y,!1)}}this._dist+=n,this._prevIsIn=r,this._prevPt=s}close(){if(this._line.length>2){const e=this._firstPt,i=this._prevPt;e.x===i.x&&e.y===i.y||this.lineTo(e.x,e.y);const r=this._line;let s=r.length;for(;s>=4&&(r[0].x===r[1].x&&r[0].x===r[s-2].x||r[0].y===r[1].y&&r[0].y===r[s-2].y);)r.pop(),r[0].x=r[s-2].x,r[0].y=r[s-2].y,--s}}result(e=!0){return this._pushLine(),this._lines.length===0?null:(this._type===3&&e&&DZe.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==2)throw new Error("Only valid for lines");this._pushLine();const e=this._lines,i=e.length;if(i===0)return null;const r=[];for(let s=0;s<i;s++)r.push({line:e[s],start:this._starts[s]||0});return r}_isIn(e,i){return e>=this._xmin&&e<=this._xmax&&i>=this._ymin&&i<=this._ymax}_intersect(e,i){let r,s,n;if(i.x>=this._xmin&&i.x<=this._xmax)s=i.y<=this._ymin?this._ymin:this._ymax,n=(s-e.y)/(i.y-e.y),r=e.x+n*(i.x-e.x);else if(i.y>=this._ymin&&i.y<=this._ymax)r=i.x<=this._xmin?this._xmin:this._xmax,n=(r-e.x)/(i.x-e.x),s=e.y+n*(i.y-e.y);else{s=i.y<=this._ymin?this._ymin:this._ymax,r=i.x<=this._xmin?this._xmin:this._xmax;const o=(r-e.x)/(i.x-e.x),a=(s-e.y)/(i.y-e.y);o<a?(n=o,s=e.y+o*(i.y-e.y)):(n=a,r=e.x+a*(i.x-e.x))}return this._r=n,new Pt(r,s)}_pushLine(){this._line&&(this._type===1?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===2?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===3&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(e,i,r){this._type!==3?r&&(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new Pt(e,i))):(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.push(new Pt(e,i)),this._isH=!1,this._isV=!1)}_lineTo(e,i,r){let s,n;if(this._type!==3)if(r){if(e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(s=this._line[this._line.length-1],s.equals(e,i)))return;this._line.push(new Pt(e,i))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(e<this._xmin&&(e=this._xmin),e>this._xmax&&(e=this._xmax),i<this._ymin&&(i=this._ymin),i>this._ymax&&(i=this._ymax)),e=Math.round((e-(this._xmin+this._margin))*this._finalRatio),i=Math.round((i-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){s=this._line[this._line.length-1];const o=s.x===e,a=s.y===i;if(o&&a)return;this._isH&&o||this._isV&&a?(s.x=e,s.y=i,n=this._line[this._line.length-2],n.x===e&&n.y===i?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(n=this._line[this._line.length-2],this._isH=n.x===e,this._isV=n.y===i)):(this._isH=n.x===e,this._isV=n.y===i)):(this._line.push(new Pt(e,i)),this._isH=o,this._isV=a)}else this._line.push(new Pt(e,i))}},A_t=class{setExtent(e){this._ratio=e===4096?1:4096/e}get validateTessellation(){return this._ratio<1}reset(e){this._lines=[],this._line=null}moveTo(e,i){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new Pt(e*r,i*r))}lineTo(e,i){const r=this._ratio;this._line.push(new Pt(e*r,i*r))}close(){const e=this._line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])}result(){return this._line&&this._lines.push(this._line),this._lines.length===0?null:this._lines}},DZe=class bp{static simplify(e,i,r){if(!r)return;const s=-i,n=e+i,o=-i,a=e+i,l=[],c=[],d=r.length;for(let f=0;f<d;++f){const m=r[f];if(!m||m.length<2)continue;let y,v=m[0];const b=m.length;for(let w=1;w<b;++w)y=m[w],v.x===y.x&&(v.x<=s&&(v.y>y.y?(l.push(f),l.push(w),l.push(0),l.push(-1)):(c.push(f),c.push(w),c.push(0),c.push(-1))),v.x>=n&&(v.y<y.y?(l.push(f),l.push(w),l.push(1),l.push(-1)):(c.push(f),c.push(w),c.push(1),c.push(-1)))),v.y===y.y&&(v.y<=o&&(v.x<y.x?(l.push(f),l.push(w),l.push(2),l.push(-1)):(c.push(f),c.push(w),c.push(2),c.push(-1))),v.y>=a&&(v.x>y.x?(l.push(f),l.push(w),l.push(3),l.push(-1)):(c.push(f),c.push(w),c.push(3),c.push(-1)))),v=y}if(l.length===0||c.length===0)return;bp.fillParent(r,c,l),bp.fillParent(r,l,c);const h=[];bp.calcDeltas(h,c,l),bp.calcDeltas(h,l,c),bp.addDeltas(h,r)}static fillParent(e,i,r){const s=r.length,n=i.length;for(let o=0;o<n;o+=4){const a=i[o],l=i[o+1],c=i[o+2],d=e[a][l-1],h=e[a][l];let f=8092,m=-1;for(let y=0;y<s;y+=4){if(r[y+2]!==c)continue;const v=r[y],b=r[y+1],w=e[v][b-1],x=e[v][b];switch(c){case 0:case 1:if(Ek(d.y,w.y,x.y)&&Ek(h.y,w.y,x.y)){const S=Math.abs(x.y-w.y);S<f&&(f=S,m=y)}break;case 2:case 3:if(Ek(d.x,w.x,x.x)&&Ek(h.x,w.x,x.x)){const S=Math.abs(x.x-w.x);S<f&&(f=S,m=y)}}}i[o+3]=m}}static calcDeltas(e,i,r){const s=i.length;for(let n=0;n<s;n+=4){const o=[],a=bp.calcDelta(n,i,r,o);e.push(i[n]),e.push(i[n+1]),e.push(i[n+2]),e.push(a)}}static calcDelta(e,i,r,s){const n=i[e+3];if(n===-1)return 0;const o=s.length;return o>1&&s[o-2]===n?0:(s.push(n),bp.calcDelta(n,r,i,s)+1)}static addDeltas(e,i){const r=e.length;let s=0;for(let n=0;n<r;n+=4){const o=e[n+3];o>s&&(s=o)}for(let n=0;n<r;n+=4){const o=i[e[n]],a=e[n+1],l=s-e[n+3];switch(e[n+2]){case 0:o[a-1].x-=l,o[a].x-=l,a===1&&(o[o.length-1].x-=l),a===o.length-1&&(o[0].x-=l);break;case 1:o[a-1].x+=l,o[a].x+=l,a===1&&(o[o.length-1].x+=l),a===o.length-1&&(o[0].x+=l);break;case 2:o[a-1].y-=l,o[a].y-=l,a===1&&(o[o.length-1].y-=l),a===o.length-1&&(o[0].y-=l);break;case 3:o[a-1].y+=l,o[a].y+=l,a===1&&(o[o.length-1].y+=l),a===o.length-1&&(o[0].y+=l)}}}};const Ek=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e,b9=zg(()=>K(()=>import("./bufferOperator-D0a6UHke.js"),__vite__mapDeps([281,282,68,245,247,248,249,250,283,284,285,286,252]))),cfe=zg(()=>K(()=>import("./convexHullOperator-CNxggEL9.js"),__vite__mapDeps([287,288,68,245,247,248,249,250,252]))),ufe=zg(()=>K(()=>import("./lengthOperator-C1YiFZ_w.js"),__vite__mapDeps([289,252,245,247,248,249,68,250]))),dfe=zg(()=>K(()=>import("./generalizeOperator-BAfZt8iA.js"),__vite__mapDeps([290,291,68,286,245,247,248,249,250,252]))),hfe=zg(()=>K(()=>import("./graphicBufferOperator-B5mwp_xS.js"),__vite__mapDeps([292,68,245,247,248,249,250,283,284,285,286,252]))),pfe=zg(()=>K(()=>import("./offsetOperator-Blu4Mdxx.js"),__vite__mapDeps([293,294,68,247,248,245,249,250,252]))),ffe=zg(()=>K(()=>import("./simplifyOperator-BDvNxqX8.js"),__vite__mapDeps([295,254,68,245,247,248,249,250,252]))),FZe=512;let Ku;function IY(t){switch(t.type){case"CIMGeometricEffectDonut":case"CIMGeometricEffectBuffer":return b9.getImportPromise();case"CIMGeometricEffectEnclosingPolygon":return cfe.getImportPromise();case"CIMGeometricEffectOffset":return Promise.all([pfe.getImportPromise(),hfe.getImportPromise()]);case"CIMGeometricEffectTaperedPolygon":return Promise.all([ffe.getImportPromise(),ufe.getImportPromise(),dfe.getImportPromise()]);default:return Promise.resolve()}}let zZe=class{constructor(e){this._geometry=e}next(){const e=this._geometry;return this._geometry=null,e}};function w9(t,e,i){if(!t)return null;Ku||(Ku=new NZe(0,0,0,1));const r=i?-1:1,s=t.geometryType==="esriGeometryPolygon",n=s?3:2,o=s?3:2;let a,l;for(Ku.reset(n),Ku.setPixelMargin(e+1),Ku.setExtent(FZe);t.nextPath();)if(!(t.pathSize<o)){for(t.nextPoint(),a=t.x,l=r*t.y,Ku.moveTo(a,l);t.nextPoint();)a=t.x,l=r*t.y,Ku.lineTo(a,l);s&&Ku.close()}const c=Ku.result(!1);if(c){const d=Yt.createEmptyOptimizedCIM(t.geometryType);for(const h of c){d.startPath();for(const f of h)d.pushXY(f.x,r*f.y)}return d.reset(),d}return null}let U_=class{constructor(){this.setIdentity()}getAngle(){return(this.rz==null||this.rz===0&&this.rzCos!==1&&this.rzSin!==0)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(e,i){this.tx=e,this.ty=i}setTranslateZ(e){this.tz=e}setRotateCS(e,i){this.rz=void 0,this.rzCos=e,this.rzSin=i}setRotate(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}setRotateY(e){this.ry=e}setScale(e){this.s=e}setMeasure(e){this.m=e}};const _9="arial-unicode-ms",kY="woff2",TY=new Map,mfe=new Set;let jZe=class{constructor(e,i){this.fontFace=e,this.promise=i}};async function VZe(t){const e=qZe(t),i=BZe(t),r=TY.get(e);if(r)return r.promise;const s=new FontFace(t.family,`url('${lt.fontsUrl}/woff2/${i}.${kY}') format('${kY}')`,{style:t.style,weight:t.weight}),n=document.fonts;if(n.has(s)&&s.status==="loading")return s.loaded;const o=s.load().then(()=>(n.add(s),s));return TY.set(e,new jZe(s,o)),mfe.add(s),o}function D_t(t){return mfe.has(t)}function UZe(t){if(!t)return _9;const e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function BZe(t){const e=yfe(t)+gfe(t);return UZe(t.family)+(e.length>0?e:"-regular")}function qZe(t){const e=yfe(t)+gfe(t);return(t.family||_9)+(e.length>0?e:"-regular")}function yfe(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function gfe(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}let GZe=class{applyColorSubstitution(e,i){if(!i)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:s}=e,n=this._rasterizationCanvas,o=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=r,n.height=s,o.drawImage(e,0,0,r,s));const a=o.getImageData(0,0,r,s).data;if(i){for(const c of i)if(c&&c.oldColor&&c.oldColor.length===4&&c.newColor&&c.newColor.length===4){const[d,h,f,m]=c.oldColor,[y,v,b,w]=c.newColor;if(d===y&&h===v&&f===b&&m===w)continue;for(let x=0;x<a.length;x+=4)d===a[x]&&h===a[x+1]&&f===a[x+2]&&m===a[x+3]&&(a[x]=y,a[x+1]=v,a[x+2]=b,a[x+3]=w)}}const l=new ImageData(a,r,s);return o.putImageData(l,0,0),n}tintImageData(e,i){if(!i||i.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:r,height:s}=e,n=this._rasterizationCanvas,o=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=r,n.height=s,o.drawImage(e,0,0,r,s));const a=o.getImageData(0,0,r,s),l=new Uint8Array(a.data),c=[i[0]/255,i[1]/255,i[2]/255,i[3]/255];for(let h=0;h<l.length;h+=4)l[h]*=c[0],l[h+1]*=c[1],l[h+2]*=c[2],l[h+3]*=c[3];const d=new ImageData(new Uint8ClampedArray(l.buffer),r,s);return o.putImageData(d,0,0),n}};var Wc;let HZe=(Wc=class{static local(){return Wc.instance===null&&(Wc.instance=new Wc),Wc.instance}execute(e,i){return new WZe(e,i)}},Wc.instance=null,Wc),WZe=class{constructor(e,i){this._inputGeometries=e,this._angleTolerance=i.angleTolerance!==void 0?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();if(!e)return null;for(;e;){if(e.geometryType==="esriGeometryPolygon")this._isClosed=!0;else if(e.geometryType==="esriGeometryPolyline")this._isClosed=!1;else{if(e.geometryType!=="esriGeometryEnvelope"){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const i=e.x,r=e.y;let s=i,n=r,o=e.pathSize,a=0,l=0,c=0,d=0,h=0,f=0;this._isClosed&&++o;for(let m=1;e.nextPoint()||m<o;++m){let y,v;this._isClosed&&m===o-1?(y=i,v=r):(y=e.x,v=e.y);const b=y-s,w=v-n,x=Math.sqrt(b*b+w*w);m>1&&x>0&&c>0&&(a*b+l*w)/x/c<=this._maxCosAngle&&e.setControlPointAt(m-1),m===1&&(d=b,h=w,f=x),x>0&&(s=y,n=v,a=b,l=w,c=x)}this._isClosed&&c>0&&f>0&&(a*d+l*h)/f/c<=this._maxCosAngle&&e.setControlPointAt(0)}}};function M1(t,e){t[4]=e}let q2=class{constructor(e,i=!0,r=!0,s=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&e.geometryType==="esriGeometryPolygon"||!r&&e.geometryType==="esriGeometryPolyline"?null:e,this.geomUnitsPerPoint=s,this.iterateMultiPath=!1,this.iteratePath=!1,this.internalPlacement=new U_}next(){if(!this.geometryCursor)return null;const e=this.processMultiPath(this.geometryCursor);return this.iterateMultiPath&&e||(this.geometryCursor=null),e}processMultiPath(e){for(;this.iteratePath||e.pathIndex<e.totalSize-1;){this.iteratePath||e.nextPath(),this.iterateMultiPath=!0;const i=this.processPath(e);if(i)return i}return this.iterateMultiPath=!1,null}},B_=class{constructor(e,i,r,s=0){this.isClosed=!1,this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=s,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let e=this.inputGeometries.next();for(;e&&(this.isClosed=this.acceptPolygon&&e.geometryType==="esriGeometryPolygon"||e.geometryType==="esriGeometryEnvelope",this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const e=this.processPath(this.multiPathCursor);if(e)return e}this.multiPathCursor=null}}};const N$=.03;let Dh=class{constructor(e=0,i=!1){}isEmpty(e){if(!e.nextPoint())return!0;let i,r,s,n;for(i=e.x,r=e.y;e.nextPoint();i=r,r=n)if(s=e.x,n=e.y,s!==i||n!==r)return e.seekPathStart(),!1;return e.seekPathStart(),!0}normalize(e){const i=Math.sqrt(e[0]*e[0]+e[1]*e[1]);i!==0&&(e[0]/=i,e[1]/=i)}getLength(e,i,r,s){const n=r-e,o=s-i;return Math.sqrt(n*n+o*o)}getSegLength(e){const[[i,r],[s,n]]=e;return this.getLength(i,r,s,n)}getCoord2D(e,i,r,s,n){return[e+(r-e)*n,i+(s-i)*n]}getSegCoord2D(e,i){const[[r,s],[n,o]]=e;return this.getCoord2D(r,s,n,o,i)}getAngle(e,i,r,s,n){const o=r-e,a=s-i;return Math.atan2(a,o)}getAngleCS(e,i,r,s,n,o){e==null&&(e=[0,0]);const a=s-i,l=n-r,c=Math.sqrt(a*a+l*l);return c!==0?(e[0]=a/c,e[1]=l/c,e):(e[0]=1,e[1]=0,e)}getSegAngleCS(e,i,r){const[[s,n],[o,a]]=i;return this.getAngleCS(e,s,n,o,a,r)}cut(e,i,r,s,n,o){return[n<=0?[e,i]:this.getCoord2D(e,i,r,s,n),o>=1?[r,s]:this.getCoord2D(e,i,r,s,o)]}getSubCurve(e,i,r){const s=Yt.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(s,e,i,r)?s:null}appendSubCurve(e,i,r,s){e.startPath(),i.seekPathStart();let n=0,o=!0;if(!i.nextPoint())return!1;let a=i.x,l=i.y;for(;i.nextPoint();){const c=this.getLength(a,l,i.x,i.y);if(c!==0){if(o){if(n+c>r){const d=(r-n)/c;let h=1,f=!1;n+c>=s&&(h=(s-n)/c,f=!0);const m=this.cut(a,l,i.x,i.y,d,h);if(m&&e.pushPoints(m),f)break;o=!1}}else{if(n+c>s){const d=this.cut(a,l,i.x,i.y,0,(s-n)/c);d&&e.pushPoint(d[1]);break}e.pushXY(i.x,i.y)}n+=c,a=i.x,l=i.y}else a=i.x,l=i.y}return!0}getCIMPointAlong(e,i){if(!e.nextPoint())return null;let r,s,n,o,a=0;for(r=e.x,s=e.y;e.nextPoint();r=n,s=o){n=e.x,o=e.y;const l=this.getLength(r,s,n,o);if(l!==0){if(a+l>i){const c=(i-a)/l;return this.getCoord2D(r,s,n,o,c)}a+=l}}return null}offset(e,i,r,s,n){if(!e||e.length<2)return null;let o=0,a=e[o++],l=o;for(;o<e.length;){const f=e[o];f[0]===a[0]&&f[1]===a[1]||(o!==l&&(e[l]=e[o]),a=e[l++]),o++}const c=e[0][0]===e[l-1][0]&&e[0][1]===e[l-1][1];if(c&&--l,l<(c?3:2))return null;const d=[];a=c?e[l-1]:null;let h=e[0];for(let f=0;f<l;f++){const m=f===l-1?c?e[0]:null:e[f+1];if(a)if(m){const y=[m[0]-h[0],m[1]-h[1]];this.normalize(y);const v=[h[0]-a[0],h[1]-a[1]];this.normalize(v);const b=v[0]*y[1]-v[1]*y[0],w=v[0]*y[0]+v[1]*y[1];if(b===0&&w===1){h=m;continue}if(b>=0==i<=0){if(w<1){const x=[y[0]-v[0],y[1]-v[1]];this.normalize(x);const S=Math.sqrt((1+w)/2);if(S>1/s){const $=-Math.abs(i)/S;d.push([h[0]-x[0]*$,h[1]-x[1]*$])}}}else switch(r){case"Mitered":{const x=Math.sqrt((1+w)/2);if(x>0&&1/x<s){const S=[y[0]-v[0],y[1]-v[1]];this.normalize(S);const $=Math.abs(i)/x;d.push([h[0]-S[0]*$,h[1]-S[1]*$]);break}}case"Bevelled":d.push([h[0]+v[1]*i,h[1]-v[0]*i]),d.push([h[0]+y[1]*i,h[1]-y[0]*i]);break;case"Rounded":if(w<1){d.push([h[0]+v[1]*i,h[1]-v[0]*i]);const x=Math.floor(2.5*(1-w));if(x>0){const S=1/x;let $=S;for(let T=1;T<x;T++,$+=S){const C=[v[1]*(1-$)+y[1]*$,-v[0]*(1-$)-y[0]*$];this.normalize(C),d.push([h[0]+C[0]*i,h[1]+C[1]*i])}}d.push([h[0]+y[1]*i,h[1]-y[0]*i])}break;default:if(b<0)d.push([h[0]+(v[1]+v[0])*i,h[1]+(v[1]-v[0])*i]),d.push([h[0]+(y[1]-y[0])*i,h[1]-(y[0]+y[1])*i]);else{const x=Math.sqrt((1+Math.abs(w))/2),S=[y[0]-v[0],y[1]-v[1]];this.normalize(S);const $=i/x;d.push([h[0]-S[0]*$,h[1]-S[1]*$])}}}else{const y=[h[0]-a[0],h[1]-a[1]];this.normalize(y),d.push([h[0]+y[1]*i,h[1]-y[0]*i])}else{const y=[m[0]-h[0],m[1]-h[1]];this.normalize(y),d.push([h[0]+y[1]*i,h[1]-y[0]*i])}a=h,h=m}return d.length<(c?3:2)?null:(c&&d.push([d[0][0],d[0][1]]),d)}};const MR=1.7320508075688772,JZe=5,ZZe="OpenEnded";var Jc;let YZe=(Jc=class{static local(){return Jc.instance===null&&(Jc.instance=new Jc),Jc.instance}execute(e,i,r){return new KZe(e,i,r)}},Jc.instance=null,Jc),KZe=class extends B_{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Dh,this._width=(i.width!==void 0?i.width:JZe)*r,this._arrowType=i.geometricEffectArrowType!==void 0?i.geometricEffectArrowType:i.arrowType!==void 0?i.arrowType:ZZe,this._offsetFlattenError=N$*r}processPath(e){const i=Yt.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case"OpenEnded":default:this._constructSimpleArrow(i,e,!0);break;case"Block":this._constructSimpleArrow(i,e,!1);break;case"Crossed":this._constructCrossedArrow(i,e)}return i}_constructSimpleArrow(e,i,r){const s=i.pathLength();let n=this._width;s<2*n&&(n=s/2);const o=this._curveHelper.getSubCurve(i,0,s-n);if(!o||!o.nextPath())return;o.seekPathStart();const a=n/2;if(this._curveHelper.isEmpty(o))return;const l=of(o),c=this._constructOffset(l,-a);if(!c)return;const d=this._constructOffset(l,a);if(!d)return;const h=this._constructArrowBasePoint(c,-a/2);if(!h)return;const f=this._constructArrowBasePoint(d,a/2);if(!f)return;i.seekInPath(i.pathSize-1);const m=[i.x,i.y];e.pushPath(d),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(f),e.nextPoint(),e.setControlPoint(),e.pushPoint(m),e.nextPoint(),e.setControlPoint(),e.pushPoint(h),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.setControlPoint(),r||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(d[0])),e.reset()}_constructCrossedArrow(e,i){const r=i.pathLength();let s=this._width;r<s*(1+MR+1)&&(s=r/(1+MR+1)),i.seekPathStart();const n=this._curveHelper.getSubCurve(i,0,r-s*(1+MR));if(!n)return;n.nextPath();const o=s/2;if(this._curveHelper.isEmpty(n))return;const a=of(n),l=this._constructOffset(a,o);if(!l)return;const c=this._constructOffset(a,-o);if(!c)return;const d=this._curveHelper.getSubCurve(i,0,r-s);if(!d||(d.nextPath(),this._curveHelper.isEmpty(d)))return;const h=of(d),f=this._constructOffset(h,o);if(!f)return;const m=this._constructOffset(h,-o);if(!m)return;const y=f[f.length-1],v=this._constructArrowBasePoint(f,o/2);if(!v)return;const b=m[m.length-1],w=this._constructArrowBasePoint(m,-o/2);if(!w)return;i.seekInPath(i.pathSize-1);const x=[i.x,i.y];e.pushPath(l),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(b),e.nextPoint(),e.setControlPoint(),e.pushPoint(w),e.nextPoint(),e.setControlPoint(),e.pushPoint(x),e.nextPoint(),e.setControlPoint(),e.pushPoint(v),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoints(c.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}_constructOffset(e,i){return this._curveHelper.offset(e,i,"Rounded",4,this._offsetFlattenError)}_constructArrowBasePoint(e,i){if(!e||e.length<2)return null;const r=e[e.length-2],s=e[e.length-1],n=[s[0]-r[0],s[1]-r[1]];return this._curveHelper.normalize(n),[s[0]+n[1]*i,s[1]-n[0]*i]}};var Zc;let XZe=(Zc=class{static local(){return Zc.instance===null&&(Zc.instance=new Zc),Zc.instance}execute(e,i,r,s,n,o){return new QZe(e,i,r,s,n,o)}},Zc.instance=null,Zc),QZe=class{constructor(e,i,r,s,n,o){this._preventClipping=o,this._inputGeometries=e,this._tileKey=s,this._curveHelper=new Dh,this._size=(i.size!==void 0?i.size:1)*r,this._maxInflateSize=n*r,this._offsetFlattenError=N$*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._size===0)return e;if(e.geometryType==="esriGeometryEnvelope"){if(this._size>0){const o=Yt.createEmptyOptimizedCIM(e.geometryType),a=QA(e)[0],l=this._curveHelper.offset(a,this._size,"Rounded",4,this._offsetFlattenError);if(l)return o.pushPath(l),o}else if(this._size<0){const o=e.asJSON();if(Math.min(o.xmax-o.xmin,o.ymax-o.ymin)+2*this._size>0)return Yt.fromJSONCIM({xmin:o.xmin-this._size,xmax:o.xmax+this._size,ymin:o.ymin-this._size,ymax:o.ymax+this._size})}}const i=!this._preventClipping&&this._tileKey?w9(e,this._maxInflateSize,!0):e;if(!i)continue;const r=b9.module,s={...i.asJSON(),spatialReference:{wkid:fe.WebMercator.wkid}},n=r.execute(s,this._size);return n?Yt.fromJSONCIM(n):null}return null}};var Yc;let eYe=(Yc=class{static local(){return Yc.instance===null&&(Yc.instance=new Yc),Yc.instance}execute(e,i,r){return new tYe(e,i,r)}},Yc.instance=null,Yc),tYe=class{constructor(e,i,r){this._defaultPointSize=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=i.rule??"FullGeometry",this._defaultSize=this._defaultPointSize*r}next(){let e;for(;e=this._inputGeometries.next();){const i=this._processGeom(QA(e));if(i?.length)return Yt.fromJSONCIM({paths:i})}return null}_clone(e){return[e[0],e[1]]}_mid(e,i){return[(e[0]+i[0])/2,(e[1]+i[1])/2]}_mix(e,i,r,s){return[e[0]*i+r[0]*s,e[1]*i+r[1]*s]}_add(e,i){return[e[0]+i[0],e[1]+i[1]]}_add2(e,i,r){return[e[0]+i,e[1]+r]}_sub(e,i){return[e[0]-i[0],e[1]-i[1]]}_dist(e,i){return Math.sqrt((e[0]-i[0])*(e[0]-i[0])+(e[1]-i[1])*(e[1]-i[1]))}_norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}_normalize(e,i=1){const r=i/this._norm(e);e[0]*=r,e[1]*=r}_leftPerpendicular(e){const i=-e[1],r=e[0];e[0]=i,e[1]=r}_leftPerp(e){return[-e[1],e[0]]}_rightPerpendicular(e){const i=e[1],r=-e[0];e[0]=i,e[1]=r}_rightPerp(e){return[e[1],-e[0]]}_dotProduct(e,i){return e[0]*i[0]+e[1]*i[1]}_crossProduct(e,i){return e[0]*i[1]-e[1]*i[0]}_rotateDirect(e,i,r){const s=e[0]*i-e[1]*r,n=e[0]*r+e[1]*i;e[0]=s,e[1]=n}_makeCtrlPt(e){const i=[e[0],e[1]];return M1(i,1),i}_addAngledTicks(e,i,r,s){const n=this._sub(r,i);this._normalize(n);const o=this._crossProduct(n,this._sub(s,i));let a;a=o>0?this._rightPerp(n):this._leftPerp(n);const l=Math.abs(o)/2,c=[];c.push([i[0]+(a[0]-n[0])*l,i[1]+(a[1]-n[1])*l]),c.push(i),c.push(r),c.push([r[0]+(a[0]+n[0])*l,r[1]+(a[1]+n[1])*l]),e.push(c)}_addBezier2(e,i,r,s,n){if(n--===0)return void e.push(s);const o=this._mid(i,r),a=this._mid(r,s),l=this._mid(o,a);this._addBezier2(e,i,o,l,n),this._addBezier2(e,l,a,s,n)}_addBezier3(e,i,r,s,n,o){if(o--===0)return void e.push(n);const a=this._mid(i,r),l=this._mid(r,s),c=this._mid(s,n),d=this._mid(a,l),h=this._mid(l,c),f=this._mid(d,h);this._addBezier3(e,i,a,d,f,o),this._addBezier3(e,f,h,c,n,o)}_add90DegArc(e,i,r,s,n){const o=n??this._crossProduct(this._sub(r,i),this._sub(s,i))>0,a=this._mid(i,r),l=this._sub(a,i);o?this._leftPerpendicular(l):this._rightPerpendicular(l),a[0]+=l[0],a[1]+=l[1],this._addBezier3(e,i,this._mix(i,.33333,a,.66667),this._mix(r,.33333,a,.66667),r,4)}_addArrow(e,i,r){const s=i[0],n=i[1],o=i[i.length-1],a=this._sub(s,n),l=this._norm(a);this._normalize(a);const c=Math.abs(this._crossProduct(a,this._sub(o,n)));let d=this._dotProduct(a,this._sub(o,n));d<.05*l?d=.05*l:d>.95*l&&(d=.95*l);const h=.5*c,f=this._leftPerp(a),m=[n[0]+a[0]*d,n[1]+a[1]*d],y=i.length-1,v=[];v.push(r?[-f[0],-f[1]]:f);let b=[-a[0],-a[1]];for(let w=1;w<y-1;w++){const x=this._sub(i[w+1],i[w]);this._normalize(x);const S=this._dotProduct(x,b),$=this._crossProduct(x,b),T=Math.sqrt((1+S)/2),C=this._sub(x,b);this._normalize(C),C[0]/=T,C[1]/=T,v.push($<0?[-C[0],-C[1]]:C),b=x}v.push(this._rightPerp(b));for(let w=v.length-1;w>0;w--)e.push([i[w][0]+v[w][0]*h,i[w][1]+v[w][1]*h]);e.push([m[0]+v[0][0]*h,m[1]+v[0][1]*h]),e.push([m[0]+v[0][0]*c,m[1]+v[0][1]*c]),e.push(s),e.push([m[0]-v[0][0]*c,m[1]-v[0][1]*c]),e.push([m[0]-v[0][0]*h,m[1]-v[0][1]*h]);for(let w=1;w<v.length;w++)e.push([i[w][0]-v[w][0]*h,i[w][1]-v[w][1]*h])}_addDash(e,i,r){const s=this._norm(r)/7;this._normalize(r);let n=[];for(let o=0;o<=7;o++)n.push([i[0]+r[0]*o*s,i[1]+r[1]*o*s]),1&o&&(e.push(n),n=[])}_cp2(e,i,r){return e.length>=2?e[1]:this._add2(e[0],i*this._defaultSize,r*this._defaultSize)}_cp3(e,i,r,s){if(e.length>=3)return e[2];const n=this._mix(e[0],1-r,i,r),o=this._sub(i,e[0]);return this._normalize(o),this._rightPerpendicular(o),[n[0]+o[0]*s*this._defaultSize,n[1]+o[1]*s*this._defaultSize]}_arrowPath(e){if(e.length>2)return e;const i=e[0],r=this._cp2(e,-4,0),s=this._sub(i,r);this._normalize(s);const n=this._rightPerp(s);return[i,r,[i[0]+(n[0]-s[0])*this._defaultSize,i[1]+(n[1]-s[1])*this._defaultSize]]}_arrowLastSeg(e){const i=e[0],r=this._cp2(e,-4,0);let s;if(e.length>=3)s=e[e.length-1];else{const n=this._sub(i,r);this._normalize(n);const o=this._rightPerp(n);s=[i[0]+(o[0]-n[0])*this._defaultSize,i[1]+(o[1]-n[1])*this._defaultSize]}return[r,s]}_processGeom(e){if(!e)return null;const i=[];for(const r of e){const s=r.length>1&&OIe(r)<this._defaultSize;if(!r||r.length===0||s)continue;const n=r.length;let o=r[0];switch(this._rule){case"PerpendicularFromFirstSegment":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=[];c.push(l),c.push(this._mid(o,a)),i.push(c);break}case"ReversedFirstSegment":{const a=this._cp2(r,0,-1);i.push([a,o]);break}case"PerpendicularToSecondSegment":{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=[];c.push(this._mid(a,l)),c.push(o),i.push(c);break}case"SecondSegmentWithTicks":{if(r.length<3)return[];const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);let d;d=this._crossProduct(c,this._sub(o,a))>0?this._rightPerp(c):this._leftPerp(c);const h=[];h.push([a[0]+(d[0]-c[0])/3,a[1]+(d[1]-c[1])/3]),h.push(a),h.push(l),h.push([l[0]+(d[0]+c[0])/3,l[1]+(d[1]+c[1])/3]),i.push(h);break}case"DoublePerpendicular":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),d=this._sub(c,l);this._normalize(d);const h=this._crossProduct(d,this._sub(o,l));this._leftPerpendicular(d);const f=[];f.push(o),f.push([l[0]+d[0]*h,l[1]+d[1]*h]),i.push(f);const m=[];m.push([l[0]-d[0]*h,l[1]-d[1]*h]),m.push(a),i.push(m);break}case"OppositeToFirstSegment":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._mid(o,a),d=this._sub(c,l);this._normalize(d);const h=this._crossProduct(d,this._sub(o,l));this._leftPerpendicular(d);const f=[];f.push([l[0]+d[0]*h,l[1]+d[1]*h]),f.push([l[0]-d[0]*h,l[1]-d[1]*h]),i.push(f);break}case"TriplePerpendicular":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a),d=this._sub(c,l);this._normalize(d);const h=this._crossProduct(d,this._sub(o,l));this._leftPerpendicular(d);const f=[];f.push([l[0]+d[0]*h*.8,l[1]+d[1]*h*.8]),f.push([c[0]+.8*(o[0]-c[0]),c[1]+.8*(o[1]-c[1])]),i.push(f),i.push([l,c]);const m=[];m.push([l[0]-d[0]*h*.8,l[1]-d[1]*h*.8]),m.push([c[0]+.8*(a[0]-c[0]),c[1]+.8*(a[1]-c[1])]),i.push(m);break}case"HalfCircleFirstSegment":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,4),c=this._mid(o,a);let d=this._sub(a,o);const h=Math.cos(Math.PI/18),f=Math.sin(Math.PI/18),m=Math.sqrt((1+h)/2),y=Math.sqrt((1-h)/2),v=[];let b;this._crossProduct(d,this._sub(l,o))>0?(v.push(o),d=this._sub(o,c),b=a):(v.push(a),d=this._sub(a,c),b=o),this._rotateDirect(d,m,y),d[0]/=m,d[1]/=m;for(let w=1;w<=18;w++)v.push(this._add(c,d)),this._rotateDirect(d,h,f);v.push(b),i.push(v);break}case"HalfCircleSecondSegment":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,1,-1);let c=this._sub(o,a);this._normalize(c);const d=this._crossProduct(c,this._sub(l,a))/2;this._leftPerpendicular(c);const h=[a[0]+c[0]*d,a[1]+c[1]*d];c=this._sub(a,h);const f=Math.cos(Math.PI/18);let m=Math.sin(Math.PI/18);d>0&&(m=-m);const y=[a];for(let v=1;v<=18;v++)this._rotateDirect(c,f,m),y.push(this._add(h,c));i.push(y);break}case"HalfCircleExtended":{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-1);let c;if(n>=4)c=r[3];else{const v=this._sub(o,a);c=this._add(l,v)}const d=this._dist(a,l)/2/.75,h=this._sub(a,o);this._normalize(h,d);const f=this._sub(l,c);this._normalize(f,d);const m=[c,l];i.push(m);const y=[this._clone(l)];this._addBezier3(y,l,this._add(l,f),this._add(a,h),a,4),y.push(o),i.push(y);break}case"OpenCircle":{const a=this._cp2(r,-2,0),l=this._sub(a,o),c=Math.cos(Math.PI/18),d=-Math.sin(Math.PI/18),h=[a];for(let f=1;f<=33;f++)this._rotateDirect(l,c,d),h.push(this._add(o,l));i.push(h);break}case"CoverageEdgesWithTicks":{const a=this._cp2(r,0,-1);let l,c;if(n>=3)l=r[2];else{const m=this._sub(a,o),y=this._leftPerp(m);l=[o[0]+y[0]-.25*m[0],o[1]+y[1]-.25*m[1]]}if(n>=4)c=r[3];else{const m=this._mid(o,a),y=this._sub(o,a);this._normalize(y),this._leftPerpendicular(y);const v=this._crossProduct(y,this._sub(l,m));this._rightPerpendicular(y),c=[l[0]+y[0]*v*2,l[1]+y[1]*v*2]}const d=this._sub(a,o);let h,f;h=this._crossProduct(d,this._sub(l,o))>0?this._rightPerp(d):this._leftPerp(d),f=[],f.push(l),f.push(o),f.push([o[0]+(h[0]-d[0])/3,o[1]+(h[1]-d[1])/3]),i.push(f),h=this._crossProduct(d,this._sub(c,a))>0?this._rightPerp(d):this._leftPerp(d),f=[],f.push([a[0]+(h[0]+d[0])/3,a[1]+(h[1]+d[1])/3]),f.push(a),f.push(c),i.push(f);break}case"GapExtentWithDoubleTicks":{const a=this._cp2(r,0,2),l=this._cp3(r,a,0,1);let c;if(n>=4)c=r[3];else{const d=this._sub(a,o);c=this._add(l,d)}this._addAngledTicks(i,o,a,this._mid(l,c)),this._addAngledTicks(i,l,c,this._mid(o,a));break}case"GapExtentMidline":{const a=this._cp2(r,2,0),l=this._cp3(r,a,0,1);let c;if(n>=4)c=r[3];else{const h=this._sub(a,o);c=this._add(l,h)}const d=[];d.push(this._mid(o,l)),d.push(this._mid(a,c)),i.push(d);break}case"Chevron":{const a=this._cp2(r,-1,-1);let l;if(n>=3)l=r[2];else{const c=this._sub(a,o);this._leftPerpendicular(c),l=this._add(o,c)}i.push([a,this._makeCtrlPt(o),l]);break}case"PerpendicularWithArc":{const a=this._cp2(r,0,-2),l=this._cp3(r,a,.5,-1),c=this._sub(a,o),d=this._norm(c);c[0]/=d,c[1]/=d;const h=this._crossProduct(c,this._sub(l,o));let f=this._dotProduct(c,this._sub(l,o));f<.05*d?f=.05*d:f>.95*d&&(f=.95*d);const m=[o[0]+c[0]*f,o[1]+c[1]*f];let y=this._leftPerp(c),v=[];if(v.push([m[0]-y[0]*h,m[1]-y[1]*h]),v.push([m[0]+y[0]*h,m[1]+y[1]*h]),i.push(v),n>=4){const S=r[3];let $=this._dotProduct(c,this._sub(S,o));$<.1*d?$=.1*d:$>.9*d&&($=.9*d);const T=[o[0]+c[0]*$,o[1]+c[1]*$],C=this._crossProduct(c,this._sub(S,o)),L=[];L.push([T[0]-y[0]*C,T[1]-y[1]*C]),L.push([T[0]+y[0]*C,T[1]+y[1]*C]),i.push(L)}const b=[a[0]+y[0]*h,a[1]+y[1]*h];y=this._sub(a,b);const w=Math.cos(Math.PI/18);let x=Math.sin(Math.PI/18);h<0&&(x=-x),v=[o,a];for(let S=1;S<=9;S++)this._rotateDirect(y,w,x),v.push(this._add(b,y));i.push(v);break}case"ClosedHalfCircle":{const a=this._cp2(r,2,0),l=this._mid(o,a),c=this._sub(a,l),d=Math.cos(Math.PI/18),h=Math.sin(Math.PI/18),f=[o,a];for(let m=1;m<=18;m++)this._rotateDirect(c,d,h),f.push(this._add(l,c));i.push(f);break}case"TripleParallelExtended":{const a=this._cp2(r,0,-2),l=this._cp3(r,a,1,-2),c=this._mid(o,a),d=this._sub(l,a);this._normalize(d);const h=Math.abs(this._crossProduct(d,this._sub(c,a)))/2,f=this._dist(a,l),m=[a,o];m.push([o[0]+d[0]*f*.5,o[1]+d[1]*f*.5]),i.push(m);const y=[];y.push([c[0]-d[0]*h,c[1]-d[1]*h]),y.push([c[0]+d[0]*f*.375,c[1]+d[1]*f*.375]),M1(y[y.length-1],1),y.push([c[0]+d[0]*f*.75,c[1]+d[1]*f*.75]),i.push(y);const v=[a,l];i.push(v);break}case"ParallelWithTicks":{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(l,a);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),this._addAngledTicks(i,o,a,l),this._addAngledTicks(i,this._mix(o,1,c,d),this._mix(a,1,c,d),this._mid(o,a));break}case"Parallel":{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._leftPerp(c),h=this._crossProduct(c,this._sub(l,o));let f=[o,a];i.push(f),f=[],f.push([o[0]+d[0]*h,o[1]+d[1]*h]),f.push([a[0]+d[0]*h,a[1]+d[1]*h]),i.push(f);break}case"PerpendicularToFirstSegment":{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._mid(o,a),d=this._sub(a,o);this._normalize(d);const h=this._crossProduct(d,this._sub(l,o));this._leftPerpendicular(d);const f=[];f.push([c[0]-d[0]*h*.25,c[1]-d[1]*h*.25]),f.push([c[0]+d[0]*h*1.25,c[1]+d[1]*h*1.25]),i.push(f);break}case"ParallelOffset":{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const h=[];h.push([o[0]-c[0]*d,o[1]-c[1]*d]),h.push([a[0]-c[0]*d,a[1]-c[1]*d]),i.push(h);const f=[];f.push([o[0]+c[0]*d,o[1]+c[1]*d]),f.push([a[0]+c[0]*d,a[1]+c[1]*d]),i.push(f);break}case"OffsetOpposite":{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const h=[];h.push([o[0]-c[0]*d,o[1]-c[1]*d]),h.push([a[0]-c[0]*d,a[1]-c[1]*d]),i.push(h);break}case"OffsetSame":{const a=this._cp2(r,3,0),l=this._cp3(r,a,.5,-1),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c);const h=[];h.push([o[0]+c[0]*d,o[1]+c[1]*d]),h.push([a[0]+c[0]*d,a[1]+c[1]*d]),i.push(h);break}case"CircleWithArc":{let a=this._cp2(r,3,0);const l=this._cp3(r,a,.5,-1);let c,d;if(n>=4)c=r[3],d=this._crossProduct(this._sub(c,a),this._sub(l,a))>0;else{c=a,d=this._crossProduct(this._sub(c,o),this._sub(l,o))>0;const v=24*this._geomUnitsPerPoint,b=this._sub(c,o);this._normalize(b,v);const w=Math.sqrt(2)/2;this._rotateDirect(b,w,d?w:-w),a=this._add(o,b)}const h=this._sub(a,o),f=Math.cos(Math.PI/18),m=Math.sin(Math.PI/18),y=[a];for(let v=1;v<=36;v++)this._rotateDirect(h,f,m),y.push(this._add(o,h));this._add90DegArc(y,a,c,l,d),M1(y[y.length-8],1),i.push(y);break}case"DoubleJog":{let a,l=this._cp2(r,-3,1),c=this._cp3(r,l,-1,-.5);if(n>=4)a=r[3];else{const x=o;o=l,a=c;const S=this._dist(o,x),$=this._dist(a,x);let T=30*this._geomUnitsPerPoint;.5*S<T&&(T=.5*S),.5*$<T&&(T=.5*$),l=this._mix(o,T/S,x,(S-T)/S),c=this._mix(a,T/$,x,($-T)/$)}const d=this._mid(o,l),h=this._mid(a,c),f=this._dist(o,l),m=this._dist(c,a);let y=Math.min(f,m)/8;y=Math.min(y,24*this._geomUnitsPerPoint);const v=Math.cos(Math.PI/4);let b=this._sub(o,l);this._normalize(b,y),this._crossProduct(b,this._sub(a,l))>0?this._rotateDirect(b,v,-v):this._rotateDirect(b,v,v);let w=[];w.push(l),w.push(this._add(d,b)),w.push(this._sub(d,b)),w.push(o),i.push(w),b=this._sub(a,c),this._normalize(b,y),this._crossProduct(b,this._sub(o,c))<0?this._rotateDirect(b,v,v):this._rotateDirect(b,v,-v),w=[],w.push(c),w.push(this._add(h,b)),w.push(this._sub(h,b)),w.push(a),i.push(w);break}case"PerpendicularOffset":{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const d=[c[0]/8,c[1]/8],h=this._sub(this._mid(a,l),d);i.push([h,o]);break}case"LineExcludingLastSegment":{const a=this._arrowPath(r),l=[];let c=a.length-2;for(;c--;)l.push(a[c]);i.push(l);break}case"MultivertexArrow":{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!1),i.push(l);break}case"CrossedArrow":{const a=this._arrowPath(r),l=[];this._addArrow(l,a,!0),i.push(l);break}case"ChevronArrow":{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,d=this._sub(o,a),h=this._norm(d);this._normalize(d);const f=this._crossProduct(d,this._sub(l,a));let m=this._dotProduct(d,this._sub(l,a));m<.05*h?m=.05*h:m>.95*h-c&&(m=.95*h-c);const y=[a[0]+d[0]*m,a[1]+d[1]*m],v=this._leftPerp(d),b=[];b.push([y[0]+v[0]*f+d[0]*c,y[1]+v[1]*f+d[1]*c]),b.push(o),b.push([y[0]-v[0]*f+d[0]*c,y[1]-v[1]*f+d[1]*c]),i.push(b);break}case"ChevronArrowOffset":{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),d=this._norm(c);this._normalize(c);const h=this._crossProduct(c,this._sub(l,a));let f=this._dotProduct(c,this._sub(l,a));f<.05*d?f=.05*d:f>.95*d&&(f=.95*d);const m=[a[0]+c[0]*f,a[1]+c[1]*f];this._leftPerpendicular(c);const y=[];y.push([m[0]+c[0]*h*.5,m[1]+c[1]*h*.5]),y.push(this._mid(m,o)),y.push([m[0]-c[0]*h*.5,m[1]-c[1]*h*.5]),i.push(y);break}case"PartialFirstSegment":{const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),d=this._norm(c);this._normalize(c);let h=this._dotProduct(c,this._sub(l,a));h<.05*d?h=.05*d:h>.95*d&&(h=.95*d);const f=[a[0]+c[0]*h,a[1]+c[1]*h];i.push([a,f]);break}case"Arch":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=this._sub(o,a),d=this._mix(l,1,c,.55),h=this._mix(l,1,c,-.55),f=[o];this._addBezier2(f,o,d,l,4),this._addBezier2(f,l,h,a,4),i.push(f);break}case"CurvedParallelTicks":{const a=this._cp2(r,-4,1),l=this._cp3(r,a,.882353,-1.94),c=this._sub(l,a);this._crossProduct(c,this._sub(o,a))>0?this._rightPerpendicular(c):this._leftPerpendicular(c);const d=[c[0]/8,c[1]/8],h=this._sub(this._mid(a,l),d),f=this._sub(this._mix(a,.75,l,.25),d),m=this._sub(this._mix(a,.25,l,.75),d),y=[a];this._addBezier2(y,a,f,h,3),this._addBezier2(y,h,m,l,3),i.push(y);for(let v=0;v<8;v++){const b=y[2*v+1],w=[this._clone(b)];w.push(this._add(b,[c[0]/4,c[1]/4])),i.push(w)}break}case"Arc90Degrees":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,1),c=[a];this._add90DegArc(c,a,o,l),i.push(c);break}case"TipWithPerpendicularAndTicks":{const[a,l]=this._arrowLastSeg(r),c=10*this._geomUnitsPerPoint,d=this._sub(o,a),h=this._norm(d);this._normalize(d);let f=this._crossProduct(d,this._sub(l,a)),m=this._dotProduct(d,this._sub(l,a));m<.05*h?m=.05*h:m>.95*h-c&&(m=.95*h-c);const y=this._leftPerp(d),v=[o[0]-d[0]*c,o[1]-d[1]*c],b=.5*Math.max(h-m-c,c);f=Math.abs(f);const w=[];w.push([v[0]+y[0]*(f+b)-d[0]*b,v[1]+y[1]*(f+b)-d[1]*b]),w.push([v[0]+y[0]*f,v[1]+y[1]*f]),w.push([v[0]-y[0]*f,v[1]-y[1]*f]),w.push([v[0]-y[0]*(f+b)-d[0]*b,v[1]-y[1]*(f+b)-d[1]*b]),i.push(w),i.push([v,o]);break}case"ConcentricCircles":{const a=this._cp2(r,1,0),l=this._cp3(r,a,2,0),c=Math.cos(Math.PI/18),d=Math.sin(Math.PI/18);let h=this._dist(a,o),f=[h,0],m=[];for(let y=0;y<=36;y++)m.push(this._add(o,f)),this._rotateDirect(f,c,d);if(i.push(m),n>=4){m=[];const y=r[3];h=this._dist(y,o),f=[h,0];for(let v=0;v<=36;v++)m.push(this._add(o,f)),v===0&&(m.push(this._add(o,f)),M1(m[1],1)),this._rotateDirect(f,c,d);i.push(m)}m=[],h=this._dist(l,o),f=[h,0];for(let y=0;y<=36;y++)m.push(this._add(o,f)),this._rotateDirect(f,c,d);i.push(m);break}case"DoubleJogArrow":{o=this._arrowPath(r)[0];const[a,l]=this._arrowLastSeg(r),c=this._sub(o,a),d=this._norm(c);this._normalize(c);const h=Math.abs(this._crossProduct(c,this._sub(l,o)));let f=Math.abs(this._dotProduct(c,this._sub(l,o)));f<.05*d?f=.05*d:f>.95*d&&(f=.95*d);const m=Math.max(h,f),y=this._leftPerp(c);let v=[];const b=[o[0]-c[0]*f*.5+y[0]*h*.5,o[1]-c[1]*f*.5+y[1]*h*.5];v.push([b[0],b[1]]),b[0]+=c[0]*m*.5+y[0]*m*.4,b[1]+=c[1]*m*.5+y[1]*m*.4,v.push([b[0],b[1]]),b[0]-=y[0]*m*.25,b[1]-=y[1]*m*.25,v.push([b[0],b[1]]),b[0]+=c[0]*m*.5+y[0]*m*.4,b[1]+=c[1]*m*.5+y[1]*m*.4,v.push([b[0],b[1]]),i.push(v),v=[],b[0]=o[0]-c[0]*f*.5-y[0]*h*.5,b[1]=o[1]-c[1]*f*.5-y[1]*h*.5,v.push([b[0],b[1]]),b[0]+=c[0]*m*.5-y[0]*m*.4,b[1]+=c[1]*m*.5-y[1]*m*.4,v.push([b[0],b[1]]),b[0]+=y[0]*m*.25,b[1]+=y[1]*m*.25,v.push([b[0],b[1]]),b[0]+=c[0]*m*.5-y[0]*m*.4,b[1]+=c[1]*m*.5-y[1]*m*.4,v.push([b[0],b[1]]),i.push(v);break}case"LinkedChevrons":{const a=this._cp2(r,-5,0),l=this._cp3(r,a,-.2,1),c=this._sub(o,a);this._normalize(c);const d=this._leftPerp(c),h=Math.abs(this._crossProduct(c,this._sub(l,a)));i.push([a,o]);const f=[];f.push([o[0]-c[0]*h+d[0]*h,o[1]-c[1]*h+d[1]*h]),f.push(o),f.push([o[0]-c[0]*h-d[0]*h,o[1]-c[1]*h-d[1]*h]),i.push(f),this._addDash(i,a,[-c[0]*h+d[0]*h,-c[1]*h+d[1]*h]),this._addDash(i,a,[-c[0]*h-d[0]*h,-c[1]*h-d[1]*h]);break}case"SegmentThenHalfCircle":{const a=this._cp2(r,2,0),l=this._cp3(r,a,1.5,0);let c;c=n>=4?r[3]:this._cp3(r,a,1.25,-.5);const d=this._sub(a,o);this._normalize(d);const h=.5*this._dist(a,l),f=this._crossProduct(d,this._sub(c,o))>0,m=Math.cos(Math.PI/18);let y=Math.sin(Math.PI/18);f&&(y=-y);const v=[o,a];d[0]*=h,d[1]*=h;const b=this._add(a,d);d[0]=-d[0],d[1]=-d[1];for(let w=1;w<=18;w++)this._rotateDirect(d,m,y),v.push(this._add(b,d));i.push(v);break}case"LineWithStraightTicks":{const a=this._cp2(r,-2,1),l=this._cp3(r,a,-1,-.5),c=this._sub(l,a);this._normalize(c);const d=this._dotProduct(c,this._sub(a,o)),h=this._dotProduct(c,this._sub(l,o));let f=[o];f.push([o[0]+c[0]*d,o[1]+c[1]*d]),f.push(a),i.push(f),f=[o],f.push([o[0]+c[0]*h,o[1]+c[1]*h]),f.push(l),i.push(f);break}case"DoubleCurve":{const a=this._cp2(r,-5,-1),l=this._cp3(r,a,2,0),c=Math.atan2(1,5),d=Math.cos(c),h=Math.sin(c),f=this._sub(a,o),m=this._dist(o,a);this._normalize(f),this._rotateDirect(f,d,-h);const y=[o];y.push([o[0]+f[0]*m*.5,o[1]+f[1]*m*.5]),M1(y[1],1),y.push([o[0]+f[0]*m*.8,o[1]+f[1]*m*.8]),this._addBezier2(y,y[2],[o[0]+f[0]*m,o[1]+f[1]*m],a,3);const v=this._sub(l,a),b=this._dist(a,l);this._normalize(v),this._rotateDirect(v,d,-h),this._addBezier2(y,a,[l[0]-v[0]*b,l[1]-v[1]*b],[l[0]-v[0]*b*.8,l[1]-v[1]*b*.8],3),y.push(l),i.push(y);break}case"ParallelWithTicksByWidth":{const a=this._cp2(r,0,-1),l=this._cp3(r,a,.5,3),c=this._sub(a,o);this._normalize(c);const d=this._crossProduct(c,this._sub(l,o));this._leftPerpendicular(c),d>0?(this._addAngledTicks(i,o,[o[0]+c[0]*d,o[1]+c[1]*d],a),this._addAngledTicks(i,a,[a[0]+c[0]*d,a[1]+c[1]*d],o)):(this._addAngledTicks(i,[o[0]+c[0]*d,o[1]+c[1]*d],o,a),this._addAngledTicks(i,[a[0]+c[0]*d,a[1]+c[1]*d],o,a));break}case"EnclosingRoundedRectangle":{const a=this._cp2(r,3,-2),l=[Math.min(o[0],a[0]),Math.max(o[1],a[1])],c=[Math.max(o[0],a[0]),Math.min(o[1],a[1])],d=c[0]-l[0],h=l[1]-c[1],f=Math.min(d,h)/10,m=[];m.push([l[0]+f+.75*(d-2*f),l[1]]),m.push([c[0]-f,l[1]]),this._add90DegArc(m,[c[0]-f,l[1]],[c[0],l[1]-f],[c[0],l[1]]),m.push([c[0],c[1]+f]),this._add90DegArc(m,[c[0],c[1]+f],[c[0]-f,c[1]],c),m.push([l[0]+f,c[1]]),this._add90DegArc(m,[l[0]+f,c[1]],[l[0],c[1]+f],[l[0],c[1]]),m.push([l[0],l[1]-f]),this._add90DegArc(m,[l[0],l[1]-f],[l[0]+f,l[1]],l),m.push([l[0]+f+.75*(d-2*f),l[1]]);break}default:i.push(r)}}return i}};var Kc;let iYe=(Kc=class{static local(){return Kc.instance===null&&(Kc.instance=new Kc),Kc.instance}execute(e,i,r){return new rYe(e,i,r)}},Kc.instance=null,Kc),rYe=class extends B_{constructor(e,i,r){super(e,!0,!0),this._curveHelper=new Dh,this._beginCut=(i.beginCut!==void 0?i.beginCut:1)*r,this._endCut=(i.endCut!==void 0?i.endCut:1)*r,this._middleCut=(i.middleCut!==void 0?i.middleCut:0)*r,this._invert=i.invert!==void 0&&i.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(e){const{_beginCut:i,_endCut:r,_middleCut:s}=this,n=e.pathLength(),o=Yt.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(i!==0||r!==0||s!==0)if(i+r+s>=n)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(o,e,0,i),this._curveHelper.appendSubCurve(o,e,.5*(n-s),.5*(n+s)),this._curveHelper.appendSubCurve(o,e,n-r,r)}else if(i===0&&r===0&&s===0)for(o.startPath();e.nextPoint();)o.pushXY(e.x,e.y);else i+r+s<n&&(s===0?this._curveHelper.appendSubCurve(o,e,i,n-r):(this._curveHelper.appendSubCurve(o,e,i,.5*(n-s)),this._curveHelper.appendSubCurve(o,e,.5*(n+s),n-r)));return o.totalSize===0?null:o}};const EY=1e-7;let iL=class{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return this._values.length===0}size(){return this._values.length}init(e,i,r=!0){if(this._setEmpty(),!e||e.length===0)return!1;for(let s=0;s<e.length;s++){let n=Math.abs(e[s]);r&&n<EY&&(n=EY),this._values.push(n),this._length+=n}return i&&1&e.length&&(this._length*=2),this._length!==0&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(e){const i=this._values?this._values.length:0;for(let r=0;r<i;++r)this._values[r]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}addValue(e){this._length+=e,this._values.push(e)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}},Nd=class{constructor(){this.pt=null,this.ca=0,this.sa=0}},Mk=class{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return this.segment!==null}copyTo(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}},rL=class extends Dh{constructor(e=0,i=!1){super(e,i),this._tempPos=new Mk,this._tempPt=[0,0],this._tolerance=N$,this._currentPosition=new Mk}updateTolerance(e){this._tolerance=N$*e}init(e,i,r=!0){return r?(this._patternLength=i.length(),this._partExtPtGap=i.extPtGap,this._partCtrlPtGap=i.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(e,i=0){const r=new Mk;return!!this._nextPosition(e,r,null,i)&&(r.copyTo(this._currentPosition),!0)}curPointAndAngle(e){e.pt=this._getPoint(this._currentPosition);const[i,r]=this._getAngleCS(this._tempPt,this._currentPosition);e.ca=i,e.sa=r}nextPointAndAngle(e,i,r=0){const s=this._tempPos;if(!this._nextPosition(e,s,null,r))return!1;s.copyTo(this._currentPosition),i.pt=this._getPoint(s);const[n,o]=this._getAngleCS(this._tempPt,s);return i.ca=n,i.sa=o,!0}nextCurve(e){if(e===0)return null;const i=Yt.createEmptyOptimizedCIM("esriGeometryPolyline");i.startPath(),i.nextPath();const r=new Mk;return this._nextPosition(e,r,i,1)?(r.copyTo(this._currentPosition),i):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}getSeg(e){return[this.getPt(e),this.getPt(e+1)]}_nextPosition(e,i,r,s){if(this._currentPosition.isPathEnd)return!1;let n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(i);i.abscissa+e*this._partLengthRatio>i.segmentLength+this._tolerance;){if(r){if(r.pathSize===0)if(n===0){const a=i.segment[0];r.pushXY(a[0],a[1])}else r.pushPoint(this.getSegCoord2D(i.segment,n));const o=i.segment[1];r.pushXY(o[0],o[1])}if(n=0,e-=(i.segmentLength-i.abscissa)/this._partLengthRatio,this._partSegCount)i.segment=this._nextSegment(),i.segmentLength=this.getSegLength(i.segment),i.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return s!==0&&(i.segmentLength=this.getSegLength(i.segment),i.isPartEnd=!0,s===1?(i.abscissa=i.segmentLength,i.isPathEnd=!0):i.abscissa=i.segmentLength+e,!0);this._currentPosition.copyTo(i)}}if(i.abscissa+=e*this._partLengthRatio,r){r.pathSize===0&&(n===0?r.pushPoint(i.segment[0]):r.pushPoint(this.getSegCoord2D(i.segment,n)));const o=i.abscissa/i.segmentLength;o===1?r.pushPoint(i.segment[1]):r.pushPoint(this.getSegCoord2D(i.segment,o))}return this._partSegCount||Math.abs(i.abscissa-i.segmentLength)<this._tolerance&&(i.isPathEnd=this._partIsLast,i.isPartEnd=!0),!0}_getPoint(e){const i=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,i)}_getAngleCS(e,i){const r=i.segmentLength<=0?0:i.abscissa/i.segmentLength;return this.getSegAngleCS(e,this._currentPosition.segment,r)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let e=this._partSegCount;for(;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const i=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(i);let r=i+this._partSegCount+1;if(r>=this._pathCursor.pathSize&&(r=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(r),this._patternLength>0){const s=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let o=Math.round((this._partLength-(s+n))/this._patternLength);o<=0&&(o=s+n>0?0:1),this._partLengthRatio=this._partLength/(s+n+o*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}};var Xc;let sYe=(Xc=class{static local(){return Xc.instance===null&&(Xc.instance=new Xc),Xc.instance}execute(e,i,r){return new nYe(e,i,r)}},Xc.instance=null,Xc),nYe=class extends B_{constructor(e,i,r){super(e,!0,!0),this._firstCurve=null,this._walker=new rL,this._walker.updateTolerance(r),this._endings=i.lineDashEnding,this._customDashPos=-(i.offsetAlongLine??0)*r,this._offsetAtEnd=(i.customEndingOffset??0)*r;let s=fhe(i).dashTemplate;s==null&&(s=[]),s.length%2&&(s=[...s,...s]),this._pattern=new iL,this._pattern.init(s,!0),this._pattern.scale(r)}processPath(e){if(this._pattern.length()===0){this.iteratePath=!1;const s=of(e);return Yt.fromJSONCIM({paths:[s]})}if(!this.iteratePath){let s=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(s=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const n=e.pathLength();if(this._pattern.isEmpty()||n<.1*this._pattern.length()){const o=of(e);return Yt.fromJSONCIM({paths:[o]})}if(!this._walker.init(e,this._pattern,s)){const o=of(e);return Yt.fromJSONCIM({paths:[o]})}}let i;if(this.iteratePath)i=this._pattern.nextValue();else{let s;switch(this._endings){case"HalfPattern":default:s=.5*this._pattern.firstValue();break;case"HalfGap":s=.5*-this._pattern.lastValue();break;case"FullGap":s=-this._pattern.lastValue();break;case"FullPattern":s=0;break;case"NoConstraint":case"Custom":s=-this._customDashPos}let n=s/this._pattern.length();n-=Math.floor(n),s=n*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();let o=!1;for(;s>=i;)s-=i,i=this._pattern.nextValue(),o=!o;i-=s,o?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}let r=this._walker.nextCurve(i);if(r)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)r.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(r.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,r=this._firstCurve,this._firstCurve=null;return r?.reset(),r}};var Qc;let oYe=(Qc=class{static local(){return Qc.instance===null&&(Qc.instance=new Qc),Qc.instance}execute(e,i,r,s,n,o){return new aYe(e,i,r,s,n,o)}},Qc.instance=null,Qc),aYe=class{constructor(e,i,r,s,n,o){this._preventClipping=o,this._inputGeometries=e,this._tileKey=s,this._maxInflateSize=n*r,this._width=(i.width!==void 0?i.width:2)*r,i.method,this._option=i.option}next(){let e;for(;e=this._inputGeometries.next();){if(e.geometryType==="esriGeometryEnvelope"&&this._width>0){const i=e.asJSON();return Math.min(i.xmax-i.xmin,i.ymax-i.ymin)-2*this._width<0?e:Yt.fromJSONCIM({paths:[[[i.xmin+this._width,i.ymin+this._width],[i.xmax-this._width,i.ymin+this._width],[i.xmax-this._width,i.ymax-this._width],[i.xmin+this._width,i.ymax-this._width],[i.xmin+this._width,i.ymin+this._width]],[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]})}if(e.geometryType==="esriGeometryPolygon"){if(this._width===0)return e.clone();const i=b9.module,r=!this._preventClipping&&this._tileKey?w9(e,this._maxInflateSize,!0):e.clone();if(!r)continue;const s={...r.asJSON(),spatialReference:{wkid:fe.WebMercator.wkid}},n=i.execute(s,-this._width);if(n){for(const o of n.rings)if(o){r.startPath();for(const a of o.reverse())r.pushXY(a[0],r.yFactor*a[1])}}return r}}return null}};var eu;let lYe=(eu=class{static local(){return eu.instance===null&&(eu.instance=new eu),eu.instance}execute(e,i){return new cYe(e,i)}},eu.instance=null,eu),cYe=class{constructor(e,i){this._inputGeometries=e,this._medhod=i.method}next(){let e=this._inputGeometries.next();const i=this._medhod;for(;e!=null;){if(e.totalSize>0)switch(i){case"RectangularBox":return uYe(e);case"ConvexHull":return this._constructConvexHull(e);default:return dYe(e)}e=this._inputGeometries.next()}return null}_constructConvexHull(e){switch(e.geometryType){case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=cfe.module,r={...e.asJSON(),spatialReference:{wkid:fe.WebMercator.wkid}},s=i.execute(r);return s?Yt.fromJSONCIM(s):null}case"esriGeometryEnvelope":return e;default:return null}}};function uYe(t){const e=x2(t),i={xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]};return Yt.fromJSONCIM(i)}function dYe(t){switch(t.geometryType){case"esriGeometryPolyline":{const e=[];for(;t.nextPath();)hYe(t,e);return Yt.fromJSONCIM({rings:e})}case"esriGeometryPolygon":case"esriGeometryEnvelope":return t;default:return null}}function hYe(t,e){if(t.seekPathStart(),!t.nextPoint())return;const i=t.x,r=t.y,s=[[i,r]];for(e.push(s);t.nextPoint();)s.push([t.x,t.y]);s.push([i,r])}var tu;let pYe=(tu=class{static local(){return tu.instance===null&&(tu.instance=new tu),tu.instance}execute(e,i,r){return new fYe(e,i,r)}},tu.instance=null,tu),fYe=class extends B_{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Dh,this._length=(i.length!==void 0?i.length:20)*r,this._angle=i.angle!==void 0?i.angle:225,this._position=i.position!==void 0?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(e){const i=Yt.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);const r=e.x,s=e.y;e.seekInPath(e.pathSize-1);const n=e.x,o=e.y,a=[n-r,o-s];this._curveHelper.normalize(a);const l=r+(n-r)*this._position/100,c=s+(o-s)*this._position/100,d=Math.cos((90-this._angle)/180*Math.PI);let h=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(h=-h),this._mirror=!this._mirror;const f=[l-this._length/2*d,c-this._length/2*h],m=[l+this._length/2*d,c+this._length/2*h];return i.pushPath([[r,s],f,m,[n,o]]),i}};var iu;let mYe=(iu=class{static local(){return iu.instance===null&&(iu.instance=new iu),iu.instance}execute(e,i,r){return new yYe(e,i,r)}},iu.instance=null,iu),yYe=class{constructor(e,i,r){this._inputGeometries=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0}next(){let e=this._inputGeometries.next();for(;e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}_move(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+i,e.y=e.y+r;return e.reset(),e}};const gYe=10;var ru;let vYe=(ru=class{static local(){return ru.instance===null&&(ru.instance=new ru),ru.instance}execute(e,i,r,s,n,o){return new bYe(e,i,r,s,n,o)}},ru.instance=null,ru),bYe=class{constructor(e,i,r,s,n,o){this._preventClipping=o,this._inputGeometries=e,this._tileKey=s,this._curveHelper=new Dh,this._offset=(i.offset??1)*r,this._method=i.method,this._maxInflateSize=Math.max(Math.abs(n*r),gYe),this._option=i.option,this._offsetFlattenError=N$*r}next(){let e;for(;e=this._inputGeometries.next();){if(this._offset===0)return e.clone();if(e.geometryType==="esriGeometryEnvelope"){if(this._method==="Rounded"&&this._offset>0){const c=of(e),d=this._curveHelper.offset(c,-this._offset,this._method,4,this._offsetFlattenError);if(d){const h=Yt.createEmptyOptimizedCIM(e.geometryType);return h.pushPath(d),h}return null}const l=e.asJSON();if(Nn(l)&&Math.min(l.xmax-l.xmin,l.ymax-l.ymin)+2*this._offset>0)return Yt.fromJSONCIM({xmin:l.xmin-this._offset,xmax:l.xmax+this._offset,ymin:l.ymin-this._offset,ymax:l.ymax+this._offset})}const i=!this._preventClipping&&this._tileKey?w9(e,this._maxInflateSize,!0):e.clone();if(!i)continue;const r=pfe.module,s=hfe.module,n={...i.asJSON(),spatialReference:{wkid:fe.WebMercator.wkid}};let o,a=wYe(this._method);return e.geometryType==="esriGeometryPolygon"&&this._offset>0?(a==="square"&&(a="bevel"),o=s.executeMany([n],[this._offset],a,"round")[0]):o=r.execute(n,-this._offset,{joins:a,flattenError:this._offsetFlattenError,miterLimit:4}),o?Yt.fromJSONCIM(o):null}return null}};function wYe(t){switch(t){case"Rounded":return"round";case"Bevelled":return"bevel";case"Mitered":return"miter";case"Square":return"square"}}var su;let _Ye=(su=class{static local(){return su.instance===null&&(su.instance=new su),su.instance}execute(e,i,r){return new xYe(e,i,r)}},su.instance=null,su),xYe=class{constructor(e,i,r){this._inputGeometries=e,this._length=(i.length!==void 0?i.length:Er.CIMGeometricEffectRadial.length)*r,this._angle=i.angle!==void 0?i.angle*Math.PI/180:Er.CIMGeometricEffectRadial.angle,this._lx=Math.cos(this._angle)*this._length,this._ly=Math.sin(this._angle)*this._length}next(){let e=this._inputGeometries.next();for(;e;){if(e.geometryType==="esriGeometryPoint"||e.geometryType==="esriGeometryMultipoint"){const i=Yt.createEmptyOptimizedCIM("esriGeometryPolyline");return e.nextPath()&&e.nextPoint()&&i.pushPath([[e.x,e.y],[e.x+this._lx,e.y+this._ly]]),i}if(e.geometryType==="esriGeometryPolygon"){const i=ese(e);if(!i)return null;const r=Yt.createEmptyOptimizedCIM("esriGeometryPolyline");return r.pushPath([[i[0],i[1]],[i[0]+this._lx,i[1]+this._ly]]),r}e=this._inputGeometries.next()}return null}};var nu;let SYe=(nu=class{static local(){return nu.instance===null&&(nu.instance=new nu),nu.instance}execute(e,i,r){return new $Ye(e,i,r)}},nu.instance=null,nu),$Ye=class{constructor(e,i,r){this._inputGeometries=e,this._reverse=i.reverse===void 0||i.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if(e.geometryType==="esriGeometryPolyline")return IYe(e.clone());e=this._inputGeometries.next()}return null}};function IYe(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const i=t.x,r=t.y;t.seekInPath(t.pathSize-e-1);const s=t.x,n=t.y;t.x=i,t.y=r,t.seekInPath(e),t.x=s,t.y=n}return t.reset(),t}var ou;let kYe=(ou=class{static local(){return ou.instance===null&&(ou.instance=new ou),ou.instance}execute(e,i,r){return new TYe(e,i,r)}},ou.instance=null,ou),TYe=class{constructor(e,i,r){this._inputGeometries=e,this._rotateAngle=i.angle!==void 0?i.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(this._rotateAngle===0||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=x2(e),r=(i[2]+i[0])/2,s=(i[3]+i[1])/2;return e.reset(),this._rotate(e.clone(),r,s)}e=this._inputGeometries.next()}return null}_rotate(e,i,r){const s=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle);for(;e.nextPath();)for(;e.nextPoint();){const o=e.x-i,a=e.y-r;e.x=i+o*s-a*n,e.y=r+o*n+a*s}return e.reset(),e}};var au;let EYe=(au=class{static local(){return au.instance===null&&(au.instance=new au),au.instance}execute(e,i,r){return new MYe(e,i,r)}},au.instance=null,au),MYe=class{constructor(e,i,r){this._inputGeometries=e,this._xFactor=i.xScaleFactor!==void 0?i.xScaleFactor:1.15,this._yFactor=i.yScaleFactor!==void 0?i.yScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(this._xFactor===1&&this._yFactor===1||e.geometryType==="esriGeometryPoint")return e;if(e.totalSize>0){const i=x2(e),r=(i[2]+i[0])/2,s=(i[3]+i[1])/2;return e.reset(),this._scaleCursor(e.clone(),r,s)}}return null}_scaleCursor(e,i,r){for(;e.nextPath();)for(;e.nextPoint();)e.x=i+(e.x-i)*this._xFactor,e.y=r+(e.y-r)*this._yFactor;return e.reset(),e}},vj=class{constructor(){this._polyline=[]}beginPath(e){this._polyline.push([e])}lineTo(e){if(this._polyline.length===0)throw new Error("No path started. Call beginPath first.");this._polyline[this._polyline.length-1].push(e)}getPointCount(){return this._polyline.reduce((e,i)=>e+i.length,0)}addSegment(e,i,r){r&&this.beginPath(e),this.lineTo(i)}getXY(e){let i=0;for(const r of this._polyline){if(e<i+r.length)return r[e-i];i+=r.length}return null}getGeometry(){return this._polyline}};var lu;let CYe=(lu=class{static local(){return lu.instance===null&&(lu.instance=new lu),lu.instance}execute(e,i,r){return new PYe(e,i,r)}},lu.instance=null,lu),PYe=class extends B_{constructor(e,i,r){super(e,!1,!0),this._suppress=i.suppress!==void 0&&i.suppress,this._invert=i.invert!==void 0&&i.invert}processPath(e){if(e.totalSize<=0)return null;if(!this._suppress){const m=Yt.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.nextPoint();)m.pushXY(e.x,e.y);return m}const i=[],r=new Array(e.pathSize);let s=0;for(e.seekPathStart();e.nextPoint();)r[s++]=e.getControlPoint(),i.push([e.x,e.y]);let n=!0,o=!0,a=!1,l=!this._invert;s=0;const c=new vj;let d=i[0];for(;s<i.length;){const m=i[s+1],y=r[s],v=r[s+1];s++,o&&(l=y||v?this._invert:!this._invert,o=!1),l?(c.addSegment(d,m,n),n=!1):a=!0,d=m,v&&(l?(l=!1,n=!0):l=!0)}const h=c.getGeometry();if(h.length===0)return null;if(!a&&i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]){const m=h[h.length-1];return m[0][0]===m[m.length-1][0]&&m[0][1]===m[m.length-1][1]||m.push([m[0][0],m[0][1]]),Yt.fromJSONCIM({paths:h})}const f=h[h.length-1];return c.getPointCount()>1&&e.geometryType==="esriGeometryPolygon"&&f[0][0]===f[f.length-1][0]&&f[0][1]===f[f.length-1][1]&&h.length>1&&(h[h.length-1].push(...h[0]),h.splice(0,1)),Yt.fromJSONCIM({paths:h})}};const C1=()=>X.getLogger("esri.symbols.cim.effects.EffectTaperedPolygon");var cu;let AYe=(cu=class{static local(){return cu.instance===null&&(cu.instance=new cu),cu.instance}execute(e,i,r){return new LYe(e,i,r)}},cu.instance=null,cu),LYe=class extends B_{constructor(e,i,r){super(e,!1,!0),this._slopeS=0,this._slopeC=1,this._lastTangent1=new Pt(NaN,NaN),this._lastWidth=0,this._geomUnitsPerPoint=r,this._halfFromWidth=Math.abs(i.fromWidth!==void 0?i.fromWidth:0)*r*.5,this._halfToWidth=Math.abs(i.toWidth!==void 0?i.toWidth:1)*r*.5,this._originalLength=(i.length!==void 0?i.length:0)*r,this._length=0}processPath(e){if(e.totalSize<=0)return null;if(this._halfFromWidth<=0&&this._halfToWidth<=0){const c=Yt.createEmptyOptimizedCIM("esriGeometryPolygon",!1,!1,e.yFactor);for(e.seekPathEnd();e.prevPoint();)c.pushXY(e.x,e.y);for(e.seekPathStart();e.nextPoint();)c.pushXY(e.x,e.y);return c}const i=e.getCurrentPath().asJSON(),r=dfe.module.execute(i,.25*this._geomUnitsPerPoint,{removeDegenerateParts:!0}),s=r==null?null:or(r)?r.rings:xs(r)?r.paths:null;if(!s)return C1().error(new R("mapview-bad-resource","Unable to process geometry")),null;const n=ufe.module.execute(r);if((this._originalLength===0||this._originalLength>n)&&n>0){this._length=n;const c=(this._halfToWidth-this._halfFromWidth)/this._length;if(Math.abs(c)<1){const d=c*c;this._slopeC=Math.sqrt(1/(1+d)),this._slopeS=Math.sqrt(d/(1+d)),c<0&&(this._slopeS=-this._slopeS)}else this._slopeC=this._slopeS=.7071}else this._length=this._originalLength,this._slopeC=1,this._slopeS=0;const o=[];for(const c of s){const d=new vj,h=new vj;let f=0;this._setFromOffset(c.slice(0,2),d,h);for(let v=0,b=3;b<=c.length;++v,++b)f=this._setOffset(c.slice(v,b),f,d,h);this._setToOffset(c.slice(-2),f,d,h);const[m]=d.getGeometry(),[y]=h.getGeometry();o.push([...m,...y.reverse()])}const a={rings:o,spatialReference:{wkid:fe.WebMercator.wkid}},l=ffe.module.execute(a);return Yt.fromJSONCIM(l)}_setFromOffset([[e,i],[r,s]],n,o){const a=this._halfFromWidth,l=new Pt(r-e,s-i).normalize().scale(a);n.beginPath([e-l.y,i+l.x]),o.beginPath([e+l.y,i-l.x])}_setToOffset([[e,i],[r,s]],n,o,a){let l;l=(n+=Math.sqrt((r-e)**2+(s-i)**2))>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*n/this._length;const c=new Pt(r-e,s-i).normalize().scale(l);o.lineTo([r-c.y,s+c.x]),a.lineTo([r+c.y,s-c.x])}_setOffset([[e,i],[r,s],[n,o]],a,l,c){const d=Math.sqrt((r-e)**2+(s-i)**2);let h;h=a+d>=this._length?this._halfToWidth:this._halfFromWidth+(this._halfToWidth-this._halfFromWidth)*(a+d)/this._length,a+=d;const f=new Pt(r,s),m=new Pt(r-e,s-i).normalize(),y=new Pt(n-r,o-s).normalize(),v=Pt.sub(y,m),b=l.getPointCount(),w=c.getPointCount();m.leftPerpendicular(),y.leftPerpendicular();const x=m.x*y.x+m.y*y.y;if(x>.99){const S=Pt.add(m,y).scale(h/2),$=S.clone().rotate(this._slopeC,this._slopeS);l.lineTo([f.x+$.x,f.y+$.y]);const T=S.rotateReverse(this._slopeC,this._slopeS);c.lineTo([f.x-T.x,f.y-T.y])}else{const S=m.x*y.y-m.y*y.x;if(v.scale(1/S),S<0){v.scale(-h).rotateReverse(this._slopeC,this._slopeS);const D=c.getXY(w-1);D||C1().error(new R("mapview-bad-resource","Unable to process geometry, index out of scope"));const F=Pt.add(f,v).sub(Pt.fromArray(D));if(m.x*F.y-m.y*F.x>0){const W=m.clone().scale(-h).rotateReverse(this._slopeC,this._slopeS),Z=y.clone().scale(-h).rotateReverse(this._slopeC,this._slopeS);c.lineTo([f.x+W.x,f.y+W.y]),c.lineTo([f.x,f.y]),c.lineTo([f.x+Z.x,f.y+Z.y])}else c.lineTo([f.x+v.x,f.y+v.y])}else{v.scale(h).rotate(this._slopeC,this._slopeS);const D=l.getXY(b-1);D||C1().error(new R("mapview-bad-resource","Unable to process geometry, index out of scope"));const F=Pt.add(f,v).sub(Pt.fromArray(D));if(m.x*F.y-m.y*F.x>0){const W=m.clone().scale(h).rotate(this._slopeC,this._slopeS),Z=y.clone().scale(h).rotate(this._slopeC,this._slopeS);l.lineTo([f.x+W.x,f.y+W.y]),l.lineTo([f.x,f.y]),l.lineTo([f.x+Z.x,f.y+Z.y])}else l.lineTo([f.x+v.x,f.y+v.y])}const $=Math.acos(x);let T=1;if(h>.25){const D=2*Math.acos(1-.25/h);D<$&&(T=Math.round($/D))}const C=Math.cos($/T),L=Math.sin($/T),N=m.clone();if(S<0){N.rotate(this._slopeC,this._slopeS);const D=l.getXY(b-1);D||C1().error(new R("mapview-bad-resource","Unable to process geometry, index out of scope"));const F=Pt.add(f,N.clone().scale(this._lastWidth)),W=Pt.sub(F,Pt.fromArray(D)),Z=m.x*W.y-m.y*W.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&Z>0){const V=new Pt(e,i),A=this._lastTangent1.clone().scale(this._lastWidth);A.rotate(this._slopeC,this._slopeS);const q=m.clone().scale(this._lastWidth);q.rotate(this._slopeC,this._slopeS),l.lineTo([V.x+A.x,V.y+A.y]),l.lineTo([V.x,V.y]),l.lineTo([V.x+q.x,V.y+q.y])}}else{N.scale(-1).rotateReverse(this._slopeC,this._slopeS);const D=c.getXY(w-1);D||C1().error(new R("mapview-bad-resource","Unable to process geometry, index out of scope"));const F=Pt.add(f,N.clone().scale(this._lastWidth)),W=Pt.sub(F,Pt.fromArray(D)),Z=m.x*W.y-m.y*W.x;if(!isNaN(this._lastTangent1.x)&&!isNaN(this._lastTangent1.y)&&Z>0){const V=new Pt(e,i),A=this._lastTangent1.clone().scale(-this._lastWidth);A.rotateReverse(this._slopeC,this._slopeS);const q=m.clone().scale(-this._lastWidth);q.rotateReverse(this._slopeC,this._slopeS),c.lineTo([V.x+A.x,V.y+A.y]),c.lineTo([V.x,V.y]),c.lineTo([V.x+q.x,V.y+q.y])}}N.scale(h);for(let D=0;D<=T;D++)S<0?(l.lineTo([f.x+N.x,f.y+N.y]),N.rotateReverse(C,L)):(c.lineTo([f.x+N.x,f.y+N.y]),N.rotate(C,L))}return this._lastTangent1.setCoords(m.x,m.y),this._lastWidth=h,a}};var uu;let OYe=(uu=class{static local(){return uu.instance===null&&(uu.instance=new uu),uu.instance}execute(e,i,r){return new RYe(e,i,r)}},uu.instance=null,uu),RYe=class{constructor(e,i,r){this._inputGeometries=e,this._height=(i.amplitude!==void 0?i.amplitude:2)*r,this._period=(i.period!==void 0?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new iL,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new rL,this._walker.updateTolerance(r)}next(){let e=this._inputGeometries.next();for(;e;){if(this._height===0||this._period===0)return e;const i=this._processGeom(e);if(i)return i;e=this._inputGeometries.next()}return null}_processGeom(e){const i=Yt.createEmptyOptimizedCIM(e.geometryType);for(;e.nextPath();){i.startPath();const r=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case"Sinus":default:this._constructCurve(i,r,!1);break;case"Square":this._constructSquare(i,r);break;case"Triangle":this._constructTriangle(i,r);break;case"Random":this._constructCurve(i,r,!0)}else for(;e.nextPoint();)i.pushXY(e.x,e.y)}return i}_constructCurve(e,i,r){let s=Math.round(i/this._period);s===0&&(s=1);const n=s*16+1,o=i/s,a=this._period/16,l=1/n,c=2*Math.PI*i/o,d=2*Math.PI*Math.random(),h=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),m=.75-Math.random()/2,y=.75-Math.random()/2,v=new Nd;this._walker.curPointAndAngle(v),e.pushPoint(v.pt);let b=0;for(;;){if(!this._walker.nextPointAndAngle(a,v)){e.pushPoint(this._walker.getPathEnd());break}{const w=b;let x;if(b+=l,r){const S=this._height/2*(1+.3*Math.sin(m*c*w+d));x=S*Math.sin(c*w+h),x+=S*Math.sin(y*c*w+f),x/=2}else x=.5*this._height*Math.sin(.5*c*w);e.pushXY(v.pt[0]-x*v.sa,v.pt[1]+x*v.ca)}}}_constructSquare(e,i){Math.round(i/this._period);let r=!0;for(;;){let s=!1;if(this._walker.curPositionIsValid()){const n=new Nd;this._walker.curPointAndAngle(n);const o=new Nd;if(this._walker.nextPointAndAngle(this._period,o)){const a=new Nd;this._walker.nextPointAndAngle(this._period,a)&&(r?(e.pushPoint(n.pt),r=!1):e.pushPoint(n.pt),e.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),s=!0)}}if(!s){e.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(e,i){Math.round(i/this._period);let r=!0;for(;;){let s=!1;if(this._walker.curPositionIsValid()){const n=new Nd;this._walker.curPointAndAngle(n);const o=new Nd;if(this._walker.nextPointAndAngle(this._period/2,o)){const a=new Nd;this._walker.nextPointAndAngle(this._period,a)&&(this._walker.nextPosition(this._period/2)&&(r?(e.pushPoint(n.pt),r=!1):e.pushPoint(n.pt),e.pushXY(o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca)),s=!0)}}if(!s){e.pushPoint(this._walker.getPathEnd());break}}}};var du;let NYe=(du=class{static local(){return du.instance===null&&(du.instance=new du),du.instance}execute(e,i,r){return new DYe(e,i,r)}},du.instance=null,du),DYe=class extends q2{constructor(e,i,r){super(e),this._geometryWalker=new rL,this._geometryWalker.updateTolerance(r),this._angleToLine=i.angleToLine??!0,this._offset=(i.offset?i.offset:0)*r,this._originalEndings=i.endings,this._offsetAtEnd=(i.customEndingOffset?i.customEndingOffset:0)*r,this._position=-(i.offsetAlongLine?i.offsetAlongLine:0)*r,this._pattern=new iL,this._pattern.init(i.placementTemplate,!1),this._pattern.scale(r),this._endings=this._originalEndings}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath)i=this._pattern.nextValue();else{this._originalEndings==="WithFullGap"&&this.isClosed?this._endings="WithMarkers":this._endings=this._originalEndings,this._pattern.extPtGap=0;let s,n=!0;switch(this._endings){case"NoConstraint":s=-this._position,s=this._adjustPosition(s),n=!1;break;case"WithHalfGap":default:s=-this._pattern.lastValue()/2;break;case"WithFullGap":s=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case"WithMarkers":s=0;break;case"Custom":s=-this._position,s=this._adjustPosition(s),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,n))return null;this._pattern.reset();let o=0;for(;s>o;)s-=o,o=this._pattern.nextValue();o-=s,i=o,this.iteratePath=!0}const r=new Nd;return this._geometryWalker.nextPointAndAngle(i,r)?this._endings==="WithFullGap"&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings==="WithMarkers"&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca),this._angleToLine&&this.internalPlacement.setRotateCS(r.ca,r.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(e){let i=e/this._pattern.length();return i-=Math.floor(i),i*this._pattern.length()}};var hu;let FYe=(hu=class{static local(){return hu.instance===null&&(hu.instance=new hu),hu.instance}execute(e,i,r){return new zYe(e,i,r)}},hu.instance=null,hu),zYe=class extends q2{constructor(e,i,r){super(e,!1,!0),this._curveHelper=new Dh,this._placePerPart=i.placePerPart??!1,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._type=i.extremityPlacement,this._position=i.offsetAlongLine!==void 0?i.offsetAlongLine*r:0,this._beginProcessed=!1}processMultiPath(e){return this._placePerPart?super.processMultiPath(e):this.processPath(e)}processPath(e){let i;switch(this._type){case"Both":default:this._beginProcessed?(i=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iterateMultiPath=!1,this.iteratePath=!1):(i=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iterateMultiPath=!0,this.iteratePath=!0);break;case"JustBegin":i=this._atExtremities(e,this._position,!0);break;case"JustEnd":i=this._atExtremities(e,this._position,!1);case"None":}return i}_atExtremities(e,i,r){if(this._placePerPart||(r?e.seekPath(0):e.seekPath(e.totalSize-1)),r||e.seekPathEnd(),r?e.nextPoint():e.prevPoint()){let s=0,[n,o]=[0,0],[a,l]=[e.x,e.y];const c=[0,0];for(;r?e.nextPoint():e.prevPoint();){n=a,o=l,a=e.x,l=e.y;const d=this._curveHelper.getLength(n,o,a,l);if(s+d>i){const h=(i-s)/d,[f,m]=this._curveHelper.getAngleCS(c,n,o,a,l,h),y=this._curveHelper.getCoord2D(n,o,a,l,h);return this.internalPlacement.setTranslate(y[0]-this._offset*m,y[1]+this._offset*f),this._angleToLine&&this.internalPlacement.setRotateCS(-f,-m),this.internalPlacement}s+=d}}return null}};var pu;let jYe=(pu=class{static local(){return pu.instance===null&&(pu.instance=new pu),pu.instance}execute(e,i,r){return new VYe(e,i,r)}},pu.instance=null,pu),VYe=class extends q2{constructor(e,i,r){super(e),this._walker=new rL,this._walker.updateTolerance(r),this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._beginGap=i.beginPosition!==void 0?i.beginPosition*r:0,this._endGap=i.endPosition!==void 0?i.endPosition*r:0,this._flipFirst=i.flipFirst===void 0||i.flipFirst,this._pattern=new iL,this._pattern.init(i.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(e){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();const a=this._pattern.nextValue()*this._subPathLen,l=this._beginGap+a;i=l-this._prevPos,this._prevPos=l,this.iteratePath=!0}const r=new Nd;if(!this._walker.nextPointAndAngle(i,r,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(r.pt[0]-this._offset*r.sa,r.pt[1]+this._offset*r.ca);const s=this._isFirst&&this._flipFirst;let n,o;return this._angleToLine?(n=r.ca,o=r.sa):(n=1,o=0),s&&(n=-n,o=-o),this.internalPlacement.setRotateCS(n,o),this._isFirst=!1,this._posCount--,this._posCount===0&&(this.iteratePath=!1),this.internalPlacement}};const ep=512,UYe=10,hc=24,KC=1e-6;var fu;let BYe=(fu=class{static local(){return fu.instance===null&&(fu.instance=new fu),fu.instance}execute(e,i,r,s){return new qYe(e,i,r,s)}},fu.instance=null,fu),qYe=class Vm{constructor(e,i,r,s){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(i.stepX??16)*r,this._stepY=Math.abs(i.stepY??16)*r,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,this._stepX!==0&&this._stepY!==0){if(this._gridType=i.gridType??"Fixed",this._gridType==="Random"){const n=i.seed??13,o=1;this._randomLCG=new eU(n*o),this._randomness=(i.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=i.gridAngle??0,this._shiftOddRows=i.shiftOddRows??!1,this._offsetX=(i.offsetX??0)*r,this._offsetY=(i.offsetY??0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,s!=null){const[n,o,a,l]=s.split("/"),c=parseFloat(n),d=parseFloat(o),h=parseFloat(a),f=parseFloat(l);this._graphicOriginX=-(f*2**c+h)*ep,this._graphicOriginY=d*ep,this._testInsidePolygon=!0}this._internalPlacement=new U_,this._calculateMinMax(e),this._geometryCursor=e}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!Vm._randValues){Vm._randValues=[];for(let e=0;e<hc;e++)for(let i=0;i<hc;i++)Vm._randValues.push(this._randomLCG.getFloat()),Vm._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(e){let i,r,s,n,o,a,l,c,d,h,f,m,y,v;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,l=c=y=f=Number.MAX_VALUE,d=h=v=m=-Number.MAX_VALUE;const b=this._cosAngle!==1;for(e.reset();e.nextPath();)for(;e.nextPoint();)a=e.x,o=e.y,i=a-this._graphicOriginX-this._offsetX,r=o-this._graphicOriginY-this._offsetY,b?(s=this._cosAngle*i-this._sinAngle*r,n=this._sinAngle*i+this._cosAngle*r):(s=i,n=r),l=Math.min(l,s),d=Math.max(d,s),c=Math.min(c,n),h=Math.max(h,n),f=Math.min(f,o),m=Math.max(m,o),y=Math.min(y,a),v=Math.max(v,a);f=f!==Number.MAX_VALUE?f:-ep-this._stepY,m=m!==-Number.MAX_VALUE?m:this._stepY,y=y!==Number.MAX_VALUE?y:-this._stepX,v=v!==-Number.MAX_VALUE?v:ep+this._stepX;const w=m-f,x=v-y;if(this._verticalSubdivision=w>=x,this._polygonMin=this._verticalSubdivision?f:y,this._testInsidePolygon){let S=0-this._graphicOriginX-this._offsetX-this._stepX,$=ep-this._graphicOriginX-this._offsetX+this._stepX,T=-ep-this._graphicOriginY-this._offsetY-this._stepY,C=0-this._graphicOriginY-this._offsetY+this._stepY;if(b){const L=[[S,T],[S,C],[$,T],[$,C]];S=T=Number.MAX_VALUE,$=C=-Number.MAX_VALUE;for(const N of L){const D=this._cosAngle*N[0]-this._sinAngle*N[1],F=this._sinAngle*N[0]+this._cosAngle*N[1];S=Math.min(S,D),$=Math.max($,D),T=Math.min(T,F),C=Math.max(C,F)}}l=l!==Number.MAX_VALUE?Math.max(l,S):S,c=c!==Number.MAX_VALUE?Math.max(c,T):T,d=d!==-Number.MAX_VALUE?Math.min(d,$):$,h=h!==-Number.MAX_VALUE?Math.min(h,C):C}this._xMin=Math.round(l/this._stepX),this._xMax=Math.round(d/this._stepX),this._yMin=Math.round(c/this._stepY),this._yMax=Math.round(h/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,y,v,f,m)}_buildAccelerationMap(e,i,r,s,n){e.reset();const o=new Map,a=this._verticalSubdivision,l=a?n-s:r-i;let c=Math.ceil(l/UYe);if(c<=1)return;const d=Math.floor(l/c);let h,f,m,y,v,b,w,x,S,$,T;for(c++,this._delta=d,a?(S=-ep-2*this._stepY,$=2*this._stepY,T=s):(S=-2*this._stepX,$=ep+2*this._stepX,T=i);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(h=e.x,f=e.y;e.nextPoint();h=m,f=y){if(m=e.x,y=e.y,a){if(f===y||f<S&&y<S||f>$&&y>$)continue;v=Math.min(f,y),b=Math.max(f,y)}else{if(h===m||h<S&&m<S||h>$&&m>$)continue;v=Math.min(h,m),b=Math.max(h,m)}for(;v<b;)w=Math.floor((v-T)/d),MY(w,h,f,m,y,o),v+=d;x=Math.floor((b-T)/d),x>w&&MY(x,h,f,m,y,o)}this._accelerationMap=o}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let e=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(e+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let r,s;if(this._currentX++,this._gridType==="Random"){const n=(this._currentX%hc+hc)%hc,o=(this._currentY%hc+hc)%hc;r=this._graphicOriginX+e+this._stepX*this._randomness*(.5-Vm._randValues[o*hc+n])*2/3,s=this._graphicOriginY+i+this._stepY*this._randomness*(.5-Vm._randValues[o*hc+n+1])*2/3}else r=this._graphicOriginX+this._cosAngle*e+this._sinAngle*i,s=this._graphicOriginY-this._sinAngle*e+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,s,this._geometryCursor))return this._internalPlacement.setTranslate(r,s),this._internalPlacement}}_isInsidePolygon(e,i,r){if(this._accelerationMap==null)return GYe(e,i,r);e+=KC,i+=KC;const s=this._verticalSubdivision,n=s?i:e,o=Math.floor((n-this._polygonMin)/this._delta),a=this._accelerationMap.get(o);if(!a)return!1;let l,c,d,h=0;for(const f of a){if(l=f[0],c=f[1],s){if(l[1]>i==c[1]>i)continue;d=(c[0]-l[0])*(i-l[1])-(c[1]-l[1])*(e-l[0])}else{if(l[0]>e==c[0]>e)continue;d=(c[1]-l[1])*(e-l[0])-(c[0]-l[0])*(i-l[1])}d>0?h++:h--}return h!==0}};function GYe(t,e,i){let r,s,n,o,a=0;for(t+=KC,e+=KC,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,s=i.y;i.nextPoint();r=n,s=o)n=i.x,o=i.y,s>e!=o>e&&((n-r)*(e-s)-(o-s)*(t-r)>0?a++:a--);return a!==0}function MY(t,e,i,r,s,n){let o=n.get(t);o||(o=[],n.set(t,o)),o.push([[e,i],[r,s]])}const HYe=.001;var mu;let WYe=(mu=class{static local(){return mu.instance===null&&(mu.instance=new mu),mu.instance}execute(e,i,r){return new JYe(e,i,r)}},mu.instance=null,mu),JYe=class extends q2{constructor(e,i,r){super(e),this._curveHelper=new Dh,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._relativeTo=i.relativeTo,this._position=i.startPointOffset!==void 0?i.startPointOffset*r:0,this._epsilon=HYe*r}processPath(e){const i=this._position;if(this._relativeTo==="SegmentMidpoint"){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[s,n]=[e.x,e.y],[o,a]=[0,0];const l=[0,0];for(;e.nextPoint();){o=e.x,a=e.y;const c=this._curveHelper.getLength(s,n,o,a);if(c<this._epsilon){s=o,n=a;continue}const d=.5+this._position/c,[h,f]=this._curveHelper.getAngleCS(l,s,n,o,a,d),m=this._curveHelper.getCoord2D(s,n,o,a,d);return this.internalPlacement.setTranslate(m[0]-this._offset*f,m[1]+this._offset*h),this._angleToLine&&this.internalPlacement.setRotateCS(h,f),this.internalPlacement}}return this.iteratePath=!1,null}const r=this._relativeTo==="LineEnd";return this.onLine(e,i,r)}onLine(e,i,r){let s,n=!1;switch(this._relativeTo){case"LineMiddle":default:e.seekPathStart(),s=e.pathLength()/2+i;break;case"LineBeginning":s=i;break;case"LineEnd":s=i,n=!0}r?e.seekPathEnd():e.seekPathStart();let o=0;if(r?e.prevPoint():e.nextPoint()){let[a,l]=[e.x,e.y],[c,d]=[0,0];const h=[0,0];for(;r?e.prevPoint():e.nextPoint();){c=e.x,d=e.y;const f=this._curveHelper.getLength(a,l,c,d);if(o+f>s){const m=(s-o)/f,[y,v]=this._curveHelper.getAngleCS(h,a,l,c,d,m),b=this._curveHelper.getCoord2D(a,l,c,d,m),w=n?-this._offset:this._offset;return this.internalPlacement.setTranslate(b[0]-w*v,b[1]+w*y),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-y,-v):this.internalPlacement.setRotateCS(y,v)),this.internalPlacement}a=c,l=d,o+=f}}return null}};const ZYe=1e-15;var yu;let YYe=(yu=class{static local(){return yu.instance===null&&(yu.instance=new yu),yu.instance}execute(e,i,r){return new KYe(e,i,r)}},yu.instance=null,yu),KYe=class extends q2{constructor(e,i,r){super(e),this._curveHelper=new Dh,this._angleToLine=i.angleToLine===void 0||i.angleToLine,this._offset=i.offset!==void 0?i.offset*r:0,this._endPoints=i.placeOnEndPoints===void 0||i.placeOnEndPoints,this._controlPoints=i.placeOnControlPoints===void 0||i.placeOnControlPoints,this._regularVertices=i.placeOnRegularVertices===void 0||i.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const i=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(i[2]);let r=i[0],s=i[1];if(this._offset!==0){const n=Math.cos(i[2]),o=Math.sin(i[2]);r-=this._offset*o,s+=this._offset*n}return this.internalPlacement.setTranslate(r,s),this._tagIterator++,this.internalPlacement}_preparePath(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();const i=e.isClosed();let r=0,s=!1,n=0,o=0;if(e.seekPathStart(),e.nextPoint()){let a=e.x,l=e.y,c=e.getControlPoint(),d=!0,h=e.nextPoint();for(;h;){const f=e.x,m=e.y,y=e.getControlPoint();(this._angleToLine||this._offset!==0)&&(n=this._curveHelper.getAngle(a,l,f,m,0)),d?(d=!1,i?(r=n,s=c):(this._endPoints||this._controlPoints&&c)&&this._tags.push([a,l,n])):c?this._controlPoints&&this._tags.push([a,l,Ck(o,n)]):this._regularVertices&&this._tags.push([a,l,Ck(o,n)]),(this._angleToLine||this._offset!==0)&&(o=this._curveHelper.getAngle(a,l,f,m,1)),h=e.nextPoint(),h||(i?y||s?this._controlPoints&&this._tags.push([f,m,Ck(o,r)]):this._regularVertices&&this._tags.push([f,m,Ck(o,r)]):(this._endPoints||this._controlPoints&&y)&&this._tags.push([f,m,o])),a=f,l=m,c=y}}this._tagIterator=0}};function Ck(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*ZYe;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}const XYe=100*222045e-21;function QYe(t){if(t.totalSize===0)return null;const e=x2(t);if(!e)return null;const i=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*XYe;let r=0,s=0;t.reset();for(let D=0;t.nextPath();D++){const F=t.getCurrentRingArea();F>s&&(s=F,r=D)}if(t.seekPath(r),t.pathSize===0)return null;t.seekPathStart();const n=Fre(t);if(Math.abs(s)<=2*i*i)return[(n[0]+n[2])/2,(n[1]+n[3])/2];t.seekPathStart();const o=VIe(t,zr());if(o===null)return null;if(t.totalPoints<4)return o;const a=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],l=[NaN,NaN,NaN,NaN],c=[NaN,NaN,NaN,NaN];let d=!1,h=P1(o,t,!0);h.distance===0&&(d=!0,a[0][0]=o[0],a[0][1]=o[1],h=P1(o,t,!1)),l[0]=h.distance,c[0]=0;const f=[NaN,NaN];let m=!1,y=.25,v=-1,b=NaN;do if(b=NaN,a[1]=CR(t,PR(n[0],n[2],y),i,e),isNaN(a[1][0])||isNaN(a[1][1])||(h=P1(a[1],t,!1),b=h.distance),!isNaN(b)&&b>i&&VE(a[1],t))m=!0,l[1]=b,c[1]=Um(a[1],o);else if(!isNaN(b)&&b>v&&(v=b,f[0]=a[1][0],f[1]=a[1][1]),y-=.01,y<.1){if(!(v>=0))break;m=!0,l[1]=v,a[1][0]=f[0],a[1][1]=f[1],c[1]=Um(a[1],o)}while(!m);m=!1,y=.5,v=-1;let w=.01,x=1;do if(b=NaN,a[2]=CR(t,PR(n[0],n[2],y),i,e),isNaN(a[2][0])||isNaN(a[2][1])||(h=P1(a[2],t,!1),b=h.distance),!isNaN(b)&&b>i&&VE(a[2],t))m=!0,l[2]=b,c[2]=Um(a[2],o);else if(!isNaN(b)&&b>v)v=b,f[0]=a[2][0],f[1]=a[2][1];else if(b>v&&(v=b,f[0]=a[2][0],f[1]=a[2][1]),y=.5+w*x,w+=.01,x*=-1,y<.3||y>.7){if(!(v>=0))break;m=!0,l[2]=v,a[2][0]=f[0],a[2][1]=f[1],c[2]=Um(a[2],o)}while(!m);m=!1,y=.75,v=-1;do if(b=NaN,a[3]=CR(t,PR(n[0],n[2],y),i,e),isNaN(a[3][0])||isNaN(a[3][1])||(h=P1(a[3],t,!1),b=h.distance),!isNaN(b)&&b>i&&VE(a[3],t))m=!0,l[3]=b,c[3]=Um(a[3],o);else if(b>v&&(v=b,f[0]=a[3][0],f[1]=a[3][1]),y+=.01,y>.9){if(!(v>=0))break;m=!0,l[3]=v,a[3][0]=f[0],a[3][1]=f[1],c[3]=Um(a[3],o)}while(!m);const S=[0,1,2,3],$=d?0:1;let T;for(let D=$;D<4;D++)for(let F=$;F<3;F++){const W=c[F],Z=c[F+1];iKe(W,Z)>0&&(T=S[F],S[F]=S[F+1],S[F+1]=T,c[F]=Z,c[F+1]=W)}let C=$,L=0,N=0;for(let D=$;D<4;D++){switch(D){case 0:N=2*l[S[D]];break;case 1:N=1.66666666*l[S[D]];break;case 2:N=1.33333333*l[S[D]];break;case 3:N=l[S[D]]}N>L&&(L=N,C=S[D])}return a[C]}function VE(t,e){let i,r,s,n,o=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(i=e.x,r=e.y;e.nextPoint();i=s,r=n)s=e.x,n=e.y,r>t[1]!=n>t[1]&&((s-i)*(t[1]-r)-(n-r)*(t[0]-i)>0?o++:o--);return o!==0}function P1(t,e,i){if(i&&VE(t,e))return{coord:t,distance:0};let r=1/0,s=0,n=0,o=[0,0],a=[0,0];const l=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(o[0]=e.x,o[1]=e.y;e.nextPoint();o=a){a=[e.x,e.y],Jre(l,t,o,a);const c=Um(t,l);c<r&&(r=c,s=l[0],n=l[1])}return{coord:[s,n],distance:Math.sqrt(r)}}function CR(t,e,i,r){const s=[e,0];let n=1/0,o=1/0,a=!1,l=!1;const c=[[e,r[1]-1],[e,r[3]+1]],d=[0,0],h=[0,0],f=[0,0],m=[[0,0],[0,0]],y=zr();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(m[0][0]=t.x,m[0][1]=t.y;t.nextPoint();m[0][0]=m[1][0],m[0][1]=m[1][1]){if(m[1][0]=t.x,m[1][1]=t.y,eKe(y,m)===null||(h[0]=c[0][0],h[1]=c[0][1],f[0]=c[1][0],f[1]=c[1][1],tKe(y,h,f)===0)||!XM(c[0],c[1],m[0],m[1],d))continue;const v=d[1];n>o?v<n&&(n=v,a=!0):v<o&&(o=v,l=!0)}return a&&l?s[1]=(n+o)/2:s[0]=s[1]=NaN,s}function eKe(t,e){if(e.length<2)return null;t||(t=zr());const[i,r]=e[0],[s,n]=e[1];return t[0]=Math.min(i,s),t[1]=Math.min(r,n),t[2]=Math.max(i,s),t[3]=Math.max(r,n),t}const Pk=1,Ak=4,CY=3,PY=12;function tKe(t,e,i){let r=pc(e,t),s=pc(i,t);const n=t[0],o=t[1],a=t[2],l=t[3];if(r&s)return 0;if(!(r|s))return 4;const c=(r?1:0)|(s?2:0);do{const d=i[0]-e[0],h=i[1]-e[1];if(d>h)r&CY?(r&Pk?(e[1]+=h*(n-e[0])/d,e[0]=n):(e[1]+=h*(a-e[0])/d,e[0]=a),r=pc(e,t)):s&CY?(s&Pk?(i[1]+=h*(n-i[0])/d,i[0]=n):(i[1]+=h*(a-i[0])/d,i[0]=a),s=pc(i,t)):r?(r&Ak?(e[0]+=d*(o-e[1])/h,e[1]=o):(e[0]+=d*(l-e[1])/h,e[1]=l),r=pc(e,t)):(s&Ak?(i[0]+=d*(o-i[1])/h,i[1]=o):(i[0]+=d*(l-i[1])/h,i[1]=l),s=pc(i,t));else if(r&PY?(r&Ak?(e[0]+=d*(o-e[1])/h,e[1]=o):(e[0]+=d*(l-e[1])/h,e[1]=l),r=pc(e,t)):s&PY?(s&Ak?(i[0]+=d*(o-i[1])/h,i[1]=o):(i[0]+=d*(l-i[1])/h,i[1]=l),s=pc(i,t)):r?(r&Pk?(e[1]+=h*(n-e[0])/d,e[0]=n):(e[1]+=h*(a-e[0])/d,e[0]=a),r=pc(e,t)):(s&Pk?(i[1]+=h*(n-i[0])/d,i[0]=n):(i[1]+=h*(a-i[0])/d,i[0]=a),s=pc(i,t)),r&s)return 0}while(r|s);return c}function pc(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function PR(t,e,i){return t+(e-t)*i}function Um(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function iKe(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const i=isNaN(t),r=isNaN(e);return i<r?-1:i>r?1:0}var gu;let rKe=(gu=class{static local(){return gu.instance===null&&(gu.instance=new gu),gu.instance}execute(e,i,r){return new sKe(e,i,r)}},gu.instance=null,gu),sKe=class{constructor(e,i,r){this._geometryCursor=e,this._offsetX=i.offsetX!==void 0?i.offsetX*r:0,this._offsetY=i.offsetY!==void 0?i.offsetY*r:0,this._method=i.method!==void 0?i.method:"OnPolygon",this._placementPerPart=i.placePerPart!==void 0&&i.placePerPart,this._internalPlacement=new U_}next(){const e=this._geometryCursor;if(!e)return null;if(!this._placementPerPart)return this._geometryCursor=null,this._polygonCenter(e);for(;e.nextPath();)if(!(e.getCurrentRingArea()<0))return this._polygonCenter(e.getCurrentPath());return this._geometryCursor=null,null}_polygonCenter(e){let i=!1;switch(this._method){case"CenterOfMass":{const r=GIe(e);r&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}break;case"BoundingBoxCenter":{const r=x2(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),i=!0)}break;default:{const r=QYe(e);r!==null&&(this._internalPlacement.setTranslate(r[0]+this._offsetX,r[1]+this._offsetY),i=!0)}}return i?this._internalPlacement:null}};function nKe(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return HZe.local();case"CIMGeometricEffectArrow":return YZe.local();case"CIMGeometricEffectBuffer":return XZe.local();case"CIMGeometricEffectControlMeasureLine":return eYe.local();case"CIMGeometricEffectCut":return iYe.local();case"CIMGeometricEffectDashes":return sYe.local();case"CIMGeometricEffectDonut":return oYe.local();case"CIMGeometricEffectJog":return pYe.local();case"CIMGeometricEffectMove":return mYe.local();case"CIMGeometricEffectOffset":return vYe.local();case"CIMGeometricEffectRadial":return _Ye.local();case"CIMGeometricEffectReverse":return SYe.local();case"CIMGeometricEffectRotate":return kYe.local();case"CIMGeometricEffectScale":return EYe.local();case"CIMGeometricEffectSuppress":return CYe.local();case"CIMGeometricEffectTaperedPolygon":return AYe.local();case"CIMGeometricEffectWave":return OYe.local();case"CIMGeometricEffectEnclosingPolygon":return lYe.local()}return null}function oKe(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return NYe.local();case"CIMMarkerPlacementAtExtremities":return FYe.local();case"CIMMarkerPlacementAtRatioPositions":return jYe.local();case"CIMMarkerPlacementInsidePolygon":return BYe.local();case"CIMMarkerPlacementOnLine":return WYe.local();case"CIMMarkerPlacementOnVertices":return YYe.local();case"CIMMarkerPlacementPolygonCenter":return rKe.local()}return null}function AR(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");return e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0),i}function Xu(t,e=0){if(e===0)return t;const i=Math.cos(e),r=Math.sin(e),[s,n]=t;return[s*i+n*-r,s*r+n*i]}function vfe(t,e,i=0){const r=bn(t,0,cKe);for(let s=0;s<4;s++)e[i+s]=Math.floor(256*uKe(r*aKe[s]))}function bfe(t,e=0){let i=0;for(let r=0;r<4;r++)i+=t[e+r]*lKe[r];return i}const aKe=[1,256,65536,16777216],lKe=[1/256,1/65536,1/16777216,1/4294967296],cKe=bfe(new Uint8ClampedArray([255,255,255,255]));bfe(new Uint8ClampedArray([255,255,255,0]));function uKe(t){return t-Math.floor(t)}const dKe=15.5,LR=4,hKe=64,g1t=1024,v1t={outlineWidth:.75,referenceWidth:.75,cap:Er.CIMSolidStroke.capstyle,join:Er.CIMSolidStroke.joinstyle,miterLimit:Er.CIMSolidStroke.miterlimit},AY=()=>X.getLogger("esri.symbols.cim.rasterizingUtils"),pKe=32,fKe=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function b1t(t,e,i){const r=e.style,s=_xe(Math.ceil(i)),n=fKe(r)?8*s:16*s,o=2*s;t.width=n,t.height=n;const a=t.getContext("2d");a.strokeStyle="#ffffff",a.lineWidth=s,a.beginPath(),r!=="vertical"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSVertical"||(a.moveTo(n/2,-o),a.lineTo(n/2,n+o)),r!=="horizontal"&&r!=="cross"&&r!=="esriSFSCross"&&r!=="esriSFSHorizontal"||(a.moveTo(-o,n/2),a.lineTo(n+o,n/2)),r!=="backward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"&&r!=="esriSFSBackwardDiagonal"||(a.moveTo(-o,-o),a.lineTo(n+o,n+o),a.moveTo(n-o,-o),a.lineTo(n+o,o),a.moveTo(-o,n-o),a.lineTo(o,n+o)),r!=="forward-diagonal"&&r!=="diagonal-cross"&&r!=="esriSFSForwardDiagonal"&&r!=="esriSFSDiagonalCross"||(a.moveTo(n+o,-o),a.lineTo(-o,n+o),a.moveTo(o,-o),a.lineTo(-o,o),a.moveTo(n+o,n-o),a.lineTo(n-o,n+o)),a.stroke();const l=a.getImageData(0,0,t.width,t.height),c=new Uint8Array(l.data);let d;for(let h=0;h<c.length;h+=4)d=c[h+3]/255,c[h]=c[h]*d,c[h+1]=c[h+1]*d,c[h+2]=c[h+2]*d;return[c,t.width,t.height,s]}function w1t(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce((h,f)=>h+f,0),i=Math.round(e*LR),r=1,s=new Float32Array(i*r);let n=0,o=0,a=.5,l=!0;for(const h of t){for(n=o,o+=h*LR;a<=o;){const f=a-.5,m=Math.min(Math.abs(a-n),Math.abs(a-o));s[f]=l?-m:m,a++}l=!l}const c=s.length,d=new Uint8Array(4*c);for(let h=0;h<c;++h){const f=s[h]/LR;vfe(f/hKe*.5+.5,d,4*h)}return[d,i,r]}function _1t(t,e){t==null&&(t=[]);const i=e==="Butt",r=e==="Square",s=!i&&!r;t.length%2==1&&(t=[...t,...t]);const n=dKe,o=2*n;let a=0;for(const w of t)a+=w;const l=Math.round(a*n),c=new Float32Array(l*o),d=.5*n;let h=0,f=0,m=.5,y=!0;for(const w of t){for(h=f,f+=w*n;m<=f;){let x=.5;for(;x<o;){const S=(x-.5)*l+m-.5,$=s?(x-n)*(x-n):Math.abs(x-n);c[S]=y?i?Math.max(Math.max(h+d-m,$),Math.max(m-f+d,$)):$:s?Math.min((m-h)*(m-h)+$,(m-f)*(m-f)+$):r?Math.min(Math.max(m-h,$),Math.max(f-m,$)):Math.min(Math.max(m-h+d,$),Math.max(f+d-m,$)),x++}m++}y=!y}const v=c.length,b=new Uint8Array(4*v);for(let w=0;w<v;++w){const x=(s?Math.sqrt(c[w]):c[w])/n;vfe(x,b,4*w)}return[b,l,o]}function x1t(t,e){const{colorRamp:i,gradientType:r}=e,s=i.type==="CIMFixedColorRamp",n=e.interval||Er.CIMGradientFill.interval;let o=x9(i);return s&&(o=wfe(o,n)),r==="Discrete"||s?yKe(t,o,n):mKe(t,o)}let OR;function Lk(t,e){const{colorRamp:i,gradientType:r}=e,s=x9(i),n=i.type==="CIMFixedColorRamp";if(r==="Continuous"&&!n)return UE(t,s);const o=e.interval??Er.CIMGradientFill.interval;if(n)return UE(t,wfe(s,o));const a=[];OR??(OR=document.createElement("canvas")),S9(OR,s,o,1,0);const l=OR.getContext("2d").getImageData(0,0,o,1).data;for(let c=0,d=0;c<o;c++,d=4*c){const h=[l[d+0],l[d+1],l[d+2],l[d+3]];a.push({offset:c/o,color:h}),a.push({offset:(c+1)/o,color:h})}return UE(t,a)}function x9(t){const e=[];switch(t.type){case"CIMPolarContinuousColorRamp":case"CIMLinearContinuousColorRamp":{t.type==="CIMPolarContinuousColorRamp"&&AY().warnOnce("CIMPolarContinuousColorRamp is currently unsupported. Falling back to CIMLinearContinuousColorRamp.");const i=t;e.push({offset:0,color:[i.fromColor[0],i.fromColor[1],i.fromColor[2],i.fromColor[3]/255]}),e.push({offset:1,color:[i.toColor[0],i.toColor[1],i.toColor[2],i.toColor[3]/255]});break}case"CIMFixedColorRamp":{const i=t,r=1/(i.colors.length-1);let s=0;for(const n of i.colors)e.push({offset:s,color:[n[0],n[1],n[2],n[3]/255]}),s+=r;break}case"CIMMultipartColorRamp":{const i=t,r=i.weights.reduce((n,o)=>n+o,0);let s=0;for(let n=0;n<i.colorRamps.length;n++){const o=i.colorRamps[n],a=i.weights[n],l=x9(o);for(const c of l)e.push({offset:(s+c.offset*a)/r,color:c.color});s+=a}break}default:AY().error(`Color ramp "${t.type}" currently unsupported.`)}return e}function wfe(t,e){const i=[],r=(t.length-1)/(e-1);for(let s=0;s<e;s++){const n=t[Math.round(s*r)].color;i.push({offset:s/e,color:n}),i.push({offset:(s+1)/e,color:n})}return i}function mKe(t,e){return S9(t,e,pKe,1,Oce),_fe(t)}function yKe(t,e,i){return S9(t,e,i,1,Oce),_fe(t)}function UE(t,e,i=0){for(const{offset:r,color:s}of e)t.addColorStop(Math.min(Math.max(r,i),1-i),`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${s[3]})`)}function S9(t,e,i,r,s){const n=i+2*s;t.width=n,t.height=r;const o=(s+1)/n,a=t.getContext("2d",{willReadFrequently:!0});if(e.length>0){const l=a.createLinearGradient(0,0,n,r);UE(l,e,o),a.fillStyle=l}else a.fillStyle="rgba(128, 128, 128, 1)";a.fillRect(0,0,n,r)}function _fe(t){const{width:e,height:i}=t,r=t.getContext("2d").getImageData(0,0,e,i),s=new Uint8Array(r.data);for(let n=0;n<s.length;n+=4){const o=s[n+3]/255;s[n]*=o,s[n+1]*=o,s[n+2]*=o}return[s,e,i]}function gKe(t){const e=t[0]?.[0]?.[0]??0,i=t[0]?.[0]?.[1]??0,r={ymin:i,xmin:e,ymax:i,xmax:e,width:0,height:0};for(let s=0;s<t.length;s++){const n=t[s];for(let o=0;o<n.length;o++){const a=n[o][0],l=n[o][1];a<r.xmin&&(r.xmin=a),a>r.xmax&&(r.xmax=a),l<r.ymin&&(r.ymin=l),l>r.ymax&&(r.ymax=l)}}return r.width=Math.abs(r.xmax-r.xmin),r.height=Math.abs(r.ymax-r.ymin),r}function XC(t,e){const i=gKe(t),r=i.width===0?1:i.width,s=i.height===0?1:i.height,n=[];for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){let d=Math.round(a[c][0]-i.xmin),h=Math.round(a[c][1]-i.ymin);if(d=e.xmin+d*e.width/r,h=e.ymin+h*e.height/s,isNaN(d)||isNaN(h))throw new Error("Scaled shape has NaN values");l.push([d,h])}n.push(l)}return n}function LY(t,e,i){const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=[];for(let a=0;a<n.length;a++){const l=n[a][0]+e,c=n[a][1]+i;if(isNaN(l)||isNaN(c))throw new Error("Scaled shape has NaN values");o.push([l,c])}r.push(o)}return r}let vKe=class xfe{constructor(e=0,i=0,r=0,s=0){this.x=e,this.y=i,this.width=r,this.height=s}static fromExtent(e){return new xfe(e.xmin,-e.ymax,e.xmax-e.xmin,e.ymax-e.ymin)}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}};function bKe(t){return`rgb(${t.slice(0,3).toString()})`}function Ok(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}let Sfe=class{constructor(e){e&&(this._textRasterizationCanvas=e)}rasterizeText(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,s=r.getContext("2d",{willReadFrequently:!0});A1(s,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:n,weight:o}=i.font;this._lineThroughWidthOffset=n&&n==="line-through"?.1*this._lineHeight:0;const a=i.backgroundColor!=null||i.borderLine!=null,l=a?JOe:0,c=this._computeTextWidth(s,i)+2*l,d=this._lineHeight*this._textLines.length+2*l;if(r.width=c+2*this._lineThroughWidthOffset,r.height=d,r.width===0||r.height===0)return r.width=r.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:r};this._renderedLineHeight=Math.round(this._lineHeight),this._renderedOutlineSize=(i.outline.size||0)*i.pixelRatio,this._renderedHaloSize=(i.halo.size||0)*i.pixelRatio,this._renderedWidth=c,this._renderedHeight=d,this._lineThroughWidthOffset*=i.pixelRatio;const h=(i.outline&&i.outline.color)??[0,0,0,0],f=i.color??[0,0,0,0],m=i.halo&&i.halo.color?i.halo.color:[0,0,0,0];this._fillStyle=Ok(f),this._outlineStyle=Ok(h),this._haloStyle=bKe(m);const y=this._renderedLineHeight,v=this._renderedOutlineSize,b=this._renderedHaloSize;s.save(),s.clearRect(0,0,r.width,r.height),A1(s,i);const w=l*i.pixelRatio,x=wKe(s.textAlign,this._renderedWidth-2*w,this._renderedHaloSize+this._renderedOutlineSize)+w,S=b+v+w,$=b>0;let T=this._lineThroughWidthOffset,C=0;if(a){s.save();const V=i.backgroundColor??[0,0,0,0],A=i.borderLine?.color??[0,0,0,0],q=2*(i.borderLine?.size??0);s.fillStyle=Ok(V),s.strokeStyle=Ok(A),s.lineWidth=q,s.fillRect(0,0,r.width,r.height),s.strokeRect(0,0,r.width,r.height),s.restore()}$&&this._renderHalo(s,x,S,T,C,i),v>0&&this._renderOutline(s,x,S,T,C,i),C+=S,T+=x;for(const V of this._textLines)$?(s.globalCompositeOperation="destination-out",s.fillStyle="rgb(0, 0, 0)",s.fillText(V,T,C),s.globalCompositeOperation="source-over",s.fillStyle=this._fillStyle,s.fillText(V,T,C)):(s.fillStyle=this._fillStyle,s.fillText(V,T,C)),n&&n!=="none"&&this._renderDecoration(s,T,C,n,o),C+=y;s.restore();const L=this._renderedWidth+2*this._lineThroughWidthOffset,N=this._renderedHeight,D=s.getImageData(0,0,L,N),F=new Uint8Array(D.data);if(i.premultiplyColors){let V;for(let A=0;A<F.length;A+=4)V=F[A+3]/255,F[A]=F[A]*V,F[A+1]=F[A+1]*V,F[A+2]=F[A+2]*V}let W,Z;switch(i.horizontalAlignment){case"left":W=-.5;break;case"right":W=.5;break;default:W=0}switch(i.verticalAlignment){case"bottom":Z=-.5;break;case"top":Z=.5;break;case"baseline":Z=-1/6;break;default:Z=0}return{size:[L,N],image:new Uint32Array(F.buffer),sdf:!1,simplePattern:!1,anchorX:W,anchorY:Z,canvas:r}}_renderHalo(e,i,r,s,n,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,d=c.getContext("2d");d.clearRect(0,0,a,l),A1(d,o);const{decoration:h,weight:f}=o.font;d.fillStyle=this._haloStyle,d.strokeStyle=this._haloStyle,d.lineJoin="round",this._renderOutlineNative(d,i,r,h,f,this._renderedHaloSize+this._renderedOutlineSize),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(c,0,0,a,l,s,n,a,l),e.globalAlpha=1}_renderOutline(e,i,r,s,n,o){const a=this._renderedWidth,l=this._renderedHeight;this._outlineRasterizationCanvas||(this._outlineRasterizationCanvas=document.createElement("canvas")),this._outlineRasterizationCanvas.width=a,this._outlineRasterizationCanvas.height=l;const c=this._outlineRasterizationCanvas,d=c.getContext("2d");d.clearRect(0,0,a,l),A1(d,o);const{decoration:h,weight:f}=o.font;d.fillStyle=this._outlineStyle,d.strokeStyle=this._outlineStyle,d.lineJoin="round",this._renderOutlineNative(d,i,r,h,f,this._renderedOutlineSize),e.globalAlpha=this._parameters.outline.color[3],e.drawImage(c,0,0,a,l,s,n,a,l),e.globalAlpha=1}_renderOutlineNative(e,i,r,s,n,o){const a=this._renderedLineHeight;for(const l of this._textLines){const c=2*o,d=5,h=.1;for(let f=0;f<d;f++){const m=(1-(d-1)*h+f*h)*c;e.lineWidth=m,e.strokeText(l,i,r),s&&s!=="none"&&this._renderDecoration(e,i,r,s,n,m)}r+=a}}computeTextSize(e,i){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const r=this._textRasterizationCanvas,s=r.getContext("2d");A1(s,i),this._parameters=i,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const n=this._computeTextWidth(s,i),o=this._lineHeight*this._textLines.length;return r.width=n,r.height=o,[n*i.pixelRatio,o*i.pixelRatio]}_computeTextWidth(e,i){let r=0;for(const n of this._textLines)r=Math.max(r,e.measureText(n).width);const s=i.font;return(s.style==="italic"||s.style==="oblique"||typeof s.weight=="string"&&(s.weight==="bold"||s.weight==="bolder")||typeof s.weight=="number"&&s.weight>600)&&(r+=.3*e.measureText("w").width),r+=2*zt(this._parameters.halo.size),Math.round(r)}_computeLineHeightBase(){return 1.275*this._parameters.size}_computeLineHeight(){let e=this._computeLineHeightBase();const i=this._parameters.font.decoration;return i&&i==="underline"&&(e*=1.3),Math.round(e+2*zt(this._parameters.halo.size))}_renderDecoration(e,i,r,s,n,o){let a=.9*this._lineHeight;const l=n==="bold"?.06:n==="bolder"?.09:.04;switch(e.textAlign){case"center":i-=this._renderedWidth/2;break;case"right":i-=this._renderedWidth}const c=e.textBaseline;if(s==="underline")switch(a=.9*this._computeLineHeightBase(),c){case"top":r+=a;break;case"middle":r+=a/2}else if(s==="line-through")switch(c){case"top":r+=a/1.5;break;case"middle":r+=a/3}const d=o?1.5*o:Math.ceil(a*l);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=d,e.moveTo(i-this._lineThroughWidthOffset,r),e.lineTo(i+this._renderedWidth+2*this._lineThroughWidthOffset,r),e.stroke(),e.restore()}};function A1(t,e){const i=Math.max(e.size,.5),r=e.font,s=`${r.style} ${r.weight} ${zt(i).toFixed(1)}px ${r.family}, sans-serif`;let n;switch(t.font=s,t.textBaseline="top",e.horizontalAlignment){case"left":default:n="left";break;case"right":n="right";break;case"center":n="center"}t.textAlign=n}function wKe(t,e,i){return t==="center"?.5*e:t==="right"?e-i:i}function $fe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function _Ke(){const t=$fe("svg");return t.setAttribute("style","position: absolute;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),document.body.appendChild(t),t}function xKe(t){return t!=null&&document.body.removeChild(t),null}const SKe=()=>X.getLogger("esri.views.2d.engine.webgl.alignmentUtils");function $Ke(t){if(!t)return 0;switch(t){case"Left":case"left":return-1;case"Right":case"right":return 1;case"Justify":return SKe().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),0;case"Center":case"center":return 0}}function IKe(t){if(!t)return 0;switch(t){case"Top":case"top":return 1;case"Center":case"middle":return 0;case"Baseline":case"baseline":return 2;case"Bottom":case"bottom":return-1}}function $1t(t){switch(t){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return["right","bottom"];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return["center","bottom"];case"above-right":case"esriServerPointLabelPlacementAboveRight":return["left","bottom"];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return["right","middle"];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return["center","middle"];case"center-right":case"esriServerPointLabelPlacementCenterRight":return["left","middle"];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return["right","top"];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return["center","top"];case"below-right":case"esriServerPointLabelPlacementBelowRight":return["left","top"];default:return console.debug(`Found invalid placement type ${t}`),["center","middle"]}}function I1t(t){switch(t){case 1:case"right":return-1;case 0:case"center":return 0;case-1:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function k1t(t){switch(t){case 1:case"top":return 1;case 0:case"middle":return 0;case-1:case 2:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}let kKe=class{constructor(e=0,i=0,r=0,s=0){this.x=e,this.y=i,this.width=r,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}},jx=class bj{constructor(e,i,r,s){this.transformedX=0,this.transformedY=0,this.center=bg(e,i),this.centerT=T$(),this.halfWidth=r/2,this.halfHeight=s/2,this.width=r,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new bj(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e,i=4){const r=Math.abs(e.centerT[0]-this.centerT[0]),s=Math.abs(e.centerT[1]-this.centerT[1]),n=(e.halfWidth+this.halfWidth+i)/r,o=(e.halfHeight+this.halfHeight+i)/s,a=Math.min(n,o);return Math.log2(a)}extend(e){const i=Math.min(this.xmin,e.xmin),r=Math.min(this.ymin,e.ymin),s=Math.max(this.xmax,e.xmax)-i,n=Math.max(this.ymax,e.ymax)-r,o=i+s/2,a=r+n/2;this.width=s,this.height=n,this.halfWidth=s/2,this.halfHeight=n/2,this.x=o,this.y=a}static deserialize(e){const i=e.readF32(),r=e.readF32(),s=e.readInt32(),n=e.readInt32();return new bj(i,r,s,n)}};const $9=22,Ife=4,TKe=$9+Ife,EKe=$9-6,OY=3,MKe=Math.PI/180,tp=8,CKe=1.5;let kfe=class{constructor(e,i,r,s){this._rotationT=dh(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const n=r.rect,o=new Float32Array(8);e*=s,i*=s;const a=r.code?n.width*s:r.metrics.width,l=r.code?n.height*s:r.metrics.height;this.width=a,this.height=l,o[0]=e,o[1]=i,o[2]=e+a,o[3]=i,o[4]=e,o[5]=i+l,o[6]=e+a,o[7]=i+l,this._data=o,this._setTextureCoords(n),this._scale=s,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+a,i+l)}get mosaic(){return this._mosaic}set angle(e){this._angle=e,k3(this._rotationT,-e),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:e,width:i}=this._mosaic.metrics,r=i*this._scale,s=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+r,n[3]=this.y,n[4]=this.x,n[5]=this.y+s,n[6]=this.x+r,n[7]=this.y+s;const o=qc(dh(),this._rotationT,this._transform);ice(n,n,o);let a=1/0,l=1/0,c=-1/0,d=-1/0;for(let v=0;v<4;v++){const b=n[2*v],w=n[2*v+1];a=Math.min(a,b),l=Math.min(l,w),c=Math.max(c,b),d=Math.max(d,w)}const h=c-a,f=d-l,m=a+h/2,y=l+f/2;this._bounds=new jx(m,y,h,f)}return this._bounds}setTransform(e){this._transform=e,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const e=qc(dh(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],un(this._offsets.topLeft,this._offsets.topLeft,e),un(this._offsets.topRight,this._offsets.topRight,e),un(this._offsets.bottomLeft,this._offsets.bottomLeft,e),un(this._offsets.bottomRight,this._offsets.bottomRight,e)}_setTextureCoords({x:e,y:i,width:r,height:s}){this._texcoords={topLeft:[e,i],topRight:[e+r,i],bottomLeft:[e,i+s],bottomRight:[e+r,i+s]}}};const PKe=(t,e)=>({code:0,page:0,sdf:!0,rect:new kKe(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function L1(t,e){return t.forEach(i=>un(i,i,e)),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}let AKe=class{constructor(e,i,r){this._rotation=0,this._decorate(e,i,r),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=r.angle!==0,this._transform=this._createGlyphTransform(this.bounds,r),this._borderLineSizePx=r.borderLineSizePx,(r.borderLineSizePx||r.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const s of e)s.setTransform(this._transform)}setRotation(e){if(e===0&&this._rotation===0)return;this._rotation=e;const i=this._transform,r=k3(dh(),e);qc(i,r,i);for(const s of this.glyphs)s.setTransform(this._transform)}_decorate(e,i,r){if(!r.decoration||r.decoration==="none"||!e.length)return;const s=r.scale,n=r.decoration==="underline"?TKe:EKe,o=e[0].textureBinding;for(const a of i){const l=a.startX*s,c=a.startY*s,d=(a.width+a.glyphWidthEnd)*s;e.push(new kfe(l,c+n*s,PKe(d,o),1))}}shapeBackground(e){const i=this._borderLineSizePx||0,r=(CKe+i)/2,s=this._borderLineSizePx?r:0,{xmin:n,ymin:o,xmax:a,ymax:l,x:c,y:d,width:h,height:f}=this.bounds,m=[n-tp,o-tp],y=[a+tp,o-tp],v=[n-tp,l+tp],b=[a+tp,l+tp],w=L1([[m[0]-r,m[1]-r],[y[0]+r,y[1]-r],[m[0]+s,m[1]+s],[y[0]-s,y[1]+s]],e),x=L1([[v[0]+s,v[1]-s],[b[0]-s,b[1]-s],[v[0]-r,v[1]+r],[b[0]+r,b[1]+r]],e),S=L1([[m[0]-r,m[1]-r],[m[0]+s,m[1]+s],[v[0]-r,v[1]+r],[v[0]+s,v[1]-s]],e),$=L1([[y[0]-s,y[1]+s],[y[0]+r,y[1]-r],[b[0]-s,b[1]-s],[b[0]+r,b[1]+r]],e),T={main:L1([m,y,v,b],e),top:w,bot:x,left:S,right:$};return[new jx(c,d,h+2*r,f+2*r),T]}get boundsT(){const e=this.bounds,i=$r(T$(),e.x,e.y);if(un(i,i,this._transform),this._hasRotation){const r=Math.max(e.width,e.height);return new jx(i[0],i[1],r,r)}return new jx(i[0],i[1],e.width,e.height)}_createBounds(e){let i=1/0,r=1/0,s=0,n=0;for(const l of e)i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),s=Math.max(s,l.xBottomRight),n=Math.max(n,l.yBottomRight);const o=s-i,a=n-r;return new jx(i+o/2,r+a/2,o,a)}_createGlyphTransform(e,i){const r=MKe*i.angle,s=dh(),n=T$();return Eu(s,s,$r(n,i.xOffset,-i.yOffset)),i.useCIMAngleBehavior?kf(s,s,r):(Eu(s,s,$r(n,e.x,e.y)),kf(s,s,r),Eu(s,s,$r(n,-e.x,-e.y))),s}},Rk=class{constructor(e,i,r,s,n,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=s,this.yMin=n,this.yMax=o}};const wj=t=>t===10,RY=t=>t===32;function LKe(t,e,i){const r=new Array,s=1/i.scale,n=i.maxLineWidth*s,o=e?t.length-1:0,a=e?-1:t.length,l=e?-1:1;let c=o,d=0,h=0,f=c,m=f,y=0,v=1/0,b=0;for(;c!==a;){const{code:x,metrics:S}=t[c],$=Math.abs(S.top);if(wj(x)||RY(x)||(v=Math.min(v,$),b=Math.max(b,$+S.height)),wj(x))c!==o&&(r.push(new Rk(t,f,c-l,d,v===1/0?0:v,b)),v=1/0,b=0),d=0,f=c+l,m=c+l,h=0;else if(RY(x))m=c+l,h=0,y=S.advance,d+=S.advance;else if(d>n){if(m!==f){const T=m-2*l;d-=y,r.push(new Rk(t,f,T,d-h,v,b)),v=1/0,b=0,f=m,d=h}else r.push(new Rk(t,f,c-l,d,v,b)),v=1/0,b=0,f=c,m=c,d=0;d+=S.advance,h+=S.advance}else d+=S.advance,h+=S.advance;c+=l}const w=new Rk(t,f,c-l,d,v,b);return w.start>=0&&w.end<t.length&&r.push(w),r}function OKe(t,e){let i=0;for(let n=0;n<t.length;n++){const{width:o}=t[n];i=Math.max(o,i)}const r=e.decoration==="underline"?Ife:0,s=t[0].yMin;return{x:0,y:s,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+r-s,width:i}}function Tfe(t,e){const i=e.scale,r=new Array,{glyphs:s,isRightToLeft:n}=t,o=LKe(s,n,e),a=o.length?OKe(o,e):{y:0,height:0},l=$Ke(e.horizontalAlignment),c=IKe(e.verticalAlignment),d=c===2?1:0,h=d?0:c-1,f=(1-d)*-a.y+h*(a.height/2)+(d?1:0)*-$9;for(let m=0;m<o.length;m++){const{start:y,end:v,width:b}=o[m];let w=-1*(l+1)*(b/2)-OY;const x=(t.isRightToLeft?o.length-1-m:m)*e.lineHeight+f-OY;o[m].startX=w,o[m].startY=x;for(let S=y;S<=v;S++){const $=s[S];if(wj($.code))continue;const T=new kfe(w+$.metrics.left,x-$.metrics.top,$,i);w+=$.metrics.advance,r.push(T)}}return new AKe(r,o,e)}const P1t=50;function A1t(t){if(!t)return null;const{xmin:e,ymin:i,xmax:r,ymax:s,spatialReference:n}=t;return new vi({rings:[[[e,i],[e,s],[r,s],[r,i],[e,i]]],spatialReference:n})}function Efe(t){return Zt(Math.round(zt(t)))}function Mfe(t){const e=Zt(vze),i=Zt(bze);return Math.max(e,Math.min(t||i,i))}const ty=Math.PI/180,Cfe=.5,Vx=()=>X.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");let Cp=class Cc{constructor(e){this._t=e}static createIdentity(){return new Cc([1,0,0,0,1,0])}clone(){const e=this._t;return new Cc(e.slice())}transform(e){const i=this._t;return[i[0]*e[0]+i[1]*e[1]+i[2],i[3]*e[0]+i[4]*e[1]+i[5]]}static createScale(e,i){return new Cc([e,0,0,0,i,0])}scale(e,i){const r=this._t;return r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=i,r[4]*=i,r[5]*=i,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(e,i){return new Cc([0,0,e,0,0,i])}translate(e,i){const r=this._t;return r[2]+=e,r[5]+=i,this}static createRotate(e){const i=Math.cos(e),r=Math.sin(e);return new Cc([i,-r,0,r,i,0])}rotate(e){return Cc.multiply(this,Cc.createRotate(e),this)}angle(){const e=this._t[0],i=this._t[3],r=Math.sqrt(e*e+i*i);return[e/r,i/r]}static multiply(e,i,r){const s=e._t,n=i._t,o=s[0]*n[0]+s[3]*n[1],a=s[1]*n[0]+s[4]*n[1],l=s[2]*n[0]+s[5]*n[1]+n[2],c=s[0]*n[3]+s[3]*n[4],d=s[1]*n[3]+s[4]*n[4],h=s[2]*n[3]+s[5]*n[4]+n[5],f=r._t;return f[0]=o,f[1]=a,f[2]=l,f[3]=c,f[4]=d,f[5]=h,r}invert(){const e=this._t;let i=e[0]*e[4]-e[1]*e[3];if(i===0)return new Cc([0,0,0,0,0,0]);i=1/i;const r=(e[1]*e[5]-e[2]*e[4])*i,s=(e[2]*e[3]-e[0]*e[5])*i,n=e[4]*i,o=-e[1]*i,a=-e[3]*i,l=e[0]*i;return new Cc([n,o,r,a,l,s])}},I9=class{constructor(e,i){this._resourceManager=e,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new Nf(()=>new U_,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||Cp.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}setTransform(e,i){this._transfos=[e||Cp.createIdentity()],this._sizeTransfos=[i||(e?e.scaleRatio():1)]}setGeomUnitsPerPoint(e){this._geomUnitsPerPoint=e}transformPt(e){return this._transfos[this._transfos.length-1].transform(e)}transformSize(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(e){return this._transfos[this._transfos.length-1].invert().transform(e)}reverseTransformSize(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformScalar(e){return e/this._transfos[this._transfos.length-1].scaleRatio()}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}prevGeomUnitsPerPoint(){return this._transfos.length>2?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(e,i){const r=i?e.scaleRatio():1;Cp.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(e,i,r){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,i);break;case"CIMTextSymbol":this.drawTextSymbol(e,i,r)}}drawMultiLayerSymbol(e,i){if(!e||!i)return;const r=e.symbolLayers;if(!r)return;const s=e.effects;if(s&&s.length>0){const n=this.executeEffects(s,i);if(n){let o=n.next();for(;o;)this.drawSymbolLayers(r,o.asJSON()),o=n.next()}}else this.drawSymbolLayers(r,i)}executeEffects(e,i){let r=new zZe(Yt.fromJSONCIM(i));for(const s of e){const n=nKe(s);n&&(r=n.execute(r,s,this.geomUnitsPerPoint(),null))}return r}drawSymbolLayers(e,i){let r=e.length;for(;r--;){const s=e[r];if(!s||s.enable===!1)continue;const n=s.effects;if(n&&n.length>0){const o=this.executeEffects(n,i);if(o){let a=null;for(;(a=o.next())&&(this.drawSymbolLayer(s,a.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(s,i);if(this._earlyReturn)return}}drawSymbolLayer(e,i){switch(e.type){case"CIMSolidFill":this.drawSolidFill(i,e.color,e.path);break;case"CIMHatchFill":this.drawHatchFill(i,e);break;case"CIMPictureFill":this.drawPictureFill(i,e);break;case"CIMGradientFill":this.drawGradientFill(i,e);break;case"CIMSolidStroke":this.drawSolidStroke(i,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit,e.path);break;case"CIMPictureStroke":this.drawPictureStroke(i,e);break;case"CIMGradientStroke":this.drawGradientStroke(i,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,i)}}drawHatchFill(e,i){const r=NKe(i,e,this.geomUnitsPerPoint());r&&(this.pushClipPath(e),this.drawMultiLayerSymbol(i.lineSymbol,r),this.popClipPath())}drawPictureFill(e,i){}drawGradientFill(e,i){}drawPictureStroke(e,i){}drawGradientStroke(e,i){}drawMarkerLayer(e,i){const r=e.markerPlacement;if(r){const s=oKe(r);if(s){const n=r.type==="CIMMarkerPlacementInsidePolygon"||r.type==="CIMMarkerPlacementPolygonCenter"&&r.clipAtBoundary;n&&this.pushClipPath(i);const o=s.execute(Yt.fromJSONCIM(i),r,this.geomUnitsPerPoint(),null);if(o){let a=null;for(;(a=o.next())&&(this.drawMarker(e,a),!this._earlyReturn););}n&&this.popClipPath()}}else{const s=this._placementPool.acquire();if(Rw(i))s.tx=i.x,s.ty=i.y,this.drawMarker(e,s);else if(or(i)){const n=Xre(i);n&&([s.tx,s.ty]=n,this.drawMarker(e,s))}else if(xs(i)){for(const n of i.paths)for(const o of n)if(s.tx=o[0],s.ty=o[1],this.drawMarker(e,s),this._earlyReturn)break}else for(const n of i.points)if(s.tx=n[0],s.ty=n[1],this.drawMarker(e,s),this._earlyReturn)break;this._placementPool.release(s)}}drawMarker(e,i){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,i);break;case"CIMVectorMarker":this.drawVectorMarker(e,i)}}drawPictureMarker(e,i){if(!e)return;const r=this._resourceManager.getResource(e.url),s=Je(e.size,Er.CIMPictureMarker.size);if(r==null||s<=0)return;const n=r.width,o=r.height;if(!n||!o)return;const a=n/o,l=Je(e.scaleX,1),c=Cp.createIdentity(),d=e.anchorPoint;if(d){let b=d.x,w=d.y;e.anchorPointUnits!=="Absolute"&&(b*=s*a*l,w*=s),c.translate(-b,-w)}let h=Je(e.rotation);e.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&c.rotate(h*ty);let f=Je(e.offsetX),m=Je(e.offsetY);if(f||m){if(this._mapRotation){const b=ty*this._mapRotation,w=Math.cos(b),x=Math.sin(b),S=f*x+m*w;f=f*w-m*x,m=S}c.translate(f,m)}const y=this.geomUnitsPerPoint();y!==1&&c.scale(y,y);const v=i.getAngle();v&&c.rotate(v),c.translate(i.tx,i.ty),this.push(c,!1),this.drawImage(e,s),this.pop()}drawVectorMarker(e,i){if(!e)return;const r=e.markerGraphics;if(!r)return;const s=Je(e.size,Er.CIMVectorMarker.size),n=e.frame,o=n?n.ymax-n.ymin:0,a=s&&o?s/o:1,l=Cp.createIdentity();n&&l.translate(.5*-(n.xmax+n.xmin),.5*-(n.ymax+n.ymin));const c=e.anchorPoint;if(c){let v=c.x,b=c.y;e.anchorPointUnits!=="Absolute"?n&&(v*=n.xmax-n.xmin,b*=n.ymax-n.ymin):(v/=a,b/=a),l.translate(-v,-b)}a!==1&&l.scale(a,a);let d=Je(e.rotation);e.rotateClockwise&&(d=-d),this._mapRotation&&(d+=this._mapRotation),d&&l.rotate(d*ty);let h=Je(e.offsetX),f=Je(e.offsetY);if(h||f){if(this._mapRotation){const v=ty*this._mapRotation,b=Math.cos(v),w=Math.sin(v),x=h*w+f*b;h=h*b-f*w,f=x}l.translate(h,f)}const m=this.geomUnitsPerPoint();m!==1&&l.scale(m,m);const y=i.getAngle();y&&l.rotate(y),l.translate(i.tx,i.ty),this.push(l,e.scaleSymbolsProportionally);for(const v of r){v?.symbol&&v.geometry||Vx().error("Invalid marker graphic",v);let b=v.textString;if(typeof b=="number"&&(b=b.toString()),this.drawSymbol(v.symbol,v.geometry,b),this._earlyReturn)break}this.pop()}drawTextSymbol(e,i,r){if(!e||!Rw(i)||Je(e.height,Er.CIMTextSymbol.height)<=0)return;const s=Cp.createIdentity();let n=Je(e.angle);n=-n,n&&s.rotate(n*ty);const o=Je(e.offsetX),a=Je(e.offsetY);(o||a)&&s.translate(o,a);const l=this.geomUnitsPerPoint();l!==1&&s.scale(l,l),s.translate(i.x,i.y),this.push(s,!1),this.drawText(e,r),this.pop()}},RKe=class extends I9{constructor(e,i){super(e,i),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new vKe(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return HA(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(e){if(e&&!(this._clipCount>0))if(or(e))this._processPath(e.rings,0);else if(xs(e))this._processPath(e.paths,0);else if(Nn(e)){const i=Dd(e);i&&this._processPath(i.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(e,i,r){if(!e||this._clipCount>0||r==null||r<=0)return;const s=Math.max(.5*this.transformSize(Je(r,Er.CIMSolidStroke.width)),.5*Cfe);if(or(e))this._processPath(e.rings,s);else if(xs(e))this._processPath(e.paths,s);else if(Nn(e)){const n=Dd(e);n&&this._processPath(n.rings,s)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(e,i){or(i)&&e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._processPath(i.rings,0):super.drawMarkerLayer(e,i)}drawHatchFill(e,i){this.drawSolidFill(e)}drawPictureFill(e,i){this.drawSolidFill(e)}drawGradientFill(e,i){this.drawSolidFill(e)}drawPictureStroke(e,i){this.drawSolidStroke(e,null,i.width)}drawGradientStroke(e,i){this.drawSolidStroke(e,null,i.width)}pushClipPath(e){this.drawSolidFill(e),this._clipCount++}popClipPath(){this._clipCount--}drawImage(e,i){const{url:r}=e,s=Je(e.scaleX,1);let n=s*i,o=i;const a=this._resourceManager.getResource(r);if(a!=null){const l=a.height/a.width;n=s*(i?l>1?i:i/l:a.width),o=i?l>1?i*l:i:a.height}this._merge(this.transformPt([-n/2,-o/2]),0),this._merge(this.transformPt([-n/2,o/2]),0),this._merge(this.transformPt([n/2,-o/2]),0),this._merge(this.transformPt([n/2,o/2]),0)}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new Sfe);const r=Lfe(e);let[s,n]=this._textRasterizer.computeTextSize(i,r);s=Zt(s),n=Zt(n);const o=this.transformSize(1)*this.reverseTransformScalar(1);s*=o,n*=o;let a=0;switch(e.horizontalAlignment){case"Left":a=s/2;break;case"Right":a=-s/2}let l=0;switch(e.verticalAlignment){case"Bottom":l=n/2;break;case"Top":l=-n/2;break;case"Baseline":l=n/6}this._merge(this.transformPt([-s/2+a,-n/2+l]),0),this._merge(this.transformPt([-s/2+a,n/2+l]),0),this._merge(this.transformPt([s/2+a,-n/2+l]),0),this._merge(this.transformPt([s/2+a,n/2+l]),0)}_processPath(e,i){if(e)for(const r of e){const s=r?r.length:0;if(s>1){this._merge(this.transformPt(r[0]),i);for(let n=1;n<s;n++)this._merge(this.transformPt(r[n]),i)}}}_merge(e,i){e[0]-i<this._xmin&&(this._xmin=e[0]-i),e[0]+i>this._xmax&&(this._xmax=e[0]+i),e[1]-i<this._ymin&&(this._ymin=e[1]-i),e[1]+i>this._ymax&&(this._ymax=e[1]+i)}},R1t=class extends I9{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null,this._svg=null,this._path=null,this._canvas=null}destroy(){this._svg=xKe(this._svg),this._path=null,this._canvas=null}hitTest(e,i,r,s,n,o){const a=o*zt(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/a,this._textInfo=s;const l=i&&(i.type==="CIMPointSymbol"&&i.angleAlignment!=="Map"||i.type==="CIMTextSymbol");if(this._mapRotation=l?n:0,!H("esri-mobile")){const c=Zt(pze*window.devicePixelRatio),d=Zt(fze);!((i?.type==="CIMLineSymbol"||i?.type==="CIMPolygonSymbol")&&i.symbolLayers?.some(C9e))&&i?.type!=="CIMMeshSymbol"&&(V9e(i)??0)<d&&(this._searchDistPoint=c)}return this._earlyReturn=!1,this.drawSymbol(i,r),this._earlyReturn}executeEffects(e,i){return e.at(-1)?.type==="CIMGeometricEffectDashes"&&(e=e.slice(0,-1)),super.executeEffects(e,i)}drawSolidFill(e,i,r){r!=null?this._hittestSvgPath(e,r,!0):this._hitTestFill(e)}drawHatchFill(e,i){this._hitTestFill(e)}drawPictureFill(e,i){this._hitTestFill(e)}drawGradientFill(e,i){this._hitTestFill(e)}drawSolidStroke(e,i,r,s,n,o,a){a!=null?this._hittestSvgPath(e,a,!1,r):this._hitTestStroke(e,r)}drawPictureStroke(e,i){this._hitTestStroke(e,i.width)}drawGradientStroke(e,i){this._hitTestStroke(e,i.width)}drawMarkerLayer(e,i){e.markerPlacement&&(e.markerPlacement.type==="CIMMarkerPlacementInsidePolygon"||e.markerPlacement.type==="CIMMarkerPlacementPolygonCenter"&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(i):super.drawMarkerLayer(e,i)}pushClipPath(e){}popClipPath(){}drawImage(e,i){const{url:r}=e,s=Je(e.scaleX,1),n=this._resourceManager.getResource(r);if(n==null||n.height===0||i===0)return;const o=i*this.geomUnitsPerPoint(),a=o*s*(n.width/n.height),l=this.reverseTransformPt(this._searchPoint),c=this._searchDistPoint;Math.abs(l[0])<a/2+c&&Math.abs(l[1])<o/2+c&&(this._earlyReturn=!0)}drawText(e,i){const r=this._textInfo;if(!r)return;const s=r.get(e);if(!s||!s.glyphMosaicItems.glyphs.length)return;const n=Efe(Je(e.height,Er.CIMTextSymbol.height)),{lineGapType:o,lineGap:a}=e,l=o?Afe(o,Je(a),n):0,c=e.callout?.type==="CIMBackgroundCallout",d=Tfe(s.glyphMosaicItems,{scale:n/Ace,angle:0,xOffset:0,yOffset:0,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,maxLineWidth:Mfe(e.lineWidth),lineHeight:Pce*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}),h=this.reverseTransformPt(this._searchPoint),f=h[0],m=h[1];for(const y of d.glyphs)if(f>y.xTopLeft&&f<y.xBottomRight&&m>-y.yBottomRight&&m<-y.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(e){let i=null;if(Nn(e)){const s=e;i=[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}else if(or(e))i=e.rings;else{if(!xs(e))return;i=e.paths}const r=this.reverseTransformPt(this._searchPoint);DKe(r,i)&&(this._earlyReturn=!0),!this._earlyReturn&&NY(r,i,this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}_getSvgPath(){return this._svg!=null&&this._path!=null||(this._svg??(this._svg=_Ke()),this._path??(this._path=$fe("path")),this._svg.appendChild(this._path)),this._path}_getCanvasContext(e,i){return this._canvas??(this._canvas=document.createElement("canvas")),this._canvas.width=e,this._canvas.height=i,this._canvas.getContext("2d",{willReadFrequently:!0})}_hittestSvgPath(e,i,r,s=0){const n=this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint(),o=this.reverseTransformPt(this._searchPoint),a=zr();e6(a,e);const l={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]},c=this._getSvgPath();c.setAttribute("d",i);const d=c.getBBox();let h=Math.max(d.width/l.width,d.height/l.height),f=1;const m=2*n*h;m<1&&(f=2/m,h*=f,d.x*=f,d.y*=f,d.width*=f,d.height*=f);const y=1+s*h/2,v=this._getCanvasContext(d.width+2*y,d.height+2*y);v.setTransform(f,0,0,f,-d.x+y,-d.y+y);const b=new Path2D(i);r?v.fill(b):(v.lineWidth=s*(h/f),v.stroke(b));const w=(l.width*h-d.width)/2,x=(l.height*h-d.height)/2,S=Math.floor((o[0]-l.x-n)*h-w+y),$=Math.floor((l.height-(o[1]-l.y)-n)*h+x+y),T=Math.ceil(2*n*h),C=Math.ceil(2*n*h),L=v.getImageData(S,$,T,C).data;for(let N=3;N<L.length;N+=4)if(L[N]>127.5)return void(this._earlyReturn=!0)}_hitTestStroke(e,i){let r=null;if(Nn(e)){const s=e;r=[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}else if(or(e))r=e.rings;else{if(!xs(e))return;r=e.paths}NY(this.reverseTransformPt(this._searchPoint),r,Je(i,Er.CIMSolidStroke.width)*this.geomUnitsPerPoint()/2+this.reverseTransformScalar(this._searchDistPoint)*this.prevGeomUnitsPerPoint())&&(this._earlyReturn=!0)}},Pfe=class extends I9{constructor(e,i,r,s){super(i,r),this._applyAdditionalRenderProps=s,this._colorSubstitutionHelper=new GZe,this._ctx=e}drawSolidFill(e,i){if(!e)return;if(or(e))this._buildPath(e.rings,!0);else if(xs(e))this._buildPath(e.paths,!0);else if(Nn(e))this._buildPath(Dd(e).rings,!0);else{if(!Sy(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(e,i,r,s,n,o){if(!e||!i||r===0)return;if(or(e))this._buildPath(e.rings,!0);else if(xs(e))this._buildPath(e.paths,!1);else{if(!Nn(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(Dd(e).rings,!0)}const a=this._ctx;a.strokeStyle=typeof i=="string"?i:"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+(i[3]??255)/255+")",a.lineWidth=Math.max(this.transformSize(r),Cfe),this._setCapStyle(s),this._setJoinStyle(n),a.miterLimit=o,a.stroke()}pushClipPath(e){if(this._ctx.save(),or(e))this._buildPath(e.rings,!0);else if(xs(e))this._buildPath(e.paths,!0);else{if(!Nn(e))return;this._buildPath(Dd(e).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(e,i){const{colorSubstitutions:r,url:s,tintColor:n}=e,o=Je(e.scaleX,1),a=this._resourceManager.getResource(s);if(a==null)return;let l=i*(a.width/a.height),c=i;i||(l=a.width,c=a.height);const d=yv(s)||"src"in a&&yv(a.src);let h="getFrame"in a?AR(a):a;r&&(h=this._colorSubstitutionHelper.applyColorSubstitution(h,r)),this._applyAdditionalRenderProps&&!d&&n&&(h=this._colorSubstitutionHelper.tintImageData(h,n));const f=this.transformPt([0,0]),[m,y]=this.getTransformAngle(),v=this.transformSize(1),b=this._ctx;b.save(),b.setTransform({m11:o*v*m,m12:o*v*y,m21:-v*y,m22:v*m,m41:f[0],m42:f[1]}),b.drawImage(h,-l/2,-c/2,l,c),b.restore()}drawText(e,i){if(!i||i.length===0)return;this._textRasterizer||(this._textRasterizer=new Sfe);const r=Lfe(e,this.transformSize(Zt(1))),s=this._textRasterizer.rasterizeText(i,r);if(!s)return;const{size:n,anchorX:o,anchorY:a,canvas:l}=s,c=n[0]*(o+.5),d=n[1]*(a-.5),h=this._ctx,f=this.transformPt([0,0]),[m,y]=this.getTransformAngle(),v=1;h.save(),h.setTransform({m11:v*m,m12:v*y,m21:-v*y,m22:v*m,m41:f[0]-v*c,m42:f[1]+v*d}),h.drawImage(l,0,0),h.restore()}drawPictureFill(e,i){if(!e)return;let{colorSubstitutions:r,height:s,offsetX:n,offsetY:o,rotation:a,scaleX:l,tintColor:c,url:d}=i;const h=this._resourceManager.getResource(d);if(h==null)return;if(or(e))this._buildPath(e.rings,!0);else if(xs(e))this._buildPath(e.paths,!0);else if(Nn(e))this._buildPath(Dd(e).rings,!0);else{if(!Sy(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const f=this._ctx,m=yv(d)||"src"in h&&yv(h.src);let y,v="getFrame"in h?AR(h):h;if(r&&(v=this._colorSubstitutionHelper.applyColorSubstitution(v,r)),this._applyAdditionalRenderProps){m||c&&(v=this._colorSubstitutionHelper.tintImageData(v,c)),y=f.createPattern(v,"repeat");const b=this.transformSize(1);a||(a=0),n?n*=b:n=0,o?o*=b:o=0,s&&(s*=b);const w=s?s/h.height:1,x=l&&s?l*s/h.width:1;if(a!==0||w!==1||x!==1||n!==0||o!==0){const S=new DOMMatrix;S.rotateSelf(0,0,-a).translateSelf(n,o).scaleSelf(x,w,1),y.setTransform(S)}}else y=f.createPattern(v,"repeat");f.save(),f.fillStyle=y,f.fill("evenodd"),f.restore()}drawPictureStroke(e,i){if(!e)return;let{colorSubstitutions:r,capStyle:s,joinStyle:n,miterLimit:o,tintColor:a,url:l,width:c}=i;const d=this._resourceManager.getResource(l);if(d==null)return;let h;if(or(e))h=e.rings;else if(xs(e))h=e.paths;else{if(!Nn(e))return Sy(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;h=Dd(e).rings}c||(c=d.width);const f=yv(l)||"src"in d&&yv(d.src);let m="getFrame"in d?AR(d):d;r&&(m=this._colorSubstitutionHelper.applyColorSubstitution(m,r)),this._applyAdditionalRenderProps&&(f||a&&(m=this._colorSubstitutionHelper.tintImageData(m,a)));const y=Math.max(this.transformSize(zt(c)),.5),v=y/m.width,b=this._ctx,w=b.createPattern(m,"repeat-y");let x,S;b.save(),this._setCapStyle(s),this._setJoinStyle(n),o!==void 0&&(b.miterLimit=o),b.lineWidth=y;for(let $ of h)if($=U($),DY($),$&&!($.length<=1)){x=this.transformPt($[0]);for(let T=1;T<$.length;T++){S=this.transformPt($[T]);const C=FKe(x,S),L=new DOMMatrix;L.translateSelf(0,x[1]-y/2).scaleSelf(v,v,1).rotateSelf(0,0,90-C),w.setTransform(L),b.strokeStyle=w,b.beginPath(),b.moveTo(x[0],x[1]),b.lineTo(S[0],S[1]),b.stroke(),x=S}}b.restore()}drawGradientFill(e,i){if(!e)return;let r;if(or(e))r=e.rings;else if(xs(e))r=e.paths;else{if(!Nn(e))return void Vx().error("Unable to draw gradient fill");r=Dd(e).rings}this._buildPath(r,!0);const{angle:s,gradientMethod:n,gradientSize:o,gradientSizeUnits:a}=i,l=Er.CIMGradientFill,c=i.gradientType??l.gradientType,d=-x_(s??0),h=u2e();for(const w of r){const x=w?w.length:0;if(x>1)for(let S=0;S<x;S++){let $=this.transformPt(w[S]);n!=="Linear"&&n!=="Rectangular"||($=Xu($,-d)),Bs(h,$)}}const[f,m,y,v]=h,b=this._ctx;switch(b.save(),n){case"Buffered":Vx().error(`Gradient method "${n}" currently unsupported.`);break;case"Linear":{const w=(m+v)/2,x=a==="Absolute"?this.transformSize(zt(o)):$1(o,l.gradientSize)*(y-f),[S,$]=c==="Discrete"?[y,y-x]:[f+x,f],T=Xu([S,w],d),C=Xu([$,w],d),L=b.createLinearGradient(T[0],T[1],C[0],C[1]);Lk(L,i),b.fillStyle=L,b.fill("evenodd");break}case"Circular":{const w=kq(h),x=l2e(h)/2,S=a==="Absolute"?this.transformSize(zt(o)):$1(o,l.gradientSize)*x,[$,T]=c==="Discrete"?[x,x-S]:[S,0],C=b.createRadialGradient(w[0],w[1],$,w[0],w[1],T);Lk(C,i),b.fillStyle=C,b.fill("evenodd");break}case"Rectangular":{const w=kq(h),x=w[0],S=w[1],$=Xu(w,d),T=(W,Z,V,A,q,J,ee,re)=>{b.save(),this.pushClipPath(e);const me=Xu([q,J],d),ze=Xu([ee,re],d);b.beginPath(),b.moveTo($[0],$[1]),b.lineTo(me[0],me[1]),b.lineTo(ze[0],ze[1]),b.lineTo($[0],$[1]),b.clip();const Ce=Xu([W,Z],d),at=Xu([V,A],d),vt=b.createLinearGradient(Ce[0],Ce[1],at[0],at[1]);Lk(vt,i),b.fillStyle=vt,b.fill("evenodd"),b.restore()};let C=a==="Absolute"?this.transformSize(zt(o)):$1(o,l.gradientSize)*(WA(h)/2),[L,N]=c==="Discrete"?[y,y-C]:[x+C,x];T(L,S,N,S,y,m,y,v),[L,N]=c==="Discrete"?[f,f+C]:[x-C,x],T(L,S,N,S,f,v,f,m),C=a==="Absolute"?this.transformSize(zt(o)):$1(o,l.gradientSize)*(JA(h)/2);let[D,F]=c==="Discrete"?[v,v-C]:[S+C,S];T(x,D,x,F,y,v,f,v),[D,F]=c==="Discrete"?[m,m+C]:[S-C,S],T(x,D,x,F,f,m,y,m);break}}b.restore()}drawGradientStroke(e,i){const{capStyle:r,gradientMethod:s,gradientSize:n,gradientSizeUnits:o,joinStyle:a,miterLimit:l,width:c}=i;if(!e||c===0)return;let d;if(or(e))d=e.rings;else if(xs(e))d=e.paths;else{if(!Nn(e))return void Vx().error("Unable to draw gradient stroke");d=Dd(e).rings}const h=i.gradientType??Er.CIMGradientStroke.gradientType,f=Math.max(this.transformSize(zt(c)),.5),m=this._ctx;let y,v;m.save(),this._setCapStyle(r),this._setJoinStyle(a),l!==void 0&&(m.miterLimit=l),m.lineWidth=f;for(let b of d){if(b=U(b),DY(b),!b||b.length<=1)continue;let w=0;y=this.transformPt(b[0]);for(let $=1;$<b.length;$++){v=this.transformPt(b[$]);const T=v[0]-y[0],C=v[1]-y[1];w+=Math.sqrt(T*T+C*C),y=v}const x=o==="Absolute"?this.transformSize(zt(n)):$1(n,Er.CIMGradientStroke.gradientSize)*(s==="AcrossLine"?f:w);let S=0;y=this.transformPt(b[0]);for(let $=1;$<b.length;$++){v=this.transformPt(b[$]);const T=v[0]-y[0],C=v[1]-y[1],L=Math.sqrt(T*T+C*C);let N,D,F,W;switch(s){case"AcrossLine":{const[V,A]=Xu([T/L,C/L],-Math.PI/2),q=f/2,J=h==="Discrete"?q:x-q;N=(y[0]+v[0])/2+V*J,D=(y[1]+v[1])/2+A*J,F=N-V*x,W=D-A*x;break}case"AlongLine":{const V=T/L,A=C/L;h==="Discrete"?(N=y[0]-V*S,D=y[1]-A*S,F=N+V*x,W=D+A*x):(F=y[0]+V*(w-S),W=y[1]+A*(w-S),N=F-V*x,D=W-A*x);break}default:return Vx().error("Unrecognized gradient method:",s),void m.restore()}const Z=m.createLinearGradient(N,D,F,W);Lk(Z,i),m.strokeStyle=Z,m.beginPath(),m.moveTo(y[0],y[1]),m.lineTo(v[0],v[1]),m.stroke(),S+=L,y=v}}m.restore()}_buildPath(e,i){const r=this._ctx;if(r.beginPath(),e)for(const s of e){const n=s?s.length:0;if(n>1){let o=this.transformPt(s[0]);r.moveTo(o[0],o[1]);for(let a=1;a<n;a++)o=this.transformPt(s[a]),r.lineTo(o[0],o[1]);i&&r.closePath()}}}_setCapStyle(e){switch(e){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}_setJoinStyle(e){switch(e){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}};function NKe(t,e,i){let r=Je(t.separation,Er.CIMHatchFill.separation)*i,s=Je(t.rotation);if(r===0)return null;r<0&&(r=-r);let n=0;const o=.5*r;for(;n>o;)n-=r;for(;n<-o;)n+=r;const a=zr();e6(a,e),a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o;const l=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;s>180;)s-=180;for(;s<0;)s+=180;const c=Math.cos(s*ty),d=Math.sin(s*ty),h=-r*d,f=r*c;let m,y,v,b;n=Je(t.offsetX)*i*d-Je(t.offsetY)*i*c,m=v=Number.MAX_VALUE,y=b=-Number.MAX_VALUE;for(const L of l){const N=L[0],D=L[1],F=c*N+d*D,W=-d*N+c*D;m=Math.min(m,F),v=Math.min(v,W),y=Math.max(y,F),b=Math.max(b,W)}v=Math.floor(v/r)*r;let w=c*m-d*v-h*n/r,x=d*m+c*v-f*n/r,S=c*y-d*v-h*n/r,$=d*y+c*v-f*n/r;const T=1+Math.round((b-v)/r),C=[];for(let L=0;L<T;L++)w+=h,x+=f,S+=h,$+=f,C.push([[w,x],[S,$]]);return{paths:C}}function DKe(t,e){let i=0;for(const r of e){const s=r.length;for(let n=1;n<s;n++){const o=r[n-1],a=r[n];o[1]>t[1]!=a[1]>t[1]&&((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0])>0?i++:i--)}}return i!==0}function NY(t,e,i){for(const r of e){const s=r.length;for(let n=1;n<s;n++){const o=r[n-1],a=r[n];let l=(a[0]-o[0])*(a[0]-o[0])+(a[1]-o[1])*(a[1]-o[1]);if(l===0)continue;l=Math.sqrt(l);const c=((a[0]-o[0])*(t[1]-o[1])-(a[1]-o[1])*(t[0]-o[0]))/l;if(Math.abs(c)<i){const d=((a[0]-o[0])*(t[0]-o[0])+(a[1]-o[1])*(t[1]-o[1]))/l;if(d>-i&&d<l+i)return!0}}}return!1}function FKe(t,e){const i=e[0]-t[0],r=e[1]-t[1];return 180/Math.PI*Math.atan2(r,i)}const Dd=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,Afe=(t,e,i)=>{switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}};function Lfe(t,e=1){const i=phe(t),r=hhe(t.fontStyleName),s=t.fontFamilyName??_9,{weight:n,style:o}=r,a=e*(t.height||5),l=O9e(t.horizontalAlignment),c=R9e(t.verticalAlignment),d=AS(t),h=AS(t.haloSymbol),f=h!=null?e*(t.haloSize??0):0,m=NC(t.symbol),y=e*(DC(t.symbol)||0),v=t.callout?.type==="CIMBackgroundCallout"?t.callout.backgroundSymbol:null,b=AS(v),w=DC(v),x=NC(v);return{color:d,size:a,horizontalAlignment:l,verticalAlignment:c,font:{family:s,style:A9e(o),weight:L9e(n),decoration:i},outline:{size:y||0,color:m},halo:{size:f||0,color:h,style:o},backgroundColor:b,borderLine:w!=null&&x!=null?{size:w,color:x}:null,pixelRatio:1,premultiplyColors:!0}}const zKe=1e-4;function DY(t){let e,i,r,s,n,o=t[0],a=1;for(;a<t.length;)e=t[a][0]-o[0],i=t[a][1]-o[1],s=e!==0?i/e:Math.PI/2,r!==void 0&&Math.abs(s-r)<=zKe?(t.splice(a-1,1),o=n):(n=o,o=t[a],a++),r=s}const Nk=Number.POSITIVE_INFINITY,k9=Math.PI,F1t=2*k9,jKe=128/k9,VKe=256/360,z1t=k9/180,UKe=1/Math.LN2;function Ofe(t,e){return(t%=e)>=0?t:t+e}function j1t(t){return Ofe(t*jKe,256)}function V1t(t){return Ofe(t*VKe,256)}function U1t(t){return Math.log(t)*UKe}function Mn(t,e,i){return t*(1-i)+e*i}const BKe=8,qKe=14,GKe=16;function B1t(t){return BKe+Math.max((t-qKe)*GKe,0)}function HKe(t,e,i){let r,s,n,o=0;for(const a of i){r=a.length;for(let l=1;l<r;++l)s=a[l-1],n=a[l],s.y>e!=n.y>e&&((n.x-s.x)*(e-s.y)-(n.y-s.y)*(t-s.x)>0?o++:o--)}return o!==0}function Rfe(t,e,i,r){let s,n,o,a;const l=r*r;for(const c of i){const d=c.length;if(!(d<2)){s=c[0].x,n=c[0].y;for(let h=1;h<d;++h){if(o=c[h].x,a=c[h].y,LIe(t,e,s,n,o,a)<l)return!0;s=o,n=a}}}return!1}function q1t(t,e,i,r,s,n,o){const a=Math.max(r,Math.min(e,n))-e,l=Math.max(s,Math.min(i,o))-i;return a*a+l*l<=t*t}function WKe(t,e){if(e===0||Number.isNaN(e))return t;const i=[],r=new Pt(0,0),s=new Pt(0,0),n=new Pt(0,0);for(let o=0;o<t.length;o++){const a=t[o],l=[];for(let c=0;c<a.length;c++){const d=a[c-1],h=a[c],f=a[c+1];c===0?r.setCoords(0,0):r.assignSub(h,d).normalize().rightPerpendicular(),c===a.length-1?s.setCoords(0,0):s.assignSub(f,h).normalize().rightPerpendicular(),n.assignAdd(r,s).normalize();const m=n.x*s.x+n.y*s.y;m!==0&&n.scale(1/m),l.push(Pt.add(h,n.scale(e)))}i.push(l)}return i}function T9(t,e,i,r){const s=new Pt(t[0],t[1]);if(s.scale(r),e==="viewport"){const n=-i*(Math.PI/180),o=Math.cos(n),a=Math.sin(n);s.rotate(o,a)}return s}const Nfe=Math.PI,JKe=Nfe/2,FY=Math.PI/180,RR=96/72,ZKe=1.4142135623730951,zY=2,jY=4,QC=()=>X.getLogger("esri.symbols.cim.CIMSymbolHelper");function G1t(t){let e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":{const i=Ba.fromSimpleMarker(t);if(!i)throw new Error("InternalError: Cannot convert symbol to CIM");e=i;break}case"picture-marker":e=Ba.fromPictureMarker(t);break;case"simple-line":e=Ba.fromSimpleLineSymbol(t);break;case"simple-fill":e=Ba.fromSimpleFillSymbol(t);break;case"picture-fill":e=Ba.fromPictureFillSymbol(t);break;case"text":e=Ba.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function BE(t,e,i){switch(e.type){case"CIMSymbolReference":return BE(t,e.symbol,i);case"CIMPointSymbol":i==null&&(i={x:0,y:0}),t.drawSymbol(e,i);break;case"CIMLineSymbol":i==null&&(i={paths:[[[0,0],[10,0]]]}),t.drawSymbol(e,i);break;case"CIMPolygonSymbol":i==null&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),t.drawSymbol(e,i);break;case"CIMTextSymbol":{const r={x:0,y:0};t.drawSymbol(e,r);break}case"CIMVectorMarker":{const r=new U_;t.drawMarker(e,r);break}}return t.envelope()}function YKe(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function KKe(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectControlMeasureLine":return 500;case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(Je(t.offsetX)),Math.abs(Je(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return .5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function VY(t){if(!t)return 0;let e=0;for(const i of t)e+=KKe(i);return e}let H1t=class{static getSymbolInflateSize(e,i,r,s,n){return e||(e=[0,0,0,0]),i?this._getInflateSize(e,i,r,s,n):e}static safeSize(e){const i=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(i*i+r*r)}static _vectorMarkerBounds(e,i,r,s){let n=!0;const o=zr();if(i?.markerGraphics)for(const a of i.markerGraphics){const l=[0,0,0,0];a.geometry&&(e6(o,a.geometry),l[0]=0,l[1]=0,l[2]=0,l[3]=0,this.getSymbolInflateSize(l,a.symbol,r,0,s),o[0]+=l[0],o[1]+=l[1],o[2]+=l[2],o[3]+=l[3],n?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],n=!1):(e[0]=Math.min(e[0],o[0]),e[1]=Math.min(e[1],o[1]),e[2]=Math.max(e[2],o[2]),e[3]=Math.max(e[3],o[3])))}return e}static _getInflateSize(e,i,r,s,n){if(rXe(i)){const o=this._getLayersInflateSize(e,i.symbolLayers,r,s,n),a=VY(i.effects);return a>0&&(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a),o}return this._getTextInflatedSize(e,i,n)}static _getLayersInflateSize(e,i,r,s,n){let o=!0;if(!i)return e;for(const a of i){if(!a)continue;let l=[0,0,0,0];switch(a.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const d=a;let h=d.width;h!=null&&(d.capStyle==="Square"||d.joinStyle==="Miter"?h/=ZKe:h/=2,l[0]=-h,l[1]=-h,l[2]=h,l[3]=h);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const d=a;if(a.type==="CIMVectorMarker"){const v=a;if(l=this._vectorMarkerBounds(l,v,r,n),v.frame){const b=(v.frame.xmin+v.frame.xmax)/2,w=(v.frame.ymin+v.frame.ymax)/2;if(l[0]-=b,l[1]-=w,l[2]-=b,l[3]-=w,v.size!=null){const x=v.size/(v.frame.ymax-v.frame.ymin);l[0]*=x,l[1]*=x,l[2]*=x,l[3]*=x}}}else if(a.type==="CIMPictureMarker"){const v=a,b=r.getResource(v.url);let w=1;if(b!=null&&b.height&&(w=b.width/b.height),d.size!=null){const x=d.size/2,S=d.size*w*v.scaleX/2;l=[-S,-x,S,x]}}else if(d.size!=null){const v=d.size/2;l=[-v,-v,v,v]}if(d.anchorPoint){let v,b;d.anchorPointUnits==="Absolute"?(v=d.anchorPoint.x,b=d.anchorPoint.y):(v=d.anchorPoint.x*(l[2]-l[0]),b=d.anchorPoint.y*(l[3]-l[1]));const w=1.25*Math.sqrt(v*v+b*b);l[0]-=w,l[1]-=w,l[2]+=w,l[3]+=w}let h=Je(d.rotation);if(d.rotateClockwise&&(h=-h),s&&(h-=s),h){const v=FY*h,b=Math.cos(v),w=Math.sin(v),x=zr([Nk,Nk,-Nk,-Nk]);Bs(x,[l[0]*b-l[1]*w,l[0]*w+l[1]*b]),Bs(x,[l[0]*b-l[3]*w,l[0]*w+l[3]*b]),Bs(x,[l[2]*b-l[1]*w,l[2]*w+l[1]*b]),Bs(x,[l[2]*b-l[3]*w,l[2]*w+l[3]*b]),l=x}let f=Je(d.offsetX),m=Je(d.offsetY);if(s){const v=FY*s,b=Math.cos(v),w=Math.sin(v),x=f*w+m*b;f=f*b-m*w,m=x}l[0]+=f,l[1]+=m,l[2]+=f,l[3]+=m;const y=YKe(d.markerPlacement);y>0&&(l[0]-=y,l[1]-=y,l[2]+=y,l[3]+=y);break}}const c=VY(a.effects);c>0&&(l[0]-=c,l[1]-=c,l[2]+=c,l[3]+=c),o?(e[0]=l[0],e[1]=l[1],e[2]=l[2],e[3]=l[3],o=!1):(e[0]=Math.min(e[0],l[0]),e[1]=Math.min(e[1],l[1]),e[2]=Math.max(e[2],l[2]),e[3]=Math.max(e[3],l[3]))}return e}static _getTextInflatedSize(e,i,r){const s=Efe(i.height??Er.CIMTextSymbol.height);if(e[0]=-s/2,e[1]=-s/2,e[2]=s/2,e[3]=s/2,!r)return e;const n=r.get(i);if(!n||!n.glyphMosaicItems.glyphs.length)return e;const{lineGapType:o,lineGap:a}=i,l=o?Afe(o,a??0,s):0,c=i.callout?.type==="CIMBackgroundCallout",d=Tfe(n.glyphMosaicItems,{scale:s/Ace,angle:Je(i.angle),xOffset:Je(i.offsetX),yOffset:Je(i.offsetY),horizontalAlignment:i.horizontalAlignment,verticalAlignment:i.verticalAlignment,maxLineWidth:Mfe(i.lineWidth),lineHeight:Pce*Math.max(.25,Math.min(l||1,4)),decoration:i.font.decoration||"none",useCIMAngleBehavior:!0,hasBackground:c}).boundsT,h=Math.sqrt(d.width*d.width+d.height*d.height);return e[0]-=d.x+h,e[1]-=d.y-h,e[2]+=d.x+h,e[3]+=-d.y+h,e}},Ba=class qE{static getEnvelope(e,i,r){if(!e)return null;const s=new RKe(r);if(Array.isArray(e)){let n;for(const o of e)n?n.union(BE(s,o,i)):n=BE(s,o,i);return n}return BE(s,e,i)}static getTextureInfo(e,i,r,s,n){const o=s??this.getEnvelope(e,null,i);if(!o)return[0,0,0,0,1];const a=Math.max(o.width,o.height)*RR;let l=n!=null?Math.max(n/a,1):1;l*=RR,o.x*=l,o.y*=l,o.width*=l,o.height*=l,o.width=Math.max(Math.ceil(o.x+o.width)-Math.floor(o.x),1)-1,o.height=Math.max(Math.ceil(o.y+o.height)-Math.floor(o.y),1)-1;let c=o.x+.5*o.width,d=o.y+.5*o.height;return c+=o.x-Math.floor(o.x),d+=o.y-Math.floor(o.y),s||(o.width+=r,o.height+=r,c+=r/2,d+=r/2),[o.width,o.height,c,d,l]}static getTextureAnchor(e,i,r){const[s,n,o,a,l]=this.getTextureInfo(e,i,zY,null,r);return[-o/s,-a/n,n/l*RR]}static rasterize(e,i,r,s,n=!0,o){const[a,l,c,d,h]=this.getTextureInfo(i,s,zY,r,o);e.width=a,e.height=l;const f=e.getContext("2d",{willReadFrequently:!0}),m=Cp.createScale(h,-h);m.translate(.5*a-c,.5*l+d);const y=new Pfe(f,s,m);switch(i.type){case"CIMPointSymbol":{const w={type:"point",x:0,y:0};y.drawSymbol(i,w);break}case"CIMVectorMarker":{const w=new U_;y.drawMarker(i,w);break}}const v=f.getImageData(0,0,e.width,e.height),b=new Uint8Array(v.data);if(n){let w;for(let x=0;x<b.length;x+=4)w=b[x+3]/255,b[x]=b[x]*w,b[x+1]=b[x+1]*w,b[x+2]=b[x+2]*w}return[b,e.width,e.height,-c/a,-d/l]}static fromTextSymbol(e){const{text:i}=e;return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:qE.createCIMTextSymbolfromTextSymbol(e),textString:i}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:i,outline:r,width:s,xoffset:n,xscale:o,yoffset:a,yscale:l}=e,c=[],d={type:"CIMPolygonSymbol",symbolLayers:c};if(r){const v=UY(r);v&&c.push(v)}let h=e.url;e.type==="esriPFS"&&e.imageData&&(h=e.imageData);const f="angle"in e?e.angle??0:0,m=(s??0)*(o||1),y=(i??0)*(l||1);return c.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:h,height:y,width:m,offsetX:Je(n),offsetY:Je(a),rotation:Je(-f),colorSubstitutions:null}),d}static fromSimpleFillSymbol(e){const{color:i,style:r,outline:s}=e,n=[],o={type:"CIMPolygonSymbol",symbolLayers:n};if(s){const a=UY(s);a&&n.push(a)}if(r&&r!=="solid"&&r!=="none"&&r!=="esriSFSSolid"&&r!=="esriSFSNull"){const a={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:qo(i),capStyle:"Butt",joinStyle:"Miter",width:.75}]};let l=0;const c=Zt(sXe(r)?8:10);switch(r){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}n.push({type:"CIMHatchFill",lineSymbol:a,offsetX:0,offsetY:0,rotation:l,separation:c}),r==="cross"||r==="esriSFSCross"?n.push({type:"CIMHatchFill",lineSymbol:U(a),offsetX:0,offsetY:0,rotation:90,separation:c}):r!=="diagonal-cross"&&r!=="esriSFSDiagonalCross"||n.push({type:"CIMHatchFill",lineSymbol:U(a),offsetX:0,offsetY:0,rotation:45,separation:c})}else!r||r!=="solid"&&r!=="esriSFSSolid"||n.push({type:"CIMSolidFill",enable:!0,color:qo(i)});return o}static fromSimpleLineSymbol(e){const{cap:i,color:r,join:s,marker:n,miterLimit:o,style:a,width:l}=e;let c=null;a!=="solid"&&a!=="none"&&a!=="esriSLSSolid"&&a!=="esriSLSNull"&&(c=[{type:"CIMGeometricEffectDashes",dashTemplate:_j(a,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const d=[];if(n){let h;switch(n.placement){case"begin-end":h="Both";break;case"begin":h="JustBegin";break;case"end":h="JustEnd";break;default:h="None"}const f=qE.fromSimpleMarker(n,l,r).symbolLayers[0];f.markerPlacement={type:"CIMMarkerPlacementAtExtremities",placePerPart:!1,angleToLine:!0,offset:0,extremityPlacement:h,offsetAlongLine:0},d.push(f)}return d.push({type:"CIMSolidStroke",color:a!=="none"&&a!=="esriSLSNull"?qo(r):[0,0,0,0],capStyle:Ffe(i),joinStyle:zfe(s),miterLimit:o,width:l,effects:c}),{type:"CIMLineSymbol",symbolLayers:d}}static fromPictureMarker(e){const{angle:i,height:r,width:s,xoffset:n,yoffset:o}=e;let a=e.url;return e.type==="esriPMS"&&e.imageData&&(a=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:a,size:r,width:s,offsetX:Je(n),offsetY:Je(o),rotation:Je(-i)}]}}static createCIMTextSymbolfromTextSymbol(e){const{angle:i,color:r,font:s,haloColor:n,haloSize:o,horizontalAlignment:a,kerning:l,lineWidth:c,text:d,verticalAlignment:h,xoffset:f,yoffset:m,backgroundColor:y,borderLineColor:v,borderLineSize:b}=e;let w,x,S,$,T,C;s&&(w=s.family,x=s.style,S=s.weight,$=s.size,T=s.decoration);let L=!1;return d&&(L=EZe(d)[1]),(y||b)&&(C={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:qo(y)},{type:"CIMSolidStroke",color:qo(v),width:b}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMTextSymbol",angle:i,blockProgression:2,depth3D:1,extrapolateBaselines:!0,fontEffects:0,fontEncoding:1,fontFamilyName:w||"Arial",fontStyleName:eXe(x,S),fontType:0,haloSize:o,height:$,hinting:1,horizontalAlignment:XKe(a??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",lineWidth:c,offsetX:Je(f),offsetY:Je(m),strikethrough:T==="line-through",underline:T==="underline",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:qo(r)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:qo(n)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:L?1:0,verticalAlignment:QKe(h??"baseline"),verticalGlyphOrientation:0,wordSpacing:100,billboardMode3D:2,callout:C}}static createPictureMarkerRasterizationParam(e){const{angle:i,height:r,width:s,xoffset:n,yoffset:o}=e,a=e.url??e.source?.url??e.source?.imageData;return a?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:"Picture",tintColor:null,url:a,size:r,width:s,offsetX:Je(n),offsetY:Je(o),rotation:Je(-i)}}:null}static createPictureFillRasterizationParam(e){const{width:i,height:r,xoffset:s,yoffset:n,url:o}=e;return o?{type:"sprite-rasterization-param",overrides:[],resource:{type:"CIMPictureFill",scaleX:1,textureFilter:"Picture",tintColor:null,url:o,width:i,height:r,offsetX:Je(s),offsetY:Je(n),rotation:0}}:null}static fromSimpleMarker(e,i,r){const{style:s}=e,n=e.color??r;if(s==="path"||s==="esriSMSPath"){const h=[];if("outline"in e&&e.outline){const y=e.outline;h.push({type:"CIMSolidStroke",enable:!0,width:y.width,color:qo(y.color),path:e.path})}h.push({type:"CIMSolidFill",enable:!0,color:qo(n),path:e.path});const[f,m]=O1("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:-Je(e.angle),size:Je(e.size||6),offsetX:Je(e.xoffset),offsetY:Je(e.yoffset),scaleSymbolsProportionally:!1,frame:f,markerGraphics:[{type:"CIMMarkerGraphic",geometry:m,symbol:{type:"CIMPolygonSymbol",symbolLayers:h}}]}]}}const o=[];let a,l,c=e.size;if("outline"in e&&e.outline&&e.outline.style!=="none"&&e.outline.style!=="esriSLSNull"){const h=e.outline,f=h.style!=="solid"&&h.style!=="esriSLSSolid";[a,l]=f?O1(s,e.size):O1(s);const m=h.width??U3.width;if(f){const b=m/e.size,w=(a.xmax-a.xmin)*b/2,x=(a.ymax-a.ymin)*b/2;a.xmin-=w,a.xmax+=w,a.ymin-=x,a.ymax+=x,c&&(c+=m)}const y=e.style!=="cross"&&e.style!=="x"||e?.outline.style==="dot"||e?.outline.style==="short-dot"?"HalfGap":"FullPattern",v=f?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:_j(h.style,null).map(b=>h.width&&h.width>0?b*h.width:b),lineDashEnding:y,controlPointEnding:"FullPattern"}]:void 0;o.push({type:"CIMSolidStroke",capStyle:f?"Round":"Butt",enable:!0,width:m,color:qo(h.color),effects:v})}else!i||e.type!=="line-marker"||e.style!=="cross"&&e.style!=="x"?[a,l]=O1(s):([a,l]=O1(s),o.push({type:"CIMSolidStroke",enable:!0,width:i,color:qo(n)}));o.push({type:"CIMSolidFill",enable:!0,color:qo(n)});const d={type:"CIMPolygonSymbol",symbolLayers:o};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Je(-e.angle),size:Je(c||6*i),offsetX:Je(e.xoffset),offsetY:Je(e.yoffset),scaleSymbolsProportionally:!1,frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:l,symbol:d}]}]}}static fromCIMHatchFill(e,i){const r=i*(e.separation??Er.CIMHatchFill.separation),s=r/2,n=U(e.lineSymbol);n.symbolLayers?.forEach(l=>{switch(l.type){case"CIMSolidStroke":l.width!=null&&(l.width*=i),l.effects?.forEach(c=>{if(c.type==="CIMGeometricEffectDashes"){const d=c.dashTemplate;c.dashTemplate=d?.map(h=>h*i)}});break;case"CIMVectorMarker":{l.size!=null&&(l.size*=i);const c=l.markerPlacement;c!=null&&"placementTemplate"in c&&(c.placementTemplate=c.placementTemplate.map(d=>d*i));break}}});let o=this._getLineSymbolPeriod(n)||jY;for(;o<jY;)o*=2;const a=o/2;return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-s,ymax:s},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-a,0],[a,0]]]},symbol:n}],size:r}}static fetchResources(e,i,r,s=null){if(!e||!i)return r;switch(e.type){case"CIMMeshSymbol":case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":for(const n of e.effects||[])r.push(IY(n))}return Dfe(e,n=>{for(const o of n.effects||[])r.push(IY(o));"url"in n&&n.url&&r.push(i.fetchResource(n.url,{signal:s}))}),r}static fetchFonts(e,i,r){if(e&&i){if("symbolLayers"in e&&e.symbolLayers){for(const s of e.symbolLayers)if(s.type==="CIMVectorMarker"&&s.markerGraphics)for(const n of s.markerGraphics)n?.symbol&&qE.fetchFonts(n.symbol,i,r)}else if(e.type==="CIMTextSymbol"){const{fontFamilyName:s,fontStyleName:n}=e;if(!s||s.toLowerCase()==="calcitewebcoreicons")return;const{style:o,weight:a}=hhe(n),l=phe(e),c=new Qo({family:s,style:o,weight:a,decoration:l});r.push(i.loadFont(c).catch(()=>{QC().error(`Unsupported font ${s} in CIM symbol`)}))}}}static _getLineSymbolPeriod(e){if(e){const i=this._getEffectsRepeat(e.effects);if(i)return i;if(e.symbolLayers){for(const r of e.symbolLayers)if(r){const s=this._getEffectsRepeat(r.effects);if(s)return s;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const n=this._getPlacementRepeat(r.markerPlacement);if(n)return n}}}}}return 0}static _getEffectsRepeat(e){if(e){for(const i of e)if(i)switch(i.type){case"CIMGeometricEffectDashes":{const r=i.dashTemplate;if(r&&r.length){let s=0;for(const n of r)s+=n;return 1&r.length&&(s*=2),s}break}case"CIMGeometricEffectWave":return i.period;default:QC().error(`unsupported geometric effect type ${i.type}`)}}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const i=e.placementTemplate;if(i&&i.length){let r=0;for(const s of i)r+=+s;return 1&i.length&&(r*=2),r}break}}return 0}static fromCIMInsidePolygon(e){const i=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const s=Math.abs(i.stepX),n=Math.abs(i.stepY),o=(i.randomness??100)/100;let a,l,c,d;if(i.gridType==="Random"){const h=Zt(gze),f=Math.max(Math.floor(h/s),1),m=Math.max(Math.floor(h/n),1);a=f*s/2,l=m*n/2,c=2*l;const y=new eU(i.seed),v=o*s/1.5,b=o*n/1.5;d=[];for(let w=0;w<f;w++)for(let x=0;x<m;x++){const S=w*s-a+v*(.5-y.getFloat()),$=x*n-l+b*(.5-y.getFloat());d.push({x:S,y:$}),w===0&&d.push({x:S+2*a,y:$}),x===0&&d.push({x:S,y:$+2*l})}}else i.shiftOddRows===!0?(a=s/2,l=n,c=2*n,d=[{x:-a,y:0},{x:a,y:0},{x:0,y:l},{x:0,y:-l}]):(a=s/2,l=n/2,c=n,d=[{x:-s,y:0},{x:0,y:-n},{x:-s,y:-n},{x:0,y:0},{x:s,y:0},{x:0,y:n},{x:s,y:n},{x:-s,y:n},{x:s,y:-n}]);return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-l,ymax:l},markerGraphics:d.map(h=>({type:"CIMMarkerGraphic",geometry:h,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}})),size:c}}};function Dfe(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const i=t.symbolLayers;if(!i)return;for(const r of i)if(e(r),r.type==="CIMVectorMarker"){const s=r.markerGraphics;if(!s)continue;for(const n of s)if(n){const o=n.symbol;o&&Dfe(o,e)}}break}}}const Ffe=t=>{if(!t)return"Butt";switch(t){case"butt":return"Butt";case"square":return"Square";case"round":return"Round"}},zfe=t=>{if(!t)return"Miter";switch(t){case"miter":return"Miter";case"round":return"Round";case"bevel":return"Bevel"}},XKe=t=>{if(t==null)return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},QKe=t=>{if(t==null)return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},qo=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:s}=t;return[e,i,r,255*s]},eXe=(t,e)=>{const i=tXe(e),r=iXe(t);return i&&r?`${i}-${r}`:`${i}${r}`},tXe=t=>{if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},iXe=t=>{if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},_j=(t,e)=>{const i=H("safari")?.001:0,r=e==="butt";switch(t){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return QC().error("Unexpected: style does not require rasterization"),[0,0];default:return QC().error(`Tried to rasterize SLS, but found an unexpected style: ${t}!`),[0,0]}};function rXe(t){return t.symbolLayers!==void 0}const O1=(t,e=100)=>{const i=e/2;let r,s;const n=t;if(n==="circle"||n==="esriSMSCircle"){let a=Math.acos(1-.25/i),l=Math.ceil(Nfe/a/4);l===0&&(l=1),a=JKe/l,l*=4;const c=[];c.push([i,0]);for(let d=1;d<l;d++)c.push([i*Math.cos(d*a),-i*Math.sin(d*a)]);c.push([i,0]),r={rings:[c]},s={xmin:-i,ymin:-i,xmax:i,ymax:i}}else if(n==="cross"||n==="esriSMSCross")r={paths:[[[0,i],[0,-i]],[[i,0],[-i,0]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="diamond"||n==="esriSMSDiamond")r={rings:[[[-i,0],[0,i],[i,0],[0,-i],[-i,0]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="square"||n==="esriSMSSquare")r={rings:[[[-i,-i],[-i,i],[i,i],[i,-i],[-i,-i]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="x"||n==="esriSMSX")r={paths:[[[i,i],[-i,-i]],[[i,-i],[-i,i]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i};else if(n==="triangle"||n==="esriSMSTriangle"){const o=e*.5773502691896257,a=-o,l=2/3*e,c=l-e;r={rings:[[[a,c],[0,l],[o,c],[a,c]]]},s={xmin:a,ymin:c,xmax:o,ymax:l}}else n==="arrow"&&(r={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},s={xmin:-i,ymin:-i,xmax:i,ymax:i});return[s,r]},sXe=t=>t==="vertical"||t==="horizontal"||t==="cross"||t==="esriSFSCross"||t==="esriSFSVertical"||t==="esriSFSHorizontal";function UY(t){if(!t)return null;let e=null;const{cap:i,color:r,join:s,miterLimit:n,style:o,width:a}=t;return o!=="solid"&&o!=="none"&&o!=="esriSLSSolid"&&o!=="esriSLSNull"&&(e=[{type:"CIMGeometricEffectDashes",dashTemplate:_j(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:o!=="esriSLSNull"&&o!=="none"?qo(r):[0,0,0,0],capStyle:Ffe(i),joinStyle:zfe(s),miterLimit:n,width:a,effects:e}}let nXe=class{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){return this._resourceMap.get(e)??null}async fetchResource(e,i){const r=this._resourceMap.get(e);if(r)return{width:r.width,height:r.height};let s=this._inFlightResourceMap.get(e);return s?s.then(n=>({width:n.width,height:n.height})):(s=Kze(e,i),this._inFlightResourceMap.set(e,s),s.then(n=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,n),{width:n.width,height:n.height}),()=>({width:0,height:0})))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return VZe(e)}};function Z1t(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function oXe(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function Gg(t){if(oXe(t))return t;const{originPosition:e,scale:i,translate:r}=t,s=i[0]??1,n=i[1]??1;return{originPosition:"lowerLeft",scale:[s,e==="lowerLeft"?n:-n,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function Sh({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function $h({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function D$({scale:t,translate:e},i){return Math.round(((i??0)-e[2])/t[2])}function F$({scale:t,translate:e},i){return i?Math.round((i-e[3])/t[3]):0}function jfe(t,e){return t&&e?uXe:t&&!e?lXe:!t&&e?cXe:aXe}const aXe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Sh(t,r[0]),n=$h(t,r[1]);i.push([s,n]);for(let o=1;o<e.length;o++){const[a,l]=e[o],c=Sh(t,a),d=$h(t,l);c===s&&d===n||i.push([c-s,d-n]),s=c,n=d}return i},lXe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Sh(t,r[0]),n=$h(t,r[1]),o=D$(t,r[2]);i.push([s,n,o]);for(let a=1;a<e.length;a++){const[l,c,d]=e[a],h=Sh(t,l),f=$h(t,c),m=D$(t,d);h===s&&f===n&&m===o||i.push([h-s,f-n,m]),s=h,n=f,o=m}return i},cXe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Sh(t,r[0]),n=$h(t,r[1]),o=F$(t,r[2]);i.push([s,n,o]);for(let a=1;a<e.length;a++){const[l,c,d]=e[a],h=Sh(t,l),f=$h(t,c),m=F$(t,d);h===s&&f===n&&m===o||i.push([h-s,f-n,m]),s=h,n=f,o=m}return i},uXe=(t,e)=>{const i=[];if(!e.length)return null;const r=e[0];let s=Sh(t,r[0]),n=$h(t,r[1]),o=D$(t,r[2]),a=F$(t,r[3]);i.push([s,n,o,a]);for(let l=1;l<e.length;l++){const[c,d,h,f]=e[l],m=Sh(t,c),y=$h(t,d),v=D$(t,h),b=F$(t,f);m===s&&y===n&&v===o&&b===a||i.push([m-s,y-n,v,b]),s=m,n=y,o=v,a=b}return i};function dXe(t,e,i,r){const s=[],n=jfe(i,r);for(let o=0;o<e.length;o++){const a=n(t,e[o]);a&&a.length>=3&&s.push(a)}return s.length?s:null}function hXe(t,e,i,r){const s=[],n=jfe(i,r);for(let o=0;o<e.length;o++){const a=n(t,e[o]);a&&a.length>=2&&s.push(a)}return s.length?s:null}function G2({scale:t,translate:e},i){return i*t[0]+e[0]}function H2({scale:t,translate:e},i){return i*t[1]+e[1]}function z$({scale:t,translate:e},i){return(i??0)*t[2]+e[2]}function j$({scale:t,translate:e},i){return i?i*t[3]+e[3]:0}function E9(t,e){return t&&e?yXe:t&&!e?fXe:!t&&e?mXe:pXe}const pXe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=G2(t,r[0]),n=H2(t,r[1]);i[0]=[s,n];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[h,f]=e[d];s+=l*h,n+=c*f,i[d]=[s,n]}return i},fXe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=G2(t,r[0]),n=H2(t,r[1]);i[0]=[s,n,z$(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[h,f,m]=e[d];s+=l*h,n+=c*f,i[d]=[s,n,z$(t,m)]}return i},mXe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=G2(t,r[0]),n=H2(t,r[1]);i[0]=[s,n,j$(t,r[2])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[h,f,m]=e[d];s+=l*h,n+=c*f,i[d]=[s,n,j$(t,m)]}return i},yXe=(t,e)=>{const i=new Array(e.length);if(!e.length)return i;const r=e[0];let s=G2(t,r[0]),n=H2(t,r[1]);i[0]=[s,n,z$(t,r[2]),j$(t,r[3])];const{scale:o,originPosition:a}=t,l=o[0],c=a==="lowerLeft"?o[1]:-o[1];for(let d=1;d<e.length;d++){const[h,f,m,y]=e[d];s+=l*h,n+=c*f,i[d]=[s,n,z$(t,m),j$(t,y)]}return i};function Vfe(t,e,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=e(t,i[s]);return r}function Y1t(t,e,i){const r=Gg(t);return e.x=Sh(r,i.x),e.y=$h(r,i.y),i.z!=null&&(e.z=D$(r,i.z)),i.m!=null&&(e.m=F$(r,i.m)),e}function K1t(t,e,i){const r=dXe(Gg(t),i.rings,i.hasZ,i.hasM);return r?(e.rings=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function X1t(t,e,i){const r=hXe(Gg(t),i.paths,i.hasZ,i.hasM);return r?(e.paths=r,e.hasZ=i.hasZ??!1,e.hasM=i.hasM??!1,e):null}function gXe(t,e,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=Gg(t);e.points=E9(r,s)(n,i.points),e.hasZ=r,e.hasM=s}return e}function vXe(t,e,i,r=i?.z!=null,s=i?.m!=null){if(i==null)return e;const n=Gg(t);return e.x=G2(n,i.x),e.y=H2(n,i.y),r&&(e.z=z$(n,i.z)),s&&(e.m=j$(n,i.m)),e}function bXe(t,e,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=Gg(t);e.rings=Vfe(n,E9(r,s),i.rings),e.hasZ=r,e.hasM=s}return e}function wXe(t,e,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=Gg(t);e.paths=Vfe(n,E9(r,s),i.paths),e.hasZ=r,e.hasM=s}return e}function Ufe(t,e,i,r,s,n){if(t==null)return null;const o=t.references("geometry")&&n?_Xe(e,r,n):e,a=t.repurposeFeature(o,s);try{return t.evaluate(a,i)}catch(l){return X.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",l),null}}const NR=new Map;function _Xe(t,e,i){const{transform:r,hasZ:s,hasM:n}=i;NR.has(e)||NR.set(e,xXe(e));const o=NR.get(e)(t.geometry,r,s,n);return{...t,geometry:o}}function xXe(t){const e={};switch(t){case"esriGeometryPoint":return(i,r,s,n)=>vXe(r,e,i,s,n);case"esriGeometryPolygon":return(i,r,s,n)=>bXe(r,e,i,s,n);case"esriGeometryPolyline":return(i,r,s,n)=>wXe(r,e,i,s,n);case"esriGeometryMultipoint":return(i,r,s,n)=>gXe(r,e,i,s,n);default:return X.getLogger("esri.views.2d.support.arcadeOnDemand").error(new R("mapview-arcade",`Unable to handle geometryType: ${t}`)),i=>i}}const Q1t=Object.freeze(Object.defineProperty({__proto__:null,default:Ufe},Symbol.toStringTag,{value:"Module"})),SXe=t=>{if(!t)return[0,0,0,0];const{r:e,g:i,b:r,a:s}=t;return[e,i,r,255*s]};var li;let M9=(li=class{static findApplicableOverrides(e,i,r){if(e&&i){if(e.primitiveName){let s=!1;for(const n of r)if(n.primitiveName===e.primitiveName){s=!0;break}if(!s)for(const n of i)n.primitiveName===e.primitiveName&&r.push(n)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)li.findApplicableOverrides(s,i,r);if(e.symbolLayers)for(const s of e.symbolLayers)li.findApplicableOverrides(s,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const s of e.effects)li.findApplicableOverrides(s,i,r);if(e.markerPlacement&&li.findApplicableOverrides(e.markerPlacement,i,r),e.type==="CIMVectorMarker"){if(e.markerGraphics)for(const s of e.markerGraphics)li.findApplicableOverrides(s,i,r),li.findApplicableOverrides(s.symbol,i,r)}else e.type==="CIMCharacterMarker"?li.findApplicableOverrides(e.symbol,i,r):e.type==="CIMHatchFill"?li.findApplicableOverrides(e.lineSymbol,i,r):e.type==="CIMPictureMarker"&&li.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}static findEffectOverrides(e,i){if(!e)return null;if(e.type==="CIMGeometricEffectDashes"&&fhe(e),!i||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=fZ(e),s=e.primitiveName,n=[];for(const o of i)o.primitiveName===s&&n.push(fZ(o));return{type:"cim-effect-param",effect:r,overrides:B9e(n)}}static async resolveSymbolOverrides(e,i,r,s,n,o,a){if(!e?.symbol)return null;let{symbol:l,primitiveOverrides:c}=e;const d=!!c;if(!d&&!s)return l;l=U(l),c=U(c);let h=!0;if(i||(i={attributes:{}},h=!1),d){if(h||(c=c.filter(f=>!f.valueExpressionInfo?.expression.includes("$feature"))),a||(c=c.filter(f=>!f.valueExpressionInfo?.expression.includes("$view"))),c.length>0){const f=N9e(i.attributes),m={spatialReference:r,fields:f,geometryType:n};await li.createRenderExpressions(c,m),li.evaluateOverrides(c,i,n??"esriGeometryPoint",o,a,new Ww(f))}li.applyOverrides(l,c)}return s&&li.applyDictionaryTextOverrides(l,i,s,null),l}static async createRenderExpressions(e,i){const r=[];for(const s of e){const n=s.valueExpressionInfo;if(!n||li._expressionToRenderExpression.has(n.expression))continue;const o=_9e(n.expression,i.spatialReference);r.push(o),o.then(a=>li._expressionToRenderExpression.set(n.expression,a))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,i,r,s,n,o){const a={$view:{scale:n?.scale}};for(const l of e){l.value&&typeof l.value=="object"&&ype(l.value)&&(l.propertyName==="Color"||l.propertyName==="StrokeColor")&&(l.value=SXe(l.value));const c=l.valueExpressionInfo;if(!c)continue;const d=li._expressionToRenderExpression.get(c.expression);d&&(l.value=Ufe(d,i,a,r,o,s))}}static applyDictionaryTextOverrides(e,i,r,s,n="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&li.applyDictionaryTextOverrides(a,i,r,s,e.type==="CIMTextSymbol"?e.textCase:n)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const a of o)a&&li.applyDictionaryTextOverrides(a,i,r,s)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const a=E9e(o,r);e.textString=M9e(i,a,s,n)}}}}static applyOverrides(e,i,r,s){if(e.primitiveName){for(const n of i)if(n.primitiveName===e.primitiveName){const o=B2(n.propertyName);if(s&&s.push({cim:e,nocapPropertyName:o,value:e[o]}),r){let a=!1;for(const l of r)l.primitiveName===e.primitiveName&&(a=!0);a||r.push(n)}n.value!=null&&(e[o]=n.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)li.applyOverrides(n,i,r,s);if(e.symbolLayers)for(const n of e.symbolLayers)li.applyOverrides(n,i,r,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const n of e.effects)li.applyOverrides(n,i,r,s);if(e.type==="CIMVectorMarker"&&e.markerGraphics)for(const n of e.markerGraphics)li.applyOverrides(n,i,r,s),li.applyOverrides(n.symbol,i,r,s)}}static restoreOverrides(e){for(const i of e)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(e){let i="";for(const r of e)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(e,i){if(e==="DashTemplate")return i.split(" ").map(r=>Number(r));if(e==="Color"){const r=new ne(i).toRgba();return r[3]*=255,r}return i}},li._expressionToRenderExpression=new Map,li);const $Xe=Object.freeze(Object.defineProperty({__proto__:null,OverrideHelper:M9},Symbol.toStringTag,{value:"Module"})),IXe=96/72;let Bfe=class{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new nXe}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,i,r,s,n,o,a,l,c,d){if(!e)return null;const{data:h}=e;if(!h||h.type!=="CIMSymbolReference"||!h.symbol)return null;const{symbol:f}=h;o||(o=FC(f));const m=await M9.resolveSymbolOverrides(h,i,this._spatialReference,n,o,a,l),y=this._cimResourceManager,v=[];Ba.fetchResources(m,y,v),Ba.fetchFonts(m,y,v),v.length>0&&await Promise.all(v);const{width:b,height:w}=r;let x=BY(o,b,w,s,d);const S=Ba.getEnvelope(m,x,y);if(!S)return null;S.x===1/0&&(S.x=b+2),S.y===1/0&&(S.y=-w/2),S.width===-1/0&&(S.width=b),S.height===-1/0&&(S.height=w);let $=1,T=0,C=0;switch(f.type){case"CIMPointSymbol":case"CIMTextSymbol":{let N=1;S.width>b&&(N=b/S.width);let D=1;S.height>w&&(D=w/S.height),s==="preview"&&(S.width<b&&(N=b/S.width),S.height<w&&(D=w/S.height)),$=Math.min(N,D),T=S.x+S.width/2,C=S.y+S.height/2}break;case"CIMLineSymbol":if(d){C=S.y+S.height/2,T=S.x+S.width/2;const N=S.width-b,D=S.height-w;x={paths:XC(x.paths,{xmin:-1*S.width/2+N,xmax:S.width/2-N,ymin:-1*S.height/2+D,ymax:S.height/2-D,width:S.width-2*N,height:S.height-2*D})}}else{(c||S.height>w)&&($=w/S.height),C=S.y+S.height/2;const N=S.x*$+b/2,D=(S.x+S.width)*$+b/2,F=xs(x)?x.paths:or(x)?x.rings:null;if(F===null)throw new Error("Bad geometry, can't rasterise symbol!");F[0][0][0]-=N/$,F[0][2][0]-=(D-b)/$}break;case"CIMPolygonSymbol":if(d){C=S.y+S.height/2,T=S.x+S.width/2;const N=S.width-b,D=S.height-w;x={paths:XC(x.rings,{xmin:-1*S.width/2+N,xmax:S.width/2-N,ymin:-1*S.height/2+D,ymax:S.height/2-D,width:S.width-2*N,height:S.height-2*D})}}else{T=S.x+S.width/2,C=S.y+S.height/2;const N=S.x*$+b/2,D=(S.x+S.width)*$+b/2,F=S.y*$+w/2,W=(S.y+S.height)*$+w/2,{rings:Z}=x;N<0&&(Z[0][0][0]-=N,Z[0][3][0]-=N,Z[0][4][0]-=N),F<0&&(Z[0][0][1]+=F,Z[0][1][1]+=F,Z[0][4][1]+=F),D>b&&(Z[0][1][0]-=D-b,Z[0][2][0]-=D-b),W>w&&(Z[0][2][1]+=W-w,Z[0][3][1]+=W-w)}}const L={type:"cim",data:{type:"CIMSymbolReference",symbol:m}};return this.rasterize(L,b,w,T,C,$,o,1,x)}rasterize(e,i,r,s,n,o,a,l=0,c=null,d=window.devicePixelRatio||1){const{data:h}=e;if(!h||h.type!=="CIMSymbolReference"||!h.symbol)return null;const{symbol:f}=h,m=this._canvas,y=d*IXe;m.width=i*y,m.height=r*y,a||(a=FC(f)),c||(c=BY(a,i,r,"legend")),m.width+=2*l,m.height+=2*l;const v=m.getContext("2d",{willReadFrequently:!0}),b=Cp.createIdentity();return b.translate(-s,-n),b.scale(o*y,-o*y),b.translate(i*y/2+l,r*y/2+l),v.clearRect(0,0,m.width,m.height),new Pfe(v,this._cimResourceManager,b,!0).drawSymbol(f,c),v.getImageData(0,0,m.width,m.height)}};function kXe(t,e,i,r){return e==="esriGeometryPolygon"?{rings:LY(XC(t.rings,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:e==="esriGeometryPolyline"?{paths:LY(XC(t.paths,{xmin:0,ymin:0,width:i,height:r}),-1*i/2,-1*r/2)}:null}function BY(t,e,i,r,s){const o=-e/2+1,a=e/2-1,l=i/2-1,c=-i/2+1;if(s&&(t==="esriGeometryPolygon"||t==="esriGeometryPolyline")){const d=kXe(s,t,e,i);if(d)return d}switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[o,0],[0,0],[a,0]]]};default:return r==="legend"?{rings:[[[o,l],[a,0],[a,c],[o,c],[o,l]]]}:{rings:[[[o,l],[a,l],[a,c],[o,c],[o,l]]]}}}const txt=Object.freeze(Object.defineProperty({__proto__:null,CIMSymbolRasterizer:Bfe},Symbol.toStringTag,{value:"Module"})),GE=new Bfe(null),Dk=Zt(22),qY=Zt(120),DR=Zt(50),TXe=1;async function EXe(t,e,i){const r=e?.size;let s=r!=null&&typeof r=="object"&&"width"in r?r.width:r,n=r!=null&&typeof r=="object"&&"height"in r?r.height:r;if(!s||!n)if(i==="esriGeometryPolygon")s=n=e.maxSize?Math.min(e.maxSize,Dk):Dk;else{const o=await C9(t,e,i);o&&(s=o.width,n=o.height),i==="esriGeometryPolyline"&&(s=e.maxSize?Math.min(e.maxSize,DR):DR),s=s!=null&&isFinite(s)?Math.min(s,qY):Dk,n=n!=null&&isFinite(n)?Math.max(Math.min(n,qY),TXe):Dk}return e.style==="legend"&&i==="esriGeometryPolyline"&&(s=DR),{width:s,height:n}}async function C9(t,e={},i){const r=e.cimOptions||e;i??(i=r.geometryType||FC(t?.data?.symbol));const{feature:s,fieldMap:n,viewParams:o}=r,a=await M9.resolveSymbolOverrides(t.data,s,null,n,i,null,o);if(!a)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:a},t.data.primitiveOverrides=void 0;const l=[];return Ba.fetchResources(a,GE.resourceManager,l),Ba.fetchFonts(a,GE.resourceManager,l),l.length>0&&await Promise.all(l),Ba.getEnvelope(a,null,GE.resourceManager)}async function MXe(t,e={}){const{node:i,opacity:r,symbolConfig:s}=e,n=s!=null&&typeof s=="object"&&"isSquareFill"in s&&s.isSquareFill,o=e.cimOptions||e,a=o.geometryType||FC(t?.data?.symbol),l=await EXe(t,e,a),{feature:c,fieldMap:d}=o,h=e?.geometry||n||a!=="esriGeometryPolygon"?"preview":"legend";let f=l;const m=l;if(e?.geometry&&(a==="esriGeometryPolygon"||a==="esriGeometryPolyline")&&(zt(l.width)<200||zt(l.height)<200)){const L=l.width>l.height?Zt(200)*l.height/l.width:Zt(200);f={width:l.width>l.height?Zt(200):Zt(200)*l.width/l.height,height:L}}const y=await GE.rasterizeCIMSymbolAsync(t,c,f,h,d,a,null,o.viewParams,o.allowScalingUp,e?.geometry?.toJSON());if(!y)return null;const{width:v,height:b}=y,w=document.createElement("canvas");w.width=v,w.height=b,w.getContext("2d").putImageData(y,0,0);const x=zt(m.width),S=zt(m.height),$=new Image(x,S);$.src=w.toDataURL(),$.ariaLabel=e.ariaLabel??null,$.alt=e.ariaLabel??"",r!=null&&($.style.opacity=`${r}`);let T=$;if(e.cssEffectFilter){const C={shape:{type:"image",x:0,y:0,width:x,height:S,src:$.src},fill:null,stroke:null,offset:[0,0]};T=V_([[C]],[x,S],e)}return i&&T&&i.appendChild(T),T}const CXe=Object.freeze(Object.defineProperty({__proto__:null,getCIMSymbolPreviewSize:C9,previewCIMSymbol:MXe},Symbol.toStringTag,{value:"Module"})),xj=30,Sj=12,$j=24,qfe=[255,255,255],eP=[200,200,200],py=[128,128,128],PXe=20,AXe=5;function LXe(t){return t.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function OXe(t){return t.declaredClass==="esri.symbols.PictureMarkerSymbol"}function RXe(t){return t.declaredClass==="esri.symbols.SimpleLineSymbol"}function NXe(t){return t.declaredClass==="esri.symbols.TextSymbol"}function DXe(t,e){const i=t.length-1;return t.map((r,s)=>Zpe(r,s,i,e))}async function FXe(t,e,i,r,s,n,o){const a=e.legendOptions,l=a?.customValues,c=o||await VXe(t,i),d=e.stops,h=!!c,f=!!l,m=e.minSize!=null&&e.maxSize!=null,y=d&&d.length>1,v=!!e.target;if(!h||!f&&!(m||y&&!v))return;const b=Z3(c);let w=!1,x=null,S=null;x=b&&!y?WC([e.minDataValue,e.maxDataValue]):l??await BXe(e,c,r,s?.type);const $=t?.authoringInfo,T=$?.type==="univariate-color-size",C=T&&$?.univariateTheme==="above-and-below",L=!!_u(t,"reference-size"),N=!!_u(t,"spike");if(!x&&y&&(x=d.map(V=>V.value),w=d.some(V=>!!V.label),t.type==="flow"&&(x=WC(x)),w&&(S=d.map(V=>V.label))),b&&x!=null&&x?.length>2&&!C&&(x=[x[0],x[x.length-1]]),!x)return null;T&&x?.length!==5&&(x=Wfe({minSize:x[0],maxSize:x[x.length-1]}));const D=b?zXe(t,x):null,F=kHe(c),W=w?null:DXe(x,n);return(await Promise.all(x.map(async(V,A)=>{let q=b?D[A]:await Db(e,c,V,r,s?.type),J=q;L&&(q*=$j/e.maxSize||1,J=$j);const ee=HXe(c,q,t,A);return N&&ee.type==="cim"&&(J=await C9(ee)),{value:V,symbol:ee,label:w?S[A]:W[A],size:J,outlineSize:F}}))).reverse()}function zXe(t,e){const i=t?.authoringInfo,r=i?.type==="univariate-color-size";let s=[Sj,xj];if(r){const n=e[0],o=e[e.length-1],a=Sj,l=xj;s=e.map(c=>a+(c-n)/(o-n)*(l-a))}return r&&i?.univariateTheme==="below"&&s.reverse(),s}function jXe(t,e){const i=t.classBreakInfos,r=i.length,s=r<2||!(e>=2)?i[0].symbol.clone():i[r-1].symbol.clone();return t.visualVariables?.some(o=>o.type==="color")&&(s.type.includes("3d")?Gfe(s):Hfe(s)),s}async function VXe(t,e){if(t.type==="flow")return Ype(t,e);if(t.type==="pie-chart")return new Ni({color:null,outline:t.outline?.width?t.outline:new sr});let i=null,r=null;if(t.type==="simple")i=t.symbol;else if(t.type==="class-breaks"){const s=t.classBreakInfos;i=s&&s[0]&&s[0].symbol,r=s.length>1}else if(t.type==="unique-value"){const s=t.uniqueValueInfos;i=s?.[0]?.symbol,r=s!=null&&s.length>1}if(!i||UXe(i))return null;if(i=i.clone(),e||r)if(i.type.includes("3d"))Gfe(i);else if(_u(t,"reference-size")&&i.type==="cim")m9(i,{color:e??(t.type!=="class-breaks"?new ne(eP):null)});else if(_u(t,"spike")&&i.type==="cim"){const s=new ne(eP),n=new ne(py),o=i.data.symbol?.type==="CIMPointSymbol"?i.data.symbol:null,a=!!o?.symbolLayers?.find(({type:d})=>d==="CIMSolidStroke")?.colorLocked;let l,c=e??void 0;if(c){const d=$pe(c),h=oue();(!h&&d>225||h&&d<25)&&(c=s,l=a?n:s)}else c=s,l=a?n:s;efe(i,{color:c,strokeColor:l})}else Hfe(i);return i}function UXe(t){return Qa(t)?t.symbolLayers?.some(e=>e?.type==="fill")??!1:t?.type.includes("fill")??!1}function Gfe(t){t.type==="line-3d"?t.symbolLayers.forEach(e=>{e.material={color:py}}):t.symbolLayers.forEach(e=>{e.type!=="icon"||e.resource?.href?e.material={color:eP}:(e.material={color:qfe},e.outline={color:py,size:1.5})})}function Hfe(t){const e=oue();t.type==="cim"?Khe(t,new ne(eP)):t.type.includes("line")?t.color=py:(t.color=e?py:qfe,t.type==="simple-marker"&&(t.outline?t.outline?.color?.toHex()==="#ffffff"&&(t.outline.color=py):t.outline={color:py,width:1.5}))}async function BXe(t,e,i,r){const s=(await K(async()=>{const{getSizeRangeAtScale:a}=await Promise.resolve().then(()=>Fg);return{getSizeRangeAtScale:a}},void 0)).getSizeRangeAtScale(t,i,r),n=s&&Wfe(s);if(!s||!n)return;let o=n.map(a=>qXe(a,t,s));o=WC(o);for(let a=1;a<o.length-1;a++){const l=await GXe(t,e,o[a],o[a-1],i,r);l&&(o[a]=l[0],n[a]=l[1])}return o}function Wfe(t){const e=t.minSize,i=t.maxSize,r=AXe,s=(i-e)/(r-1),n=[];for(let o=0;o<r;o++)n.push(e+s*o);return n}function qXe(t,e,i){const r=i.minSize,s=i.maxSize,n=e.minDataValue,o=e.maxDataValue;let a;return t<=r?a=n:t>=s?a=o:a=(t-r)/(s-r)*(o-n)+n,a}async function GXe(t,e,i,r,s,n){const o=await Db(t,e,i,s,n),a=await Db(t,e,r,s,n),l=HC(i),c=l.fractional,d=PXe;let h=l.integer,f=null,m=null;i>0&&i<1&&(f=10**c,h=HC(i*=f).integer);for(let y=h-1;y>=0;y--){const v=10**y;let b=Math.floor(i/v)*v,w=Math.ceil(i/v)*v;f!=null&&(b/=f,w/=f);let x=(b+w)/2;[,x]=WC([b,x,w],{indexes:[1]});const S=await Db(t,e,b,s,n),$=await Db(t,e,w,s,n),T=await Db(t,e,x,s,n),C=DE(o,S,a,null),L=DE(o,$,a,null),N=DE(o,T,a,null);let D=C.previous<=d,F=L.previous<=d;if(D&&F&&(C.previous<=L.previous?(D=!0,F=!1):(F=!0,D=!1)),D?m=[b,S]:F?m=[w,$]:N.previous<=d&&(m=[x,T]),m)break}return m}async function Db(t,e,i,r,s){const{getSize:n}=await K(()=>Promise.resolve().then(()=>Fg),void 0);return n(t,i,{scale:r,view:s,shape:e.type==="simple-marker"?e.style:null})}function HXe(t,e,i,r){i?.authoringInfo?.type==="univariate-color-size"&&i?.authoringInfo?.univariateTheme==="above-and-below"&&i.type==="class-breaks"&&(t=jXe(i,r));const s=t.clone();if(Qa(s))Z3(s)||s.symbolLayers.forEach(n=>{n.type!=="fill"&&(n.size=e)});else if(LXe(s))s.size=e;else if(OXe(s)){const n=s.width,o=s.height;s.height=e,s.width=e*(n/o)}else RXe(s)?s.width=e:NXe(s)?s.font&&(s.font.size=e):s.type==="cim"&&_u(i,"reference-size")?m9(s,{innerDotSize:e,outerRingSize:$j}):s.type==="cim"&&_u(i,"spike")&&efe(s,{defaultHeight:e,primitiveOverrides:null});return s}function WXe(t){const i=Math.floor(Math.log10(Math.abs(t)))+1,r=i<4||i>6?4:i,s=1e6,n=Math.abs(t)>=s?"compact":"standard";return Sf(t,{notation:n,minimumSignificantDigits:2,maximumSignificantDigits:r})}const GY=16,JXe="https://utility.arcgis.com/sharing/tools/legend",ZXe="esri.layers.ImageryLayer",YXe="esri.layers.ImageryTileLayer",KXe="esri.layers.WCSLayer",Fk=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,XXe=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),zk=new Ni({size:6,outline:{color:[128,128,128,.5],width:.5}}),QXe=new Vn({style:"solid"});function Ij(t){return t.type==="flow"}function Jfe(t){return t.type==="vector-field"}function Zfe(t){return t.type==="raster-colormap"}function Yfe(t){return t.type==="raster-stretch"}function Kfe(t){return t.type==="raster-shaded-relief"}function Fb(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function Bm(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function qm(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function Xfe(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function eQe(t){return P9(t)||A9(t)||L9(t)||tQe(t)}function tQe(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function P9(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function A9(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function L9(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function Qfe(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function eme(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function iQe(t,e){return Fb(t)||Bm(t)||qm(t)||Xfe(t)||Qfe(t)||eme(t)?e.type==="2d"||Gpe(t):Yfe(t)||Zfe(t)||Kfe(t)||P9(t)||A9(t)||L9(t)||Jfe(t)||Ij(t)}function rQe(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function FR(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function sQe(t){return t.declaredClass==="esri.layers.VoxelLayer"}function nQe(t){return t.declaredClass==="esri.layers.WMSLayer"}function oQe(t){return t.declaredClass==="esri.layers.WMTSLayer"}function zR(t){return t.declaredClass==="esri.layers.MapImageLayer"}function HY(t){return t.declaredClass==="esri.layers.TileLayer"}function $v(t){return t.declaredClass===ZXe}function jk(t){return t.declaredClass===YXe}function aQe(t){return t.declaredClass===KXe}function lQe(t){return t.type==="stretch-ramp"}function cQe(t){return("authoringInfo"in t?t?.authoringInfo:null)?.type==="univariate-color-size"}function uQe(t){const e="authoringInfo"in t?t?.authoringInfo:null;return e?.type==="univariate-color-size"&&e?.univariateTheme==="above-and-below"}function WY(t){return"sublayers"in t}function JY(t){return t&&"symbol"in t}function dQe(t,e){const{field:i,field2:r,field3:s,fieldDelimiter:n,valueExpression:o}=t;if(!i)return null;const a=!i&&!o||!r&&!s?[e]:e?.toString().split(n||""),l=i?{[i]:a?.[0]}:null;return l&&(r&&(l[r]=a?.[1]),s&&(l[s]=a?.[2])),l}const hQe=new Ni({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Iv={};const jR=new WeakMap;let Bi=class extends _e{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._loading=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._clusterSizeVariable=null,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilter=null,this._layerDisplayFilterClause=null,this.children=new ue,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this.addHandles([ks(()=>this.children,"change",i=>{const{added:r,removed:s}=i;r.forEach(n=>{const o=`activeLayerInfo-ready-watcher-${n.layer.uid}`;this.addHandles(de(()=>n.ready,e,Fi),o)}),s.forEach(n=>this.removeHandles(n.layer.uid)),e()})]),this.keepCacheOnDestroy||(Iv={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Iv=null),this._layerDefinitionExpressionClause=null}get cssEffectFilter(){const{layer:e,scale:i}=this,r="effect"in e?e.effect:null;if(!r)return null;const s=new kl({effect:r});return s.endTransition(),s.scale=i,VHe(s)}get loading(){return this.children.length>0?this.children.some(e=>e.loading):this._loading}get opacity(){const e=this.layer.opacity,i=this.parent?.opacity,r=this.layer.parent,s=r&&"uid"in r?this._getParentLayerOpacity(r):null;return i!=null?i*e:s!=null?s*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?!!("displayFilterInfo"in e&&e.displayFilterInfo&&qm(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(this._loading=!0,!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");const i=Array.from(e,r=>{if(N6(r))return this._getRendererLegendElements(r.renderer,{title:r.title});if(r.featureSet?.features.length){const s=r.layerDefinition,n=s?.drawingInfo,o=n&&D7e(n.renderer),a=XXe.read(s.geometryType);return o?this._getRendererLegendElements(o,{title:r.name,geometryType:a}):(X.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{const r=[],s=await Promise.allSettled(i);for(const n of s)if(n.status==="fulfilled")for(const o of n.value??[])r.push(o);this.legendElements=r}catch(r){X.getLogger(this).warn("error while building legend for layer!",r)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForRenderer(e){try{this._loading=!0;const i=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=i?await this._getRendererLegendElements(e):[]}catch(i){X.getLogger(this).warn("error while building legend for layer!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForFeatureReduction(e){try{this._loading=!0,await this._waitForLayerViewUpdate(this.layerView);const i=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=i?await this._getLegendElementsForFeatureReduction(e):[]}catch(i){X.getLogger(this).warn("error while building legend for layer!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async buildLegendElementsForTools(){this._loading=!0;const e=this.layer;if(sQe(e))await this._constructLegendElementsForVoxelLayer();else if(oQe(e))this._constructLegendElementsForWMTSlayer();else if(nQe(e))await this._constructLegendElementsForWMSSublayers();else if(rQe(e))await this._constructLegendElementsForBuildingSceneLayer();else if(zR(e)||HY(e)||FR(e))await this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let i="default";if($v(e)&&(i=(e?.rasterFunction?.functionName||"default")+"_"+(e.bandIds?.length?e.bandIds.join(""):"###")),jk(e)||e.type==="link-chart")return;await this._getLegendLayers(`${e.uid}-${i}`).then(async r=>{this.legendElements=[];const s=r.map(async n=>{if($v(e)){const a=de(()=>[e.rasterFunction,e.bandIds],()=>m_(async()=>{Iv.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this.addHandles(a,"imageryLayers-watcher")}const o=this._generateSymbolTableElementForLegendLayer(n);o?.infos.length&&($v(e)&&(o.title=e.title),this.legendElements.push(o))});await Promise.allSettled(s)}).catch(r=>{X.getLogger(this).warn("Request to server for legend has failed!",r)})}this._loading=!1,this.notifyChange("ready")}async _isLayerInCurrentView(e){return this._checkFeatureCountForExpression(e,this.view.extent)}_getParentLayerOpacity(e){let i=1;const r=e.parent;return r&&"uid"in r&&(i=this._getParentLayerOpacity(r)),e.opacity*i}_isGroupActive(){return this.children.some(e=>e.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const i="valueExpression"in e?e.valueExpression:null;return Fk.test(i)?!0:!!("visualVariables"in e?e.visualVariables:null)?.some(s=>this._isScaleDrivenSizeVariable(s))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case"simple":return this._isScaleDrivenSymbol(e.symbol);case"class-breaks":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some(i=>this._isScaleDrivenSymbol(i.symbol));case"unique-value":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some(i=>this._isScaleDrivenSymbol(i.symbol))}return!1}_isScaleDrivenSymbol(e){if(e?.type==="cim"){const{primitiveOverrides:i,minScale:r,maxScale:s}=e.data,n=i?.some(o=>(o.valueExpressionInfo?.expression||"").includes("$view.scale"))??!1;return r!=null||s!=null||n}return!1}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const i=e,r=i.minSize,s=i.maxSize;return!(typeof r!="object"||!r||!this._isScaleDrivenSizeVariable(r))||!(typeof s!="object"||!s||!this._isScaleDrivenSizeVariable(s))||Fk.test(i.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(r=>this._isLayerScaleDriven(r));const i=e.parent;if(e.loaded===!1&&i&&zR(i)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const r of i.sourceJSON.layers??[])if(r.id===e.source.mapLayerId&&(r.minScale>0||r.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxelLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");const e=this.layer;this.addHandles(de(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(de(()=>e.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");const i=e.getVariableStyle(null),r=[];if(i){if(i.uniqueValues?.length){const s=[];i.uniqueValues.forEach(n=>{n.enabled&&s.push({label:n.label||`${n.value}`,value:n.value,symbol:new Vn({color:n.color,outline:null})})}),s.length&&r.push({type:"symbol-table",title:i.label,infos:s})}else if(i.transferFunction){const{colorStops:s,stretchRange:n}=i.transferFunction,o=s.toArray().reverse(),a=n.map((c,d)=>`${d===0?Wpe:Jpe} ${WXe(c)}`).reverse(),l=o.map(c=>({color:c.color,value:null,label:null}));l[0].label=a[0],l[l.length-1].label=a[1],r.push({type:"color-ramp",title:i.label,infos:l,preview:jm(o.map(c=>c.color))})}}await this._generatePreviewsForLegendElements(r,{opacity:e.opacity}),this.legendElements=r,this._loading=!1,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this._loading=!0,this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");const e=this.layer.activeLayer;this.addHandles(de(()=>{const{layer:r}=this;return r&&"activeLayer"in r&&r.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");const i=e.styleId?e.styles?.find(({id:r})=>r===e.styleId)?.legendUrl:void 0;i&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:i,opacity:this.opacity}]}]),this._loading=!1,this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this._loading=!0,this.legendElements=[],this.removeHandles("wms-sublayers-watcher");const e=this.layer;let i=null;(e.customParameters||e.customLayerParameters)&&(i={...e.customParameters,...e.customLayerParameters}),this.addHandles(de(()=>{const{layer:r}=this;return r&&"sublayers"in r&&r.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,i),this._loading=!1,this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,i){const r=this.layer,s=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const n=this.sublayerIds?.map(a=>r.findSublayerById(a))?.filter(Ei)??[],o=n.length?n:e.toArray();for(const a of o){const l=de(()=>[a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(l,"wms-sublayers-watcher"),!this.respectLayerVisibility||a.visible&&a.legendEnabled){const c=await this._generateSymbolTableElementForWMSSublayer(a,i);c?.infos.length&&s.unshift(c)}}return s}async _generateSymbolTableElementForWMSSublayer(e,i){if(!e.legendUrl&&e.sublayers){const r=(await this._generateLegendElementsForWMSSublayers(e.sublayers,i)).filter(s=>s);return{type:"symbol-table",title:e.title,infos:r}}return this._generateSymbolTableElementForLegendUrl(e,i)}async _generateSymbolTableElementForLegendUrl(e,i){let r=e.legendUrl;if(!r)return;const s={type:"symbol-table",title:e.title||e.name||String(e.id??""),infos:[]};i&&(r=Io(r,i));let n=null;const o=e.layer?.opacity;try{n=(await xe(r,{responseType:"image"})).data,n&&(n.style.opacity=o)}catch{}return s.infos.push({src:r,preview:n,opacity:o}),s}_getLegendLayers(e,i){const r=Iv&&Iv[e];return r?Promise.resolve(r):this._legendRequest(i).then(s=>{const n=s.layers;return Iv[e]=n,n})}_legendRequest(e){const i=this.layer;let r={f:"json",dynamicLayers:e};if($v(i)){const n=i.exportImageServiceParameters.rasterFunction;if(n&&(r.renderingRule=JSON.stringify(n.functionDefinition?.toJSON()||n.toJSON())),i.bandIds&&(r.bandIds=i.bandIds.join()),i.raster||i.viewId||i.customParameters){const{raster:o,viewId:a,customParameters:l}=i;r={raster:o,viewId:a,...r,...l}}}let s=i.url.replace(/(\/)+$/,"");if("version"in i&&+i.version>=10.01){const n=s.indexOf("?");n>-1?s=s.slice(0,n)+"/legend"+s.slice(n):s+="/legend"}else{const n=s.toLowerCase().indexOf("/rest/"),o=n===-1?s:s.slice(0,n)+s.slice(n+5);s=JXe+"?soapUrl="+encodeURI(o)+"&returnbytes=true"}return xe(s,{query:r}).then(n=>n.data)}async _constructLegendElementsForBuildingSceneLayer(){this._loading=!0,this.legendElements=[],this.removeHandles("sublayers-watcher");const e=this.layer;this.addHandles(de(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity)}catch(i){X.getLogger(this).warn("Request to server for legend has failed!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForBuildingSublayers(e,i){let r=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const s=e.toArray();for(const n of s){const o=de(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(o,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const a=n?.opacity!=null?n.opacity:null,l=a!=null?a*i:i;if(n.type==="building-group"){const c={type:"symbol-table",title:n.title,infos:[]},d=await this._generateLegendElementsForBuildingSublayers(n.sublayers,l);c.infos.push(...d),r=[c,...r]}else n.renderer&&(r=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:l,sublayer:n}),...r])}}return r.filter(n=>!!n&&(!("infos"in n)||!n.infos||n.infos.length>0))}async _constructLegendElementsForSublayers(){this._loading=!0,this.removeHandles("sublayers-watcher");const e=this.layer;if(!(zR(e)||HY(e)||FR(e))||this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],this._loading=!1,void this.notifyChange("ready");this.addHandles(de(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity)}catch(i){X.getLogger(this).warn("Request to server for legend has failed!",i)}finally{this._loading=!1,this.notifyChange("ready")}}async _generateLegendElementsForSublayers(e,i,r){const s=this.layer;let n=[];this.addHandles(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let o=e.toArray();!r&&this.sublayerIds&&this.sublayerIds.length&&(o=FR(s)?this.sublayerIds.map(a=>s.findSublayerForSubtypeCode(a)).filter(Ei):this.sublayerIds.map(a=>s.findSublayerById(a)).filter(Ei));for(const a of o){const l=de(()=>[a.renderer,a.opacity,a.title,a.visible,a.legendEnabled],()=>this._constructLegendElementsForSublayers());this.addHandles(l,"sublayers-watcher");const c=a.createQuery().where,d=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView(c),h=!this.respectLayerVisibility||a.visible&&a.legendEnabled&&this._isSublayerInScale(a);if(d&&h){const f=a?.opacity!=null?a.opacity:null,m=f!=null?f*i:i,y=!WY(a)||a.originIdOf("renderer")>2&&!a.sublayers;if(a.renderer&&y)await a.load(),n=[...await this._getRendererLegendElements(a.renderer,{title:a.title,opacity:m,sublayer:a}),...n];else if(WY(a)){const v=await this._generateSymbolTableElementForSublayer(a,m,r);v&&n.unshift(v)}}}return n.filter(a=>!!a&&(!("infos"in a)||!a.infos||a.infos.length>0))}async _generateSymbolTableElementForSublayer(e,i,r){if(!r){r=new Map;const n=this.layer,o=e.source;let a=null;if(!(!o||o.type==="map-layer"&&o.mapLayerId===e.id&&(!o.gdbVersion||o.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("labelsVisible")>2){const c=new Yo({layer:this.layer});a=c.hasDynamicLayers?c.dynamicLayers:null,c.destroy()}const l=a||`${n.uid}-default`;(await this._getLegendLayers(l,a)).forEach(c=>r.set(c.layerId,c))}const s=r.get(e.id);if((!s||s?.subLayerIds&&s.defaultVisibility)&&e.sublayers){const n=await this._generateLegendElementsForSublayers(e.sublayers,i,r);return{type:"symbol-table",title:e.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(s,e,i)}_generateSymbolTableElementForLegendLayer(e,i,r){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,i))return null;const s=i?.renderer;let n=i?.title||e.layerName;if(s&&(!i||i?.originIdOf("renderer")>2)){const l=i?.title||this._getRendererTitle(s,i);l&&(n&&typeof l!="string"&&"title"in l&&(l.title=n),n=l)}const o={type:"symbol-table",title:n,legendType:e.legendType||null,infos:[]},a=i?this._sanitizeLegendForSublayer(e.legend.slice(),i):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach(l=>{const c={type:"symbol-table",title:l.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter(d=>d.groupId===l.id),e.layerId,l.heading||o.title||i?.title,r)};c.infos?.length>0&&o.infos.push(c)}):o.infos=this._generateSymbolTableElementInfosForLegendLayer(a,e.layerId,o.title||i?.title,r),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(e,i,r,s){return e.map(n=>{let o=n.url;if(n.imageData&&n.imageData.length>0)o=`data:image/png;base64,${n.imageData}`;else{if(o.startsWith("http"))return null;o=ySe(`${this.layer.url}/${i}/images/${o}`)}let a=n.label;return a==="<all other values>"&&(a="others"),{previewAriaLabel:a||r,label:a,src:o,opacity:s??this.opacity,width:n.width,height:n.height}}).filter(Ei)}_isSublayerInScale(e){const i=e.minScale||0,r=e.maxScale||0;return!(i>0&&i<this.scale||r>this.scale)}_isLegendLayerInScale(e,i){const r=i||this.layer;let s=null,n=null,o=!0;return!r.minScale&&r.minScale!==0||!r.maxScale&&r.maxScale!==0?(e.minScale===0&&r.tileInfo&&(s=r.tileInfo.lods[0].scale),e.maxScale===0&&r.tileInfo&&(n=r.tileInfo.lods[r.tileInfo.lods.length-1].scale)):(s=Math.min(r.minScale,e.minScale)||r.minScale||e.minScale,n=Math.max(r.maxScale,e.maxScale)),(s>0&&s<this.scale||n>this.scale)&&(o=!1),o}_sanitizeLegendForSublayer(e,i){if("version"in this.layer&&+this.layer.version<10.1||e.length===0)return e;const r=i.renderer,s=e.some(a=>a.values);let n=0,o=null;return s&&e.some((a,l)=>(a.values||(n=l,o=a,o.label||(o.label="others")),o!=null)),r?r.type==="unique-value"?o&&(e.splice(n,1),e.push(o)):r.type==="class-breaks"&&(o&&e.splice(n,1),r.legendOptions?.order||e.reverse(),o&&e.push(o)):o&&(e.splice(n,1),e.push(o)),e}async _getRendererLegendElements(e,i={}){if(!iQe(e,this.view))return X.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(eQe(e))return this._constructPointCloudRendererLegendElements(e,i);if(Qfe(e))return this._constructDotDensityRendererLegendElements(e);const r=await this._loadRenderer(e);return eme(r)?this._constructPieChartRendererLegendElements(r):this._constructRendererLegendElements(r,i)}async _getLegendElementsForFeatureReduction(e){let i=null;return e.type==="binning"?i=e.renderer:e.type==="cluster"&&(i=this._getClusterRenderer(e)),i?this._getRendererLegendElements(i,{isFeatureReductionRenderer:!0}):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??""}async _constructPointCloudRendererLegendElements(e,i={}){const r=i.title,s=[];let n=null,o=null;if(P9(e))n={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(zk,a.color)})});else if(A9(e)){const a=e.stops;let l=null;if(a?.length&&(a.length===1&&(l=a[0].color),!l)){const d=a[0].value,h=a[a.length-1].value;d!=null&&h!=null&&(l=Qpe(d+(h-d)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(zk,l||zk.color)}]};const c=OJe(e.stops??[])??[];o={type:"color-ramp",title:r||this._getPointCloudRendererTitle(e),infos:c,preview:jm(c.map(d=>d.color))}}else L9(e)&&(n={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach(a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(zk,a.color)})}));return n?.infos.length&&s.push(n),o?.infos.length&&s.push(o),await this._generatePreviewsForLegendElements(s,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!e.colorModulation}}),s}async _getElementInfoForDotDensity(e,i){const{color:r,label:s,valueExpressionTitle:n}=i,{backgroundColor:o,outline:a,dotSize:l}=e,c=this.cssEffectFilter,d=l+"-"+r+"-"+o+"-"+(a&&JSON.stringify(a.toJSON()))+"-"+c,h=this._dotDensityUrlCache,f=h.has(d)?h.get(d):mWe(e,r);h.set(d,f);const m={shape:{type:"image",x:0,y:0,width:f.width,height:f.height,src:f.src},fill:null,stroke:null,offset:[0,0]},y=V_([[m]],[f.width,f.height],{cssEffectFilter:this.cssEffectFilter});return{opacity:1,src:f.src,preview:y,width:f.width,height:f.height,previewAriaLabel:s||n}}async _constructDotDensityRendererLegendElements(e){const i=e.calculateDotValue(this.view.scale),r=e.legendOptions?.unit,s={type:"symbol-table",title:{value:i&&Math.round(i),unit:r||""},infos:[]};for(const n of e.attributes){const o=await this._getElementInfoForDotDensity(e,n);o.label=n.label||n.valueExpressionTitle||n.field,s.infos.push(o)}return[s]}async _constructPieChartRendererLegendElements(e){const i=[];let r=null;const s=e.outline;e.attributes.forEach(a=>{const l=new Ni({color:a.color,outline:s}),c=a.label||a.valueExpressionTitle||a.field;i.push({label:c,symbol:l})});const n=i.length?[...i]:[];if(e.othersCategory?.color&&e.othersCategory?.threshold!==0){const a=new Ni({color:e.othersCategory.color,outline:s});r=e.othersCategory.label||"Other",i.push({label:r,symbol:a})}if(e.defaultColor?.a){const a=new Ni({color:e.defaultColor,outline:s});i.push({label:e.defaultLabel,symbol:a})}const o=await this._getVisualVariableLegendElements(e,this.layer)||[];if(i.length){o.unshift({type:"symbol-table",title:null,infos:i});const a=n.filter(c=>c.label!==r).map(c=>c.symbol.color).filter(Boolean),l=yWe(a,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,cssEffectFilter:this.cssEffectFilter,outline:s});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:i,preview:l})}return await this._generatePreviewsForLegendElements(o,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter}),o}async _getWhereClause(e,i,r){const s=await V6(e,r),n=new Set,{field:o,field2:a,field3:l}=i;If(n,r,[o,a,l]),await Hs(n,r,null,i.valueExpression);const c=new Set(Array.from(n,h=>h.toLowerCase()));return s?.fieldNames.map(h=>h.toLowerCase())?.some(h=>!c.has(h))?null:s}async _processDefinitionExpression(e,i){if(!("definitionExpression"in e))return;const r=e.definitionExpression;r&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==r&&(this._layerDefinitionExpressionClause=await this._getWhereClause(r,i,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=r}async _processDisplayFilter(e,i){if(!("displayFilterInfo"in e))return;const r=e.displayFilterInfo?fUe(e.displayFilterInfo,this.view):null;return r?.where?this._layerDisplayFilter?.id!==r?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(r.where,i,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilter=r,r}async _constructRendererLegendElements(e,i={}){const{title:r,sublayer:s,isFeatureReductionRenderer:n}=i,o=s||this.layer,a=_u(e,"reference-size"),l=_u(e,"spike"),c=n&&"renderer"in o&&o.renderer?o.renderer:e;let d=null;qm(c)&&(await this._processDefinitionExpression(o,c),d=await this._processDisplayFilter(o,c)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const h=await this._getVisualVariableLegendElements(e,o)||[],f={type:"symbol-table",title:r||this._getRendererTitle(e,o),infos:[]};let m=null,y=!1;const v=new Set;if(Ij(e)&&!this._hasSizeRamp){const $=await Ype(e);f.infos.push({label:null,symbol:$})}else if(cQe(e)){let $=r;const T=uQe(e)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",C=h.findIndex(W=>W.type==="color-ramp"),L=C!==-1?h.splice(C,1)[0]:null,N=h.findIndex(W=>W.type==="size-ramp"),D=N!==-1?h.splice(N,1)[0]:null,F=[];L&&($=L.title,F.push(L)),D&&($=D.title,F.push(D)),F.length>0&&h.push({type:T,title:$,infos:F})}else if(Xfe(e)){const $=DJe(e);h.push({type:"heatmap-ramp",title:r||this._getRendererTitle(e,o),infos:$,preview:jm($.map(T=>T.color),{cssEffectFilter:this.cssEffectFilter})})}else if(qm(e)){const $=e.authoringInfo;if($&&$.type==="relationship"){const{numClasses:T,field1:C,field2:L}=$,N=$.focus;if(T&&C&&L){const D=[C,L];let F=Rpe(N)||0;for(const Z of D){const{field:V,normalizationField:A,label:q}=Z,J=q||{field:this._getFieldAlias(V,o),normField:A&&this._getFieldAlias(A,o)},ee=hQe.clone();ee.angle=F,f.infos.push({label:J,symbol:ee}),v.add(ee),F+=90}const W=fWe({focus:N,numClasses:T,infos:e.uniqueValueInfos??[]});h.unshift(W)}}else if($v(this.layer)||jk(this.layer)){const{uniqueValueInfos:T}=e;if(T)for(const C of T)C.symbol&&await this._checkClausesForUVR(c,C.value)&&f.infos.push({label:C.label||C.value,value:C.value,symbol:C.symbol})}else{const{field:T,field2:C,field3:L,fieldDelimiter:N,valueExpression:D,defaultSymbol:F}=e,W=!(!T&&!D||!C&&!L),Z=d?d.title:null,V=[],{uniqueValueGroups:A}=e;if(A)for(const q of A){const J={type:"symbol-table",title:Z||q.heading,infos:[]},{classes:ee}=q;if(ee)for(const re of ee){const{symbol:me,values:ze}=re;if(me){const Ce=[],at=[];for(const ae of ze??[]){const{value:Ie,value2:qe,value3:Ge}=ae,Nt=[],bt=[];(T||D)&&(Nt.push(Ie),bt.push(this._getDomainName(T,Ie,o)??FE(Ie,zE(o,T,this.view.timeZone)))),C&&(Nt.push(qe),bt.push(this._getDomainName(C,qe,o)??FE(qe,zE(o,C,this.view.timeZone)))),L&&(Nt.push(Ge),bt.push(this._getDomainName(L,Ge,o)??FE(Ge,zE(o,L,this.view.timeZone)))),Ce.push(W?Nt.join(N||""):Nt[0]),at.push(bt.join(" - "))}const vt=Ce.join(", ");let Rt=re.label;if(!Rt){const ae=at.filter(Boolean);Rt=ae.length?ae.join(", "):vt}let Cs=me;Cs.type==="cim"&&a&&(Cs=Cs.clone(),m9(Cs,{innerDotSize:.5*GY,outerRingSize:GY}));let ac=!1;for(const ae of Ce)if(ac=await this._checkClausesForUVR(c,ae),ac)break;ac&&J.infos.push({label:Rt,value:vt,symbol:Cs})}}J.infos.length&&V.push(J)}if(V.length){const q=V[0];if(V.length===1&&"title"in q&&!q.title){const J=q.infos?.filter(JY)??[];f.infos.push(...J)}else F&&(V.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:F}]}),y=!0),f.infos.push(...V);r||e.legendOptions?.title||e.valueExpressionTitle||(f.title=null)}}e.defaultSymbol&&!y&&(f.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),y=!0)}else if(Bm(e)){if(!a&&!l){if(m=this._isUnclassedRenderer(e),!m||!this._hasSizeRamp){const $=e.classBreakInfos.filter(({symbol:C})=>C),T=e.legendOptions?.order==="ascending-values";for(const{label:C,minValue:L,maxValue:N,symbol:D}of $){const F=C||(m?null:`${L} - ${N}`),W={previewAriaLabel:F||f.title||o.title,label:F,value:[L,N],symbol:D};T?f.infos.push(W):f.infos.unshift(W)}m&&(f.title=null),this._updateInfosForClassedSizeRenderer(e,f.infos)}e.defaultSymbol&&!m&&(f.infos.push({label:e.defaultLabel||"others",symbol:e.defaultSymbol}),y=!0)}}else if(Yfe(e))if(jk(this.layer)||aQe(this.layer)){const $=await this._constructTileImageryStretchRendererElements(e);lQe($)?h.push($):f.infos=$}else{const $=this.layer;let T,C;e.customStatistics?.length&&({min:T,max:C}=e.customStatistics[0]);let L=[],N=$.serviceRasterInfo;if($.rasterFunction)try{N=await $.generateRasterInfo($.rasterFunction)}catch{}const D=GC(N.pixelType);if(N.bandCount===1){const F=$.bandIds?.[0]||0;T=T??(N.statistics?N.statistics[F].min:D[0]),C=C??(N.statistics?N.statistics[F].max:D[1]),T||C?h.push(await this._getStretchLegendElements(e,{min:T,max:C})):this._getServerSideLegend()}else if($.bandIds&&$.bandIds.length===1)T=T??(N.statistics?N.statistics[$.bandIds[0]].min:D[0]),C=C??(N.statistics?N.statistics[$.bandIds[0]].max:D[1]),T||C?h.push(await this._getStretchLegendElements(e,{min:T,max:C})):this._getServerSideLegend();else if(N.bandCount>=3){const{bandInfos:F}=N,{bandIds:W}=$;F.length>=N.bandCount?W?.length===3?(L=W.map(Z=>F[Z].name),f.infos=this._createSymbolTableElementMultiBand(L)):$.format==="lerc"?(L=[0,1,2].map(Z=>F[Z].name),f.infos=this._createSymbolTableElementMultiBand(L)):this._getServerSideLegend():$.format==="lerc"?(L=["band1","band2","band3"],f.infos=this._createSymbolTableElementMultiBand(L)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(Zfe(e))e.colormapInfos.forEach($=>{f.infos.push({label:$.label,value:$.value,symbol:this._getAppliedCloneSymbol(QXe,$.color)})});else if(Fb(e)){let $=e.symbol;switch(i.geometryType){case"point":$="pointSymbol"in o?o.pointSymbol:null;break;case"polyline":$="lineSymbol"in o?o.lineSymbol:null;break;case"polygon":$="polygonSymbol"in o?o.polygonSymbol:null}const T=this._clusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&T&&f.infos.push({previewAriaLabel:e.label||f.title||o.title,label:e.label,symbol:$})}else if(Jfe(e)){e.outputUnit&&(this.title="("+e.toJSON().outputUnit+")"),f.title=e.attributeField;const $=e.getClassBreakInfos();$?.length?$.forEach(T=>{f.infos.push({label:T.minValue+" - "+T.maxValue,symbol:T.symbol})}):f.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else Kfe(e)&&h.push(await this._getStretchLegendElements(e,{min:0,max:255}));const b=e.defaultSymbol;!b||y||Fb(e)||m&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||h.push({type:"symbol-table",infos:[{label:e.defaultLabel||"others",symbol:b}]}),f.infos.length&&h.unshift(f);const w=i.opacity==null?this.opacity:i.opacity,x=this._isTallSymbol("visualVariables"in e?e.visualVariables:null),S=$v(this.layer)||jk(this.layer);return await this._generatePreviewsForLegendElements(h,{opacity:w,symbolConfig:{isTall:x,isSquareFill:S},cssEffectFilter:this.cssEffectFilter},{arrowMarkerSymbols:v}),e=null,h}async _waitForLayerViewUpdate(e){await g_(()=>!e.updating)}async _checkFeatureCountForExpression(e,i){const r=this.layerView;if(!(r&&"createQuery"in r&&"queryFeatureCount"in r))return!0;try{await this._waitForLayerViewUpdate(r);const s=r.createQuery();return e&&(s.where=PJe(s.where,e)),i&&(s.geometry=i),await r.queryFeatureCount(s)>0}catch{return!0}}async _checkClausesForUVR(e,i){const r=dQe(e,i);return r?(!(!this._layerDefinitionExpressionClause&&this._layerDefinitionExpression&&this.respectLayerDefinitionExpression||!this._layerDisplayFilterClause&&this._layerDisplayFilter?.where)||await this._checkFeatureCountForExpression(`${e.field} = ${i}`))&&(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(r))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(r)):!0}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const i=e?.infos;return i?i.reduce((r,s)=>r.concat(this._getAllInfos(s)),[]):[e]}async _constructTileImageryStretchRendererElements(e){const i=this.layer,r=i.symbolizer.rasterInfo??i.raster.rasterInfo;let s,n;const o=e?.customStatistics?.length?e.customStatistics:r?.statistics;if(o)({min:s,max:n}=o[0]);else{const l=GC(r.pixelType);s=l[0],n=l[1]}if(i.hasStandardTime()&&(s=i.getStandardTimeValue(s),n=i.getStandardTimeValue(n)),r.bandCount===1||i.bandIds?.length===1)return this._getStretchLegendElements(e,{min:s,max:n});const a=(i?.bandIds?.length?i.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map(l=>r.bandInfos[l].name);return a.length<3?a.push(a[1]):a.length>3&&a.splice(3),this._createSymbolTableElementMultiBand(a)}async _getStretchLegendElements(e,i){const r=e.colorRamp?.toJSON(),s=NJe(r,i);return{type:"stretch-ramp",title:"",infos:s,preview:jm(s.map(n=>n.color))}}_getClusterSymbol(){const e=this.layer,i="featureReduction"in e&&e.featureReduction,r=i&&"symbol"in i&&i.renderer;return r&&r?.authoringInfo?.isAutoGenerated!==!0?null:i&&"symbol"in i?i.symbol:null}async _getSizeLegendElement(e,i,r,s){return{type:"size-ramp",title:this._clusterSizeVariable?this._getClusterTitle(i):e,infos:await FXe(r,i,await pj(r),this.scale,this.view,s,this._clusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const i=[],r=["red","green","blue"];return e.forEach((s,n)=>{i.push({label:{colorName:r[n],bandName:s},src:TJe[n],opacity:this.opacity??1})}),i}_updateInfosForClassedSizeRenderer(e,i){const r=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",s=e.classBreakInfos.some(n=>Z3(n.symbol));if(r&&s){const n=xj,o=Sj,a=e.classBreakInfos.length,l=(n-o)/(a>1?a-1:a);i.forEach((c,d)=>{c.size=n-l*d})}}_isTallSymbol(e){let i=!1,r=!1;if(e)for(let s=0;s<e.length&&(!i||!r);s++){const n=e[s];n.type==="size"&&(n.axis==="height"&&(i=!0),n.axis==="width-and-depth"&&(r=!0))}return i&&r}async _generatePreviewsForLegendElements(e,i,r){const s=[];for(const n of e)for(const o of n.infos??[])if("infos"in o&&o.infos&&s.push(this._generatePreviewsForLegendElements([o],i,r)),JY(o)&&o.symbol&&!o.preview){let a=!0;if(o.symbol.type==="cim"){const{minScale:l,maxScale:c}=o.symbol.data;(l&&l<this.scale||c&&c>this.scale)&&(a=!1)}a&&s.push(this._generateSymbolPreviewForInfo(o,{...i,clipBloomEffect:"theme"in n&&n.theme==="spike",cssEffectFilter:r?.arrowMarkerSymbols?.has(o.symbol)?null:i.cssEffectFilter},r?{applyScaleDrivenSize:!r.arrowMarkerSymbols?.has(o.symbol)}:void 0))}await Promise.all(s)}async _getSize(e,i){let r=e.size==null&&this._hasSizeRamp?Zt(22):e.size;if(this._scaleDrivenSizeVariable&&i?.applyScaleDrivenSize){const{getSize:s}=await K(()=>Promise.resolve().then(()=>Fg),void 0);r=s(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}return r}_getPreviewCIMOptions(e){return{style:"legend",cimOptions:{allowScalingUp:this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!e?.applyScaleDrivenSize),viewParams:this.isScaleDriven?{viewingMode:this.view?.type==="2d"?"map":this.view?.viewingMode,scale:this.view?.scale}:null}}}async _generateSymbolPreviewForInfo(e,i={},r){const{symbol:s}=e;try{if(i.size=await this._getSize(e,r),i.scale=!1,s.type==="cim"){const n=this._getPreviewCIMOptions(r);i={...i,...n}}e.preview=await Npe(s,i)}catch{e.preview=null,X.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${s?.type}`)}}_getClusterRenderer(e){this._clusterSizeVariable=null;const i="renderer"in this.layer?this.layer.renderer:null,r=e.renderer?.clone()||i?.clone(),s=yJe(e,this.layerView,this.view);if(s&&r!=null&&"visualVariables"in r&&!r.visualVariables?.some(o=>o.type==="size"&&o.target!=="outline"&&!Fk.test(o.valueExpression))){if("clusterMinSize"in e&&"clusterMaxSize"in e){const{clusterMinSize:a,clusterMaxSize:l}=e;s.legendOptions=new vde({showLegend:a!==l})}const o=r.visualVariables||[];r.visualVariables=o.concat([s]),this._clusterSizeVariable=s}return r}async _loadRenderer(e){if(jR.has(e))return jR.get(e);const i=[],r=e.clone(),s=await pj(r);if(Bm(r)||qm(r)){const n=(r.classBreakInfos||r.uniqueValueInfos).map(o=>this._fetchSymbol(o.symbol,s).then(a=>{o.symbol=a}).catch(()=>{o.symbol=null}));Array.prototype.push.apply(i,n)}return i.push(this._fetchSymbol(r.symbol||r.defaultSymbol,r.defaultSymbol?null:s).then(n=>{this._applySymbolToRenderer(r,n,Fb(r))}).catch(()=>{this._applySymbolToRenderer(r,null,Fb(r))})),await Promise.allSettled(i),jR.set(e,r),r}_applySymbolToRenderer(e,i,r){r?e.symbol=i:e.defaultSymbol=i}async _fetchSymbol(e,i){if(!e)throw new Error;if(e.type==="web-style"){const r=this._webStyleSymbolCache;try{const s=await e.fetchSymbol({cache:r});return this._getAppliedCloneSymbol(s,i)}catch{throw X.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,i)}_getAppliedCloneSymbol(e,i){if(!e||!i)return e;const r=e.clone(),s=i&&i.toRgba();return r.type.includes("3d")?this._applyColorTo3dSymbol(r,s):r.type==="cim"?Khe(r,i):r.color&&(r.color=new ne(s||r.color)),r}_applyColorTo3dSymbol(e,i){i&&e.symbolLayers.forEach(r=>{r&&(r.material||(r.material={}),r.material.color=new ne(i))})}async _getVisualVariableLegendElements(e,i){if(!("visualVariables"in e)||e.type==="vector-field")return null;const r=e.visualVariables??[],s=[],n=[],o=[],a=_u(e,"reference-size")??_u(e,"spike");let l;const c=this._clusterSizeVariable;if(a?.sizeStops?.length===2&&(Bm(e)||qm(e))){const[y,v]=a.sizeStops,b=c?c.minDataValue:y.value,w=c?c.maxDataValue:v.value;l=new Ct({field:a.field??void 0,normalizationField:a.normalizationField,minSize:bn(y.size,10,100),maxSize:bn(v.size,50,150),minDataValue:b,maxDataValue:w}),n.push(l)}for(const y of r)if(y.type==="color")s.push(y);else if(y.type==="size"){if(y.field==="cluster_count"&&l)continue;n.push(y)}else y.type==="opacity"&&o.push(y);const d=[...s,...n,...o];let h,f;if(s.length===0&&Bm(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const y=e.classBreakInfos[0];h=y&&y.symbol}if(s.length===0&&Fb(e)&&(h=e.symbol),h)if(h.type.includes("3d")){const y=h.symbolLayers.at(0);y.type==="water"?y.color!=null&&(f=y.color):y.material?.color!=null&&(f=y.material.color)}else h.url||(f=h.color);const m=this.cssEffectFilter;return(await Promise.all(d.map(async y=>{if(!y.legendOptions||y.legendOptions.showLegend!==!1){const v=Ij(e)?y.field:this._getRampTitle(y,i);let b=null;const w=CJe(i,y,this.view.timeZone);if(y.type==="color"){const x=await fY(y,null,w)??[];b={type:"color-ramp",title:v,infos:x,preview:jm(x.map(S=>S.color),{cssEffectFilter:m})},this._hasColorRamp||(this._hasColorRamp=x.length>0)}else if(y.type==="size"&&y.target!=="outline")Fk.test(y.valueExpression)?this._clusterSizeVariable||(this._scaleDrivenSizeVariable=y):(b=await this._getSizeLegendElement(v,y,e,w),l===y&&a?.theme==="spike"&&(b.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(b.infos==null||!b.infos.length)));else if(y.type==="opacity"){const x=await fY(y,f,w)??[];b={type:"opacity-ramp",title:v,infos:x,preview:jm(x.map(S=>S.color),{cssEffectFilter:m})},this._hasOpacityRamp||(this._hasOpacityRamp=x.length>0)}return b?.infos?b:null}}))).filter(Ei)}_getDomainName(e,i,r){if(e&&typeof e!="function"){const s="getField"in r&&r.getField?.(e),n=s&&"getFieldDomain"in r&&r.getFieldDomain?r.getFieldDomain(s.name,{excludeImpliedDomains:H("esri-widget-legacy-field-domain-calculation")}):null;return n?.type==="coded-value"?n.getName(i):null}return null}_getClusterTitle(e){const i=this.layer,r=e.field;if("featureReduction"in i&&i.featureReduction&&i.featureReduction.type==="cluster"){const s=i.featureReduction,n="popupTemplate"in s&&s.popupTemplate,o=n&&n.fieldInfos;if(o){for(const a of o)if(a.fieldName===r)return r==="cluster_count"?a.label||{showCount:!0}:a.label}}return{showCount:!0}}_getRampTitle(e,i){let r=e.field,s=e.normalizationField,n=!1,o=!1,a=!1,l=null;r=typeof r=="function"?null:r,s=typeof s=="function"?null:s;const c=e.legendOptions?.title;if(c!=null)l=c;else if(e.valueExpressionTitle)l=e.valueExpressionTitle;else{if("renderer"in i&&i.renderer&&"authoringInfo"in i.renderer&&i.renderer.authoringInfo?.visualVariables){const d=i.renderer.authoringInfo.visualVariables;for(let h=0;h<d.length;h++){const f=d[h];if(f.type==="color"){if(f.style==="ratio"){n=!0;break}if(f.style==="percent"){o=!0;break}if(f.style==="percent-of-total"){a=!0;break}}}}l={field:r&&this._getFieldAlias(r,i),normField:s&&this._getFieldAlias(s,i),ratio:n,ratioPercent:o,ratioPercentTotal:a}}return l}_getRendererTitle(e,i){const r=e;if(r.legendOptions?.title)return r.legendOptions.title;if(r.valueExpressionTitle)return r.valueExpressionTitle;let s=r.field,n=null,o=null;if(Bm(r)&&(n=r.normalizationField,o=r.normalizationType==="percent-of-total"),s=typeof s=="function"?null:s,n=typeof n=="function"?null:n,qm(r)){const{field2:l,field3:c,fieldDelimiter:d}=r;let h=s&&this._getFieldAlias(s,i);return l&&(h=`<${h}>${d}<${this._getFieldAlias(l,i)}>`,c&&(h=`${h}${d}<${this._getFieldAlias(c,i)}>`)),h}let a=null;return(s||n)&&(a={field:s&&this._getFieldAlias(s,i),normField:n&&this._getFieldAlias(n,i),normByPct:o}),a}_getFieldAlias(e,i){const r="featureReduction"in i&&i.featureReduction;if(xoe(i)&&!r)return i.getFieldAlias(e)||e;let o=("popupTemplate"in i?i.popupTemplate:null)?.fieldInfos?.find(h=>e===h.fieldName),a=null;"getField"in i&&i.getField?a=i.getField(e):"fieldsIndex"in i&&i.fieldsIndex&&(a=i.fieldsIndex.get(e));let l=null;r&&(o??(o="popupTemplate"in r?r.popupTemplate?.fieldInfos?.find(h=>e?.toLowerCase()===h.fieldName?.toLowerCase()):void 0),"fields"in r&&r.fields&&(l=r.fields.find(h=>h.name?.toLowerCase()===e?.toLowerCase())));const c=o||a||l;let d=null;return c&&(d=o?.label||a?.alias||l?.alias||"name"in c&&c.name||"fieldName"in c&&c.fieldName||null),d}_isUnclassedRenderer(e){const i=e.visualVariables;let r=!1;return Bm(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&i&&(r=e.field?i.some(s=>!(!s||e.field!==s.field||(e.normalizationField||s.normalizationField)&&e.normalizationField!==s.normalizationField)):!!i.length),r}};u([p()],Bi.prototype,"_loading",void 0),u([p()],Bi.prototype,"children",void 0),u([p({readOnly:!0})],Bi.prototype,"cssEffectFilter",null),u([p()],Bi.prototype,"layerView",void 0),u([p()],Bi.prototype,"layer",void 0),u([p()],Bi.prototype,"legendElements",void 0),u([p({readOnly:!0})],Bi.prototype,"loading",null),u([p({readOnly:!0})],Bi.prototype,"opacity",null),u([p()],Bi.prototype,"parent",void 0),u([p({readOnly:!0,dependsOn:[]})],Bi.prototype,"ready",null),u([p()],Bi.prototype,"hideLayersNotInCurrentView",void 0),u([p()],Bi.prototype,"keepCacheOnDestroy",void 0),u([p()],Bi.prototype,"respectLayerDefinitionExpression",void 0),u([p()],Bi.prototype,"respectLayerVisibility",void 0),u([p({readOnly:!0})],Bi.prototype,"scale",null),u([p()],Bi.prototype,"sublayerIds",void 0),u([p({readOnly:!0})],Bi.prototype,"isScaleDriven",null),u([p()],Bi.prototype,"title",void 0),u([p({readOnly:!0,dependsOn:["ready"],value:0})],Bi.prototype,"version",null),u([p()],Bi.prototype,"view",void 0),Bi=u([M("esri.widgets.Legend.support.ActiveLayerInfo")],Bi);const om={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},tme=ue.ofType(Bi),pQe=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CatalogLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.ParquetLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.catalog.CatalogFootprintLayer","esri.layers.catalog.CatalogDynamicGroupLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer","esri.layers.KnowledgeGraphLayer"]),ime="view.basemapView.baseLayerViews",rme="view.groundView.layerViews",sme="view.basemapView.referenceLayerViews",fQe=[ime,rme,"view.layerViews",sme];let ao=class extends _e{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new ue,this._activeLayerInfosPromises=new WeakMap,this.activeLayerInfos=new tme,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(de(()=>this.view,()=>this._viewHandles(),Fi),om.view),this.addHandles(a6(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get loading(){return this.activeLayerInfos.some(e=>e.loading)}get state(){return this.view?.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(om.state),this.view&&this.addHandles(de(()=>this.state,()=>this._stateHandles(),Fi),om.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([om.allLayerViews,om.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];i&&this._activeLayerInfosPromises.delete(i),delete this._activeLayerInfosByLayerViewId[e],i?.parent?.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on("change",r=>this._allLayerViewsChangeHandle(r)),om.allLayerViews),this.addHandles(de(()=>[this.basemapLegendVisible,this.groundLegendVisible,this.hideLayersNotInCurrentView,this.keepCacheOnDestroy,this.layerInfos,this.respectLayerDefinitionExpression,this.respectLayerVisibility],()=>this._refresh()),om.legendProperties)}_allLayerViewsChangeHandle(e){if(e.added.length&&this._generateActiveLayerInfosForLayerViews(e.added),e.moved.length)return this._destroyViewActiveLayerInfos(),void this._refresh();if(e.removed.length){for(const{uid:i}of e.removed)this._destroyViewActiveLayerInfo(i);this._refresh()}}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.drain(e=>this._activeLayerInfosPromises.delete(e)),this._generateActiveLayerInfosForLayerViews(this._generateLayerViews())}_generateActiveLayerInfosForLayerViews(e){e.filter(this._filterBasemapLayerViews,this).filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this)}_filterBasemapLayerViews(e){if(!this.view?.basemapView)return!0;const{baseLayerViews:i,groundLayerViews:r,referenceLayerViews:s}=this.view.basemapView,n=!this.basemapLegendVisible&&(i?.includes(e)||s?.includes(e)),o=!this.groundLegendVisible&&r?.includes(e);return!n&&!o}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(n=>{if(!n.parent){const o=n.layer.parent,a=o&&"uid"in o&&this._layerViewByLayerId[o.uid],l=a&&this._activeLayerInfosByLayerViewId[a.uid];l&&e.includes(l)&&(r.push(n),n.parent=l,l.children.add(n),this._sortActiveLayerInfos(l.children))}}),e.removeMany(r);const s={};i.allLayerViews.forEach((n,o)=>s[n.layer.uid]=o),e.sort((n,o)=>{const a=s[n.layer.uid]||0;return(s[o.layer.uid]||0)-a})}_generateLayerViews(){const e=[];return fQe.filter(this._filterLayerViews,this).map(i=>Ga(this,i)).filter(i=>i!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===ime||e===sme),r=!this.groundLegendVisible&&e===rme;return!i&&!r}_collectLayerViews(e,i){const r=s=>(s&&s.forEach(n=>{i.push(n),r(n[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(r=>this._isLayerUIDMatching(r,i))}_isLayerViewSupported(e){return!!pQe.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(de(()=>[e.legendEnabled,e.layer?.legendEnabled],()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}async _buildActiveLayerInfo(e){const i=e.layer,r=e.uid,s=this._layerInfosByLayerViewId[r];let n=this._activeLayerInfosByLayerViewId[r];n||(n=new Bi({layer:i,layerView:e,view:this.view??void 0}),this._activeLayerInfosByLayerViewId[r]=n);const o=s?.title!==void 0&&s.layer.uid===i.uid;n.title=o?s.title:i.title,n.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,n.respectLayerVisibility=this.respectLayerVisibility,n.hideLayersNotInCurrentView=this.hideLayersNotInCurrentView,n.keepCacheOnDestroy=this.keepCacheOnDestroy,n.sublayerIds=s?.sublayerIds||[];const a=i.parent&&"uid"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;n.parent=this._activeLayerInfosByLayerViewId[a?.uid],this._addActiveLayerInfo(n),this._constructLegendElements(n),this._attachHandlesToActiveLayerInfo(n)}_attachHandlesToActiveLayerInfo(e){const{layer:i,layerView:r}=e,s=r.uid;this.removeHandles(s),this.addHandles([de(()=>i.title,n=>this._titleHandle(n,e)),de(()=>[i.opacity,"renderer"in i&&i.renderer,"pointSymbol"in i&&i.pointSymbol,"lineSymbol"in i&&i.lineSymbol,"polygonSymbol"in i&&i.polygonSymbol,"effect"in i&&i.effect,"featureReduction"in i&&oY(i,r.view),this.view?.timeZone],()=>this._constructLegendElements(e)),de(()=>"filter"in r&&r.filter,()=>{oY(r.layer,r.view)!=null&&this._constructLegendElements(e)}),Ts(()=>!!this.view?.stationary,()=>this._scaleHandle(e)),de(()=>e.loading,()=>this.notifyChange("loading"),Fi)],s),this.respectLayerVisibility&&this.addHandles([de(()=>i.legendEnabled,n=>this._legendEnabledHandle(n,e)),de(()=>r.legendEnabled,n=>{this.view?.suspended||this._legendEnabledHandle(n,e)})],s),this.respectLayerDefinitionExpression&&"definitionExpression"in i&&this.addHandles(de(()=>i.definitionExpression,()=>this._constructLegendElements(e)),s)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const s=e.parent;if(s)s.children.includes(e)||s.children.push(e),this._sortActiveLayerInfos(s.children);else{const n=this.layerInfos?.some(a=>a.layer.uid===r.uid),o=r.parent;o&&"uid"in o&&this._layerViewByLayerId[o.uid]&&!n?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const n=[];this._activeLayerInfosWithNoParent.forEach(o=>{const a=o.layer.parent,l=a&&"uid"in a?this._layerViewByLayerId[a?.uid]:null,c=this._activeLayerInfosByLayerViewId[l?.uid];c&&(n.push(o),o.parent=c)}),n.length&&(this._activeLayerInfosWithNoParent.removeMany(n),n.forEach(o=>this._addActiveLayerInfo(o)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}async _getBuildLegendPromise(e){const{layer:i}=e;if("featureCollections"in i&&i.featureCollections)return e.buildLegendElementsForFeatureCollections(i.featureCollections);if("featureReduction"in i&&i.featureReduction&&"renderer"in i.featureReduction&&(i.featureReduction.type==="binning"||i.featureReduction.type==="cluster")&&(!this.view||i.featureReduction.maxScale<=this.view.scale))return e.buildLegendElementsForFeatureReduction(i.featureReduction);if("renderer"in i&&i.renderer&&!("sublayers"in i))return e.buildLegendElementsForRenderer(i.renderer);if("url"in i&&i.url&&i.type!=="catalog"&&i.type!=="knowledge-graph")return e.buildLegendElementsForTools();const r=e.children.map(s=>this._constructLegendElements(s));return Promise.all(r).then(()=>{})}async _constructLegendElements(e){const i=this._activeLayerInfosPromises.get(e);i&&await i.catch(()=>{});const r=this._getBuildLegendPromise(e);this._activeLayerInfosPromises.set(e,r),r.finally(()=>{this._activeLayerInfosPromises.delete(e)})}};u([p({type:tme})],ao.prototype,"activeLayerInfos",void 0),u([p()],ao.prototype,"basemapLegendVisible",void 0),u([p()],ao.prototype,"groundLegendVisible",void 0),u([p()],ao.prototype,"hideLayersNotInCurrentView",void 0),u([p()],ao.prototype,"keepCacheOnDestroy",void 0),u([p({readOnly:!0})],ao.prototype,"loading",null),u([p()],ao.prototype,"respectLayerDefinitionExpression",void 0),u([p()],ao.prototype,"respectLayerVisibility",void 0),u([p()],ao.prototype,"layerInfos",void 0),u([p({readOnly:!0})],ao.prototype,"state",null),u([p()],ao.prototype,"view",void 0),ao=u([M("esri.widgets.Legend.LegendViewModel")],ao);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */let mQe=class kj{constructor(){this._groups=new Map}destroy(){this.removeAll()}add(e,i){if(Array.isArray(e)){const r=this._getOrCreateGroup(i);for(const s of e)this._isHandle(s)&&r.push(s)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&i&&r.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&Array.isArray(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof kj)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const i of e)i instanceof kj?i.removeAll():i.remove()}},yQe=class extends xA{constructor(e){super(),this.destroyed=!1,e==="disconnect"?this.onDisconnected(()=>this.removeAllHandles()):this.onDestroy(()=>this.destroy())}addHandles(e,i){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const s of r)s.remove();return}this._handles??(this._handles=new mQe),this._handles.add(e,i)}removeHandles(e){this._handles?.remove(e)}removeAllHandles(){this._handles?.removeAll()}destroy(){this.destroyed=!0,this.removeAllHandles()}hasHandles(e){return this._handles?.has(e)??!1}};const gQe=Swe(yQe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const nme=zee(P_e);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const vQe=t=>bQe(t);var e2,MQ;let O9=(MQ=class extends SA{constructor(i){super(i);_t(this,e2);this.setProvisionalExports(void 0)}hostConnected(){this.component.manager.loadedCalled&&_k(this.component)}hostLoad(){this.component.manager.destroyed}hostLoaded(){const{el:i}=this.component,r=i.shadowRoot?.firstElementChild??i.firstElementChild??void 0;i.childElem??(i.childElem=r),mt(this,e2,Ts(()=>this.component.view!=null,()=>{this.component.arcgisReady.emit()},{once:!0,initial:!0,sync:!0})),i.isConnected&&_k(this.component)}hostDisconnected(){typeof this.component.el.childElem=="object"&&this.component.view?.ui?.remove(this.component.el.childElem),pe(this,e2)?.remove()}hostUpdate(i){i.has("position")&&this.component.el.childElem!=null&&typeof this.component.position=="string"&&_k(this.component),i.has("referenceElement")&&_k(this.component)}},e2=new WeakMap,MQ);const bQe=l2(O9);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const wQe=(t,e)=>i=>xQe(i,t);var t2,CQ;let _Qe=(CQ=class extends e9{constructor(i,r){super(i,r);_t(this,t2);new O9(this.component)}hostLoad(){mt(this,t2,de(()=>this.component.el.view,i=>{this.instance.view=i,this.instance.map=i?.map},{sync:!0,initial:!0}))}hostDestroy(){pe(this,t2)?.remove(),super.hostDestroy()}},t2=new WeakMap,CQ);const xQe=l2(_Qe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const SQe=Qe`.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}:host{overflow:auto;width:var(--arcgis-legend-internal-width, 300px)}:host([card-style-layout="side-by-side"]){--arcgis-legend-internal-width: auto}`,$Qe=wQe(ao);var Xy;let IQe=(Xy=class extends it{constructor(){super(...arguments),this.messages=nme({}),this.final=gQe("destroy"),this.viewModel=$Qe(this),this._isCardStyle=!1,this.view=this.viewModel.view,this.icon="legend",this.activeLayerInfos=this.viewModel.activeLayerInfos,this.basemapLegendVisible=this.viewModel.basemapLegendVisible,this.headingLevel=3,this.hideLayersNotInCurrentView=this.viewModel.hideLayersNotInCurrentView,this.respectLayerDefinitionExpression=this.viewModel.respectLayerDefinitionExpression,this.layerInfos=this.viewModel.layerInfos,this.loading=this.viewModel.loading,this.legendStyle="classic",this.autoDestroyDisabled=!1,this.label=this.messages?.componentLabel,this.state=this.viewModel.state,this.arcgisPropertyChange=KV()("state"),this.arcgisReady=ve()}get ignoreLayerVisibility(){return!this.viewModel.respectLayerVisibility}set ignoreLayerVisibility(e){this.viewModel.respectLayerVisibility=!e}get respectLayerVisibilityDisabled(){return!this.viewModel.respectLayerVisibility}set respectLayerVisibilityDisabled(e){this.viewModel.respectLayerVisibility=!e}async destroy(){await this.manager.destroy()}loaded(){this.manager.onLifecycle(()=>[ks(()=>this.el.view,"resize",()=>this.requestUpdate()),ks(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),de(()=>[this.cardStyleLayout,this.legendStyle,typeof this.legendStyle=="object"?this.legendStyle.type:void 0,typeof this.legendStyle=="object"?this.legendStyle.layout:void 0],()=>{const e=this.legendStyle,i=typeof e=="object"?e:{type:e};this._isCardStyle=i.type==="card",this._isCardStyle?(this.cardStyleLayout=this.cardStyleLayout||i.layout||"auto",this.cardStyleLayout==="auto"&&this.el.closest("arcgis-expand")&&(this.cardStyleLayout="stack"),this.setAttribute("card-style-layout",this.cardStyleLayout)):this.removeAttribute("card-style-layout")},{initial:!0})])}_refreshActiveLayerInfos(e){e.forEach(i=>{this.final.removeHandles(`version_${i.layer.uid}`),this._renderOnActiveLayerInfoChange(i)}),this.requestUpdate()}render(){return j`<div class=${O(hi(Kw.widget,{[Kw.panel]:!this._isCardStyle}))}>${this._isCardStyle&&this.view?j`<arcgis-legend-card-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages} .layout=${this.cardStyleLayout} .view=${this.view}></arcgis-legend-card-view>`:j`<arcgis-legend-classic-view .activeLayerInfos=${this.activeLayerInfos} .headingLevel=${this.headingLevel} .messages=${this.messages}></arcgis-legend-classic-view>`}</div>`}_renderOnActiveLayerInfoChange(e){const i=de(()=>e.version,()=>this.requestUpdate());this.final.addHandles(i,`version_${e.layer.uid}`);const r=ks(()=>e.children,"change",()=>e.children.forEach(s=>this._renderOnActiveLayerInfoChange(s)));this.final.addHandles(r,`version_${e.layer.uid}`),e.children.forEach(s=>this._renderOnActiveLayerInfoChange(s))}},Xy.properties={_isCardStyle:16,view:0,referenceElement:1,position:1,icon:1,activeLayerInfos:0,basemapLegendVisible:5,headingLevel:9,hideLayersNotInCurrentView:5,respectLayerDefinitionExpression:5,ignoreLayerVisibility:5,respectLayerVisibilityDisabled:5,layerInfos:0,loading:39,cardStyleLayout:1,legendStyle:1,autoDestroyDisabled:5,messageOverrides:0,label:1,state:3},Xy.styles=SQe,Xy);Ms("arcgis-legend",IQe);const Ht="esri-slider",xt={base:Ht,reversed:`${Ht}--reversed`,horizontalLayout:`${Ht}--horizontal`,verticalLayout:`${Ht}--vertical`,contentElement:`${Ht}__content`,extraContentElement:`${Ht}__extra-content`,trackElement:`${Ht}__track`,ticksContainerElement:`${Ht}__ticks`,tickElement:`${Ht}__tick`,tickLabelElement:`${Ht}__tick-label`,maxElement:`${Ht}__max`,minElement:`${Ht}__min`,maxElementInteractive:`${Ht}__max--interactive`,minElementInteractive:`${Ht}__min--interactive`,rangeElementActive:`${Ht}__range--active`,rangeInput:`${Ht}__range-input`,anchorElement:`${Ht}__anchor`,movingAnchorElement:`${Ht}__anchor--moving`,lastMovedAnchorElement:`${Ht}__anchor--moved`,anchorElementActive:`${Ht}__anchor--active`,anchorElementIndexPrefix:`${Ht}__anchor-`,segmentElement:`${Ht}__segment`,segmentElementIndexPrefix:`${Ht}__segment-`,segmentElementInteractive:`${Ht}__segment--interactive`,segmentElementActive:`${Ht}__segment--active`,effectiveSegmentElement:`${Ht}__effective-segment`,effectiveMaxSegmentElement:`${Ht}__effective-max-segment`,effectiveMinSegmentElement:`${Ht}__effective-min-segment`,thumbElement:`${Ht}__thumb`,labelElement:`${Ht}__label`,labelElementInteractive:`${Ht}__label--interactive`,labelInput:`${Ht}__label-input`};let Tn=class extends _e{constructor(e){super(e),this.precision=4,this.thumbsConstrained=!0}set effectiveMax(e){this.setEffectiveMax(e)}set effectiveMin(e){this.setEffectiveMin(e)}set labelFormatFunction(e){this._set("labelFormatFunction",e)}set inputFormatFunction(e){this._set("inputFormatFunction",e)}set inputParseFunction(e){this._set("inputParseFunction",e)}get labels(){const{max:e,min:i,values:r}=this,s=r?.length?r.map((n,o)=>this.getLabelForValue(n,"value",o)):[];return{max:this.getLabelForValue(e,"max"),min:this.getLabelForValue(i,"min"),values:s}}set max(e){this.setMax(e)}set min(e){this.setMin(e)}get state(){const{max:e,min:i}=this;return e!=null&&i!=null&&e>i?"ready":"disabled"}set values(e){const{max:i,min:r}=this,s=this.values;s&&e&&s.length===e.length&&s.every((n,o)=>n===e[o])||(this._set("values",null),e?.length&&(r!=null&&e.some(n=>n<r)&&(this.min=Math.min(...e)),i!=null&&e.some(n=>n>i)&&(this.max=Math.max(...e))),this._set("values",e))}toPrecision(e){return parseFloat(e.toFixed(this.precision))}defaultLabelFormatFunction(e){const{max:i,min:r,precision:s}=this,n=i!=null&&r!=null&&i-r>10?2:s;return parseFloat(e.toFixed(n)).toString()}defaultInputFormatFunction(e){return e.toString()}defaultInputParseFunction(e){return parseFloat(e)}getBounds(){const{effectiveMax:e,effectiveMin:i,max:r,min:s}=this;return{min:i!=null&&s!=null?Math.max(s,i):s,max:e!=null&&r!=null?Math.min(r,e):r}}getBoundsForValueAtIndex(e){const{thumbsConstrained:i,values:r}=this,{min:s,max:n}=this.getBounds();if(i&&r){const o=e-1,a=e+1;return{min:r[o]!=null?r[o]:s,max:r[a]!=null?r[a]:n}}return{min:s,max:n}}getLabelForValue(e,i,r){return e==null?null:this.labelFormatFunction?this.labelFormatFunction(e,i,r):this.defaultLabelFormatFunction(e)}setMax(e){const{max:i,values:r}=this;if(e==null)return void this._set("max",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'max' is NaN.");const s=this.toPrecision(e);if(i!==s){if(this.min!=null&&s<this.min)this._logError("slider:invalid-value","Supplied value for property 'max' is less than 'min'.");else if(this._set("max",s),r?.length)for(let n=0;n<r.length;n++)s<r[n]&&this.setValue(n,s)}}setMin(e){const{min:i,values:r}=this;if(e==null)return void this._set("min",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'min' is NaN.");const s=this.toPrecision(e);if(i!==s){if(this.max!=null&&s>this.max)this._logError("slider:invalid-value","Supplied value for property 'min' is greater than 'max'.");else if(this._set("min",s),r?.length)for(let n=0;n<r.length;n++)s>r[n]&&this.setValue(n,s)}}setEffectiveMax(e){if(e==null)return void this._set("effectiveMax",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMax' is NaN.");const i=this.toPrecision(e);this.effectiveMax!==i&&this._set("effectiveMax",this._applyBoundsToValue(i))}setEffectiveMin(e){if(e==null)return void this._set("effectiveMin",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMin' is NaN.");const i=this.toPrecision(e);this.effectiveMin!==i&&this._set("effectiveMin",this._applyBoundsToValue(i))}setValue(e,i){if(isNaN(i))return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is NaN.");const{values:r}=this;if(r==null)return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is null.");const s=r[e],n=this.toPrecision(i);if(s===n)return;const o=[...r];o[e]=n,this._set("values",o)}_applyBoundsToValue(e){const{max:i,min:r}=this;return r!=null&&e<r?r:i!=null&&e>i?i:e}_logError(e,i,r){X.getLogger(this).error(new R(e,i,r))}};u([p()],Tn.prototype,"effectiveMax",null),u([p()],Tn.prototype,"effectiveMin",null),u([p()],Tn.prototype,"labelFormatFunction",null),u([p()],Tn.prototype,"inputFormatFunction",null),u([p()],Tn.prototype,"inputParseFunction",null),u([p({readOnly:!0})],Tn.prototype,"labels",null),u([p()],Tn.prototype,"max",null),u([p()],Tn.prototype,"min",null),u([p()],Tn.prototype,"precision",void 0),u([p({readOnly:!0})],Tn.prototype,"state",null),u([p()],Tn.prototype,"thumbsConstrained",void 0),u([p()],Tn.prototype,"values",null),Tn=u([M("esri.widgets.Slider.SliderViewModel")],Tn);const ome=Tn,Kn={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},ZY={labels:!1,rangeLabels:!1};let rt=class extends Ng{constructor(e,i){super(e,i),this._activeLabelInputIndex=null,this._anchorElements=[],this._dragged=!1,this._dragStartInfo=null,this._focusedAnchorIndex=null,this._isMinInputActive=!1,this._isMaxInputActive=!1,this._lastMovedHandleIndex=null,this._positionPrecision=5,this._segmentDragStartInfo=null,this._trackHeight=null,this._trackWidth=null,this._zIndices=[],this._zIndexOffset=3,this.disabled=!1,this.draggableSegmentsEnabled=!0,this.effectiveSegmentElements=new ue,this.extraNodes=[],this.inputCreatedFunction=null,this.labelElements=new ue,this.labelInputsEnabled=!1,this.maxLabelElement=null,this.messages=null,this.minLabelElement=null,this.rangeLabelInputsEnabled=!1,this.segmentElements=new ue,this.snapOnClickEnabled=!0,this.steps=null,this.syncedSegmentsEnabled=!1,this.thumbCreatedFunction=null,this.thumbElements=new ue,this.tickElements=new ue,this.trackElement=null,this.viewModel=new ome,this.visibleElements={...ZY},this._onAnchorPointerDown=this._onAnchorPointerDown.bind(this),this._onAnchorPointerMove=this._onAnchorPointerMove.bind(this),this._onAnchorPointerUp=this._onAnchorPointerUp.bind(this),this._onLabelPointerDown=this._onLabelPointerDown.bind(this),this._onLabelPointerUp=this._onLabelPointerUp.bind(this),this._onSegmentPointerDown=this._onSegmentPointerDown.bind(this),this._onSegmentPointerMove=this._onSegmentPointerMove.bind(this),this._onSegmentPointerUp=this._onSegmentPointerUp.bind(this),this._onTrackPointerDown=this._onTrackPointerDown.bind(this),this._onTrackPointerMove=this._onTrackPointerMove.bind(this),this._onTrackPointerUp=this._onTrackPointerUp.bind(this)}destroy(){document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove),document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),this.labelElements.removeAll(),this.labelElements.destroy(),this.segmentElements.removeAll(),this.segmentElements.destroy(),this.effectiveSegmentElements.removeAll(),this.effectiveSegmentElements.destroy(),this.thumbElements.removeAll(),this.thumbElements.destroy(),this.tickElements.removeAll(),this.tickElements.destroy()}get _isDisabled(){return this.disabled||this.state==="disabled"}get effectiveMax(){return this.viewModel.effectiveMax}set effectiveMax(e){this.viewModel.effectiveMax=e}get effectiveMin(){return this.viewModel.effectiveMin}set effectiveMin(e){this.viewModel.effectiveMin=e}get inputFormatFunction(){return this.viewModel.inputFormatFunction}set inputFormatFunction(e){this.viewModel.inputFormatFunction=e}get inputParseFunction(){return this.viewModel.inputParseFunction}set inputParseFunction(e){this.viewModel.inputParseFunction=e}get icon(){return"caret-double-horizontal"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}get labels(){return this.viewModel.labels}set layout(e){["vertical","vertical-reversed","horizontal","horizontal-reversed"].includes(e)||(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get precision(){return this.viewModel.precision}set precision(e){this.viewModel.precision=e}get state(){const{_activeLabelInputIndex:e,_isMaxInputActive:i,_isMinInputActive:r,_dragStartInfo:s,_segmentDragStartInfo:n,disabled:o,viewModel:a}=this;return o?"disabled":e===null&&!i&&!r?s!=null||n!=null?"dragging":a.state:"editing"}get thumbsConstrained(){return this.viewModel.thumbsConstrained}set thumbsConstrained(e){this.viewModel.thumbsConstrained=e}set tickConfigs(e){this._set("tickConfigs",e),this.scheduleRender()}get values(){return this.viewModel.values}set values(e){this.viewModel.values=e}castVisibleElements(e){return{...ZY,...e}}render(){const{label:e}=this,i=this.classes(xt.base,pn.widget,this._isHorizontalLayout()?xt.horizontalLayout:xt.verticalLayout,this._isReversedLayout()?xt.reversed:null,this._isDisabled?pn.disabled:null);return this._storeTrackDimensions(),he("div",{afterCreate:this._afterContainerCreate,"aria-label":e,bind:this,class:i,"touch-action":"none"},this._renderContent())}toNextStep(e){this._toStep(e,1)}toPreviousStep(e){this._toStep(e,-1)}getCurrentPosition(){return this._positionFromValue(this.values?.[0]??0)}_renderContent(){const{max:e,min:i}=this;if(!(i==null||e==null||i>=e))return[this._renderMin(),this._renderSliderContainer(),this._renderMax()]}_renderSliderContainer(){return he("div",{bind:this,class:xt.contentElement,key:"slider-container"},this._renderTrackElement(),this._renderTicksContainer(),this._renderExtraContentElements())}_renderTrackElement(){return he("div",{afterCreate:this._afterTrackCreate,afterRemoved:this._afterTrackRemoved,bind:this,class:xt.trackElement,"touch-action":"none"},this._renderEffectiveSegmentElements(),this._renderSegmentElements(),this._renderAnchorElements())}_renderEffectiveSegmentElements(){if(!this.trackElement||!this.values?.length)return;const e=this.effectiveMax!=null,i=this.effectiveMin!=null;if(!e&&!i)return;const{max:r,min:s,viewModel:n}=this,o=n.getBounds(),a=[];return i&&a.push(this._renderEffectiveSegmentElement(s,o.min,!0)),e&&a.push(this._renderEffectiveSegmentElement(o.max,r,!1)),a}_renderSegmentElements(){if(!this.trackElement||!this.values?.length)return;const e=this.values.length,i=[];for(let r=0;r<=e;r++)i.push(this._renderSegmentElement(r));return i}_renderSegmentElement(e){const{_trackHeight:i,_trackWidth:r,draggableSegmentsEnabled:s,id:n,state:o}=this,a=this.values,l=this._isHorizontalLayout(),c=l?r:i,d=this.viewModel.getBounds(),h=this._positionFromValue(d.max),f=this._positionFromValue(d.min),m=e===a?.length?null:e,y=e===0?null:e-1,v=m!=null,b=y!=null;let w,x;const S=[...a].sort((N,D)=>N-D);this._isReversedLayout()?(w=b?this._positionFromValue(S[y]):f,x=v?this._positionFromValue(S[m]):h):(w=v?this._positionFromValue(S[m]):h,x=b?this._positionFromValue(S[y]):f);const $=this._applyPrecisionToPosition(100*x/c),T=(w-x)/c,C=l?`transform: translate(${$}%, 0px) scale(${T}, 1);`:`transform: translate(0px, ${$}%) scale(1, ${T});`,L=this.classes(xt.segmentElement,xt.segmentElementIndexPrefix+e,s&&v&&b&&o!=="disabled"?xt.segmentElementInteractive:null);return he("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:L,"data-max-thumb-index":m,"data-min-thumb-index":y,"data-segment-index":e,key:`${n}-segment-${e}`,style:C,"touch-action":"none"})}_renderEffectiveSegmentElement(e,i,r){const{_trackHeight:s,_trackWidth:n,layout:o}=this,a=this._positionFromValue(e),l=this._positionFromValue(i),c=this._isHorizontalLayout(),d=c?n:s,h=this._applyPrecisionToPosition(100*a/d);let f=null;if(o==="horizontal"){const v=r?d-l:l,b=a===d?0:h;f=`clip-path: inset(0% ${l===d?0:this._applyPrecisionToPosition(v/d*100)}% 0% ${b}%);`}else{const v=(l-a)/d;f=c?`transform: translate(${h}%, 0px) scale(${v}, 1);`:`transform: translate(0px, ${h}%) scale(1, ${v});`}const m=r?xt.effectiveMinSegmentElement:xt.effectiveMaxSegmentElement,y=this.classes(xt.segmentElement,xt.effectiveSegmentElement,m);return he("div",{afterCreate:this._afterEffectiveSegmentCreate,afterRemoved:this._afterEffectiveSegmentRemoved,bind:this,class:y,style:f,"touch-action":"none"})}_renderAnchorElements(){const{trackElement:e,values:i}=this;if(i?.length)return this._zIndices=i.map((r,s)=>{const n=this._positionFromValue(r),o=this._positionToPercent(n),a=(this._isHorizontalLayout()?o>50:o<50)?-1:1;return this._zIndexOffset+(i.length+a*s)}),e&&i&&i.length?i.map((r,s)=>this._renderAnchorElement(r,s)):null}_renderAnchorElement(e,i){const r=this._positionFromValue(e),s=this._valueFromPosition(r);if(s==null||isNaN(s))return;const{_dragStartInfo:n,_lastMovedHandleIndex:o,id:a,layout:l,visibleElements:{labels:c}}=this,d=this.values,h=n&&n.index===i,f=o===i,m=this.classes(xt.anchorElement,xt.anchorElementIndexPrefix+i,h?xt.movingAnchorElement:null,f?xt.lastMovedAnchorElement:null),y=this.labels.values[i],v=this._getStyleForAnchor(e,i,h||f),{min:b,max:w}=this.viewModel.getBoundsForValueAtIndex(i),{disabled:x,messages:S}=this,$=d.length===2?zw(i===0?S.rangeMinimum:S.rangeMaximum,{value:e}):y,T=d.length===1?null:i===0?`${a}-handle-${i+1}`:i===d.length-1?`${a}-handle-${i-1}`:`${a}-handle-${i-1} ${a}-handle-${i+1}`;return he("div",{afterCreate:this._afterAnchorCreate,afterRemoved:this._afterAnchorRemoved,afterUpdate:this._afterAnchorUpdate,"aria-controls":T,"aria-label":S.sliderValue,"aria-labelledby":c?`${a}-label-${i}`:null,"aria-orientation":l,"aria-valuemax":w?.toString(),"aria-valuemin":b?.toString(),"aria-valuenow":e.toString(),"aria-valuetext":$,bind:this,class:m,"data-thumb-index":i,"data-value":e,id:`${a}-handle-${i}`,key:`${a}-handle-${i}`,onkeydown:this._onAnchorKeyDown,role:"slider",style:v,tabIndex:x?-1:0,"touch-action":"none"},he("span",{afterCreate:this._afterThumbCreate,afterRemoved:this._afterThumbRemoved,bind:this,class:xt.thumbElement,"data-thumb-index":i,"touch-action":"none"}),this.renderThumbLabel(i))}renderThumbLabel(e){const{id:i,labels:r,labelInputsEnabled:s,state:n}=this,o=this.visibleElements.labels,a=r.values[e],l=this.classes(xt.labelElement,o?null:pn.hidden,s&&n!=="disabled"?xt.labelElementInteractive:null);return he("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":(!o).toString(),bind:this,class:l,"data-thumb-index":e,id:`${i}-label-${e}`,key:`${i}-label-${e}`,role:s?"button":void 0,"touch-action":"none"},this._activeLabelInputIndex===e?this._renderValueInput(e):a)}_renderValueInput(e){const{disabled:i,values:r}=this;if(r==null)return;const s=r[e];return he("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:xt.labelInput,"data-input-index":e,"data-input-type":"thumb",key:`value-input-${e}`,onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown,required:!0,tabIndex:i?-1:0,type:"text",value:this._formatInputValue(s,"value",e)})}_renderMax(){const{_isMaxInputActive:e,labels:i,rangeLabelInputsEnabled:r,state:s}=this,n=this.visibleElements.rangeLabels,o=this.classes(xt.maxElement,{[pn.hidden]:!n,[xt.maxElementInteractive]:r&&s!=="disabled",[xt.rangeElementActive]:e});return he("div",{afterCreate:this._afterMaxLabelCreate,"aria-hidden":(!n).toString(),bind:this,class:o,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,role:r?"button":void 0,tabIndex:!this.disabled&&r?0:-1},e?this._renderMaxInput():i.max)}_renderMin(){const{_isMinInputActive:e,labels:i,rangeLabelInputsEnabled:r,state:s}=this,n=this.visibleElements.rangeLabels,o=this.classes(xt.minElement,{[pn.hidden]:!n,[xt.minElementInteractive]:r&&s!=="disabled",[xt.rangeElementActive]:e});return he("div",{afterCreate:this._afterMinLabelCreate,"aria-hidden":(!n).toString(),bind:this,class:o,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:r?"button":void 0,tabIndex:!this.disabled&&r?0:-1},e?this._renderMinInput():i.min)}_renderMaxInput(){return he("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:xt.rangeInput,"data-input-type":"max",onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown,required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.max,"max")})}_renderMinInput(){return he("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.minimumValue,bind:this,class:xt.rangeInput,"data-input-type":"min",onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown,required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.min,"min")})}_renderExtraContentElements(){return he("div",{bind:this,class:xt.extraContentElement},this.extraNodes)}_renderTicksContainer(){if(this.tickConfigs&&this.trackElement&&(this._trackHeight!==0||this._trackWidth!==0))return this.tickConfigs.map((e,i)=>he("div",{class:this.classes(xt.ticksContainerElement),key:"ticks-container"},this._renderTicks(e,i)))}_renderTicks(e,i){const{mode:r,values:s}=e;if(this.tickElements.at(i)||this.tickElements.add(new ue,i),r==="position"){const a=Array.isArray(s)?s:[s];return this._calculateTickPositions(a).map((l,c)=>this._renderTickGroup(e,c,i,l))}if(r==="percent"&&Array.isArray(s)){const a=this.min??0,l=(this.max??0)-a,c=s.map(d=>this._applyPrecisionToPosition(d/100*l+a));return this._calculateTickPositions(c).map((d,h)=>this._renderTickGroup(e,h,i,d))}const n=Array.isArray(s)&&s.length?s[0]:isNaN(s)?null:s,o=this._getTickCounts(n,e);return this._calculateEquidistantTickPositions(o).map((a,l)=>this._renderTickGroup(e,l,i,a))}_renderTickGroup(e,i,r,s){const n=e.mode==="position"?Array.isArray(e.values)?e.values[i]:e.values:this._valueFromPosition(s);if(n!=null&&!isNaN(n))return he("div",{afterCreate:this._afterTickGroupCreate,afterRemoved:this._afterTickGroupRemoved,bind:this,"data-config":e,"data-position":s,"data-tick-config-index":r,"data-tick-group-index":i,"data-value":n,key:`tick-group-${i}`,onclick:this._onTickGroupClick},this._renderTickLine(e,i,r,n),e.labelsVisible?this._renderTickLabel(e,i,r,n):null)}_renderTickLine(e,i,r,s){return he("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":s.toString(),bind:this,class:xt.tickElement,"data-config":e,"data-tick-config-index":r,"data-tick-group-index":i,"data-value":s,key:`tick-label-${i}`,style:this._getPositionStyleForElement(s)})}_renderTickLabel(e,i,r,s){const n=e.labelFormatFunction?e.labelFormatFunction(s,"tick",i):this.viewModel.getLabelForValue(s,"tick",i);return he("div",{afterCreate:this._afterTickLabelCreate,"aria-label":n,"aria-valuenow":s.toString(),"aria-valuetext":n,bind:this,class:xt.tickLabelElement,"data-config":e,"data-tick-config-index":r,"data-tick-group-index":i,"data-value":s,key:`tick-label-${i}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(s)}`},n)}_afterContainerCreate(e){this.addHandles(lue(e,()=>this.scheduleRender()))}_afterTrackCreate(e){this._set("trackElement",e),e.addEventListener("pointerdown",this._onTrackPointerDown),this.scheduleRender()}_afterTrackRemoved(e){e.removeEventListener("pointerdown",this._onTrackPointerDown),document.removeEventListener("pointermove",this._onTrackPointerMove),document.removeEventListener("pointerup",this._onTrackPointerUp)}_afterSegmentCreate(e){this.segmentElements.add(e),e.addEventListener("pointerdown",this._onSegmentPointerDown)}_afterSegmentRemoved(e){this.segmentElements.remove(e),e.removeEventListener("pointerdown",this._onSegmentPointerDown)}_afterEffectiveSegmentCreate(e){this.effectiveSegmentElements.add(e)}_afterEffectiveSegmentRemoved(e){this.effectiveSegmentElements.remove(e)}_afterAnchorCreate(e){if(this._anchorElements.push(e),e.addEventListener("pointerdown",this._onAnchorPointerDown),this.thumbCreatedFunction){const i=R1(e),r=VR(e),s=this.thumbElements.at(i),n=this.labelElements.at(i)||null;this.thumbCreatedFunction(i,r,s,n)}}_afterAnchorUpdate(e){this._focusedAnchorIndex!=null&&R1(e)===this._focusedAnchorIndex&&(e.focus(),this._focusedAnchorIndex=null)}_afterAnchorRemoved(e){const i=this._anchorElements.indexOf(e,0);i>-1&&this._anchorElements.splice(i,1),e.removeEventListener("pointerdown",this._onAnchorPointerDown)}_afterThumbCreate(e){this.thumbElements.add(e)}_afterThumbRemoved(e){this.thumbElements.remove(e)}_afterLabelCreate(e){this.labelElements.add(e),e.addEventListener("pointerdown",this._onLabelPointerDown),e.addEventListener("pointerup",this._onLabelPointerUp)}_afterLabelRemoved(e){this.labelElements.remove(e),e.removeEventListener("pointerdown",this._onLabelPointerDown),e.removeEventListener("pointerup",this._onLabelPointerUp)}_afterInputCreate(e){if(e.focus(),e.select(),this.inputCreatedFunction){const i=e.getAttribute("data-input-type"),r=i==="thumb"?kQe(e):null;this.inputCreatedFunction(e,i,r)}}_afterTickLineCreate(e){const i=N1(e),r=Vk(e),s=this.tickElements.at(i),n=s.at(r);n?n.tickElement=e:s.add({groupElement:null,tickElement:e,labelElement:null},r)}_afterTickLabelCreate(e){const i=N1(e),r=Vk(e),s=this.tickElements.at(i),n=s.at(r);n?n.labelElement=e:s.add({groupElement:null,labelElement:e,tickElement:null},r)}_afterTickGroupRemoved(e){const i=N1(e),r=this.tickElements.items[i],s=r?.find(n=>n.groupElement===e);s&&r.remove(s)}_afterTickGroupCreate(e){const i=YY(e);if(i?.tickCreatedFunction){const r=N1(e),s=Vk(e),n=VR(e),o=this.tickElements?.at(r)?.at(s);if(o){o.groupElement=e;const a=o.tickElement||null,l=o.labelElement||null;i.tickCreatedFunction(n,a,l)}}}_afterMaxLabelCreate(e){this._set("maxLabelElement",e)}_afterMinLabelCreate(e){this._set("minLabelElement",e)}_onAnchorKeyDown(e){if(this._isDisabled||this.state==="editing")return;const{key:i,target:r}=e,s=this.values,n=R1(r),o=this._anchorElements[n],a=s[n],l=[Kn.moveAnchorUp,Kn.moveAnchorDown,Kn.moveAnchorLeft,Kn.moveAnchorRight];if(i===Kn.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=n;else if(l.includes(i)){e.preventDefault();const{steps:c}=this,d=i===Kn.moveAnchorUp||i===Kn.moveAnchorRight?1:-1;if(c!=null)this._toStep(n,this._isReversedLayout()?-1*d:d);else{const{precision:f}=this,m=this._getPositionOfElement(o),y=this._valueFromPosition(m),v=this._isHorizontalLayout()?d:-1*d;let b;b=f===0?this._positionFromValue(y+v):f===1?this._positionFromValue(y+.1*v):m+v,this._toPosition(n,b)}const h=this.values[n];a!==h&&this._emitThumbChangeEvent({index:n,oldValue:a,value:h})}else if(i===Kn.moveAnchorToMax||i===Kn.moveAnchorToMin){e.preventDefault();const{min:c,max:d}=this._getAnchorBoundsInPixels(n),h=this._isPositionInverted()?i===Kn.moveAnchorToMax?c:d:i===Kn.moveAnchorToMin?c:d;this._toPosition(n,h);const f=this.values[n];a!==f&&this._emitThumbChangeEvent({index:n,oldValue:a,value:f})}}_onAnchorPointerDown(e){if(this._isDisabled)return;const{target:i,clientX:r,clientY:s}=e,n=R1(i);n!=null&&(e.preventDefault(),this._anchorElements[n]&&this._anchorElements[n].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:r,clientY:s,index:n,position:this._getPositionOfElement(this._anchorElements[n])},document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}_onAnchorPointerMove(e){if(this.state==="editing"||!this._dragStartInfo)return;e.preventDefault();const{values:i,_anchorElements:r,_dragged:s,_dragStartInfo:n,_dragStartInfo:{index:o,position:a}}=this,{clientX:l,clientY:c}=e,d=s?"drag":"start",h=r[o],f=this._getPositionOfElement(h),m=this._applyPrecisionToPosition(this._isHorizontalLayout()?a+l-n.clientX:a+c-n.clientY);if(f===m)return;const y=i[o];this._dragged=!0,this._toPosition(o,m);const v=this.values[o];s?y!==v&&this._emitThumbDragEvent({index:o,state:d,value:v}):this._emitThumbDragEvent({index:o,state:d,value:y})}_onAnchorPointerUp(e){if(document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),!this._dragStartInfo)return;e.preventDefault();const{index:i}=this._dragStartInfo,r=this._dragged,s=this.values[i];this._dragged=!1,this._dragStartInfo=null,this._lastMovedHandleIndex=i,r?this._emitThumbDragEvent({index:i,state:"stop",value:s}):(this.scheduleRender(),this.state!=="editing"&&this._emitThumbClickEvent({index:i,value:s}))}_onTrackPointerDown(e){const{_dragStartInfo:i,snapOnClickEnabled:r,state:s,values:n}=this;if(this._isDisabled||s==="editing"||i||(document.addEventListener("pointermove",this._onTrackPointerMove),document.addEventListener("pointerup",this._onTrackPointerUp),!r||!n?.length))return;const{steps:o}=this,{clientX:a,clientY:l}=e,c=this._getCursorPositionFromEvent(e),d=this._valueFromPosition(c),h=this._getIndexOfNearestValue(d),f=n[h],m=n.some((w,x)=>w===f&&x!==h)&&d>f?n.lastIndexOf(f):h;if(m==null)return;const y=n[m],v=o!=null?this._calculateNearestStepPosition(c):c;this._toPosition(m,v),this._dragged=!0,this._dragStartInfo={clientX:a,clientY:l,index:m,position:v},this._focusedAnchorIndex=m,this._emitThumbDragEvent({index:m,state:"start",value:y});const b=this.values[m];y!==b&&this._emitThumbDragEvent({index:m,state:"drag",value:b}),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove)}_onTrackPointerMove(e){e.preventDefault(),this._dragged=!0}_onTrackPointerUp(e){if(e.preventDefault(),document.removeEventListener("pointermove",this._onTrackPointerMove),document.removeEventListener("pointerup",this._onTrackPointerUp),this.snapOnClickEnabled||(this._dragged=!1),!this._dragged){const i=this._getCursorPositionFromEvent(e),r=this._valueFromPosition(i);this._emitTrackClickEvent({value:r})}}_onSegmentPointerDown(e){e.preventDefault();const i=e.target,r=TQe(i),s=EQe(i),n=MQe(i);if(this._isDisabled||s==null||n==null)return;e.stopPropagation(),this._storeTrackDimensions(),document.addEventListener("pointerup",this._onSegmentPointerUp);const o=this._getAnchorDetails(s),a=this._getAnchorDetails(n);this.syncedSegmentsEnabled?(this.segmentElements.forEach(l=>l.classList.add(xt.segmentElementActive)),this._anchorElements.forEach(l=>l.classList.add(xt.anchorElementActive))):(this.segmentElements.at(r).classList.add(xt.segmentElementActive),this._anchorElements[o.index]?.classList.add(xt.anchorElementActive),this._anchorElements[a.index]?.classList.add(xt.anchorElementActive)),this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(e),index:r,details:this._normalizeSegmentDetails({min:o,max:a})},this.draggableSegmentsEnabled&&(document.addEventListener("pointermove",this._onSegmentPointerMove),this._emitSegmentDragEvent({index:r,state:"start",thumbIndices:[s,n]}))}_onSegmentPointerMove(e){if(!this._segmentDragStartInfo)return;e.preventDefault();const{_trackHeight:i,_trackWidth:r,_segmentDragStartInfo:{index:s,cursorPosition:n,details:{min:o,max:a}}}=this,{index:l,position:c,value:d}=o,{index:h,position:f,value:m}=a;this._dragged=!0;const y=this._getCursorPositionFromEvent(e);if(y===n)return;const v=this._positionToPercent(n),b=this._positionToPercent(y)-v,w=this._positionToPercent(c)+b,x=this._positionToPercent(f)+b,{min:S}=this._getAnchorBoundsAsPercents(l),{max:$}=this._getAnchorBoundsAsPercents(h);let T=!1,C=!1;if(w<S?T=!0:x>$&&(C=!0),T){const{min:A,max:q}=this.viewModel.getBoundsForValueAtIndex(l),J=this._isPositionInverted()?q:A,ee=J,re=m+(J-d),me=re-this.values[h];return void(this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(me):this._updateAnchorValues([l,h],[ee,re]))}if(C){const{min:A,max:q}=this.viewModel.getBoundsForValueAtIndex(h),J=this._isPositionInverted()?A:q,ee=J,re=d+(J-m),me=re-this.values[l];return void(this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(me):this._updateAnchorValues([l,h],[re,ee]))}const L=this._isHorizontalLayout()?r:i,N=x/100*L,D=w/100*L,F=this.values,W=[F[l],F[h]],Z=this._getValueForAnchorAtPosition(l,D),V=this._getValueForAnchorAtPosition(h,N);this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(Z-W[0]):this._updateAnchorValues([l,h],[Z,V]),[this.values[l],this.values[h]].every((A,q)=>A===W[q])||this._emitSegmentDragEvent({index:s,state:"drag",thumbIndices:[l,h]})}_onSegmentPointerUp(e){if(e.preventDefault(),document.removeEventListener("pointerup",this._onSegmentPointerUp),document.removeEventListener("pointermove",this._onSegmentPointerMove),!this._segmentDragStartInfo)return;const{_dragged:i}=this,r=this.min,s=this.max,n=this.values,{index:o,details:{min:{index:a},max:{index:l}}}=this._segmentDragStartInfo;if(this.segmentElements.forEach(c=>c.classList.remove(xt.segmentElementActive)),this._anchorElements.forEach(c=>c.classList.remove(xt.anchorElementActive)),this.draggableSegmentsEnabled){const c=s-r,d=n[a],h=n[l];this._lastMovedHandleIndex=d===h?d>c/2?a:l:null,this._dragged=!1,this._segmentDragStartInfo=null,this._emitSegmentDragEvent({index:o,state:"stop",thumbIndices:[a,l]})}if(!i){const c=this._getCursorPositionFromEvent(e),d=this._valueFromPosition(c);this._emitSegmentClickEvent({index:o,value:d,thumbIndices:[a,l]})}}_onTickGroupClick(e){const i=e.target;if(YY(i)){const r=N1(i),s=Vk(i),n=VR(i);this._emitTickClickEvent({configIndex:r,groupIndex:s,value:n})}}_storeTrackDimensions(){if(this.trackElement){const e=this._getDimensions(this.trackElement);this._trackHeight=this._applyPrecisionToPosition(e.height),this._trackWidth=this._applyPrecisionToPosition(e.width)}}_onLabelPointerDown(){this._isDisabled||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}_onLabelPointerMove(){this._isDisabled||(this._dragged=!0)}_onLabelPointerUp(e){if(this._isDisabled)return;const i=R1(e.target);this.labelInputsEnabled&&!this._dragged&&i!=null&&(this._activeLabelInputIndex=i),this._dragged=!1,document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove)}_onLabelInputBlur(e){const{_activeLabelInputIndex:i,values:r,viewModel:s}=this,n=e.target.value;if(this._activeLabelInputIndex=null,!n||i==null||r==null)return;const o=this._parseInputValue(n,"value",i),a=r[i],{min:l,max:c}=this.viewModel.getBoundsForValueAtIndex(i);if(o<l||o>c)return;s.setValue(i,o);const d=this.values[i];a!==d&&this._emitThumbChangeEvent({index:i,oldValue:a,value:d})}_onInputKeyDown(e){if(this._isDisabled)return;const{key:i,target:r}=e,{hideInput1:s,hideInput2:n,hideInput3:o}=Kn,{_activeLabelInputIndex:a,_anchorElements:l}=this,c=r;if(i===s||i===n||i===o){e.stopPropagation();const d=a;c.blur(),d!=null?l[d].focus():c.parentElement?.focus()}}_onMaxLabelClick(){this._isDisabled||(this._emitMaxRangeLabelClickEvent({type:"max-click",value:this.max}),this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0))}_onMaxLabelKeyDown({key:e}){this._isDisabled||e!==Kn.showInput||(this._isMaxInputActive=!0)}_onMaxInputBlur(e){const i=e.target.value;if(this._isMaxInputActive=!1,!i)return;const r=this.max,s=this._parseInputValue(i,"max");s<=this.min||(this.viewModel.set("max",s),this.max!==r&&this._emitMaxChangeEvent({oldValue:r,value:this.max}))}_onMinLabelClick(){this._isDisabled||(this._emitMinRangeLabelClickEvent({type:"min-click",value:this.min}),this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0))}_onMinLabelKeyDown({key:e}){this._isDisabled||e!==Kn.showInput||(this._isMinInputActive=!0)}_onMinInputBlur(e){const i=e.target.value;if(this._isMinInputActive=!1,!i)return;const r=this.min,s=this._parseInputValue(i,"min");s>=this.max||(this.viewModel.set("min",s),this.min!==r&&this._emitMinChangeEvent({oldValue:r,value:this.min}))}_positionFromValue(e){const{_trackHeight:i,_trackWidth:r}=this,s=this.min??0,n=this.max??0,o=n-s;if(o===0||e==null)return 0;const a=this._isHorizontalLayout();let l=a?this._applyPrecisionToPosition(r*(e-s)/o):this._applyPrecisionToPosition(i*(n-e)/o);return this._isReversedLayout()&&(l=a?r-l:i-l),l}_valueFromPosition(e){const{_trackHeight:i,_trackWidth:r,precision:s}=this,n=this.min??0,o=this.max??0,a=o-n;let l=this._isHorizontalLayout()?e*a/r+n:a*(1e3-e/i*1e3)/1e3+n;return this._isReversedLayout()&&(l=o+n-l),parseFloat(l.toFixed(s))}_positionToPercent(e){const{_trackHeight:i,_trackWidth:r}=this,s=100*e/(this._isHorizontalLayout()?r:i);return this._applyPrecisionToPosition(s)}_applyPrecisionToPosition(e){return parseFloat(e.toFixed(this._positionPrecision))}_isPositionInverted(){const{layout:e}=this;return e==="horizontal-reversed"||e==="vertical"}_isHorizontalLayout(){return this.layout.includes("horizontal")}_isReversedLayout(){return this.layout.includes("reversed")}_normalizeSegmentDetails(e){if(this._isPositionInverted()){const{min:i,max:r}=e;return{min:r,max:i}}return e}_parseInputValue(e,i,r){return this.inputParseFunction?this.inputParseFunction(e,i,r):this.viewModel.defaultInputParseFunction(e)}_formatInputValue(e,i,r){return this.inputFormatFunction?this.inputFormatFunction(e,i,r):this.viewModel.defaultInputFormatFunction(e)}_getAnchorDetails(e){const i=this.values,r=[...i].sort((n,o)=>n-o)[e],s=i.indexOf(r);return{index:s,position:this._getPositionOfElement(this._anchorElements[s]),value:r}}_updateAnchorStyle(e,i){const r=this._anchorElements[e];r&&(this._isHorizontalLayout()?r.style.left=`${i}`:r.style.top=`${i}`)}_getStyleForAnchor(e,i,r){const s=this._getPositionStyleForElement(e);if(this.values?.length===1)return`${s}`;const n=this._zIndices[i];return`${s}; z-index: ${r?this._zIndexOffset+n:n}`}_getPositionStyleForElement(e){const i=this._positionFromValue(e),r=this._positionToPercent(i);return`${this._isHorizontalLayout()?"left":"top"}: ${r}%`}_getPositionOfElement(e){const i=this._getDimensions(e.offsetParent),r=this._getDimensions(e);return this._isHorizontalLayout()?this._applyPrecisionToPosition(r.left-i.left):this._applyPrecisionToPosition(r.top-i.top)}_updateAnchorValues(e,i){e.forEach((r,s)=>this._toValue(r,i[s]))}_updateAnchorValuesByDifference(e){const{min:i,max:r,values:s}=this;s?.forEach((n,o)=>this._toValue(o,Math.max(Math.min(n+e,r),i)))}_toValue(e,i){this.steps!=null&&(i=this._getStepValues()[this._getIndexOfNearestStepValue(i)]),this._updateAnchorStyle(e,this._getPositionStyleForElement(i)),this.viewModel.setValue(e,i)}_toPosition(e,i){const r=this.steps!=null?this._getStepValueForAnchorAtPosition(e,i):this._getValueForAnchorAtPosition(e,i);this._updateAnchorStyle(e,this._getPositionStyleForElement(r)),this.viewModel.setValue(e,r)}_getValueForAnchorAtPosition(e,i){const{min:r,max:s}=this._getAnchorBoundsInPixels(e),{min:n,max:o}=this.viewModel.getBoundsForValueAtIndex(e);let a,l,c=null;return this._isPositionInverted()?(a=n,l=o):(a=o,l=n),c=i>s?a:i<r?l:this._valueFromPosition(i),c>o?c=o:c<n&&(c=n),c}_getStepValueForAnchorAtPosition(e,i){const r=this._getStepValues(),s=this._calculateNearestStepPosition(i),n=this._getValueForAnchorAtPosition(e,s);return r[this._getIndexOfNearestStepValue(n)]}_getAnchorBoundsAsPercents(e){const{min:i,max:r}=this._getAnchorBoundsInPixels(e);return{min:this._positionToPercent(i),max:this._positionToPercent(r)}}_getAnchorBoundsInPixels(e){const{_anchorElements:i,_trackHeight:r,_trackWidth:s,effectiveMax:n,effectiveMin:o,thumbsConstrained:a}=this,l=i[e-1],c=i[e+1],d=this._isHorizontalLayout()?s:r;let h,f;return this._isPositionInverted()?(h=o!=null?this._positionFromValue(o):d,f=n!=null?this._positionFromValue(n):0):(h=n!=null?this._positionFromValue(n):d,f=o!=null?this._positionFromValue(o):0),a?this._isPositionInverted()?{max:l?this._getPositionOfElement(l):h,min:c?this._getPositionOfElement(c):f}:{max:c?this._getPositionOfElement(c):h,min:l?this._getPositionOfElement(l):f}:{max:h,min:f}}_getIndexOfNearestValue(e){const i=this.values;return i.indexOf(i.reduce((r,s)=>Math.abs(s-e)<Math.abs(r-e)?s:r))}_getCursorPositionFromEvent(e){const i=this._getDimensions(this.trackElement);return this._isHorizontalLayout()?this._applyPrecisionToPosition(e.clientX-i.left):this._applyPrecisionToPosition(e.clientY-i.top)}_getStepValues(){const{steps:e}=this;if(Array.isArray(e))return e;const{max:i,min:r}=this;if(r==null||i==null||e==null)return[];const s=Math.ceil((i-r)/e),n=[];for(let o=0;o<=s;o++){const a=r+e*o;n.push(a>i?i:a)}return n}_toStep(e,i){const r=this.values[e],s=this._getStepValues(),n=s.indexOf(r);let o=null;if(n>-1){let a=s[n+i];isNaN(a)&&(a=s[n]);const l=this._positionFromValue(a);o=this._getStepValueForAnchorAtPosition(e,l)}else o=s[this._getIndexOfNearestStepValue(r)+i];this.viewModel.setValue(e,o)}_getIndexOfNearestStepValue(e){const{steps:i}=this;if(i==null)return null;const r=this._getStepValues(),s=r.reduce((n,o)=>Math.abs(o-e)<Math.abs(n-e)?o:n);return r.indexOf(s)}_calculateNearestStepPosition(e){const i=this._valueFromPosition(e),r=this._getIndexOfNearestStepValue(i),s=this._getStepValues();return this._positionFromValue(s[r])}_getTickCounts(e,i){const{mode:r}=i;return r==="count"||r==="position"?e||0:r==="percent"&&100/e||0}_calculateTickPositions(e){return e.map(i=>this._positionFromValue(i))}_calculateEquidistantTickPositions(e){const{_trackWidth:i,_trackHeight:r}=this,s=this._isHorizontalLayout()?i:r,n=s/(e-1),o=[];if(e===1)return[s/2];for(let a=0;a<e;a++){const l=a*n;l<=s&&o.push(l)}return o}_getDimensions(e){try{return Rf(e),e.getBoundingClientRect()}catch(i){if(typeof i=="object"&&i!==null)return new DOMRect(0,0,0,0);throw i}}_emitTrackClickEvent(e){this.emit("track-click",{...e,type:"track-click"})}_emitTickClickEvent(e){this.emit("tick-click",{...e,type:"tick-click"})}_emitMaxChangeEvent(e){this.emit("max-change",{...e,type:"max-change"})}_emitMinChangeEvent(e){this.emit("min-change",{...e,type:"min-change"})}_emitThumbChangeEvent(e){this.emit("thumb-change",{...e,type:"thumb-change"})}_emitThumbClickEvent(e){this.emit("thumb-click",{...e,type:"thumb-click"})}_emitThumbDragEvent(e){this.emit("thumb-drag",{...e,type:"thumb-drag"})}_emitSegmentClickEvent(e){this.emit("segment-click",{...e,type:"segment-click"})}_emitSegmentDragEvent(e){this.emit("segment-drag",{...e,type:"segment-drag"})}_emitMinRangeLabelClickEvent(e){this.emit("min-click",e)}_emitMaxRangeLabelClickEvent(e){this.emit("min-click",e)}};function R1(t){return t?.["data-thumb-index"]}function kQe(t){return t?.["data-input-index"]}function TQe(t){return t?.["data-segment-index"]}function EQe(t){return t?.["data-min-thumb-index"]}function MQe(t){return t?.["data-max-thumb-index"]}function VR(t){return t?.["data-value"]}function N1(t){return t?.["data-tick-config-index"]}function Vk(t){return t?.["data-tick-group-index"]}function YY(t){return t?.["data-config"]}u([p()],rt.prototype,"_activeLabelInputIndex",void 0),u([p()],rt.prototype,"_dragStartInfo",void 0),u([p()],rt.prototype,"_isMinInputActive",void 0),u([p()],rt.prototype,"_isMaxInputActive",void 0),u([p()],rt.prototype,"_segmentDragStartInfo",void 0),u([p({readOnly:!0})],rt.prototype,"_isDisabled",null),u([p()],rt.prototype,"disabled",void 0),u([p()],rt.prototype,"draggableSegmentsEnabled",void 0),u([p()],rt.prototype,"effectiveMax",null),u([p()],rt.prototype,"effectiveMin",null),u([p({readOnly:!0})],rt.prototype,"effectiveSegmentElements",void 0),u([p()],rt.prototype,"extraNodes",void 0),u([p()],rt.prototype,"inputCreatedFunction",void 0),u([p()],rt.prototype,"inputFormatFunction",null),u([p()],rt.prototype,"inputParseFunction",null),u([p()],rt.prototype,"icon",null),u([p()],rt.prototype,"label",null),u([p({readOnly:!0})],rt.prototype,"labelElements",void 0),u([p()],rt.prototype,"labelInputsEnabled",void 0),u([p()],rt.prototype,"labelFormatFunction",null),u([p({readOnly:!0})],rt.prototype,"labels",null),u([p({value:"horizontal"})],rt.prototype,"layout",null),u([p()],rt.prototype,"max",null),u([p({readOnly:!0})],rt.prototype,"maxLabelElement",void 0),u([p(),Tf("esri/widgets/Slider/t9n/Slider")],rt.prototype,"messages",void 0),u([p()],rt.prototype,"min",null),u([p({readOnly:!0})],rt.prototype,"minLabelElement",void 0),u([p()],rt.prototype,"precision",null),u([p()],rt.prototype,"rangeLabelInputsEnabled",void 0),u([p({readOnly:!0})],rt.prototype,"segmentElements",void 0),u([p()],rt.prototype,"snapOnClickEnabled",void 0),u([p({readOnly:!0})],rt.prototype,"state",null),u([p()],rt.prototype,"steps",void 0),u([p()],rt.prototype,"syncedSegmentsEnabled",void 0),u([p()],rt.prototype,"thumbsConstrained",null),u([p()],rt.prototype,"thumbCreatedFunction",void 0),u([p({readOnly:!0})],rt.prototype,"thumbElements",void 0),u([p()],rt.prototype,"tickConfigs",null),u([p({readOnly:!0})],rt.prototype,"tickElements",void 0),u([p({readOnly:!0})],rt.prototype,"trackElement",void 0),u([p()],rt.prototype,"values",null),u([p({type:ome})],rt.prototype,"viewModel",void 0),u([p()],rt.prototype,"visibleElements",void 0),u([Mt("visibleElements")],rt.prototype,"castVisibleElements",null),rt=u([M("esri.widgets.Slider")],rt);const CQe=rt;function PQe(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames;t=Array.isArray(t)?t:AQe(t),i.push(...t)}}function AQe(t){return t.split(",").map(e=>e.trim())}const Qt="esri-time-slider",Ye={timeSlider:`${Qt}`,actions:`${Qt}__actions`,hasActions:`${Qt}--has-actions`,max:`${Qt}__max`,maxDate:`${Qt}__max-date`,maxTime:`${Qt}__max-time`,min:`${Qt}__min`,minDate:`${Qt}__min-date`,minTime:`${Qt}__min-time`,next:`${Qt}__next`,play:`${Qt}__play`,playbackControls:`${Qt}__playback-controls`,previous:`${Qt}__previous`,slider:`${Qt}__slider`,sliderMajorTick:"majorTick",sliderMinorTick:"minorTick",timeExtent:`${Qt}__time-extent`,timeExtentEndDate:`${Qt}__time-extent-end-date`,timeExtentEndGroup:`${Qt}__time-extent-end-group`,timeExtentEndTime:`${Qt}__time-extent-end-time`,timeExtentSeparator:`${Qt}__time-extent-separator`,timeExtentStartDate:`${Qt}__time-extent-start-date`,timeExtentStartGroup:`${Qt}__time-extent-start-group`,timeExtentStartTime:`${Qt}__time-extent-start-time`,timeSliderDisabled:`${Qt}--disabled`,timeSliderLayout:`${Qt}__layout--`,timeSliderMode:`${Qt}__mode--`,timeSliderOutOfBounds:`${Qt}--out-of-bounds`,timeSliderRow:`${Qt}__row`,warning:`${Qt}__warning`,warningIcon:`${Qt}__warning-icon`,warningLabel:`${Qt}__warning-label`},KY=1e4;function Tj(t){return t!=null&&t.count!==void 0}function tP(t){return t!=null&&t.interval!==void 0}function XY(t){return t!=null&&t.dates!==void 0}let qr=class extends Pg{constructor(e){super(e),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new ue,this.fullTimeExtent=null,this.loop=!1,this.mode="time-window",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([de(()=>this.effectiveStops,()=>{this.timeExtent??(this.timeExtent=this._getDefaultTimeExtent())},Fi),de(()=>this.view,(e,i)=>{this._unregisterWidget(i),this._registerWidget(e)},Vs),de(()=>this.timeExtent,e=>{if(!this.view)return;const i=this.view.timeExtent;(e&&!e.isAllTime||i&&!i.isAllTime)&&(e&&i&&e.equals(i)||(this.view.timeExtent=e))},Fi),de(()=>this.view?.timeExtent,e=>{this._isViewTimeExtentInitialized?(e&&!e.isAllTime||this.timeExtent&&!this.timeExtent.isAllTime)&&(e&&this.timeExtent&&e.equals(this.timeExtent)||(this.timeExtent=e)):this._isViewTimeExtentInitialized=!0})])}destroy(){this._timerId!=null&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,this._animationController&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:e,stops:i}=this;if(XY(i)){const{dates:r}=i;if(!r?.length)return null;const s=r.sort((a,l)=>a.getTime()-l.getTime());if(!e)return s;const{start:n,end:o}=e;return!n||!o?s:s.filter(a=>!(a.getTime()<n.getTime()||a.getTime()>o.getTime()))}if(Tj(i)){const r=i.timeExtent??e;return this._divideTimeExtentByCount(r,i.count)}if(tP(i)){const r=i.timeExtent??e;return this._divideTimeExtentByInterval(r,i.interval)}return[]}set playRate(e){e<=0||e>36e5||(this.state==="playing"&&this._startAnimation(),this._set("playRate",e))}get state(){return this.fullTimeExtent?this._animationController?"playing":"ready":"disabled"}get timeExtentValues(){const{mode:e,timeExtent:i}=this;if(!i||i.isAllTime||i.isEmpty)return null;const{start:r,end:s}=i;switch(e){case"cumulative-from-end":case"instant":return r?[r.getTime()]:null;case"cumulative-from-start":return s?[s.getTime()]:null;case"time-window":return r&&s?[r.getTime(),s.getTime()]:null}}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(e){this.emit("trigger-action",{action:e})}updateWebDocument(e){const i=new Nue({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:Tj(this.stops)?this.stops.count:null,numThumbs:this.mode==="time-window"?2:1,stopDelay:this.playRate,stopInterval:tP(this.stops)?this.stops.interval:null,stops:XY(this.stops)?this.stops.dates:null});e.widgets?e.widgets.timeSlider=i:e.widgets=new Due({timeSlider:i})}valuesToTimeExtent(e){if(!e)return null;const i=e.sort((n,o)=>n-o).map(n=>new Date(n)),r=i.length>0?i[0]:null,s=i.length>1?i[1]:null;switch(this.mode){case"time-window":return new pt({start:r,end:s});case"instant":return new pt({start:r,end:r});case"cumulative-from-start":return new pt({start:null,end:r});case"cumulative-from-end":return new pt({start:r,end:null});default:return pt.allTime}}async _animate(){try{const e=this.view,i=this._animationController?.signal;await Promise.all([fU(this.playRate,null,i),e&&g_(()=>!e.updating,i)])}catch(e){return Yi(e)||X.getLogger(this).error(e),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),this._animationController&&this._animate()}_divideTimeExtentByCount(e,i=10){if(!e||!i)return[];const{start:r,end:s}=e;if(!r||!s)return[];if(i>KY)return this._divideTimeExtentByCount(e);const n=[],o=r.getTime(),a=s.getTime()-o;for(let l=0;l<=i;l++)n.push(new Date(o+l/i*a));return n}_divideTimeExtentByInterval(e,i,r=KY){if(!e||!i)return[];const{start:s,end:n}=e;if(!s||!n)return[];const o=n.getTime()-s.getTime(),a=i.toMilliseconds();if(a<=0||o/a>r)return this._divideTimeExtentByCount(e);const l=[],{value:c,unit:d}=i;let h=s;for(;h.getTime()<=n.getTime();)l.push(new Date(h)),h=fS(h,c,d);return l}_getDefaultTimeExtent(){const{effectiveStops:e,mode:i}=this;if(!e||!i)return null;switch(i){case"time-window":return e.length>1?new pt({start:e[0],end:e[1]}):null;case"cumulative-from-start":return e.length>0?new pt({start:null,end:e[0]}):null;case"cumulative-from-end":return e.length>0?new pt({start:e[0],end:null}):null;case"instant":return e.length>0?new pt({start:e[0],end:e[0]}):null;default:return null}}_registerWidget(e){e&&(e.persistableViewModels.includes(this)||e.persistableViewModels.add(this))}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(e){const{forward:i,allowRestart:r}=e,{effectiveStops:s}=this;if(!this.timeExtentValues||!s)return;const n=s.map(h=>h.getTime()),o=this.timeExtentValues.map(h=>{const f=n.indexOf(h);if(f!==-1)return f;const m=n.reduce((y,v)=>Math.abs(v-h)<Math.abs(y-h)?v:y);return n.indexOf(m)}),a=o.map(h=>h+(i?1:-1)),l=a.some(h=>h<0||h>n.length-1),{loop:c,state:d}=this;if(l)if(c||r){const h=Math.min(...o),f=Math.max(...o),m=(i?o.map(y=>y-h):o.map(y=>y+(n.length-1-f))).map(y=>n[y]);this.timeExtent=this.valuesToTimeExtent(m)}else d==="playing"&&this.stop();else{const h=a.map(f=>n[f]);this.timeExtent=this.valuesToTimeExtent(h)}}_stopAnimation(){this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(e){e?.persistableViewModels.remove(this)}};u([p()],qr.prototype,"_animationController",void 0),u([p({type:ue})],qr.prototype,"actions",void 0),u([p({readOnly:!0})],qr.prototype,"effectiveStops",null),u([p({type:pt})],qr.prototype,"fullTimeExtent",void 0),u([p({nonNullable:!0})],qr.prototype,"loop",void 0),u([p({nonNullable:!0})],qr.prototype,"mode",void 0),u([p({nonNullable:!0,value:1e3})],qr.prototype,"playRate",null),u([p({readOnly:!0})],qr.prototype,"state",null),u([p({cast:t=>t?(tP(t)&&(t.interval=Mi($o,t.interval)),(tP(t)||Tj(t))&&(t.timeExtent=Mi(pt,t.timeExtent)),t):null})],qr.prototype,"stops",void 0),u([p({type:pt})],qr.prototype,"timeExtent",void 0),u([p({readOnly:!0})],qr.prototype,"timeExtentValues",null),u([p()],qr.prototype,"view",void 0),u([p()],qr.prototype,"next",null),u([p()],qr.prototype,"play",null),u([p()],qr.prototype,"previous",null),u([p()],qr.prototype,"stop",null),u([p()],qr.prototype,"updateWebDocument",null),qr=u([M("esri.widgets.TimeSlider.TimeSliderViewModel")],qr);const ame=qr,LQe=3,OQe=858,RQe=[{minor:{value:100,unit:"milliseconds"},major:{value:1,unit:"seconds"},format:{second:"numeric"}},{minor:{value:500,unit:"milliseconds"},major:{value:5,unit:"seconds"},format:{second:"numeric"}},{minor:{value:1,unit:"seconds"},major:{value:20,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:2,unit:"seconds"},major:{value:30,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:10,unit:"seconds"},major:{value:1,unit:"minutes"},format:{minute:"numeric"}},{minor:{value:15,unit:"seconds"},major:{value:5,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"minutes"},major:{value:20,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:5,unit:"minutes"},major:{value:2,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:15,unit:"minutes"},major:{value:6,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"hours"},major:{value:1,unit:"days"},format:{day:"numeric",month:"short"}},{minor:{value:6,unit:"hours"},major:{value:1,unit:"weeks"},format:{day:"numeric",month:"short"}},{minor:{value:1,unit:"days"},major:{value:1,unit:"months"},format:{month:"long"}},{minor:{value:2,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:3,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:4,unit:"days"},major:{value:3,unit:"months"},format:{month:"short",year:"numeric"}},{minor:{value:1,unit:"weeks"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"months"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:2,unit:"months"},major:{value:2,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"years"},major:{value:1,unit:"decades"},format:{year:"numeric"}},{minor:{value:2,unit:"years"},major:{value:5,unit:"decades"},format:{year:"numeric"}},{minor:{value:5,unit:"decades"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1,unit:"centuries"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:2,unit:"centuries"},major:{value:20,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:5,unit:"centuries"},major:{value:50,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:10,unit:"centuries"},major:{value:100,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:20,unit:"centuries"},major:{value:200,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:50,unit:"centuries"},major:{value:500,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:100,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:200,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:500,unit:"centuries"},major:{value:5e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1e3,unit:"centuries"},major:{value:1e4,unit:"centuries"},format:{era:"short",year:"numeric"}}];function QY(t){return he("div",{class:Ye.warning},he("calcite-icon",{class:Ye.warningIcon,icon:"exclamation-mark-triangle"}),he("calcite-label",{alignment:"center",class:Ye.warningLabel,scale:"s"},t))}let Si=class extends Ng{constructor(e,i){super(e,i),this._allLayouts=["auto","compact","wide"],this._ignoreNextSliderUpdate=!1,this._slider=new CQe({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1,thumbsConstrained:!1}),this._tickFormat=null,this.disabled=!1,this.labelFormatFunction=null,this.messages=null,this.tickConfigs=null,this.timeVisible=!1,this.viewModel=new ame}initialize(){this.addHandles([de(()=>this._slider.values,e=>{if(this._ignoreNextSliderUpdate)return void(this._ignoreNextSliderUpdate=!1);const i=this.viewModel.valuesToTimeExtent(e);this.timeExtent?i?this.timeExtent.equals(i)||(this.timeExtent=i):this.timeExtent=null:i&&(this.timeExtent=i)}),de(()=>this.effectiveStops,()=>this._updateSliderSteps(),Fi)])}loadDependencies(){return F2({action:()=>K(()=>Promise.resolve().then(()=>cet),void 0),"action-menu":()=>K(()=>Promise.resolve().then(()=>nit),void 0),button:()=>K(()=>Promise.resolve().then(()=>W2),void 0),icon:()=>K(()=>Promise.resolve().then(()=>kee),void 0),label:()=>K(()=>Promise.resolve().then(()=>nye),void 0)})}destroy(){this._slider.destroy(),this._tickFormat=null}get _dateFormat(){return this._getIntlOptions("short-date")}get _timeFormat(){return this._getIntlOptions("long-time")}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}get effectiveStops(){return this.viewModel.effectiveStops}get fullTimeExtent(){return this.viewModel.fullTimeExtent}set fullTimeExtent(e){this.viewModel.fullTimeExtent=e}get icon(){return"clock"}set icon(e){this._overrideIfSome("icon",e)}get interactive(){return!(this.disabled||this.viewModel.state==="disabled"||this.timeZone===vh)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){this._set("layout",this._allLayouts.includes(e)?e:"auto")}get loop(){return this.viewModel.loop}set loop(e){this.viewModel.loop=e}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}get playRate(){return this.viewModel.playRate}set playRate(e){this.viewModel.playRate=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}get tickFormats(){const{timeZone:e}=this;return RQe.map(({minor:i,major:r,format:s})=>({minor:new $o(i),major:new $o(r),format:{...s,timeZone:e}}))}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(e){this.viewModel.timeExtent=e}get timeZone(){return this.viewModel.view?.timeZone??ga}set timeZone(e){this._overrideIfSome("timeZone",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}next(){return this.viewModel.next()}play(){return this.viewModel.play()}previous(){return this.viewModel.previous()}stop(){return this.viewModel.stop()}render(){const{_slider:e,actions:i,domNode:r,effectiveStops:s,fullTimeExtent:n,interactive:o,messages:a,mode:l,tickConfigs:c,timeExtent:d,timeVisible:h,viewModel:{state:f,timeExtentValues:m}}=this;if(n){const{start:V,end:A}=n;if(V&&A){const q=V.getTime(),J=A.getTime(),ee=e.min!==q||e.max!==J;if(ee&&(e.min=q,e.max=J),c)e.tickConfigs!==c&&(e.tickConfigs=c);else{const re=(J-q)/(e.trackElement?.offsetWidth||400),me=this.tickFormats.find(({minor:Ce})=>Ce.toMilliseconds()>LQe*re)??this.tickFormats.at(-1),ze=me&&this._tickFormat!==me;if(ze&&(this._tickFormat=me),ee||ze){const Ce={mode:"position",values:this._getTickPositions(me.minor),labelsVisible:!1,tickCreatedFunction:(vt,Rt)=>{Rt?.classList.add(Ye.sliderMinorTick)}},at={mode:"position",values:this._getTickPositions(me.major),labelsVisible:!0,tickCreatedFunction:(vt,Rt)=>{Rt?.classList.add(Ye.sliderMajorTick)},labelFormatFunction:vt=>xo(vt,me.format)};e.tickConfigs=[Ce,at]}}}}const y=!this.fullTimeExtent?.start||!this.fullTimeExtent.end||!this.timeExtent||this.timeExtent.isAllTime||this.timeExtent.isEmpty||this.timeExtent.start&&(this.timeExtent.start<this.fullTimeExtent.start||this.timeExtent.start>this.fullTimeExtent.end)||this.timeExtent.end&&(this.timeExtent.end>this.fullTimeExtent.end||this.timeExtent.end<this.fullTimeExtent.start);if(y)switch(this._ignoreNextSliderUpdate=!0,l){case"time-window":e.values=[e.min,e.max];break;case"instant":case"cumulative-from-end":e.values=[e.min];break;case"cumulative-from-start":e.values=[e.max]}else m?d2(e.values,m)||(e.values=m):e.values=null;e.disabled=!o;const v=y||!o||!s?.length,b=this.layout==="auto"?r.clientWidth<OQe?"compact":"wide":this.layout,w=he("calcite-button",{appearance:"transparent",bind:this,class:Ye.play,disabled:v,iconStart:f==="playing"?"pause":"play",kind:"neutral",label:f==="playing"?a.control.stop:a.control.play,onclick:this._playOrStopClick,scale:b==="wide"?"l":"m",width:"full"}),x=this.labelFormatFunction?he("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:Ye.timeExtentStartDate,"data-date":d?[d.start,d.end]:null,"data-layout":b,"data-type":"extent",key:Ye.timeExtentStartDate}):!d||d.isAllTime?QY(a.noTimeExtent):d.isEmpty?QY(a.emptyTimeExtent):[d?.start&&he("div",{class:Ye.timeExtentStartGroup,key:Ye.timeExtentStartGroup},he("calcite-label",{alignment:"center",class:Ye.timeExtentStartDate,key:Ye.timeExtentStartDate,scale:"s"},this._formatDate(d.start)),h?he("calcite-label",{alignment:"center",class:Ye.timeExtentStartTime,key:Ye.timeExtentStartTime,scale:"s"},this._formatTime(d.start)):null),d.start&&d.end&&d.start.getTime()!==d.end.getTime()&&he("div",{class:Ye.timeExtentSeparator,key:Ye.timeExtentSeparator}),d?.end&&(!d.start||d.start.getTime()!==d.end.getTime())&&he("div",{class:Ye.timeExtentEndGroup,key:Ye.timeExtentEndGroup},he("calcite-label",{alignment:"center",class:Ye.timeExtentEndDate,key:Ye.timeExtentEndDate,scale:"s"},this._formatDate(d.end)),h?he("calcite-label",{alignment:"center",class:Ye.timeExtentEndTime,key:Ye.timeExtentEndTime,scale:"s"},this._formatTime(d.end)):null)],S=he("div",{class:Ye.timeExtent},x),$=this.labelFormatFunction?he("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:Ye.minDate,"data-date":n?.start,"data-layout":b,"data-type":"min",key:Ye.minDate}):n?.start&&[he("calcite-label",{class:Ye.minDate,key:Ye.minDate,scale:"s"},this._formatDate(n.start)),h&&he("calcite-label",{class:Ye.minTime,key:Ye.minTime,scale:"s"},this._formatTime(n.start))],T=he("div",{class:Ye.min},$),C=he("div",{class:Ye.slider},e.render()),L=this.labelFormatFunction?he("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:Ye.maxDate,"data-date":n?.end,"data-layout":b,"data-type":"max",key:Ye.maxDate}):n?.end&&[he("calcite-label",{class:Ye.maxDate,key:Ye.maxDate,scale:"s"},this._formatDate(n.end)),h&&he("calcite-label",{class:Ye.maxTime,key:Ye.maxTime,scale:"s"},this._formatTime(n.end))],N=he("div",{class:Ye.max},L),D=he("calcite-button",{appearance:"transparent",bind:this,class:Ye.previous,disabled:v||f==="playing",iconStart:"reverse",kind:"neutral",label:a.pagination.previous,onclick:this._previousClick,scale:b==="wide"?"l":"m",width:"full"}),F=he("calcite-button",{appearance:"transparent",bind:this,class:Ye.next,disabled:v||f==="playing",iconStart:"forward",kind:"neutral",label:a.pagination.next,onclick:this._nextClick,scale:b==="wide"?"l":"m",width:"full"}),W=i?.length>0,Z=W&&he("calcite-action-menu",{class:Ye.actions,label:a.options},i.toArray().map(V=>he("calcite-action",{bind:this,icon:V.icon,id:V.id,onclick:()=>this.viewModel.triggerAction(V),text:V.title,textEnabled:!0})));return he("div",{afterCreate:V=>{this.addHandles(lue(V,()=>this.scheduleRender()))},"aria-label":a.widgetLabel,class:this.classes(Ye.timeSlider,pn.widget,`${Ye.timeSliderMode}${l}`,`${Ye.timeSliderLayout}${b}`,!o&&Ye.timeSliderDisabled,y&&Ye.timeSliderOutOfBounds,W&&Ye.hasActions,v8(this.container))},b==="wide"&&he("div",{class:Ye.timeSliderRow},he("div",{class:Ye.playbackControls},[w,S,T,C,N,D,F]),Z),b==="compact"&&[he("div",{class:Ye.timeSliderRow,key:"time-slider-row-1"},[S,Z]),he("div",{class:Ye.timeSliderRow,key:"time-slider-row-2"},[C]),he("div",{class:Ye.timeSliderRow,key:"time-slider-row-3"},[T,D,w,F,N])])}updateWebDocument(e){this.viewModel?.updateWebDocument(e)}_createLabel(e){if(!this.labelFormatFunction)return;const i=e.getAttribute("data-type"),r=e.getAttribute("data-layout"),s=e["data-date"];this.labelFormatFunction(s,i,e,r)}_formatDate(e){return xo(e,this._dateFormat)}_formatTime(e){return xo(e,this._timeFormat)}_getIntlOptions(e){const{timeZone:i}=this;return{...zv(e),timeZone:i}}_getTickPositions(e){const{fullTimeExtent:i}=this;if(!i?.start||!i.end)return[];const{start:r,end:s}=i,n=[],{value:o,unit:a}=e;let l=$F(r,a,this.timeZone);for(;l.getTime()<=s.getTime();)l.getTime()>=r.getTime()&&n.push(l.getTime()),l=fS(l,o,a,this.timeZone);return n}_updateSliderSteps(){this._slider.steps=this.effectiveStops&&this.effectiveStops.length>0?this.effectiveStops.map(e=>e.getTime()):null}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:this.viewModel.state}}_previousClick(){this.viewModel.previous()}_nextClick(){this.viewModel.next()}};u([p()],Si.prototype,"_dateFormat",null),u([p()],Si.prototype,"_timeFormat",null),u([p()],Si.prototype,"actions",null),u([p()],Si.prototype,"disabled",void 0),u([p()],Si.prototype,"effectiveStops",null),u([p()],Si.prototype,"fullTimeExtent",null),u([p()],Si.prototype,"icon",null),u([p({readOnly:!0})],Si.prototype,"interactive",null),u([p()],Si.prototype,"label",null),u([p()],Si.prototype,"labelFormatFunction",void 0),u([p({value:"auto"})],Si.prototype,"layout",null),u([p()],Si.prototype,"loop",null),u([p(),Tf("esri/widgets/TimeSlider/t9n/TimeSlider")],Si.prototype,"messages",void 0),u([p()],Si.prototype,"mode",null),u([p()],Si.prototype,"playRate",null),u([p()],Si.prototype,"stops",null),u([p()],Si.prototype,"tickConfigs",void 0),u([p()],Si.prototype,"tickFormats",null),u([p()],Si.prototype,"timeExtent",null),u([p({nonNullable:!0})],Si.prototype,"timeVisible",void 0),u([p()],Si.prototype,"timeZone",null),u([p()],Si.prototype,"view",null),u([p({type:ame}),PQe("trigger-action")],Si.prototype,"viewModel",void 0),Si=u([M("esri.widgets.TimeSlider")],Si);const NQe=Si;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const DQe=(t,e)=>i=>zQe(i,t);var eA,i2,r2,Af,lme,cme,ume,PQ;let FQe=(PQ=class extends e9{constructor(i,r){var c;super(i,r);_t(this,Af);_t(this,eA,new Map);_t(this,i2);_t(this,r2);new O9(i);const s=this,n=s.instance;let o=n.viewModel,a=n.visibleElements;const l=new Proxy(this.exports,{get(d,h,f){return h==="viewModel"?o:h==="visibleElements"?a:Reflect.get(d,h,f)}});if(mt(s,r2,n),s.instance=l,s.exports=l,o){const d={component:i,get exports(){return s.instance.viewModel}};bqe(s).set("viewModel","viewModel"),i.addController(d),o=Uhe(i,new WeakRef(d),obe(i)-1,o,pe(s,eA))}s.instance.visibleElements&&(a=sl(c=s,Af,lme).call(c,n))}hostConnected(){this.instance=pe(this,r2),super.hostConnected()}hostLoad(){mt(this,i2,de(()=>this.component.el.view,i=>{const r=this.instance;!("view"in r)&&typeof r.viewModel=="object"?r.viewModel.view=i:r.view=i,!("map"in r)&&typeof r.viewModel=="object"?r.viewModel.map=i?.map:r.map=i?.map},{sync:!0,initial:!0}))}hostUpdate(i){i.has("closed")&&(this.instance.visible=!this.component.closed)}hostLoaded(){const{el:i}=this.component;i.childElem??(i.childElem=document.createElement("div")),this.instance.container=i.childElem,(this.component.el.shadowRoot??this.component.el).appendChild(this.instance.container),this.component.closed!==void 0&&this.onLifecycle(()=>de(()=>this.instance.visible,r=>this.component.closed=!r,{initial:!0}))}hostDestroy(){pe(this,i2)?.remove(),super.hostDestroy()}},eA=new WeakMap,i2=new WeakMap,r2=new WeakMap,Af=new WeakSet,lme=function(i){return new Proxy(i.visibleElements,{get:(r,s)=>{if(typeof s=="symbol"||s in Promise.prototype)return r[s];const n=[s],o=sl(this,Af,cme).call(this,n);return GV(this.component,a=>{const l=a;this.component[l]=!1;let c=i.visibleElements??{},d;for(const f of n.slice(0,-1))if(typeof c[f]=="object"&&c[f]!==null)c=c[f];else{d=!!c[f];break}d===void 0&&(d=!!(c[n.slice(-1)[0]]??!0));const h=l.startsWith("hide")||l.startsWith("show")?l.startsWith("hide"):d;this.onUpdate(f=>{if(f.has(l)){const m=this.component[l];sl(this,Af,ume).call(this,n,m,h)}})},o)}})},cme=function(i){const r=new Proxy({},{get:(s,n)=>{const o=Reflect.get(s,n);return typeof n=="symbol"||n in Promise.prototype?o:(i.push(n),r)}});return r},ume=function(i,r,s){let n=this.instance.visibleElements??{};for(const a of i.slice(0,-1))(typeof n[a]!="object"||n[a]===null)&&(n[a]={}),n=n[a];const o=!!(s?!r:r);n[i.at(-1)]=o},PQ);const zQe=l2(FQe);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const jQe=Qe`@keyframes esri-basemap-slide{0%{opacity:0;margin-top:0;margin-left:0}75%{opacity:0;margin-top:0;margin-left:0}to{opacity:1;margin-top:5px;margin-left:5px}}@keyframes esri-docking-animation{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes popup-intro-animation-down{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes popup-intro-animation-up{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted #000}}@keyframes esri-spinner--start-animation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes esri-spinner--finish-animation{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(0)}}@keyframes esri-spinner--rotate-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (prefers-reduced-motion){.esri-utility-network-trace__reset-prompt{animation:none!important}}@media (prefers-reduced-motion){.esri-popup--aligned-top-center,.esri-popup--aligned-top-left,.esri-popup--aligned-top-right,.esri-popup--aligned-bottom-center,.esri-popup--aligned-bottom-left,.esri-popup--aligned-bottom-right,.esri-popup--is-docked{animation:none!important}}@media (prefers-reduced-motion: reduce){.esri-fov-overlay{animation:none!important}}@keyframes esri-fade-in-down{0%{opacity:0;transform:translateY(-5px)}25%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in-up{0%{opacity:0;transform:translateY(5px)}25%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translate(0)}}@keyframes esri-fade-in{0%{opacity:0}25%{opacity:0}to{opacity:1}}@keyframes esri-fade-in-scale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes looping-progresss-bar-ani{0%{width:0;left:0}20%{width:20%;left:0}80%{width:20%;left:80%}to{width:0;left:100%}}@keyframes esri-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes panel-advance{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-advance--rtl{0%{opacity:0;transform:translate(-50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes panel-retreat--rtl{0%{opacity:0;transform:translate(50px) scale(.99)}to{opacity:1;transform:translate(0) scale(1)}}.esri-button{box-sizing:border-box;cursor:pointer;white-space:normal;word-break:normal;color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info);justify-content:center;align-items:center;width:100%;min-height:var(--calcite-spacing-xxxl);padding:6px 7px;font-family:inherit;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out,border .125s ease-in-out;display:flex;overflow:hidden;&:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-status-info-hover);border:var(--calcite-spacing-px) solid var(--calcite-color-status-info-hover)}}.esri-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-text-2);border:1px solid var(--calcite-color-text-2)}.esri-button.esri-button--small{min-height:var(--calcite-spacing-xl);font-size:var(--calcite-font-size-sm)}.esri-button.esri-button--half{width:50%;display:inline-block}.esri-button.esri-button--third{width:33%;display:inline-block}.esri-button--secondary{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-button--tertiary{color:var(--calcite-color-brand);background-color:var(--calcite-color-transparent);border-color:var(--calcite-color-transparent)}.esri-button--tertiary:hover{color:var(--calcite-color-brand-hover);background-color:var(--calcite-color-foreground-2);border-color:var(--calcite-color-transparent)}.esri-button--disabled{opacity:.4;pointer-events:none}.esri-button--drill-in{outline-offset:-4px;cursor:pointer;text-align:unset;background-color:var(--calcite-color-foreground-1);border:none;border-radius:2px;justify-content:space-between;align-items:center;margin:var(--calcite-spacing-md) 7px;padding:var(--calcite-spacing-md) 7px;text-decoration:none;transition:background-color .125s ease-in-out;display:flex;box-shadow:0 0 0 1px #adadad4d}.esri-button--drill-in:hover,.esri-button--drill-in:focus{background-color:var(--calcite-color-foreground-2)}.esri-button--drill-in__title{font-size:var(--calcite-font-size)}.esri-button--drill-in [class^=esri-icon-],.esri-button--drill-in [class*=" esri-icon-"]{padding:0 7px}.esri-widget--button{cursor:pointer;text-align:center;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);flex-flow:row;justify-content:center;align-items:center;width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl);margin:0;padding:0;font-size:var(--calcite-font-size);transition:background-color .125s ease-in-out;display:flex;overflow:hidden}.esri-widget--button:is(calcite-button):not(:hover){--calcite-icon-color: var(--calcite-color-text-3)}.esri-widget--button:not([appearance]),.esri-widget--button[appearance=solid]{--calcite-color-foreground-3: var(--calcite-color-foreground-1)}.esri-widget--button:is(calcite-button){--calcite-offset-invert-focus: 1}.esri-widget--button calcite-loader[inline]{margin:auto}.esri-button--secondary{color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-1);&:hover{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-status-info);border:1px solid var(--calcite-color-status-info)}}.esri-widget__heading{color:var(--calcite-color-text-2);margin:0 0 .5rem;font-weight:var(--calcite-font-weight-semibold)}h1.esri-widget__heading{font-size:var(--calcite-font-size-xl)}h2.esri-widget__heading{font-size:var(--calcite-font-size-md)}h3.esri-widget__heading,h4.esri-widget__heading,h5.esri-widget__heading,h6.esri-widget__heading{font-size:var(--calcite-font-size)}.esri-widget{--esri-widget-padding-x: 15px;--esri-widget-padding-y: var(--calcite-spacing-md);--esri-widget-padding: var(--esri-widget-padding-y) var(--esri-widget-padding-x);box-sizing:border-box;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget *,.esri-widget :before,.esri-widget :after{box-sizing:inherit}.esri-widget.esri-widget--disabled>*{opacity:.4;pointer-events:none}.esri-widget.esri-widget--compact{--esri-widget-padding-y: 0;--esri-widget-padding-x: 0}.esri-widget__anchor{color:var(--calcite-color-text-2)}.esri-widget__anchor:hover{color:var(--calcite-color-text-3)}.esri-widget__anchor:hover,.esri-widget__anchor:focus{text-decoration:underline}.esri-widget__anchor--disabled{opacity:.4;pointer-events:none}.esri-widget__header{background-color:var(--calcite-color-foreground-1);flex:1 0 100%;justify-content:space-between;align-items:center;width:100%;min-height:48px;padding:12px 0 12px 15px;display:flex}.esri-widget__header .esri-widget__heading{width:calc(100% - 48px);text-align:initial;color:var(--calcite-color-text-1);align-items:center;margin:0;padding:0;display:flex}.esri-widget__header-button{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background-color:var(--calcite-color-foreground-1);border:none;flex:0 0 48px;justify-content:center;align-self:stretch;align-items:center;width:48px;padding:0;display:flex}.esri-widget__footer{background-color:var(--calcite-color-foreground-1);justify-content:center;align-items:center;width:100%;min-height:48px;display:flex}.esri-widget__footer-pagination{color:var(--calcite-color-text-2);justify-content:space-between;align-items:center;display:flex}.esri-widget__footer-pagination-previous-button,.esri-widget__footer-pagination-next-button{cursor:pointer;background-color:var(--calcite-color-foreground-1);border:0;margin:0 7px;padding:12px 15px;transition:background-color .125s ease-in-out}.esri-widget__footer-pagination-previous-button:hover,.esri-widget__footer-pagination-previous-button:focus,.esri-widget__footer-pagination-next-button:hover,.esri-widget__footer-pagination-next-button:focus{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1)}.esri-menu{visibility:hidden;z-index:1;background-clip:padding;background-color:var(--calcite-color-foreground-1);background-clip:padding-box;width:100%;max-height:0;margin:2px 0 0;padding:0;font-size:var(--calcite-font-size);line-height:var(--calcite-spacing-xl);position:absolute;top:100%;left:0;overflow:hidden;box-shadow:0 1px 2px #0000004d}.esri-menu .esri-menu__header{color:var(--calcite-color-text-inverse);background-color:var(--calcite-color-inverse);padding:6px 12px}.esri-menu__list{margin:0;padding:0;list-style:none}.esri-menu__list-item{cursor:pointer;border-top:1px solid #adadad4d;border-left:3px solid #0000;padding:.8em 1em}.esri-menu__list-item [class^=esri-icon-],.esri-menu__list-item [class*=" esri-icon-"]{padding-right:2.8px}.esri-menu__list-item:first-child{border-top:none}.esri-menu__list-item--focus,.esri-menu__list-item:hover,.esri-menu__list-item:focus{background-color:var(--calcite-color-foreground-1)}.esri-menu__list-item:active{background-color:var(--calcite-color-foreground-current)}.esri-menu__list-item--active,.esri-menu__list-item--active:hover,.esri-menu__list-item--active:focus{background-color:var(--calcite-color-foreground-1);border-left-color:var(--calcite-color-brand)}.esri-widget__table{border-collapse:collapse;color:var(--calcite-color-text-1);border:none;width:100%;line-height:var(--calcite-font-line-height-relative-tight)}.esri-widget__table tr:nth-child(odd){background-color:var(--calcite-color-transparent)}.esri-widget__table tr:nth-child(2n){background-color:var(--calcite-color-transparent-press)}.esri-widget__table tr a{color:var(--calcite-color-text-2)}.esri-widget__table tr a:hover,.esri-widget__table tr a:focus{color:var(--calcite-color-text-1)}.esri-widget__table tr td,.esri-widget__table tr th{vertical-align:top;word-break:break-word;padding:.5em .7em;font-size:var(--calcite-font-size-sm);font-weight:var(--calcite-font-weight-regular)}.esri-widget__table tr th{text-align:left;border-right:3px solid #0000000d;width:50%}.esri-widget__table tr td{width:50%}.esri-input{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-1);border:1px solid #959595;font-size:var(--calcite-font-size)}.esri-input::-ms-clear{display:none}.esri-input::placeholder{opacity:1;color:var(--calcite-color-text-2)}.esri-input:placeholder-shown{text-overflow:ellipsis}.esri-input[type=text],.esri-input[type=password],.esri-input[type=number]{height:32px;padding:0 .5em}calcite-combobox.esri-input{border:none}.esri-widget__content--empty{text-align:center;color:var(--calcite-color-border-input);flex-flow:column wrap;align-items:center;padding:18px 22px;display:flex}.esri-widget__content--empty h1.esri-widget__heading,.esri-widget__content--empty h2.esri-widget__heading,.esri-widget__content--empty h3.esri-widget__heading,.esri-widget__content--empty h4.esri-widget__heading,.esri-widget__content--empty h5.esri-widget__heading{font-weight:var(--calcite-font-weight-regular)}.esri-widget__content-illustration--empty{width:128px;padding:1rem 0}.esri-widget__content-icon--empty{width:32px;padding:.5rem 0}.esri-select{appearance:none;cursor:pointer;color:var(--calcite-color-text-2);background:var(--calcite-color-foreground-1) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-8 -8 32 32' width='32' height='32'%3E%3Cpath d='M8 11.207l-4-4V5.793l4 4 4-4v1.414z' fill='%23adadad' fillrule='nonzero'/%3E%3C/svg%3E") 100% no-repeat;border:1px solid #959595;border-radius:0;width:100%;height:32px;margin:0;padding:0 .5em;font-family:inherit;font-size:.85em;display:block}.esri-select[disabled]{cursor:auto}.esri-select::-ms-expand{display:none}.esri-disabled a,.esri-disabled [role=menu],.esri-disabled [role=checkbox],.esri-disabled [class^=esri-icon-],.esri-disabled [class*=" esri-icon-"]{color:var(--calcite-color-text-3)}.keynav-mode .esri-widget:focus,.keynav-mode .esri-widget :focus{z-index:1;outline-offset:2px;outline:2px solid #adadad}.esri-widget__loader-animation{border:.15em solid #adadad4d;border-top-color:var(--calcite-color-border-input);border-radius:100%;width:1em;height:1em;font-size:var(--calcite-font-size-md);animation:1.25s linear infinite esri-rotate;display:block;transform:translateZ(0)}:dir(rtl) .esri-widget__table th{text-align:right;border-left:3px solid #0000000d;border-right:none}:dir(rtl) .esri-select{background-position:0}:dir(rtl) .esri-menu__list-item{border-left:none;border-right:3px solid #0000}:dir(rtl) .esri-menu__list-item [class^=esri-icon-],:dir(rtl) .esri-menu__list-item [class*=" esri-icon-"]{padding-left:2px;padding-right:0}:dir(rtl) .esri-menu__list-item--active{border-right-color:var(--calcite-color-brand)}.esri-icon-font-fallback-text{clip:rect(0 0 0 0);width:1px;height:1px;position:absolute;overflow:hidden}.esri-rotating{animation:1.25s linear infinite esri-rotate;transform:translateZ(0)}.esri-clearfix:before,.esri-clearfix:after{content:" ";display:table}.esri-clearfix:after{clear:both}.esri-interactive{cursor:pointer}.esri-hidden{display:none!important}.esri-invisible{visibility:hidden!important}.esri-offscreen{position:absolute;top:-999em;left:-999em}.esri-match-height{flex-direction:column;flex:auto;display:flex;overflow:hidden}@supports (-ms-ime-align: auto){.esri-slider__anchor:focus{outline:1px dotted var(--calcite-color-foreground-current)}}.esri-slider{-webkit-user-select:none;user-select:none;direction:ltr;width:100%;height:100%;display:flex}.esri-disabled{pointer-events:none}.esri-disabled .esri-slider__content,.esri-disabled .esri-slider__min,.esri-disabled .esri-slider__max{opacity:var(--calcite-opacity-light)}.esri-slider--reversed.esri-slider--horizontal{flex-direction:row-reverse}.esri-slider--reversed.esri-slider--vertical{flex-direction:column}.esri-slider--horizontal{flex-direction:row}.esri-slider--horizontal .esri-slider__content{height:auto}.esri-slider--horizontal .esri-slider__track{width:100%;height:2px}.esri-slider--horizontal .esri-slider__segment--interactive:hover{cursor:ew-resize}.esri-slider--horizontal .esri-slider__anchor{width:1px;height:100%}.esri-slider--horizontal .esri-slider__label{text-align:center;margin:0 11px;top:-30px;left:-50px}.esri-slider--horizontal .esri-slider__label-input{text-align:center}.esri-slider--horizontal .esri-slider__max,.esri-slider--horizontal .esri-slider__min{flex:none;width:50px;height:auto;margin:auto}.esri-slider--horizontal .esri-slider__ticks{width:100%;margin:9px 0 0;top:100%;left:0}.esri-slider--horizontal .esri-slider__tick{width:1px;height:5px}.esri-slider--horizontal .esri-slider__tick-label{margin-top:18px}.esri-slider--vertical{flex-direction:column-reverse}.esri-slider--vertical .esri-slider__content{flex-direction:column;width:auto}.esri-slider--vertical .esri-slider__track{flex-direction:column;flex:1 0 0;width:2px;height:100%}.esri-slider--vertical .esri-slider__segment--interactive:hover{cursor:ns-resize}.esri-slider--vertical .esri-slider__anchor{width:100%;height:1px}.esri-slider--vertical .esri-slider__label{text-align:left;top:-10px;left:20px}.esri-slider--vertical .esri-slider__max,.esri-slider--vertical .esri-slider__min{flex:0 0 22px;width:100%;margin:auto}.esri-slider--vertical .esri-slider__ticks{margin:0 0 0 11px;top:0;left:100%}.esri-slider--vertical .esri-slider__tick{width:5px;height:1px}.esri-slider--vertical .esri-slider__tick-label{margin-left:30px}.esri-slider__content{z-index:0;flex:1 0 auto;justify-content:center;align-items:center;margin:auto;line-height:0;display:flex;position:relative}.esri-slider__track{touch-action:none;background-color:var(--calcite-color-border-ghost);display:inline-block;position:relative}.esri-slider__segment{transform-origin:0 0;will-change:transform;touch-action:none;width:100%;height:100%;position:absolute;top:0;left:0}.esri-slider__segment:hover{cursor:pointer}.esri-slider__anchor{touch-action:none;-webkit-user-select:none;user-select:none;background-color:var(--calcite-color-brand);position:absolute}.esri-slider__anchor:focus .esri-slider__thumb,.esri-slider__anchor:focus .esri-slider__label{outline:inherit}.esri-slider__anchor--moving:focus .esri-slider__thumb{cursor:grabbing;border:3px solid var(--calcite-color-brand-press)}.esri-slider__anchor--moving .esri-slider__label:hover,.esri-slider__anchor--moving .esri-slider__label--interactive:hover{cursor:grabbing}.esri-slider__thumb{box-sizing:border-box;z-index:1;touch-action:none;background-color:var(--calcite-color-foreground-2);border:2px solid var(--calcite-color-brand);border-radius:16px;width:16px;height:16px;transition:all .125s ease-in-out;position:absolute;top:-7px;left:-7px}.esri-slider__thumb:hover{cursor:grab;border-width:3px;border-color:var(--calcite-color-brand-press);width:19.2px;height:19.2px;top:-8.6px;left:-8.6px}.esri-slider__label{min-width:80px;line-height:var(--calcite-font-line-height-fixed-xl);position:absolute}.esri-slider__label:hover{cursor:grab}.esri-slider__label--interactive:hover,.esri-slider__max--interactive:hover,.esri-slider__min--interactive:hover{cursor:pointer;text-decoration:underline}.esri-slider__label-input{z-index:1;width:100%;position:relative}.esri-slider__extra-content{display:inline-block}.esri-slider__max,.esri-slider__min{text-align:center;justify-content:center;align-items:center;height:22px;line-height:var(--calcite-font-line-height-fixed-xl);display:flex}.esri-slider__max--interactive:hover,.esri-slider__min--interactive:hover{background-color:var(--calcite-color-foreground-2)}.esri-slider__range-input{text-align:center;width:100%;padding:1px 0}.esri-slider__ticks{z-index:0;height:100%;display:inline-block;position:absolute}.esri-slider__tick{background:var(--calcite-color-foreground-1);position:absolute}.esri-slider__tick-label{width:max-content;position:absolute}:dir(rtl) .esri-slider__label,:dir(rtl) .esri-slider__max,:dir(rtl) .esri-slider__min,:dir(rtl) .esri-slider__tick-label{direction:rtl;unicode-bidi:plaintext}:dir(rtl) .esri-slider__range-input,:dir(rtl) .esri-slider__label-input{unicode-bidi:plaintext}.esri-time-slider{min-width:375px;box-shadow:0 1px 2px #0000004d}.esri-time-slider__layout--wide .esri-time-slider__row{height:88px}.esri-time-slider__layout--wide .esri-time-slider__playback-controls{direction:ltr;flex:auto;display:flex}.esri-time-slider__layout--wide .esri-time-slider__play{width:64px}.esri-time-slider__layout--wide .esri-time-slider__time-extent{flex-flow:column;justify-content:center;align-items:center;width:110px;display:flex}.esri-time-slider__layout--wide .esri-time-slider__time-extent-separator{opacity:var(--calcite-opacity-disabled);margin-top:var(--calcite-spacing-fixed-xxs);margin-bottom:var(--calcite-spacing-fixed-xs);background-color:var(--calcite-color-brand);width:75px;height:var(--calcite-size-px)}.esri-time-slider__layout--wide .esri-time-slider__time-extent,.esri-time-slider__layout--wide .esri-time-slider__min,.esri-time-slider__layout--wide .esri-time-slider__previous,.esri-time-slider__layout--wide .esri-time-slider__actions{border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-1)}.esri-time-slider__layout--wide .esri-time-slider__min,.esri-time-slider__layout--wide .esri-time-slider__max{align-items:center;width:110px}.esri-time-slider__layout--wide .esri-time-slider__slider{flex:auto;overflow:hidden}.esri-time-slider__layout--wide .esri-time-slider__previous,.esri-time-slider__layout--wide .esri-time-slider__next{width:42px}.esri-time-slider__layout--wide .esri-time-slider__warning{flex-flow:column}.esri-time-slider__layout--compact.esri-time-slider--has-actions .esri-time-slider__time-extent{padding-inline-start:48px}.esri-time-slider__layout--compact .esri-time-slider__row:first-child,.esri-time-slider__layout--compact .esri-time-slider__row:nth-child(3){height:36px}.esri-time-slider__layout--compact .esri-time-slider__row:nth-child(2){height:88px;overflow:hidden}.esri-time-slider__layout--compact .esri-time-slider__play{width:35px}.esri-time-slider__layout--compact .esri-time-slider__time-extent{flex-flow:row;flex:auto;justify-content:center;align-items:center;display:flex}.esri-time-slider__layout--compact .esri-time-slider__time-extent-separator{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-color-brand);width:var(--calcite-size-px);height:var(--calcite-spacing-xxl);margin-inline:7px}.esri-time-slider__layout--compact .esri-time-slider__min,.esri-time-slider__layout--compact .esri-time-slider__max,.esri-time-slider__layout--compact .esri-time-slider__slider{flex:auto}.esri-time-slider__layout--compact .esri-time-slider__min{align-items:flex-start;margin-inline-start:35px}.esri-time-slider__layout--compact .esri-time-slider__max{align-items:flex-end;margin-inline-end:35px}.esri-time-slider__layout--compact .esri-time-slider__previous,.esri-time-slider__layout--compact .esri-time-slider__next{width:35px}.esri-time-slider__layout--compact .esri-time-slider__warning{flex-flow:row}.esri-time-slider__layout--compact .esri-time-slider__warning-label{margin-inline-start:var(--calcite-spacing-xs)}.esri-time-slider__row{display:flex}.esri-time-slider__mode--instant .esri-slider__segment-0,.esri-time-slider__mode--instant .esri-slider__segment-1{background-color:var(--calcite-color-border-input)}.esri-time-slider__mode--time-window .esri-slider__segment-1{background-color:var(--calcite-color-brand);height:var(--calcite-spacing-xs);margin-top:-1px}.esri-time-slider__mode--time-window .esri-slider__segment-0,.esri-time-slider__mode--time-window .esri-slider__segment-2{background-color:var(--calcite-color-border-input)}.esri-time-slider__mode--time-window.esri-time-slider--out-of-bounds .esri-slider__segment-1{background-color:var(--calcite-color-status-danger)}.esri-time-slider__mode--cumulative-from-start .esri-slider__segment-0{background-color:var(--calcite-color-brand);height:var(--calcite-spacing-xs);margin-top:-1px}.esri-time-slider__mode--cumulative-from-start .esri-slider__segment-1{background-color:var(--calcite-color-border-input)}.esri-time-slider__mode--cumulative-from-start.esri-time-slider--out-of-bounds .esri-slider__segment-0{background-color:var(--calcite-color-status-danger)}.esri-time-slider__mode--cumulative-from-end .esri-slider__segment-0{background-color:var(--calcite-color-border-input)}.esri-time-slider__mode--cumulative-from-end .esri-slider__segment-1{background-color:var(--calcite-color-brand);height:var(--calcite-spacing-xs);margin-top:-1px}.esri-time-slider__mode--cumulative-from-end.esri-time-slider--out-of-bounds .esri-slider__segment-1{background-color:var(--calcite-color-status-danger)}.esri-time-slider__time-extent-start-group,.esri-time-slider__time-extent-end-group{flex-flow:column;align-items:center;display:flex}.esri-time-slider__time-extent-start-date,.esri-time-slider__time-extent-start-time,.esri-time-slider__time-extent-end-date,.esri-time-slider__time-extent-end-time{--calcite-label-margin-bottom: 0;--calcite-label-text-color: var(--calcite-color-brand)}.esri-time-slider__time-extent-start-date,.esri-time-slider__time-extent-end-date{font-weight:var(--calcite-font-weight-bold)}.esri-time-slider__min,.esri-time-slider__max{flex-flow:column;justify-content:center;display:flex}.esri-time-slider__min-date,.esri-time-slider__max-date{font-weight:var(--calcite-font-weight-bold)}.esri-time-slider__min-date,.esri-time-slider__min-time,.esri-time-slider__max-date,.esri-time-slider__max-time{--calcite-label-margin-bottom: 0}.esri-time-slider__slider{background-color:var(--calcite-color-foreground-2);padding:0 40px}.esri-time-slider__slider .esri-slider{background-color:var(--calcite-color-foreground-2);margin-top:-19px}.esri-time-slider__slider .esri-slider__thumb{border-width:3px;top:-6px}.esri-time-slider__slider .esri-slider__tick-label{white-space:nowrap;font-size:var(--calcite-font-size--2);margin-top:23px}.esri-time-slider__slider .esri-slider__tick{background:var(--calcite-color-border-input);width:1px}.esri-time-slider__slider .esri-slider__tick.minorTick{height:4px}.esri-time-slider__slider .esri-slider__tick.majorTick{height:var(--calcite-spacing-sm)}.esri-time-slider__slider .esri-slider__ticks{margin-top:var(--calcite-spacing-xl)}.esri-time-slider__slider .esri-slider__track{height:var(--calcite-spacing-xxs)}.esri-time-slider__warning{justify-content:center;align-items:center;display:flex}.esri-time-slider__warning-label{--calcite-label-margin-bottom: 0;--calcite-label-text-color: var(--calcite-color-status-danger)}.esri-time-slider__warning-icon{--calcite-icon-color: var(--calcite-color-status-danger)}.esri-time-slider--out-of-bounds .esri-slider__thumb{border-color:var(--calcite-color-status-danger)}.esri-time-slider--disabled .esri-time-slider__max-date,.esri-time-slider--disabled .esri-time-slider__max-time,.esri-time-slider--disabled .esri-time-slider__min-date,.esri-time-slider--disabled .esri-time-slider__min-time,.esri-time-slider--disabled .esri-time-slider__time-extent-end-date,.esri-time-slider--disabled .esri-time-slider__time-extent-end-time,.esri-time-slider--disabled .esri-time-slider__time-extent-separator,.esri-time-slider--disabled .esri-time-slider__time-extent-start-date,.esri-time-slider--disabled .esri-time-slider__time-extent-start-time{opacity:var(--calcite-opacity-disabled)}:dir(rtl) .esri-time-slider__max-date,:dir(rtl) .esri-time-slider__max-time,:dir(rtl) .esri-time-slider__min-date,:dir(rtl) .esri-time-slider__min-time,:dir(rtl) .esri-time-slider__time-extent-end-date,:dir(rtl) .esri-time-slider__time-extent-end-time,:dir(rtl) .esri-time-slider__time-extent-start-date,:dir(rtl) .esri-time-slider__time-extent-start-time{direction:rtl}:dir(rtl) .esri-time-slider__layout--compact .esri-time-slider__row:nth-child(3),:dir(rtl) .esri-time-slider__layout--wide .esri-time-slider__playback-controls{direction:ltr}:dir(rtl) .esri-time-slider__layout--wide.esri-time-slider--has-actions .esri-time-slider__actions{border-left:none}:dir(rtl) .esri-time-slider__layout--wide.esri-time-slider--has-actions .esri-time-slider__play{border-left:var(--calcite-border-width-sm) solid var(--calcite-color-border-1)}`,VQe=DQe(NQe);var Qy;let UQe=(Qy=class extends it{constructor(){super(...arguments),this.widget=VQe(this),this.viewModel=this.widget.viewModel,this.view=this.widget.view,this.actions=this.widget.actions,this.autoDestroyDisabled=!1,this.disabled=this.widget.disabled,this.effectiveStops=this.widget.effectiveStops,this.fullTimeExtent=this.widget.fullTimeExtent,this.icon=this.widget.icon,this.label=this.widget.label,this.layout=this.widget.layout,this.loop=this.widget.loop,this.mode=this.widget.mode,this.playRate=this.widget.playRate,this.state=this.viewModel.state,this.stops=this.widget.stops,this.tickConfigs=this.widget.tickConfigs,this.timeExtent=this.widget.timeExtent,this.timeVisible=this.widget.timeVisible,this.timeZone=this.widget.timeZone,this.arcgisPropertyChange=KV()("effectiveStops","fullTimeExtent","timeExtent","state"),this.arcgisReady=ve(),this.arcgisTriggerAction=Pr(()=>this.widget,"trigger-action")}async applyTimeSliderSettings(e){Object.assign(this,e)}async destroy(){await this.manager.destroy()}async next(){this.widget?.next()}async play(){this.widget?.play()}async previous(){this.widget?.previous()}async stop(){this.widget?.stop()}async updateWebDocument(e){this.widget?.updateWebDocument(e)}loaded(){this.manager.onLifecycle(()=>Ts(()=>this.viewModel.view?.ready,()=>{this.timeExtent&&this.viewModel.view&&(this.viewModel.view.timeExtent=this.timeExtent)},{initial:!0}))}},Qy.properties={view:0,actions:0,autoDestroyDisabled:5,disabled:7,effectiveStops:0,fullTimeExtent:0,icon:1,label:1,layout:1,loop:5,mode:1,playRate:9,position:1,referenceElement:1,state:3,stops:0,tickConfigs:0,timeExtent:0,timeVisible:5,timeZone:1},Qy.styles=jQe,Qy);Ms("arcgis-time-slider",UQe);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const kv={percentage:"percentage",progressRing:"ring--progress",ring:"ring",rings:"rings",text:"text",trackRing:"ring--track"},BQe=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:relative;margin-inline:auto;display:flex;align-items:center;justify-content:center;opacity:1;flex-direction:column;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke-width:var(--calcite-internal-stroke-width);fill:none;transform:scale(1);padding-block:var(--calcite-loader-spacing, 4rem)}:host([scale=s]){--calcite-internal-stroke-width: 3;--calcite-internal-text-offset: var(--calcite-spacing-xxs);--calcite-internal-loader-font-size: var(--calcite-font-size--3);--calcite-internal-loader-size: 2rem;--calcite-internal-loader-size-inline: .75rem;--calcite-internal-loader-value-line-height: .625rem}:host([scale=m]){--calcite-internal-stroke-width: 6;--calcite-internal-text-offset: var(--calcite-spacing-sm);--calcite-internal-loader-font-size: var(--calcite-font-size-0);--calcite-internal-loader-size: 4rem;--calcite-internal-loader-size-inline: 1rem;--calcite-internal-loader-value-line-height: 1.375rem}:host([scale=l]){--calcite-internal-stroke-width: 8;--calcite-internal-text-offset: var(--calcite-spacing-md);--calcite-internal-loader-font-size: var(--calcite-font-size-2);--calcite-internal-loader-size: 6rem;--calcite-internal-loader-size-inline: 1.5rem;--calcite-internal-loader-value-line-height: 1.71875rem}.text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-start:var(--calcite-loader-text-spacing, var(--calcite-internal-text-offset));font-weight:var(--calcite-loader-text-weight, var(--calcite-font-weight-normal));color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.percentage{display:block;text-align:center;font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));line-height:var(--calcite-internal-loader-value-line-height);align-self:center;color:var(--calcite-loader-text-color, var(--calcite-color-text-1))}.rings{position:relative;display:flex;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-internal-loader-size));block-size:var(--calcite-loader-size, var(--calcite-internal-loader-size))}.ring--track{stroke:var(--calcite-loader-track-color, var(--calcite-color-transparent-press))}.ring--progress{stroke:var(--calcite-loader-progress-color, var(--calcite-color-brand));transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([type=indeterminate]) .ring--progress{animation:loader-clockwise calc(var(--calcite-internal-animation-timing-slow) / var(--calcite-internal-duration-factor) * 2 / var(--calcite-internal-duration-factor)) linear infinite}:host([inline]){--calcite-internal-stroke-width: 2;position:relative;margin:0;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));min-block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));vertical-align:calc(var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline))) * -1 * .2)}:host([inline]) .rings{inset-block-start:0px;margin:0;inset-inline-start:0;inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring{inline-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)));block-size:var(--calcite-loader-size, var(--calcite-loader-size-inline, var(--calcite-internal-loader-size-inline)))}:host([inline]) .ring--progress{stroke:var(--calcite-loader-progress-color-inline, currentColor)}:host([complete]){opacity:0;transform:scale(.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1s,transform var(--calcite-internal-animation-timing-medium) linear 1s}:host([complete]) .rings{opacity:0;transform:scale(.75);transform-origin:center;transition:opacity calc(.18s * var(--calcite-internal-duration-factor)) linear .8s,transform calc(.18s * var(--calcite-internal-duration-factor)) linear .8s}:host([complete]) .percentage{color:var(--calcite-color-brand);transform:scale(1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear,transform var(--calcite-internal-animation-timing-medium) linear}@keyframes loader-clockwise{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:host([hidden]){display:none}[hidden]{display:none}`,tA=class tA extends it{constructor(){super(...arguments),this.messages=xn({name:null}),this.complete=!1,this.inline=!1,this.scale="m",this.text="",this.type="indeterminate",this.value=0}connectedCallback(){super.connectedCallback(),this.updateFormatter()}load(){requestAnimationFrame(()=>this.valueChangeHandler())}willUpdate(e){e.has("value")&&(this.hasUpdated||this.value!==0)&&this.valueChangeHandler(),(e.has("type")&&(this.hasUpdated||this.type!=="indeterminate")||e.has("messages"))&&this.updateFormatter()}valueChangeHandler(){this.complete=this.type.startsWith("determinate")&&this.value===100}formatValue(){return this.type!=="determinate-value"?`${this.value}`:this.formatter.format(this.value/100)}getSize(e){return{s:32,m:64,l:96}[e]}getInlineSize(e){return{s:12,m:16,l:24}[e]}updateFormatter(){this.type!=="determinate-value"||this.formatter?.resolvedOptions().locale===this.messages._lang||(this.formatter=new Intl.NumberFormat(this.messages._lang,{style:"percent"}))}render(){const{el:e,inline:i,label:r,text:s,type:n,value:o}=this,a=e.id||Lf(),l=n!=="indeterminate",c=Math.floor(o);return this.el.ariaLabel=r,this.el.ariaValueMax=l?"100":void 0,this.el.ariaValueMin=l?"0":void 0,this.el.ariaValueNow=l?c.toString():void 0,o2(this.el,"id",a),this.el.role="progressbar",j`<div class=${O(kv.rings)}>${this.renderRing("track")}${this.renderRing("progress")}${!i&&l&&j`<div class=${O(kv.percentage)}>${this.formatValue()}</div>`||""}</div>${!i&&s&&j`<div class=${O(kv.text)}>${s}</div>`||""}`}renderRing(e){const{inline:i,scale:r,value:s}=this,n=i?this.getInlineSize(r):this.getSize(r),a=n*.45;let l;if(e==="progress"){const c=2*a*Math.PI,d=(this.type.startsWith("determinate")?s:24)/100*c,h=c-d;l={"stroke-dasharray":`${d} ${h}`}}return j`<svg aria-hidden=true class=${O({[kv.ring]:!0,[kv.trackRing]:e==="track",[kv.progressRing]:e==="progress"})} style=${ot(l)} viewBox=${`0 0 ${n} ${n}`}>${Ji`<circle cx=${n/2} cy=${n/2} r=${a??ge} />`}</svg>`}};tA.properties={complete:[7,{},{reflect:!0,type:Boolean}],inline:[7,{},{reflect:!0,type:Boolean}],label:1,scale:[3,{},{reflect:!0}],text:1,type:[3,{},{reflect:!0}],value:[9,{},{type:Number}]},tA.styles=BQe;let iP=tA;fi("calcite-loader",iP);const hxt=Object.freeze(Object.defineProperty({__proto__:null,Loader:iP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const qQe=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"];function GQe(t){return`${t.split("-").map((r,s)=>s===0?r:`${r[0].toUpperCase()}${r.slice(1)}`).join("")}${qQe.includes(t)?"Input":"Change"}`}const Ej="hidden-form-input";function R9(t){return"checked"in t}const Mj=new WeakMap,N9=new WeakSet;function HQe(t,e){if(h_(e.parentElement,"[form]"))return!0;const r="calciteInternalFormComponentRegister";let s=!1;return t.addEventListener(r,n=>{s=n.composedPath().some(o=>N9.has(o)),n.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,composed:!0})),s}function WQe(t,{status:e,message:i,icon:r}){"status"in t&&(t.status=e),"validationIcon"in t&&typeof t.validationIcon!="string"&&(t.validationIcon=r),"validationMessage"in t&&!t.validationMessage&&(t.validationMessage=i)}function dme(t){return t.nodeName==="CALCITE-RADIO-BUTTON"?h_(t,"calcite-radio-button-group"):t}const JQe=new CustomEvent("calciteInvalid",{bubbles:!0,composed:!0});function eK(t){const e=t?.target,i=e?.validationMessage,r=dme(e?.parentElement);if(!r)return;const s=r?.nodeName?.toLowerCase(),n=s?.split("-");if(n.length<2||n[0]!=="calcite")return;t?.preventDefault(),"validity"in r&&(r.validity=e?.validity),r.dispatchEvent(JQe),WQe(r,{message:i,icon:!0,status:"invalid"});const o=GQe(s);r.addEventListener(o,()=>{"status"in r&&(r.status="idle"),"validationIcon"in r&&(r.validationIcon===""||r.validationIcon===!0)&&(r.validationIcon=!1),"validationMessage"in r&&r.validationMessage===i&&(r.validationMessage=""),"validity"in r&&(r.validity=e?.validity)},{once:!0})}function D9(t){const{formEl:e}=t;return e?(e.addEventListener("invalid",eK,!0),e.requestSubmit(),e.removeEventListener("invalid",eK,!0),requestAnimationFrame(()=>{const i=e.querySelectorAll("[status=invalid]");for(const r of i)if(r?.validationMessage){r?.setFocus();break}}),!0):!1}function hme(t){t.formEl?.reset()}function F9(t){const{el:e,value:i}=t,r=z9(t);if(!r||HQe(r,e))return;t.formEl=r,t.defaultValue=i,R9(t)&&(t.defaultChecked=t.checked);const s=ZQe.bind(t);r.addEventListener("reset",s),Mj.set(t.el,s),N9.add(e)}function z9(t){const{el:e,form:i}=t;return i?IA(e,{id:i}):h_(e,"form")}function ZQe(){if("status"in this&&(this.status="idle"),"validationIcon"in this&&(this.validationIcon=!1),"validationMessage"in this&&(this.validationMessage=""),R9(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue,this.onFormReset?.()}function j9(t){const{el:e,formEl:i}=t;if(!i)return;const r=Mj.get(e);i.removeEventListener("reset",r),Mj.delete(e),t.formEl=null,N9.delete(e)}const Cj="calciteInternalHiddenInputInput",pme=t=>{t.target.dispatchEvent(new CustomEvent(Cj,{bubbles:!0}))},tK=t=>t.removeEventListener("input",pme);function YQe(t){const{el:e,formEl:i,name:r,value:s}=t,{ownerDocument:n}=e,o=e.querySelectorAll(`input[slot="${Ej}"]`);if(!i||!r){o.forEach(h=>{tK(h),h.remove()});return}const a=Array.isArray(s)?s:[s],l=[],c=new Set;o.forEach(h=>{const f=a.find(m=>m==h.value);f!=null?(c.add(f),iK(t,h,f)):l.push(h)});let d;a.forEach(h=>{if(c.has(h))return;let f=l.pop();f||(f=n.createElement("input"),f.ariaHidden="true",f.slot=Ej),d||(d=n.createDocumentFragment()),d.append(f),f.addEventListener("input",pme),iK(t,f,h)}),d&&e.append(d),l.forEach(h=>{tK(h),h.remove()})}function iK(t,e,i){const{defaultValue:r,disabled:s,form:n,name:o,required:a}=t;e.defaultValue=r,e.disabled=s,e.name=o,e.required=a,e.tabIndex=-1,n?e.setAttribute("form",n):e.removeAttribute("form"),R9(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",t.syncHiddenFormInput?.(e);const l=dme(t.el);if(l&&"validity"in l)for(const c in{...e?.validity})l.validity[c]=e.validity[c]}const V9=({component:t})=>(YQe(t),j`<slot name=${Ej}></slot>`);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const fme="calciteInternalLabelClick",sL="calciteInternalLabelConnected",rP="calciteInternalLabelDisconnected",rK="calcite-label",Qw=new WeakMap,DS=new WeakMap,V$=new WeakMap,sP=new WeakMap,Ey=new Set,KQe=t=>{const{id:e}=t,i=e&&IA(t,{selector:`${rK}[for="${e}"]`});if(i)return i;const r=h_(t,rK);return!r||XQe(r,t)?null:r};function XQe(t,e){let i;const r="custom-element-ancestor-check",s=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(r,s,{once:!0}),e.dispatchEvent(new CustomEvent(r,{composed:!0,bubbles:!0})),t.removeEventListener(r,s),i.filter(o=>o!==e&&o!==t).filter(o=>o.tagName?.includes("-")).length>0}function q_(t){if(!t)return;const e=KQe(t.el);if(DS.has(e)&&e===t.labelEl||!e&&Ey.has(t))return;const i=eet.bind(t);if(e){t.labelEl=e;const r=Qw.get(e)||[];r.push(t),Qw.set(e,r.sort(mme)),DS.has(t.labelEl)||(DS.set(t.labelEl,sK),t.labelEl.addEventListener(fme,sK)),Ey.delete(t),document.removeEventListener(sL,V$.get(t)),sP.set(t,i),document.addEventListener(rP,i)}else Ey.has(t)||(i(),document.removeEventListener(rP,sP.get(t)))}function nL(t){if(!t||(Ey.delete(t),document.removeEventListener(sL,V$.get(t)),document.removeEventListener(rP,sP.get(t)),V$.delete(t),sP.delete(t),!t.labelEl))return;const e=Qw.get(t.labelEl);e.length===1&&(t.labelEl.removeEventListener(fme,DS.get(t.labelEl)),DS.delete(t.labelEl)),Qw.set(t.labelEl,e.filter(i=>i!==t).sort(mme)),t.labelEl=null}function mme(t,e){return W0e(t.el,e.el)?-1:1}function U$(t){return t.label||t.labelEl?.textContent?.trim()||""}function sK(t){const e=t.detail.sourceEvent.target,i=Qw.get(this),r=i.find(o=>o.el===e);if(i.includes(r))return;const n=i[0];n.disabled||n.onLabelClick(t)}function QQe(){Ey.has(this)&&q_(this)}function eet(){Ey.add(this);const t=V$.get(this)||QQe.bind(this);V$.set(this,t),document.addEventListener(sL,t)}async function tet(t){if(await t.componentOnReady(),Qw.has(t))return;const i=t.ownerDocument?.getElementById(t.for);i&&requestAnimationFrame(()=>{for(const r of Ey)if(r.el===i){q_(r);break}})}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ao={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},iet=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;inline-size:auto;vertical-align:middle;border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0))}:host a,:host button{--calcite-internal-button-content-margin: .5rem;--calcite-internal-button-padding-x: 7px;--calcite-internal-button-padding-y: 3px;position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;appearance:none;align-items:center;justify-content:center;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;outline-color:transparent;box-shadow:var(--calcite-button-shadow, var(--calcite-shadow-none));background-color:var(--calcite-button-background-color, var(--calcite-internal-button-background-color, var(--calcite-color-transparent)));border-block-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-block-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-block-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-start-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-start-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-inline-end-color:var(--calcite-button-border-color, var(--calcite-internal-button-border-inline-end-color, var(--calcite-internal-button-border-color, var(--calcite-color-transparent))));border-style:solid;border-width:var(--calcite-border-width-sm);border-radius:var(--calcite-button-corner-radius, var(--calcite-internal-button-corner-radius, 0));color:var(--calcite-button-text-color, var(--calcite-internal-button-text-color, currentColor));padding-block:var(--calcite-internal-button-padding-y);padding-inline:var(--calcite-internal-button-padding-x);transition:color var(--calcite-animation-timing) ease-in-out,background-color var(--calcite-animation-timing) ease-in-out,box-shadow var(--calcite-animation-timing) ease-in-out,outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host a:hover,:host button:hover{text-decoration-line:none}:host a:focus,:host button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host a span,:host button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host a calcite-loader,:host button calcite-loader{color:var(--calcite-button-loader-color, var(--calcite-internal-button-loader-color, var(--calcite-button-text-color, var(--calcite-internal-button-text-color))))}:host([round]){--calcite-internal-button-corner-radius: 50px}.content{margin-inline:var(--calcite-internal-button-content-margin)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-content-margin: .75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-internal-button-content-margin: 1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-internal-button-content-margin)}.icon--start,.icon--end{color:var(--calcite-button-icon-color, var(--calcite-icon-color, var(--calcite-ui-icon-color)))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(.5)}to{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}to{inline-size:0;opacity:0;transform:scale(.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-internal-button-content-margin)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{--calcite-internal-button-border-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([kind=brand]) button,:host([kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{--calcite-internal-button-background-color: var(--calcite-color-brand-press)}:host([kind=danger]) button,:host([kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-status-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{--calcite-internal-button-background-color: var(--calcite-color-status-danger-press)}:host([kind=neutral]) button,:host([kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-background-color: var(--calcite-color-foreground-3);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-inverse);--calcite-internal-button-background-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{--calcite-internal-button-background-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{--calcite-internal-button-background-color: var(--calcite-color-foreground-1);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline-fill]) button:hover,:host([appearance=outline-fill]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-foreground-2)}:host([appearance=outline-fill]) button:active,:host([appearance=outline-fill]) a:active{--calcite-internal-button-background-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=solid][kind=neutral]) button:hover,:host([appearance=solid][kind=neutral]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-border-3)}:host([appearance=solid][kind=neutral]) button:active,:host([appearance=solid][kind=neutral]) a:active{--calcite-internal-button-background-color: var(--calcite-color-border-2)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline]) button,:host([appearance=outline]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent);border-style:solid;border-width:var(--calcite-button-border-size, 1px)}:host([appearance=outline]) button:hover,:host([appearance=outline]) a:hover{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=outline]) button:active,:host([appearance=outline]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-brand-hover);--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-brand);--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{--calcite-internal-button-border-color: var(--calcite-color-brand-press);--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-status-danger-hover);--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-status-danger);--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{--calcite-internal-button-border-color: var(--calcite-color-status-danger-press);--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-border-1);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-border-input)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{--calcite-internal-button-border-color: var(--calcite-color-text-3)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-border-color: var(--calcite-color-inverse);--calcite-internal-button-loader-color: var(--calcite-color-text-1)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{--calcite-internal-button-border-color: var(--calcite-color-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{--calcite-internal-button-border-color: var(--calcite-color-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{--calcite-internal-button-border-color: var(--calcite-color-inverse-press)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button,:host([appearance=outline-fill][split-child=primary]) a,:host([appearance=outline][split-child=primary]) a{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button,:host([appearance=outline-fill][split-child=secondary]) a,:host([appearance=outline][split-child=secondary]) a{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]) button,:host([appearance=transparent]) a{--calcite-internal-button-background-color: var(--calcite-color-transparent)}:host([appearance=transparent]) button:hover,:host([appearance=transparent]) button:focus,:host([appearance=transparent]) a:hover,:host([appearance=transparent]) a:focus{--calcite-internal-button-background-color: var(--calcite-color-transparent-hover)}:host([appearance=transparent]) button:active,:host([appearance=transparent]) a:active{--calcite-internal-button-background-color: var(--calcite-color-transparent-press)}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:var(--calcite-color-transparent)}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{--calcite-internal-button-text-color: var(--calcite-color-brand);--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{--calcite-internal-button-text-color: var(--calcite-color-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{--calcite-internal-button-text-color: var(--calcite-color-status-danger);--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{--calcite-internal-button-text-color: var(--calcite-color-status-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{--calcite-internal-button-text-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{--calcite-internal-button-text-color: var(--calcite-color-status-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{--calcite-internal-button-loader-color: var(--calcite-color-status-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{--calcite-internal-button-text-color: var(--calcite-color-text-3)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{--calcite-internal-button-text-color: var(--calcite-color-text-1);--calcite-internal-button-padding-y: 0}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button:hover,:host([appearance=transparent][kind=inverse]) a:hover{background-color:var(--calcite-color-transparent-inverse-hover)}:host([appearance=transparent][kind=inverse]) button:active,:host([appearance=transparent][kind=inverse]) a:active{background-color:var(--calcite-color-transparent-inverse-press)}:host([appearance=transparent][kind=inverse]) button calcite-loader,:host([appearance=transparent][kind=inverse]) a calcite-loader{--calcite-internal-button-text-color: var(--calcite-color-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-internal-button-padding-y: 3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-internal-button-padding-x: 11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-internal-button-padding-y: 7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-internal-button-padding-x: .75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-internal-button-padding-x: 15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-internal-button-padding-x: 1rem;--calcite-internal-button-padding-y: 11px}:host([scale=l]) .button-padding--shrunk{--calcite-internal-button-padding-y: 9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-internal-button-padding-x: .125rem;--calcite-internal-button-padding-y: 9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host(:is([scale=s],[scale=m],[scale=l])[width=full]) a:not(.content--slotted),:host(:is([scale=s],[scale=m],[scale=l])[width=full]) button:not(.content--slotted){inline-size:var(--calcite-container-size-content-fluid)}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-y: .625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-internal-button-padding-x: 43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-internal-button-padding-x: 2.75rem}:host([hidden]){display:none}[hidden]{display:none}`,iA=class iA extends it{constructor(){super(...arguments),this.attributeWatch=Fee(["aria-expanded"],this.handleGlobalAttributesChanged),this.contentRef=wi(),this.mutationObserver=Ya("mutation",()=>this.updateHasContent()),this.resizeObserver=Ya("resize",()=>this.setTooltipText()),this.focusSetter=ds()(this),this.messages=xn(),this.hasContent=!1,this.alignment="center",this.appearance="solid",this.disabled=!1,this.download=!1,this.kind="brand",this.loading=!1,this.round=!1,this.scale="m",this.splitChild=!1,this.type="button",this.width="auto"}async setFocus(e){return this.focusSetter(()=>this.childEl,e)}connectedCallback(){super.connectedCallback(),this.setupTextContentObserver(),q_(this),this.formEl=z9(this)}async load(){this.updateHasContent()}updated(){wn(this)}loaded(){this.setTooltipText()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),nL(this),this.resizeObserver?.disconnect(),this.formEl=null}handleGlobalAttributesChanged(){this.requestUpdate()}updateHasContent(){this.hasContent=U0e(this.el)}setupTextContentObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}handleClick(){const{type:e}=this;this.href||(e==="submit"?D9(this):e==="reset"&&hme(this))}setTooltipText(){const{contentRef:{value:e}}=this;e&&(this.tooltipText=e.offsetWidth<e.scrollWidth&&this.el.innerText||null)}setChildEl(e){gM(this.resizeObserver,this.childEl,e),this.childEl=e}render(){const e=this.href?"a":"button",i=this.href?rg`a`:rg`button`,r=this.loading?j`<div class=${O(Ao.buttonLoader)}><calcite-loader class=${O(this.loading?Ao.loadingIn:Ao.loadingOut)} inline .label=${this.messages.loading} .scale=${this.scale==="l"?"m":"s"}></calcite-loader></div>`:null,s=!this.iconStart&&!this.iconEnd,n=j`<calcite-icon class=${O({[Ao.icon]:!0,[Ao.iconStart]:!0})} .flipRtl=${this.iconFlipRtl==="start"||this.iconFlipRtl==="both"} .icon=${this.iconStart} .scale=${Fr(this.scale)}></calcite-icon>`,o=j`<calcite-icon class=${O({[Ao.icon]:!0,[Ao.iconEnd]:!0})} .flipRtl=${this.iconFlipRtl==="end"||this.iconFlipRtl==="both"} .icon=${this.iconEnd} .scale=${Fr(this.scale)}></calcite-icon>`,a=j`<span class=${O(Ao.content)} ${ct(this.contentRef)}><slot></slot></span>`;return _n({disabled:this.disabled,children:u2`<${i} .ariaBusy=${this.loading} .ariaExpanded=${this.el.ariaExpanded?this.el.ariaExpanded:null} .ariaLabel=${this.loading?this.messages.loading:U$(this)} aria-live=polite class=${O({[Ao.buttonPadding]:s,[Ao.buttonPaddingShrunk]:!s,[Ao.contentSlotted]:this.hasContent,[Ao.iconStartEmpty]:!this.iconStart,[Ao.iconEndEmpty]:!this.iconEnd})} .disabled=${e==="button"?this.disabled:null} download=${(e==="a"?this.download===!0||this.download===""?"":this.download||null:null)??ge} href=${(e==="a"&&this.href)??ge} name=${(e==="button"&&this.name)??ge} @click=${this.handleClick} rel=${(e==="a"&&this.rel)??ge} tabindex=${(this.disabled?-1:null)??ge} target=${(e==="a"&&this.target)??ge} title=${this.tooltipText??ge} type=${(e==="button"?this.type:null)??ge} ${ct(this.setChildEl)}>${r}${this.iconStart?n:null}${this.hasContent?a:null}${this.iconEnd?o:null}</${i}>`})}};iA.properties={hasContent:[16,{},{state:!0}],tooltipText:[16,{},{state:!0}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],download:[3,{converter:Sw},{reflect:!0}],form:[3,{},{reflect:!0}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],kind:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],rel:[3,{},{reflect:!0}],round:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],splitChild:[3,{},{reflect:!0}],target:[3,{},{reflect:!0}],type:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},iA.styles=iet;let nP=iA;fi("calcite-button",nP);const W2=Object.freeze(Object.defineProperty({__proto__:null,Button:nP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
v4.34.9 */const D1={base:"arcgis-zoom",button:"arcgis-button",horizontalLayout:"arcgis-zoom--horizontal",zoomIn:"arcgis-zoom__zoom-in",zoomOut:"arcgis-zoom__zoom-out"};function nK(t){if(!t)return!1;if(t.type==="3d")return t.ready;if(!t?.ready)return!1;const e=yme(t),i=t.constraints?.effectiveMaxScale;return i===0||e>i}function oK(t){if(!t)return!1;if(t.type==="3d")return t.ready;if(!t?.ready)return!1;const e=yme(t),i=t.constraints?.effectiveMinScale;return i===0||e<i}function yme(t){const e=t?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??t?.scale??0}const ret=Qe`.arcgis-button{--calcite-icon-color: var(--calcite-color-text-3);--calcite-button-background-color: var(--calcite-color-foreground-1);color:var(--calcite-color-text-3);line-height:var(--calcite-font-line-height-relative-tight);display:flex;flex-flow:column;cursor:pointer;background-color:var(--calcite-color-foreground-1);font-size:var(--calcite-font-size);:hover{--calcite-icon-color: var(--calcite-color-text-1);--calcite-button-background-color: var(--calcite-color-transparent-hover)}calcite-button{width:var(--calcite-spacing-xxxl);height:var(--calcite-spacing-xxxl)}}:host{display:flex;max-width:fit-content}.arcgis-zoom__zoom-out{border-block-start:solid 1px var(--calcite-color-border-1)}.arcgis-zoom--horizontal{flex-flow:row-reverse nowrap}.arcgis-zoom--horizontal .arcgis-zoom__zoom-out{border-block-start:none;border-inline-end:solid 1px var(--calcite-color-border-1)}`;var eg;let set=(eg=class extends it{constructor(){super(...arguments),this.messages=nme({}),this.view=vQe(this),this.autoDestroyDisabled=!1,this.icon="magnifying-glass-plus",this.layout="vertical",this.state="disabled",this.arcgisPropertyChange=KV()("state"),this.arcgisReady=ve()}async destroy(){await this.manager.destroy()}async zoomIn(){const{view:e}=this;!nK(e)||!e||(e.type==="2d"?e.mapViewNavigation.zoomIn():ng(e.goTo({zoomFactor:2})))}async zoomOut(){const{view:e}=this;!oK(e)||!e||(e.type==="2d"?e.mapViewNavigation.zoomOut():ng(e.goTo({zoomFactor:.5})))}loaded(){this.manager.onLifecycle(()=>[Ts(()=>this.view?.ready?"ready":"disabled",e=>{this.state=e},{sync:!0,initial:!0})])}render(){const e={[D1.horizontalLayout]:this.layout==="horizontal"},i=nK(this.view),r=oK(this.view),{zoomIn:s,zoomOut:n}=this.messages;return j`<div class=${O(hi(D1.base,D1.button,e))}><calcite-button class=${O(hi(D1.zoomIn))} .disabled=${!i} icon-start=plus kind=neutral .label=${s} @click=${this.zoomIn} title=${s??le}></calcite-button><calcite-button class=${O(hi(D1.zoomOut))} .disabled=${!r} icon-start=minus kind=neutral .label=${n} @click=${this.zoomOut} title=${n??le}></calcite-button></div>`}},eg.properties={view:0,autoDestroyDisabled:5,icon:1,label:1,layout:3,messageOverrides:0,position:1,referenceElement:1,state:3},eg.styles=ret,eg);Ms("arcgis-zoom",set);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const pl={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible",indicatorWithIcon:"indicator-with-icon",indicatorWithoutIcon:"indicator-without-icon"},aK="calcite-action",net={button:t=>`${aK}-${t}-button`,indicator:t=>`${aK}-${t}-indicator`},oet={tooltip:"tooltip"},aet=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;cursor:pointer;background-color:transparent;--calcite-internal-action-text-color: var(--calcite-color-text-3);border-radius:var(--calcite-action-corner-radius, var(--calcite-action-corner-radius-start-start, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-start-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-end, var(--calcite-corner-radius)) var(--calcite-action-corner-radius-end-start, var(--calcite-corner-radius)))}.interaction-container{border-radius:inherit}:host([width=full]){flex:1 0 auto}:host([width=full]) .button{justify-content:center}:host([width=full]) .button .text-container--visible{flex:none}:host([drag-handle]){cursor:move;--calcite-internal-action-text-color: var(--calcite-color-border-input);--calcite-internal-action-padding-inline: var(--calcite-spacing-xxs)}.button{border-radius:inherit;position:relative;margin:0;display:flex;inline-size:auto;align-items:center;justify-content:flex-start;border-style:none;font-family:var(--calcite-font-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);outline-color:transparent;background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1));color:var(--calcite-action-text-color, var(--calcite-internal-action-text-color));text-align:unset;flex:1 0 auto;cursor:inherit}.button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}.button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}.icon-container{pointer-events:none;margin:0;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1.5rem}.text-container{margin:0;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);transition-property:inline-size}.text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([active]) .button{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-3));color:var(--calcite-action-text-color-press, var(--calcite-action-text-color-pressed, var(--calcite-color-text-1)))}:host([active]) .button:hover{background-color:var(--calcite-action-background-color-hover, var(--calcite-color-foreground-3))}:host([active]) .button:active{background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3)))}:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-action-background-color, var(--calcite-color-foreground-1))}:host([loading]) .text-container{opacity:var(--calcite-opacity-disabled)}:host([loading]) calcite-loader[inline]{margin-inline-end:0px}:host([appearance=transparent]):host([active]) .button{background-color:var(--calcite-color-transparent-press)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1)}:host([appearance=transparent]) .button:hover{background-color:var(--calcite-color-transparent-hover)}:host([appearance=transparent]) .button:active{background-color:var(--calcite-color-transparent-press)}:host([active-descendant]) .button{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .button{font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, .5rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xxs))}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:.5rem}:host([scale=m]) .button{font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-md))}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:.75rem}:host([scale=l]) .button{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal);padding-inline:var(--calcite-internal-action-padding-inline, 1.25rem);padding-block:var(--calcite-internal-action-padding-block, var(--calcite-spacing-xl))}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}.indicator-with-icon{position:relative}.indicator-with-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-without-icon{margin-inline:.25rem;inline-size:1rem;position:relative}.indicator-without-icon:after{content:"";position:absolute;block-size:.5rem;inline-size:.5rem;border-radius:9999px;inset-block-end:-.275rem;inset-inline-end:-.275rem;background-color:var(--calcite-action-indicator-color, var(--calcite-color-brand))}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color, var(--calcite-action-background-color, var(--calcite-color-foreground-1)))}:host([disabled]):host([active]) .button,:host([disabled]):host([active]) .button:hover,:host([disabled]):host([active]) .button:focus{opacity:var(--calcite-opacity-disabled);background-color:var(--calcite-action-background-color-press, var(--calcite-action-background-color-press, var(--calcite-action-background-color-pressed, var(--calcite-color-foreground-3))))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,rA=class rA extends it{constructor(){super(...arguments),this.guid=Lf(),this.buttonEl=wi(),this.buttonId=net.button(this.guid),this.mutationObserver=Ya("mutation",()=>this.requestUpdate()),this.messages=xn({blocking:!0}),this.focusSetter=ds()(this),this.active=!1,this.activeDescendant=!1,this.appearance="solid",this.compact=!1,this.disabled=!1,this.dragHandle=!1,this.iconFlipRtl=!1,this.indicator=!1,this.loading=!1,this.scale="m",this.width="auto",this.textEnabled=!1,this.type="button"}async setFocus(e){return this.focusSetter(()=>this.buttonEl.value,e)}connectedCallback(){super.connectedCallback(),this.formEl=z9(this),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),this.formEl=null,this.mutationObserver?.disconnect()}handleClick(){const{type:e}=this;e==="submit"?D9(this):e==="reset"&&hme(this)}handleTooltipSlotChange(e){const r=e.target.assignedElements({flatten:!0}).filter(s=>s?.matches("calcite-tooltip"))[0];r&&(r.referenceElement=this.buttonEl.value)}storeIndicatorEl(e){this.indicatorEl=e}renderTextContainer(){const{text:e,textEnabled:i}=this,r={[pl.textContainer]:!0,[pl.textContainerVisible]:i};return e?wt("text-container",j`<div class=${O(r)}>${e}</div>`):null}renderIndicatorText(){const{indicator:e,messages:i,buttonId:r}=this;return j`<div aria-labelledby=${r??le} aria-live=polite class=${O(pl.indicatorText)} role=region ${ct(this.storeIndicatorEl)}>${e?i.indicator:null}</div>`}renderIconContainer(){const{loading:e,icon:i,scale:r,el:s,iconFlipRtl:n,indicator:o}=this,a=r==="l"?"l":"m",l=e?j`<calcite-loader inline .label=${this.messages.loading} .scale=${a}></calcite-loader>`:null,c=i?j`<calcite-icon class=${O({[pl.indicatorWithIcon]:o})} .flipRtl=${n} .icon=${i} .scale=${Fr(this.scale)}></calcite-icon>`:null,d=l||c,h=d||s.children?.length,f=j`<div class=${O({[pl.slotContainer]:!0,[pl.slotContainerHidden]:e})}><slot></slot></div>`;return h?wt("icon-container",j`<div aria-hidden=true class=${O(pl.iconContainer)}>${d}${f}</div>`):null}renderButton(){const{compact:e,disabled:i,icon:r,loading:s,textEnabled:n,label:o,text:a,indicator:l,indicatorEl:c,buttonId:d,messages:h}=this,f=o||a||"",m=l?h.indicatorLabel.replace("{label}",f):f,y={[pl.button]:!0,[pl.buttonTextVisible]:n,[pl.buttonCompact]:e},v=j`${this.renderIconContainer()}${this.renderTextContainer()}${!r&&l&&wt("indicator-no-icon",j`<div class=${O(pl.indicatorWithoutIcon)}></div>`)||""}`,b=l&&c?[c]:[],w=[...this.aria?.controlsElements??[],...b];return this.dragHandle?j`<span .ariaBusy=${s} .ariaControlsElements=${w} .ariaDescribedByElements=${this.aria?.describedByElements} .ariaExpanded=${this.aria?.expanded} .ariaHasPopup=${this.aria?.hasPopup} .ariaLabel=${m} .ariaLabelledByElements=${this.aria?.labelledByElements} .ariaOwnsElements=${this.aria?.ownsElements} .ariaPressed=${this.aria?.pressed} class=${O(y)} id=${d??le} role=button tabindex=${this.disabled?null:0} ${ct(this.buttonEl)}>${v}</span>`:j`<button .ariaBusy=${s} .ariaControlsElements=${w} .ariaDescribedByElements=${this.aria?.describedByElements} .ariaExpanded=${this.aria?.expanded} .ariaHasPopup=${this.aria?.hasPopup} .ariaLabel=${m} .ariaLabelledByElements=${this.aria?.labelledByElements} .ariaOwnsElements=${this.aria?.ownsElements} .ariaPressed=${this.aria?.pressed} class=${O(y)} .disabled=${i} id=${d??le} @click=${this.handleClick} ${ct(this.buttonEl)}>${v}</button>`}render(){return _n({disabled:this.disabled,children:j`${this.renderButton()}<slot name=${oet.tooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${this.renderIndicatorText()}`})}};rA.properties={aria:[0,{},{attribute:!1}],active:[7,{},{reflect:!0,type:Boolean}],activeDescendant:[7,{},{reflect:!0,type:Boolean}],alignment:[3,{},{reflect:!0}],appearance:[3,{},{reflect:!0}],compact:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],indicator:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],scale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}],text:1,textEnabled:[7,{},{reflect:!0,type:Boolean}],type:[3,{},{reflect:!0}]},rA.styles=aet;let oP=rA;fi("calcite-action",oP);const cet=Object.freeze(Object.defineProperty({__proto__:null,Action:oP},Symbol.toStringTag,{value:"Module"})),gme=["top","right","bottom","left"],lK=["start","end"],cK=gme.reduce((t,e)=>t.concat(e,e+"-"+lK[0],e+"-"+lK[1]),[]),e_=Math.min,My=Math.max,aP=Math.round,Uk=Math.floor,Cu=t=>({x:t,y:t}),uet={left:"right",right:"left",bottom:"top",top:"bottom"},det={start:"end",end:"start"};function Pj(t,e,i){return My(t,e_(e,i))}function Hg(t,e){return typeof t=="function"?t(e):t}function Ih(t){return t.split("-")[0]}function Pu(t){return t.split("-")[1]}function vme(t){return t==="x"?"y":"x"}function U9(t){return t==="y"?"height":"width"}const het=new Set(["top","bottom"]);function ef(t){return het.has(Ih(t))?"y":"x"}function B9(t){return vme(ef(t))}function bme(t,e,i){i===void 0&&(i=!1);const r=Pu(t),s=B9(t),n=U9(s);let o=s==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(o=cP(o)),[o,cP(o)]}function pet(t){const e=cP(t);return[lP(t),e,lP(e)]}function lP(t){return t.replace(/start|end/g,e=>det[e])}const uK=["left","right"],dK=["right","left"],fet=["top","bottom"],met=["bottom","top"];function yet(t,e,i){switch(t){case"top":case"bottom":return i?e?dK:uK:e?uK:dK;case"left":case"right":return e?fet:met;default:return[]}}function get(t,e,i,r){const s=Pu(t);let n=yet(Ih(t),i==="start",r);return s&&(n=n.map(o=>o+"-"+s),e&&(n=n.concat(n.map(lP)))),n}function cP(t){return t.replace(/left|right|bottom|top/g,e=>uet[e])}function vet(t){return{top:0,right:0,bottom:0,left:0,...t}}function wme(t){return typeof t!="number"?vet(t):{top:t,right:t,bottom:t,left:t}}function uP(t){const{x:e,y:i,width:r,height:s}=t;return{width:r,height:s,top:i,left:e,right:e+r,bottom:i+s,x:e,y:i}}function hK(t,e,i){let{reference:r,floating:s}=t;const n=ef(e),o=B9(e),a=U9(o),l=Ih(e),c=n==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Pu(e)){case"start":m[o]-=f*(i&&c?-1:1);break;case"end":m[o]+=f*(i&&c?-1:1);break}return m}const bet=async(t,e,i)=>{const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:o}=i,a=n.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=hK(c,r,l),f=r,m={},y=0;for(let v=0;v<a.length;v++){const{name:b,fn:w}=a[v],{x,y:S,data:$,reset:T}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=x??d,h=S??h,m={...m,[b]:{...m[b],...$}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:d,y:h}=hK(c,f,l)),v=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function B$(t,e){var i;e===void 0&&(e={});const{x:r,y:s,platform:n,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Hg(e,t),y=wme(m),b=a[f?h==="floating"?"reference":"floating":h],w=uP(await n.getClippingRect({element:(i=await(n.isElement==null?void 0:n.isElement(b)))==null||i?b:b.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),x=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(n.getOffsetParent==null?void 0:n.getOffsetParent(a.floating)),$=await(n.isElement==null?void 0:n.isElement(S))?await(n.getScale==null?void 0:n.getScale(S))||{x:1,y:1}:{x:1,y:1},T=uP(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:S,strategy:l}):x);return{top:(w.top-T.top+y.top)/$.y,bottom:(T.bottom-w.bottom+y.bottom)/$.y,left:(w.left-T.left+y.left)/$.x,right:(T.right-w.right+y.right)/$.x}}const wet=t=>({name:"arrow",options:t,async fn(e){const{x:i,y:r,placement:s,rects:n,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Hg(t,e)||{};if(c==null)return{};const h=wme(d),f={x:i,y:r},m=B9(s),y=U9(m),v=await o.getDimensions(c),b=m==="y",w=b?"top":"left",x=b?"bottom":"right",S=b?"clientHeight":"clientWidth",$=n.reference[y]+n.reference[m]-f[m]-n.floating[y],T=f[m]-n.reference[m],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let L=C?C[S]:0;(!L||!await(o.isElement==null?void 0:o.isElement(C)))&&(L=a.floating[S]||n.floating[y]);const N=$/2-T/2,D=L/2-v[y]/2-1,F=e_(h[w],D),W=e_(h[x],D),Z=F,V=L-v[y]-W,A=L/2-v[y]/2+N,q=Pj(Z,A,V),J=!l.arrow&&Pu(s)!=null&&A!==q&&n.reference[y]/2-(A<Z?F:W)-v[y]/2<0,ee=J?A<Z?A-Z:A-V:0;return{[m]:f[m]+ee,data:{[m]:q,centerOffset:A-q-ee,...J&&{alignmentOffset:ee}},reset:J}}});function _et(t,e,i){return(t?[...i.filter(s=>Pu(s)===t),...i.filter(s=>Pu(s)!==t)]:i.filter(s=>Ih(s)===s)).filter(s=>t?Pu(s)===t||(e?lP(s)!==s:!1):!0)}const xet=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,r,s;const{rects:n,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:d=!1,alignment:h,allowedPlacements:f=cK,autoAlignment:m=!0,...y}=Hg(t,e),v=h!==void 0||f===cK?_et(h||null,m,f):f,b=await B$(e,y),w=((i=o.autoPlacement)==null?void 0:i.index)||0,x=v[w];if(x==null)return{};const S=bme(x,n,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==x)return{reset:{placement:v[0]}};const $=[b[Ih(x)],b[S[0]],b[S[1]]],T=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:x,overflows:$}],C=v[w+1];if(C)return{data:{index:w+1,overflows:T},reset:{placement:C}};const L=T.map(F=>{const W=Pu(F.placement);return[F.placement,W&&d?F.overflows.slice(0,2).reduce((Z,V)=>Z+V,0):F.overflows[0],F.overflows]}).sort((F,W)=>F[1]-W[1]),D=((s=L.filter(F=>F[2].slice(0,Pu(F[0])?2:3).every(W=>W<=0))[0])==null?void 0:s[0])||L[0][0];return D!==a?{data:{index:w+1,overflows:T},reset:{placement:D}}:{}}}},$et=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,r;const{placement:s,middlewareData:n,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=Hg(t,e);if((i=n.arrow)!=null&&i.alignmentOffset)return{};const w=Ih(s),x=ef(a),S=Ih(a)===a,$=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=f||(S||!v?[cP(a)]:pet(a)),C=y!=="none";!f&&C&&T.push(...get(a,v,y,$));const L=[a,...T],N=await B$(e,b),D=[];let F=((r=n.flip)==null?void 0:r.overflows)||[];if(d&&D.push(N[w]),h){const A=bme(s,o,$);D.push(N[A[0]],N[A[1]])}if(F=[...F,{placement:s,overflows:D}],!D.every(A=>A<=0)){var W,Z;const A=(((W=n.flip)==null?void 0:W.index)||0)+1,q=L[A];if(q&&(!(h==="alignment"?x!==ef(q):!1)||F.every(re=>ef(re.placement)===x?re.overflows[0]>0:!0)))return{data:{index:A,overflows:F},reset:{placement:q}};let J=(Z=F.filter(ee=>ee.overflows[0]<=0).sort((ee,re)=>ee.overflows[1]-re.overflows[1])[0])==null?void 0:Z.placement;if(!J)switch(m){case"bestFit":{var V;const ee=(V=F.filter(re=>{if(C){const me=ef(re.placement);return me===x||me==="y"}return!0}).map(re=>[re.placement,re.overflows.filter(me=>me>0).reduce((me,ze)=>me+ze,0)]).sort((re,me)=>re[1]-me[1])[0])==null?void 0:V[0];ee&&(J=ee);break}case"initialPlacement":J=a;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function pK(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fK(t){return gme.some(e=>t[e]>=0)}const Iet=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:r="referenceHidden",...s}=Hg(t,e);switch(r){case"referenceHidden":{const n=await B$(e,{...s,elementContext:"reference"}),o=pK(n,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fK(o)}}}case"escaped":{const n=await B$(e,{...s,altBoundary:!0}),o=pK(n,i.floating);return{data:{escapedOffsets:o,escaped:fK(o)}}}default:return{}}}}},ket=new Set(["left","top"]);async function Tet(t,e){const{placement:i,platform:r,elements:s}=t,n=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ih(i),a=Pu(i),l=ef(i)==="y",c=ket.has(o)?-1:1,d=n&&l?-1:1,h=Hg(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const Eet=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,r;const{x:s,y:n,placement:o,middlewareData:a}=e,l=await Tet(e,t);return o===((i=a.offset)==null?void 0:i.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:n+l.y,data:{...l,placement:o}}}}},Met=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:r,placement:s}=e,{mainAxis:n=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:x}=b;return{x:w,y:x}}},...l}=Hg(t,e),c={x:i,y:r},d=await B$(e,l),h=ef(Ih(s)),f=vme(h);let m=c[f],y=c[h];if(n){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",x=m+d[b],S=m-d[w];m=Pj(x,m,S)}if(o){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=y+d[b],S=y-d[w];y=Pj(x,y,S)}const v=a.fn({...e,[f]:m,[h]:y});return{...v,data:{x:v.x-i,y:v.y-r,enabled:{[f]:n,[h]:o}}}}}};function oL(){return typeof window<"u"}function G_(t){return _me(t)?(t.nodeName||"").toLowerCase():"#document"}function da(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Uu(t){var e;return(e=(_me(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _me(t){return oL()?t instanceof Node||t instanceof da(t).Node:!1}function ic(t){return oL()?t instanceof Element||t instanceof da(t).Element:!1}function ju(t){return oL()?t instanceof HTMLElement||t instanceof da(t).HTMLElement:!1}function mK(t){return!oL()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof da(t).ShadowRoot}const Cet=new Set(["inline","contents"]);function J2(t){const{overflow:e,overflowX:i,overflowY:r,display:s}=rc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+i)&&!Cet.has(s)}const Pet=new Set(["table","td","th"]);function Aet(t){return Pet.has(G_(t))}const Let=[":popover-open",":modal"];function aL(t){return Let.some(e=>{try{return t.matches(e)}catch{return!1}})}const Oet=["transform","translate","scale","rotate","perspective"],Ret=["transform","translate","scale","rotate","perspective","filter"],Net=["paint","layout","strict","content"];function lL(t){const e=q9(),i=ic(t)?rc(t):t;return Oet.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||Ret.some(r=>(i.willChange||"").includes(r))||Net.some(r=>(i.contain||"").includes(r))}function Det(t){let e=Mf(t);for(;ju(e)&&!t_(e);){if(lL(e))return e;if(aL(e))return null;e=Mf(e)}return null}function q9(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Fet=new Set(["html","body","#document"]);function t_(t){return Fet.has(G_(t))}function rc(t){return da(t).getComputedStyle(t)}function cL(t){return ic(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mf(t){if(G_(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mK(t)&&t.host||Uu(t);return mK(e)?e.host:e}function xme(t){const e=Mf(t);return t_(e)?t.ownerDocument?t.ownerDocument.body:t.body:ju(e)&&J2(e)?e:xme(e)}function q$(t,e,i){var r;e===void 0&&(e=[]),i===void 0&&(i=!0);const s=xme(t),n=s===((r=t.ownerDocument)==null?void 0:r.body),o=da(s);if(n){const a=Aj(o);return e.concat(o,o.visualViewport||[],J2(s)?s:[],a&&i?q$(a):[])}return e.concat(s,q$(s,[],i))}function Aj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Sme(t){const e=rc(t);let i=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ju(t),n=s?t.offsetWidth:i,o=s?t.offsetHeight:r,a=aP(i)!==n||aP(r)!==o;return a&&(i=n,r=o),{width:i,height:r,$:a}}function G9(t){return ic(t)?t:t.contextElement}function M0(t){const e=G9(t);if(!ju(e))return Cu(1);const i=e.getBoundingClientRect(),{width:r,height:s,$:n}=Sme(e);let o=(n?aP(i.width):i.width)/r,a=(n?aP(i.height):i.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const zet=Cu(0);function $me(t){const e=da(t);return!q9()||!e.visualViewport?zet:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jet(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==da(t)?!1:e}function xg(t,e,i,r){e===void 0&&(e=!1),i===void 0&&(i=!1);const s=t.getBoundingClientRect(),n=G9(t);let o=Cu(1);e&&(r?ic(r)&&(o=M0(r)):o=M0(t));const a=jet(n,i,r)?$me(n):Cu(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(n){const f=da(n),m=r&&ic(r)?da(r):r;let y=f,v=Aj(y);for(;v&&r&&m!==y;){const b=M0(v),w=v.getBoundingClientRect(),x=rc(v),S=w.left+(v.clientLeft+parseFloat(x.paddingLeft))*b.x,$=w.top+(v.clientTop+parseFloat(x.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,h*=b.y,l+=S,c+=$,y=da(v),v=Aj(y)}}return uP({width:d,height:h,x:l,y:c})}function uL(t,e){const i=cL(t).scrollLeft;return e?e.left+i:xg(Uu(t)).left+i}function Ime(t,e){const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-uL(t,i),s=i.top+e.scrollTop;return{x:r,y:s}}function Vet(t){let{elements:e,rect:i,offsetParent:r,strategy:s}=t;const n=s==="fixed",o=Uu(r),a=e?aL(e.floating):!1;if(r===o||a&&n)return i;let l={scrollLeft:0,scrollTop:0},c=Cu(1);const d=Cu(0),h=ju(r);if((h||!h&&!n)&&((G_(r)!=="body"||J2(o))&&(l=cL(r)),ju(r))){const m=xg(r);c=M0(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!n?Ime(o,l):Cu(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:i.y*c.y-l.scrollTop*c.y+d.y+f.y}}function Uet(t){return Array.from(t.getClientRects())}function Bet(t){const e=Uu(t),i=cL(t),r=t.ownerDocument.body,s=My(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),n=My(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-i.scrollLeft+uL(t);const a=-i.scrollTop;return rc(r).direction==="rtl"&&(o+=My(e.clientWidth,r.clientWidth)-s),{width:s,height:n,x:o,y:a}}const yK=25;function qet(t,e){const i=da(t),r=Uu(t),s=i.visualViewport;let n=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;const d=q9();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=uL(r);if(c<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),m=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,y=Math.abs(r.clientWidth-h.clientWidth-m);y<=yK&&(n-=y)}else c<=yK&&(n+=c);return{width:n,height:o,x:a,y:l}}const Get=new Set(["absolute","fixed"]);function Het(t,e){const i=xg(t,!0,e==="fixed"),r=i.top+t.clientTop,s=i.left+t.clientLeft,n=ju(t)?M0(t):Cu(1),o=t.clientWidth*n.x,a=t.clientHeight*n.y,l=s*n.x,c=r*n.y;return{width:o,height:a,x:l,y:c}}function gK(t,e,i){let r;if(e==="viewport")r=qet(t,i);else if(e==="document")r=Bet(Uu(t));else if(ic(e))r=Het(e,i);else{const s=$me(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return uP(r)}function kme(t,e){const i=Mf(t);return i===e||!ic(i)||t_(i)?!1:rc(i).position==="fixed"||kme(i,e)}function Wet(t,e){const i=e.get(t);if(i)return i;let r=q$(t,[],!1).filter(a=>ic(a)&&G_(a)!=="body"),s=null;const n=rc(t).position==="fixed";let o=n?Mf(t):t;for(;ic(o)&&!t_(o);){const a=rc(o),l=lL(o);!l&&a.position==="fixed"&&(s=null),(n?!l&&!s:!l&&a.position==="static"&&!!s&&Get.has(s.position)||J2(o)&&!l&&kme(t,o))?r=r.filter(d=>d!==o):s=a,o=Mf(o)}return e.set(t,r),r}function Jet(t){let{element:e,boundary:i,rootBoundary:r,strategy:s}=t;const o=[...i==="clippingAncestors"?aL(e)?[]:Wet(e,this._c):[].concat(i),r],a=o[0],l=o.reduce((c,d)=>{const h=gK(e,d,s);return c.top=My(h.top,c.top),c.right=e_(h.right,c.right),c.bottom=e_(h.bottom,c.bottom),c.left=My(h.left,c.left),c},gK(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Zet(t){const{width:e,height:i}=Sme(t);return{width:e,height:i}}function Yet(t,e,i){const r=ju(e),s=Uu(e),n=i==="fixed",o=xg(t,!0,n,e);let a={scrollLeft:0,scrollTop:0};const l=Cu(0);function c(){l.x=uL(s)}if(r||!r&&!n)if((G_(e)!=="body"||J2(s))&&(a=cL(e)),r){const m=xg(e,!0,n,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&c();n&&!r&&s&&c();const d=s&&!r&&!n?Ime(s,a):Cu(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function UR(t){return rc(t).position==="static"}function vK(t,e){if(!ju(t)||rc(t).position==="fixed")return null;if(e)return e(t);let i=t.offsetParent;return Uu(t)===i&&(i=i.ownerDocument.body),i}function Tme(t,e){const i=da(t);if(aL(t))return i;if(!ju(t)){let s=Mf(t);for(;s&&!t_(s);){if(ic(s)&&!UR(s))return s;s=Mf(s)}return i}let r=vK(t,e);for(;r&&Aet(r)&&UR(r);)r=vK(r,e);return r&&t_(r)&&UR(r)&&!lL(r)?i:r||Det(t)||i}const Ket=async function(t){const e=this.getOffsetParent||Tme,i=this.getDimensions,r=await i(t.floating);return{reference:Yet(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Xet(t){return rc(t).direction==="rtl"}const Lj={convertOffsetParentRelativeRectToViewportRelativeRect:Vet,getDocumentElement:Uu,getClippingRect:Jet,getOffsetParent:Tme,getElementRects:Ket,getClientRects:Uet,getDimensions:Zet,getScale:M0,isElement:ic,isRTL:Xet};function Eme(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Qet(t,e){let i=null,r;const s=Uu(t);function n(){var a;clearTimeout(r),(a=i)==null||a.disconnect(),i=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),n();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const y=Uk(h),v=Uk(s.clientWidth-(d+f)),b=Uk(s.clientHeight-(h+m)),w=Uk(d),S={rootMargin:-y+"px "+-v+"px "+-b+"px "+-w+"px",threshold:My(0,e_(1,l))||1};let $=!0;function T(C){const L=C[0].intersectionRatio;if(L!==l){if(!$)return o();L?o(!1,L):r=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!Eme(c,t.getBoundingClientRect())&&o(),$=!1}try{i=new IntersectionObserver(T,{...S,root:s.ownerDocument})}catch{i=new IntersectionObserver(T,S)}i.observe(t)}return o(!0),n}function ett(t,e,i,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:n=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=G9(t),d=s||n?[...c?q$(c):[],...q$(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",i,{passive:!0}),n&&w.addEventListener("resize",i)});const h=c&&a?Qet(c,i):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[x]=w;x&&x.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),i()}),c&&!l&&m.observe(c),m.observe(e));let y,v=l?xg(t):null;l&&b();function b(){const w=xg(t);v&&!Eme(v,w)&&i(),v=w,y=requestAnimationFrame(b)}return i(),()=>{var w;d.forEach(x=>{s&&x.removeEventListener("scroll",i),n&&x.removeEventListener("resize",i)}),h?.(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const ttt=Eet,itt=xet,rtt=Met,bK=$et,stt=Iet,ntt=wet,ott=(t,e,i)=>{const r=new Map,s={platform:Lj,...i},n={...s.platform,_c:r};return bet(t,e,{...s,platform:n})};function H9(t,e,{signal:i,edges:r}={}){let s,n=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),l=()=>{n!==null&&(t.apply(s,n),s=void 0,n=null)},c=()=>{a&&l(),m()};let d=null;const h=()=>{d!=null&&clearTimeout(d),d=setTimeout(()=>{d=null,c()},e)},f=()=>{d!==null&&(clearTimeout(d),d=null)},m=()=>{f(),s=void 0,n=null},y=()=>{l()},v=function(...b){if(i?.aborted)return;s=this,n=b;const w=d==null;h(),o&&w&&l()};return v.schedule=h,v.cancel=m,v.flush=y,i?.addEventListener("abort",m,{once:!0}),v}function att(t){return t}function ltt(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function ctt(t){return utt(t)}function BR(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function utt(t){for(let e=t;e;e=BR(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=BR(t);e;e=BR(e)){if(!(e instanceof Element))continue;const i=getComputedStyle(e);if(i.display!=="contents"&&(i.position!=="static"||lL(i)||e.tagName==="BODY"))return e}return null}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */(function(){{const e=Lj.getOffsetParent;Lj.getOffsetParent=i=>e(i,ctt)}})();function wK(t){const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const Mme=async(t,{referenceEl:e,floatingEl:i,overlayPositioning:r="absolute",placement:s,flipDisabled:n,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:d})=>{if(!e||!i)return;const h=Of(i)==="rtl",{x:f,y:m,placement:y,strategy:v,middlewareData:b}=await ott(e,i,{strategy:r,placement:s==="auto"||s==="auto-start"||s==="auto-end"?void 0:_K(s,h),middleware:ptt({placement:s,flipDisabled:n,flipPlacements:o?.map($=>_K($,h)),offsetDistance:a,offsetSkidding:l,arrowEl:c,type:d})});if(c&&b.arrow){const{x:$,y:T}=b.arrow,C=y.split("-")[0],L=$!=null?"left":"top",N=ytt[C],D={left:"",top:"",bottom:"",right:""};"floatingLayout"in t&&(t.floatingLayout=C==="left"||C==="right"?"horizontal":"vertical"),Object.assign(c.style,{...D,[L]:`${L=="left"?$:T}px`,[C]:"100%",transform:N})}const x=b.hide?.referenceHidden?"hidden":null,S=x?"none":null;i.setAttribute(dtt,y),Object.assign(i.style,{pointerEvents:S,position:v,transform:`translate(${wK(f)}px,${wK(m)}px)`,visibility:x})},dtt="data-placement",Cme=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],Oj="bottom-start",htt="bottom-end",dP={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function ptt({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:r,offsetSkidding:s,arrowEl:n,type:o}){const a=[rtt(),stt()];return o==="menu"&&a.push(bK({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})),a.push(ttt({mainAxis:typeof r=="number"?r:0,crossAxis:typeof s=="number"?s:0})),t==="auto"||t==="auto-start"||t==="auto-end"?a.push(itt({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||a.push(bK(i?{fallbackPlacements:i}:{})),n&&a.push(ntt({element:n})),a}function ftt(t){return Cme.includes(t)}function Pme(t,e){const i=t.filter(ftt);return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${Cme.map(r=>`"${r}"`).join(", ").trim()}`,{el:e}),i}function _K(t,e=!1){const i=["left","right"];return e&&i.reverse(),t.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function Ame(t,e,i=!1){if(!t.open||!e.floatingEl||!e.referenceEl)return;if(Object.assign(e.floatingEl.style,{display:"block",position:e.overlayPositioning??"absolute"}),!G$.get(t))return Lme(t);await(i?mtt(t):Mme)(t,e)}function mtt(t){let e=hP.get(t);return e||(e=H9(Mme,ZV.reposition,{edges:["leading","trailing"]}),hP.set(t,e),e)}const ytt={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},G$=new WeakMap,hP=new WeakMap;async function Lme(t){const{referenceEl:e,floatingEl:i}=t;if(!i.isConnected)return;const r=ett;G$.set(t,{state:"pending"});let s;const n=r(e,i,()=>{const o=t.reposition();s||(s=o)});return G$.set(t,{state:"active",cleanUp:n}),s}function W9(t){const{floatingEl:e}=t;e&&Object.assign(e.style,{display:"",pointerEvents:"",position:"",transform:"",visibility:""})}async function Ux(t){const{floatingEl:e,referenceEl:i}=t;if(W9(t),!(!e||!i)&&(J9(t),!!t.open))return Lme(t)}function J9(t){const e=G$.get(t);e?.state==="active"&&e.cleanUp(),G$.delete(t),hP.get(t)?.cancel(),hP.delete(t)}const xK=4,SK=Math.ceil(Math.hypot(xK,xK));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ome=({children:t,...e})=>{const i=e.level?Gee(`h${e.level}`):rg`div`;return wt(e.key,u2`<${i} class=${O(e.class)}>${t}</${i}>`)};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $K={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},gtt={width:12,height:6,strokeWidth:1},vtt=({floatingLayout:t,key:e,ref:i})=>{const{width:r,height:s,strokeWidth:n}=gtt,o=r/2,a=t==="vertical",l=`M0,0 H${r} L${r-o},${s} Q${o},${s} ${o},${s} Z`;return wt(e,j`<svg aria-hidden=true class=${O($K.arrow)} height=${r} viewBox=${`0 0 ${r} ${r+(a?0:n)}`} width=${r+(a?n:0)} ${ct(i)}>${Ji`${Ji`<path class=${O($K.arrowStroke)} d=${l??ge} fill=none stroke-width=${n+1} />`||""}<path d=${l??ge} stroke=none />`}</svg>`)};/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Rme=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],pP=Rme.join(","),Nme=typeof Element>"u",Sg=Nme?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,fP=!Nme&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},H$=function(e,i){var r;i===void 0&&(i=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),n=s===""||s==="true",o=n||i&&e&&H$(e.parentNode);return o},btt=function(e){var i,r=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return r===""||r==="true"},Dme=function(e,i,r){if(H$(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(pP));return i&&Sg.call(e,pP)&&s.unshift(e),s=s.filter(r),s},mP=function(e,i,r){for(var s=[],n=Array.from(e);n.length;){var o=n.shift();if(!H$(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=mP(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Sg.call(o,pP);d&&r.filter(o)&&(i||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),f=!H$(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&f){var m=mP(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else n.unshift.apply(n,o.children)}}return s},Fme=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},iy=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||btt(e))&&!Fme(e)?0:e.tabIndex},wtt=function(e,i){var r=iy(e);return r<0&&i&&!Fme(e)?0:r},_tt=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},zme=function(e){return e.tagName==="INPUT"},xtt=function(e){return zme(e)&&e.type==="hidden"},Stt=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return i},$tt=function(e,i){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===i)return e[r]},Itt=function(e){if(!e.name)return!0;var i=e.form||fP(e),r=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var n=$tt(s,e.form);return!n||n===e},ktt=function(e){return zme(e)&&e.type==="radio"},Ttt=function(e){return ktt(e)&&!Itt(e)},Ett=function(e){var i,r=e&&fP(e),s=(i=r)===null||i===void 0?void 0:i.host,n=!1;if(r&&r!==e){var o,a,l;for(n=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!n&&s;){var c,d,h;r=fP(s),s=(c=r)===null||c===void 0?void 0:c.host,n=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return n},IK=function(e){var i=e.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},Mtt=function(e,i){var r=i.displayCheck,s=i.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var n=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!n}if(getComputedStyle(e).visibility==="hidden")return!0;var o=Sg.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(Sg.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var l=e;e;){var c=e.parentElement,d=fP(e);if(c&&!c.shadowRoot&&s(c)===!0)return IK(e);e.assignedSlot?e=e.assignedSlot:!c&&d!==e.ownerDocument?e=d.host:e=c}e=l}if(Ett(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return IK(e);return!1},Ctt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return Sg.call(i,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}i=i.parentElement}return!1},yP=function(e,i){return!(i.disabled||H$(i)||xtt(i)||Mtt(i,e)||Stt(i)||Ctt(i))},Rj=function(e,i){return!(Ttt(i)||iy(i)<0||!yP(e,i))},Ptt=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},jme=function(e){var i=[],r=[];return e.forEach(function(s,n){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=wtt(a,o),c=o?jme(s.candidates):a;l===0?o?i.push.apply(i,c):i.push(a):r.push({documentOrder:n,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(_tt).reduce(function(s,n){return n.isScope?s.push.apply(s,n.content):s.push(n.content),s},[]).concat(i)},Att=function(e,i){i=i||{};var r;return i.getShadowRoot?r=mP([e],i.includeContainer,{filter:Rj.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Ptt}):r=Dme(e,i.includeContainer,Rj.bind(null,i)),jme(r)},Ltt=function(e,i){i=i||{};var r;return i.getShadowRoot?r=mP([e],i.includeContainer,{filter:yP.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=Dme(e,i.includeContainer,yP.bind(null,i)),r},Tv=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Sg.call(e,pP)===!1?!1:Rj(i,e)},Ott=Rme.concat("iframe").join(","),qR=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return Sg.call(e,Ott)===!1?!1:yP(i,e)};/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Nj(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function Rtt(t){if(Array.isArray(t))return Nj(t)}function Ntt(t,e,i){return(e=Vtt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Dtt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ftt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kK(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function TK(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?kK(Object(i),!0).forEach(function(r){Ntt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kK(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function ztt(t){return Rtt(t)||Dtt(t)||Utt(t)||Ftt()}function jtt(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vtt(t){var e=jtt(t,"string");return typeof e=="symbol"?e:e+""}function Utt(t,e){if(t){if(typeof t=="string")return Nj(t,e);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Nj(t,e):void 0}}var EK={activateTrap:function(e,i){if(e.length>0){var r=e[e.length-1];r!==i&&r._setPausedState(!0)}var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(e,i){var r=e.indexOf(i);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},Btt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},qtt=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},FS=function(e){return e?.key==="Tab"||e?.keyCode===9},Gtt=function(e){return FS(e)&&!e.shiftKey},Htt=function(e){return FS(e)&&e.shiftKey},MK=function(e){return setTimeout(e,0)},F1=function(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},Bk=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Wtt=[],Jtt=function(e,i){var r=i?.document||document,s=i?.trapStack||Wtt,n=TK({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Gtt,isKeyBackward:Htt},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(V,A,q){return V&&V[A]!==void 0?V[A]:n[q||A]},c=function(V,A){var q=typeof A?.composedPath=="function"?A.composedPath():void 0;return o.containerGroups.findIndex(function(J){var ee=J.container,re=J.tabbableNodes;return ee.contains(V)||q?.includes(ee)||re.find(function(me){return me===V})})},d=function(V){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=A.hasFallback,J=q===void 0?!1:q,ee=A.params,re=ee===void 0?[]:ee,me=n[V];if(typeof me=="function"&&(me=me.apply(void 0,ztt(re))),me===!0&&(me=void 0),!me){if(me===void 0||me===!1)return me;throw new Error("`".concat(V,"` was specified but was not a node, or did not return a node"))}var ze=me;if(typeof me=="string"){try{ze=r.querySelector(me)}catch(Ce){throw new Error("`".concat(V,'` appears to be an invalid selector; error="').concat(Ce.message,'"'))}if(!ze&&!J)throw new Error("`".concat(V,"` as selector refers to no known node"))}return ze},h=function(){var V=d("initialFocus",{hasFallback:!0});if(V===!1)return!1;if(V===void 0||V&&!qR(V,n.tabbableOptions))if(c(r.activeElement)>=0)V=r.activeElement;else{var A=o.tabbableGroups[0],q=A&&A.firstTabbableNode;V=q||d("fallbackFocus")}else V===null&&(V=d("fallbackFocus"));if(!V)throw new Error("Your focus-trap needs to have at least one focusable element");return V},f=function(){if(o.containerGroups=o.containers.map(function(V){var A=Att(V,n.tabbableOptions),q=Ltt(V,n.tabbableOptions),J=A.length>0?A[0]:void 0,ee=A.length>0?A[A.length-1]:void 0,re=q.find(function(Ce){return Tv(Ce)}),me=q.slice().reverse().find(function(Ce){return Tv(Ce)}),ze=!!A.find(function(Ce){return iy(Ce)>0});return{container:V,tabbableNodes:A,focusableNodes:q,posTabIndexesFound:ze,firstTabbableNode:J,lastTabbableNode:ee,firstDomTabbableNode:re,lastDomTabbableNode:me,nextTabbableNode:function(at){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Rt=A.indexOf(at);return Rt<0?vt?q.slice(q.indexOf(at)+1).find(function(Cs){return Tv(Cs)}):q.slice(0,q.indexOf(at)).reverse().find(function(Cs){return Tv(Cs)}):A[Rt+(vt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(V){return V.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(V){return V.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},m=function(V){var A=V.activeElement;if(A)return A.shadowRoot&&A.shadowRoot.activeElement!==null?m(A.shadowRoot):A},y=function(V){if(V!==!1&&V!==m(document)){if(!V||!V.focus){y(h());return}V.focus({preventScroll:!!n.preventScroll}),o.mostRecentlyFocusedNode=V,Btt(V)&&V.select()}},v=function(V){var A=d("setReturnFocus",{params:[V]});return A||(A===!1?!1:V)},b=function(V){var A=V.target,q=V.event,J=V.isBackward,ee=J===void 0?!1:J;A=A||Bk(q),f();var re=null;if(o.tabbableGroups.length>0){var me=c(A,q),ze=me>=0?o.containerGroups[me]:void 0;if(me<0)ee?re=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:re=o.tabbableGroups[0].firstTabbableNode;else if(ee){var Ce=o.tabbableGroups.findIndex(function(ae){var Ie=ae.firstTabbableNode;return A===Ie});if(Ce<0&&(ze.container===A||qR(A,n.tabbableOptions)&&!Tv(A,n.tabbableOptions)&&!ze.nextTabbableNode(A,!1))&&(Ce=me),Ce>=0){var at=Ce===0?o.tabbableGroups.length-1:Ce-1,vt=o.tabbableGroups[at];re=iy(A)>=0?vt.lastTabbableNode:vt.lastDomTabbableNode}else FS(q)||(re=ze.nextTabbableNode(A,!1))}else{var Rt=o.tabbableGroups.findIndex(function(ae){var Ie=ae.lastTabbableNode;return A===Ie});if(Rt<0&&(ze.container===A||qR(A,n.tabbableOptions)&&!Tv(A,n.tabbableOptions)&&!ze.nextTabbableNode(A))&&(Rt=me),Rt>=0){var Cs=Rt===o.tabbableGroups.length-1?0:Rt+1,ac=o.tabbableGroups[Cs];re=iy(A)>=0?ac.firstTabbableNode:ac.firstDomTabbableNode}else FS(q)||(re=ze.nextTabbableNode(A))}}else re=d("fallbackFocus");return re},w=function(V){var A=Bk(V);if(!(c(A,V)>=0)){if(F1(n.clickOutsideDeactivates,V)){a.deactivate({returnFocus:n.returnFocusOnDeactivate});return}F1(n.allowOutsideClick,V)||V.preventDefault()}},x=function(V){var A=Bk(V),q=c(A,V)>=0;if(q||A instanceof Document)q&&(o.mostRecentlyFocusedNode=A);else{V.stopImmediatePropagation();var J,ee=!0;if(o.mostRecentlyFocusedNode)if(iy(o.mostRecentlyFocusedNode)>0){var re=c(o.mostRecentlyFocusedNode),me=o.containerGroups[re].tabbableNodes;if(me.length>0){var ze=me.findIndex(function(Ce){return Ce===o.mostRecentlyFocusedNode});ze>=0&&(n.isKeyForward(o.recentNavEvent)?ze+1<me.length&&(J=me[ze+1],ee=!1):ze-1>=0&&(J=me[ze-1],ee=!1))}}else o.containerGroups.some(function(Ce){return Ce.tabbableNodes.some(function(at){return iy(at)>0})})||(ee=!1);else ee=!1;ee&&(J=b({target:o.mostRecentlyFocusedNode,isBackward:n.isKeyBackward(o.recentNavEvent)})),y(J||o.mostRecentlyFocusedNode||h())}o.recentNavEvent=void 0},S=function(V){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=V;var q=b({event:V,isBackward:A});q&&(FS(V)&&V.preventDefault(),y(q))},$=function(V){(n.isKeyForward(V)||n.isKeyBackward(V))&&S(V,n.isKeyBackward(V))},T=function(V){qtt(V)&&F1(n.escapeDeactivates,V)!==!1&&(V.preventDefault(),a.deactivate())},C=function(V){var A=Bk(V);c(A,V)>=0||F1(n.clickOutsideDeactivates,V)||F1(n.allowOutsideClick,V)||(V.preventDefault(),V.stopImmediatePropagation())},L=function(){if(o.active)return EK.activateTrap(s,a),o.delayInitialFocusTimer=n.delayInitialFocus?MK(function(){y(h())}):y(h()),r.addEventListener("focusin",x,!0),r.addEventListener("mousedown",w,{capture:!0,passive:!1}),r.addEventListener("touchstart",w,{capture:!0,passive:!1}),r.addEventListener("click",C,{capture:!0,passive:!1}),r.addEventListener("keydown",$,{capture:!0,passive:!1}),r.addEventListener("keydown",T),a},N=function(){if(o.active)return r.removeEventListener("focusin",x,!0),r.removeEventListener("mousedown",w,!0),r.removeEventListener("touchstart",w,!0),r.removeEventListener("click",C,!0),r.removeEventListener("keydown",$,!0),r.removeEventListener("keydown",T),a},D=function(V){var A=V.some(function(q){var J=Array.from(q.removedNodes);return J.some(function(ee){return ee===o.mostRecentlyFocusedNode})});A&&y(h())},F=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(D):void 0,W=function(){F&&(F.disconnect(),o.active&&!o.paused&&o.containers.map(function(V){F.observe(V,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(V){if(o.active)return this;var A=l(V,"onActivate"),q=l(V,"onPostActivate"),J=l(V,"checkCanFocusTrap");J||f(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=m(r),A?.();var ee=function(){J&&f(),L(),W(),q?.()};return J?(J(o.containers.concat()).then(ee,ee),this):(ee(),this)},deactivate:function(V){if(!o.active)return this;var A=TK({onDeactivate:n.onDeactivate,onPostDeactivate:n.onPostDeactivate,checkCanReturnFocus:n.checkCanReturnFocus},V);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,N(),o.active=!1,o.paused=!1,W(),EK.deactivateTrap(s,a);var q=l(A,"onDeactivate"),J=l(A,"onPostDeactivate"),ee=l(A,"checkCanReturnFocus"),re=l(A,"returnFocus","returnFocusOnDeactivate");q?.();var me=function(){MK(function(){re&&y(v(o.nodeFocusedBeforeActivation)),J?.()})};return re&&ee?(ee(v(o.nodeFocusedBeforeActivation)).then(me,me),this):(me(),this)},pause:function(V){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,V)):this},unpause:function(V){return o.active?(o.manuallyPaused=!1,s[s.length-1]!==this?this:this._setPausedState(!1,V)):this},updateContainerElements:function(V){var A=[].concat(V).filter(Boolean);return o.containers=A.map(function(q){return typeof q=="string"?r.querySelector(q):q}),o.active&&f(),W(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function(V,A){if(o.paused===V)return this;if(o.paused=V,V){var q=l(A,"onPause"),J=l(A,"onPostPause");q?.(),N(),W(),J?.()}else{var ee=l(A,"onUnpause"),re=l(A,"onPostUnpause");ee?.(),f(),L(),W(),re?.()}return this}}}),a.updateContainerElements(e),a};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const HE=new WeakSet;function Ztt(t,e){return HE.has(t)||$w(e),!1}function Ytt(t,e){const i=e?.fallbackFocus||t,r=e?.clickOutsideDeactivates??!0;return{fallbackFocus:i,...e,document:t.ownerDocument,tabbableOptions:YV,trapStack:u0e,clickOutsideDeactivates:s=>(HE.has(t)||HE.add(t),typeof r=="function"?r(s):r),onPostDeactivate:()=>{HE.delete(t)},setReturnFocus:s=>{const n=typeof e?.setReturnFocus=="function"?e.setReturnFocus(s):e?.setReturnFocus;return n===void 0?Ztt(t,s):n}}}function CK(t,{focusTrapOptions:e},i){return!e?.extraContainers&&!i?t:[t,...PK(e?.extraContainers),...PK(i)]}function PK(t=[]){return Array.isArray(t)?t:[t]}const Ktt=t=>c2((e,i)=>{let r,s,n;const o=t.focusTrapOptions;i.onConnected(()=>{e[t.triggerProp]&&r&&a.activate()}),i.onUpdate(l=>{e.hasUpdated&&l.has("focusTrapDisabled")&&(e.focusTrapDisabled?a.deactivate():a.activate())}),i.onDisconnected(()=>a.deactivate());const a={activate:()=>{const l=s||e.el;if(l.isConnected){if(!r){const c={...o,...e.focusTrapOptions};n||(n=CK(l,e)),r=Jtt(n,Ytt(l,c))}(typeof e.focusTrapDisabledOverride=="function"?!e.focusTrapDisabledOverride():!e.focusTrapDisabled)&&r.activate()}},deactivate:()=>r?.deactivate(),overrideFocusTrapEl:l=>{if(r)throw new Error("Focus trap already created");s=l},setExtraContainers:l=>{const c=s||e.el;n=CK(c,e,l)},updateContainerElements:()=>r?.updateContainerElements(n)};return a});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Xtt=5;function Qtt({startX:t,startY:e,endX:i,endY:r}){return Math.hypot(i-t,r-e)>Xtt}class eit{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,r=e.find(s=>i.has(s));return i.get(r)},this.togglePopovers=e=>{const i=e.composedPath(),r=this.queryPopover(i);r&&!r.triggerDisabled&&(r.open=!r.open),Array.from(this.registeredElements.values()).filter(s=>s!==r&&s.autoClose&&s.open&&!i.includes(s)).forEach(s=>s.open=!1)},this.keyDownHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():kg(e.key)&&this.togglePopovers(e))},this.pointerDownHandler=e=>{if(e.defaultPrevented||!bee(e))return;const{clientX:i,clientY:r}=e;this.pointerDownPosition={x:i,y:r}},this.clickHandler=e=>{H0e(e)||e.defaultPrevented||this.pointerDownPosition&&Qtt({endY:e.clientY,endX:e.clientX,startY:this.pointerDownPosition.y,startX:this.pointerDownPosition.x})||(this.pointerDownPosition=void 0,this.togglePopovers(e))}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){window.addEventListener("pointerdown",this.pointerDownHandler),window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("pointerdown",this.pointerDownHandler),window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const fl={positionContainer:"position-container",container:"container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"header-container",heading:"heading"},AK="auto",LK="aria-controls",OK="aria-expanded",tit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-popover-z-index, var(--calcite-z-index-popup))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-popover-max-size-x, 100vw)}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding:.5rem .75rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding:.75rem 1rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding:1rem 1.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-bottom-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container{position:relative;display:flex;height:100%;flex-direction:row;flex-wrap:nowrap;border-radius:.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.header-container.has-header{flex-direction:column}.content{display:flex;height:100%;width:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end: var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}:host([hidden]){display:none}[hidden]{display:none}`,RK=new eit,sA=class sA extends it{constructor(){super(...arguments),this.focusTrap=Ktt({triggerProp:"open",focusTrapOptions:{allowOutsideClick:!0,escapeDeactivates:e=>(e.defaultPrevented||(this.open=!1,e.preventDefault()),!1)}})(this),this.guid=`calcite-popover-${Lf()}`,this.hasLoaded=!1,this.mutationObserver=Ya("mutation",()=>this.focusTrap.updateContainerElements()),this.transitionProp="opacity",this.messages=xn(),this.focusSetter=ds()(this),this.floatingLayout="vertical",this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.offsetDistance=SK,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=AK,this.pointerDisabled=!1,this.scale="m",this.triggerDisabled=!1,this.calcitePopoverBeforeClose=ve({cancelable:!1}),this.calcitePopoverBeforeOpen=ve({cancelable:!1}),this.calcitePopoverClose=ve({cancelable:!1}),this.calcitePopoverOpen=ve({cancelable:!1})}async reposition(e=!1){const{referenceEl:i,placement:r,overlayPositioning:s,flipDisabled:n,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,floatingEl:d}=this;return Ame(this,{floatingEl:d,referenceEl:i,overlayPositioning:s,placement:r,flipDisabled:n,flipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}async updateFocusTrapElements(){this.focusTrap.updateContainerElements()}connectedCallback(){super.connectedCallback(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}willUpdate(e){e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),(e.has("offsetDistance")&&(this.hasUpdated||this.offsetDistance!==SK)||e.has("offsetSkidding")&&(this.hasUpdated||this.offsetSkidding!==0)||e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")||e.has("placement")&&(this.hasUpdated||this.placement!==AK))&&this.reposition(!0),e.has("referenceElement")&&this.referenceElementHandler()}loaded(){this.referenceElement&&!this.referenceEl&&this.setUpReferenceElement(),this.hasLoaded=!0}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.removeReferences(),J9(this)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}openHandler(){XV(this),this.reposition(!0),this.setExpandedAttr()}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}setFloatingEl(e){this.floatingEl=e,e&&requestAnimationFrame(()=>this.setUpReferenceElement())}setTransitionEl(e){e&&(this.transitionEl=e)}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Pme(i,e):null}setUpReferenceElement(e=!0){this.removeReferences(),this.referenceEl=this.getReferenceElement(),Ux(this);const{el:i,referenceElement:r,referenceEl:s}=this;e&&r&&!s&&console.warn(`${i.tagName}: reference-element id "${r}" was not found.`,{el:i}),this.addReferences()}getId(){return this.el.id||this.guid}setExpandedAttr(){const{referenceEl:e,open:i}=this;e&&"setAttribute"in e&&e.setAttribute(OK,kA(i))}addReferences(){const{referenceEl:e}=this;if(!e)return;const i=this.getId();"setAttribute"in e&&e.setAttribute(LK,i),RK.registerElement(e,this.el),this.setExpandedAttr()}removeReferences(){const{referenceEl:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(LK),e.removeAttribute(OK)),RK.unregisterElement(e))}getReferenceElement(){const{referenceElement:e,el:i}=this;return(typeof e=="string"?IA(i,{id:e}):e)||null}hide(){this.open=!1}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),this.focusTrap.activate()}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),W9(this),this.focusTrap.deactivate()}storeArrowEl(e){this.arrowEl=e,this.reposition(!0)}renderCloseButton(){const{messages:e,closable:i}=this;return i?wt(fl.closeButtonContainer,j`<div class=${O(fl.closeButtonContainer)}><calcite-action appearance=transparent class=${O(fl.closeButton)} @click=${this.hide} .scale=${this.scale} .text=${e.close}><calcite-icon icon=x .scale=${Fr(this.scale)}></calcite-icon></calcite-action></div>`):null}renderHeader(){const{heading:e,headingLevel:i}=this,r=e?Ome({class:fl.heading,level:i,children:e}):null;return r?wt(fl.header,j`<div class=${O(fl.header)}>${r}${this.renderCloseButton()}</div>`):null}render(){const{referenceEl:e,heading:i,label:r,open:s,pointerDisabled:n,floatingLayout:o}=this,a=e&&s,l=!a,c=n?null:wt("floating-arrow",vtt({floatingLayout:o,ref:this.storeArrowEl}));return this.el.inert=l,this.el.ariaLabel=r,this.el.ariaLive="polite",o2(this.el,"id",this.getId()),this.el.role="dialog",j`<div class=${O(fl.positionContainer)} ${ct(this.setFloatingEl)}><div class=${O({[fl.container]:!0,[dP.animation]:!0,[dP.animationActive]:a})} ${ct(this.setTransitionEl)}>${c}<div class=${O({[fl.hasHeader]:!!i,[fl.headerContainer]:!0})}>${this.renderHeader()}<div class=${O(fl.content)}><slot></slot></div>${i?null:this.renderCloseButton()}</div></div></div>`}};sA.properties={floatingLayout:[16,{},{state:!0}],referenceEl:[16,{},{state:!0}],autoClose:[7,{},{reflect:!0,type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],flipDisabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],focusTrapOptions:[0,{},{attribute:!1}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],label:1,messageOverrides:[0,{},{attribute:!1}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],pointerDisabled:[7,{},{reflect:!0,type:Boolean}],referenceElement:1,scale:[3,{},{reflect:!0}],triggerDisabled:[7,{},{reflect:!0,type:Boolean}]},sA.styles=tit;let Dj=sA;fi("calcite-popover",Dj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const NK={menu:"menu",defaultTrigger:"default-trigger"},GR="calcite-action-menu",HR={button:t=>`${GR}-${t}-menu-button`,menu:t=>`${GR}-${t}-menu`,action:(t,e)=>`${GR}-${t}-action-${e}`},Fj={tooltip:"tooltip",trigger:"trigger"},iit={menu:"ellipsis"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const rit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`,sit=["ArrowUp","ArrowDown","End","Home"],nA=class nA extends it{constructor(){super(...arguments),this.guid=Lf(),this.actionElements=[],this.menuButtonClick=()=>{this.toggleOpen()},this.menuButtonId=HR.button(this.guid),this.menuButtonKeyDown=e=>{const{key:i}=e,{actionElements:r,activeMenuItemIndex:s,open:n}=this;if(r.length){if(kg(i)){if(e.preventDefault(),!n){this.toggleOpen();return}const o=r[s];o?o.click():this.toggleOpen(!1)}if(i==="Tab"){this.open=!1;return}if(i==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,i,r)}},this.menuId=HR.menu(this.guid),this._open=!1,this.updateAction=(e,i)=>{const{guid:r,activeMenuItemIndex:s}=this,n=HR.action(r,i);e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=n),e.activeDescendant=i===s},this.focusSetter=ds()(this),this.activeMenuItemIndex=-1,this.appearance="solid",this.expanded=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale="m",this.calciteActionMenuCollapse=ve({cancelable:!1}),this.calciteActionMenuExpand=ve({cancelable:!1}),this.calciteActionMenuOpen=ve({cancelable:!1})}get open(){return this._open}set open(e){const i=this._open;e!==i&&(this._open=e,this.openHandler(e))}async setFocus(e){return this.focusSetter(()=>this.menuButtonEl,e)}connectedCallback(){super.connectedCallback(),this.connectMenuButtonEl()}willUpdate(e){e.has("expanded")&&(this.hasUpdated||this.expanded!==!1)&&this.expandedHandler(),e.has("activeMenuItemIndex")&&(this.hasUpdated||this.activeMenuItemIndex!==-1)&&this.updateActions(this.actionElements),e.has("expanded")&&this.hasUpdated&&(this.expanded?this.calciteActionMenuExpand.emit():this.calciteActionMenuCollapse.emit())}disconnectedCallback(){super.disconnectedCallback(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.menuButtonEl&&(this.menuButtonEl.active=e,this.menuButtonEl.aria={expanded:e}),this.popoverEl&&(this.popoverEl.open=e),this.activeMenuItemIndex=this.open?0:-1,this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}connectMenuButtonEl(){const{menuButtonId:e,menuId:i,open:r,label:s}=this,n=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==n&&(this.disconnectMenuButtonEl(),this.menuButtonEl=n,this.setTooltipReferenceElement(),n&&(n.active=r,n.setAttribute("aria-controls",i),n.setAttribute("aria-expanded",kA(r)),n.setAttribute("aria-haspopup","true"),n.id||(n.id=e),n.label||(n.label=s),n.text||(n.text=s),n.addEventListener("click",this.menuButtonClick),n.addEventListener("keydown",this.menuButtonKeyDown)))}disconnectMenuButtonEl(){const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown),this.menuButtonEl=null)}setMenuButtonEl(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r?.matches("calcite-action"));this.slottedMenuButtonEl=i[0],this.connectMenuButtonEl()}setDefaultMenuButtonEl(e){this.defaultMenuButtonEl=e,this.connectMenuButtonEl()}setPopoverEl(e){e&&(this.popoverEl=e,e.open=this.open)}handleCalciteActionClick(){this.open=!1,this.setFocus()}updateTooltip(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r?.matches("calcite-tooltip"));this.tooltipEl=i[0],this.setTooltipReferenceElement()}setTooltipReferenceElement(){const{tooltipEl:e,expanded:i,menuButtonEl:r,open:s}=this;e&&(e.referenceElement=!i&&!s?r:null)}updateActions(e){e?.forEach(this.updateAction)}async handleDefaultSlotChange(e){const i=e.target.assignedElements({flatten:!0}).reduce((r,s)=>s?.matches("calcite-action")?(r.push(s),r):s?.matches("calcite-action-group")?r.concat(Array.from(s.querySelectorAll("calcite-action"))):r,[]);await this.componentOnReady(),this.actionElements=i.filter(r=>!r.disabled&&!r.hidden)}isValidKey(e,i){return!!i.find(r=>r===e)}handleActionNavigation(e,i,r){if(!this.isValidKey(i,sit))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(i==="Home"||i==="ArrowDown")&&(this.activeMenuItemIndex=0),(i==="End"||i==="ArrowUp")&&(this.activeMenuItemIndex=r.length-1);return}i==="Home"&&(this.activeMenuItemIndex=0),i==="End"&&(this.activeMenuItemIndex=r.length-1);const s=this.activeMenuItemIndex;i==="ArrowUp"&&(this.activeMenuItemIndex=VC(Math.max(s-1,-1),r.length)),i==="ArrowDown"&&(this.activeMenuItemIndex=VC(s+1,r.length))}toggleOpen(e=!this.open){this.open=e}handlePopoverOpen(e){e.stopPropagation(),this.open=!0,this.setFocus()}handlePopoverClose(e){e.stopPropagation(),this.open=!1}renderMenuButton(){const{appearance:e,label:i,scale:r,expanded:s}=this;return j`<slot name=${Fj.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${e} .aria=${{expanded:s}} class=${O(NK.defaultTrigger)} .icon=${iit.menu} .scale=${r} .text=${i} .textEnabled=${s} ${ct(this.setDefaultMenuButtonEl)}></calcite-action></slot>`}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:i,menuId:r,menuButtonEl:s,label:n,placement:o,overlayPositioning:a,flipPlacements:l}=this,d=e[i]?.id||null;return j`<calcite-popover auto-close .flipPlacements=${l} focus-trap-disabled .label=${n} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${a} .placement=${o} pointer-disabled .referenceElement=${s} trigger-disabled ${ct(this.setPopoverEl)}><div aria-activedescendant=${d??ge} aria-labelledby=${s?.id??ge} class=${O(NK.menu)} id=${r??ge} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`}render(){return j`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${Fj.tooltip} @slotchange=${this.updateTooltip}></slot>`}};nA.properties={activeMenuItemIndex:[16,{},{state:!0}],menuButtonEl:[16,{},{state:!0}],appearance:[3,{},{reflect:!0}],expanded:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},nA.styles=rit;let gP=nA;fi("calcite-action-menu",gP);const nit=Object.freeze(Object.defineProperty({__proto__:null,ActionMenu:gP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const DK={scrim:"scrim",content:"content"},FK={s:72,l:480},oit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{position:absolute;inset:0;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity: 0}to{--tw-text-opacity: 1}}.scrim{position:absolute;inset:0;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,oA=class oA extends it{constructor(){super(...arguments),this.loaderRef=wi(),this.resizeObserver=Ya("resize",()=>this.handleResize()),this.messages=xn(),this.hasContent=!1,this.loading=!1}connectedCallback(){super.connectedCallback(),this.resizeObserver?.observe(this.el)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}handleDefaultSlotChange(e){this.hasContent=j0e(e)}getScale(e){return e<FK.s?"s":e>=FK.l?"l":"m"}handleResize(){const{el:e}=this;this.loaderScale=this.getScale(Math.min(e.clientHeight,e.clientWidth)??0)}render(){const{hasContent:e,loading:i,loaderScale:r,messages:s}=this;return j`<div class=${O(DK.scrim)}>${i&&r?j`<calcite-loader .label=${s.loading} .scale=${r} ${ct(this.loaderRef)}></calcite-loader>`:null}<div class=${O(DK.content)} .hidden=${!e}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div>`}};oA.properties={hasContent:[16,{},{state:!0}],loaderScale:[16,{},{state:!0}],loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}]},oA.styles=oit;let zj=oA;fi("calcite-scrim",zj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const mi={actionBarContainer:"action-bar-container",container:"container",contentBottom:"content-bottom",contentTop:"content-top",header:"header",headerContainer:"header-container",headerContainerBorderEnd:"header-container--border-end",headingTextContent:"heading-text-content",heading:"heading",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",icon:"icon",contentWrapper:"content-wrapper",fabContainer:"fab-container",footer:"footer",footerContent:"footer-content",footerActions:"footer-actions",footerStart:"footer-start",footerEnd:"footer-end",headerSlottedContent:"header--slotted-content",headerNonSlottedContent:"header--non-slotted-content",menuAction:"menu-action"},zK={close:"close",collapse:"collapse"},qk={close:"x",menu:"ellipsis",expand:"chevron-down",collapse:"chevron-up"},Lo={actionBar:"action-bar",alerts:"alerts",contentBottom:"content-bottom",contentTop:"content-top",headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerEnd:"footer-end",footerStart:"footer-start",footerActions:"footer-actions"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ait=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height: calc(var(--calcite-icon-size) * 3);border-radius:var(--calcite-panel-corner-radius, var(--calcite-corner-radius-sharp))}slot[name=alerts]::slotted(calcite-alert){block-size:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.header{margin:0;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-color-text-2);color:var(--calcite-color-text-2)}.heading{margin:0;padding:0;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:.5rem}:host([scale=s]){--calcite-internal-panel-default-space: var(--calcite-spacing-sm);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-sm-plus)}:host([scale=s]) .header-content .heading{font-size:var(--calcite-font-size--1)}:host([scale=s]) .header-content .description{font-size:var(--calcite-font-size--2)}:host([scale=s]) .header-content .icon{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-panel-default-space: var(--calcite-spacing-md);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-md-plus)}:host([scale=m]) .header-content .heading{font-size:var(--calcite-font-size-0)}:host([scale=m]) .header-content .description{font-size:var(--calcite-font-size--1)}:host([scale=m]) .header-content .icon{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-panel-default-space: var(--calcite-spacing-lg);--calcite-internal-panel-header-vertical-padding: var(--calcite-spacing-xl)}:host([scale=l]) .header-content .heading{font-size:var(--calcite-font-size-1)}:host([scale=l]) .header-content .description{font-size:var(--calcite-font-size-0)}:host([scale=l]) .header-content .icon{margin-inline-end:var(--calcite-spacing-lg)}.content-top,.content-bottom{display:flex;align-items:flex-start;align-self:stretch;padding:var(--calcite-internal-panel-default-space);border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));background-color:var(--calcite-panel-background-color, var(--calcite-color-foreground-1))}.container{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;overflow:hidden;background-color:var(--calcite-color-background);padding:0;color:var(--calcite-color-text-2);transition:max-block-size var(--calcite-animation-timing),inline-size var(--calcite-animation-timing);box-sizing:border-box;font-size:var(--calcite-font-size--1)}.container *{box-sizing:border-box}.header{z-index:var(--calcite-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-panel-header-background-color, var(--calcite-color-foreground-1));border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-panel-header-border-block-end, var(--calcite-color-border-3)))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3))}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:.75rem;padding-block:.875rem;margin-inline-end:auto;justify-content:center}.header-content .heading-text-content{flex:1 1 auto;overflow:hidden}.header-content .heading,.header-content .description{display:block;flex:none;overflow-wrap:break-word;padding:0;line-height:var(--calcite-font-line-height-relative-snug)}.header-content .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-panel-heading-text-color, var(--calcite-color-text-1))}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{color:var(--calcite-panel-description-text-color, var(--calcite-color-text-2))}#close,#collapse,.back-button,calcite-action-menu{--calcite-action-background-color: var(--calcite-panel-header-action-background-color);--calcite-action-background-color-hover: var(--calcite-panel-header-action-background-color-hover);--calcite-action-background-color-press: var(--calcite-panel-header-action-background-color-press);--calcite-action-text-color: var(--calcite-panel-header-action-text-color);--calcite-action-text-color-press: var(--calcite-panel-header-action-text-color-press)}.back-button{border-width:0px;border-style:solid;border-inline-end-width:1px;border-color:var(--calcite-panel-border-color, var(--calcite-color-border-3))}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{position:relative;display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;color:var(--calcite-color-text-2);outline-color:transparent;padding:var(--calcite-panel-space, var(--calcite-panel-content-space, 0));background:var(--calcite-panel-background-color, var(--calcite-color-background))}.content-wrapper:focus-visible{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.header-content{flex:1 1 auto;justify-content:center;padding-block:var(--calcite-internal-panel-header-vertical-padding);padding-inline:var(--calcite-internal-panel-default-space)}.header-content.header--slotted-content{padding:var(--calcite-panel-header-content-space, var(--calcite-internal-panel-header-vertical-padding) var(--calcite-internal-panel-default-space))}.header-content.header--non-slotted-content{align-items:center;flex-direction:row}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;align-items:center;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;border-block-start:1px solid var(--calcite-panel-border-color, var(--calcite-color-border-3));padding:var(--calcite-panel-footer-space, var(--calcite-panel-footer-padding, var(--calcite-internal-panel-default-space)));background-color:var(--calcite-panel-footer-background-color, var(--calcite-color-foreground-1))}.footer-content{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:center}.footer-actions{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-evenly;gap:var(--calcite-internal-panel-default-space)}.footer-start{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-start;margin-inline-end:auto;gap:var(--calcite-internal-panel-default-space)}.footer-end{display:flex;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:flex-end;margin-inline-start:auto;gap:var(--calcite-internal-panel-default-space)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:.5rem;inset-inline:0;inline-size:fit-content}calcite-icon{--calcite-icon-color: var(--calcite-panel-icon-color, var(--calcite-color-text-1))}:host([hidden]){display:none}[hidden]{display:none}`,aA=class aA extends it{constructor(){super(),this.containerRef=wi(),this.resizeObserver=Ya("resize",()=>this.resizeHandler()),this.messages=xn(),this._closed=!1,this.focusSetter=ds()(this),this.hasActionBar=!1,this.hasContentBottom=!1,this.hasContentTop=!1,this.hasEndActions=!1,this.hasFab=!1,this.hasFooterActions=!1,this.hasFooterContent=!1,this.hasFooterEndContent=!1,this.hasFooterStartContent=!1,this.hasHeaderContent=!1,this.hasMenuItems=!1,this.hasStartActions=!1,this.showHeaderContent=!1,this.closable=!1,this.collapseDirection="down",this.collapsed=!1,this.collapsible=!1,this.disabled=!1,this.iconFlipRtl=!1,this.loading=!1,this.menuOpen=!1,this.menuPlacement=htt,this.overlayPositioning="absolute",this.scale="m",this.calcitePanelClose=ve({cancelable:!0}),this.calcitePanelCollapse=ve({cancelable:!1}),this.calcitePanelExpand=ve({cancelable:!1}),this.calcitePanelScroll=ve({cancelable:!1}),this.calcitePanelToggle=ve({cancelable:!1}),this.listen("keydown",this.panelKeyDownHandler),this.listen("calcitePanelClose",this.panelCloseHandler)}get closed(){return this._closed}set closed(e){const i=this._closed;e!==i&&this.setClosedState(e)}async scrollContentTo(e){this.panelScrollEl?.scrollTo(e)}async setFocus(e){return this.focusSetter(()=>this.containerRef.value,e)}willUpdate(e){e.has("collapsed")&&this.hasUpdated&&(this.collapsed?this.calcitePanelCollapse.emit():this.calcitePanelExpand.emit())}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.disconnect()}async setClosedState(e){if(this.beforeClose&&e)try{await this.beforeClose?.()}catch{return}this._closed=e}resizeHandler(){const{panelScrollEl:e}=this;if(!e||typeof e.scrollHeight!="number"||typeof e.offsetHeight!="number")return;e.scrollHeight>e.offsetHeight?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}closeClickHandler(){this.emitCloseEvent()}emitCloseEvent(){this.calcitePanelClose.emit()}panelKeyDownHandler(e){this.closable&&e.key==="Escape"&&!e.defaultPrevented&&(this.emitCloseEvent(),e.preventDefault())}panelCloseHandler(e){e.defaultPrevented||e.target!==this.el||(this.closed=!0)}collapse(){this.collapsed=!this.collapsed,this.calcitePanelToggle.emit()}panelScrollHandler(){this.calcitePanelScroll.emit()}handleHeaderActionsStartSlotChange(e){this.hasStartActions=Ft(e)}handleHeaderActionsEndSlotChange(e){this.hasEndActions=Ft(e)}handleHeaderMenuActionsSlotChange(e){this.hasMenuItems=Ft(e)}handleActionBarSlotChange(e){const i=yM(e).filter(r=>r?.matches("calcite-action-bar"));i.forEach(r=>r.layout="horizontal"),this.hasActionBar=!!i.length}handleHeaderContentSlotChange(e){this.hasHeaderContent=Ft(e)}handleFabSlotChange(e){this.hasFab=Ft(e)}handleFooterActionsSlotChange(e){this.hasFooterActions=Ft(e)}handleFooterEndSlotChange(e){this.hasFooterEndContent=Ft(e)}handleFooterStartSlotChange(e){this.hasFooterStartContent=Ft(e)}handleFooterSlotChange(e){this.hasFooterContent=Ft(e)}contentBottomSlotChangeHandler(e){this.hasContentBottom=Ft(e)}contentTopSlotChangeHandler(e){this.hasContentTop=Ft(e)}setPanelScrollEl(e){gM(this.resizeObserver,this.panelScrollEl,e),this.panelScrollEl=e}handleAlertsSlotChange(e){yM(e)?.map(i=>{i.nodeName==="CALCITE-ALERT"&&(i.embedded=!0)})}renderHeaderContent(){const{heading:e,headingLevel:i,description:r,hasHeaderContent:s,icon:n,scale:o}=this,a=n?j`<calcite-icon class=${O(mi.icon)} .flipRtl=${this.iconFlipRtl} .icon=${n} .scale=${Fr(o)}></calcite-icon>`:null,l=e?Ome({class:mi.heading,level:i,children:e}):null,c=r?j`<span class=${O(mi.description)}>${r}</span>`:null;return!s&&(l||c)?wt("header-content",j`<div class=${O({[mi.headerContent]:!0,[mi.headerNonSlottedContent]:!0})}>${a}<div class=${O(mi.headingTextContent)}>${l}${c}</div></div>`):null}renderActionBar(){return j`<div class=${O(mi.actionBarContainer)} .hidden=${!this.hasActionBar}><slot name=${Lo.actionBar} @slotchange=${this.handleActionBarSlotChange}></slot></div>`}renderHeaderSlottedContent(){return wt("slotted-header-content",j`<div class=${O({[mi.headerContent]:!0,[mi.headerSlottedContent]:!0})} .hidden=${!this.hasHeaderContent}><slot name=${Lo.headerContent} @slotchange=${this.handleHeaderContentSlotChange}></slot></div>`)}renderHeaderStartActions(){const{hasStartActions:e}=this;return wt("header-actions-start",j`<div class=${O({[mi.headerActionsStart]:!0,[mi.headerActions]:!0})} .hidden=${!e}><slot name=${Lo.headerActionsStart} @slotchange=${this.handleHeaderActionsStartSlotChange}></slot></div>`)}renderHeaderActionsEnd(){const{hasEndActions:e,messages:i,closable:r,collapsed:s,collapseDirection:n,collapsible:o,hasMenuItems:a}=this,{collapse:l,expand:c,close:d}=i,h=[qk.expand,qk.collapse];n==="up"&&h.reverse();const f=o?j`<calcite-action .aria=${{expanded:!s}} .icon=${s?h[0]:h[1]} id=${zK.collapse} .label=${l} @click=${this.collapse} .scale=${this.scale} .text=${l} title=${(s?c:l)??ge}></calcite-action>`:null,m=r?j`<calcite-action .ariaLabel=${d} .icon=${qk.close} id=${zK.close} @click=${this.closeClickHandler} .scale=${this.scale} .text=${d} title=${d??ge}></calcite-action>`:null,y=j`<slot name=${Lo.headerActionsEnd} @slotchange=${this.handleHeaderActionsEndSlotChange}></slot>`,v=e||f||m||a;return wt("header-actions-end",j`<div class=${O({[mi.headerActionsEnd]:!0,[mi.headerActions]:!0})} .hidden=${!v}>${y}${this.renderMenu()}${f}${m}</div>`)}renderMenu(){const{hasMenuItems:e,messages:i,menuOpen:r,menuFlipPlacements:s,menuPlacement:n}=this;return wt("menu",j`<calcite-action-menu .flipPlacements=${s??["top","bottom"]} .hidden=${!e} .label=${i.options} .open=${r} .overlayPositioning=${this.overlayPositioning} .placement=${n}><calcite-action class=${O(mi.menuAction)} .icon=${qk.menu} .scale=${this.scale} slot=${Fj.trigger} .text=${i.options}></calcite-action><slot name=${Lo.headerMenuActions} @slotchange=${this.handleHeaderMenuActionsSlotChange}></slot></calcite-action-menu>`)}renderHeaderNode(){const{hasHeaderContent:e,hasStartActions:i,hasEndActions:r,closable:s,collapsible:n,hasMenuItems:o,hasActionBar:a,hasContentTop:l}=this,c=this.renderHeaderContent(),d=e||!!c||i||r||n||s||o||a||l;return this.showHeaderContent=d,j`<header class=${O(mi.header)} .hidden=${!(d||a||l)}><div class=${O({[mi.headerContainer]:!0,[mi.headerContainerBorderEnd]:a})} .hidden=${!d}>${this.renderHeaderStartActions()}${this.renderHeaderSlottedContent()}${c}${this.renderHeaderActionsEnd()}</div>${this.renderActionBar()}${this.renderContentTop()}</header>`}renderFooterNode(){const{hasFooterEndContent:e,hasFooterStartContent:i,hasFooterContent:r,hasFooterActions:s}=this,n=i||e||r||s;return j`<footer class=${O(mi.footer)} .hidden=${!n}><div class=${O(mi.footerContent)} .hidden=${!r}><slot name=${Lo.footer} @slotchange=${this.handleFooterSlotChange}></slot></div><div class=${O(mi.footerStart)} .hidden=${r||!i}><slot name=${Lo.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot></div><div class=${O(mi.footerEnd)} .hidden=${r||!e}><slot name=${Lo.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></div><div class=${O(mi.footerActions)} .hidden=${r||!s}>${wt("footer-actions-slot",j`<slot name=${Lo.footerActions} @slotchange=${this.handleFooterActionsSlotChange}></slot>`)}</div></footer>`}renderContent(){return j`<div class=${O(mi.contentWrapper)} .hidden=${this.collapsible&&this.collapsed} @scroll=${this.panelScrollHandler} ${ct(this.setPanelScrollEl)}><slot></slot>${this.renderFab()}</div>`}renderContentBottom(){return j`<div class=${O(mi.contentBottom)} .hidden=${!this.hasContentBottom}><slot name=${Lo.contentBottom} @slotchange=${this.contentBottomSlotChangeHandler}></slot></div>`}renderContentTop(){return j`<div class=${O(mi.contentTop)} .hidden=${!this.hasContentTop}><slot name=${Lo.contentTop} @slotchange=${this.contentTopSlotChangeHandler}></slot></div>`}renderFab(){return j`<div class=${O(mi.fabContainer)} .hidden=${!this.hasFab}><slot name=${Lo.fab} @slotchange=${this.handleFabSlotChange}></slot></div>`}render(){const{disabled:e,loading:i,closed:r}=this,s=j`<article .ariaBusy=${i} class=${O(mi.container)} .hidden=${r} ${ct(this.containerRef)}>${this.renderHeaderNode()}${this.renderContent()}${this.renderContentBottom()}${this.renderFooterNode()}${wt("alerts",j`<slot name=${Lo.alerts} @slotchange=${this.handleAlertsSlotChange}></slot>`)}</article>`;return _n({disabled:e,children:j`${i?j`<calcite-scrim .loading=${i}></calcite-scrim>`:null}${s}`})}};aA.properties={hasActionBar:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentTop:[16,{},{state:!0}],hasEndActions:[16,{},{state:!0}],hasFab:[16,{},{state:!0}],hasFooterActions:[16,{},{state:!0}],hasFooterContent:[16,{},{state:!0}],hasFooterEndContent:[16,{},{state:!0}],hasFooterStartContent:[16,{},{state:!0}],hasHeaderContent:[16,{},{state:!0}],hasMenuItems:[16,{},{state:!0}],hasStartActions:[16,{},{state:!0}],showHeaderContent:[16,{},{state:!0}],beforeClose:[0,{},{attribute:!1}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],collapseDirection:1,collapsed:[7,{},{reflect:!0,type:Boolean}],collapsible:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],heading:1,headingLevel:[11,{},{type:Number,reflect:!0}],icon:[3,{},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],loading:[7,{},{reflect:!0,type:Boolean}],menuFlipPlacements:[0,{},{attribute:!1}],menuOpen:[7,{},{reflect:!0,type:Boolean}],menuPlacement:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],overlayPositioning:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},aA.styles=ait;let jj=aA;fi("calcite-panel",jj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ip={alignmentCenter:"internal-label-alignment--center",alignmentEnd:"internal-label-alignment--end",container:"internal-label--container",requiredIndicator:"internal-label-required--indicator",spacingBottom:"internal-label-spacing--bottom",spacingInlineEnd:"internal-label-spacing-inline--end",spacingInlineStart:"internal-label-spacing-inline--start",text:"internal-label--text"},vP=({alignmentCenter:t,bottomSpacingDisabled:e,labelText:i,onClick:r,required:s,spacingInlineEnd:n,spacingInlineStart:o,tooltipText:a})=>j`<div class=${O({[ip.alignmentCenter]:t,[ip.alignmentEnd]:!t,[ip.container]:!0,[ip.spacingBottom]:!e,[ip.spacingInlineEnd]:n,[ip.spacingInlineStart]:o})} @click=${r}><div class=${O(ip.text)}>${i}${s&&j`<span aria-hidden=true class=${O(ip.requiredIndicator)} title=${a??ge}>*</span>`||""}</div><slot name=label-content></slot></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const jK={toggle:"toggle",check:"check-svg"},lit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .check-svg,:host([scale=s]) .toggle{inline-size:var(--calcite-checkbox-size, .75rem);block-size:var(--calcite-checkbox-size, .75rem)}:host([scale=m]) .check-svg,:host([scale=m]) .toggle{inline-size:var(--calcite-checkbox-size, var(--calcite-font-size--1));block-size:var(--calcite-checkbox-size, var(--calcite-font-size--1))}:host([scale=l]) .check-svg,:host([scale=l]) .toggle{inline-size:var(--calcite-checkbox-size, 1rem);block-size:var(--calcite-checkbox-size, 1rem)}:host{position:relative;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}:host .check-svg{pointer-events:none;box-sizing:border-box;display:block;overflow:hidden;background-color:var(--calcite-color-foreground-1);fill:currentColor;stroke:currentColor;stroke-width:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;box-shadow:inset 0 0 0 1px var(--calcite-checkbox-border-color, var(--calcite-color-border-input));color:var(--calcite-checkbox-icon-color, var(--calcite-color-background))}:host([status=invalid]:not([checked])) .check-svg{box-shadow:inset 0 0 0 1px var(--calcite-color-status-danger)}:host([status=invalid]:not([checked])) .toggle:hover .check-svg{box-shadow:inset 0 0 0 2px var(--calcite-color-brand-hover)}:host([status=invalid]:not([checked])) .toggle:active .check-svg{box-shadow:inset 0 0 0 2px var(--calcite-color-brand-press)}:host([status=invalid]:not([checked])) .toggle:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([checked]) .check-svg,:host([indeterminate]) .check-svg{background-color:var(--calcite-color-brand);box-shadow:inset 0 0 0 1px var(--calcite-color-brand)}:host([checked]) .toggle:hover .check-svg,:host([indeterminate]) .toggle:hover .check-svg{background-color:var(--calcite-checkbox-border-color-hover, var(--calcite-color-brand-hover))}:host([checked]) .toggle:active .check-svg,:host([indeterminate]) .toggle:active .check-svg{background-color:var(--calcite-checkbox-border-color-press, var(--calcite-color-brand-press));box-shadow:inset 0 0 0 2px var(--calcite-checkbox-border-color-press, var(--calcite-color-brand-press))}:host([hovered]) .toggle .check-svg,:host .toggle:hover .check-svg{box-shadow:inset 0 0 0 2px var(--calcite-checkbox-border-color-hover, var(--calcite-color-brand-hover))}.toggle:active .check-svg{box-shadow:inset 0 0 0 2px var(--calcite-checkbox-border-color-press, var(--calcite-color-brand-press))}.toggle{position:relative;outline-color:transparent}.toggle:active,.toggle:focus,.toggle:focus-visible{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.toggle:after,.toggle:before{inset-block-start:50%;inset-inline-start:50%;min-block-size:1.5rem;min-inline-size:1.5rem;position:absolute}.toggle:not(.calcite--rtl):after{content:"";transform:translate(-50%) translateY(-50%)}.toggle.calcite--rtl:before{content:"";transform:translate(50%) translateY(-50%)}@media (forced-colors: active){.check-svg{border:1px solid currentColor}}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,lA=class lA extends it{constructor(){super(),this.checkedPath="M5.5 12L2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637z",this.indeterminatePath="M13 8v1H3V8z",this.onLabelClick=()=>{this.toggle()},this.toggleEl=wi(),this.messages=xn(),this.focusSetter=ds()(this),this.checked=!1,this.disabled=!1,this.hovered=!1,this.indeterminate=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteCheckboxChange=ve({cancelable:!1}),this.calciteInternalCheckboxBlur=ve({cancelable:!1}),this.calciteInternalCheckboxFocus=ve({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}async setFocus(e){return this.focusSetter(()=>this.toggleEl.value,e)}connectedCallback(){super.connectedCallback(),q_(this),F9(this)}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),nL(this),j9(this)}syncHiddenFormInput(e){e.type="checkbox"}getPath(){return this.indeterminate?this.indeterminatePath:this.checked?this.checkedPath:""}toggle(){this.disabled||(this.checked=!this.checked,this.setFocus(),this.indeterminate=!1,this.calciteCheckboxChange.emit())}keyDownHandler(e){kg(e.key)&&(this.toggle(),e.preventDefault())}clickHandler(){this.toggle()}onToggleBlur(){this.calciteInternalCheckboxBlur.emit(!1)}onToggleFocus(){this.calciteInternalCheckboxFocus.emit(!0)}render(){const e=Of(this.el)==="rtl";return _n({disabled:this.disabled,children:j`<div .ariaChecked=${this.checked} .ariaLabel=${U$(this)} .ariaRequired=${this.required} class=${O({[jK.toggle]:!0,[$A.rtl]:e})} @blur=${this.onToggleBlur} @focus=${this.onToggleFocus} role=checkbox tabindex=${this.disabled?void 0:0} ${ct(this.toggleEl)}><svg aria-hidden=true class=${O(jK.check)} viewBox="0 0 16 16">${Ji`<path d=${this.getPath()??le} />`}</svg><slot></slot></div>${this.labelText&&vP({bottomSpacingDisabled:!0,labelText:this.labelText,required:this.required,spacingInlineStart:!0,tooltipText:this.messages.required})||""}${V9({component:this})}`})}};lA.properties={checked:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],hovered:[7,{},{reflect:!0,type:Boolean}],indeterminate:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,messageOverrides:[0,{},{attribute:!1}],name:[3,{},{reflect:!0}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],validity:[0,{},{attribute:!1}],value:1},lA.styles=lit;let Vj=lA;fi("calcite-checkbox",Vj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ev={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},r0={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const cit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`,cA=class cA extends it{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}handleActionsStartSlotChange(e){this.hasActionsStart=Ft(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=Ft(e)}handleContentStartSlotChange(e){this.hasContentStart=Ft(e)}handleContentEndSlotChange(e){this.hasContentEnd=Ft(e)}renderActionsStart(){const{hasActionsStart:e}=this;return wt("actions-start-container",j`<div class=${O(Ev.actionsStart)} .hidden=${!e}><slot name=${r0.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return wt("actions-end-container",j`<div class=${O(Ev.actionsEnd)} .hidden=${!e}><slot name=${r0.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return j`<div class=${O(Ev.contentStart)} .hidden=${!e}><slot name=${r0.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return j`<div class=${O(Ev.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return j`<div class=${O(Ev.contentEnd)} .hidden=${!e}><slot name=${r0.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return j`<div class=${O(Ev.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}};cA.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]},cA.styles=cit;let Uj=cA;fi("calcite-stack",Uj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const VK={valid:"check-circle",invalid:"exclamation-mark-triangle",idle:"information"},uit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`,dit={inputMessageIcon:"calcite-input-message-icon"},uA=class uA extends it{constructor(){super(...arguments),this.iconFlipRtl=!1,this.scale="m",this.status="idle"}connectedCallback(){super.connectedCallback(),this.requestedIcon=o$(VK,this.icon,this.status)}willUpdate(e){(e.has("status")&&(this.hasUpdated||this.status!=="idle")||e.has("icon"))&&(this.requestedIcon=o$(VK,this.icon,this.status))}render(){const e=this.el.hidden;return o2(this.el,"calcite-hydrated-hidden",e),j`${this.renderIcon(this.requestedIcon)}<slot></slot>`}renderIcon(e){if(e)return j`<calcite-icon class=${O(dit.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${e} scale=s></calcite-icon>`}};uA.properties={icon:[3,{converter:Sw},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}]},uA.styles=uit;let bP=uA;fi("calcite-input-message",bP);const pxt=Object.freeze(Object.defineProperty({__proto__:null,InputMessage:bP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hit={validationContainer:"validation-container"},pit=()=>{},fit=({scale:t,status:e,id:i,icon:r,message:s,ref:n})=>j`<div class=${O(hit.validationContainer)} ${ct(n||pit)}><calcite-input-message aria-live=polite .icon=${r} id=${i} .scale=${t} .status=${e}>${s}</calcite-input-message></div>`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const mit=["date","datetime-local","month","number","range","time","week"],yit=["email","password","search","tel","text","url"],git=["email","password","search","tel","text","textarea","url"];function Mv(t,e,i,r){const s=i.toLowerCase(),n=t[i];r&&n!=null?e.setAttribute(s,`${n}`):e.removeAttribute(s)}function vit(t,e,i){i.type=t==="textarea"?"text":t;const r=mit.includes(t),s=e;Mv(s,i,"min",r),Mv(s,i,"max",r),Mv(s,i,"step",r);const n=git.includes(t),o=e;Mv(o,i,"minLength",n),Mv(o,i,"maxLength",n);const a=yit.includes(t);Mv(o,i,"pattern",a)}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Os={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",numberButtonItem:"number-button-item",hasSuffix:"has-suffix",hasPrefix:"has-prefix"},WR={validationMessage:"inputValidationMessage"},UK={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},bit={action:"action"},BK={up:"up",down:"down"},JR={chevronUp:"chevron-up",chevronDown:"chevron-down",close:"x"},wit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) input[type=file],:host([scale=s]) textarea{min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea,:host([scale=m]) input[type=file]{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea,:host([scale=l]) input[type=file]{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}textarea,input{position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-color, var(--calcite-color-text-1));transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none}textarea:placeholder-shown,input:placeholder-shown{text-overflow:ellipsis}textarea{border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-prefix input{border-start-start-radius:0;border-end-start-radius:0}.has-suffix input,.element-wrapper:has(.clear-button) input,:host([number-button-type=vertical][type=number]) input,:host([number-button-type=horizontal]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .has-suffix .suffix,:host([number-button-type=vertical][type=number]) .clear-button,:host([number-button-type=horizontal][type=number]) .clear-button{border-start-end-radius:0;border-end-end-radius:0}:host([number-button-type=horizontal]) input{border-start-start-radius:0;border-start-end-radius:0;border-end-start-radius:0;border-end-end-radius:0}.has-prefix .prefix:first-child,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=down]{border-start-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}.has-suffix .suffix,:host([number-button-type=vertical][type=number][read-only]) .has-suffix .suffix,:host([clearable]) .clear-button,:host([number-button-type=horizontal]) .number-button-item[data-adjustment=up]{border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([clearable]) .has-suffix .clear-button{border-end-end-radius:0;border-start-end-radius:0}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px;border-end-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]{border-start-end-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp))}input[type=search]::-webkit-search-decoration{-webkit-appearance:none}input:focus,textarea:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-color, var(--calcite-color-text-1))}input[readonly],textarea[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-background-color, var(--calcite-color-background))}input[readonly]:focus,textarea[readonly]:focus{color:var(--calcite-input-text-color, var(--calcite-color-text-1))}textarea,input{outline-color:transparent}textarea:focus,input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center;isolation:isolate}.icon{pointer-events:none;position:absolute;display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-icon-color, var(--calcite-color-text-3));z-index:var(--calcite-z-index)}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.clear-button:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.clear-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block;--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2))}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}input[type=number]{-moz-appearance:textfield}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal{border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));order:1;max-block-size:100%;min-block-size:100%;align-self:stretch;border-width:1px;border-style:solid}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=up]{border-inline-start-width:0px;order:5}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);padding-block:0px;padding-inline:.5rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-actions-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-actions-icon-color, var(--calcite-color-text-3))}.number-button-item:hover{background-color:var(--calcite-input-actions-background-color-hover, var(--calcite-color-foreground-2))}.number-button-item:hover calcite-icon{color:var(--calcite-input-actions-icon-color-hover, var(--calcite-color-text-1))}.number-button-item:active{background-color:var(--calcite-input-actions-background-color-press, var(--calcite-color-foreground-3))}.number-button-item:active calcite-icon{color:var(--calcite-input-actions-icon-color-press, var(--calcite-color-text-1))}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center;border-radius:var(--calcite-input-corner-radius, var(--calcite-corner-radius-sharp));box-shadow:var(--calcite-input-shadow, var(--calcite-shadow-none))}input[type=date]::-webkit-input-placeholder{visibility:hidden!important}:host([type=color]) input{padding:.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;background-color:var(--calcite-color-foreground-1);text-align:center;border-color:var(--calcite-input-border-color, var(--calcite-color-border-input));block-size:initial}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:.5rem}:host([type=file][scale=m]) input{padding-block:.25rem;padding-inline:.75rem}:host([type=file][scale=l]) input{padding-block:.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}:host([type=datetime-local]) .element-wrapper{inline-size:100%}:host([type=datetime-local]) .element-wrapper input{display:inline-block;min-inline-size:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`,dA=class dA extends it{constructor(){super(),this.actionWrapperRef=wi(),this.attributeWatch=Fee(["autofocus","enterkeyhint","inputmode","spellcheck"],this.handleGlobalAttributesChanged),this.childRef=wi(),this.childElType="input",this.childNumberRef=wi(),this.inputWrapperRef=wi(),this.onHiddenFormInputInput=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),this.setFocus(),e.stopPropagation()},this.previousValueOrigin="initial",this.userChangedValue=!1,this._value="",this.messages=xn(),this.focusSetter=ds()(this),this.slottedActionElDisabledInternally=!1,this.alignment="start",this.clearable=!1,this.disabled=!1,this.editingEnabled=!1,this.groupSeparator=!1,this.iconFlipRtl=!1,this.loading=!1,this.localeFormat=!1,this.multiple=!1,this.numberButtonType="vertical",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.type="text",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputChange=ve({cancelable:!1}),this.calciteInputInput=ve(),this.calciteInternalInputBlur=ve({cancelable:!1}),this.calciteInternalInputFocus=ve({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueWatcher(e,i),e&&this._value===""&&this.setValue({origin:"reset",value:i}))}async selectText(){(this.type==="number"?this.childNumberRef:this.childRef).value?.select()}async setFocus(e){return this.focusSetter(()=>this.type==="number"?this.childNumberRef.value:this.childRef.value,e)}connectedCallback(){super.connectedCallback(),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),q_(this),F9(this),this.el.addEventListener(Cj,this.onHiddenFormInputInput)}async load(){this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=this.max?.toString(),this.minString=this.min?.toString(),this.requestedIcon=o$(UK,this.icon,this.type),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.value==="Infinity"||this.value==="-Infinity"?(this.displayedValue=this.value,this.previousEmittedValue=this.value):(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:jd(this.value)?this.value:""})))}willUpdate(e){e.has("max")&&(this.maxString=this.max?.toString()||null),e.has("min")&&(this.minString=this.min?.toString()||null),(e.has("icon")||e.has("type")&&(this.hasUpdated||this.type!=="text"))&&(this.requestedIcon=o$(UK,this.icon,this.type))}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),nL(this),j9(this),this.el.removeEventListener(Cj,this.onHiddenFormInputInput)}get isClearable(){return!this.isTextarea&&(this.clearable||this.type==="search")&&this.value?.length>0}get isTextarea(){return this.childElType==="textarea"}handleGlobalAttributesChanged(){this.requestUpdate()}valueWatcher(e,i){if(!this.userChangedValue){if(this.type==="number"&&(e==="Infinity"||e==="-Infinity")){this.displayedValue=e,this.previousEmittedValue=e;return}this.setValue({origin:"direct",previousValue:i,value:e==null||e==""?"":this.type==="number"?jd(e)?e:this.previousValue||"":e}),this.warnAboutInvalidNumberValue(e)}this.userChangedValue=!1}keyDownHandler(e){this.readOnly||this.disabled||e.defaultPrevented||(this.isClearable&&e.key==="Escape"&&(this.clearInputValue(e),e.preventDefault()),e.key==="Enter"&&D9(this)&&e.preventDefault())}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(e,i,r,s){const{value:n}=this;if(n==="Infinity"||n==="-Infinity")return;const o=e==="up"?1:-1,a=this.step==="any"?1:Math.abs(this.step||1),c=new Iw(n!==""?n:"0").add(`${a*o}`),d=()=>typeof r=="number"&&!isNaN(r)&&c.subtract(`${r}`).isNegative,h=()=>typeof i=="number"&&!isNaN(i)&&!c.subtract(`${i}`).isNegative,f=d()?`${r}`:h()?`${i}`:c.toString();this.setValue({committing:!0,nativeEvent:s,origin:"user",value:f})}clearInputValue(e){this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})}emitChangeIfUserModified(){this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))}inputBlurHandler(){window.clearInterval(this.nudgeNumberValueIntervalId),this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()}clickHandler(e){if(this.disabled)return;const i=e.composedPath();!i.includes(this.inputWrapperRef.value)||i.includes(this.actionWrapperRef.value)||this.setFocus()}inputFocusHandler(){this.calciteInternalInputFocus.emit()}inputInputHandler(e){this.disabled||this.readOnly||(this.type==="file"&&(this.files=this.childRef.value.files),this.setValue({nativeEvent:e,origin:"user",value:e.target.value}))}inputKeyDownHandler(e){this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()}inputNumberInputHandler(e){if(this.disabled||this.readOnly||this.value==="Infinity"||this.value==="-Infinity")return;const i=e.target.value;La.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const r=La.delocalize(i);e.inputType==="insertFromPaste"?(jd(r)||e.preventDefault(),this.setValue({nativeEvent:e,origin:"user",value:Awe(r)}),this.childNumberRef.value.value=this.displayedValue):this.setValue({nativeEvent:e,origin:"user",value:r})}inputNumberKeyDownHandler(e){if(this.type!=="number"||this.disabled||this.readOnly)return;if(this.value==="Infinity"||this.value==="-Infinity"){e.preventDefault(),(e.key==="Backspace"||e.key==="Delete")&&this.clearInputValue(e);return}if(e.key==="ArrowUp"){e.preventDefault(),this.nudgeNumberValue("up",e);return}if(e.key==="ArrowDown"){this.nudgeNumberValue("down",e);return}const i=[...TA,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(e.altKey||e.ctrlKey||e.metaKey)return;const r=e.shiftKey&&e.key==="Tab";if(i.includes(e.key)||r){e.key==="Enter"&&this.emitChangeIfUserModified();return}La.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(e.key===La.decimal&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.indexOf(La.decimal)===-1))&&(/[eE]/.test(e.key)&&(!this.value&&!this.childNumberRef.value.value||this.value&&!/[eE]/.test(this.childNumberRef.value.value))||e.key==="-"&&(!this.value&&!this.childNumberRef.value.value||this.value&&this.childNumberRef.value.value.split("-").length<=2)||e.preventDefault())}nudgeNumberValue(e,i){if(i instanceof KeyboardEvent&&i.repeat||this.type!=="number")return;const r=this.maxString?parseFloat(this.maxString):null,s=this.minString?parseFloat(this.minString):null,n=150;this.incrementOrDecrementNumberValue(e,r,s,i),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let o=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(o){o=!1;return}this.incrementOrDecrementNumberValue(e,r,s,i)},n)}numberButtonPointerUpAndOutHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}numberButtonPointerDownHandler(e){if(!bee(e))return;e.preventDefault();const i=e.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(i,e)}syncHiddenFormInput(e){vit(this.type,this,e)}setInputValue(e){const i=this.type==="number"?this.childNumberRef:this.childRef;i.value&&(i.value.value=e)}setPreviousEmittedValue(e){this.previousEmittedValue=this.normalizeValue(e)}normalizeValue(e){return this.type==="number"?jd(e)?e:"":e}setPreviousValue(e){this.previousValue=this.normalizeValue(e)}setValue({committing:e=!1,nativeEvent:i,origin:r,previousValue:s,value:n}){if(this.setPreviousValue(s??this.value),this.previousValueOrigin=r,this.type==="number"){La.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const o=this.previousValue?.length>n.length||this.value?.length>n.length,a=n.charAt(n.length-1)===".",l=a&&o?n:Fwe(n),c=n&&!l?jd(this.previousValue)?this.previousValue:"":l;let d=La.localize(c);r!=="connected"&&!a&&(d=Uwe(d,c,La)),this.displayedValue=a&&o?`${d}${La.decimal}`:d,this.userChangedValue=r==="user"&&this.value!==c,this.value=["-","."].includes(c)?"":c}else this.userChangedValue=r==="user"&&this.value!==n,this.value=n;r==="direct"&&(this.setInputValue(n),this.previousEmittedValue=n),i&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.displayedValue=this.type==="number"?La.localize(this.previousValue):this.previousValue):e&&this.emitChangeIfUserModified())}inputKeyUpHandler(){window.clearInterval(this.nudgeNumberValueIntervalId)}warnAboutInvalidNumberValue(e){this.type==="number"&&e&&!jd(e)&&console.warn(`The specified value "${e}" cannot be parsed, or is out of range.`)}render(){const e=Of(this.el),i=j`<div class=${O(Os.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`,r=j`<button .ariaLabel=${this.messages.clear} class=${O(Os.clearButton)} .disabled=${this.disabled||this.readOnly} @click=${this.clearInputValue} tabindex=-1 title=${this.messages.clear??ge} type=button><calcite-icon .icon=${JR.close} .scale=${Fr(this.scale)}></calcite-icon></button>`,s=j`<calcite-icon class=${O(Os.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${Fr(this.scale)}></calcite-icon>`,n=this.numberButtonType==="horizontal",o=j`<button aria-hidden=true class=${O({[Os.numberButtonItem]:!0,[Os.buttonItemHorizontal]:n})} data-adjustment=${BK.up} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${JR.chevronUp} .scale=${Fr(this.scale)}></calcite-icon></button>`,a=j`<button aria-hidden=true class=${O({[Os.numberButtonItem]:!0,[Os.buttonItemHorizontal]:n})} data-adjustment=${BK.down} .disabled=${this.disabled||this.readOnly} @pointerdown=${this.numberButtonPointerDownHandler} @pointerout=${this.numberButtonPointerUpAndOutHandler} @pointerup=${this.numberButtonPointerUpAndOutHandler} tabindex=-1 type=button><calcite-icon .icon=${JR.chevronDown} .scale=${Fr(this.scale)}></calcite-icon></button>`,l=j`<div class=${O(Os.numberButtonWrapper)}>${o}${a}</div>`,c=j`<div class=${O(Os.prefix)}>${this.prefixText}</div>`,d=j`<div class=${O(Os.suffix)}>${this.suffixText}</div>`,h=this.el.autofocus,f=this.el.enterKeyHint,m=this.el.inputMode,y=this.type==="number"?wt("localized-input",j`<input accept=${this.accept??ge} aria-errormessage=${WR.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${U$(this)} autocomplete=${this.autocomplete??ge} .autofocus=${h} value=${this.defaultValue??ge} .disabled=${this.disabled?!0:null} enterkeyhint=${f??ge} inputmode=${m??ge} maxlength=${this.maxLength??ge} minlength=${this.minLength??ge} .multiple=${this.multiple} name=${ge} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputNumberInputHandler} @keydown=${this.inputNumberKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??ge} placeholder=${(this.placeholder||"")??ge} .readOnly=${this.readOnly} .required=${this.required} type=text .value=${pB(this.displayedValue??"")} ${ct(this.childNumberRef)}>`):null,v=this.childElType==="input"?rg`input`:rg`textarea`,b=this.type!=="number"?u2`<${v} accept=${this.accept??ge} aria-errormessage=${WR.validationMessage} .ariaInvalid=${this.status==="invalid"} .ariaLabel=${U$(this)} autocomplete=${this.autocomplete??ge} .autofocus=${h} class=${O({[Os.editingEnabled]:this.editingEnabled,[Os.inlineChild]:!!this.inlineEditableEl})} .defaultValue=${this.defaultValue??""} .disabled=${this.disabled?!0:null} enterkeyhint=${f??ge} inputmode=${m??ge} max=${this.maxString??ge} maxlength=${this.maxLength??ge} min=${this.minString??ge} minlength=${this.minLength??ge} .multiple=${this.multiple} name=${this.name??ge} @blur=${this.inputBlurHandler} @focus=${this.inputFocusHandler} @input=${this.inputInputHandler} @keydown=${this.inputKeyDownHandler} @keyup=${this.inputKeyUpHandler} pattern=${this.pattern??ge} placeholder=${(this.placeholder||"")??ge} .readOnly=${this.readOnly} .required=${this.required?!0:null} spellcheck=${this.el.spellcheck??ge} step=${this.step??ge} tabindex=${(this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null)??ge} type=${this.type??ge} .value=${pB(this.value??"")} ${ct(this.childRef)}></${v}>`:null;return _n({disabled:this.disabled,children:j`${this.labelText&&vP({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${O({[Os.inputWrapper]:!0,[$A.rtl]:e==="rtl",[Os.hasSuffix]:this.suffixText,[Os.hasPrefix]:this.prefixText})} ${ct(this.inputWrapperRef)}>${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?a:null}${this.prefixText?c:null}<div class=${O(Os.wrapper)}>${y}${b}${this.isClearable?r:null}${this.requestedIcon?s:null}${this.loading?i:null}</div><div class=${O(Os.actionWrapper)} ${ct(this.actionWrapperRef)}><slot name=${bit.action}></slot></div>${this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?l:null}${this.suffixText?d:null}${this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null}${V9({component:this})}</div>${this.validationMessage&&this.status==="invalid"?fit({icon:this.validationIcon,id:WR.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}};dA.properties={displayedValue:[16,{},{state:!0}],slottedActionElDisabledInternally:[16,{},{state:!0}],accept:1,alignment:[3,{},{reflect:!0}],autocomplete:[0,{},{attribute:!1}],clearable:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],editingEnabled:[7,{},{reflect:!0,type:Boolean}],files:[0,{},{attribute:!1}],form:[3,{},{reflect:!0}],groupSeparator:[7,{},{reflect:!0,type:Boolean}],icon:[3,{converter:Sw},{reflect:!0}],iconFlipRtl:[7,{},{reflect:!0,type:Boolean}],label:1,labelText:1,loading:[7,{},{reflect:!0,type:Boolean}],localeFormat:[5,{},{type:Boolean}],max:[11,{},{reflect:!0,type:Number}],maxLength:[11,{},{reflect:!0,type:Number}],messageOverrides:[0,{},{attribute:!1}],min:[11,{},{reflect:!0,type:Number}],minLength:[11,{},{reflect:!0,type:Number}],multiple:[5,{},{type:Boolean}],name:[3,{},{reflect:!0}],numberButtonType:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],pattern:1,placeholder:1,prefixText:1,readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[3,{},{reflect:!0}],suffixText:1,type:[3,{},{reflect:!0}],validationIcon:[3,{converter:Sw},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},dA.styles=wit;let wP=dA;fi("calcite-input",wP);const _it=Object.freeze(Object.defineProperty({__proto__:null,Input:wP},Symbol.toStringTag,{value:"Module"}));function Vme(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(Vme).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function xit(t,e=att){if(t==null)return t;for(const i in t)if(e(t[i],i,t)===!1)break;return t}function Sit(t){return ltt(Vme(t))}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ZR=(t,e,i)=>{const r=Sit(e),s=new RegExp(r,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const n=(o,a,l)=>{if(o?.constant||o?.filterDisabled)return!0;let c=!1;return xit(o,(d,h)=>{typeof d=="function"||d==null||l&&!l.includes(h)||(Array.isArray(d)||typeof d=="object"&&d!==null?n(d,a)&&(c=!0):a.test(d)&&(c=!0))}),c};return t.filter(o=>n(o,s,i))};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Ume=()=>c2((t,e)=>{const i=new Set;return e.onDisconnected(()=>{i.forEach(r=>r.cancel())}),{add:r=>{[r].flat().forEach(s=>i.add(s))},resources:i}});/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const $it={container:"container"},Iit={search:"search"},kit=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`,ZS=class ZS extends it{constructor(){super(...arguments),this.cancelable=Ume()(this),this.filterDebounced=H9((e,i=!1,r)=>this.updateFiltered(ZR(this.items??[],e,this.filterProps),i,r),ZV.filter),this.textInput=wi(),this._value="",this.messages=xn(),this.focusSetter=ds()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=ve({cancelable:!1})}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(ZR(this.items??[],e,this.filterProps),!1,i)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(ZR(this.items??[],this.value,this.filterProps))}willUpdate(e){(e.has("items")&&(this.hasUpdated||this.items?.length>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){wn(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,r){this.filteredItems=e,i&&this.calciteFilterChange.emit(),r?.()}render(){const{disabled:e,scale:i}=this;return _n({disabled:e,children:j`<div class=${O($it.container)}><label><calcite-input clearable .disabled=${e} .icon=${Iit.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${ct(this.textInput)}></calcite-input></label></div>`})}};ZS.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1},ZS.shadowRootOptions={mode:"open",delegatesFocus:!0},ZS.styles=kit;let Bj=ZS;fi("calcite-filter",Bj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const zS="calcite-list",_P="calcite-list-item-group",ih="calcite-list-item";function qj(t){const e=t.parentElement?.closest(ih);e&&(e.open=!0,qj(e))}function Tit(t){const e=t.assignedElements({flatten:!0}),i=e.filter(n=>n?.matches(_P)).map(n=>Array.from(n.querySelectorAll(ih))).flat(),r=e.filter(n=>n?.matches(ih));return{lists:e.filter(n=>n?.matches(zS)),items:i.concat(r)}}function Eit(t){const e=t.assignedElements({flatten:!0}).filter(r=>r.matches(ih)),i=e.filter(r=>!r.filterHidden);e.forEach(r=>{const s=i.indexOf(r);r.setPosition=s===-1?void 0:s+1,r.setSize=s===-1?void 0:i.length})}function Mit(t,e=!1){const i=e?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item";return document.evaluate(i,t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}function Gk(t){return t.tagName==="CALCITE-LIST-ITEM"}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qK(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function Vu(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?qK(Object(i),!0).forEach(function(r){Cit(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qK(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function WE(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?WE=function(e){return typeof e}:WE=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WE(t)}function Cit(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function kh(){return kh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},kh.apply(this,arguments)}function Pit(t,e){if(t==null)return{};var i={},r=Object.keys(t),s,n;for(n=0;n<r.length;n++)s=r[n],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function Ait(t,e){if(t==null)return{};var i=Pit(t,e),r,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var Lit="1.15.6";function ph(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Fh=ph(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Z2=ph(/Edge/i),GK=ph(/firefox/i),jS=ph(/safari/i)&&!ph(/chrome/i)&&!ph(/android/i),Z9=ph(/iP(ad|od|hone)/i),Bme=ph(/chrome/i)&&ph(/android/i),qme={capture:!1,passive:!1};function Dt(t,e,i){t.addEventListener(e,i,!Fh&&qme)}function Lt(t,e,i){t.removeEventListener(e,i,!Fh&&qme)}function xP(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Gme(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Dl(t,e,i,r){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&xP(t,e):xP(t,e))||r&&t===i)return t;if(t===i)break}while(t=Gme(t))}return null}var HK=/\s+/g;function Go(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(HK," ").replace(" "+e+" "," ");t.className=(r+(i?" "+e:"")).replace(HK," ")}}function et(t,e,i){var r=t&&t.style;if(r){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=i+(typeof i=="string"?"":"px")}}function C0(t,e){var i="";if(typeof t=="string")i=t;else do{var r=et(t,"transform");r&&r!=="none"&&(i=r+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function Hme(t,e,i){if(t){var r=t.getElementsByTagName(e),s=0,n=r.length;if(i)for(;s<n;s++)i(r[s],s);return r}return[]}function Au(){var t=document.scrollingElement;return t||document.documentElement}function Kr(t,e,i,r,s){if(!(!t.getBoundingClientRect&&t!==window)){var n,o,a,l,c,d,h;if(t!==window&&t.parentNode&&t!==Au()?(n=t.getBoundingClientRect(),o=n.top,a=n.left,l=n.bottom,c=n.right,d=n.height,h=n.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,h=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Fh))do if(s&&s.getBoundingClientRect&&(et(s,"transform")!=="none"||i&&et(s,"position")!=="static")){var f=s.getBoundingClientRect();o-=f.top+parseInt(et(s,"border-top-width")),a-=f.left+parseInt(et(s,"border-left-width")),l=o+n.height,c=a+n.width;break}while(s=s.parentNode);if(r&&t!==window){var m=C0(s||t),y=m&&m.a,v=m&&m.d;m&&(o/=v,a/=y,h/=y,d/=v,l=o+d,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:d}}}function WK(t,e,i){for(var r=tf(t,!0),s=Kr(t)[e];r;){var n=Kr(r)[i],o=void 0;if(o=s>=n,!o)return r;if(r===Au())break;r=tf(r,!1)}return!1}function i_(t,e,i,r){for(var s=0,n=0,o=t.children;n<o.length;){if(o[n].style.display!=="none"&&o[n]!==tt.ghost&&(r||o[n]!==tt.dragged)&&Dl(o[n],i.draggable,t,!1)){if(s===e)return o[n];s++}n++}return null}function Y9(t,e){for(var i=t.lastElementChild;i&&(i===tt.ghost||et(i,"display")==="none"||e&&!xP(i,e));)i=i.previousElementSibling;return i||null}function Da(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==tt.clone&&(!e||xP(t,e))&&i++;return i}function JK(t){var e=0,i=0,r=Au();if(t)do{var s=C0(t),n=s.a,o=s.d;e+=t.scrollLeft*n,i+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,i]}function Oit(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[i][r])return Number(i)}return-1}function tf(t,e){if(!t||!t.getBoundingClientRect)return Au();var i=t,r=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=et(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Au();if(r||e)return i;r=!0}}while(i=i.parentNode);return Au()}function Rit(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function YR(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var VS;function Wme(t,e){return function(){if(!VS){var i=arguments,r=this;i.length===1?t.call(r,i[0]):t.apply(r,i),VS=setTimeout(function(){VS=void 0},e)}}}function Nit(){clearTimeout(VS),VS=void 0}function Jme(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Zme(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Yme(t,e,i){var r={};return Array.from(t.children).forEach(function(s){var n,o,a,l;if(!(!Dl(s,e.draggable,t,!1)||s.animated||s===i)){var c=Kr(s);r.left=Math.min((n=r.left)!==null&&n!==void 0?n:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var wo="Sortable"+new Date().getTime();function Dit(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(et(s,"display")==="none"||s===tt.ghost)){t.push({target:s,rect:Kr(s)});var n=Vu({},t[t.length-1].rect);if(s.thisAnimationDuration){var o=C0(s,!0);o&&(n.top-=o.f,n.left-=o.e)}s.fromRect=n}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Oit(t,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var n=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,h=Kr(c),f=c.prevFromRect,m=c.prevToRect,y=a.rect,v=C0(c,!0);v&&(h.top-=v.f,h.left-=v.e),c.toRect=h,c.thisAnimationDuration&&YR(f,h)&&!YR(d,h)&&(y.top-h.top)/(y.left-h.left)===(d.top-h.top)/(d.left-h.left)&&(l=zit(y,f,m,s.options)),YR(h,d)||(c.prevFromRect=d,c.prevToRect=h,l||(l=s.options.animation),s.animate(c,y,h,l)),l&&(n=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),n?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,s,n,o){if(o){et(r,"transition",""),et(r,"transform","");var a=C0(this.el),l=a&&a.a,c=a&&a.d,d=(s.left-n.left)/(l||1),h=(s.top-n.top)/(c||1);r.animatingX=!!d,r.animatingY=!!h,et(r,"transform","translate3d("+d+"px,"+h+"px,0)"),this.forRepaintDummy=Fit(r),et(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),et(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){et(r,"transition",""),et(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Fit(t){return t.offsetWidth}function zit(t,e,i,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*r.animation}var Cv=[],KR={initializeByDefault:!0},Y2={mount:function(e){for(var i in KR)KR.hasOwnProperty(i)&&!(i in e)&&(e[i]=KR[i]);Cv.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Cv.push(e)},pluginEvent:function(e,i,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var n=e+"Global";Cv.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][n]&&i[o.pluginName][n](Vu({sortable:i},r)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Vu({sortable:i},r)))})},initializePlugins:function(e,i,r,s){Cv.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,i,e.options);c.sortable=e,c.options=e.options,e[l]=c,kh(r,c.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var o=this.modifyOption(e,n,e.options[n]);typeof o<"u"&&(e.options[n]=o)}},getEventProperties:function(e,i){var r={};return Cv.forEach(function(s){typeof s.eventProperties=="function"&&kh(r,s.eventProperties.call(i[s.pluginName],e))}),r},modifyOption:function(e,i,r){var s;return Cv.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[i]=="function"&&(s=n.optionListeners[i].call(e[n.pluginName],r))}),s}};function jit(t){var e=t.sortable,i=t.rootEl,r=t.name,s=t.targetEl,n=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,h=t.newDraggableIndex,f=t.originalEvent,m=t.putSortable,y=t.extraEventProperties;if(e=e||i&&i[wo],!!e){var v,b=e.options,w="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Fh&&!Z2?v=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(r,!0,!0)),v.to=o||i,v.from=a||i,v.item=s||i,v.clone=n,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=d,v.newDraggableIndex=h,v.originalEvent=f,v.pullMode=m?m.lastPutMode:void 0;var x=Vu(Vu({},y),Y2.getEventProperties(r,e));for(var S in x)v[S]=x[S];i&&i.dispatchEvent(v),b[w]&&b[w].call(e,v)}}var Vit=["evt"],Xn=function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,n=Ait(r,Vit);Y2.pluginEvent.bind(tt)(e,i,Vu({dragEl:be,parentEl:yr,ghostEl:ht,rootEl:qi,nextEl:Gm,lastDownEl:JE,cloneEl:Qi,cloneHidden:zp,dragStarted:Bx,putSortable:Fs,activeSortable:tt.active,originalEvent:s,oldIndex:s0,oldDraggableIndex:US,newIndex:Ko,newDraggableIndex:Pp,hideGhostForTarget:eye,unhideGhostForTarget:tye,cloneNowHidden:function(){zp=!0},cloneNowShown:function(){zp=!1},dispatchSortableEvent:function(a){En({sortable:i,name:a,originalEvent:s})}},n))};function En(t){jit(Vu({putSortable:Fs,cloneEl:Qi,targetEl:be,rootEl:qi,oldIndex:s0,oldDraggableIndex:US,newIndex:Ko,newDraggableIndex:Pp},t))}var be,yr,ht,qi,Gm,JE,Qi,zp,s0,Ko,US,Pp,Hk,Fs,zb=!1,SP=!1,$P=[],am,ml,XR,QR,ZK,YK,Bx,Pv,BS,qS=!1,Wk=!1,ZE,en,eN=[],Gj=!1,IP=[],dL=typeof document<"u",Jk=Z9,KK=Z2||Fh?"cssFloat":"float",Uit=dL&&!Bme&&!Z9&&"draggable"in document.createElement("div"),Kme=function(){if(dL){if(Fh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Xme=function(e,i){var r=et(e),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),n=i_(e,0,i),o=i_(e,1,i),a=n&&et(n),l=o&&et(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Kr(n).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Kr(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return n&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&r[KK]==="none"||o&&r[KK]==="none"&&c+d>s)?"vertical":"horizontal"},Bit=function(e,i,r){var s=r?e.left:e.top,n=r?e.right:e.bottom,o=r?e.width:e.height,a=r?i.left:i.top,l=r?i.right:i.bottom,c=r?i.width:i.height;return s===a||n===l||s+o/2===a+c/2},qit=function(e,i){var r;return $P.some(function(s){var n=s[wo].options.emptyInsertThreshold;if(!(!n||Y9(s))){var o=Kr(s),a=e>=o.left-n&&e<=o.right+n,l=i>=o.top-n&&i<=o.bottom+n;if(a&&l)return r=s}}),r},Qme=function(e){function i(n,o){return function(a,l,c,d){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(n==null&&(o||h))return!0;if(n==null||n===!1)return!1;if(o&&n==="clone")return n;if(typeof n=="function")return i(n(a,l,c,d),o)(a,l,c,d);var f=(o?a:l).options.group.name;return n===!0||typeof n=="string"&&n===f||n.join&&n.indexOf(f)>-1}}var r={},s=e.group;(!s||WE(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=i(s.pull,!0),r.checkPut=i(s.put),r.revertClone=s.revertClone,e.group=r},eye=function(){!Kme&&ht&&et(ht,"display","none")},tye=function(){!Kme&&ht&&et(ht,"display","")};dL&&!Bme&&document.addEventListener("click",function(t){if(SP)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),SP=!1,!1},!0);var lm=function(e){if(be){e=e.touches?e.touches[0]:e;var i=qit(e.clientX,e.clientY);if(i){var r={};for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);r.target=r.rootEl=i,r.preventDefault=void 0,r.stopPropagation=void 0,i[wo]._onDragOver(r)}}},Git=function(e){be&&be.parentNode[wo]._isOutsideThisEl(e.target)};function tt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=kh({},e),t[wo]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Xme(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:tt.supportPointer!==!1&&"PointerEvent"in window&&(!jS||Z9),emptyInsertThreshold:5};Y2.initializePlugins(this,t,i);for(var r in i)!(r in e)&&(e[r]=i[r]);Qme(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Uit,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Dt(t,"pointerdown",this._onTapStart):(Dt(t,"mousedown",this._onTapStart),Dt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Dt(t,"dragover",this),Dt(t,"dragenter",this)),$P.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),kh(this,Dit())}tt.prototype={constructor:tt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Pv=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,be):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,r=this.el,s=this.options,n=s.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=s.filter;if(Qit(r),!be&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&jS&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Dl(l,s.draggable,r,!1),!(l&&l.animated)&&JE!==l)){if(s0=Da(l),US=Da(l,s.draggable),typeof d=="function"){if(d.call(this,e,l,this)){En({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Xn("filter",i,{evt:e}),n&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(h){if(h=Dl(c,h.trim(),r,!1),h)return En({sortable:i,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Xn("filter",i,{evt:e}),!0}),d)){n&&e.preventDefault();return}s.handle&&!Dl(c,s.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,i,r){var s=this,n=s.el,o=s.options,a=n.ownerDocument,l;if(r&&!be&&r.parentNode===n){var c=Kr(r);if(qi=n,be=r,yr=be.parentNode,Gm=be.nextSibling,JE=r,Hk=o.group,tt.dragged=be,am={target:be,clientX:(i||e).clientX,clientY:(i||e).clientY},ZK=am.clientX-c.left,YK=am.clientY-c.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,be.style["will-change"]="all",l=function(){if(Xn("delayEnded",s,{evt:e}),tt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!GK&&s.nativeDraggable&&(be.draggable=!0),s._triggerDragStart(e,i),En({sortable:s,name:"choose",originalEvent:e}),Go(be,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Hme(be,d.trim(),tN)}),Dt(a,"dragover",lm),Dt(a,"mousemove",lm),Dt(a,"touchmove",lm),o.supportPointer?(Dt(a,"pointerup",s._onDrop),!this.nativeDraggable&&Dt(a,"pointercancel",s._onDrop)):(Dt(a,"mouseup",s._onDrop),Dt(a,"touchend",s._onDrop),Dt(a,"touchcancel",s._onDrop)),GK&&this.nativeDraggable&&(this.options.touchStartThreshold=4,be.draggable=!0),Xn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Z2||Fh))){if(tt.eventCanceled){this._onDrop();return}o.supportPointer?(Dt(a,"pointerup",s._disableDelayedDrag),Dt(a,"pointercancel",s._disableDelayedDrag)):(Dt(a,"mouseup",s._disableDelayedDrag),Dt(a,"touchend",s._disableDelayedDrag),Dt(a,"touchcancel",s._disableDelayedDrag)),Dt(a,"mousemove",s._delayedDragTouchMoveHandler),Dt(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&Dt(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){be&&tN(be),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Lt(e,"mouseup",this._disableDelayedDrag),Lt(e,"touchend",this._disableDelayedDrag),Lt(e,"touchcancel",this._disableDelayedDrag),Lt(e,"pointerup",this._disableDelayedDrag),Lt(e,"pointercancel",this._disableDelayedDrag),Lt(e,"mousemove",this._delayedDragTouchMoveHandler),Lt(e,"touchmove",this._delayedDragTouchMoveHandler),Lt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Dt(document,"pointermove",this._onTouchMove):i?Dt(document,"touchmove",this._onTouchMove):Dt(document,"mousemove",this._onTouchMove):(Dt(be,"dragend",this),Dt(qi,"dragstart",this._onDragStart));try{document.selection?YE(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(zb=!1,qi&&be){Xn("dragStarted",this,{evt:i}),this.nativeDraggable&&Dt(document,"dragover",Git);var r=this.options;!e&&Go(be,r.dragClass,!1),Go(be,r.ghostClass,!0),tt.active=this,e&&this._appendGhost(),En({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(ml){this._lastX=ml.clientX,this._lastY=ml.clientY,eye();for(var e=document.elementFromPoint(ml.clientX,ml.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ml.clientX,ml.clientY),e!==i);)i=e;if(be.parentNode[wo]._isOutsideThisEl(e),i)do{if(i[wo]){var r=void 0;if(r=i[wo]._onDragOver({clientX:ml.clientX,clientY:ml.clientY,target:e,rootEl:i}),r&&!this.options.dragoverBubble)break}e=i}while(i=Gme(i));tye()}},_onTouchMove:function(e){if(am){var i=this.options,r=i.fallbackTolerance,s=i.fallbackOffset,n=e.touches?e.touches[0]:e,o=ht&&C0(ht,!0),a=ht&&o&&o.a,l=ht&&o&&o.d,c=Jk&&en&&JK(en),d=(n.clientX-am.clientX+s.x)/(a||1)+(c?c[0]-eN[0]:0)/(a||1),h=(n.clientY-am.clientY+s.y)/(l||1)+(c?c[1]-eN[1]:0)/(l||1);if(!tt.active&&!zb){if(r&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ht){o?(o.e+=d-(XR||0),o.f+=h-(QR||0)):o={a:1,b:0,c:0,d:1,e:d,f:h};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");et(ht,"webkitTransform",f),et(ht,"mozTransform",f),et(ht,"msTransform",f),et(ht,"transform",f),XR=d,QR=h,ml=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ht){var e=this.options.fallbackOnBody?document.body:qi,i=Kr(be,!0,Jk,!0,e),r=this.options;if(Jk){for(en=e;et(en,"position")==="static"&&et(en,"transform")==="none"&&en!==document;)en=en.parentNode;en!==document.body&&en!==document.documentElement?(en===document&&(en=Au()),i.top+=en.scrollTop,i.left+=en.scrollLeft):en=Au(),eN=JK(en)}ht=be.cloneNode(!0),Go(ht,r.ghostClass,!1),Go(ht,r.fallbackClass,!0),Go(ht,r.dragClass,!0),et(ht,"transition",""),et(ht,"transform",""),et(ht,"box-sizing","border-box"),et(ht,"margin",0),et(ht,"top",i.top),et(ht,"left",i.left),et(ht,"width",i.width),et(ht,"height",i.height),et(ht,"opacity","0.8"),et(ht,"position",Jk?"absolute":"fixed"),et(ht,"zIndex","100000"),et(ht,"pointerEvents","none"),tt.ghost=ht,e.appendChild(ht),et(ht,"transform-origin",ZK/parseInt(ht.style.width)*100+"% "+YK/parseInt(ht.style.height)*100+"%")}},_onDragStart:function(e,i){var r=this,s=e.dataTransfer,n=r.options;if(Xn("dragStart",this,{evt:e}),tt.eventCanceled){this._onDrop();return}Xn("setupClone",this),tt.eventCanceled||(Qi=Zme(be),Qi.removeAttribute("id"),Qi.draggable=!1,Qi.style["will-change"]="",this._hideClone(),Go(Qi,this.options.chosenClass,!1),tt.clone=Qi),r.cloneId=YE(function(){Xn("clone",r),!tt.eventCanceled&&(r.options.removeCloneOnHide||qi.insertBefore(Qi,be),r._hideClone(),En({sortable:r,name:"clone"}))}),!i&&Go(be,n.dragClass,!0),i?(SP=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Lt(document,"mouseup",r._onDrop),Lt(document,"touchend",r._onDrop),Lt(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",n.setData&&n.setData.call(r,s,be)),Dt(document,"drop",r),et(be,"transform","translateZ(0)")),zb=!0,r._dragStartId=YE(r._dragStarted.bind(r,i,e)),Dt(document,"selectstart",r),Bx=!0,window.getSelection().removeAllRanges(),jS&&et(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,r=e.target,s,n,o,a=this.options,l=a.group,c=tt.active,d=Hk===l,h=a.sort,f=Fs||c,m,y=this,v=!1;if(Gj)return;function b(re,me){Xn(re,y,Vu({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:o,dragRect:s,targetRect:n,canSort:h,fromSortable:f,target:r,completed:x,onMove:function(Ce,at){return Zk(qi,i,be,s,Ce,Kr(Ce),e,at)},changed:S},me))}function w(){b("dragOverAnimationCapture"),y.captureAnimationState(),y!==f&&f.captureAnimationState()}function x(re){return b("dragOverCompleted",{insertion:re}),re&&(d?c._hideClone():c._showClone(y),y!==f&&(Go(be,Fs?Fs.options.ghostClass:c.options.ghostClass,!1),Go(be,a.ghostClass,!0)),Fs!==y&&y!==tt.active?Fs=y:y===tt.active&&Fs&&(Fs=null),f===y&&(y._ignoreWhileAnimating=r),y.animateAll(function(){b("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===be&&!be.animated||r===i&&!r.animated)&&(Pv=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(be.parentNode[wo]._isOutsideThisEl(e.target),!re&&lm(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function S(){Ko=Da(be),Pp=Da(be,a.draggable),En({sortable:y,name:"change",toEl:i,newIndex:Ko,newDraggableIndex:Pp,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Dl(r,a.draggable,i,!0),b("dragOver"),tt.eventCanceled)return v;if(be.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||y._ignoreWhileAnimating===r)return x(!1);if(SP=!1,c&&!a.disabled&&(d?h||(o=yr!==qi):Fs===this||(this.lastPutMode=Hk.checkPull(this,c,be,e))&&l.checkPut(this,c,be,e))){if(m=this._getDirection(e,r)==="vertical",s=Kr(be),b("dragOverValid"),tt.eventCanceled)return v;if(o)return yr=qi,w(),this._hideClone(),b("revert"),tt.eventCanceled||(Gm?qi.insertBefore(be,Gm):qi.appendChild(be)),x(!0);var $=Y9(i,a.draggable);if(!$||Zit(e,m,this)&&!$.animated){if($===be)return x(!1);if($&&i===e.target&&(r=$),r&&(n=Kr(r)),Zk(qi,i,be,s,r,n,e,!!r)!==!1)return w(),$&&$.nextSibling?i.insertBefore(be,$.nextSibling):i.appendChild(be),yr=i,S(),x(!0)}else if($&&Jit(e,m,this)){var T=i_(i,0,a,!0);if(T===be)return x(!1);if(r=T,n=Kr(r),Zk(qi,i,be,s,r,n,e,!1)!==!1)return w(),i.insertBefore(be,T),yr=i,S(),x(!0)}else if(r.parentNode===i){n=Kr(r);var C=0,L,N=be.parentNode!==i,D=!Bit(be.animated&&be.toRect||s,r.animated&&r.toRect||n,m),F=m?"top":"left",W=WK(r,"top","top")||WK(be,"top","top"),Z=W?W.scrollTop:void 0;Pv!==r&&(L=n[F],qS=!1,Wk=!D&&a.invertSwap||N),C=Yit(e,r,n,m,D?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Wk,Pv===r);var V;if(C!==0){var A=Da(be);do A-=C,V=yr.children[A];while(V&&(et(V,"display")==="none"||V===ht))}if(C===0||V===r)return x(!1);Pv=r,BS=C;var q=r.nextElementSibling,J=!1;J=C===1;var ee=Zk(qi,i,be,s,r,n,e,J);if(ee!==!1)return(ee===1||ee===-1)&&(J=ee===1),Gj=!0,setTimeout(Wit,30),w(),J&&!q?i.appendChild(be):r.parentNode.insertBefore(be,J?q:r),W&&Jme(W,0,Z-W.scrollTop),yr=be.parentNode,L!==void 0&&!Wk&&(ZE=Math.abs(L-Kr(r)[F])),S(),x(!0)}if(i.contains(be))return x(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Lt(document,"mousemove",this._onTouchMove),Lt(document,"touchmove",this._onTouchMove),Lt(document,"pointermove",this._onTouchMove),Lt(document,"dragover",lm),Lt(document,"mousemove",lm),Lt(document,"touchmove",lm)},_offUpEvents:function(){var e=this.el.ownerDocument;Lt(e,"mouseup",this._onDrop),Lt(e,"touchend",this._onDrop),Lt(e,"pointerup",this._onDrop),Lt(e,"pointercancel",this._onDrop),Lt(e,"touchcancel",this._onDrop),Lt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,r=this.options;if(Ko=Da(be),Pp=Da(be,r.draggable),Xn("drop",this,{evt:e}),yr=be&&be.parentNode,Ko=Da(be),Pp=Da(be,r.draggable),tt.eventCanceled){this._nulling();return}zb=!1,Wk=!1,qS=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hj(this.cloneId),Hj(this._dragStartId),this.nativeDraggable&&(Lt(document,"drop",this),Lt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),jS&&et(document.body,"user-select",""),et(be,"transform",""),e&&(Bx&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ht&&ht.parentNode&&ht.parentNode.removeChild(ht),(qi===yr||Fs&&Fs.lastPutMode!=="clone")&&Qi&&Qi.parentNode&&Qi.parentNode.removeChild(Qi),be&&(this.nativeDraggable&&Lt(be,"dragend",this),tN(be),be.style["will-change"]="",Bx&&!zb&&Go(be,Fs?Fs.options.ghostClass:this.options.ghostClass,!1),Go(be,this.options.chosenClass,!1),En({sortable:this,name:"unchoose",toEl:yr,newIndex:null,newDraggableIndex:null,originalEvent:e}),qi!==yr?(Ko>=0&&(En({rootEl:yr,name:"add",toEl:yr,fromEl:qi,originalEvent:e}),En({sortable:this,name:"remove",toEl:yr,originalEvent:e}),En({rootEl:yr,name:"sort",toEl:yr,fromEl:qi,originalEvent:e}),En({sortable:this,name:"sort",toEl:yr,originalEvent:e})),Fs&&Fs.save()):Ko!==s0&&Ko>=0&&(En({sortable:this,name:"update",toEl:yr,originalEvent:e}),En({sortable:this,name:"sort",toEl:yr,originalEvent:e})),tt.active&&((Ko==null||Ko===-1)&&(Ko=s0,Pp=US),En({sortable:this,name:"end",toEl:yr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Xn("nulling",this),qi=be=yr=ht=Gm=Qi=JE=zp=am=ml=Bx=Ko=Pp=s0=US=Pv=BS=Fs=Hk=tt.dragged=tt.ghost=tt.clone=tt.active=null,IP.forEach(function(e){e.checked=!0}),IP.length=XR=QR=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":be&&(this._onDragOver(e),Hit(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,r=this.el.children,s=0,n=r.length,o=this.options;s<n;s++)i=r[s],Dl(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||Xit(i));return e},sort:function(e,i){var r={},s=this.el;this.toArray().forEach(function(n,o){var a=s.children[o];Dl(a,this.options.draggable,s,!1)&&(r[n]=a)},this),i&&this.captureAnimationState(),e.forEach(function(n){r[n]&&(s.removeChild(r[n]),s.appendChild(r[n]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Dl(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var r=this.options;if(i===void 0)return r[e];var s=Y2.modifyOption(this,e,i);typeof s<"u"?r[e]=s:r[e]=i,e==="group"&&Qme(r)},destroy:function(){Xn("destroy",this);var e=this.el;e[wo]=null,Lt(e,"mousedown",this._onTapStart),Lt(e,"touchstart",this._onTapStart),Lt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Lt(e,"dragover",this),Lt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$P.splice($P.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!zp){if(Xn("hideClone",this),tt.eventCanceled)return;et(Qi,"display","none"),this.options.removeCloneOnHide&&Qi.parentNode&&Qi.parentNode.removeChild(Qi),zp=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(zp){if(Xn("showClone",this),tt.eventCanceled)return;be.parentNode==qi&&!this.options.group.revertClone?qi.insertBefore(Qi,be):Gm?qi.insertBefore(Qi,Gm):qi.appendChild(Qi),this.options.group.revertClone&&this.animate(be,Qi),et(Qi,"display",""),zp=!1}}};function Hit(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Zk(t,e,i,r,s,n,o,a){var l,c=t[wo],d=c.options.onMove,h;return window.CustomEvent&&!Fh&&!Z2?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=r,l.related=s||e,l.relatedRect=n||Kr(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(h=d.call(c,l,o)),h}function tN(t){t.draggable=!1}function Wit(){Gj=!1}function Jit(t,e,i){var r=Kr(i_(i.el,0,i.options,!0)),s=Yme(i.el,i.options,ht),n=10;return e?t.clientX<s.left-n||t.clientY<r.top&&t.clientX<r.right:t.clientY<s.top-n||t.clientY<r.bottom&&t.clientX<r.left}function Zit(t,e,i){var r=Kr(Y9(i.el,i.options.draggable)),s=Yme(i.el,i.options,ht),n=10;return e?t.clientX>s.right+n||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>s.bottom+n||t.clientX>r.right&&t.clientY>r.top}function Yit(t,e,i,r,s,n,o,a){var l=r?t.clientY:t.clientX,c=r?i.height:i.width,d=r?i.top:i.left,h=r?i.bottom:i.right,f=!1;if(!o){if(a&&ZE<c*s){if(!qS&&(BS===1?l>d+c*n/2:l<h-c*n/2)&&(qS=!0),qS)f=!0;else if(BS===1?l<d+ZE:l>h-ZE)return-BS}else if(l>d+c*(1-s)/2&&l<h-c*(1-s)/2)return Kit(e)}return f=f||o,f&&(l<d+c*n/2||l>h-c*n/2)?l>d+c/2?1:-1:0}function Kit(t){return Da(be)<Da(t)?1:-1}function Xit(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,r=0;i--;)r+=e.charCodeAt(i);return r.toString(36)}function Qit(t){IP.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var r=e[i];r.checked&&IP.push(r)}}function YE(t){return setTimeout(t,0)}function Hj(t){return clearTimeout(t)}dL&&Dt(document,"touchmove",function(t){(tt.active||zb)&&t.cancelable&&t.preventDefault()});tt.utils={on:Dt,off:Lt,css:et,find:Hme,is:function(e,i){return!!Dl(e,i,e,!1)},extend:Rit,throttle:Wme,closest:Dl,toggleClass:Go,clone:Zme,index:Da,nextTick:YE,cancelNextTick:Hj,detectDirection:Xme,getChild:i_,expando:wo};tt.get=function(t){return t[wo]};tt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(tt.utils=Vu(Vu({},tt.utils),r.utils)),Y2.mount(r)})};tt.create=function(t,e){return new tt(t,e)};tt.version=Lit;var Wr=[],qx,Wj,Jj=!1,iN,rN,kP,Gx;function ert(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var r=i.originalEvent;this.sortable.nativeDraggable?Dt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Dt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Dt(document,"touchmove",this._handleFallbackAutoScroll):Dt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var r=i.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Lt(document,"dragover",this._handleAutoScroll):(Lt(document,"pointermove",this._handleFallbackAutoScroll),Lt(document,"touchmove",this._handleFallbackAutoScroll),Lt(document,"mousemove",this._handleFallbackAutoScroll)),XK(),KE(),Nit()},nulling:function(){kP=Wj=qx=Jj=Gx=iN=rN=null,Wr.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,r){var s=this,n=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(n,o);if(kP=i,r||this.options.forceAutoScrollFallback||Z2||Fh||jS){sN(i,this.options,a,r);var l=tf(a,!0);Jj&&(!Gx||n!==iN||o!==rN)&&(Gx&&XK(),Gx=setInterval(function(){var c=tf(document.elementFromPoint(n,o),!0);c!==l&&(l=c,KE()),sN(i,s.options,c,r)},10),iN=n,rN=o)}else{if(!this.options.bubbleScroll||tf(a,!0)===Au()){KE();return}sN(i,this.options,tf(a,!1),!1)}}},kh(t,{pluginName:"scroll",initializeByDefault:!0})}function KE(){Wr.forEach(function(t){clearInterval(t.pid)}),Wr=[]}function XK(){clearInterval(Gx)}var sN=Wme(function(t,e,i,r){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Au(),c=!1,d;Wj!==i&&(Wj=i,KE(),qx=e.scroll,d=e.scrollFn,qx===!0&&(qx=tf(i,!0)));var h=0,f=qx;do{var m=f,y=Kr(m),v=y.top,b=y.bottom,w=y.left,x=y.right,S=y.width,$=y.height,T=void 0,C=void 0,L=m.scrollWidth,N=m.scrollHeight,D=et(m),F=m.scrollLeft,W=m.scrollTop;m===l?(T=S<L&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),C=$<N&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(T=S<L&&(D.overflowX==="auto"||D.overflowX==="scroll"),C=$<N&&(D.overflowY==="auto"||D.overflowY==="scroll"));var Z=T&&(Math.abs(x-s)<=o&&F+S<L)-(Math.abs(w-s)<=o&&!!F),V=C&&(Math.abs(b-n)<=o&&W+$<N)-(Math.abs(v-n)<=o&&!!W);if(!Wr[h])for(var A=0;A<=h;A++)Wr[A]||(Wr[A]={});(Wr[h].vx!=Z||Wr[h].vy!=V||Wr[h].el!==m)&&(Wr[h].el=m,Wr[h].vx=Z,Wr[h].vy=V,clearInterval(Wr[h].pid),(Z!=0||V!=0)&&(c=!0,Wr[h].pid=setInterval(function(){r&&this.layer===0&&tt.active._onTouchMove(kP);var q=Wr[this.layer].vy?Wr[this.layer].vy*a:0,J=Wr[this.layer].vx?Wr[this.layer].vx*a:0;typeof d=="function"&&d.call(tt.dragged.parentNode[wo],J,q,t,kP,Wr[this.layer].el)!=="continue"||Jme(Wr[this.layer].el,J,q)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&f!==l&&(f=tf(f,!1)));Jj=c}},30),iye=function(e){var i=e.originalEvent,r=e.putSortable,s=e.dragEl,n=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var c=r||n;a();var d=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,h=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function K9(){}K9.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=i_(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),r&&r.animateAll()},drop:iye};kh(K9,{pluginName:"revertOnSpill"});function X9(){}X9.prototype={onSpill:function(e){var i=e.dragEl,r=e.putSortable,s=r||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:iye};kh(X9,{pluginName:"removeOnSpill"});tt.mount(new ert);tt.mount(X9,K9);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const hL=new Set,trt={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function irt(t){if(sye(t))return;rye(t),hL.add(t);const e="id",{group:i,handleSelector:r,dragSelector:s,sortDisabled:n}=t;t.sortable=tt.create(t.el,{dataIdAttr:e,swapThreshold:.5,...trt,...!!s&&{draggable:s},...!!i&&{sort:!n,group:{name:i,...!!t.canPull&&{pull:(o,a,l,{newDraggableIndex:c,oldDraggableIndex:d})=>t.canPull({toEl:o.el,fromEl:a.el,dragEl:l,newIndex:c,oldIndex:d})},...!!t.canPut&&{put:(o,a,l,{newDraggableIndex:c,oldDraggableIndex:d})=>t.canPut({toEl:o.el,fromEl:a.el,dragEl:l,newIndex:c,oldIndex:d})}}},onMove:({from:o,dragged:a,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:o,dragEl:a,toEl:l,relatedEl:c})},handle:r,filter:`${r}[disabled]`,onStart:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:d})=>{Zj.active=!0,rrt(),t.onDragStart({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:d})},onEnd:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:d})=>{Zj.active=!1,srt(),t.onDragEnd({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:d})},onSort:({from:o,item:a,to:l,newDraggableIndex:c,oldDraggableIndex:d})=>{t.onDragSort({fromEl:o,dragEl:a,toEl:l,newIndex:c,oldIndex:d})}})}function rye(t){sye(t)||(hL.delete(t),t.sortable?.destroy(),t.sortable=null)}const Zj={active:!1};function sye(t){return t.dragEnabled&&Zj.active}function rrt(){Array.from(hL).forEach(t=>t.onGlobalDragStart())}function srt(){Array.from(hL).forEach(t=>t.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const Qu={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},nN={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},nrt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,ort=`${_P}, ${ih}`,hA=class hA extends it{constructor(){super(),this.dragSelector=ih,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=Ya("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=Ume()(this),this.updateListItemsDebounced=H9(this.updateListItems,ZV.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=xn({blocking:!0}),this.focusSetter=ds()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=ve({cancelable:!1}),this.calciteListChange=ve({cancelable:!1}),this.calciteListDragEnd=ve({cancelable:!1}),this.calciteListDragStart=ve({cancelable:!1}),this.calciteListFilter=ve({cancelable:!1}),this.calciteListMoveHalt=ve({cancelable:!1}),this.calciteListOrderChange=ve({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),rye(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:r,dragEnabled:s,el:n,filterEl:o,displayMode:a,scale:l,sortDisabled:c,sortHandleMenuItems:d}=this,h=Array.from(this.el.querySelectorAll(ih)),f=n,m=Array.from(f.children).filter(Gk);if(h.forEach(y=>{y.scale=l,y.selectionAppearance=e,y.selectionMode=i,y.interactionMode=r,y.closest(zS)===n&&(y.moveToItems=d.filter(v=>this.validateSortMenuItem({type:"move",fromEl:f,toEl:v.element,dragEl:y,newIndex:0,oldIndex:m.indexOf(y)})),y.addToItems=this.sortHandleMenuItems.filter(v=>this.validateSortMenuItem({type:"add",fromEl:f,toEl:v.element,dragEl:y,newIndex:0,oldIndex:m.indexOf(y)})),y.dragHandle=s,y.displayMode=a,y.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=h,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(y=>!y.closed&&!y.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(y=>!y.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,s=i.findIndex(n=>n.active)-1;i[s]&&this.focusRow(i[s])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r}=this;r.forEach(s=>{s.active=s===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:r,selectionMode:s}=this;i.selected&&(s==="single"||s==="single-persist")&&r.forEach(n=>n.selected=n===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:r}=e,{focusableItems:s,lastSelectedInfo:n}=this,o=i;if(r.selectMultiple&&n){const a=s.indexOf(o),l=s.indexOf(n.selectedItem),c=Math.min(l,a),d=Math.max(l,a);s.slice(c,d+1).forEach(h=>h.selected=n.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&Eit(i),irt(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){this.parentListEl=this.el.parentElement?.closest(zS)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(_P))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=Ft(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=Ft(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=Ft(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:r}){const s=!r.has(e)&&!i.includes(e);e.filterHidden=s;const n=e.parentElement.closest(ort);n&&(s||r.add(n),this.filterElements({el:n,filteredItems:i,visibleParents:r}))}allParentListItemsExpanded(e){const i=e.parentElement?.closest(ih);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:r,filterPredicate:s}=this,n=e?.filter(l=>e.every(c=>c===l||!l.contains(c))),o=s?e.filter(s):r?i.map(l=>l.el):e||[],a=new WeakSet;n.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:a})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:r}=this;e&&(e.value=i,e.filterProps=r,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(r=>r.contains(e)).map(r=>r.heading)}updateGroupItems(){const{el:e,group:i,scale:r}=this,s=a2(e),n=i?Array.from(s.querySelectorAll(`${zS}[group="${i}"]`)).filter(a=>!a.disabled&&a.dragEnabled):[];this.sortHandleMenuItems=n.map(a=>({element:a,label:a.label??a.id,id:Lf()})),Array.from(this.el.querySelectorAll(_P)).forEach(a=>{a.scale=r})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(r=>r.active=r===e),e.setFocus())}isNavigable(e){const i=e.parentElement?.closest(ih);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,r=this.focusableItems.filter(n=>this.isNavigable(n)),s=r.findIndex(n=>n.active);if(i==="ArrowDown"){e.preventDefault();const n=e.target===this.filterEl?0:s+1;r[n]&&this.focusRow(r[n])}else if(i==="ArrowUp"){if(e.preventDefault(),s===0&&this.filterEnabled){this.filterEl.setFocus();return}const n=s-1;r[n]&&this.focusRow(r[n])}else if(i==="Home"){e.preventDefault();const n=r[0];n&&this.focusRow(n)}else if(i==="End"){e.preventDefault();const n=r[r.length-1];n&&this.focusRow(n)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:i,dragEl:r,newIndex:s,oldIndex:n,type:o}){if(!e||!i||i===e||r.contains(i))return!1;const a=e.canPull?.({toEl:i,fromEl:e,dragEl:r,newIndex:s,oldIndex:n})??!0,l=i.canPut?.({toEl:i,fromEl:e,dragEl:r,newIndex:s,oldIndex:n})??!0;return(o==="add"?a==="clone":a===!0)&&l}handleAdd(e){const{addTo:i}=e.detail,r=e.target,s=r?.parentElement,n=i.element,a=Array.from(s.children).filter(Gk).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"add",fromEl:s,toEl:n,dragEl:r,newIndex:l,oldIndex:a}))return;r.sortHandleOpen=!1,this.disconnectObserver();const c=r.cloneNode();n.prepend(c),qj(r),this.updateListItemsDebounced(),this.connectObserver();const d={dragEl:r,fromEl:s,toEl:n,newIndex:l,oldIndex:a};this.calciteListOrderChange.emit(d),n.emitOrderChangeEvent(d)}handleMove(e){const{moveTo:i}=e.detail,r=e.target,s=r?.parentElement,n=i.element,a=Array.from(s.children).filter(Gk).indexOf(r),l=0;if(!this.validateSortMenuItem({type:"move",fromEl:s,toEl:n,dragEl:r,newIndex:l,oldIndex:a}))return;r.sortHandleOpen=!1,this.disconnectObserver(),n.prepend(r),qj(r),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:r,fromEl:s,toEl:n,newIndex:l,oldIndex:a};this.calciteListOrderChange.emit(c),n.emitOrderChangeEvent(c)}handleReorder(e){const{reorder:i}=e.detail,r=e.target,s=r?.parentElement;if(!s)return;r.sortHandleOpen=!1;const n=Array.from(s.children).filter(Gk),o=n.length-1,a=n.indexOf(r);let l=a;switch(i){case"top":l=0;break;case"bottom":l=o;break;case"up":l=a===0?0:a-1;break;case"down":l=a===o?o:a+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?n[l]:n[l].nextSibling;s.insertBefore(r,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:r,fromEl:s,toEl:s,newIndex:l,oldIndex:a})}render(){const{loading:e,label:i,disabled:r,dataForFilter:s,filterEnabled:n,filterPlaceholder:o,filterText:a,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:d,effectiveFilterProps:h}=this;return _n({disabled:this.disabled,children:j`<div class=${O({[Qu.container]:!0,[Qu.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?j`<span aria-live=assertive class=${O(Qu.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?j`<calcite-scrim class=${O(Qu.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${O(Qu.table)} @keydown=${this.handleListKeydown} role=treegrid>${n||c||d?j`<div class=${O(Qu.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${O(Qu.stack)}><slot name=${nN.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${r0.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${r} .filterProps=${h} .items=${s} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${a} ${ct(this.setFilterEl)}></calcite-filter><slot name=${nN.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${r0.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${O(Qu.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${ct(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${nN.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:r,messages:{_lang:s},numberingSystem:n}=this;return La.numberFormatOptions={locale:s,numberingSystem:n},r?null:j`<div aria-live=polite class=${O(Qu.assistiveText)}>${this.hasActiveFilter?wt("aria-filter-enabled",j`<div>${e.filterEnabled}</div>`):null}${wt("aria-item-count",j`<div>${e.total.replace("{count}",La.localize(i.length.toString()))}</div>`)}${i.length?wt("aria-item-list",j`<ol>${i.map(o=>j`<li>${o.label}</li>`)}</ol>`):null}</div>`}};hA.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]},hA.styles=nrt;let TP=hA;fi("calcite-list",TP);const fxt=Object.freeze(Object.defineProperty({__proto__:null,List:TP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */function art(t,e,i){return e?`${t}-${e}`:i?`${t}-${i}`:`${t}-m`}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const lrt={trigger:"trigger"},oN={content:"content",wrapper:"wrapper",triggerContainer:"trigger-container"},QK="calcite-dropdown",Yk={menuButton:t=>`${QK}-${t}-menubutton`,menu:t=>`${QK}-${t}-menu`},crt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}.wrapper{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.wrapper{opacity:0;inset-block-start:0;left:0}}.wrapper .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.content{max-height:45vh;width:auto;overflow-y:auto;overflow-x:hidden;inline-size:var(--calcite-dropdown-width, var(--calcite-internal-dropdown-width));background-color:var(--calcite-dropdown-background-color, var(--calcite-color-foreground-1))}.trigger-container{position:relative;display:flex;height:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}.width-s{--calcite-internal-dropdown-width: 12rem}.width-m{--calcite-internal-dropdown-width: 14rem}.width-l{--calcite-internal-dropdown-width: 16rem}@media (forced-colors: active){:host([open]) .wrapper{border:var(--calcite-border-width-sm) solid canvasText}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,YS=class YS extends it{constructor(){super(),this.focusLastDropdownItem=!1,this.groups=[],this.guid=Lf(),this.items=[],this.mutationObserver=Ya("mutation",()=>this.updateItems()),this.transitionProp="opacity",this.resizeObserver=Ya("resize",e=>this.resizeObserverCallback(e)),this.focusSetter=ds()(this),this.closeOnSelectDisabled=!1,this.disabled=!1,this.maxItems=0,this.offsetDistance=0,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Oj,this.scale="m",this.selectedItems=[],this.type="click",this.calciteDropdownBeforeClose=ve({cancelable:!1}),this.calciteDropdownBeforeOpen=ve({cancelable:!1}),this.calciteDropdownClose=ve({cancelable:!1}),this.calciteDropdownOpen=ve({cancelable:!1}),this.calciteDropdownSelect=ve({cancelable:!1}),this.listenOn(window,"click",this.closeCalciteDropdownOnClick),this.listen("calciteInternalDropdownCloseRequest",this.closeCalciteDropdownOnEvent),this.listenOn(window,"calciteDropdownOpen",this.closeCalciteDropdownOnOpenEvent),this.listen("pointerenter",this.pointerEnterHandler),this.listen("pointerleave",this.pointerLeaveHandler),this.listen("calciteInternalDropdownItemKeyEvent",this.calciteInternalDropdownItemKeyEvent),this.listen("calciteInternalDropdownItemSelect",this.handleItemSelect)}async reposition(e=!1){const{filteredFlipPlacements:i,floatingEl:r,offsetDistance:s,offsetSkidding:n,overlayPositioning:o,placement:a,referenceEl:l}=this;return Ame(this,{floatingEl:r,referenceEl:l,offsetDistance:s,offsetSkidding:n,overlayPositioning:o,placement:a,flipPlacements:i,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.referenceEl,e)}connectedCallback(){super.connectedCallback(),this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.updateItems(),Ux(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(this.disabled),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("maxItems")&&this.hasUpdated&&this.setMaxScrollerHeight(),this.hasUpdated&&(e.has("offsetDistance")&&this.offsetDistance!==0||e.has("offsetSkidding")&&this.offsetSkidding!==0||e.has("overlayPositioning")&&this.overlayPositioning!=="absolute"||e.has("placement")&&this.placement!==Oj)&&this.reposition(!0),e.has("scale")&&(this.hasUpdated||this.scale!=="m")&&this.handlePropsChange()}updated(){wn(this)}loaded(){this.updateSelectedItems(),Ux(this)}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect(),J9(this)}openHandler(){XV(this),!this.disabled&&this.reposition(!0)}handleDisabledChange(e){e||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}handlePropsChange(){this.updateItems(),this.updateGroupProps()}closeCalciteDropdownOnClick(e){this.disabled||!this.open||e.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(e){this.closeCalciteDropdown(),e.stopPropagation()}closeCalciteDropdownOnOpenEvent(e){e.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||this.type!=="hover"||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||this.type!=="hover"||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(e=>!e.disabled&&!e.hidden)}calciteInternalDropdownItemKeyEvent(e){const{keyboardEvent:i}=e.detail,r=i.target,s=this.getTraversableItems();switch(i.key){case"Tab":this.open=!1,this.updateTabIndexOfItems(r);break;case"ArrowDown":Up(s,r,"next");break;case"ArrowUp":Up(s,r,"previous");break;case"Home":Up(s,r,"first");break;case"End":Up(s,r,"last");break}e.stopPropagation()}handleItemSelect(e){this.updateSelectedItems(),e.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||e.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),e.stopPropagation()}setFilteredPlacements(){const{el:e,flipPlacements:i}=this;this.filteredFlipPlacements=i?Pme(i,e):null}updateTriggers(e){this.triggers=e.target.assignedElements({flatten:!0}),this.reposition(!0)}updateItems(){this.items=this.groups.map(e=>Array.from(e?.querySelectorAll("calcite-dropdown-item"))).reduce((e,i)=>[...e,...i],[]),this.updateSelectedItems(),this.reposition(!0),this.items.forEach(e=>e.scale=this.scale)}updateGroups(e){const i=e.target.assignedElements({flatten:!0}).filter(r=>r?.matches("calcite-dropdown-group"));this.groups=i,this.updateItems(),this.updateGroupProps()}updateGroupProps(){this.groups.forEach((e,i)=>{e.scale=this.scale,e.position=i})}resizeObserverCallback(e){e.forEach(({target:i})=>{i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})}setDropdownWidth(){const{referenceEl:e,scrollerEl:i}=this;!i||!e||(i.style.minWidth=`${e.clientWidth}px`)}setMaxScrollerHeight(){const{maxItems:e,items:i,scrollerEl:r}=this;if(!r)return;const s=i.length>=e&&e>0?this.getYDistanceFromScroller(i.at(e-1)):0;r.style.maxBlockSize=s>0?`${s}px`:"",this.reposition(!0)}setScrollerAndTransitionEl(e){gM(this.resizeObserver,this.scrollerEl,e),this.scrollerEl=e,this.transitionEl=e}onBeforeOpen(){this.focusOnFirstActiveOrDefaultItem(),this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit(),W9(this)}setReferenceEl(e){gM(this.resizeObserver,this.referenceEl,e),this.referenceEl=e,Ux(this)}setFloatingEl(e){this.floatingEl=e,Ux(this)}keyDownHandler(e){if(!e.composedPath().includes(this.referenceEl))return;const{defaultPrevented:i,key:r}=e;if(!i){if(r==="Escape"){this.closeCalciteDropdown(),e.preventDefault();return}if(this.open&&e.shiftKey&&r==="Tab"){this.closeCalciteDropdown(),e.preventDefault();return}kg(r)?(this.toggleDropdown(),e.preventDefault()):(r==="ArrowDown"||r==="ArrowUp")&&(e.preventDefault(),this.focusLastDropdownItem=r==="ArrowUp",this.open=!0)}}updateSelectedItems(){this.selectedItems=this.items.filter(e=>e.selected)}getYDistanceFromScroller(e){const i=e.getBoundingClientRect();return e.offsetTop+i.height}closeCalciteDropdown(e=!0){this.open=!1,e&&$w(this.triggers[0])}async focusOnFirstActiveOrDefaultItem(){const i=this.getTraversableItems().find(r=>r.selected)||(this.focusLastDropdownItem?this.items.at(-1):this.items[0]);this.focusLastDropdownItem=!1,i&&(await this.updateComplete,await eD(),await eD(),await $w(i),i.scrollIntoView({block:"nearest"}))}toggleDropdown(){this.open=!this.open}updateTabIndexOfItems(e){this.items.forEach(i=>{i.tabIndex=e!==i?-1:0})}render(){const{open:e,guid:i}=this;return _n({disabled:this.disabled,children:j`<div class=${O(oN.triggerContainer)} id=${Yk.menuButton(i)??ge} @click=${this.toggleDropdown} @keydown=${this.keyDownHandler} ${ct(this.setReferenceEl)}><slot aria-controls=${Yk.menu(i)??ge} .ariaExpanded=${e} aria-haspopup=menu name=${lrt.trigger} @slotchange=${this.updateTriggers}></slot></div><div .ariaHidden=${!e} class=${O({[oN.wrapper]:!0,[art("width",this.width,this.widthScale)]:!!(this.width||this.widthScale)})} ${ct(this.setFloatingEl)}><div aria-labelledby=${Yk.menuButton(i)??ge} class=${O({[oN.content]:!0,[dP.animation]:!0,[dP.animationActive]:e})} id=${Yk.menu(i)??ge} role=menu ${ct(this.setScrollerAndTransitionEl)}><slot @slotchange=${this.updateGroups}></slot></div></div>`})}};YS.properties={closeOnSelectDisabled:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],maxItems:[11,{},{reflect:!0,type:Number}],offsetDistance:[11,{},{type:Number,reflect:!0}],offsetSkidding:[11,{},{reflect:!0,type:Number}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],type:[3,{},{reflect:!0}],widthScale:[3,{},{reflect:!0}],width:[3,{},{reflect:!0}]},YS.shadowRootOptions={mode:"open",delegatesFocus:!0},YS.styles=crt;let EP=YS;fi("calcite-dropdown",EP);const mxt=Object.freeze(Object.defineProperty({__proto__:null,Dropdown:EP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const wp={container:"container",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon--end",iconStart:"dropdown-item-icon--start",itemContent:"dropdown-item-content",link:"dropdown-link"},eX={check:"check",bulletPoint:"bullet-point"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const urt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;flex-grow:1;align-items:center;outline-color:transparent}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3));text-align:start;outline-color:transparent}.container a{outline:none;position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;text-decoration-line:none;color:var(--calcite-dropdown-item-text-color, var(--calcite-color-text-3))}.dropdown-item-content{flex:1 1 auto;padding-block:.125rem}.dropdown-item-icon{position:relative;opacity:0;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:scale(.9)}:host([scale=s]) .container{padding-block:.25rem;padding-inline:.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-item-icon,:host([scale=s]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding-block:.5rem;padding-inline:.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-item-icon,:host([scale=m]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .container{padding-block:.625rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-item-icon,:host([scale=l]) .dropdown-item-icon--start{padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .dropdown-item-icon--end{padding-inline-start:var(--calcite-spacing-lg)}:host(:focus) .container{text-decoration-line:none;outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:hover:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-hover, var(--calcite-color-foreground-2))}:host(:active:not([disabled])) .container{background-color:var(--calcite-dropdown-item-background-color-press, var(--calcite-color-foreground-3))}:host(:hover:not([disabled])) .container,:host(:active:not([disabled])) .container{text-decoration-line:none;color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host(:hover:not([disabled])) .dropdown-link,:host(:active:not([disabled])) .dropdown-link{color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection),:host([selected]) .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-dropdown-item-text-color-press, var(--calcite-color-text-1))}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .dropdown-link calcite-icon{color:var(--calcite-dropdown-item-icon-color-press, var(--calcite-color-brand))}:host(:hover:not([disabled])) .dropdown-item-icon{color:var(--calcite-dropdown-item-icon-color-hover)}:host([selected]) .dropdown-item-icon{opacity:1}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,pA=class pA extends it{constructor(){super(),this.childLink=wi(),this.focusSetter=ds()(this),this.disabled=!1,this.scale="m",this.selected=!1,this.selectionMode="single",this.calciteDropdownItemSelect=ve({cancelable:!1}),this.calciteInternalDropdownCloseRequest=ve({cancelable:!1}),this.calciteInternalDropdownItemKeyEvent=ve({cancelable:!1}),this.calciteInternalDropdownItemSelect=ve({cancelable:!1}),this.listen("click",this.onClick),this.listen("keydown",this.keyDownHandler),this.listenOn(document.body,"calciteInternalDropdownItemChange",this.updateActiveItemOnChange)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),this.initialize()}load(){this.initialize()}updated(){wn(this)}onClick(){this.emitRequestedItem()}keyDownHandler(e){switch(e.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.value.click(),e.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),e.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":e.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:e});break}}updateActiveItemOnChange(e){e.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.determineActiveItem()),e.stopPropagation()}initialize(){this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}render(){const{href:e,selectionMode:i,label:r,iconFlipRtl:s}=this,n=j`<calcite-icon class=${O(wp.iconStart)} .flipRtl=${s==="start"||s==="both"} .icon=${this.iconStart} .scale=${Fr(this.scale)}></calcite-icon>`,o=j`<span class=${O(wp.itemContent)}><slot></slot></span>`,a=j`<calcite-icon class=${O(wp.iconEnd)} .flipRtl=${s==="end"||s==="both"} .icon=${this.iconEnd} .scale=${Fr(this.scale)}></calcite-icon>`,l=this.iconStart&&this.iconEnd?[n,o,a]:this.iconStart?[n,o]:this.iconEnd?[o,a]:o,c=e?j`<a .ariaLabel=${r} class=${O(wp.link)} href=${e??le} rel=${this.rel??le} tabindex=-1 target=${this.target??le} ${ct(this.childLink)}>${l}</a>`:l,d=e?null:i==="single"?"menuitemradio":i==="multiple"?"menuitemcheckbox":"menuitem",h=i!=="none"?kA(this.selected):null,{disabled:f}=this;return this.el.ariaChecked=h,this.el.ariaLabel=e?"":r,this.el.role=d,o2(this.el,"tabIndex",f?-1:0),_n({disabled:f,children:j`<div class=${O({[wp.container]:!0,[wp.containerNone]:i==="none"})}>${i!=="none"?j`<calcite-icon class=${O(wp.icon)} .icon=${i==="multiple"?eX.check:eX.bulletPoint} .scale=${Fr(this.scale)}></calcite-icon>`:null}${c}</div>`})}};pA.properties={disabled:[7,{},{reflect:!0,type:Boolean}],href:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}],iconStart:[3,{},{reflect:!0}],label:1,rel:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,target:[3,{},{reflect:!0}]},pA.styles=urt;let MP=pA;fi("calcite-dropdown-item",MP);const yxt=Object.freeze(Object.defineProperty({__proto__:null,DropdownItem:MP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const tX={title:"dropdown-title",separator:"dropdown-separator"},drt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block}.container{text-align:start}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-bold);border-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3));color:var(--calcite-dropdown-group-title-text-color, var(--calcite-color-text-2))}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-dropdown-group-border-color, var(--calcite-color-border-3))}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .dropdown-title{padding:.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .dropdown-title{padding:.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .dropdown-title{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}`,KS=class KS extends it{constructor(){super(),this.mutationObserver=Ya("mutation",()=>this.updateItems()),this.position=-1,this.scale="m",this.selectionMode="single",this.calciteInternalDropdownItemChange=ve({cancelable:!1}),this.listen("calciteInternalDropdownItemSelect",this.updateActiveItemOnChange)}connectedCallback(){super.connectedCallback(),this.updateItems(),this.mutationObserver?.observe(this.el,{childList:!0})}willUpdate(e){e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="single")&&this.updateItems()}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect()}updateActiveItemOnChange(e){this.requestedDropdownGroup=e.detail.requestedDropdownGroup,this.requestedDropdownItem=e.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}updateItems(){Array.from(this.el.querySelectorAll("calcite-dropdown-item")).forEach(e=>e.selectionMode=this.selectionMode)}render(){const e=this.groupTitle?j`<span aria-hidden=true class=${O(tX.title)}>${this.groupTitle}</span>`:null,i=this.position>0?j`<div class=${O(tX.separator)} role=separator></div>`:null;return this.el.ariaLabel=this.groupTitle,this.el.role="group",j`<div class=${O({[wp.container]:!0})}>${i}${e}<slot></slot></div>`}};KS.properties={groupTitle:[3,{},{reflect:!0}],position:[9,{},{type:Number}],scale:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}]},KS.shadowRootOptions={mode:"open",delegatesFocus:!0},KS.styles=drt;let CP=KS;fi("calcite-dropdown-group",CP);const gxt=Object.freeze(Object.defineProperty({__proto__:null,DropdownGroup:CP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const iX={handle:"handle",dropdown:"dropdown"},rX={drag:"drag",blank:"blank"},aN={label:"{label}",position:"{position}",total:"{total}"},sX=["top","up","down","bottom"],hrt={trigger:"trigger"},lN={add:"add",move:"move",reorder:"reorder"},prt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,fA=class fA extends it{constructor(){super(...arguments),this.focusSetter=ds()(this),this.disabled=!1,this.messages=xn({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=Oj,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=ve({cancelable:!1}),this.calciteSortHandleBeforeOpen=ve({cancelable:!1}),this.calciteSortHandleClose=ve({cancelable:!1}),this.calciteSortHandleMove=ve({cancelable:!0}),this.calciteSortHandleAdd=ve({cancelable:!0}),this.calciteSortHandleOpen=ve({cancelable:!1}),this.calciteSortHandleReorder=ve({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){wn(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:i,setPosition:r,setSize:s,hasSetInfo:n}=this;if(!n)return e??"";let o=e?i.repositionLabel.replace(aN.label,e):i.reposition;return o=o.replace(aN.position,r?r.toString():""),o.replace(aN.total,s?s.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const i=e.target.dataset.id,r=this.moveToItems.find(s=>s.id===i);this.calciteSortHandleMove.emit({moveTo:r})}handleAddTo(e){const i=e.target.dataset.id,r=this.addToItems.find(s=>s.id===i);this.calciteSortHandleAdd.emit({addTo:r})}render(){const{disabled:e,flipPlacements:i,open:r,overlayPositioning:s,placement:n,scale:o,widthScale:a,hasNoItems:l}=this,c=this.getLabel(),d=e||l;return _n({disabled:e,children:j`<calcite-dropdown class=${O(iX.dropdown)} .disabled=${d} .flipPlacements=${i} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${s} .placement=${n} .scale=${o} .widthScale=${a} ${ct(this.setDropdownEl)}><calcite-action .active=${r} appearance=transparent .aria=${{expanded:r}} class=${O(iX.handle)} .dragHandle=${!0} .icon=${e?rX.blank:rX.drag} .label=${c} .scale=${o} slot=${hrt.trigger} .text=${c} title=${c??ge}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return wt(e.id,j`<calcite-dropdown-item data-id=${e.id??ge} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return wt(e.id,j`<calcite-dropdown-item data-id=${e.id??ge} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?wt("reorder",j`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${lN.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:i,scale:r}=this;return i.length?wt("add-to-items",j`<calcite-dropdown-group .groupTitle=${e.addTo} id=${lN.add} .scale=${r} selection-mode=none>${i.map(s=>this.renderAddToItem(s))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:i,scale:r}=this;return i.length?wt("move-to-items",j`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${lN.move} .scale=${r} selection-mode=none>${i.map(s=>this.renderMoveToItem(s))}</calcite-dropdown-group>`):null}renderDropdownItem(e,i){return wt(sX[e],j`<calcite-dropdown-item data-value=${sX[e]??ge} .label=${i} @calciteDropdownItemSelect=${this.handleReorder}>${i}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:i}=this;return e!==i&&e!==i-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};fA.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},fA.styles=prt;let Yj=fA;fi("calcite-sort-handle",Yj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const frt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host(.calcite-sortable--chosen),:host(.calcite-sortable--drag),:host(.calcite-sortable--fallback),:host(.calcite-sortable--ghost){position:relative;overflow:hidden}:host(.calcite-sortable--ghost):before{content:"";position:absolute;inset-block:0px;inset-inline-start:0px;inset-inline-end:0px;z-index:var(--calcite-z-index);box-sizing:border-box;border-width:1px;border-style:dashed;border-color:var(--calcite-color-brand);background-color:var(--calcite-color-foreground-2)}:host(.calcite-sortable--drag){--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}`;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const At={actionsEnd:"actions-end",actionsStart:"actions-start",description:"description",close:"close",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",content:"content",contentBottom:"content-bottom",contentContainer:"content-container",contentContainerHasCenterContent:"content-container--has-center-content",contentContainerSelectable:"content-container--selectable",contentContainerUnavailable:"content-container--unavailable",contentContainerWrapper:"content-container-wrapper",contentContainerWrapperBordered:"content-container-wrapper--bordered",contentEnd:"content-end",contentStart:"content-start",customContent:"custom-content",expandedContainer:"expanded-container",dragContainer:"drag-container",gridCell:"grid-cell",icon:"icon",nestedContainer:"nested-container",nestedContainerExpanded:"nested-container--expanded",label:"label",row:"row",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",wrapper:"wrapper",wrapperBordered:"wrapper--bordered"},Av={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},vxt=0,ed={selectedMultiple:"check-square-f",selectedSingle:"circle-inset-large",unselectedMultiple:"square",unselectedSingle:"circle",collapsedLTR:"chevron-right",collapsedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},nX="data-test-active";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const mrt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column}:host([filter-hidden]),:host([closed]){display:none}.wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{box-sizing:border-box;display:flex;flex:1 1 0%;overflow:hidden;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container *{box-sizing:border-box}.container--hover:hover{cursor:pointer;background-color:var(--calcite-list-background-color-hover, var(--calcite-color-foreground-2))}.container:active{background-color:var(--calcite-list-background-color-press, var(--calcite-color-foreground-3))}.container--border{position:relative}.container--border:before{position:absolute;inline-size:var(--calcite-border-width-lg);inset-block:0;inset-inline-start:0;background-color:transparent;content:""}.container--border-selected:before{background-color:var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.container--border-selected:focus{box-shadow:inset var(--calcite-border-width-lg) 0 0 0 var(--calcite-list-selection-border-color, var(--calcite-color-brand))}.nested-container{display:none;flex-direction:column;border-width:0px;border-style:solid;border-color:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3));margin-inline-start:var(--calcite-list-spacing-indent, 1.5rem)}.nested-container--expanded{display:flex}.selection-container{display:flex;padding-block:0px;color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host(:not([disabled]):not([selected])) .container:hover .selection-container--single{color:var(--calcite-list-icon-color, var(--calcite-color-border-input))}:host([selected]:hover) .selection-container,:host([selected]:hover) .selection-container--single,:host([selected]) .selection-container{color:var(--calcite-list-icon-color, var(--calcite-color-brand))}.content-container-wrapper{display:flex;flex:1 1 auto}.content-container-wrapper--bordered{border-block-end:1px solid var(--calcite-list-border-color, var(--calcite-color-border-3))}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-list-content-text-color, var(--calcite-color-text-2))}.content-container--unavailable{opacity:var(--calcite-opacity-disabled)}.row,.grid-cell{outline-color:transparent}.row{position:relative}.row:focus,.grid-cell:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;line-height:var(--calcite-font-line-height-relative-snug)}.label{color:var(--calcite-list-label-text-color, var(--calcite-color-text-1))}.description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-3))}.icon{align-self:center;color:var(--calcite-list-icon-color, var(--calcite-color-text-3))}.icon:hover,.icon:active{color:var(--calcite-color-text-1)}:host([display-mode=flat][drag-handle]:is([selection-mode=none],[selection-appearance=border])) .drag-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:32px;padding-block:var(--calcite-spacing-xxs);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .content,:host([scale=s]) .custom-content,:host([scale=s]) .label{font-size:var(--calcite-font-size--2)}:host([scale=s]) .description{font-size:var(--calcite-font-size--3)}:host([scale=s][display-mode=flat]:not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat]:not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=s][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-sm)}:host([scale=s][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=m]) .actions-start{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .content-container{gap:var(--calcite-spacing-sm);min-block-size:40px;padding-block:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-md)}:host([scale=m]) .content,:host([scale=m]) .custom-content{font-size:var(--calcite-font-size--2)}:host([scale=m]) .label{font-size:var(--calcite-font-size--1)}:host([scale=m]) .description{font-size:var(--calcite-font-size--2)}:host([scale=m][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=flat][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs) var(--calcite-spacing-sm)}:host([scale=m][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested]) .selection-container{padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=m][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-md)}:host([scale=m][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=m][display-mode=nested][drag-handle]) .selection-container{padding-inline:var(--calcite-spacing-xxs)}:host([scale=l]) .actions-start{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .content-container{gap:var(--calcite-spacing-md);min-block-size:56px;padding-block:.625rem;padding-inline-end:var(--calcite-spacing-lg)}:host([scale=l]) .content,:host([scale=l]) .custom-content,:host([scale=l]) .label{font-size:var(--calcite-font-size-0)}:host([scale=l]) .description{font-size:var(--calcite-font-size--1)}:host([scale=l]) .nested-container{margin-inline-start:1.75rem}:host([scale=l][display-mode=flat]) .container{padding-inline-start:var(--calcite-spacing-lg)}:host([scale=l][display-mode=flat]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=flat][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=flat][drag-handle]) .selection-container{padding-inline-end:var(--calcite-spacing-md)}:host([scale=l][display-mode=nested]) .container{padding-inline-start:var(--calcite-spacing-xxs)}:host([scale=l][display-mode=nested][drag-handle]) .container{padding-inline-start:0}:host([scale=l][display-mode=nested][selection-appearance=icon]:not([selection-mode=none]):not([drag-handle])) .container{padding-inline-start:var(--calcite-spacing-lg)}.label,.description,.content-bottom{font-family:var(--calcite-font-family);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}:host([selected]) .label{font-weight:var(--calcite-font-weight-medium)}:host([selected]) .icon{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}:host([selected]) .description{color:var(--calcite-list-description-text-color, var(--calcite-color-text-2))}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){align-self:center}.content-bottom{display:flex;flex-direction:column}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.expanded-container{color:var(--calcite-list-icon-color, var(--calcite-color-text-3));padding-inline:var(--calcite-spacing-xxs)}:host(:not([disabled])) .expanded-container:hover{color:var(--calcite-list-icon-color, var(--calcite-color-text-1))}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.expanded-container{display:flex;align-items:center}.actions-start calcite-action,.actions-start calcite-sort-handle,.actions-end calcite-action,.actions-end calcite-sort-handle,.content-start calcite-action,.content-start calcite-sort-handle,.content-end calcite-action,.content-end calcite-sort-handle,.selection-container calcite-action,.selection-container calcite-sort-handle,.drag-container calcite-action,.drag-container calcite-sort-handle,.expanded-container calcite-action,.expanded-container calcite-sort-handle{align-self:stretch}.drag-container,.selection-container,.expanded-container{padding-block-end:var(--calcite-spacing-px)}.expanded-container,.selection-container{cursor:pointer}.actions-start,.actions-end{position:relative;padding:0}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-sort-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-sort-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}.row:focus .actions-start,.row:focus .actions-end{inset-block:.125rem}.row:focus .actions-start .close,.row:focus .actions-start ::slotted(calcite-action),.row:focus .actions-start ::slotted(calcite-action-menu),.row:focus .actions-start ::slotted(calcite-sort-handle),.row:focus .actions-start ::slotted(calcite-dropdown),.row:focus .actions-end .close,.row:focus .actions-end ::slotted(calcite-action),.row:focus .actions-end ::slotted(calcite-action-menu),.row:focus .actions-end ::slotted(calcite-sort-handle),.row:focus .actions-end ::slotted(calcite-dropdown){block-size:calc(100% - .25rem)}.row:focus:after,.row:focus:before{position:absolute;content:"";inline-size:.125rem;z-index:var(--calcite-z-index-header);background-color:var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));inset-block:0}.row:focus:before{inset-inline-start:0}.row:focus:after{inset-inline-end:0}.container--border:focus:before{display:none}::slotted(calcite-list:empty){border-block-start-width:0px}:host([hidden]){display:none}[hidden]{display:none}`,Kk=new Map,mA=class mA extends it{constructor(){super(),this.actionsEndRef=wi(),this.actionsStartRef=wi(),this.containerRef=wi(),this.contentRef=wi(),this.defaultSlotRef=wi(),this.handleGridRef=wi(),this.messages=xn(),this.focusSetter=ds()(this),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentBottom=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.hasCustomContent=!1,this.level=null,this.expandable=!1,this.active=!1,this.bordered=!1,this.sortDisabled=!1,this.closable=!1,this.closed=!1,this.disabled=!1,this.dragDisabled=!1,this.dragHandle=!1,this.expanded=!1,this.filterHidden=!1,this.interactionMode=null,this.displayMode="flat",this.addToItems=[],this.moveToItems=[],this.scale="m",this.selected=!1,this.selectionAppearance=null,this.selectionMode=null,this.sortHandleOpen=!1,this.unavailable=!1,this.calciteInternalFocusPreviousItem=ve({cancelable:!1}),this.calciteInternalListItemActive=ve({cancelable:!1}),this.calciteInternalListItemChange=ve({cancelable:!1}),this.calciteInternalListItemSelect=ve({cancelable:!1}),this.calciteInternalListItemSelectMultiple=ve({cancelable:!1}),this.calciteInternalListItemToggle=ve({cancelable:!1}),this.calciteListItemClose=ve({cancelable:!1}),this.calciteListItemCollapse=ve({cancelable:!1}),this.calciteListItemExpand=ve({cancelable:!1}),this.calciteListItemSelect=ve({cancelable:!1}),this.calciteListItemSortHandleBeforeClose=ve({cancelable:!1}),this.calciteListItemSortHandleBeforeOpen=ve({cancelable:!1}),this.calciteListItemSortHandleClose=ve({cancelable:!1}),this.calciteListItemSortHandleOpen=ve({cancelable:!1}),this.calciteListItemToggle=ve({cancelable:!1}),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges),this.listen("calciteInternalListDefaultSlotChange",this.handleCalciteInternalListDefaultSlotChanges)}get open(){return this.expanded}set open(e){_ee.deprecated("property",{name:"open",removalVersion:4,suggested:"expanded"}),this.expanded=e}async setFocus(e){return this.focusSetter(()=>{const{containerRef:i,parentListEl:r}=this,s=Kk.get(r);if(typeof s=="number"){const n=this.getGridCells()[s];if(n){this.focusCell(n);return}}return{target:i.value,includeContainer:!0,strategy:"focusable"}},e)}connectedCallback(){super.connectedCallback();const{el:e}=this;this.parentListEl=e.closest(zS),this.level=Mit(e)+1,this.setSelectionDefaults()}disconnectedCallback(){super.disconnectedCallback(),Kk.clear()}willUpdate(e){e.has("active")&&(this.hasUpdated||this.active!==!1)&&this.activeHandler(this.active),e.has("closed")&&(this.hasUpdated||this.closed!==!1)&&this.handleClosedChange(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledChange(),e.has("selected")&&(this.hasUpdated||this.selected!==!1)&&this.handleSelectedChange(),e.has("sortHandleOpen")&&(this.hasUpdated||this.sortHandleOpen!==!1)&&this.sortHandleOpenHandler(),e.has("displayMode")&&this.hasUpdated&&this.handleExpandableChange(this.defaultSlotRef.value),e.has("expanded")&&this.hasUpdated&&(this.expanded?(this.handleExpandedChange(),this.calciteListItemExpand.emit()):this.calciteListItemCollapse.emit())}updated(){wn(this)}activeHandler(e){e||this.focusCell(null,!1)}handleClosedChange(){this.emitCalciteInternalListItemChange()}handleDisabledChange(){this.emitCalciteInternalListItemChange()}handleExpandedChange(){this.emitCalciteInternalListItemToggle()}handleSelectedChange(){this.calciteInternalListItemSelect.emit()}sortHandleOpenHandler(){this.sortHandleEl&&(this.sortHandleEl.open=this.sortHandleOpen)}handleCalciteInternalListDefaultSlotChanges(e){e.stopPropagation(),this.handleExpandableChange(this.defaultSlotRef.value)}setSortHandleEl(e){this.sortHandleEl=e,this.sortHandleOpenHandler()}handleSortHandleBeforeOpen(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeOpen.emit()}handleSortHandleBeforeClose(e){e.stopPropagation(),this.calciteListItemSortHandleBeforeClose.emit()}handleSortHandleClose(e){e.stopPropagation(),this.sortHandleOpen=!1,this.calciteListItemSortHandleClose.emit()}handleSortHandleOpen(e){e.stopPropagation(),this.sortHandleOpen=!0,this.calciteListItemSortHandleOpen.emit()}emitInternalListItemActive(){this.calciteInternalListItemActive.emit()}emitCalciteInternalListItemToggle(){this.calciteInternalListItemToggle.emit()}emitCalciteInternalListItemChange(){this.calciteInternalListItemChange.emit()}handleCloseClick(){this.closed=!0,this.calciteListItemClose.emit()}handleContentSlotChange(e){this.hasCustomContent=Ft(e)}handleActionsStartSlotChange(e){this.hasActionsStart=Ft(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=Ft(e)}handleContentStartSlotChange(e){this.hasContentStart=Ft(e)}handleContentEndSlotChange(e){this.hasContentEnd=Ft(e)}handleContentBottomSlotChange(e){this.hasContentBottom=Ft(e)}setSelectionDefaults(){const{parentListEl:e,selectionMode:i,selectionAppearance:r}=this;e&&(i||(this.selectionMode=e.selectionMode),r||(this.selectionAppearance=e.selectionAppearance))}handleExpandableChange(e){if(!e)return;const i=Tit(e);i.lists.forEach(r=>{r.displayMode=this.displayMode}),this.expandable=this.displayMode==="nested"&&(i.lists.length>0||i.items.length>0)}handleDefaultSlotChange(e){this.handleExpandableChange(e.target)}handleToggleClick(){this.toggle()}toggle(e=!this.expanded){this.expanded=e,this.calciteListItemToggle.emit()}handleItemClick(e){e.defaultPrevented||this.toggleSelected(e.shiftKey)}async toggleSelected(e){const{selectionMode:i,selected:r}=this;this.disabled||(i==="multiple"||i==="single"?this.selected=!r:i==="single-persist"&&(this.selected=!0),this.calciteInternalListItemSelectMultiple.emit({selectMultiple:e&&i==="multiple"}),await this.updateComplete,this.calciteListItemSelect.emit())}getGridCells(){return[this.handleGridRef.value,this.actionsStartRef.value,this.contentRef.value,this.actionsEndRef.value].filter(e=>e&&!e.hidden)}handleItemKeyDown(e){if(e.defaultPrevented)return;const{key:i}=e,r=e.composedPath(),{containerRef:s,actionsStartRef:{value:n},actionsEndRef:{value:o},expanded:a,expandable:l}=this,c=this.getGridCells(),d=c.findIndex(h=>r.includes(h));if(i==="Enter"&&!r.includes(n)&&!r.includes(o))e.preventDefault(),this.toggleSelected(e.shiftKey);else if(i==="ArrowRight"){e.preventDefault();const h=d+1;d===-1?!a&&l?(this.toggle(!0),this.focusCell(null)):c[0]&&this.focusCell(c[0]):c[d]&&c[h]&&this.focusCell(c[h])}else if(i==="ArrowLeft"){e.preventDefault();const h=d-1;d===-1?(this.focusCell(null),a&&l?this.toggle(!1):this.calciteInternalFocusPreviousItem.emit()):d===0?(this.focusCell(null),s.value.focus()):c[d]&&c[h]&&this.focusCell(c[h])}}focusCellNull(){this.focusCell(null)}setFocusCell(e,i,r){const{parentListEl:s}=this;r&&Kk.set(s,null);const n=this.getGridCells();n.forEach(o=>{o.removeAttribute("tabindex"),o.removeAttribute(nX)}),e&&(e===i?e.tabIndex=0:e.removeAttribute("tabindex"),e.setAttribute(nX,""),r&&Kk.set(s,n.indexOf(e)))}focusCell(e,i=!0){const r=vee(e);this.setFocusCell(e,r,i),r?.focus()}renderSelected(){const{selected:e,selectionMode:i,selectionAppearance:r}=this;return i==="none"||r==="border"?null:wt("selection-container",j`<div class=${O({[At.selectionContainer]:!0,[At.selectionContainerSingle]:i==="single"||i==="single-persist"})} @click=${this.handleItemClick}><calcite-icon .icon=${e?i==="multiple"?ed.selectedMultiple:ed.selectedSingle:i==="multiple"?ed.unselectedMultiple:ed.unselectedSingle} .scale=${Fr(this.scale)}></calcite-icon></div>`)}renderDragHandle(){const{label:e,dragHandle:i,dragDisabled:r,setPosition:s,setSize:n,moveToItems:o,sortDisabled:a,addToItems:l}=this;return i?wt("drag-handle-container",j`<div .ariaLabel=${e} class=${O({[At.dragContainer]:!0,[At.gridCell]:!0})} role=gridcell ${ct(this.handleGridRef)}><calcite-sort-handle .addToItems=${l} .disabled=${r} .label=${e} .moveToItems=${o} @calciteSortHandleBeforeClose=${this.handleSortHandleBeforeClose} @calciteSortHandleBeforeOpen=${this.handleSortHandleBeforeOpen} @calciteSortHandleClose=${this.handleSortHandleClose} @calciteSortHandleOpen=${this.handleSortHandleOpen} overlay-positioning=fixed .scale=${this.scale} .setPosition=${s} .setSize=${n} .sortDisabled=${a} ${ct(this.setSortHandleEl)}></calcite-sort-handle></div>`):null}renderExpanded(){const{el:e,expanded:i,expandable:r,messages:s,displayMode:n,scale:o}=this;if(n!=="nested")return null;const a=Of(e),l=r?i?ed.open:a==="rtl"?ed.collapsedRTL:ed.collapsedLTR:ed.blank,c=Fr(o),d=r?i?s.collapse:s.expand:void 0,h=r?this.handleToggleClick:void 0;return wt("expanded-container",j`<div class=${O(At.expandedContainer)} @click=${h} title=${d??ge}>${wt(l,j`<calcite-icon .icon=${l} .scale=${c}></calcite-icon>`)}</div>`)}renderActionsStart(){const{label:e,hasActionsStart:i}=this;return wt("actions-start-container",j`<div .ariaLabel=${e} class=${O({[At.actionsStart]:!0,[At.gridCell]:!0})} .hidden=${!i} role=gridcell ${ct(this.actionsStartRef)}><slot name=${Av.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{label:e,hasActionsEnd:i,closable:r,messages:s}=this;return wt("actions-end-container",j`<div .ariaLabel=${e} class=${O({[At.actionsEnd]:!0,[At.gridCell]:!0})} .hidden=${!(i||r)} role=gridcell ${ct(this.actionsEndRef)}><slot name=${Av.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot>${r?wt("close-action",j`<calcite-action appearance=transparent class=${O(At.close)} .icon=${ed.close} .label=${s.close} @click=${this.handleCloseClick} .scale=${this.scale} .text=${s.close}></calcite-action>`):null}</div>`)}renderContentStart(){const{hasContentStart:e}=this;return j`<div class=${O(At.contentStart)} .hidden=${!e}><slot name=${Av.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderCustomContent(){const{hasCustomContent:e}=this;return j`<div class=${O(At.customContent)} .hidden=${!e}><slot name=${Av.content} @slotchange=${this.handleContentSlotChange}></slot></div>`}renderIconStart(){const{iconStart:e,iconFlipRtl:i,scale:r}=this;return e?wt("icon-start",j`<calcite-icon class=${O(At.icon)} .flipRtl=${i==="both"||i==="start"} .icon=${e} .scale=${Fr(r)}></calcite-icon>`):null}renderIconEnd(){const{iconEnd:e,iconFlipRtl:i,scale:r}=this;return e?wt("icon-end",j`<calcite-icon class=${O(At.icon)} .flipRtl=${i==="both"||i==="end"} .icon=${e} .scale=${Fr(r)}></calcite-icon>`):null}renderContentEnd(){const{hasContentEnd:e}=this;return j`<div class=${O(At.contentEnd)} .hidden=${!e}><slot name=${Av.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}renderContentBottom(){const{hasContentBottom:e}=this;return j`<div class=${O(At.contentBottom)} .hidden=${!e}><slot name=${Av.contentBottom} @slotchange=${this.handleContentBottomSlotChange}></slot></div>`}renderDefaultContainer(){return j`<div class=${O({[At.nestedContainer]:!0,[At.nestedContainerExpanded]:this.expandable&&this.expanded})}><slot @slotchange=${this.handleDefaultSlotChange} ${ct(this.defaultSlotRef)}></slot></div>`}renderContentProperties(){const{label:e,description:i,hasCustomContent:r}=this;return!r&&(e||i)?wt("content",j`<div class=${O(At.content)}>${e?wt("label",j`<div class=${O(At.label)}>${e}</div>`):null}${i?wt("description",j`<div class=${O(At.description)}>${i}</div>`):null}</div>`):null}renderContentContainer(){const{description:e,label:i,selectionMode:r,hasCustomContent:s,unavailable:n}=this,o=s||!!i||!!e,a=[this.renderContentStart(),this.renderCustomContent(),this.renderIconStart(),this.renderContentProperties(),this.renderIconEnd(),this.renderContentEnd()];return wt("content-container",j`<div .ariaLabel=${i} class=${O({[At.gridCell]:!0,[At.contentContainer]:!0,[At.contentContainerUnavailable]:n,[At.contentContainerSelectable]:r!=="none",[At.contentContainerHasCenterContent]:o})} @click=${this.handleItemClick} role=gridcell ${ct(this.contentRef)}>${a}</div>`)}render(){const{expandable:e,expanded:i,level:r,active:s,label:n,selected:o,selectionAppearance:a,selectionMode:l,interactionMode:c,closed:d,filterHidden:h,bordered:f,disabled:m,hasContentBottom:y}=this,v=f&&y,b=f&&!y,w=l!=="none"&&a==="border",x=w&&o,S=w&&!o,$=c==="interactive"||c==="static"&&l!=="none"&&a==="border";return _n({disabled:m,children:j`<div class=${O({[At.wrapper]:!0,[At.wrapperBordered]:v})}><div .ariaExpanded=${e?i:null} .ariaLabel=${n} .ariaLevel=${r} .ariaSelected=${o} class=${O({[At.row]:!0,[At.container]:!0,[At.containerHover]:$,[At.containerBorder]:w,[At.containerBorderSelected]:x,[At.containerBorderUnselected]:S})} .hidden=${d||h} @focus=${this.focusCellNull} @focusin=${this.emitInternalListItemActive} @keydown=${this.handleItemKeyDown} role=row .tabIndex=${s?0:-1} ${ct(this.containerRef)}>${this.renderDragHandle()}${this.renderSelected()}${this.renderExpanded()}<div class=${O({[At.contentContainerWrapper]:!0,[At.contentContainerWrapperBordered]:b})}>${this.renderActionsStart()}${this.renderContentContainer()}${this.renderActionsEnd()}</div></div>${this.renderContentBottom()}</div>${this.renderDefaultContainer()}`})}};mA.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentBottom:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],hasCustomContent:[16,{},{state:!0}],level:[16,{},{state:!0}],expandable:[16,{},{state:!0}],parentListEl:[16,{},{state:!0}],active:[5,{},{type:Boolean}],bordered:[5,{},{type:Boolean}],sortDisabled:[5,{},{type:Boolean}],closable:[7,{},{reflect:!0,type:Boolean}],closed:[7,{},{reflect:!0,type:Boolean}],description:1,disabled:[7,{},{reflect:!0,type:Boolean}],dragDisabled:[7,{},{reflect:!0,type:Boolean}],dragHandle:[7,{},{reflect:!0,type:Boolean}],expanded:[7,{},{reflect:!0,type:Boolean}],filterHidden:[7,{},{reflect:!0,type:Boolean}],interactionMode:1,label:1,messageOverrides:[0,{},{attribute:!1}],metadata:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],selected:[7,{},{reflect:!0,type:Boolean}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortHandleOpen:[7,{},{reflect:!0,type:Boolean}],unavailable:[7,{},{reflect:!0,type:Boolean}],value:1,iconStart:[3,{},{reflect:!0}],iconEnd:[3,{},{reflect:!0}],iconFlipRtl:[3,{},{reflect:!0}]},mA.styles=[mrt,frt];let PP=mA;fi("calcite-list-item",PP);const bxt=Object.freeze(Object.defineProperty({__proto__:null,ListItem:PP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const cN={container:"container",track:"track",handle:"handle"},yrt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]) .container{block-size:.75rem}:host([scale=s]) .track{block-size:.75rem;inline-size:1.5rem}:host([scale=s]) .handle{block-size:.5rem;inline-size:.5rem}:host([scale=m]) .container{block-size:1rem}:host([scale=m]) .track{block-size:1rem;inline-size:2rem}:host([scale=m]) .handle{block-size:.75rem;inline-size:.75rem}:host([scale=l]) .container{block-size:1.5rem}:host([scale=l]) .track{block-size:1.5rem;inline-size:3rem}:host([scale=l]) .handle{block-size:1.25rem;inline-size:1.25rem}:host{position:relative;display:inline-block;inline-size:auto;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;tap-highlight-color:transparent}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{outline-width:0px;display:flex}.track{pointer-events:none;position:relative;box-sizing:border-box;display:inline-block;vertical-align:top;outline-color:transparent;border-radius:var(--calcite-switch-corner-radius, 9999px);border-color:var(--calcite-switch-border-color);background-color:var(--calcite-switch-background-color, var(--calcite-color-border-input))}.container:focus .track{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container:hover .track{background-color:var(--calcite-switch-background-color-hover, var(--calcite-color-text-3))}.handle{pointer-events:none;position:absolute;display:block;transition-property:all;transition-duration:var(--calcite-animation-timing);transition-timing-function:cubic-bezier(.4,0,.2,1);inset-block-start:var(--calcite-spacing-base);inset-inline:var(--calcite-spacing-base) auto;background-color:var(--calcite-switch-handle-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-switch-handle-border-color);border-radius:var(--calcite-switch-corner-radius, 9999px);box-shadow:var(--calcite-switch-handle-shadow)}:host([checked]) .track{background-color:var(--calcite-switch-background-color, var(--calcite-color-brand))}:host([checked]) .handle{inset-inline:auto var(--calcite-spacing-base)}:host([checked]):host(:hover:not([disabled])) .track{background-color:var(--calcite-switch-background-color-hover, var(--calcite-color-brand-hover))}@media (forced-colors: active){:host([checked]) .track{background-color:canvasText}}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}`,yA=class yA extends it{constructor(){super(),this.switchRef=wi(),this.focusSetter=ds()(this),this.checked=!1,this.disabled=!1,this.scale="m",this.calciteSwitchChange=ve({cancelable:!1}),this.listen("click",this.clickHandler),this.listen("keydown",this.keyDownHandler)}async setFocus(e){return this.focusSetter(()=>this.switchRef.value,e)}connectedCallback(){super.connectedCallback(),q_(this),F9(this)}updated(){wn(this)}disconnectedCallback(){super.disconnectedCallback(),nL(this),j9(this)}syncHiddenFormInput(e){e.type="checkbox"}keyDownHandler(e){!this.disabled&&kg(e.key)&&(this.toggle(),e.preventDefault())}onLabelClick(){this.disabled||(this.toggle(),this.setFocus())}toggle(){this.checked=!this.checked,this.calciteSwitchChange.emit()}clickHandler(){this.disabled||this.toggle()}render(){return _n({disabled:this.disabled,children:j`<div .ariaChecked=${this.checked} .ariaLabel=${U$(this)} class=${O(cN.container)} role=switch tabindex=0 ${ct(this.switchRef)}>${this.labelTextStart&&vP({alignmentCenter:!0,bottomSpacingDisabled:!0,labelText:this.labelTextStart,spacingInlineEnd:!0})||""}<div class=${O(cN.track)}><div class=${O(cN.handle)}></div></div>${this.labelTextEnd&&vP({alignmentCenter:!0,bottomSpacingDisabled:!0,labelText:this.labelTextEnd,spacingInlineStart:!0})||""}${V9({component:this})}</div>`})}};yA.properties={checked:[7,{},{reflect:!0,type:Boolean}],disabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],label:1,labelTextEnd:1,labelTextStart:1,name:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],value:1},yA.styles=yrt;let Kj=yA;fi("calcite-switch",Kj);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const grt={container:"container"},vrt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .5rem)}:host([scale=m]) .container{gap:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, .75rem)}:host([scale=l]) .container{gap:.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-color-text-1);color:var(--calcite-label-text-color, var(--calcite-color-text-1))}:host([layout=block]) .container,:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:.5rem}:host([layout=inline][scale=l]) .container{gap:.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity: 1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity: 0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,gA=class gA extends it{constructor(){super(),this.alignment="start",this.layout="default",this.scale="m",this.calciteInternalLabelClick=ve({bubbles:!1,cancelable:!1}),this.listen("click",this.labelClickHandler)}connectedCallback(){super.connectedCallback(),document.dispatchEvent(new CustomEvent(sL))}willUpdate(e){e.has("for")&&tet(this.el)}disconnectedCallback(){super.disconnectedCallback(),document.dispatchEvent(new CustomEvent(rP))}labelClickHandler(e){window.getSelection()?.type!=="Range"&&this.calciteInternalLabelClick.emit({sourceEvent:e})}render(){return j`<div class=${O(grt.container)}><slot></slot></div>`}};gA.properties={alignment:[3,{},{reflect:!0}],for:[3,{},{reflect:!0}],layout:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}]},gA.styles=vrt;let AP=gA;fi("calcite-label",AP);const nye=Object.freeze(Object.defineProperty({__proto__:null,Label:AP},Symbol.toStringTag,{value:"Module"}));/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const fc={container:"container",contentWrapper:"content-wrapper",header:"header",footer:"footer",checkboxWrapper:"checkbox-wrapper",checkboxWrapperDeprecated:"checkbox-wrapper-deprecated",thumbnailWrapper:"thumbnail-wrapper",headerTextContainer:"header-text-container",cardContent:"card-content",hasSlottedContent:"has-slotted-content"},cm={thumbnail:"thumbnail",heading:"heading",description:"description",footerStart:"footer-start",footerEnd:"footer-end",title:"title",subtitle:"subtitle"},Xk={selected:"check-square-f",unselected:"square",selectedSingle:"circle-f",unselectedSingle:"circle"},brt=Qe`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;max-inline-size:100%}.content-wrapper{position:relative;display:flex;block-size:100%;flex-direction:column;justify-content:space-between;overflow:hidden;border:var(--calcite-border-width-sm) solid var(--calcite-card-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-card-corner-radius, var(--calcite-corner-radius-sharp));background-color:var(--calcite-card-background-color, var(--calcite-color-foreground-1));box-shadow:var(--calcite-card-shadow, var(--calcite-shadow-none));pointer-events:none}::slotted(*){pointer-events:auto}:host(:not([selectable])) .content-wrapper:not(.non-interactive){outline-color:transparent}:host(:not([selectable])) .content-wrapper:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container{position:relative;display:flex;flex:1 1 auto;flex-direction:column}:host([loading]) .content-wrapper *:not(calcite-loader):not(.calcite-card-loader-container){pointer-events:none;opacity:0}:host([loading]) .calcite-card-loader-container{position:absolute;inset:0;display:flex;align-items:center}.header{display:flex;flex-direction:row;align-items:flex-start}.footer{margin-block-start:auto;display:flex;flex-direction:row;align-content:space-between;justify-content:space-between;padding-inline:var(--calcite-spacing-md);padding-block-start:var(--calcite-spacing-xxs);padding-block-end:var(--calcite-spacing-md)}.header-text-container{display:flex;inline-size:100%;flex-direction:column;justify-content:center;padding-inline:.75rem;padding-block:.5rem}.header-text-container:not(:only-child){padding-inline-end:.125rem}.footer{margin-block-start:auto;flex-direction:row;align-content:space-between;justify-content:space-between;padding-inline:.75rem;padding-block:.25rem .75rem}.card-content{block-size:auto;font-size:var(--calcite-font-size--2);line-height:1.375}.has-slotted-content{padding:.75rem}:host([selected]) .content-wrapper{box-shadow:inset 0 -4px 0 0 var(--calcite-card-accent-color-selected, var(--calcite-color-brand))}:host([selectable]) .header{padding-inline-end:var(--calcite-spacing-xxxl)}slot[name=title]::slotted(*),*::slotted([slot=title]){margin:0;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=subtitle]::slotted(*),*::slotted([slot=subtitle]){margin:0;margin-block-start:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}slot[name=heading]::slotted(*),*::slotted([slot=heading]){margin:0;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}slot[name=description]::slotted(*),*::slotted([slot=description]){margin:0;margin-block-start:.125rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}slot[name=thumbnail]::slotted(img),img::slotted([slot=thumbnail]){min-inline-size:100%;max-inline-size:100%}slot[name=footer-start]::slotted(*),*::slotted([slot=footer-start]){align-self:center;font-size:var(--calcite-font-size--2);line-height:1.375;margin-inline-end:auto}slot[name=footer-end]::slotted(*),*::slotted([slot=footer-end]){align-self:center;font-size:var(--calcite-font-size--2);line-height:1.375}.checkbox-wrapper-deprecated{pointer-events:auto;position:absolute;inset-block-start:var(--calcite-spacing-sm);inset-inline-end:var(--calcite-spacing-sm);margin:0;padding:0;color:var(--calcite-card-selection-color, var(--calcite-color-text-3))}.checkbox-wrapper-deprecated:hover{background-color:var(--calcite-card-selection-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-card-selection-color-hover, var(--calcite-card-selection-icon-color-hover, var(--calcite-color-text-2)))}.checkbox-wrapper-deprecated:active{background-color:var(--calcite-card-selection-background-color-press, var(--calcite-color-transparent-press))}.checkbox-wrapper{pointer-events:auto;margin:.5rem;cursor:pointer;padding:.5rem;outline-color:transparent;display:flex;align-items:center;justify-items:center;color:var(--calcite-card-selection-color, var(--calcite-color-text-3))}.checkbox-wrapper:hover{background-color:var(--calcite-card-selection-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-card-selection-color-hover, var(--calcite-card-selection-icon-color-hover, var(--calcite-color-text-2)))}.checkbox-wrapper:active{background-color:var(--calcite-card-selection-background-color-press, var(--calcite-color-transparent-press))}.checkbox-wrapper calcite-icon{pointer-events:none}:host([selected]) .checkbox-wrapper-deprecated,:host([selected]) .checkbox-wrapper{color:var(--calcite-card-accent-color-selected, var(--calcite-card-selection-icon-color-selected, var(--calcite-color-brand)))}:host(:not([selectable])) .content-wrapper:not(.non-interactive):focus .checkbox-wrapper-deprecated,:host(:not([selectable])) .content-wrapper:not(.non-interactive):focus .checkbox-wrapper{background-color:var(--calcite-card-selection-background-color-hover, var(--calcite-color-foreground-2));color:var(--calcite-card-selection-color-hover, var(--calcite-card-selection-icon-color-hover, var(--calcite-color-text-2)))}:host([selected]:not([selectable])) .content-wrapper:not(.non-interactive):focus .checkbox-wrapper-deprecated,:host([selected]:not([selectable])) .content-wrapper:not(.non-interactive):focus .checkbox-wrapper{background-color:var(--calcite-card-selection-background-color-press, var(--calcite-color-transparent-press));color:var(--calcite-card-accent-color-selected, var(--calcite-card-selection-icon-color-selected, var(--calcite-color-brand)))}.thumbnail-wrapper{display:flex}.content-wrapper.inline{flex-direction:row}.content-wrapper.inline>.container{inline-size:60%}.content-wrapper.inline>.thumbnail-wrapper{inline-size:40%;align-items:flex-start}.content-wrapper.inline slot[name=thumbnail]::slotted(img),.content-wrapper.inline img::slotted([slot=thumbnail]){inline-size:100%}slot[name=footer-start]::slotted(*),slot[name=footer-end]::slotted(*){display:flex;gap:.25rem}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`,vA=class vA extends it{constructor(){super(...arguments),this.containerEl=wi(),this.messages=xn(),this.focusSetter=ds()(this),this.hasContent=!1,this.hasDescription=!1,this.hasFooterEnd=!1,this.hasFooterStart=!1,this.hasHeading=!1,this.hasSubtitle=!1,this.hasThumbnail=!1,this.hasTitle=!1,this.disabled=!1,this.loading=!1,this.selectable=!1,this.selected=!1,this.selectionMode="none",this.thumbnailPosition="block-start",this.calciteCardSelect=ve({cancelable:!1}),this.calciteInternalCardKeyEvent=ve({cancelable:!1})}async setFocus(e){return this.focusSetter(()=>({target:this.containerEl.value,includeContainer:!0}),e)}updated(){wn(this)}handleThumbnailSlotChange(e){this.hasThumbnail=Ft(e)}handleHeadingSlotChange(e){this.hasHeading=Ft(e)}handleDescriptionSlotChange(e){this.hasDescription=Ft(e)}handleTitleSlotChange(e){this.hasTitle=Ft(e)}handleSubtitleSlotChange(e){this.hasSubtitle=Ft(e)}handleFooterStartSlotChange(e){this.hasFooterStart=Ft(e)}handleFooterEndSlotChange(e){this.hasFooterEnd=Ft(e)}handleDefaultSlotChange(e){this.hasContent=Ft(e)}keyDownHandler(e){if(e.target===this.containerEl.value&&!this.selectable&&!this.disabled)if(kg(e.key)&&this.selectionMode!=="none")this.calciteCardSelect.emit(),e.preventDefault();else switch(e.key){case"ArrowRight":case"ArrowLeft":case"Home":case"End":this.calciteInternalCardKeyEvent.emit(e),e.preventDefault();break}}cardBodyClickHandler(e){e.target===this.containerEl.value&&!this.selectable&&!this.disabled&&this.selectionMode!=="none"&&this.calciteCardSelect.emit()}selectCardDeprecated(e){this.selected=e.currentTarget.checked,this.calciteCardSelect.emit()}cardSelectClick(e){this.disabled||(e.preventDefault(),this.calciteCardSelect.emit(),this.setFocus())}renderCheckboxDeprecated(){return j`<calcite-label class=${O(fc.checkboxWrapperDeprecated)}><calcite-checkbox .checked=${this.selected} .label=${this.messages.select} @calciteCheckboxChange=${this.selectCardDeprecated}></calcite-checkbox></calcite-label>`}renderThumbnail(){return j`<section class=${O(fc.thumbnailWrapper)} .hidden=${!this.hasThumbnail}><slot name=${cm.thumbnail} @slotchange=${this.handleThumbnailSlotChange}></slot></section>`}renderSelectionIcon(){const e=this.selectionMode==="multiple"&&this.selected?Xk.selected:this.selectionMode==="multiple"?Xk.unselected:this.selected?Xk.selectedSingle:Xk.unselectedSingle;return j`<div class=${O(fc.checkboxWrapper)} @pointerdown=${this.cardSelectClick} tabindex=-1><calcite-icon .icon=${e} scale=s></calcite-icon></div>`}renderHeader(){const e=this.hasHeading||this.hasDescription,i=this.hasSubtitle||this.hasTitle,r=e||i;return j`<header class=${O(fc.header)} .hidden=${!r}>${this.selectable?this.renderCheckboxDeprecated():null}<div class=${O(fc.headerTextContainer)}><slot name=${cm.heading} @slotchange=${this.handleHeadingSlotChange}></slot><slot name=${cm.description} @slotchange=${this.handleDescriptionSlotChange}></slot><slot name=${cm.title} @slotchange=${this.handleTitleSlotChange}></slot><slot name=${cm.subtitle} @slotchange=${this.handleSubtitleSlotChange}></slot></div>${this.selectionMode!=="none"&&this.renderSelectionIcon()||""}</header>`}renderFooter(){const e=this.hasFooterStart||this.hasFooterEnd;return j`<footer class=${O(fc.footer)} .hidden=${!e}><slot name=${cm.footerStart} @slotchange=${this.handleFooterStartSlotChange}></slot><slot name=${cm.footerEnd} @slotchange=${this.handleFooterEndSlotChange}></slot></footer>`}render(){const e=this.thumbnailPosition.startsWith("inline"),i=this.thumbnailPosition.endsWith("start"),r=this.selectionMode==="multiple"?"checkbox":this.selectionMode!=="none"?"radio":void 0;return _n({disabled:this.disabled,children:j`<div .ariaChecked=${this.selectionMode!=="none"?this.selected:void 0} .ariaLabel=${this.label} class=${O({[fc.contentWrapper]:!0,inline:e})} @click=${this.cardBodyClickHandler} @keydown=${this.keyDownHandler} .role=${r} .tabIndex=${!this.selectable||this.disabled?0:-1} ${ct(this.containerEl)}>${this.loading?j`<div aria-live=polite class="calcite-card-loader-container"><calcite-loader .label=${this.messages.loading}></calcite-loader></div>`:null}${i&&this.renderThumbnail()||""}<section .ariaBusy=${this.loading} class=${O({[fc.container]:!0})}>${this.renderHeader()}<div class=${O({[fc.cardContent]:!0,[fc.hasSlottedContent]:this.hasContent})}><slot @slotchange=${this.handleDefaultSlotChange}></slot></div>${this.renderFooter()}</section>${!i&&this.renderThumbnail()||""}</div>`})}};vA.properties={hasContent:[16,{},{state:!0}],hasDescription:[16,{},{state:!0}],hasFooterEnd:[16,{},{state:!0}],hasFooterStart:[16,{},{state:!0}],hasHeading:[16,{},{state:!0}],hasSubtitle:[16,{},{state:!0}],hasThumbnail:[16,{},{state:!0}],hasTitle:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],selectable:[7,{},{reflect:!0,type:Boolean}],selected:[7,{},{reflect:!0,type:Boolean}],selectionMode:1,thumbnailPosition:[3,{},{reflect:!0}]},vA.styles=brt;let Xj=vA;fi("calcite-card",Xj);var Cf,Di,uN,oX,r_=0,oye=[],ir=gt,aX=ir.__b,lX=ir.__r,cX=ir.diffed,uX=ir.__c,dX=ir.unmount,hX=ir.__;function H_(t,e){ir.__h&&ir.__h(Di,t,r_||e),r_=0;var i=Di.__H||(Di.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function sc(t){return r_=1,Q9(dye,t)}function Q9(t,e,i){var r=H_(Cf++,2);if(r.t=t,!r.__c&&(r.__=[i?i(e):dye(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],c=r.t(l,a);l!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=Di,!Di.__f)){var s=function(a,l,c){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!n||n.call(this,a,l,c);var h=r.__c.props!==a;return d.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(h=!0)}}),n&&n.call(this,a,l,c)||h};Di.__f=!0;var n=Di.shouldComponentUpdate,o=Di.componentWillUpdate;Di.componentWillUpdate=function(a,l,c){if(this.__e){var d=n;n=void 0,s(a,l,c),n=d}o&&o.call(this,a,l,c)},Di.shouldComponentUpdate=s}return r.__N||r.__}function Ot(t,e){var i=H_(Cf++,3);!ir.__s&&e7(i.__H,e)&&(i.__=t,i.u=e,Di.__H.__h.push(i))}function K2(t,e){var i=H_(Cf++,4);!ir.__s&&e7(i.__H,e)&&(i.__=t,i.u=e,Di.__h.push(i))}function kt(t){return r_=5,Wg(function(){return{current:t}},[])}function aye(t,e,i){r_=6,K2(function(){if(typeof t=="function"){var r=t(e());return function(){t(null),r&&typeof r=="function"&&r()}}if(t)return t.current=e(),function(){return t.current=null}},i==null?i:i.concat(t))}function Wg(t,e){var i=H_(Cf++,7);return e7(i.__H,e)&&(i.__=t(),i.__H=e,i.__h=t),i.__}function Eo(t,e){return r_=8,Wg(function(){return t},e)}function lye(t){var e=Di.context[t.__c],i=H_(Cf++,9);return i.c=t,e?(i.__==null&&(i.__=!0,e.sub(Di)),e.props.value):t.__}function cye(t,e){ir.useDebugValue&&ir.useDebugValue(e?e(t):t)}function uye(){var t=H_(Cf++,11);if(!t.__){for(var e=Di.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var i=e.__m||(e.__m=[0,0]);t.__="P"+i[0]+"-"+i[1]++}return t.__}function wrt(){for(var t;t=oye.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(XE),t.__H.__h.forEach(Qj),t.__H.__h=[]}catch(e){t.__H.__h=[],ir.__e(e,t.__v)}}ir.__b=function(t){Di=null,aX&&aX(t)},ir.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),hX&&hX(t,e)},ir.__r=function(t){lX&&lX(t),Cf=0;var e=(Di=t.__c).__H;e&&(uN===Di?(e.__h=[],Di.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(e.__h.forEach(XE),e.__h.forEach(Qj),e.__h=[],Cf=0)),uN=Di},ir.diffed=function(t){cX&&cX(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(oye.push(e)!==1&&oX===ir.requestAnimationFrame||((oX=ir.requestAnimationFrame)||_rt)(wrt)),e.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),uN=Di=null},ir.__c=function(t,e){e.some(function(i){try{i.__h.forEach(XE),i.__h=i.__h.filter(function(r){return!r.__||Qj(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],ir.__e(r,i.__v)}}),uX&&uX(t,e)},ir.unmount=function(t){dX&&dX(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(r){try{XE(r)}catch(s){e=s}}),i.__H=void 0,e&&ir.__e(e,i.__v))};var pX=typeof requestAnimationFrame=="function";function _rt(t){var e,i=function(){clearTimeout(r),pX&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(i,35);pX&&(e=requestAnimationFrame(i))}function XE(t){var e=Di,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),Di=e}function Qj(t){var e=Di;t.__c=t.__(),Di=e}function e7(t,e){return!t||t.length!==e.length||e.some(function(i,r){return i!==t[r]})}function dye(t,e){return typeof e=="function"?e(t):e}var xrt=Symbol.for("preact-signals");function pL(){if(hf>1)hf--;else{for(var t,e=!1;GS!==void 0;){var i=GS;for(GS=void 0,eV++;i!==void 0;){var r=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&fye(i))try{i.c()}catch(s){e||(t=s,e=!0)}i=r}}if(eV=0,hf--,e)throw t}}function dN(t){if(hf>0)return t();hf++;try{return t()}finally{pL()}}var si=void 0;function hye(t){var e=si;si=void 0;try{return t()}finally{si=e}}var GS=void 0,hf=0,eV=0,LP=0;function pye(t){if(si!==void 0){var e=t.n;if(e===void 0||e.t!==si)return e={i:0,S:t,p:si.s,n:void 0,t:si,e:void 0,x:void 0,r:e},si.s!==void 0&&(si.s.n=e),si.s=e,t.n=e,32&si.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=si.s,e.n=void 0,si.s.n=e,si.s=e),e}}function Ws(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched}Ws.prototype.brand=xrt;Ws.prototype.h=function(){return!0};Ws.prototype.S=function(t){var e=this,i=this.t;i!==t&&t.e===void 0&&(t.x=i,this.t=t,i!==void 0?i.e=t:hye(function(){var r;(r=e.W)==null||r.call(e)}))};Ws.prototype.U=function(t){var e=this;if(this.t!==void 0){var i=t.e,r=t.x;i!==void 0&&(i.x=r,t.e=void 0),r!==void 0&&(r.e=i,t.x=void 0),t===this.t&&(this.t=r,r===void 0&&hye(function(){var s;(s=e.Z)==null||s.call(e)}))}};Ws.prototype.subscribe=function(t){var e=this;return fL(function(){var i=e.value,r=si;si=void 0;try{t(i)}finally{si=r}})};Ws.prototype.valueOf=function(){return this.value};Ws.prototype.toString=function(){return this.value+""};Ws.prototype.toJSON=function(){return this.value};Ws.prototype.peek=function(){var t=si;si=void 0;try{return this.value}finally{si=t}};Object.defineProperty(Ws.prototype,"value",{get:function(){var t=pye(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(eV>100)throw new Error("Cycle detected");this.v=t,this.i++,LP++,hf++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{pL()}}}});function Zn(t,e){return new Ws(t,e)}function fye(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function mye(t){for(var e=t.s;e!==void 0;e=e.n){var i=e.S.n;if(i!==void 0&&(e.r=i),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function yye(t){for(var e=t.s,i=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):i=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=i}function Jg(t,e){Ws.call(this,void 0),this.x=t,this.s=void 0,this.g=LP-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched}Jg.prototype=new Ws;Jg.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===LP))return!0;if(this.g=LP,this.f|=1,this.i>0&&!fye(this))return this.f&=-2,!0;var t=si;try{mye(this),si=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(i){this.v=i,this.f|=16,this.i++}return si=t,yye(this),this.f&=-2,!0};Jg.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}Ws.prototype.S.call(this,t)};Jg.prototype.U=function(t){if(this.t!==void 0&&(Ws.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};Jg.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(Jg.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=pye(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function il(t,e){return new Jg(t,e)}function gye(t){var e=t.u;if(t.u=void 0,typeof e=="function"){hf++;var i=si;si=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,t7(t),r}finally{si=i,pL()}}}function t7(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,gye(t)}function Srt(t){if(si!==this)throw new Error("Out-of-order effect");yye(this),si=t,this.f&=-2,8&this.f&&t7(this),pL()}function W_(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}W_.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};W_.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,gye(this),mye(this),hf++;var t=si;return si=this,Srt.bind(this,t)};W_.prototype.N=function(){2&this.f||(this.f|=2,this.o=GS,GS=this)};W_.prototype.d=function(){this.f|=8,1&this.f||t7(this)};W_.prototype.dispose=function(){this.d()};function fL(t){var e=new W_(t);try{e.c()}catch(r){throw e.d(),r}var i=e.d.bind(e);return i[Symbol.dispose]=i,i}var mL,hN;function J_(t,e){gt[t]=e.bind(null,gt[t]||function(){})}function OP(t){hN&&hN(),hN=t&&t.S()}function vye(t){var e=this,i=t.data,r=De(i);r.value=i;var s=Wg(function(){for(var n=e.__v;n=n.__;)if(n.__c){n.__c.__$f|=4;break}return e.__$u.c=function(){var o,a=e.__$u.S(),l=s.value;a(),LQ(l)||((o=e.base)==null?void 0:o.nodeType)!==3?(e.__$f|=1,e.setState({})):e.base.data=l},il(function(){var o=r.value.value;return o===0?0:o===!0?"":o||""})},[]);return s.value}vye.displayName="_st";Object.defineProperties(Ws.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:vye},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});J_("__b",function(t,e){if(typeof e.type=="string"){var i,r=e.props;for(var s in r)if(s!=="children"){var n=r[s];n instanceof Ws&&(i||(e.__np=i={}),i[s]=n,r[s]=n.peek())}}t(e)});J_("__r",function(t,e){OP();var i,r=e.__c;r&&(r.__$f&=-2,(i=r.__$u)===void 0&&(r.__$u=i=function(s){var n;return fL(function(){n=this}),n.c=function(){r.__$f|=1,r.setState({})},n}())),mL=r,OP(i),t(e)});J_("__e",function(t,e,i,r){OP(),mL=void 0,t(e,i,r)});J_("diffed",function(t,e){OP(),mL=void 0;var i;if(typeof e.type=="string"&&(i=e.__e)){var r=e.__np,s=e.props;if(r){var n=i.U;if(n)for(var o in n){var a=n[o];a!==void 0&&!(o in r)&&(a.d(),n[o]=void 0)}else i.U=n={};for(var l in r){var c=n[l],d=r[l];c===void 0?(c=$rt(i,l,d,s),n[l]=c):c.o(d,s)}}}t(e)});function $rt(t,e,i,r){var s=e in t&&t.ownerSVGElement===void 0,n=Zn(i);return{o:function(o,a){n.value=o,r=a},d:fL(function(){var o=n.value.value;r[e]!==o&&(r[e]=o,s?t[e]=o:o?t.setAttribute(e,o):t.removeAttribute(e))})}}J_("unmount",function(t,e){if(typeof e.type=="string"){var i=e.__e;if(i){var r=i.U;if(r){i.U=void 0;for(var s in r){var n=r[s];n&&n.d()}}}}else{var o=e.__c;if(o){var a=o.__$u;a&&(o.__$u=void 0,a.d())}}t(e)});J_("__h",function(t,e,i,r){(r<3||r===9)&&(e.__$f|=2),t(e,i,r)});Kl.prototype.shouldComponentUpdate=function(t,e){var i=this.__$u,r=i&&i.s!==void 0;for(var s in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(r||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var n in t)if(n!=="__source"&&t[n]!==this.props[n])return!0;for(var o in this.props)if(!(o in t))return!0;return!1};function De(t){return Wg(function(){return Zn(t)},[])}function Jt(t){var e=kt(t);return e.current=t,mL.__$f|=4,Wg(function(){return il(function(){return e.current()})},[])}function tV(t){var e=kt(t);e.current=t,Ot(function(){return fL(function(){return e.current()})},[])}const Irt=t=>{try{return[JSON.parse(t),null]}catch(e){return[null,e instanceof Error?e.message:"Parse error"]}},krt=t=>{const e=new Set,i=r=>{for(const s of r||[])for(const n of s.items||[])for(const o of n.layersIds||[])e.add(o)};return i(t.weatherFeatures),i(t.features),e},bye=(t,e)=>{const i=[],r=(s,n)=>{s.forEach((o,a)=>{(o.items||[]).forEach((l,c)=>{(l.layersIds||[]).includes(e)&&i.push({featureType:n,featureIndex:a,featureName:o.name||o.id||`${n} ${a+1}`,itemIndex:c,itemName:l.name||l.id||`Item ${c+1}`})})})};return r(t.weatherFeatures,"weatherFeatures"),r(t.features,"features"),i},Trt=(t,e,i="application/json")=>{const r=new Blob([e],{type:i}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)},i7=()=>({weatherFeatures:[],features:[],layers:[],intl:{en:{},da:{},nb:{},sv:{}}}),iV=t=>{if(!t||typeof t!="object")return i7();if(t.map_layers&&typeof t.map_layers=="object"){const e=t.map_layers;return mX({weatherFeatures:e.weatherFeatures||[],features:e.features||[],layers:e.layers||[],baseMaps:e.baseMaps,intl:e.intl||{en:{},da:{},nb:{},sv:{}}})}return mX({weatherFeatures:t.weatherFeatures||[],features:t.features||[],layers:t.layers||[],baseMaps:t.baseMaps,intl:t.intl||{en:{},da:{},nb:{},sv:{}}})},Ert=new Set(["id","name","showLegend","legendUrl","legendDescription","layersIds"]),Mrt=new Set(["id","name","presentation","mutuallyExclusive","items"]),Crt=new Set(["id","layers","category","copyright","country"]),Prt=new Set(["type","source","zIndex","refreshInterval","options"]);function Art(t){const e={};for(const i of Object.keys(t))Ert.has(i)&&(e[i]=t[i]);return e}function fX(t){const e={};for(const i of Object.keys(t))Mrt.has(i)&&(i==="items"&&Array.isArray(t.items)?e.items=t.items.map(Art):e[i]=t[i]);return e}function Lrt(t){const e={};for(const i of Object.keys(t))Prt.has(i)&&(e[i]=t[i]);return e}function Ort(t){const e={};for(const i of Object.keys(t))Crt.has(i)&&(i==="layers"&&Array.isArray(t.layers)?e.layers=t.layers.map(Lrt):e[i]=t[i]);return e}const mX=t=>{const e={weatherFeatures:(t.weatherFeatures||[]).map(fX),features:(t.features||[]).map(fX),layers:(t.layers||[]).map(Ort),intl:t.intl||{en:{},da:{},nb:{},sv:{}}};return t.baseMaps&&Array.isArray(t.baseMaps)&&(e.baseMaps=t.baseMaps),e},Rrt=t=>{const[e,i]=Irt(t);if(i)return{valid:!1,errors:[`JSON Parse Error: ${i}`],warnings:[]};const r=[],s=[];if(!e||typeof e!="object")return r.push("Root must be an object"),{valid:!1,errors:r,warnings:s};const n=["weatherFeatures","features","layers"];for(const a of n)Array.isArray(e[a])||r.push(`Missing or invalid '${a}' array`);if(!e.intl||typeof e.intl!="object")r.push("Missing or invalid 'intl' object");else{const a=["en","da","nb","sv"];for(const l of a)(!e.intl[l]||typeof e.intl[l]!="object")&&s.push(`Missing or invalid '${l}' translations`)}[...e.weatherFeatures||[],...e.features||[]].forEach((a,l)=>{const c=l<(e.weatherFeatures?.length||0)?"weatherFeature":"feature",d=l<(e.weatherFeatures?.length||0)?l:l-(e.weatherFeatures?.length||0);(!a.presentation||!["single","multiple"].includes(a.presentation))&&r.push(`${c} ${d+1}: presentation field is required and must be "single" or "multiple"`),!a.items||!Array.isArray(a.items)?r.push(`${c} ${d+1}: items field is required and must be an array`):a.items.forEach((h,f)=>{(!h.id||typeof h.id!="string"||h.id.trim()==="")&&r.push(`${c} ${d+1}, item ${f+1}: id is required and cannot be empty`),(!h.name||typeof h.name!="string"||h.name.trim()==="")&&r.push(`${c} ${d+1}, item ${f+1}: name is required and cannot be empty`),(!h.layersIds||!Array.isArray(h.layersIds)||h.layersIds.length===0)&&r.push(`${c} ${d+1}, item ${f+1}: layersIds is required and must be a non-empty array`)})}),e.layers&&Array.isArray(e.layers)&&e.layers.forEach((a,l)=>{(!a.id||typeof a.id!="string"||a.id.trim()==="")&&r.push(`layer ${l+1}: id is required and cannot be empty`),!a.layers||!Array.isArray(a.layers)||a.layers.length===0?r.push(`layer ${l+1}: layers field is required and must be a non-empty array`):a.layers.forEach((c,d)=>{(!c.type||typeof c.type!="string")&&r.push(`layer ${l+1}, sublayer ${d+1}: type is required`),(!c.source||typeof c.source!="string"||c.source.trim()==="")&&r.push(`layer ${l+1}, sublayer ${d+1}: source is required and cannot be empty`)})});try{const a=krt(e),l=new Set((e.layers||[]).map(d=>d.id).filter(Boolean)),c=[...a].filter(d=>!l.has(d));c.length>0&&s.push(`Missing layer definitions: ${c.join(", ")}`)}catch{s.push("Could not validate layer references")}if(e.baseMaps!==void 0)if(!Array.isArray(e.baseMaps))r.push("'baseMaps' must be an array if present");else{const a=new Set;e.baseMaps.forEach((l,c)=>{const d=`basemap ${c+1}`;if(!l.id||typeof l.id!="string"||l.id.trim()===""?r.push(`${d}: id is required and cannot be empty`):(a.has(l.id)&&r.push(`${d}: duplicate id "${l.id}"`),a.add(l.id)),(!l.name||typeof l.name!="string"||l.name.trim()==="")&&r.push(`${d}: name is required and cannot be empty`),!l.baseLayers||!Array.isArray(l.baseLayers)?r.push(`${d}: baseLayers is required and must be an array`):l.baseLayers.forEach((h,f)=>{yX(h,`${d}, baseLayer ${f+1}`,r)}),l.referenceLayers!==void 0&&!Array.isArray(l.referenceLayers)?r.push(`${d}: referenceLayers must be an array if present`):Array.isArray(l.referenceLayers)&&l.referenceLayers.forEach((h,f)=>{yX(h,`${d}, referenceLayer ${f+1}`,r)}),l.countries!==void 0)if(!Array.isArray(l.countries))r.push(`${d}: countries must be an array if present`);else{const h=["world","no","se","dk","fi"];l.countries.forEach((f,m)=>{h.includes(f)||s.push(`${d}: unknown country code "${f}" at index ${m}`)})}l.unitType!==void 0&&(["metric","aviation","nautical"].includes(l.unitType)||s.push(`${d}: unknown unitType "${l.unitType}"`))})}return{valid:r.length===0,errors:r,warnings:s}};function yX(t,e,i){const r=["wms","tiled","mapImage","portalItem","vectorTiled","feature","wmts","sceneLayer","unknown"];!t.type||typeof t.type!="string"?i.push(`${e}: type is required`):r.includes(t.type)||i.push(`${e}: unknown type "${t.type}"`),(!t.source||typeof t.source!="string"||t.source.trim()==="")&&i.push(`${e}: source is required and cannot be empty`),t.sourceKind!==void 0&&(["uri","portalItem"].includes(t.sourceKind)||i.push(`${e}: sourceKind must be "uri" or "portalItem"`))}const Nrt=t=>{try{const e=t.weatherFeatures?.length||0,i=t.features?.length||0,r=t.layers?.length||0,s=t.baseMaps?.length||0,n=Object.keys(t.intl||{}).length,o=[`WF: ${e}`,`F: ${i}`,`Layers: ${r}`];return s>0&&o.push(`Maps: ${s}`),o.push(`Langs: ${n}`),o.join("  ")}catch{return"Error computing summary"}},r7=["en","da","nb","sv"],gX=(t,e)=>{const i={...t};i.intl||(i.intl={en:{},da:{},nb:{},sv:{}});const r=[];return e.id?.trim()&&r.push({key:e.id,defaultValue:e.name?.trim()||e.id}),(e.items||[]).forEach(s=>{s.id?.trim()&&r.push({key:s.id,defaultValue:s.name?.trim()||s.id}),s.legendDescription?.trim()&&r.push({key:s.legendDescription,defaultValue:s.legendDescription})}),r7.forEach(s=>{i.intl[s]||(i.intl[s]={}),r.forEach(({key:n,defaultValue:o})=>{i.intl[s][n]||(s==="en"?i.intl[s][n]=o:i.intl[s][n]=i.intl.en[n]||o)})}),i},Drt=["wms","tiled","mapImage","portalItem","vectorTiled","feature","wmts","sceneLayer"],rf=t=>{const e={type:t,source:"",zIndex:0,options:{opacity:1}};switch(t){case"wms":return{...e,source:"https://example.com/wms",options:{layerNames:["layer1"],opacity:1}};case"tiled":return{...e,source:"https://example.com/tiles/{z}/{y}/{x}.png"};case"vectorTiled":return{...e,source:"https://example.com/vectortiles/{z}/{y}/{x}.pbf"};case"mapImage":return{...e,source:"https://example.com/arcgis/rest/services/MapServer"};case"feature":return{...e,source:"https://example.com/arcgis/rest/services/FeatureServer/0"};case"portalItem":return{...e,source:"portal-item-id",options:{layerId:0,opacity:1}};case"wmts":return{...e,source:"https://example.com/wmts",sourceKind:"uri"};case"sceneLayer":return{...e,source:"https://example.com/SceneServer",supportedDimensions:["scene"]};default:return e}},QE=(t,e)=>{const i={...t},r=i.layers.findIndex(s=>s.id===e.id);return r>=0?(i.layers=[...i.layers],i.layers[r]=e):i.layers=[...i.layers,e],i},Ne=Zn(i7()),jb=Zn(!1),RP=Zn({type:null,index:-1}),NP=Zn({index:-1}),pf=Zn({index:-1});Zn({});Zn({weatherFeatures:{},features:{}});Zn({});const n0=Zn("workspace"),wye=Zn("json");il(()=>JSON.stringify(Ne.value,null,2));const Frt=il(()=>Nrt(Ne.value));il(()=>{const t=RP.value;return t.type===null||t.index<0?null:Ne.value[t.type][t.index]||null});il(()=>{const t=NP.value;return t.index<0?null:Ne.value.layers[t.index]||null});il(()=>{const t=pf.value;return t.index<0?null:Ne.value.baseMaps?.[t.index]||null});const os=t=>{Ne.value=t,jb.value=!0;try{localStorage.setItem("hemswx-last-json-data",JSON.stringify(t))}catch(s){console.warn("Failed to save JSON data to localStorage:",s)}const e=RP.value;if(e.type&&e.index>=0){const s=t[e.type];e.index>=s.length&&(RP.value={type:null,index:-1})}const i=NP.value;i.index>=0&&i.index>=t.layers.length&&(NP.value={index:-1});const r=pf.value;r.index>=0&&r.index>=(t.baseMaps?.length||0)&&(pf.value={index:-1})},zrt=()=>{try{const t=localStorage.getItem("hemswx-last-json-data");if(t){const e=JSON.parse(t);return os(e),xu(" Last session data loaded"),!0}}catch(t){console.warn("Failed to load JSON data from localStorage:",t)}return!1},xu=t=>{},jrt=(t,e)=>{RP.value={type:t,index:e},wye.value="feature"},Vrt=t=>{NP.value={index:t},wye.value="layer"},Qk=t=>{pf.value={index:t}},pN=(t,e)=>{const i={...Ne.value},r=i.layers.findIndex(s=>s.id===t);r!==-1&&(i.layers=i.layers.map((s,n)=>n===r?{...s,...e}:s),os(i))},Urt=t=>Ne.value.layers.find(e=>e.id===t),Brt=t=>{const e={...Ne.value};e.baseMaps=(e.baseMaps||[]).filter((r,s)=>s!==t),e.baseMaps.length===0&&delete e.baseMaps,os(e);const i=pf.value;i.index===t?pf.value={index:-1}:i.index>t&&(pf.value={index:i.index-1})},qrt=t=>{const e={...Ne.value};e.baseMaps=[...e.baseMaps||[],t],os(e)};function Grt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vX(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function bX(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?vX(Object(i),!0).forEach(function(r){Grt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vX(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Hrt(t,e){if(t==null)return{};var i={},r=Object.keys(t),s,n;for(n=0;n<r.length;n++)s=r[n],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function Wrt(t,e){if(t==null)return{};var i=Hrt(t,e),r,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Jrt(t,e){return Zrt(t)||Yrt(t,e)||Krt(t,e)||Xrt()}function Zrt(t){if(Array.isArray(t))return t}function Yrt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var i=[],r=!0,s=!1,n=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,n=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw n}}return i}}function Krt(t,e){if(t){if(typeof t=="string")return wX(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wX(t,e)}}function wX(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Xrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qrt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _X(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,r)}return i}function xX(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?_X(Object(i),!0).forEach(function(r){Qrt(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_X(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function est(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduceRight(function(s,n){return n(s)},r)}}function Hx(t){return function e(){for(var i=this,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return s.length>=t.length?t.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(i,[].concat(s,a))}}}function DP(t){return{}.toString.call(t).includes("Object")}function tst(t){return!Object.keys(t).length}function W$(t){return typeof t=="function"}function ist(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rst(t,e){return DP(e)||ff("changeType"),Object.keys(e).some(function(i){return!ist(t,i)})&&ff("changeField"),e}function sst(t){W$(t)||ff("selectorType")}function nst(t){W$(t)||DP(t)||ff("handlerType"),DP(t)&&Object.values(t).some(function(e){return!W$(e)})&&ff("handlersType")}function ost(t){t||ff("initialIsRequired"),DP(t)||ff("initialType"),tst(t)&&ff("initialContent")}function ast(t,e){throw new Error(t[e]||t.default)}var lst={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ff=Hx(ast)(lst),eT={changes:rst,selector:sst,handler:nst,initial:ost};function cst(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};eT.initial(t),eT.handler(e);var i={current:t},r=Hx(hst)(i,e),s=Hx(dst)(i),n=Hx(eT.changes)(t),o=Hx(ust)(i);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return eT.selector(c),c(i.current)}function l(c){est(r,s,n,o)(c)}return[a,l]}function ust(t,e){return W$(e)?e(t.current):e}function dst(t,e){return t.current=xX(xX({},t.current),e),e}function hst(t,e,i){return W$(e)?e(t.current):Object.keys(i).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),i}var pst={create:cst},fst={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function mst(t){return function e(){for(var i=this,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return s.length>=t.length?t.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(i,[].concat(s,a))}}}function yst(t){return{}.toString.call(t).includes("Object")}function gst(t){return t||SX("configIsRequired"),yst(t)||SX("configType"),t.urls?(vst(),{paths:{vs:t.urls.monacoBase}}):t}function vst(){console.warn(_ye.deprecation)}function bst(t,e){throw new Error(t[e]||t.default)}var _ye={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},SX=mst(bst)(_ye),wst={config:gst},_st=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return function(s){return i.reduceRight(function(n,o){return o(n)},s)}};function xye(t,e){return Object.keys(e).forEach(function(i){e[i]instanceof Object&&t[i]&&Object.assign(e[i],xye(t[i],e[i]))}),bX(bX({},t),e)}var xst={type:"cancelation",msg:"operation is manually canceled"};function fN(t){var e=!1,i=new Promise(function(r,s){t.then(function(n){return e?s(xst):r(n)}),t.catch(s)});return i.cancel=function(){return e=!0},i}var Sst=pst.create({config:fst,isInitialized:!1,resolve:null,reject:null,monaco:null}),Sye=Jrt(Sst,2),X2=Sye[0],yL=Sye[1];function $st(t){var e=wst.config(t),i=e.monaco,r=Wrt(e,["monaco"]);yL(function(s){return{config:xye(s.config,r),monaco:i}})}function Ist(){var t=X2(function(e){var i=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:i,isInitialized:r,resolve:s}});if(!t.isInitialized){if(yL({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),fN(mN);if(window.monaco&&window.monaco.editor)return $ye(window.monaco),t.resolve(window.monaco),fN(mN);_st(kst,Est)(Mst)}return fN(mN)}function kst(t){return document.body.appendChild(t)}function Tst(t){var e=document.createElement("script");return t&&(e.src=t),e}function Est(t){var e=X2(function(r){var s=r.config,n=r.reject;return{config:s,reject:n}}),i=Tst("".concat(e.config.paths.vs,"/loader.js"));return i.onload=function(){return t()},i.onerror=e.reject,i}function Mst(){var t=X2(function(i){var r=i.config,s=i.resolve,n=i.reject;return{config:r,resolve:s,reject:n}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(i){$ye(i),t.resolve(i)},function(i){t.reject(i)})}function $ye(t){X2().monaco||yL({monaco:t})}function Cst(){return X2(function(t){var e=t.monaco;return e})}var mN=new Promise(function(t,e){return yL({resolve:t,reject:e})}),Iye={config:$st,init:Ist,__getMonacoInstance:Cst};function kye(t,e){for(var i in e)t[i]=e[i];return t}function rV(t,e){for(var i in t)if(i!=="__source"&&!(i in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function Tye(t,e){var i=e(),r=sc({t:{__:i,u:e}}),s=r[0].t,n=r[1];return K2(function(){s.__=i,s.u=e,yN(s)&&n({t:s})},[t,i,e]),Ot(function(){return yN(s)&&n({t:s}),t(function(){yN(s)&&n({t:s})})},[t]),i}function yN(t){var e,i,r=t.u,s=t.__;try{var n=r();return!((e=s)===(i=n)&&(e!==0||1/e==1/i)||e!=e&&i!=i)}catch{return!0}}function Eye(t){t()}function Mye(t){return t}function Cye(){return[!1,Eye]}var Pye=K2;function sV(t,e){this.props=t,this.context=e}function gL(t,e){function i(s){var n=this.props.ref,o=n==s.ref;return!o&&n&&(n.call?n(null):n.current=null),e?!e(this.props,s)||!o:rV(this.props,s)}function r(s){return this.shouldComponentUpdate=i,yh(t,s)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(sV.prototype=new Kl).isPureReactComponent=!0,sV.prototype.shouldComponentUpdate=function(t,e){return rV(this.props,t)||rV(this.state,e)};var $X=gt.__b;gt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),$X&&$X(t)};var Pst=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ast(t){function e(i){var r=kye({},i);return delete r.ref,t(r,i.ref||null)}return e.$$typeof=Pst,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var IX=function(t,e){return t==null?null:oh(oh(t).map(e))},Lst={map:IX,forEach:IX,count:function(t){return t?oh(t).length:0},only:function(t){var e=oh(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:oh},Ost=gt.__e;gt.__e=function(t,e,i,r){if(t.then){for(var s,n=e;n=n.__;)if((s=n.__c)&&s.__c)return e.__e==null&&(e.__e=i.__e,e.__k=i.__k),s.__c(t,e)}Ost(t,e,i,r)};var kX=gt.unmount;function Aye(t,e,i){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=kye({},t)).__c!=null&&(t.__c.__P===i&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return Aye(r,e,i)})),t}function Lye(t,e,i){return t&&i&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return Lye(r,e,i)}),t.__c&&t.__c.__P===e&&(t.__e&&i.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=i)),t}function eM(){this.__u=0,this.o=null,this.__b=null}function Oye(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Rst(t){var e,i,r;function s(n){if(e||(e=t()).then(function(o){i=o.default||o},function(o){r=o}),r)throw r;if(!i)throw e;return yh(i,n)}return s.displayName="Lazy",s.__f=!0,s}function Wx(){this.i=null,this.l=null}gt.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),kX&&kX(t)},(eM.prototype=new Kl).__c=function(t,e){var i=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(i);var s=Oye(r.__v),n=!1,o=function(){n||(n=!0,i.__R=null,s?s(a):a())};i.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=Lye(l,l.__c.__P,l.__c.__O)}var c;for(r.setState({__a:r.__b=null});c=r.o.pop();)c.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},eM.prototype.componentWillUnmount=function(){this.o=[]},eM.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Aye(this.__b,i,r.__O=r.__P)}this.__b=null}var s=e.__a&&yh(Dr,null,t.fallback);return s&&(s.__u&=-33),[yh(Dr,null,e.__a?null:t.children),s]};var TX=function(t,e,i){if(++i[1]===i[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(i=t.i;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;t.i=i=i[2]}};function Nst(t){return this.getChildContext=function(){return t.context},t.children}function Dst(t){var e=this,i=t.h;if(e.componentWillUnmount=function(){_w(null,e.v),e.v=null,e.h=null},e.h&&e.h!==i&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=i,e.v={nodeType:1,parentNode:i,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(s,n){this.childNodes.push(s),e.h.insertBefore(s,n)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.h.removeChild(s)}}}_w(yh(Nst,{context:e.context},t.__v),e.v)}function Fst(t,e){var i=yh(Dst,{__v:t,h:e});return i.containerInfo=e,i}(Wx.prototype=new Kl).__a=function(t){var e=this,i=Oye(e.__v),r=e.l.get(t);return r[0]++,function(s){var n=function(){e.props.revealOrder?(r.push(s),TX(e,t,r)):s()};i?i(n):n()}},Wx.prototype.render=function(t){this.i=null,this.l=new Map;var e=oh(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var i=e.length;i--;)this.l.set(e[i],this.i=[1,0,this.i]);return t.children},Wx.prototype.componentDidUpdate=Wx.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,i){TX(t,i,e)})};var Rye=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,zst=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,jst=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Vst=/[A-Z0-9]/g,Ust=typeof document<"u",Bst=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function qst(t,e,i){return e.__k==null&&(e.textContent=""),_w(t,e),typeof i=="function"&&i(),t?t.__c:null}function Gst(t,e,i){return GQ(t,e),typeof i=="function"&&i(),t?t.__c:null}Kl.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Kl.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var EX=gt.event;function Hst(){}function Wst(){return this.cancelBubble}function Jst(){return this.defaultPrevented}gt.event=function(t){return EX&&(t=EX(t)),t.persist=Hst,t.isPropagationStopped=Wst,t.isDefaultPrevented=Jst,t.nativeEvent=t};var s7,Zst={enumerable:!1,configurable:!0,get:function(){return this.class}},MX=gt.vnode;gt.vnode=function(t){typeof t.type=="string"&&function(e){var i=e.props,r=e.type,s={},n=r.indexOf("-")===-1;for(var o in i){var a=i[o];if(!(o==="value"&&"defaultValue"in i&&a==null||Ust&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in i&&i.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||Bst(i.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":jst.test(o)&&(o=l):l=o="oninput":n&&zst.test(o)?o=o.replace(Vst,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&s[o=l]&&(o="oninputCapture"),s[o]=a}}r=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=oh(i.children).forEach(function(c){c.props.selected=s.value.indexOf(c.props.value)!=-1})),r=="select"&&s.defaultValue!=null&&(s.value=oh(i.children).forEach(function(c){c.props.selected=s.multiple?s.defaultValue.indexOf(c.props.value)!=-1:s.defaultValue==c.props.value})),i.class&&!i.className?(s.class=i.class,Object.defineProperty(s,"className",Zst)):(i.className&&!i.class||i.class&&i.className)&&(s.class=s.className=i.className),e.props=s}(t),t.$$typeof=Rye,MX&&MX(t)};var CX=gt.__r;gt.__r=function(t){CX&&CX(t),s7=t.__c};var PX=gt.diffed;gt.diffed=function(t){PX&&PX(t);var e=t.props,i=t.__e;i!=null&&t.type==="textarea"&&"value"in e&&e.value!==i.value&&(i.value=e.value==null?"":e.value),s7=null};var Yst={ReactCurrentDispatcher:{current:{readContext:function(t){return s7.__n[t.__c].props.value},useCallback:Eo,useContext:lye,useDebugValue:cye,useDeferredValue:Mye,useEffect:Ot,useId:uye,useImperativeHandle:aye,useInsertionEffect:Pye,useLayoutEffect:K2,useMemo:Wg,useReducer:Q9,useRef:kt,useState:sc,useSyncExternalStore:Tye,useTransition:Cye}}};function Kst(t){return yh.bind(null,t)}function vL(t){return!!t&&t.$$typeof===Rye}function Xst(t){return vL(t)&&t.type===Dr}function Qst(t){return!!t&&!!t.displayName&&(typeof t.displayName=="string"||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function ent(t){return vL(t)?tbe.apply(null,arguments):t}function tnt(t){return!!t.__k&&(_w(null,t),!0)}function int(t){return t&&(t.base||t.nodeType===1&&t)||null}var rnt=function(t,e){return t(e)},snt=function(t,e){return t(e)},nnt=Dr,ont=vL,P0={useState:sc,useId:uye,useReducer:Q9,useEffect:Ot,useLayoutEffect:K2,useInsertionEffect:Pye,useTransition:Cye,useDeferredValue:Mye,useSyncExternalStore:Tye,startTransition:Eye,useRef:kt,useImperativeHandle:aye,useMemo:Wg,useCallback:Eo,useContext:lye,useDebugValue:cye,version:"18.3.1",Children:Lst,render:qst,hydrate:Gst,unmountComponentAtNode:tnt,createPortal:Fst,createElement:yh,createContext:ibe,createFactory:Kst,cloneElement:ent,createRef:Yve,Fragment:Dr,isValidElement:vL,isElement:ont,isFragment:Xst,isMemo:Qst,findDOMNode:int,Component:Kl,PureComponent:sV,memo:gL,forwardRef:Ast,flushSync:snt,unstable_batchedUpdates:rnt,StrictMode:nnt,Suspense:eM,SuspenseList:Wx,lazy:Rst,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Yst},ant={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},gN=ant,lnt={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},cnt=lnt;function unt({children:t}){return P0.createElement("div",{style:cnt.container},t)}var dnt=unt,hnt=dnt;function pnt({width:t,height:e,isEditorReady:i,loading:r,_ref:s,className:n,wrapperProps:o}){return P0.createElement("section",{style:{...gN.wrapper,width:t,height:e},...o},!i&&P0.createElement(hnt,null,r),P0.createElement("div",{ref:s,style:{...gN.fullWidth,...!i&&gN.hide},className:n}))}var fnt=pnt,Nye=gL(fnt);function mnt(t){Ot(t,[])}var Dye=mnt;function ynt(t,e,i=!0){let r=kt(!0);Ot(r.current||!i?()=>{r.current=!1}:t,e)}var ta=ynt;function HS(){}function o0(t,e,i,r){return gnt(t,r)||vnt(t,e,i,r)}function gnt(t,e){return t.editor.getModel(Fye(t,e))}function vnt(t,e,i,r){return t.editor.createModel(e,i,r?Fye(t,r):void 0)}function Fye(t,e){return t.Uri.parse(e)}function bnt({original:t,modified:e,language:i,originalLanguage:r,modifiedLanguage:s,originalModelPath:n,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:d="Loading...",options:h={},height:f="100%",width:m="100%",className:y,wrapperProps:v={},beforeMount:b=HS,onMount:w=HS}){let[x,S]=sc(!1),[$,T]=sc(!0),C=kt(null),L=kt(null),N=kt(null),D=kt(w),F=kt(b),W=kt(!1);Dye(()=>{let q=Iye.init();return q.then(J=>(L.current=J)&&T(!1)).catch(J=>J?.type!=="cancelation"&&console.error("Monaco initialization: error:",J)),()=>C.current?A():q.cancel()}),ta(()=>{if(C.current&&L.current){let q=C.current.getOriginalEditor(),J=o0(L.current,t||"",r||i||"text",n||"");J!==q.getModel()&&q.setModel(J)}},[n],x),ta(()=>{if(C.current&&L.current){let q=C.current.getModifiedEditor(),J=o0(L.current,e||"",s||i||"text",o||"");J!==q.getModel()&&q.setModel(J)}},[o],x),ta(()=>{let q=C.current.getModifiedEditor();q.getOption(L.current.editor.EditorOption.readOnly)?q.setValue(e||""):e!==q.getValue()&&(q.executeEdits("",[{range:q.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),q.pushUndoStop())},[e],x),ta(()=>{C.current?.getModel()?.original.setValue(t||"")},[t],x),ta(()=>{let{original:q,modified:J}=C.current.getModel();L.current.editor.setModelLanguage(q,r||i||"text"),L.current.editor.setModelLanguage(J,s||i||"text")},[i,r,s],x),ta(()=>{L.current?.editor.setTheme(c)},[c],x),ta(()=>{C.current?.updateOptions(h)},[h],x);let Z=Eo(()=>{if(!L.current)return;F.current(L.current);let q=o0(L.current,t||"",r||i||"text",n||""),J=o0(L.current,e||"",s||i||"text",o||"");C.current?.setModel({original:q,modified:J})},[i,e,s,t,r,n,o]),V=Eo(()=>{!W.current&&N.current&&(C.current=L.current.editor.createDiffEditor(N.current,{automaticLayout:!0,...h}),Z(),L.current?.editor.setTheme(c),S(!0),W.current=!0)},[h,c,Z]);Ot(()=>{x&&D.current(C.current,L.current)},[x]),Ot(()=>{!$&&!x&&V()},[$,x,V]);function A(){let q=C.current?.getModel();a||q?.original?.dispose(),l||q?.modified?.dispose(),C.current?.dispose()}return P0.createElement(Nye,{width:m,height:f,isEditorReady:x,loading:d,_ref:N,className:y,wrapperProps:v})}var wnt=bnt;gL(wnt);function _nt(t){let e=kt();return Ot(()=>{e.current=t},[t]),e.current}var xnt=_nt,tT=new Map;function Snt({defaultValue:t,defaultLanguage:e,defaultPath:i,value:r,language:s,path:n,theme:o="light",line:a,loading:l="Loading...",options:c={},overrideServices:d={},saveViewState:h=!0,keepCurrentModel:f=!1,width:m="100%",height:y="100%",className:v,wrapperProps:b={},beforeMount:w=HS,onMount:x=HS,onChange:S,onValidate:$=HS}){let[T,C]=sc(!1),[L,N]=sc(!0),D=kt(null),F=kt(null),W=kt(null),Z=kt(x),V=kt(w),A=kt(),q=kt(r),J=xnt(n),ee=kt(!1),re=kt(!1);Dye(()=>{let Ce=Iye.init();return Ce.then(at=>(D.current=at)&&N(!1)).catch(at=>at?.type!=="cancelation"&&console.error("Monaco initialization: error:",at)),()=>F.current?ze():Ce.cancel()}),ta(()=>{let Ce=o0(D.current,t||r||"",e||s||"",n||i||"");Ce!==F.current?.getModel()&&(h&&tT.set(J,F.current?.saveViewState()),F.current?.setModel(Ce),h&&F.current?.restoreViewState(tT.get(n)))},[n],T),ta(()=>{F.current?.updateOptions(c)},[c],T),ta(()=>{!F.current||r===void 0||(F.current.getOption(D.current.editor.EditorOption.readOnly)?F.current.setValue(r):r!==F.current.getValue()&&(re.current=!0,F.current.executeEdits("",[{range:F.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),F.current.pushUndoStop(),re.current=!1))},[r],T),ta(()=>{let Ce=F.current?.getModel();Ce&&s&&D.current?.editor.setModelLanguage(Ce,s)},[s],T),ta(()=>{a!==void 0&&F.current?.revealLine(a)},[a],T),ta(()=>{D.current?.editor.setTheme(o)},[o],T);let me=Eo(()=>{if(!(!W.current||!D.current)&&!ee.current){V.current(D.current);let Ce=n||i,at=o0(D.current,r||t||"",e||s||"",Ce||"");F.current=D.current?.editor.create(W.current,{model:at,automaticLayout:!0,...c},d),h&&F.current.restoreViewState(tT.get(Ce)),D.current.editor.setTheme(o),a!==void 0&&F.current.revealLine(a),C(!0),ee.current=!0}},[t,e,i,r,s,n,c,d,h,o,a]);Ot(()=>{T&&Z.current(F.current,D.current)},[T]),Ot(()=>{!L&&!T&&me()},[L,T,me]),q.current=r,Ot(()=>{T&&S&&(A.current?.dispose(),A.current=F.current?.onDidChangeModelContent(Ce=>{re.current||S(F.current.getValue(),Ce)}))},[T,S]),Ot(()=>{if(T){let Ce=D.current.editor.onDidChangeMarkers(at=>{let vt=F.current.getModel()?.uri;if(vt&&at.find(Rt=>Rt.path===vt.path)){let Rt=D.current.editor.getModelMarkers({resource:vt});$?.(Rt)}});return()=>{Ce?.dispose()}}return()=>{}},[T,$]);function ze(){A.current?.dispose(),f?h&&tT.set(n,F.current.saveViewState()):F.current.getModel()?.dispose(),F.current.dispose()}return P0.createElement(Nye,{width:m,height:y,isEditorReady:T,loading:l,_ref:W,className:v,wrapperProps:b})}var $nt=Snt,Int=gL($nt),zye=Int;function knt({title:t="JSON Editor",value:e,onChange:i,placeholder:r="{}",readOnly:s=!1,height:n="400px"}){const o=kt(null),a=kt(null),l=De(!0),c=De(""),d=De(!1),h=Jt(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0),f=Jt(()=>h.value?"Cmd":"Ctrl"),m=($,T)=>$==="opacity"&&typeof T=="number"?parseFloat(T.toFixed(1)):T,y=Jt(()=>{try{return e==null?"":JSON.stringify(e,m,2).replace(/"opacity":\s*(\d+)(?!\.)/g,'"opacity": $1.0')}catch{return""}}),v=($,T)=>{o.current=$,a.current=T,T.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!1,schemas:[],enableSchemaRequest:!1}),$.updateOptions({minimap:{enabled:!1},fontSize:12,tabSize:2,insertSpaces:!0,wordWrap:"on",lineNumbers:"on",folding:!0,bracketPairColorization:{enabled:!0},autoIndent:"full",formatOnPaste:!0,formatOnType:!0}),$.addCommand(T.KeyMod.CtrlCmd|T.KeyCode.KeyS,()=>{w()}),$.addCommand(T.KeyMod.CtrlCmd|T.KeyMod.Shift|T.KeyCode.KeyF,()=>{x()})},b=$=>{if(!(s||!$))try{const T=JSON.parse($);l.value=!0,c.value="",i(T)}catch(T){l.value=!1,c.value=T instanceof Error?T.message:"Invalid JSON"}},w=()=>{if(!o.current||s)return;const $=o.current.getValue();b($)},x=async()=>{if(!(!o.current||!a.current||s)){d.value=!0;try{const $=o.current.getValue(),T=JSON.parse($),L=JSON.stringify(T,m,2).replace(/"opacity":\s*(\d+)(?!\.)/g,'"opacity": $1.0');o.current.setValue(L),i(T),l.value=!0,c.value=""}catch{await o.current.getAction("editor.action.formatDocument")?.run()}finally{d.value=!1}}};return _("div",{className:"flex flex-col h-full min-h-0",children:[_("div",{className:"flex flex-wrap gap-2 mb-3 items-center flex-shrink-0",children:[_("span",{className:"text-slate-500",children:t}),_("div",{className:"ml-auto flex gap-2",children:!s&&_(Dr,{children:[_("button",{className:"btn small",onClick:()=>{if(!o.current)return;const $=o.current.getValue();try{return JSON.parse($),l.value=!0,c.value="",!0}catch(T){return l.value=!1,c.value=T instanceof Error?T.message:"Invalid JSON",!1}},title:"Validate JSON",children:"Validate"}),_("button",{className:"btn small",onClick:x,disabled:d.value,title:`Format JSON (${f.value}+Shift+F)`,children:d.value?"Formatting...":"Format"})]})})]}),!l.value&&c.value&&_("div",{className:"bg-red-900/30 border border-red-500/50 rounded p-2 mb-2 flex-shrink-0",children:_("div",{className:"text-red-300 text-xs",children:[_("span",{className:"font-medium",children:"JSON Error:"})," ",c.value]})}),l.value&&!s&&_("div",{className:"bg-green-900/30 border border-green-500/50 rounded p-2 mb-2 flex-shrink-0",children:_("div",{className:"text-green-300 text-xs",children:[" Valid JSON - Press ",f.value,"+S to save changes"]})}),_("div",{className:"flex-1 min-h-0 border border-slate-600 rounded overflow-hidden",children:_(zye,{height:n,language:"json",theme:"vs-dark",value:y.value||r,onChange:b,onMount:v,options:{readOnly:s,contextmenu:!0,automaticLayout:!0},loading:_("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Loading JSON Editor..."})})}),_("div",{className:"text-xs text-slate-500 mt-2 flex-shrink-0",children:s?"Read-only JSON view":_(Dr,{children:[_("span",{className:"font-medium",children:"Shortcuts:"})," ",f.value,"+S to save  ",f.value,"+Shift+F to format  Auto-validation enabled"]})})]})}const n7=t=>{const e=[],i=[];return t.presentation?["single","multiple"].includes(t.presentation)||e.push('presentation must be "single" or "multiple"'):e.push("presentation field is required"),t.items?Array.isArray(t.items)?t.items.length===0?i.push("items array is empty - feature will not be functional"):t.items.forEach((r,s)=>{const n=Tnt(r);e.push(...n.errors.map(o=>`Item ${s+1}: ${o}`)),i.push(...n.warnings.map(o=>`Item ${s+1}: ${o}`))}):e.push("items must be an array"):e.push("items field is required"),{valid:e.length===0,errors:e,warnings:i}},Tnt=t=>{const e=[],i=[];return t.id?typeof t.id!="string"?e.push("id must be a string"):t.id.trim()===""&&e.push("id cannot be empty or whitespace only"):e.push("id is required"),t.name?typeof t.name!="string"?e.push("name must be a string"):t.name.trim()===""&&e.push("name cannot be empty or whitespace only"):e.push("name is required"),t.layersIds?Array.isArray(t.layersIds)?t.layersIds.length===0?e.push("layersIds must contain at least one layer ID"):t.layersIds.forEach((r,s)=>{(!r||typeof r!="string"||r.trim()==="")&&e.push(`layersIds[${s}] must be a non-empty string`)}):e.push("layersIds must be an array"):e.push("layersIds is required"),t.showLegend!==void 0&&typeof t.showLegend!="boolean"&&e.push("showLegend must be a boolean"),t.legendUrl!==void 0&&(typeof t.legendUrl!="string"?e.push("legendUrl must be a string"):t.legendUrl.trim()===""&&i.push("legendUrl is empty - consider removing it")),t.legendDescription!==void 0&&(typeof t.legendDescription!="string"?e.push("legendDescription must be a string"):t.legendDescription.trim()===""&&i.push("legendDescription is empty - consider removing it")),{valid:e.length===0,errors:e,warnings:i}},Ent=t=>{const e=[],i=[];return t.type?["wms","tiled","mapImage","portalItem","vectorTiled","feature"].includes(t.type)||e.push("type must be one of: wms, tiled, mapImage, portalItem, vectorTiled, feature"):e.push("type is required"),t.source?typeof t.source!="string"?e.push("source must be a string"):t.source.trim()===""&&e.push("source cannot be empty"):e.push("source is required"),t.zIndex!==void 0&&(typeof t.zIndex!="number"?e.push("zIndex must be a number"):Number.isInteger(t.zIndex)||e.push("zIndex must be an integer")),t.refreshInterval!==void 0&&(typeof t.refreshInterval!="number"?e.push("refreshInterval must be a number"):t.refreshInterval<0?e.push("refreshInterval must be non-negative"):Number.isInteger(t.refreshInterval)||e.push("refreshInterval must be an integer (milliseconds)")),t.options?.opacity!==void 0&&(typeof t.options.opacity!="number"?e.push("opacity (in options) must be a number"):(t.options.opacity<0||t.options.opacity>1)&&e.push("opacity must be between 0.0 and 1.0")),{valid:e.length===0,errors:e,warnings:i}},nV=t=>{const e=[],i=[];return t.id?typeof t.id!="string"?e.push("id must be a string"):t.id.trim()===""&&e.push("id cannot be empty"):e.push("id is required"),t.layers?Array.isArray(t.layers)?t.layers.length===0?e.push("layers array cannot be empty"):t.layers.forEach((r,s)=>{const n=Ent(r);e.push(...n.errors.map(o=>`Layer ${s+1}: ${o}`)),i.push(...n.warnings.map(o=>`Layer ${s+1}: ${o}`))}):e.push("layers must be an array"):e.push("layers field is required"),{valid:e.length===0,errors:e,warnings:i}},jye="hemswx-map-editor-settings",Mnt={customLogicLayers:new Set(["aviation_obstacle"]),nonTranslatableKeys:new Set,previewBasemap:"gray-vector"},Cnt=()=>{try{const t=localStorage.getItem(jye);if(t){const e=JSON.parse(t);return{customLogicLayers:new Set(e.customLogicLayers||["aviation_obstacle"]),nonTranslatableKeys:new Set(e.nonTranslatableKeys||[]),previewBasemap:e.previewBasemap||"gray-vector"}}}catch(t){console.warn("Failed to load settings:",t)}return{...Mnt}},Q2=t=>{try{const e={customLogicLayers:Array.from(t.customLogicLayers),nonTranslatableKeys:Array.from(t.nonTranslatableKeys),previewBasemap:t.previewBasemap};localStorage.setItem(jye,JSON.stringify(e))}catch(e){console.warn("Failed to save settings:",e)}},Ur=Zn(Cnt());il(()=>Ur.value.customLogicLayers);const Pnt=t=>{const e=new Set(Ur.value.customLogicLayers);e.add(t);const i={...Ur.value,customLogicLayers:e};Ur.value=i,Q2(i)},Ant=t=>{const e=new Set(Ur.value.customLogicLayers);e.delete(t);const i={...Ur.value,customLogicLayers:e};Ur.value=i,Q2(i)},FP=t=>Ur.value.customLogicLayers.has(t),Lnt=t=>{FP(t)?Ant(t):Pnt(t)};il(()=>Ur.value.nonTranslatableKeys);const Ont=t=>{const e=new Set(Ur.value.nonTranslatableKeys);e.add(t);const i={...Ur.value,nonTranslatableKeys:e};Ur.value=i,Q2(i)},Vye=t=>{const e=new Set(Ur.value.nonTranslatableKeys);e.delete(t);const i={...Ur.value,nonTranslatableKeys:e};Ur.value=i,Q2(i)},Za=t=>Ur.value.nonTranslatableKeys.has(t),J$=t=>{Za(t)?Vye(t):Ont(t)},oV=il(()=>Ur.value.previewBasemap),aV=t=>{const e={...Ur.value,previewBasemap:t};Ur.value=e,Q2(e)};function AX({label:t,sublabel:e,isSelected:i,level:r=0,onClick:s,onDelete:n,badges:o=[],actions:a,isDragging:l=!1,children:c,shouldExpand:d}){const h=De(!1),f=!!c;return Ot(()=>{d&&(h.value=!0)},[d]),_("div",{children:[_("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-all group ${i?"bg-blue-600 text-white":"hover:bg-slate-700 text-slate-300"} ${l?"opacity-50":""}`,style:{paddingLeft:`${8+r*16}px`},onClick:s,children:[f&&_("span",{className:"text-xs w-4 text-slate-400 hover:text-white",onClick:m=>{m.stopPropagation(),h.value=!h.value},children:h.value?"":""}),!f&&_("span",{className:"w-4"}),_("div",{className:"flex-1 min-w-0",children:[_("div",{className:"text-sm truncate",children:t||"(unnamed)"}),e&&_("div",{className:"text-xs text-slate-500 truncate",children:e})]}),a&&_("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center",onClick:m=>m.stopPropagation(),children:a}),o.map((m,y)=>_("span",{className:`text-sm ${m.color}`,children:m.text},y)),n&&_("button",{className:"text-red-400 hover:text-red-300 text-sm px-1 opacity-0 group-hover:opacity-100",onClick:m=>{m.stopPropagation(),n()},title:"Delete",children:""})]}),f&&h.value&&_("div",{className:"ml-2",children:c})]})}function Rnt({selection:t,onSelectFeature:e,onSelectLayer:i,onNewFeature:r,onNewItem:s}){const n=De(""),o=Jt(()=>{const f=Ne.value.weatherFeatures||[];return n.value.trim()?f.filter(m=>m.id?.toLowerCase().includes(n.value.toLowerCase())||m.name?.toLowerCase().includes(n.value.toLowerCase())||m.items?.some(y=>y.id?.toLowerCase().includes(n.value.toLowerCase())||y.name?.toLowerCase().includes(n.value.toLowerCase()))):f}),a=Jt(()=>{const f=Ne.value.features||[];return n.value.trim()?f.filter(m=>m.id?.toLowerCase().includes(n.value.toLowerCase())||m.name?.toLowerCase().includes(n.value.toLowerCase())||m.items?.some(y=>y.id?.toLowerCase().includes(n.value.toLowerCase())||y.name?.toLowerCase().includes(n.value.toLowerCase()))):f}),l=Jt(()=>Ne.value.layers||[]),c=f=>f.name?.trim()?f.name:f.presentation==="single"&&f.items?.[0]?.name?.trim()?f.items[0].name:f.id||"Unnamed Feature Group",d=f=>{const m=new Set(Ne.value.layers?.map($=>$.id)||[]);if(f.items?.some($=>!$.layersIds||$.layersIds.length===0||$.layersIds.some(T=>!m.has(T))))return{text:"",color:"text-amber-400"};const v=[];if(f.id?.trim()&&v.push(f.id),f.items?.forEach($=>{$.id?.trim()&&v.push($.id)}),v.length===0)return{text:"",color:"text-green-400"};v.filter($=>Za($));const b=v.filter($=>!Za($));if(b.length===0)return{text:"",color:"text-slate-400"};let w=0,x=0;return b.forEach($=>{r7.forEach(T=>{x++,Ne.value.intl?.[T]?.[$]?.trim()&&w++})}),(x>0?Math.round(w/x*100):100)===100?{text:"",color:"text-green-400"}:{text:"",color:"text-red-400"}},h=(f,m,y)=>{const v=y==="weatherFeatures"?(Ne.value.weatherFeatures||[]).findIndex($=>$===f):(Ne.value.features||[]).findIndex($=>$===f);if(v===-1)return null;const b=t?.type==="feature"&&t.featureType===y&&t.index===v&&t.itemIndex===void 0,w=f.items?.some(($,T)=>t?.type==="feature"&&t.featureType===y&&t.index===v&&t.itemIndex===T),x=d(f),S=f.presentation==="single"||f.presentation==="multiple"&&f.mutuallyExclusive;return _(AX,{label:c(f),sublabel:f.id,isSelected:b,shouldExpand:w,onClick:()=>e(y,v),actions:_("button",{className:"w-5 h-5 flex items-center justify-center rounded hover:bg-slate-600 text-slate-400 hover:text-white mr-1",onClick:$=>{$.stopPropagation(),s(y,v)},title:"Add Layer Item",children:"+"}),badges:[x],children:[f.items?.map(($,T)=>{const C=t?.type==="feature"&&t.featureType===y&&t.index===v&&t.itemIndex===T;return _("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-all ml-2 border-l border-slate-700 ${C?"bg-blue-600/20 text-blue-200 border-blue-500":"hover:bg-slate-700/50 text-slate-400 border-slate-700"}`,onClick:L=>{L.stopPropagation(),e(y,v,T)},children:[_("div",{className:`w-3.5 h-3.5 border border-slate-500 flex items-center justify-center flex-shrink-0 ${S?"rounded-full":"rounded-sm"}`}),_("div",{className:"flex-1 min-w-0",children:_("div",{className:"text-sm truncate",children:$.name||$.id||"(unnamed item)"})})]},T)}),f.items?.length===0&&_("div",{className:"text-xs text-slate-500 italic ml-4 py-1",children:"No items"})]},`${y}-${v}`)};return _("div",{className:"w-full h-full bg-slate-900 border-r border-slate-800 flex flex-col overflow-hidden",children:[_("div",{className:"flex flex-col gap-2 p-3 border-b border-slate-800 bg-slate-900/50 backdrop-blur",children:[_("div",{className:"flex items-center justify-between",children:[_("h2",{className:"text-sm font-medium text-slate-300",children:"Feature Manager"}),_("div",{className:"flex gap-1",children:_("button",{className:"w-6 h-6 flex items-center justify-center rounded hover:bg-slate-800 text-slate-400",onClick:()=>r("weatherFeatures"),title:"New Weather Feature",children:"+"})})]}),_("input",{type:"text",className:"w-full bg-slate-800 border border-slate-700 rounded px-2 py-1 text-xs text-slate-200 focus:border-blue-500 focus:outline-none",placeholder:"Search features...",value:n.value,onInput:f=>n.value=f.target.value})]}),_("div",{className:"flex-1 overflow-auto p-2 space-y-4",children:[_("div",{children:[_("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 px-2 flex justify-between items-center",children:[_("span",{children:"Weather Features"}),_("span",{className:"text-slate-600",children:o.value.length})]}),_("div",{className:"space-y-0.5",children:o.value.map((f,m)=>h(f,m,"weatherFeatures"))})]}),_("div",{children:[_("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 px-2 flex justify-between items-center",children:[_("span",{children:"General Features"}),_("button",{className:"text-slate-500 hover:text-white",onClick:()=>r("features"),title:"Add General Feature",children:"+"})]}),_("div",{className:"space-y-0.5",children:a.value.map((f,m)=>h(f,m,"features"))})]}),_("div",{children:[_("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 px-2 flex justify-between items-center",children:[_("span",{children:"Raw Layers"}),_("span",{className:"text-slate-600",children:l.value.length})]}),l.value.length===0?_("div",{className:"text-slate-500 text-xs text-center py-2",children:"No layers defined"}):_("div",{className:"space-y-0.5",children:l.value.map((f,m)=>{if(n.value&&!f.id.toLowerCase().includes(n.value.toLowerCase()))return null;const y=t?.type==="layer"&&t.index===m,v=bye(Ne.value,f.id),b=FP(f.id);return _(AX,{label:f.id,sublabel:`${f.layers?.length||0} sublayer(s)`,isSelected:y,onClick:()=>i(m),badges:[...v.length>0?[{text:`${v.length}`,color:"bg-slate-700"}]:[],...v.length===0&&!b?[{text:"!",color:"bg-orange-900/50 text-orange-200"}]:[]]},`layer-${m}`)})})]})]})]})}function o7({validation:t,className:e=""}){return!t||t.errors.length===0&&t.warnings.length===0?null:_("div",{className:`space-y-2 ${e}`,children:[t.errors.length>0&&_("div",{className:"bg-red-900/20 border border-red-700/30 rounded p-2",children:[_("div",{className:"flex items-center gap-2 text-red-400 text-sm font-medium mb-1",children:[_("span",{children:""}),_("span",{children:["Errors (",t.errors.length,")"]})]}),_("div",{className:"space-y-1",children:t.errors.map((i,r)=>_("div",{className:"text-red-300 text-xs",children:[" ",i]},r))})]}),t.warnings.length>0&&_("div",{className:"bg-yellow-900/20 border border-yellow-700/30 rounded p-2",children:[_("div",{className:"flex items-center gap-2 text-yellow-400 text-sm font-medium mb-1",children:[_("span",{children:""}),_("span",{children:["Warnings (",t.warnings.length,")"]})]}),_("div",{className:"space-y-1",children:t.warnings.map((i,r)=>_("div",{className:"text-yellow-300 text-xs",children:[" ",i]},r))})]})]})}const LX=["opacity","layerNames","layerId"];function Uye({config:t,onChange:e}){const i=(s,n)=>{e({options:{...t.options,[s]:n}})},r=t.type==="portalItem"||t.sourceKind==="portalItem";return _("div",{className:"space-y-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Type"}),_("div",{className:"flex flex-wrap gap-2",children:Drt.map(s=>_("button",{type:"button",className:`px-3 py-1.5 rounded text-xs font-medium transition-colors ${t.type===s?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>{const n=rf(s);e({type:s,options:{opacity:t.options?.opacity||1,...s==="wms"?{layerNames:n.options?.layerNames}:{},...s==="portalItem"?{layerId:n.options?.layerId}:{}}})},children:s.toUpperCase()},s))})]}),t.type!=="portalItem"&&_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Source Kind"}),_("div",{className:"flex gap-2",children:[_("button",{type:"button",className:`px-3 py-1.5 rounded text-xs transition-colors ${t.sourceKind!=="portalItem"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>e({sourceKind:"uri"}),children:"URI (URL)"}),_("button",{type:"button",className:`px-3 py-1.5 rounded text-xs transition-colors ${t.sourceKind==="portalItem"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>e({sourceKind:"portalItem"}),children:"Portal Item"})]})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:[r?"Portal Item ID":"Source URL"," ",_("span",{className:"text-red-400",children:"*"})]}),_("input",{type:"text",className:"form-input",value:t.source||"",onChange:s=>e({source:s.target.value}),placeholder:r?"e.g. 2e258ef465334b509134c6aec567a410":"https://..."})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Opacity"}),_("div",{className:"flex items-center gap-3",children:[_("input",{type:"range",min:"0",max:"100",value:Math.round((t.options?.opacity??1)*100),onChange:s=>{const n=parseInt(s.target.value)/100;i("opacity",Math.round(n*100)/100)},className:"flex-1 h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-blue-500"}),_("span",{className:"text-sm text-slate-400 w-12 text-right",children:[Math.round((t.options?.opacity??1)*100),"%"]})]})]}),_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Z-Index"}),_("input",{type:"number",className:"form-input",value:t.zIndex||0,onChange:s=>e({zIndex:parseInt(s.target.value)||0})})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Refresh (ms)"}),_("input",{type:"number",className:"form-input",value:t.refreshInterval||"",onChange:s=>{const n=s.target.value;e({refreshInterval:n?parseInt(n):void 0})},placeholder:"60000"})]})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Supported Dimensions"}),_("div",{className:"flex gap-3",children:["map","scene"].map(s=>_("label",{className:"flex items-center gap-2 text-xs text-slate-300",children:[_("input",{type:"checkbox",checked:!t.supportedDimensions||t.supportedDimensions.includes(s),onChange:n=>{const o=n.target.checked;let a=t.supportedDimensions?[...t.supportedDimensions]:["map","scene"];o&&!a.includes(s)?a.push(s):o||(a=a.filter(l=>l!==s)),e({supportedDimensions:a.length===2?void 0:a})}}),s==="map"?"2D Map":"3D Scene"]},s))})]}),t.type==="wms"&&_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:["WMS Layer Names ",_("span",{className:"text-red-400",children:"*"})]}),_("div",{className:"space-y-1",children:[(t.options?.layerNames||[]).map((s,n)=>_("div",{className:"flex gap-1",children:[_("input",{type:"text",className:"form-input text-sm flex-1",value:s,onChange:o=>{const a=[...t.options?.layerNames||[]];a[n]=o.target.value,i("layerNames",a)},placeholder:"layer_name"}),(t.options?.layerNames?.length||0)>1&&_("button",{type:"button",className:"text-red-400 hover:text-red-300 px-2",onClick:()=>{const o=[...t.options?.layerNames||[]];o.splice(n,1),i("layerNames",o)},children:""})]},n)),_("button",{type:"button",className:"text-xs text-blue-400 hover:text-blue-300",onClick:()=>{const s=[...t.options?.layerNames||[],""];i("layerNames",s)},children:"+ Add Layer Name"})]})]}),t.type==="portalItem"&&_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Portal Layer ID"}),_("input",{type:"number",className:"form-input",value:t.options?.layerId??0,onChange:s=>{i("layerId",parseInt(s.target.value)||0)}})]}),_(Nnt,{options:t.options||{},onChange:s=>e({options:s})})]})}function Bye({index:t,sublayer:e,isExpanded:i,onToggle:r,onUpdate:s,onRemove:n}){return _("div",{className:"border border-slate-700 rounded-lg bg-slate-900/50 overflow-hidden",children:[_("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-slate-700/50 transition-colors",onClick:r,children:[_("span",{className:"font-medium text-sm text-slate-300 flex items-center gap-2",children:[t!==void 0&&_("span",{className:"text-slate-500",children:["#",t+1]}),_("span",{className:"uppercase text-blue-400",children:e.type}),e.source&&_("span",{className:"text-slate-500 text-xs truncate max-w-[200px]",children:e.source.length>40?"..."+e.source.slice(-40):e.source})]}),_("span",{className:"text-slate-500",children:i?"":""})]}),i&&_("div",{className:"p-3 pt-0 border-t border-slate-700",children:[_(Uye,{config:e,onChange:s}),_("div",{className:"flex justify-end pt-2 border-t border-slate-700 mt-3",children:_("button",{type:"button",className:"text-xs text-red-400 hover:text-red-300",onClick:n,children:"Remove Sublayer"})})]})]})}function Nnt({options:t,onChange:e}){const i=Object.entries(t).filter(([a])=>!LX.includes(a)),r=()=>{const a=`param_${Date.now()}`;e({...t,[a]:""})},s=(a,l)=>{if(l===a||LX.includes(l))return;const c={...t},d=c[a];delete c[a],c[l]=d,e(c)},n=(a,l)=>{let c=l;l==="true"?c=!0:l==="false"?c=!1:!isNaN(Number(l))&&l.trim()!==""&&(c=Number(l)),e({...t,[a]:c})},o=a=>{const l={...t};delete l[a],e(l)};return _("div",{className:"form-group",children:[_("div",{className:"flex items-center justify-between mb-1",children:[_("label",{className:"form-label text-xs mb-0",children:"Custom Options"}),_("button",{type:"button",className:"text-xs text-blue-400 hover:text-blue-300",onClick:r,children:"+ Add"})]}),i.length===0?_("div",{className:"text-xs text-slate-600 italic",children:"No custom options"}):_("div",{className:"space-y-1",children:i.map(([a,l])=>_("div",{className:"flex gap-1 items-center",children:[_("input",{type:"text",className:"form-input text-xs flex-1",value:a,onChange:c=>s(a,c.target.value),placeholder:"key"}),_("input",{type:"text",className:"form-input text-xs flex-1",value:String(l),onChange:c=>n(a,c.target.value),placeholder:"value"}),_("button",{type:"button",className:"text-red-400 hover:text-red-300 px-1",onClick:()=>o(a),children:""})]},a))})]})}function zP({title:t,id:e,isNew:i,showPreview:r,onTogglePreview:s,viewMode:n="form",onViewModeChange:o,onSave:a,onCancel:l,onDelete:c,saveLabel:d="Save",cancelLabel:h}){return _("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-slate-700",children:[_("div",{className:"flex items-center gap-4 min-w-0",children:_("div",{className:"min-w-0",children:[_("h2",{className:"text-lg font-medium text-white truncate pr-2",children:t}),!i&&e&&_("div",{className:"text-xs text-slate-400 mt-0.5 truncate font-mono",children:["ID: ",e]})]})}),_("div",{className:"flex items-center gap-3",children:[o&&_("div",{className:"flex bg-slate-900 rounded-lg p-0.5 border border-slate-700",children:[_("button",{className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${n==="form"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-slate-200"}`,onClick:()=>o("form"),children:"Form"}),_("button",{className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${n==="json"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-slate-200"}`,onClick:()=>o("json"),children:"JSON"})]}),s&&_("button",{className:`px-3 py-1 rounded text-xs transition-colors border ${r?"bg-green-900/30 text-green-400 border-green-800 hover:bg-green-900/50":"bg-slate-800 text-slate-400 border-slate-700 hover:text-slate-200"}`,onClick:s,title:r?"Hide map preview":"Show map preview",children:r?"Preview On":"Preview Off"})]}),_("div",{className:"flex gap-2",children:i?_(Dr,{children:[a&&_("button",{className:"btn success small",onClick:a,children:"Create"}),l&&_("button",{className:"btn ghost small",onClick:l,children:h||"Cancel"})]}):_(Dr,{children:[a&&_("button",{className:"btn primary small",onClick:a,children:d}),l&&h&&_("button",{className:"btn ghost small",onClick:l,children:h}),c&&_("button",{className:"btn danger small",onClick:c,children:"Delete"})]})})]})}function s_({tabs:t,activeTab:e,onChange:i,className:r=""}){return _("div",{className:`flex gap-1 border-b border-slate-700 mb-4 ${r}`,children:t.map(s=>_("button",{className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${e===s.id?"border-blue-500 text-white":"border-transparent text-slate-400 hover:text-slate-200"}`,onClick:()=>i(s.id),children:s.label},s.id))})}const jP=[{id:"wms",name:"WMS",type:"wms",description:"Web Map Service"},{id:"arcgis-feature",name:"Feature",type:"feature",description:"Feature Service"},{id:"arcgis-map",name:"Map Image",type:"mapImage",description:"Map Server"},{id:"portal",name:"Portal Item",type:"portalItem",description:"ArcGIS Online"},{id:"tiled",name:"Tiled",type:"tiled",description:"Tile Service"},{id:"vector",name:"Vector Tiled",type:"vectorTiled",description:"Vector Tiles"},{id:"wmts",name:"WMTS",type:"wmts",description:"Web Map Tile"},{id:"scene",name:"Scene Layer",type:"sceneLayer",description:"3D Scene"}];function Dnt({layer:t,onUpdate:e,onUpdateSublayer:i}){const r=Jt(()=>nV(t)),s=Jt(()=>bye(Ne.value,t.id)),n=De(null),[o,a]=sc("general");return _("div",{className:"space-y-4",children:[_(zP,{title:t.id||"New Layer",id:t.id}),_(o7,{validation:r.value,className:"mb-4"}),_(s_,{tabs:[{id:"general",label:"General"},{id:"sublayers",label:`Sublayers (${t.layers?.length||0})`}],activeTab:o,onChange:l=>a(l)}),o==="general"&&_("div",{className:"space-y-4",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Layer ID"}),_("input",{type:"text",className:"form-input",value:t.id||"",onChange:l=>e({id:l.target.value}),placeholder:"unique_layer_id"})]}),t.id&&_("div",{className:"mt-3 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[_("label",{className:"form-label mb-2",children:"Usage References"}),_("div",{className:"text-sm text-slate-400",children:s.value.length===0?_("span",{className:"text-orange-400 flex items-center gap-2",children:[_("span",{className:"text-lg",children:""})," Not referenced by any feature"]}):_("div",{className:"space-y-2",children:s.value.map((l,c)=>_("div",{className:"flex items-center gap-2 text-slate-300",children:[_("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),_("span",{className:"font-medium text-slate-200",children:l.featureName}),_("span",{className:"text-slate-500",children:""}),_("span",{children:l.itemName})]},c))})})]})]}),o==="sublayers"&&_("div",{className:"space-y-4",children:[_("div",{className:"flex flex-wrap gap-2 mb-4",children:jP.slice(0,3).map(l=>_("button",{className:"btn tiny",onClick:()=>{const c=[...t.layers||[]];c.push(rf(l.type)),e({layers:c}),n.value=c.length-1},title:`Add ${l.name}`,children:["+ ",l.type.toUpperCase()]},l.id))}),_("div",{className:"space-y-2",children:(t.layers||[]).map((l,c)=>_(Bye,{index:c,sublayer:l,isExpanded:n.value===c,onToggle:()=>n.value=n.value===c?null:c,onUpdate:d=>i(c,d),onRemove:()=>{const d=[...t.layers||[]];d.splice(c,1),e({layers:d}),n.value===c&&(n.value=null)}},c))}),(t.layers?.length||0)===0&&_("div",{className:"text-center py-8 border border-dashed border-slate-600 rounded-lg bg-slate-800/30",children:[_("p",{className:"text-slate-400 text-sm mb-4",children:"No sublayers defined. Choose a template to start:"}),_("div",{className:"flex flex-wrap gap-2 justify-center max-w-md mx-auto",children:jP.map(l=>_("button",{className:"btn small bg-slate-700 hover:bg-slate-600 border border-slate-600",onClick:()=>{e({layers:[rf(l.type)]}),n.value=0},children:l.name},l.id))})]})]})]})}function lV({layerId:t,onClose:e}){const i=De(0),r=Jt(()=>t?Urt(t):null);if(Ot(()=>{i.value=0},[t]),!t||!r.value)return null;const s=r.value,n=(l,c)=>{const d=[...s.layers||[]];d[l]={...d[l],...c},pN(t,{layers:d})},o=l=>{const c=[...s.layers||[],rf(l)];pN(t,{layers:c}),i.value=c.length-1},a=l=>{const c=s.layers.filter((d,h)=>h!==l);pN(t,{layers:c}),i.value===l&&(i.value=c.length>0?0:null)};return _("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:e,children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[600px] max-w-[95vw] min-h-[400px] max-h-[85vh] flex flex-col shadow-2xl",onClick:l=>l.stopPropagation(),children:[_("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[_("div",{children:[_("h3",{className:"text-lg font-medium text-white",children:"Edit Layer"}),_("div",{className:"text-sm text-blue-400",children:t})]}),_("button",{className:"text-slate-400 hover:text-white text-xl leading-none px-2",onClick:e,children:""})]}),_("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:_("div",{className:"space-y-2",children:[_("div",{className:"flex items-center justify-between",children:[_("label",{className:"form-label text-sm",children:["Sublayers (",s.layers?.length||0,")"]}),_("div",{className:"flex gap-1",children:jP.slice(0,3).map(l=>_("button",{type:"button",className:"text-[10px] px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-slate-300",onClick:()=>o(l.type),title:l.description,children:["+ ",l.type.toUpperCase()]},l.type))})]}),(s.layers||[]).map((l,c)=>_(Bye,{index:c,sublayer:l,isExpanded:i.value===c,onToggle:()=>i.value=i.value===c?null:c,onUpdate:d=>n(c,d),onRemove:()=>a(c)},c)),(s.layers?.length||0)===0&&_("div",{className:"text-center py-6 border border-dashed border-slate-600 rounded-lg",children:[_("p",{className:"text-slate-500 text-sm mb-2",children:"No sublayers defined"}),_("button",{className:"btn small primary",onClick:()=>o("wms"),children:"Add First Sublayer"})]})]})}),_("div",{className:"p-4 border-t border-slate-700 flex gap-2 justify-end",children:_("button",{className:"btn primary",onClick:e,children:"Done"})})]})})}function qye({value:t,onChange:e,placeholder:i="Select a layer...",excludeIds:r=[],className:s=""}){const n=De(!1),o=De(""),a=kt(null);Ot(()=>{function h(f){a.current&&!a.current.contains(f.target)&&(n.value=!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const l=Jt(()=>Ne.value.layers||[]),c=Jt(()=>{const h=o.value.toLowerCase().trim();return l.value.filter(f=>r.includes(f.id)?!1:h?f.id.toLowerCase().includes(h)||Ne.value.intl?.en?.[f.id]?.toLowerCase().includes(h):!0)}),d=Jt(()=>t?l.value.find(h=>h.id===t):null);return _("div",{className:`relative ${s}`,ref:a,children:[_("div",{className:"form-input flex items-center justify-between cursor-pointer bg-slate-800 border border-slate-700 hover:border-slate-600",onClick:()=>{n.value=!n.value,n.value&&(o.value="")},children:[_("span",{className:d.value?"text-slate-200":"text-slate-500",children:d.value?d.value.id:i}),_("span",{className:"text-slate-500 text-xs",children:""})]}),n.value&&_("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-700 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[_("div",{className:"p-2 border-b border-slate-700",children:_("input",{type:"text",className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm text-slate-200 focus:outline-none focus:border-blue-500",placeholder:"Search layers...",value:o.value,onInput:h=>o.value=h.target.value,autoFocus:!0,onClick:h=>h.stopPropagation()})}),_("div",{className:"overflow-y-auto flex-1 p-1",children:c.value.length===0?_("div",{className:"px-3 py-2 text-xs text-slate-500 text-center",children:"No layers found"}):c.value.map(h=>_("div",{className:"px-3 py-2 text-sm text-slate-300 hover:bg-slate-700 cursor-pointer rounded flex items-center justify-between group",onClick:()=>{e(h.id),n.value=!1},children:[_("span",{className:"font-mono text-blue-300",children:h.id}),_("span",{className:"text-xs text-slate-500 group-hover:text-slate-400",children:Ne.value.intl?.en?.[h.id]||""})]},h.id))})]})]})}function Wl({translationKey:t,label:e,hint:i}){const r=Jt(()=>Ne.value);if(!t?.trim())return _("div",{className:"p-4 text-center border border-amber-600/50 rounded bg-amber-900/20",children:_("span",{className:"text-amber-400 font-medium",children:"Please set an ID to add translations."})});const s=Za(t),n=(o,a)=>{const l=JSON.parse(JSON.stringify(r.value));l.intl||(l.intl={en:{},da:{},nb:{},sv:{}}),l.intl[o]||(l.intl[o]={}),l.intl[o][t]=a,os(l)};return _("div",{className:"space-y-4",children:[_("div",{className:"flex items-center justify-between border-b border-slate-700 pb-2 mb-4",children:[_("div",{children:[e&&_("div",{className:"text-sm font-medium text-slate-300",children:e}),i&&_("div",{className:"text-xs text-slate-500",children:i})]}),_("label",{className:"flex items-center gap-2 cursor-pointer",children:[_("span",{className:`text-xs ${s?"text-slate-500":"text-blue-400 font-medium"}`,children:s?"Translations Disabled":"Translations Enabled"}),_("div",{className:"relative inline-flex items-center cursor-pointer",children:[_("input",{type:"checkbox",className:"sr-only peer",checked:!s,onChange:()=>J$(t)}),_("div",{className:"w-9 h-5 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})]}),s?_("div",{className:"p-6 text-center border border-dashed border-slate-700 rounded bg-slate-800/30",children:[_("div",{className:"text-2xl mb-2",children:""}),_("div",{className:"text-slate-400 font-medium mb-1",children:"Non-Translatable"}),_("p",{className:"text-xs text-slate-500",children:"This item uses its internal ID or name for display. Enable translations to provide localized strings."})]}):_("div",{className:"space-y-3",children:r7.map(o=>{const a=o==="en"?"English":o==="da"?"Danish":o==="nb"?"Norwegian":"Swedish";return _("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:[_("span",{className:"uppercase font-medium text-slate-400",children:o})," ",_("span",{className:"text-slate-500 font-normal",children:a})]}),_("input",{type:"text",className:"form-input",value:r.value.intl?.[o]?.[t]||"",onChange:l=>n(o,l.target.value),placeholder:`Enter ${a} translation`})]},o)})})]})}function Fnt({item:t,itemIndex:e,layers:i,onUpdateItem:r,onOpenLayerCreator:s,onOpenLayerEditor:n}){return _("div",{className:"form-group mt-3",children:[_("label",{className:"form-label text-xs",children:["Assigned Layers",(t.layersIds?.length||0)===0&&_("span",{className:"text-red-400 ml-1",children:"(required)"})]}),_("div",{className:"space-y-1 mb-2",children:(t.layersIds||[]).map((o,a)=>_("div",{className:"flex items-center gap-1",children:[_("button",{className:"flex-1 flex items-center gap-2 px-2 py-1.5 rounded text-xs text-left transition-colors bg-slate-700 hover:bg-slate-600",onClick:()=>n(o),children:[_("span",{className:"flex-1 text-blue-400 font-mono",children:o}),_("span",{className:"text-[10px] text-slate-500",children:"click to edit"})]}),_("button",{className:"px-2 py-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/30 rounded",onClick:l=>{l.stopPropagation();const c=[...t.layersIds||[]];c.splice(a,1),r(e,{layersIds:c})},children:""})]},a))}),_(qye,{value:void 0,onChange:o=>{r(e,{layersIds:[...t.layersIds||[],o]})},excludeIds:t.layersIds||[],placeholder:"+ Add Layer..."}),_("div",{className:"mt-2 text-right",children:_("button",{className:"text-xs text-blue-400 hover:text-blue-300 hover:underline",onClick:()=>s(e),children:"or create new layer"})})]})}function znt({feature:t,featureType:e,selectedItemIndex:i,onUpdate:r,onUpdateItem:s,onRemoveItem:n,onSelectItem:o,onOpenLayerCreator:a}){const l=Jt(()=>Ne.value.layers||[]),c=Jt(()=>n7(t)),d=De(null),[h,f]=sc("general"),m=kt(i);if(Ot(()=>{m.current!==i&&(f(i!==void 0?"general":"items"),m.current=i)},[i]),Ot(()=>{f("general")},[t.id]),i!==void 0&&t.items?.[i]){const y=t.items[i],v=i;return _("div",{className:"h-full flex flex-col",children:[_(zP,{title:y.name||y.id||"Item",id:y.id,onCancel:()=>o(void 0),cancelLabel:"Back",saveLabel:"Done"}),_(s_,{tabs:[{id:"general",label:"General"},{id:"appearance",label:"Appearance"},{id:"translations",label:"Translations"}],activeTab:h,onChange:b=>f(b)}),_("div",{className:"flex-1 overflow-auto",children:[h==="general"&&_("div",{className:"space-y-4",children:[_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label flex items-center gap-2",children:["Item ID",y.id&&_("button",{type:"button",className:"text-xs px-1 hover:bg-slate-700 rounded",onClick:()=>J$(y.id),title:Za(y.id)?"Click to enable translations":"Click to mark as non-translatable",children:Za(y.id)?"":""})]}),_("input",{type:"text",className:"form-input",value:y.id||"",onChange:b=>s(v,{id:b.target.value}),placeholder:"unique_item_id"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Item Name (Internal)"}),_("input",{type:"text",className:"form-input",value:y.name||"",onChange:b=>s(v,{name:b.target.value}),placeholder:"Display Name"})]})]}),_(Fnt,{item:y,itemIndex:v,layers:l.value,onUpdateItem:s,onOpenLayerCreator:a,onOpenLayerEditor:b=>d.value=b})]}),h==="appearance"&&_("div",{className:"space-y-4",children:[_("div",{className:"form-group",children:_("label",{className:"flex items-center gap-2 cursor-pointer p-3 border border-slate-700 rounded-lg bg-slate-800/50",children:[_("input",{type:"checkbox",className:"form-checkbox",checked:y.showLegend||!1,onChange:b=>s(v,{showLegend:b.target.checked})}),_("div",{children:[_("span",{className:"text-sm font-medium text-slate-200 block",children:"Show Legend"}),_("span",{className:"text-xs text-slate-500",children:"Display this item in the legend panel"})]})]})}),y.showLegend&&_("div",{className:"space-y-3 pl-1",children:[_("p",{className:"text-xs text-slate-500 mb-3",children:"Leave empty to use ArcGIS API legend info automatically."}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["Legend URL ",_("span",{className:"text-slate-500 font-normal",children:"(optional)"})]}),_("input",{type:"text",className:"form-input",value:y.legendUrl||"",onChange:b=>s(v,{legendUrl:b.target.value}),placeholder:"Custom legend image URL"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["Legend Description Key ",_("span",{className:"text-slate-500 font-normal",children:"(optional)"})]}),_("input",{type:"text",className:"form-input",value:y.legendDescription||"",onChange:b=>s(v,{legendDescription:b.target.value}),placeholder:"i18n key for description"})]})]})]}),h==="translations"&&_("div",{className:"space-y-6",children:[_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:y.id,label:`Name Translations (ID: ${y.id||"none"})`})}),y.legendDescription&&_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:y.legendDescription,label:`Legend Description (ID: ${y.legendDescription})`})})]})]}),_(lV,{layerId:d.value,onClose:()=>d.value=null})]})}return _("div",{className:"space-y-4",children:[_(zP,{title:t.name||t.id||"Feature",id:t.id}),_(o7,{validation:c.value,className:"mb-4"}),_(s_,{tabs:[{id:"general",label:"General"},{id:"items",label:"Items"},{id:"translations",label:"Translations"}],activeTab:h,onChange:y=>f(y)}),h==="general"&&_("div",{className:"space-y-4",children:[_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label flex items-center gap-2",children:["Feature ID",t.id&&_("button",{type:"button",className:"text-xs px-1 hover:bg-slate-700 rounded",onClick:()=>J$(t.id),title:Za(t.id)?"Click to enable translations":"Click to mark as non-translatable",children:Za(t.id)?"":""})]}),_("input",{type:"text",className:"form-input",value:t.id||"",onChange:y=>r({id:y.target.value}),placeholder:"e.g. icing_index"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Feature Name (Internal)"}),_("input",{type:"text",className:"form-input",value:t.name||"",onChange:y=>r({name:y.target.value}),placeholder:"e.g. Icing Index"})]})]}),_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Presentation"}),_("div",{className:"flex flex-wrap gap-2",children:[{value:"single",label:"Single (Radio)"},{value:"multiple",label:"Multiple (Checkbox)"}].map(y=>{const v=(t.presentation||"single")===y.value;return _("button",{className:`px-3 py-1 rounded-full text-xs font-medium transition-all border ${v?"bg-blue-600 text-white border-blue-500 shadow-sm":"bg-transparent text-slate-300 border-slate-600 hover:border-slate-500"}`,onClick:()=>r({presentation:y.value}),children:y.label},y.value)})})]}),t.presentation==="multiple"&&_("div",{className:"form-group flex items-center mt-6",children:_("label",{className:"flex items-center gap-2 cursor-pointer",children:[_("input",{type:"checkbox",className:"form-checkbox",checked:t.mutuallyExclusive||!1,onChange:y=>r({mutuallyExclusive:y.target.checked})}),_("span",{className:"text-sm text-slate-300",children:"Mutually Exclusive"})]})})]})]}),h==="items"&&_("div",{className:"space-y-3",children:[_("div",{className:"flex justify-between items-center mb-2",children:[_("h3",{className:"text-sm font-medium text-slate-300",children:"Feature Items"}),_("button",{className:"btn tiny primary",onClick:()=>{const y=[...t.items||[]],v=y.length;y.push({id:"",name:"",showLegend:!1,layersIds:[]}),r({items:y}),setTimeout(()=>o(v),0)},children:"+ Add Item"})]}),(t.items||[]).map((y,v)=>{const b=!y.id||!y.name||(y.layersIds?.length||0)===0;return _("div",{className:`border rounded-lg p-3 bg-slate-800/50 flex items-center justify-between cursor-pointer hover:bg-slate-700/50 transition-colors ${b?"border-red-600/50":"border-slate-600"}`,onClick:()=>o(v),children:[_("div",{className:"flex-1 min-w-0",children:[_("div",{className:"font-medium text-sm text-slate-200 flex items-center gap-2",children:[y.name||y.id||"(unnamed)",b&&_("span",{className:"text-red-400 text-xs",children:"incomplete"})]}),_("div",{className:"text-xs text-slate-500",children:[y.layersIds?.length||0," layers"]})]}),_("div",{className:"flex gap-2",children:[_("button",{className:"btn tiny",onClick:w=>{w.stopPropagation(),o(v)},children:"Edit"}),_("button",{className:"btn tiny danger",onClick:w=>{w.stopPropagation(),n(v,y)},children:"Remove"})]})]},v)}),(t.items?.length||0)===0&&_("div",{className:"text-center py-4 border border-dashed border-slate-600 rounded",children:[_("p",{className:"text-slate-500 text-sm mb-2",children:"No items defined"}),_("button",{className:"btn small primary",onClick:()=>{r({items:[{id:"",name:"",showLegend:!1,layersIds:[]}]}),setTimeout(()=>o(0),0)},children:"Add First Item"})]})]}),h==="translations"&&_("div",{className:"space-y-6",children:[_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:t.id,label:`Feature Name Translations (ID: ${t.id||"none"})`})}),(t.items||[]).length>0&&_("div",{className:"space-y-4",children:[_("h4",{className:"text-sm font-medium text-slate-400 border-b border-slate-700 pb-2",children:"Item Translations"}),(t.items||[]).map((y,v)=>_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[_("div",{className:"text-xs text-slate-500 mb-3",children:["Item: ",y.name||y.id||`#${v+1}`,!y.id&&_("span",{className:"text-amber-400 ml-2",children:"(no ID set)"})]}),_(Wl,{translationKey:y.id,label:`Name (ID: ${y.id||"none"})`}),y.legendDescription&&_("div",{className:"mt-4 pt-4 border-t border-slate-700",children:_(Wl,{translationKey:y.legendDescription,label:`Legend Description (ID: ${y.legendDescription})`})})]},v))]})]}),_(lV,{layerId:d.value,onClose:()=>d.value=null})]})}function Gye({isOpen:t,onClose:e,onCreateLayer:i}){const r=De(""),s=De(rf("wms"));if(Ot(()=>{t&&(r.value="",s.value=rf("wms"))},[t]),!t)return null;const n=()=>{r.value="",s.value=rf("wms")},o=()=>{const f=r.value.trim();f&&(i({id:f,layers:[s.value]}),n())},a=()=>{n(),e()},l=f=>{s.value={...s.value,...f}},c=(f,m)=>{s.value={...s.value,options:{...s.value.options,[f]:m}}},d=s.value,h=d.type==="portalItem"||d.sourceKind==="portalItem";return _("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:a,children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[600px] max-w-[95vw] min-h-[400px] max-h-[85vh] flex flex-col shadow-2xl",onClick:f=>f.stopPropagation(),children:[_("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[_("h3",{className:"text-lg font-medium text-white",children:"Create New Layer"}),_("button",{className:"text-slate-400 hover:text-white text-xl leading-none",onClick:a,children:""})]}),_("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["Layer ID ",_("span",{className:"text-red-400",children:"*"})]}),_("input",{type:"text",className:"form-input",value:r.value,onInput:f=>r.value=f.target.value,placeholder:"unique_layer_id",autoFocus:!0})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Layer Type"}),_("div",{className:"grid grid-cols-4 gap-2",children:jP.map(f=>_("button",{type:"button",className:`px-2 py-2 rounded text-sm text-left ${d.type===f.type?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>{const m=rf(f.type);s.value={...m,source:d.source,sourceKind:f.type==="portalItem"?"portalItem":d.sourceKind,zIndex:d.zIndex,refreshInterval:d.refreshInterval,options:{...m.options,opacity:d.options?.opacity??1}}},children:[_("div",{className:"font-medium text-xs",children:f.name}),_("div",{className:"text-[10px] opacity-70",children:f.description})]},f.id))})]}),d.type!=="portalItem"&&_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Source Kind"}),_("div",{className:"flex gap-2",children:[_("button",{type:"button",className:`px-3 py-1.5 rounded text-sm ${d.sourceKind!=="portalItem"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>l({sourceKind:"uri"}),children:"URI (URL)"}),_("button",{type:"button",className:`px-3 py-1.5 rounded text-sm ${d.sourceKind==="portalItem"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>l({sourceKind:"portalItem"}),children:"Portal Item ID"})]})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:[h?"Portal Item ID":"Source URL"," ",_("span",{className:"text-red-400",children:"*"})]}),_("input",{type:"text",className:"form-input",value:d.source||"",onInput:f=>l({source:f.target.value}),placeholder:h?"e.g. 2e258ef465334b509134c6aec567a410":"https://..."})]}),d.type==="wms"&&_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["WMS Layer Names ",_("span",{className:"text-red-400",children:"*"})]}),_("div",{className:"space-y-1",children:[(d.options?.layerNames||[]).map((f,m)=>_("div",{className:"flex gap-1",children:[_("input",{type:"text",className:"form-input text-sm flex-1",value:f,onInput:y=>{const v=[...d.options?.layerNames||[]];v[m]=y.target.value,c("layerNames",v)},placeholder:"layer_name"}),(d.options?.layerNames?.length||0)>1&&_("button",{type:"button",className:"btn tiny danger",onClick:()=>{const y=[...d.options?.layerNames||[]];y.splice(m,1),c("layerNames",y)},children:""})]},m)),_("button",{type:"button",className:"btn tiny",onClick:()=>{const f=[...d.options?.layerNames||[],""];c("layerNames",f)},children:"+ Add Layer Name"})]})]}),d.type==="portalItem"&&_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Portal Layer ID"}),_("input",{type:"number",className:"form-input",value:d.options?.layerId??0,onInput:f=>c("layerId",parseInt(f.target.value)||0)})]}),_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Opacity (0-1)"}),_("input",{type:"number",className:"form-input text-sm",min:"0",max:"1",step:"0.1",value:d.options?.opacity??1,onInput:f=>{const m=parseFloat(f.target.value);c("opacity",Math.max(0,Math.min(1,isNaN(m)?1:m)))}})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:"Z-Index"}),_("input",{type:"number",className:"form-input text-sm",value:d.zIndex||0,onInput:f=>l({zIndex:parseInt(f.target.value)||0})})]})]})]}),_("div",{className:"p-4 border-t border-slate-700 flex gap-2 justify-end",children:[_("button",{className:"btn ghost",onClick:a,children:"Cancel"}),_("button",{className:"btn primary",onClick:o,disabled:!r.value.trim()||!d.source?.trim(),children:"Create & Assign"})]})]})})}function OX(){return{presentation:"single",items:[{id:"",name:"",showLegend:!1,layersIds:[]}]}}function jnt({isOpen:t,initialFeatureType:e,onClose:i,onCreate:r}){const s=De(OX()),n=De(e),o=De(void 0),a=De(null),l=De(null),[c,d]=sc("general");Jt(()=>Ne.value.layers||[]);const h=Jt(()=>n7(s.value));if(Ot(()=>{t&&(s.value=OX(),n.value=e,o.value=void 0,d("general"))},[t,e]),!t)return null;const f=S=>{s.value={...s.value,...S}},m=(S,$)=>{const T=[...s.value.items];T[S]={...T[S],...$},s.value={...s.value,items:T}},y=S=>{const $=[...s.value.items];$.splice(S,1),s.value={...s.value,items:$},o.value===S&&(o.value=void 0)},v=()=>{const S=[...s.value.items,{id:"",name:"",showLegend:!1,layersIds:[]}];s.value={...s.value,items:S},o.value=S.length-1},b=()=>{h.value.valid&&r(s.value,n.value)},w=S=>{const $=QE(Ne.value,S);if(os($),a.value!==null){const T=[...s.value.items],C=T[a.value];C.layersIds||(C.layersIds=[]),C.layersIds.includes(S.id)||(C.layersIds=[...C.layersIds,S.id]),s.value={...s.value,items:T}}a.value=null},x=o.value!==void 0?s.value.items[o.value]:null;return _("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:i,children:[_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[700px] max-w-[95vw] max-h-[90vh] flex flex-col shadow-2xl",onClick:S=>S.stopPropagation(),children:[_("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between flex-shrink-0",children:[_("div",{className:"flex items-center gap-3",children:[_("h3",{className:"text-lg font-medium text-white",children:x?x.name||x.id||"Edit Item":"New Feature"}),x&&_("span",{className:"text-xs text-slate-400 bg-slate-700 px-2 py-0.5 rounded",children:["Item ",(o.value??0)+1]})]}),_("button",{className:"text-slate-400 hover:text-white text-xl leading-none",onClick:i,children:""})]}),!h.value.valid&&_("div",{className:"px-4 pt-3 flex-shrink-0",children:_(o7,{validation:h.value})}),_("div",{className:"flex-1 overflow-auto p-4",children:x?_("div",{className:"space-y-4",children:[_("button",{className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1",onClick:()=>o.value=void 0,children:" Back to Feature"}),_(s_,{tabs:[{id:"general",label:"General"},{id:"appearance",label:"Appearance"},{id:"translations",label:"Translations"}],activeTab:c,onChange:S=>d(S)}),c==="general"&&_("div",{className:"space-y-4",children:[_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label flex items-center gap-2",children:["Item ID",x.id&&_("button",{type:"button",className:"text-xs px-1 hover:bg-slate-700 rounded",onClick:()=>J$(x.id),title:Za(x.id)?"Click to enable translations":"Click to mark as non-translatable",children:Za(x.id)?"":""})]}),_("input",{type:"text",className:"form-input",value:x.id||"",onInput:S=>m(o.value,{id:S.target.value}),placeholder:"unique_item_id"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Item Name (Internal)"}),_("input",{type:"text",className:"form-input",value:x.name||"",onInput:S=>m(o.value,{name:S.target.value}),placeholder:"Display Name"})]})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label text-xs",children:["Assigned Layers",(x.layersIds?.length||0)===0&&_("span",{className:"text-red-400 ml-1",children:"(required)"})]}),_("div",{className:"space-y-1 mb-2",children:(x.layersIds||[]).map((S,$)=>_("div",{className:"flex items-center gap-1",children:[_("button",{className:"flex-1 flex items-center gap-2 px-2 py-1.5 rounded text-xs text-left transition-colors bg-slate-700 hover:bg-slate-600",onClick:()=>l.value=S,children:[_("span",{className:"flex-1 text-blue-400 font-mono",children:S}),_("span",{className:"text-[10px] text-slate-500",children:"click to edit"})]}),_("button",{className:"px-2 py-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/30 rounded",onClick:()=>{const T=[...x.layersIds||[]];T.splice($,1),m(o.value,{layersIds:T})},children:""})]},$))}),_(qye,{value:void 0,onChange:S=>{m(o.value,{layersIds:[...x.layersIds||[],S]})},excludeIds:x.layersIds||[],placeholder:"+ Add Layer..."}),_("div",{className:"mt-2 text-right",children:_("button",{className:"text-xs text-blue-400 hover:text-blue-300 hover:underline",onClick:()=>a.value=o.value,children:"or create new layer"})})]})]}),c==="appearance"&&_("div",{className:"space-y-4",children:[_("div",{className:"form-group",children:_("label",{className:"flex items-center gap-2 cursor-pointer p-3 border border-slate-700 rounded-lg bg-slate-800/50",children:[_("input",{type:"checkbox",className:"form-checkbox",checked:x.showLegend||!1,onChange:S=>m(o.value,{showLegend:S.target.checked})}),_("div",{children:[_("span",{className:"text-sm font-medium text-slate-200 block",children:"Show Legend"}),_("span",{className:"text-xs text-slate-500",children:"Display this item in the legend panel"})]})]})}),x.showLegend&&_("div",{className:"space-y-3 pl-1",children:[_("p",{className:"text-xs text-slate-500 mb-3",children:"Leave empty to use ArcGIS API legend info automatically."}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["Legend URL ",_("span",{className:"text-slate-500 font-normal",children:"(optional)"})]}),_("input",{type:"text",className:"form-input",value:x.legendUrl||"",onInput:S=>m(o.value,{legendUrl:S.target.value}),placeholder:"Custom legend image URL"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["Legend Description Key ",_("span",{className:"text-slate-500 font-normal",children:"(optional)"})]}),_("input",{type:"text",className:"form-input",value:x.legendDescription||"",onInput:S=>m(o.value,{legendDescription:S.target.value}),placeholder:"i18n key for description"})]})]})]}),c==="translations"&&_("div",{className:"space-y-6",children:[_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:x.id,label:`Name Translations (ID: ${x.id||"none"})`})}),x.legendDescription&&_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:x.legendDescription,label:`Legend Description (ID: ${x.legendDescription})`})})]})]}):_("div",{className:"space-y-4",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Feature Type"}),_("div",{className:"flex gap-2",children:[_("button",{className:`flex-1 px-3 py-2 rounded text-sm ${n.value==="weatherFeatures"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>n.value="weatherFeatures",children:"Weather Feature"}),_("button",{className:`flex-1 px-3 py-2 rounded text-sm ${n.value==="features"?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,onClick:()=>n.value="features",children:"General Feature"})]})]}),_(s_,{tabs:[{id:"general",label:"General"},{id:"items",label:"Items"},{id:"translations",label:"Translations"}],activeTab:c,onChange:S=>d(S)}),c==="general"&&_("div",{className:"space-y-4",children:[_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label flex items-center gap-2",children:["Feature ID",s.value.id&&_("button",{type:"button",className:"text-xs px-1 hover:bg-slate-700 rounded",onClick:()=>J$(s.value.id),title:Za(s.value.id)?"Click to enable translations":"Click to mark as non-translatable",children:Za(s.value.id)?"":""})]}),_("input",{type:"text",className:"form-input",value:s.value.id||"",onInput:S=>f({id:S.target.value}),placeholder:"e.g. icing_index"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Feature Name (Internal)"}),_("input",{type:"text",className:"form-input",value:s.value.name||"",onInput:S=>f({name:S.target.value}),placeholder:"e.g. Icing Index"})]})]}),_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label",children:"Presentation"}),_("div",{className:"flex flex-wrap gap-2",children:[{value:"single",label:"Single (Radio)"},{value:"multiple",label:"Multiple (Checkbox)"}].map(S=>{const $=(s.value.presentation||"single")===S.value;return _("button",{className:`px-3 py-1 rounded-full text-xs font-medium transition-all border ${$?"bg-blue-600 text-white border-blue-500 shadow-sm":"bg-transparent text-slate-300 border-slate-600 hover:border-slate-500"}`,onClick:()=>f({presentation:S.value}),children:S.label},S.value)})})]}),s.value.presentation==="multiple"&&_("div",{className:"form-group flex items-center mt-6",children:_("label",{className:"flex items-center gap-2 cursor-pointer",children:[_("input",{type:"checkbox",className:"form-checkbox",checked:s.value.mutuallyExclusive||!1,onChange:S=>f({mutuallyExclusive:S.target.checked})}),_("span",{className:"text-sm text-slate-300",children:"Mutually Exclusive"})]})})]})]}),c==="items"&&_("div",{className:"space-y-3",children:[_("div",{className:"flex justify-between items-center mb-2",children:[_("h4",{className:"text-sm font-medium text-slate-300",children:"Feature Items"}),_("button",{className:"btn tiny primary",onClick:v,children:"+ Add Item"})]}),s.value.items.map((S,$)=>{const T=!S.id||!S.name||(S.layersIds?.length||0)===0;return _("div",{className:`border rounded-lg p-3 bg-slate-800/50 flex items-center justify-between cursor-pointer hover:bg-slate-700/50 transition-colors ${T?"border-red-600/50":"border-slate-600"}`,onClick:()=>o.value=$,children:[_("div",{className:"flex-1 min-w-0",children:[_("div",{className:"font-medium text-sm text-slate-200 flex items-center gap-2",children:[S.name||S.id||"(unnamed)",T&&_("span",{className:"text-red-400 text-xs",children:"incomplete"})]}),_("div",{className:"text-xs text-slate-500",children:[S.layersIds?.length||0," layers"]})]}),_("div",{className:"flex gap-2",children:[_("button",{className:"btn tiny",onClick:C=>{C.stopPropagation(),o.value=$},children:"Edit"}),s.value.items.length>1&&_("button",{className:"btn tiny danger",onClick:C=>{C.stopPropagation(),y($)},children:"Remove"})]})]},$)}),s.value.items.length===0&&_("div",{className:"text-center py-4 border border-dashed border-slate-600 rounded",children:[_("p",{className:"text-slate-500 text-sm mb-2",children:"No items defined"}),_("button",{className:"btn small primary",onClick:v,children:"Add First Item"})]})]}),c==="translations"&&_("div",{className:"space-y-6",children:[_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:s.value.id,label:`Feature Name Translations (ID: ${s.value.id||"none"})`})}),s.value.items.length>0&&_("div",{className:"space-y-4",children:[_("h4",{className:"text-sm font-medium text-slate-400 border-b border-slate-700 pb-2",children:"Item Translations"}),s.value.items.map((S,$)=>_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:[_("div",{className:"text-xs text-slate-500 mb-3",children:["Item: ",S.name||S.id||`#${$+1}`,!S.id&&_("span",{className:"text-amber-400 ml-2",children:"(no ID set)"})]}),_(Wl,{translationKey:S.id,label:`Name (ID: ${S.id||"none"})`}),S.legendDescription&&_("div",{className:"mt-4 pt-4 border-t border-slate-700",children:_(Wl,{translationKey:S.legendDescription,label:`Legend Description (ID: ${S.legendDescription})`})})]},$))]})]})]})}),_("div",{className:"p-4 border-t border-slate-700 flex gap-2 justify-end flex-shrink-0",children:[_("button",{className:"btn ghost",onClick:i,children:"Cancel"}),_("button",{className:"btn success",onClick:b,disabled:!h.value.valid,children:"Create Feature"})]})]}),_(Gye,{isOpen:a.value!==null,onClose:()=>a.value=null,onCreateLayer:w}),_(lV,{layerId:l.value,onClose:()=>l.value=null})]})}const a7="hemswx-arcgis-credentials",Hye="hemswx-map-editor-2024";function Vnt(t){const e=new TextEncoder().encode(t),i=new TextEncoder().encode(Hye),r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e[s]^i[s%i.length];return btoa(String.fromCharCode(...r))}function Unt(t){try{const e=Uint8Array.from(atob(t),s=>s.charCodeAt(0)),i=new TextEncoder().encode(Hye),r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e[s]^i[s%i.length];return new TextDecoder().decode(r)}catch{return""}}function Bnt(){try{const t=localStorage.getItem(a7);if(!t)return null;const e=Unt(t);return e?{apiKey:JSON.parse(e).apiKey||void 0}:null}catch(t){return console.warn("Failed to load ArcGIS credentials:",t),null}}function qnt(t){try{const e=JSON.stringify(t),i=Vnt(e);localStorage.setItem(a7,i),Z_.value=t}catch(e){console.warn("Failed to save ArcGIS credentials:",e)}}function Gnt(){try{localStorage.removeItem(a7),Z_.value=null}catch(t){console.warn("Failed to clear ArcGIS credentials:",t)}}const Z_=Zn(Bnt()),RX=il(()=>{const t=Z_.value;return t?!!t.apiKey:!1}),Hnt=il(()=>!!Z_.value?.apiKey),vN="esri-identity-modal",bN={base:vN,info:`${vN}__info`,notice:`${vN}__notice`},Wnt="ArcGIS Online";let Ho=class extends Ng{constructor(e,i){super(e,i),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return F2({button:()=>K(()=>Promise.resolve().then(()=>W2),void 0),dialog:()=>K(()=>import("./index-DP5xsVaN.js"),[]),input:()=>K(()=>Promise.resolve().then(()=>_it),void 0),label:()=>K(()=>Promise.resolve().then(()=>nye),void 0),notice:()=>K(()=>import("./index-DOzkPfv9.js"),[])})}get title(){return this.commonMessages?.auth.signIn}render(){const{open:e,title:i,messages:r,signingIn:s,oAuthPrompt:n,server:o,resource:a,error:l}=this,{info:c,oAuthInfo:d,lblItem:h,invalidUser:f,noAuthService:m,lblUser:y,lblPwd:v,lblCancel:b,lblSigning:w,lblOk:x}=r;return he("div",{class:this.classes(bN.base,v8(this.container))},he("form",{bind:this,onsubmit:this._submit},he("calcite-dialog",{bind:this,heading:i,modal:!0,open:e,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},he("div",{class:bN.info},zw(n?d:c,{server:o&&/\.arcgis\.com/i.test(o)?Wnt:o,resource:`(${a||h})`})),l?he("calcite-notice",{class:bN.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},he("div",{slot:"message"},l.details?.httpStatus?f:m)):null,n?null:[he("calcite-label",null,y,he("calcite-input",{afterCreate:S=>this._usernameInputNode=S,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),he("calcite-label",null,v,he("calcite-input",{afterCreate:S=>this._passwordInputNode=S,bind:this,name:"password",required:!0,type:"password",value:""}))],he("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},b),he("calcite-button",{loading:!!s,slot:"footer-end",type:"submit"},s?w:x))))}_focusUsernameInput(){return cue(()=>this._usernameInputNode)}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const i=this.oAuthPrompt?{}:{username:this._usernameInputNode?.value,password:this._passwordInputNode?.value};this.emit("submit",i)}};u([p({readOnly:!0})],Ho.prototype,"container",void 0),u([p(),Tf("esri/t9n/common")],Ho.prototype,"commonMessages",void 0),u([p()],Ho.prototype,"error",void 0),u([p(),Tf("esri/identity/t9n/identity")],Ho.prototype,"messages",void 0),u([p()],Ho.prototype,"oAuthPrompt",void 0),u([p()],Ho.prototype,"open",void 0),u([p()],Ho.prototype,"signingIn",void 0),u([p()],Ho.prototype,"server",void 0),u([p({readOnly:!0})],Ho.prototype,"title",null),u([p()],Ho.prototype,"resource",void 0),Ho=u([M("esri.identity.IdentityModal")],Ho);const NX=Ho,wN="esriJSAPIOAuth";let cV=class{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i?.authNamespace&&i.portalUrl){let r=e[i.authNamespace];r||(r=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),r[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(wN,JSON.stringify(e))}catch(s){return console.warn(s),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i?.appId&&i?.portalUrl&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const r=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken";xe(r,{authMode:"anonymous",keepAlive:!0,method:"post",query:{f:"json",auth_token:this.refreshToken||this.token,client_id:i.appId,token_type_hint:this.refreshToken?"refresh_token":"access_token"}})}if(i?.authNamespace&&i.portalUrl&&this.storage){const r=e[i.authNamespace];if(r){delete r[i.portalUrl];try{this.storage.setItem(wN,JSON.stringify(e))}catch(s){console.log(s)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i?.authNamespace&&i.portalUrl){let r=e[i.authNamespace];r&&(r=r[i.portalUrl],r&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(wN);if(i)try{e=JSON.parse(i)}catch(r){console.warn(r)}}return e}};cV.prototype.declaredClass="esri.identity.OAuthCredential";var uV,bw;let Ns=(bw=class extends Y{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return uV.fromJSON(this.toJSON())}},uV=bw,bw);u([p({json:{write:!0}})],Ns.prototype,"appId",void 0),u([p({json:{write:!0}})],Ns.prototype,"authNamespace",void 0),u([p({json:{write:!0}})],Ns.prototype,"expiration",void 0),u([p({json:{write:!0}})],Ns.prototype,"flowType",void 0),u([p({json:{write:!0}})],Ns.prototype,"forceLogin",void 0),u([p({json:{write:!0}})],Ns.prototype,"forceUserId",void 0),u([p({json:{write:!0}})],Ns.prototype,"locale",void 0),u([p({json:{write:!0}})],Ns.prototype,"minTimeUntilExpiration",void 0),u([p({json:{write:!0}})],Ns.prototype,"popup",void 0),u([p({json:{write:!0}})],Ns.prototype,"popupCallbackUrl",void 0),u([p({json:{write:!0}})],Ns.prototype,"popupWindowFeatures",void 0),u([p({json:{write:!0}})],Ns.prototype,"portalUrl",void 0),u([p({json:{write:!0}})],Ns.prototype,"preserveUrlHash",void 0),u([p({json:{write:!0}})],Ns.prototype,"userId",void 0),Ns=uV=u([M("esri.identity.OAuthInfo")],Ns);const dV=Ns;let Wo=class extends Y{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};u([p({json:{write:!0}})],Wo.prototype,"adminTokenServiceUrl",void 0),u([p({json:{write:!0}})],Wo.prototype,"currentVersion",void 0),u([p({json:{write:!0}})],Wo.prototype,"hasPortal",void 0),u([p({json:{write:!0}})],Wo.prototype,"hasServer",void 0),u([p({json:{write:!0}})],Wo.prototype,"owningSystemUrl",void 0),u([p({json:{write:!0}})],Wo.prototype,"owningTenant",void 0),u([p({json:{write:!0}})],Wo.prototype,"server",void 0),u([p({json:{write:!0}})],Wo.prototype,"shortLivedTokenValidity",void 0),u([p({json:{write:!0}})],Wo.prototype,"tokenServiceUrl",void 0),u([p({json:{write:!0}})],Wo.prototype,"webTierAuth",void 0),Wo=u([M("esri.identity.ServerInfo")],Wo);const _N=Wo,tM={},Wye=t=>{const e=new $s(t.owningSystemUrl).host,i=new $s(t.server).host,r=/.+\.arcgis\.com$/i;return r.test(e)&&r.test(i)},hV=(t,e)=>!!(Wye(t)&&e&&e.some(i=>i.test(t.server)));let iM=null,rM=null;try{iM=window.localStorage,rM=window.sessionStorage}catch{}let Jye=class extends s6{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=$t(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(r=>!this.findServerInfo(r.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(r=>{r.owningSystemUrl&&this._portals.push(r.owningSystemUrl),r.hasPortal&&this._portals.push(r.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const r of e){const s=this.findOAuthInfo(r.portalUrl);s&&i.splice(i.indexOf(s),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),r=this._isServerRsrc(i);let s,n=this.findServerInfo(i),o=!0;n||(n=new _N,n.server=this._getServerInstanceRoot(i),r?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(i),n.hasPortal=!0),this.registerServers([n])),s=this._findCredential(i),s?(delete e.server,Object.assign(s,e),o=!1):(s=new Oi({userId:e.userId,server:n.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?"server":"portal"}),s.resources=[i],this.credentials.push(s)),s.emitTokenChange(!1),o||s.refreshServerTokens()}toJSON(){return lU({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(i){const n=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&n.push(o.declaredClass?o:new _N(o))}),n.length&&this.registerServers(n)}if(r){const n=[];r.forEach(o=>{o.appId&&n.push(o.declaredClass?o:new dV(o))}),n.length&&this.registerOAuthInfos(n)}s&&s.forEach(n=>{n.server&&n.token&&n.expires&&n.expires>Date.now()&&((n=n.declaredClass?n:new Oi(n)).emitTokenChange(),this.credentials.push(n))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){i=r;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){i=r;break}return i}findCredential(e,i){if(!e)return;let r;e=this._sanitizeUrl(e);const s=this._isServerRsrc(e)?"server":"portal";if(i){for(const n of this.credentials)if(this._hasSameServerInstance(n.server,e)&&i===n.userId&&n.scope===s){r=n;break}}else for(const n of this.credentials)if(this._hasSameServerInstance(n.server,e)&&this._getIdenticalSvcIdx(e,n)!==-1&&n.scope===s){r=n;break}return r}getCredential(e,i){let r,s=!1,n=!0;i&&(s=!(!i.token&&!i.credential),r=i.error,n=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const o=new AbortController,a=Is();if(i.signal&&as(i.signal,()=>{o.abort()}),as(o,()=>{a.reject(new R("identity-manager:user-aborted","ABORTED"))}),Xr(o))return a.promise;i.signal=o.signal;const l=this._isAdminResource(e),c=s?this.findCredential(e):null;let d;if(c&&r?.details?.httpStatus===498)c.destroy();else if(c)return d=new R("identity-manager:not-authorized","You are currently signed in as: '"+c.userId+"'. You do not have access to this resource: "+e,{error:r}),a.reject(d),a.promise;const h=this._findCredential(e,i);if(h)return a.resolve(h),a.promise;let f=this.findServerInfo(e);if(f)!f.hasPortal&&f.server&&f.owningSystemUrl&&this._hasSameServerInstance(f.server,f.owningSystemUrl)&&(f.hasPortal=!0),!f.hasServer&&this._isServerRsrc(e)&&(f._restInfoPms=this._getTokenSvcUrl(e),f.hasServer=!0);else{const m=this._getTokenSvcUrl(e);if(!m)return d=new R("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),a.reject(d),a.promise;f=new _N,f.server=this._getServerInstanceRoot(e),typeof m=="string"?(f.tokenServiceUrl=m,f.hasPortal=!0):(f._restInfoPms=m,f.hasServer=!0),this.registerServers([f])}return f.hasPortal&&f._selfReq===void 0&&(n||_s(f.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(m=>m.tokenServiceUrl===f.tokenServiceUrl))&&(f._selfReq={owningTenant:i?.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,f,i,a,l)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,r){const s=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new $s(this._appOrigin),o=e.shortLivedTokenValidity;let a,l,c,d,h,f,m,y;i&&(y=this.tokenValidity||o||this._defaultTokenValidity,y>o&&o>0&&(y=o)),r&&(a=r.isAdmin,l=r.serverUrl,c=r.token,f=r.signal,m=r.ssl,e.customParameters=r.customParameters),a?d=e.adminTokenServiceUrl:(d=e.tokenServiceUrl,h=new $s(d.toLowerCase()),e.webTierAuth&&r?.serverUrl&&!m&&n.scheme==="http"&&(_s(n.uri,d,!0)||h.scheme==="https"&&n.host===h.host&&n.port==="7080"&&h.port==="7443")&&(d=d.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const v={query:{request:"getToken",username:i?.username,password:i?.password,serverUrl:l,token:c,expiration:y,referer:a||s?this._appOrigin:null,client:a?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,r),signal:f};return s||(v.withCredentials=!1),xe(d,v).then(b=>{const w=b.data;if(!w?.token)return new R("identity-manager:authentication-failed","Unable to generate token");const x=e.server;return tM[x]||(tM[x]={}),i&&(tM[x][i.username]=i.password),w.validity=y,w})}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,i,r){let s=!1;return this.getCredential(e,{prompt:!1}).then(n=>{let o;const a={f:"json"};if(n.scope==="portal")if(i&&(this._doPortalSignIn(e)||r?.force))o=n.server+"/sharing/rest/oauth2/validateAppAccess",a.client_id=i;else{if(!n.token)return{credential:n};o=n.server+"/sharing/rest"}else{if(!n.token)return{credential:n};o=n.server+"/rest/services"}return n.token&&(a.token=n.token),xe(o,{query:a,authMode:"anonymous"}).then(l=>{if(l.data.valid===!1)throw new R("identity-manager:not-authorized",`You are currently signed in as: '${n.userId}'.`,l.data);return s=!!l.data.viewOnlyUserTypeApp,{credential:n}}).catch(l=>{if(l.name==="identity-manager:not-authorized")throw l;const c=l.details?.httpStatus;if(c===498)throw n.destroy(),new R("identity-manager:not-authenticated","User is not signed in.");if(c===400)throw new R("identity-manager:invalid-request","Bad request");return{credential:n}})}).then(n=>({credential:n.credential,viewOnly:s}))}setOAuthResponseHash(e){e&&(e.startsWith("#")&&(e=e.slice(1)),this._processOAuthPopupParams(ny(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,r={}){const s=Is(),n=()=>{l?.remove(),c?.remove(),this.dialog?.destroy(),this.dialog=l=c=null},o=()=>{n(),this._oAuthDfd=null,s.reject(new R("identity-manager:user-aborted","ABORTED"))};r.signal&&as(r.signal,()=>{o()});const a=new NX({open:!0,resource:this.getResourceName(e),server:i.server});this.dialog=a,this.emit("dialog-create");let l=a.on("cancel",o),c=a.on("submit",d=>{this.generateToken(i,d,{isAdmin:r.isAdmin,signal:r.signal}).then(h=>{n();const f=new Oi({userId:d.username,server:i.server??void 0,token:h.token,expires:h.expires!=null?Number(h.expires):null,ssl:!!h.ssl,isAdmin:r.isAdmin,validity:h.validity});s.resolve(f)}).catch(h=>{a.error=h,a.signingIn=!1})});return s.promise}oAuthSignIn(e,i,r,s){this._oAuthDfd=Is();const n=this._oAuthDfd;let o;s?.signal&&as(s.signal,()=>{const f=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;f&&!f.closed?f.close():this.dialog&&d()}),n.resUrl_=e,n.sinfo_=i,n.oinfo_=r;const a=r._oAuthCred;if(a.storage&&(r.flowType==="authorization-code"||r.flowType==="auto"&&i.currentVersion>=8.4)){let f=crypto.getRandomValues(new Uint8Array(32));o=UL(f),a.codeVerifier=o,f=crypto.getRandomValues(new Uint8Array(32)),a.stateUID=UL(f),a.save()||(a.codeVerifier=o=null)}else a.codeVerifier=null;let l,c;this._getCodeChallenge(o).then(f=>{const m=!s||s.oAuthPopupConfirmation!==!1;if(!r.popup||!m)return void this._doOAuthSignIn(e,i,r,f);const y=new NX({oAuthPrompt:!0,server:i.server,open:!0});this.dialog=y,this.emit("dialog-create"),l=y.on("cancel",d),c=y.on("submit",()=>{h(),this._doOAuthSignIn(e,i,r,f)})});const d=()=>{h(),this._oAuthDfd=null,n.reject(new R("identity-manager:user-aborted","ABORTED"))},h=()=>{l?.remove(),c?.remove(),this.dialog?.destroy(),this.dialog=null};return n.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=ah(window,"message",i=>{if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&i.data?.type==="arcgis:auth:requestCredential"){const r=i.source;this.getCredential(e).then(s=>{r.postMessage({type:"arcgis:auth:credential",credential:{expires:s.expires,server:s.server,ssl:s.ssl,token:s.token,userId:s.userId}},i.origin)}).catch(s=>{r.postMessage({type:"arcgis:auth:error",error:{name:s.name,message:s.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){let e=window.location.hash;if(e){e.startsWith("#")&&(e=e.slice(1));const r=ny(e);let s=!1;if(r.access_token&&r.expires_in&&r.state&&r.hasOwnProperty("username"))try{r.state=JSON.parse(r.state),r.state.portalUrl&&(this._oAuthLocationParams=r,s=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(s=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}s&&(window.location.hash=r.state?.hash||"")}let i=window.location.search;if(i){i.startsWith("?")&&(i=i.slice(1));const r=ny(i);let s=!1;if(r.code&&r.state)try{r.state=JSON.parse(r.state),r.state.portalUrl&&r.state.uid&&(this._oAuthLocationParams=r,s=!0)}catch{}else if(r.error&&r.error_description&&(console.log("IdentityManager OAuth Error: ",r.error," - ",r.error_description),r.error==="access_denied"&&(s=!0,r.state)))try{r.state=JSON.parse(r.state)}catch{}if(s){const n={...r};["code","error","error_description","message_code","persist","state"].forEach(l=>{delete n[l]});const o=Ka(n),a=window.location.pathname+(o?`?${o}`:"")+(r.state?.hash||"");window.history.replaceState(window.history.state,"",a)}}}_getOAuthToken(e,i,r,s,n){return e=e.replace(/^http:/i,"https:"),xe(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:s&&n?{grant_type:"authorization_code",code:i,redirect_uri:s,client_id:r,code_verifier:n}:{grant_type:"refresh_token",refresh_token:i,client_id:r}}).then(o=>o.data)}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",i);return UL(new Uint8Array(r))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new R("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let r,s,n,o,a=-1;const l=i?.token,c=i?.resource,d=this._isServerRsrc(e)?"server":"portal",h=this.credentials.filter(f=>this._hasSameServerInstance(f.server,e)&&f.scope===d);if(e=c||e,h.length)if(h.length===1){if(r=h[0],n=this.findServerInfo(r.server),s=n?.owningSystemUrl,o=s?this.findCredential(s,r.userId):void 0,a=this._getIdenticalSvcIdx(e,r),!l)return a===-1&&r.resources.push(e),this._addResource(e,o),r;a!==-1&&(r.resources.splice(a,1),this._removeResource(e,o))}else{let f,m;if(h.some(y=>(m=this._getIdenticalSvcIdx(e,y),m!==-1&&(f=y,n=this.findServerInfo(f.server),s=n?.owningSystemUrl,o=s?this.findCredential(s,f.userId):void 0,a=m,!0))),l)f&&(f.resources.splice(a,1),this._removeResource(e,o));else if(f)return this._addResource(e,o),f}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){i=r;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let r=-1;i&&(r=this._getIdenticalSvcIdx(e,i),r>-1&&i.resources.splice(r,1))}_useProxy(e,i){return i?.isAdmin&&!_s(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!_s(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new $s(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let r=i.indexOf(this._agsRest);return r===-1&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),r!==-1||kU(i)||(r=i.indexOf("/sharing")),r===-1&&i.endsWith("/")&&(r=i.length-1),r>-1?e.slice(0,r):e}_hasSameServerInstance(e,i){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=BM(e),i=BM(i),(e=e.slice(Math.max(0,e.indexOf(":"))))===(i=i.slice(Math.max(0,i.indexOf(":"))))}_sanitizeUrl(e){const i=(lt.request.proxyUrl||"").toLowerCase(),r=i?e.toLowerCase().indexOf(i+"?"):-1;return r!==-1&&(e=e.slice(r+i.length+1)),e=Gn(e),$t(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let r=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const s=this._getSuffix(e).toLowerCase(),n=this._getSuffix(i).toLowerCase();if(r=s===n,!r){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=s.replaceAll(o,"$1")===n.replaceAll(o,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const i=new $s(e.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some(n=>n.regex.test(i.uri));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),i.uri)),s||lt.portalUrl&&(s=_s(i,lt.portalUrl,!0)),s||(s=this._portals.some(n=>this._hasSameServerInstance(n,i.uri))),s=s||this._agsPortal.test(i.path),s}_isIdProvider(e,i){let r=-1,s=-1;this._gwDomains.forEach((o,a)=>{r===-1&&o.regex.test(e)&&(r=a),s===-1&&o.regex.test(i)&&(s=a)});let n=!1;if(r>-1&&s>-1&&(r===0||r===4?s!==0&&s!==4||(n=!0):r===1?s!==1&&s!==2||(n=!0):r===2?s===2&&(n=!0):r===3&&s===3&&(n=!0)),!n){const o=this.findServerInfo(i),a=o?.owningSystemUrl;a&&Wye(o)&&this._isPortalDomain(a)&&this._isIdProvider(e,a)&&(n=!0)}return n}_getIdenticalSvcIdx(e,i){let r=-1;for(let s=0;s<i.resources.length;s++){const n=i.resources[s];if(this._isIdenticalService(e,n)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,r,s;if(this._isRESTService(e)||this._isAdminResource(e)){const n=this._getServerInstanceRoot(e);return i=n+"/admin/generateToken",r=xe(e=n+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:r}}if(this._isPortalDomain(e)){let n="";if(this._gwDomains.some(o=>(o.regex.test(e)&&(n=o.tokenServiceUrl),!!n)),n||this._portals.some(o=>(this._hasSameServerInstance(o,e)&&(n=o+this._gwTokenUrl),!!n)),n||(s=e.toLowerCase().indexOf("/sharing"),s!==-1&&(n=e.slice(0,s)+this._gwTokenUrl)),n||(n=this._getOrigin(e)+this._gwTokenUrl),n){const o=new $s(e).port;/^http:\/\//i.test(e)&&o==="7080"&&(n=n.replace(/:7080/i,":7443")),n=n.replace(/http:/i,"https:")}return n}}_processOAuthResponseParams(e,i,r){const s=i._oAuthCred;if(e.code){const o=s.codeVerifier;return s.codeVerifier=null,s.stateUID=null,s.save(),this._getOAuthToken(r.server,e.code,i.appId,this._getRedirectURI(i,!0),o).then(a=>{const l=new Oi({userId:a.username,server:r.server??void 0,token:a.access_token,expires:Date.now()+1e3*a.expires_in,ssl:a.ssl,oAuthState:e.state,_oAuthCred:s});return i.userId=l.userId,s.storage=a.persist?iM:rM,s.refreshToken=a.refresh_token,s.token=null,s.expires=a.refresh_token_expires_in?Date.now()+1e3*a.refresh_token_expires_in:null,s.userId=l.userId,s.ssl=l.ssl,s.save(),l})}const n=new Oi({userId:e.username,server:r.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:s});return i.userId=n.userId,s.storage=e.persist?iM:rM,s.refreshToken=null,s.token=n.token,s.expires=n.expires,s.userId=n.userId,s.ssl=n.ssl,s.save(),Promise.resolve(n)}_processOAuthPopupParams(e){const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle?.remove(),e.error){const r=e.error==="access_denied",s=new R(r?"identity-manager:user-aborted":"identity-manager:authentication-failed",r?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(s)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(r=>{i.resolve(r)}).catch(r=>{i.reject(r)})}_setOAuthResponseQueryString(e){e&&(e.startsWith("?")&&(e=e.slice(1)),this._processOAuthPopupParams(ny(e)))}async _exchangeToken(e,i,r){return(await xe(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:r}})).data.token}async _getPlatformSelf(e,i){if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const r=await xe(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,r.data}catch(r){throw r.details?.messageCode==="OAUTH_0066"&&(this._getPlatformSelfError=[r,Date.now()]),r}}_getPortalSelf(e,i){let r;return this._gwDomains.some(s=>(s.regex.test(e)&&(r=s.customBaseUrl),!!r)),r?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:r,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),xe(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(s=>s.data))}_doPortalSignIn(e){const i=this._portalConfig,r=window.location.href,s=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(r)||!(s?s.hasPortal||s.owningSystemUrl&&this._isPortalDomain(s.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||_s(r,e,!0)))}_checkProtocol(e,i,r,s){let n=!0;const o=s?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&v2(o)&&(n=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!n)&&r(new R("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),n}_enqueue(e,i,r,s,n,o){return s||(s=Is()),s.resUrl_=e,s.sinfo_=i,s.options_=r,s.admin_=n,s.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=c=>{const d=e.options_?.resource,h=e.resUrl_,f=e.refresh_;let m=!1;this.credentials.includes(c)||(f&&this.credentials.includes(f)?(f.userId=c.userId,f.token=c.token,f.expires=c.expires,f.validity=c.validity,f.ssl=c.ssl,f.creationTime=c.creationTime,m=!0,c=f):this.credentials.push(c)),c.resources||(c.resources=[]),c.resources.includes(d||h)||c.resources.push(d||h),c.scope=this._isServerRsrc(h)?"server":"portal",c.emitTokenChange();const y=this._soReqs,v={};this._soReqs=[],y.forEach(b=>{if(!this._isIdenticalService(h,b.resUrl_)){const w=this._getSuffix(b.resUrl_);v[w]||(v[w]=!0,c.resources.push(b.resUrl_))}}),e.resolve(c),y.forEach(b=>{this._hasSameServerInstance(this._getServerInstanceRoot(h),b.resUrl_)?b.resolve(c):this._soReqs.push(b)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,m||this.emit("credential-create",{credential:c}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=c=>{e.reject(c),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(c,d,h,f)=>{const m=e.sinfo_,y=!e.options_||e.options_.prompt!==!1,v=m.hasPortal&&this._findOAuthInfo(e.resUrl_);let b,w;if(c)i(new Oi({userId:c,server:m.server??void 0,token:h??void 0,expires:f!=null?Number(f):null,ssl:!!d}));else if(window!==window.parent&&this._appUrlObj.query?.["arcgis-auth-origin"]&&this._appUrlObj.query?.["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const x=ah(window,"message",S=>{S.source===window.parent&&S.data&&(S.data.type==="arcgis:auth:credential"?(x.remove(),S.data.credential.expires<Date.now()?r(new R("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new Oi(S.data.credential))):S.data.type==="arcgis:auth:error"&&(x.remove(),S.data.error.name==="tokenExpiredError"?r(new R("identity-manager:credential-request-failed","Parent application's token has expired.")):r(R.fromJSON(S.data.error))))});as(e.options_?.signal,()=>{x.remove()})}else if(v){let x=v._oAuthCred;if(!x){const S=new cV(v,iM),$=new cV(v,rM);S.isValid()&&$.isValid()?S.expires>$.expires?(x=S,$.destroy()):(x=$,S.destroy()):x=S.isValid()?S:$,v._oAuthCred=x}if(x.isValid()){b=new Oi({userId:x.userId??void 0,server:m.server??void 0,token:x.token??void 0,expires:x.expires,ssl:x.ssl??void 0,_oAuthCred:x});const S=v.appId!==x.appId&&this._doPortalSignIn(e.resUrl_);S||x.refreshToken?(e._pendingDfd=x.refreshToken?this._getOAuthToken(m.server,x.refreshToken,x.appId).then($=>(b.expires=Date.now()+1e3*$.expires_in,b.token=$.access_token,b)):Promise.resolve(b),e._pendingDfd.then($=>S?this._exchangeToken($.server,v.appId,$.token).then(T=>($.token=T,$)).catch(()=>$):$).then($=>{i($)}).catch($=>{const T=$.details?.httpStatus;T>0&&T!==404?(x.destroy(),s()):r($)})):i(b)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(v.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===x.stateUID&&x.codeVerifier)){const S=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(S,v,m).then($=>{i($)}).catch(r)}else{const S=()=>{y?e._pendingDfd=this.oAuthSignIn(e.resUrl_,m,v,e.options_).then(i,r):(w=new R("identity-manager:not-authenticated","User is not signed in."),r(w))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(m.server,v.appId).then($=>{_s($.portalUrl,this._appOrigin,!0)?(b=new Oi({userId:$.username,server:m.server??void 0,expires:Date.now()+1e3*$.expires_in,token:$.token}),i(b)):S()}).catch(S):S()}}else if(y){if(this._checkProtocol(e.resUrl_,m,r,e.admin_)){let x=e.options_;e.admin_&&(x=x||{},x.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,m,x).then(i,r)}}else w=new R("identity-manager:not-authenticated","User is not signed in."),r(w)},n=()=>{const c=e.sinfo_,d=c.owningSystemUrl,h=e.options_;let f,m,y,v;if(h&&(f=h.token,m=h.error,y=h.prompt),v=this._findCredential(d,{token:f,resource:e.resUrl_}),!v){for(const b of this.credentials)if(this._isIdProvider(d,b.server)){v=b;break}}if(v){const b=this.findCredential(e.resUrl_,v.userId);if(b)i(b);else if(hV(c,this._legacyFed)){const w=v.toJSON();w.server=c.server,w.resources=null,i(new Oi(w))}else(e._pendingDfd=this.generateToken(this.findServerInfo(v.server),null,{serverUrl:e.resUrl_,token:v.token,signal:e.options_.signal,ssl:v.ssl})).then(w=>{i(new Oi({userId:v?.userId,server:c.server??void 0,token:w.token,expires:w.expires!=null?Number(w.expires):null,ssl:!!w.ssl,isAdmin:e.admin_,validity:w.validity}))},r)}else this._busy=null,f&&(e.options_.token=null),(e._pendingDfd=this.getCredential(d.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:c.owningTenant,signal:e.options_.signal,token:f,error:m,prompt:y})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},b=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(b)})};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),l=e.sinfo_._restInfoPms;l?l.promise.then(c=>{const d=e.sinfo_;if(d._restInfoPms){d.adminTokenServiceUrl=d._restInfoPms.adminUrl,d._restInfoPms=null,d.tokenServiceUrl=(wu("authInfo.tokenServicesUrl",c)||wu("authInfo.tokenServiceUrl",c)||wu("tokenServiceUrl",c))??null,d.shortLivedTokenValidity=wu("authInfo.shortLivedTokenValidity",c)??null,d.currentVersion=c.currentVersion,d.owningTenant=c.owningTenant;const h=d.owningSystemUrl=c.owningSystemUrl;h&&this._portals.push(h)}a&&d.owningSystemUrl?n():s()},()=>{e.sinfo_._restInfoPms=null;const c=new R("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");r(c)}):a&&o?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(c=>{const d={};let h,f,m,y;return c&&(h=c.user?.username,d.username=h,d.allSSL=c.allSSL,f=c.supportsOAuth,y=parseFloat(c.currentVersion),c.portalMode==="multitenant"&&(m=c.customBaseUrl),e.sinfo_.currentVersion=y),e.sinfo_.webTierAuth=!!h,h&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:d.allSSL}).catch(()=>null).then(v=>(d.portalToken=v?.token,d.tokenExpiration=v?.expires,d)):!h&&f&&y>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:m,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>d):d}).catch(()=>null).then(c=>{e.sinfo_._selfReq=null,c?s(c.username,c.allSSL,c.portalToken,c.tokenExpiration):s()}):s()}_generateOAuthInfo(e){let i,r=null,s=e.portalUrl;const n=e.customBaseUrl,o=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){r=this._appUrlObj.path;const l=r.search(/\/(apps|home)\//);r=l>-1?r.slice(0,l):null}return a&&r?(this._hasTestedIfAppIsOnPortal=!0,i=xe(r+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new dV({appId:"arcgisonline",popupCallbackUrl:r+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return s=s.replace(/^http:/i,"https:"),xe(s+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this._defaultOAuthInfo.appId,redirect_uri:Us(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(l=>{if(l.data.valid){const c=this._defaultOAuthInfo.clone();l.data.urlKey&&n?c.portalUrl="https://"+l.data.urlKey.toLowerCase()+"."+n:c.portalUrl=s,c.popup=window!==window.top||!(_s(s,this._appOrigin)||this._gwDomains.some(d=>d.regex.test(s)&&d.regex.test(this._appOrigin))),this.oAuthInfos.push(c)}})})}_doOAuthSignIn(e,i,r,s){const n=r._oAuthCred,o={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),n.stateUID&&(o.uid=n.stateUID);const a={client_id:r.appId,response_type:n.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!n.codeVerifier)};r.forceLogin&&(a.force_login=!0),r.forceUserId&&r.userId&&(a.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(a.redirectToUserOrgUrl=!0),n.codeVerifier&&(a.code_challenge=s||n.codeVerifier,a.code_challenge_method=s?"S256":"plain");const l=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",c=l+"?"+Ka(a);if(r.popup){const d=window.open(c,"esriJSAPIOAuth",r.popupWindowFeatures);if(d)d.focus(),this._oAuthDfd.oAuthWin_=d,this._oAuthIntervalId=setInterval(()=>{if(d.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const h=this._oAuthDfd;if(h){const f=new R("identity-manager:user-aborted","ABORTED");h.reject(f)}}},500),this._oAuthOnPopupHandle=ah(window,["arcgis:auth:hash","arcgis:auth:location:search"],h=>{h.type==="arcgis:auth:hash"?this.setOAuthResponseHash(h.detail):this._setOAuthResponseQueryString(h.detail)});else{const h=new R("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(h)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:a,authorizeUrl:l,resourceUrl:e,serverInfo:i,oAuthInfo:r}):window.location.href=c}_getRedirectURI(e,i){const r=window.location.href.replace(/#.*$/,"");if(e.popup)return Us(e.popupCallbackUrl);if(i){const s=$t(r);return s.query&&["code","error","error_description","message_code","persist","state"].forEach(n=>{delete s.query[n]}),Io(s.path,s.query)}return r}};Jye.prototype.declaredClass="esri.identity.IdentityManagerBase";let Oi=class extends Pg{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e?._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=ft,i=e.findServerInfo(this.server),r=i?.owningSystemUrl,s=!!r&&this.scope==="server",n=s&&hV(i,e._legacyFed),o=i.webTierAuth,a=o&&e.normalizeWebTierAuth,l=tM[this.server],c=l?.[this.userId];let d,h=this.resources&&this.resources[0],f=s?e.findServerInfo(r):null,m={username:this.userId,password:c};if(o&&!a)return;s&&!f&&e.serverInfos.some(v=>(e._isIdProvider(r,v.server)&&(f=v),!!f));const y=f?e.findCredential(f.server,this.userId):null;if(!s||y){if(!n){if(s)d={serverUrl:h,token:y?.token,ssl:y?.ssl};else if(a)m=null,d={ssl:this.ssl};else{if(!c){let v;return h&&(h=e._sanitizeUrl(h),this._enqueued=1,v=e._enqueue(h,i,null,null,this.isAdmin,this),v.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),v}this.isAdmin&&(d={isAdmin:!0})}return e.generateToken(s?f:i,s?null:m,d).then(v=>{this.token=v.token,this.expires=v.expires!=null?Number(v.expires):null,this.creationTime=Date.now(),this.validity=v.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}y?.refreshToken()}}refreshServerTokens(){if(this.scope==="portal"){const e=ft;e.credentials.forEach(i=>{const r=e.findServerInfo(i.server),s=r?.owningSystemUrl;i!==this&&i.userId===this.userId&&s&&i.scope==="server"&&(e._hasSameServerInstance(this.server,s)||e._isIdProvider(s,this.server))&&(hV(r,e._legacyFed)?(i.token=this.token,i.expires=this.expires,i.creationTime=this.creationTime,i.validity=this.validity,i.emitTokenChange()):i.refreshToken())})}}emitTokenChange(e){clearTimeout(this._refreshTimer);const i=ft,r=this.server?i.findServerInfo(this.server):null,s=r?.owningSystemUrl,n=s?i.findServerInfo(s):null;e===!1||s&&this.scope!=="portal"&&(!n?.webTierAuth||i.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=ft,i=e.credentials.indexOf(this);i>-1&&e.credentials.splice(i,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=lU({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),i=this.resources;return i&&i.length>0&&(e.resources=i.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,i=2**31-1;let r=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();r<0?r=0:r>i&&(r=i),this._refreshTimer=setTimeout(this.refreshToken.bind(this),r>e?r-e:r)}};u([p()],Oi.prototype,"creationTime",void 0),u([p()],Oi.prototype,"expires",void 0),u([p()],Oi.prototype,"isAdmin",void 0),u([p()],Oi.prototype,"oAuthState",void 0),u([p()],Oi.prototype,"resources",void 0),u([p()],Oi.prototype,"scope",void 0),u([p()],Oi.prototype,"server",void 0),u([p()],Oi.prototype,"ssl",void 0),u([p()],Oi.prototype,"token",void 0),u([p()],Oi.prototype,"tokenRefreshBuffer",void 0),u([p()],Oi.prototype,"userId",void 0),u([p()],Oi.prototype,"validity",void 0),Oi=u([M("esri.identity.Credential")],Oi);let Zye=class extends Jye{};Zye.prototype.declaredClass="esri.identity.IdentityManager";const Zg=new Zye;mSe(Zg);const Yye=Object.freeze(Object.defineProperty({__proto__:null,default:Zg},Symbol.toStringTag,{value:"Module"})),Jnt=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function eI(t){return t!=null&&Jnt.some(([e,i])=>t>=e&&t<=i)}const Znt={visible:"visibleSublayers"};let Fd=class extends _e{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",i=>this.notifyChange(Znt[i.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:i}=this,r=e?.sublayers,s=[],n=o=>{const{minScale:a,maxScale:l,sublayers:c,visible:d}=o;d&&(i===0||(a===0||i<=a)&&(l===0||i>=l))&&(c?c.forEach(n):s.push(o))};return r?.forEach(n),s}toJSON(){const{layer:e,layers:i}=this,{imageFormat:r,imageTransparency:s,version:n}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:s?"TRUE":"FALSE",version:n,layers:i}}};u([p()],Fd.prototype,"layer",null),u([p({readOnly:!0})],Fd.prototype,"layers",null),u([p({type:Number})],Fd.prototype,"scale",void 0),u([p({readOnly:!0})],Fd.prototype,"version",null),u([p({readOnly:!0})],Fd.prototype,"visibleSublayers",null),Fd=u([M("esri.layers.support.ExportWMSImageParameters")],Fd);async function Kye(t,e,i){let r;try{r=await createImageBitmap(t)}catch(s){throw new R("request:server",`Unable to load ${e}`,{url:e,error:s})}return Gt(i),r}async function n_(t,e,i,r,s){let n;try{n=await createImageBitmap(t)}catch(o){throw new R("request:server",`Unable to load tile ${e}/${i}/${r}`,{error:o,level:e,row:i,col:r})}return Gt(s),n}var sM;let Ynt=0,ki=sM=class extends O_(Rue){constructor(t){super(t),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([ks(()=>this.sublayers,"after-add",({item:e})=>{e.parent=this,e.layer=this.layer},lr),ks(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=e.parent=null},lr),de(()=>this.sublayers,(e,i)=>{if(i)for(const r of i)r.layer=r.parent=null;if(e)for(const r of e)r.parent=this,r.layer=this.layer},lr),de(()=>this.layer,e=>{if(this.sublayers)for(const i of this.sublayers)i.layer=e},lr)])}get id(){return this._get("id")??Ynt++}set id(t){this._set("id",t)}readLegendUrl(t,e){return e.legendUrl??e.legendURL??null}get effectiveScaleRange(){const{minScale:t,maxScale:e}=this;return{minScale:t,maxScale:e}}castSublayers(t){return Mi(ue.ofType(sM),t)}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){const t=new sM;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(t.fullExtents=this.fullExtents?.map(e=>e.clone())??null),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(t.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("name")&&(t.name=this.name),this.hasOwnProperty("parent")&&(t.parent=this.parent),this.hasOwnProperty("queryable")&&(t.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(t.sublayers=this.sublayers?.map(e=>e.clone())),this.hasOwnProperty("spatialReferences")&&(t.spatialReferences=this.spatialReferences?.map(e=>e)),this.hasOwnProperty("visible")&&(t.visible=this.visible),this.hasOwnProperty("title")&&(t.title=this.title),t}_setAndNotifyLayer(t,e){const i=this.layer;this._get(t)!==e&&(this._set(t,e),i&&i.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};u([p()],ki.prototype,"description",void 0),u([p({readOnly:!0})],ki.prototype,"dimensions",void 0),u([p({type:Pe,json:{name:"extent"}})],ki.prototype,"fullExtent",void 0),u([p()],ki.prototype,"fullExtents",void 0),u([p({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],ki.prototype,"id",null),u([p({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],ki.prototype,"legendUrl",void 0),u([Q("legendUrl",["legendUrl","legendURL"])],ki.prototype,"readLegendUrl",null),u([p({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ki.prototype,"legendEnabled",void 0),u([p()],ki.prototype,"layer",void 0),u([p()],ki.prototype,"maxScale",void 0),u([p()],ki.prototype,"minScale",void 0),u([p({readOnly:!0})],ki.prototype,"effectiveScaleRange",null),u([p({type:String,json:{write:{ignoreOrigin:!0}}})],ki.prototype,"name",void 0),u([p()],ki.prototype,"parent",void 0),u([p({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],ki.prototype,"popupEnabled",void 0),u([p({type:Boolean,json:{write:{ignoreOrigin:!0}}})],ki.prototype,"queryable",void 0),u([p()],ki.prototype,"sublayers",void 0),u([Mt("sublayers")],ki.prototype,"castSublayers",null),u([p({type:[Number],json:{read:{source:"spatialReferences"}}})],ki.prototype,"spatialReferences",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0}}})],ki.prototype,"title",void 0),u([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],ki.prototype,"visible",null),ki=sM=u([M("esri.layers.support.WMSSublayer")],ki);const DX={84:4326,83:4269,27:4267};function Knt(t){if(!t)return null;const e={idCounter:-1};typeof t=="string"&&(t=new DOMParser().parseFromString(t,"text/xml"));const i=t.documentElement;if(i.nodeName==="ServiceExceptionReport"){const re=Array.prototype.slice.call(i.childNodes).map(me=>me.textContent).join(`\r
`);throw new R("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",re)}const r=mn("Capability",i),s=mn("Service",i),n=r&&mn("Request",r);if(!r||!s||!n)return null;const o=mn("Layer",r);if(!o)return null;const a=i.nodeName==="WMS_Capabilities"||i.nodeName==="WMT_MS_Capabilities"?i.getAttribute("version"):"1.3.0",l=Bc("Title",s,"")||Bc("Name",s,""),c=Bc("AccessConstraints",s,""),d=/^none$/i.test(c)?"":c,h=Bc("Abstract",s,""),f=parseInt(Bc("MaxWidth",s,"5000"),10),m=parseInt(Bc("MaxHeight",s,"5000"),10),y=zX(n,"GetMap"),v=FX(n,"GetMap"),b=Jx(o,a,e);if(!b)return null;let w,x=0;const S=Array.prototype.slice.call(r.childNodes),$=b.sublayers??[],T=re=>{re!=null&&$.push(re)};S.forEach(re=>{re.nodeName==="Layer"&&(x===0?w=re:(x===1&&b.name&&(b.name="",T(Jx(w,a,e))),T(Jx(re,a,e))),x++)});const C=b.sublayers??[],L=b.fullExtents??[];C.length===0&&C.push(b),b.extent??(b.extent=C[0].extent);const N=b.spatialReferences.length>0?b.spatialReferences:Xye(b),D=FX(n,"GetFeatureInfo"),F=D?zX(n,"GetFeatureInfo"):null,W=Qye(C),Z=b.minScale||0,V=b.maxScale||0,A=b.dimensions??[],q=W.reduce((re,me)=>re.concat(me.dimensions??[]),[]),J=A.concat(q).filter(tge);let ee=null;if(J.length){const re=J.map(Ce=>{const{extent:at}=Ce;return eot(at)?at.map(vt=>vt.getTime()):at?.map(vt=>[vt.min.getTime(),vt.max.getTime()])}).flat(2).filter(Ei),{start:me,end:ze}=re.reduce((Ce,at)=>({start:Math.min(Ce.start,at),end:Math.max(Ce.end,at)}),{start:1/0,end:-1/0});ee={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[me,ze]}}return{copyright:d,description:h,dimensions:A,extent:b.extent,fullExtents:L,featureInfoFormats:F,featureInfoUrl:D,mapUrl:v,maxWidth:f,maxHeight:m,maxScale:V,minScale:Z,layers:W,spatialReferences:N,supportedImageFormatTypes:y,timeInfo:ee,title:l,version:a}}function Xnt(t){const e=t.filter(i=>i.popupEnabled&&i.name&&i.queryable);return e.length?e.map(({name:i})=>i).join():null}function Xye(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const e of t.sublayers){const i=Xye(e);if(i.length>0)return i}return[]}function Qye(t){let e=[];for(const i of t)e.push(i),i.sublayers?.length&&(e=e.concat(Qye(i.sublayers)),delete i.sublayers);return e}function nM(t,e,i){return e.getAttribute(t)??i}function Qnt(t,e,i,r){const s=mn(t,i);return s?nM(e,s,r):r}function mn(t,e){for(let i=0;i<e.childNodes.length;i++){const r=e.childNodes[i];if(ege(r)&&r.nodeName===t)return r}return null}function oM(t,e){if(e==null)return[];const i=[];for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];ege(s)&&s.nodeName===t&&i.push(s)}return i}function Bc(t,e,i){return mn(t,e)?.textContent??i}function xN(t,e,i){const r=parseFloat(t.getAttribute("minx")??"0"),s=parseFloat(t.getAttribute("miny")??"0"),n=parseFloat(t.getAttribute("maxx")??"0"),o=parseFloat(t.getAttribute("maxy")??"0");return{xmin:i?isNaN(s)?-Number.MAX_VALUE:s:isNaN(r)?-Number.MAX_VALUE:r,ymin:i?isNaN(r)?-Number.MAX_VALUE:r:isNaN(s)?-Number.MAX_VALUE:s,xmax:i?isNaN(o)?Number.MAX_VALUE:o:isNaN(n)?Number.MAX_VALUE:n,ymax:i?isNaN(n)?Number.MAX_VALUE:n:isNaN(o)?Number.MAX_VALUE:o,spatialReference:{wkid:e}}}function FX(t,e){const i=mn(e,t);if(i){const r=mn("DCPType",i);if(r){const s=mn("HTTP",r);if(s){const n=mn("Get",s);if(n){let o=Qnt("OnlineResource","xlink:href",n,null);if(o){const a=o.indexOf("&");return a!==-1&&a===o.length-1&&(o=o.slice(0,-1)),iot(o,["service","request"])}}}}}return null}function zX(t,e){const i=oM("Operation",t);if(!i.length)return oM("Format",mn(e,t)).map(({textContent:s})=>s).filter(Ei);const r=[];for(const s of i)if(s.getAttribute("name")===e){const n=oM("Format",s);for(const{textContent:o}of n)o!=null&&r.push(o)}return r}function jX(t,e,i){const r=mn(e,t);if(!r)return i;const{textContent:s}=r;if(s==null||s==="")return i;const n=Number(s);return isNaN(n)?i:n}function Jx(t,e,i){if(!t)return null;const r=t.getAttribute("queryable")?.toLowerCase(),s=r==="1"||r==="true",n={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:s,spatialReferences:[],sublayers:null},o=mn("LatLonBoundingBox",t),a=mn("EX_GeographicBoundingBox",t),l=o?xN(o,4326):a?{xmin:parseFloat(Bc("westBoundLongitude",a,"0")),ymin:parseFloat(Bc("southBoundLatitude",a,"0")),xmax:parseFloat(Bc("eastBoundLongitude",a,"0")),ymax:parseFloat(Bc("northBoundLatitude",a,"0")),spatialReference:{wkid:4326}}:{xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}};n.minScale=jX(t,"MaxScaleDenominator",0),n.maxScale=jX(t,"MinScaleDenominator",0);const c=["1.0.0","1.1.0","1.1.1"].includes(e)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(d=>{if(d.nodeName==="Name")n.name=d.textContent||"";else if(d.nodeName==="Title")n.title=d.textContent||"";else if(d.nodeName==="Abstract")n.description=d.textContent||"";else if(d.nodeName==="BoundingBox"){const h=d.getAttribute(c),f=h?.indexOf(":");if(f&&f>-1){let m=parseInt(h.slice(f+1),10);m===0||isNaN(m)||(m=DX[m]??m);const y=e==="1.3.0"?xN(d,m,eI(m)):xN(d,m);y&&n.fullExtents&&n.fullExtents.push(y)}}else if(d.nodeName===c)(d.textContent?.split(" ")??[]).forEach(h=>{let f=NaN;if(h.includes(":")){const[m,y]=h.toUpperCase().split(":");m!=="CRS"&&m!=="EPSG"||(f=parseInt(y,10))}else f=parseInt(h,10);if(f!==0&&!isNaN(f)){const m=DX[f]??f;n.spatialReferences.includes(m)||n.spatialReferences.push(m)}});else if(d.nodeName!=="Style"||n.legendUrl){if(d.nodeName==="Layer"){const h=Jx(d,e,i);h&&(h.parentLayerId=n.id,n.sublayers||(n.sublayers=[]),n.sublayers.push(h))}}else{const h=mn("LegendURL",d);if(h){const f=mn("OnlineResource",h);f&&(n.legendUrl=f.getAttribute("xlink:href"))}}}),n.extent=l,n.dimensions=oM("Dimension",t).filter(d=>d.getAttribute("name")&&d.getAttribute("units")&&d.textContent).map(d=>{const h=d.getAttribute("name"),f=d.getAttribute("units"),m=d.textContent,y=d.getAttribute("unitSymbol")??void 0,v=d.getAttribute("default")??void 0,b=nM("default",d,"0")!=="0",w=nM("nearestValue",d,"0")!=="0",x=nM("current",d,"0")!=="0";return tge({name:h,units:f})?{name:"time",units:"ISO8601",extent:BX(m),default:BX(v),multipleValues:b,nearestValue:w,current:x}:tot({name:h,units:f})?{name:"elevation",units:f,extent:VX(m),unitSymbol:y,default:VX(v),multipleValues:b,nearestValue:w}:{name:h,units:f,extent:UX(m),unitSymbol:y,default:UX(v),multipleValues:b,nearestValue:w}}),n}function eot(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}function ege(t){return t.nodeType===Node.ELEMENT_NODE}function tot(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}function tge(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function iot(t,e){const i=[],r=$t(t);for(const s in r.query)r.query.hasOwnProperty(s)&&(e.includes(s.toLowerCase())||i.push(s+"="+r.query[s]));return r.path+(i.length?"?"+i.join("&"):"")}function VX(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:parseFloat(s[0]),max:parseFloat(s[1]),resolution:s.length>=3&&s[2]!=="0"?parseFloat(s[2]):void 0}}).filter(Ei):i.map(r=>parseFloat(r))}function UX(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:s[0],max:s[1],resolution:s.length>=3&&s[2]!=="0"?s[2]:void 0}}).filter(Ei):i}function BX(t){if(!t)return;const e=t.includes("/"),i=t.split(",");return e?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:SN(s[0]),max:SN(s[1]),resolution:s.length>=3&&s[2]!=="0"?rot(s[2]):void 0}}).filter(Ei):i.map(r=>SN(r))}function SN(t){return ke.fromISO(t,{zone:jr.utcInstance}).toJSDate()}function rot(t){const e=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,i=t.match(e);return i?{years:Lv(i[1]),months:Lv(i[2]),days:Lv(i[3]),hours:Lv(i[4]),minutes:Lv(i[5]),seconds:Lv(i[6])}:null}function Lv(t){if(!t)return 0;const e=/(?:\d+(?:\.|,)\d+|\d+)/,i=t.match(e);if(!i)return 0;const r=i[0].replace(",",".");return Number(r)}function $N(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}const sot="0000-01-01T00:00:00Z",not="9999-12-31T23:59:59Z";function qX(t){if(!t||t.isAllTime||t.isEmpty)return;const{start:e,end:i}=t;return e&&i&&e.getTime()===i.getTime()?`${$N(e)}`:`${e?$N(e):sot}/${i?$N(i):not}`}const GX=new Set([102100,3857,102113,900913]),oot=new Set([3395,54004]);function aot(t,e){let i=t.wkid;return e==null?i:(i!=null&&e.includes(i)||!t.latestWkid||(i=t.latestWkid),i!=null&&GX.has(i)?e.find(r=>GX.has(r))||e.find(r=>oot.has(r))||102100:i)}const IN=new We({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function HX(t){return t==="text/html"}function WX(t){return t==="text/plain"}let It=class extends Dg(K8(Bg(qg(Vg(Ug(oc(Bt))))))){constructor(...e){super(...e),this.allSublayers=new ra({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([ks(()=>this.sublayers,"after-add",({item:i})=>{i.parent=i.layer=this},lr),ks(()=>this.sublayers,"after-remove",({item:i})=>{i.layer=i.parent=null},lr),de(()=>this.sublayers,(i,r)=>{if(r)for(const s of r)s.layer=s.parent=null;if(i)for(const s of i)s.parent=s.layer=this},lr)])}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}destroy(){this.allSublayers.destroy()}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(Ss).then(()=>this._fetchService(i)).then(()=>this._checkLayerValidity())),Promise.resolve(this)}set timeInfo(e){super.timeInfo=e}readFullExtentFromItemOrMap(e,i){const r=i.extent;return r?new Pe({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,i){i.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(HX)??this.featureInfoFormats.find(WX)??null}set featureInfoFormat(e){e==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(HX(e)||WX(e))&&this._override("featureInfoFormat",e)}readImageFormat(e,i){const r=i.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,i){return new fe(i.spatialReferences[0])}writeSpatialReferences(e,i){const r=this.spatialReference?.wkid;e&&r?(i.spatialReferences=e.filter(s=>s!==r),i.spatialReferences.unshift(r)):i.spatialReferences=e}readSublayersFromItemOrMap(e,i,r){return JX(i.layers,r,i.visibleLayers)}readSublayers(e,i,r){return JX(i.layers,r)}writeSublayers(e,i,r,s){i.layers=[];const n=new Map,o=e.flatten(({sublayers:a})=>a??[]);for(const a of o)if(typeof a.parent?.id=="number"){const l=n.get(a.parent.id);l!=null?l.push(a.id):n.set(a.parent.id,[a.id])}for(const a of o){const l={sublayer:a,...s},c=a.write({parentLayerId:typeof a.parent?.id=="number"?a.parent.id:-1},l);if(n.has(a.id)&&(c.sublayerIds=n.get(a.id)),!a.sublayers&&a.name){const d=a.write({},l);delete d.id,i.layers.push(d)}}i.visibleLayers=o.filter(({visible:a,sublayers:l})=>a&&!l).map(({name:a})=>a).toArray()}set url(e){if(!e)return void this._set("url",e);const{path:i,query:r}=$t(e);for(const n in r)/^(request|service)$/i.test(n)&&delete r[n];const s=Io(i,r??{});this._set("url",s)}createExportImageParameters(e,i,r,s){const n=s?.pixelRatio??1,o=l4({extent:e,width:i})*n,a=new Fd({layer:this,scale:o}),{xmin:l,ymin:c,xmax:d,ymax:h,spatialReference:f}=e,m=aot(f,this.spatialReferences),y=this.version==="1.3.0"&&eI(m)?`${c},${l},${h},${d}`:`${l},${c},${d},${h}`,v=a.toJSON(),b=this.version==="1.3.0"?"crs":"srs";return{bbox:y,[b]:m==null||isNaN(m)?void 0:"EPSG:"+m,...v}}async fetchImage(e,i,r,s){const n=this.mapUrl,o=this.createExportImageParameters(e,i,r,s);if(!o.layers){const c=document.createElement("canvas");return c.width=i,c.height=r,c}const a=qX(s?.timeExtent),l={responseType:"image",query:this._mixCustomParameters({width:i,height:r,...o,time:a,...this.refreshParameters}),signal:s?.signal};return xe(n??"",l).then(c=>c.data)}async fetchImageBitmap(e,i,r,s){const n=this.mapUrl??"",o=this.createExportImageParameters(e,i,r,s);if(!o.layers){const d=document.createElement("canvas");return d.width=i,d.height=r,d}const a=qX(s?.timeExtent),l={responseType:"blob",query:this._mixCustomParameters({width:i,height:r,...o,time:a,...this.refreshParameters}),signal:s?.signal},{data:c}=await xe(n,l);return Kye(c,n,s?.signal)}fetchFeatureInfo(e,i,r,s,n){const o=l4({extent:e,width:i}),a=new Fd({layer:this,scale:o}),l=Xnt(a.visibleSublayers);if(this.featureInfoUrl==null||l==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const c=this.version==="1.3.0"?{I:s,J:n}:{x:s,y:n},d={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:i,height:r,...c},h={...this.createExportImageParameters(e,i,r),...d},f=this._mixCustomParameters(h);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(f):this._defaultFetchFeatureInfoFunction(Io(this.featureInfoUrl,f))}findSublayerById(e){return this.allSublayers.find(i=>i.id===e)}findSublayerByName(e){return this.allSublayers.find(i=>i.name===e)}serviceSupportsSpatialReference(e){return TSe(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(i=>{const r=i===900913?fe.WebMercator:new fe({wkid:i});return Mr(r,e)})}_defaultFetchFeatureInfoFunction(e){const i=document.createElement("iframe");i.src=Qxe(T6.sanitizeUrl(Us(e))),i.style.border="none",i.style.margin="0",i.style.width="100%",i.setAttribute("sandbox","");const r=new Uf({title:this.title,content:i}),s=new Wi({sourceLayer:this,popupTemplate:r});return Promise.resolve([s])}async _fetchService(e){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:i,query:r}=this.parsedUrl,{data:s}=await xe(i,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:e});this.resourceInfo=Knt(s)}if(this.parsedUrl){const i=new $s(this.parsedUrl.path),{httpsDomains:r}=lt.request;i.scheme!=="https"||i.port&&i.port!=="443"||!i.host||r.includes(i.host)||r.push(i.host)}this.read(this.resourceInfo,{origin:"service"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new R("wmslayer:empty-layer","The layer doesn't have any sublayer")}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const i={...this.customParameters,...this.customLayerParameters};for(const r in i)e[r.toLowerCase()]=i[r];return e}};function lot(t,e){return t.some(i=>{for(const r in i)if(hie(i,r,null,e))return!0;return!1})}function JX(t,e,i){t=t??[];const r=new Map;t.every(n=>n.id==null)&&(t=U(t)).forEach((n,o)=>n.id=o);for(const n of t){const o=new ki;o.read(n,e),i&&!i.includes(o.name)&&(o.visible=!1),r.set(o.id,o)}const s=[];for(const n of t){const o=n.id!=null?r.get(n.id):null;if(o)if(n.parentLayerId!=null&&n.parentLayerId>=0){const a=r.get(n.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new ue),a.sublayers.push(o)}else s.push(o)}return s}u([p({readOnly:!0})],It.prototype,"allSublayers",void 0),u([p({json:{type:Object,write:!0}})],It.prototype,"customParameters",void 0),u([p({json:{type:Object,write:!0}})],It.prototype,"customLayerParameters",void 0),u([p({type:String,json:{write:!0}})],It.prototype,"copyright",void 0),u([p()],It.prototype,"description",void 0),u([p({readOnly:!0})],It.prototype,"dimensions",void 0),u([p({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],It.prototype,"fullExtent",void 0),u([Q(["web-document","portal-item"],"fullExtent",["extent"])],It.prototype,"readFullExtentFromItemOrMap",null),u([oe(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],It.prototype,"writeFullExtent",null),u([p({type:[Pe]})],It.prototype,"fullExtents",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0}}})],It.prototype,"featureInfoFormat",null),u([p({type:[String],readOnly:!0})],It.prototype,"featureInfoFormats",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0}}})],It.prototype,"featureInfoUrl",void 0),u([p()],It.prototype,"fetchFeatureInfoFunction",void 0),u([p({type:String,json:{origins:{"web-document":{default:"image/png",type:IN.jsonValues,read:{reader:IN.read,source:"format"},write:{writer:IN.write,target:"format"}}}}})],It.prototype,"imageFormat",void 0),u([Q("imageFormat",["supportedImageFormatTypes"])],It.prototype,"readImageFormat",null),u([p({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],It.prototype,"imageMaxHeight",void 0),u([p({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],It.prototype,"imageMaxWidth",void 0),u([p()],It.prototype,"imageTransparency",void 0),u([p(dde)],It.prototype,"legendEnabled",void 0),u([p({type:["show","hide","hide-children"]})],It.prototype,"listMode",void 0),u([p({type:String,json:{write:{ignoreOrigin:!0}}})],It.prototype,"mapUrl",void 0),u([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],It.prototype,"isReference",void 0),u([p({type:["WMS"]})],It.prototype,"operationalLayerType",void 0),u([p()],It.prototype,"resourceInfo",void 0),u([p({type:fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],It.prototype,"spatialReference",void 0),u([Q(["web-document","portal-item"],"spatialReference",["spatialReferences"])],It.prototype,"readSpatialReferenceFromItemOrDocument",null),u([p({type:[Ke],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],It.prototype,"spatialReferences",void 0),u([oe(["web-document","portal-item"],"spatialReferences")],It.prototype,"writeSpatialReferences",null),u([p({type:ue.ofType(ki),json:{write:{target:"layers",overridePolicy(t,e,i){if(lot(this.allSublayers,i))return{ignoreOrigin:!0}}}}})],It.prototype,"sublayers",void 0),u([Q(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],It.prototype,"readSublayersFromItemOrMap",null),u([Q("service","sublayers",["layers"])],It.prototype,"readSublayers",null),u([oe("sublayers",{layers:{type:[ki]},visibleLayers:{type:[String]}})],It.prototype,"writeSublayers",null),u([p({json:{read:!1},readOnly:!0,value:"wms"})],It.prototype,"type",void 0),u([p(V2)],It.prototype,"url",null),u([p({type:String,json:{write:{ignoreOrigin:!0}}})],It.prototype,"version",void 0),It=u([M("esri.layers.WMSLayer")],It);const ige=It,Ext=Object.freeze(Object.defineProperty({__proto__:null,default:ige},Symbol.toStringTag,{value:"Module"}));var pV;let zd=pV=class extends Y{constructor(t){super(t)}clone(){return new pV({customLayerParameters:U(this.customLayerParameters),customParameters:U(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};u([p({json:{type:Object,write:!0}})],zd.prototype,"customLayerParameters",void 0),u([p({json:{type:Object,write:!0}})],zd.prototype,"customParameters",void 0),u([p({type:String,json:{write:!0}})],zd.prototype,"layerIdentifier",void 0),u([p({type:String,json:{write:!0}})],zd.prototype,"tileMatrixSet",void 0),u([p({type:String,json:{write:!0}})],zd.prototype,"url",void 0),zd=pV=u([M("esri.layers.support.WMTSLayerInfo")],zd);var fV;let Gi=fV=class extends Dg(Bg(qg(Vg(Ug(oc(Bt)))))){constructor(...t){super(...t),this.copyright="",this.fullExtent=new Pe(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,fe.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=fe.WebMercator,this.subDomains=null,this.tileInfo=new Ti({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Fe({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:fe.WebMercator}),spatialReference:fe.WebMercator,lods:[new yt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new yt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new yt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new yt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new yt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new yt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new yt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new yt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new yt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new yt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new yt({level:10,scale:577790.554289,resolution:152.874056570411}),new yt({level:11,scale:288895.277144,resolution:76.4370282850732}),new yt({level:12,scale:144447.638572,resolution:38.2185141425366}),new yt({level:13,scale:72223.819286,resolution:19.1092570712683}),new yt({level:14,scale:36111.909643,resolution:9.55462853563415}),new yt({level:15,scale:18055.954822,resolution:4.77731426794937}),new yt({level:16,scale:9027.977411,resolution:2.38865713397468}),new yt({level:17,scale:4513.988705,resolution:1.19432856685505}),new yt({level:18,scale:2256.994353,resolution:.597164283559817}),new yt({level:19,scale:1128.497176,resolution:.298582141647617}),new yt({level:20,scale:564.248588,resolution:.14929107082380833}),new yt({level:21,scale:282.124294,resolution:.07464553541190416}),new yt({level:22,scale:141.062147,resolution:.03732276770595208}),new yt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(t,e){return typeof t=="string"?{urlTemplate:t,...e}:t}load(t){const e=this.loadFromPortal({supportedTypes:["WMTS"]},t).then(()=>{let i="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const r=new $s(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&r.authority?.includes("{subDomain}")&&(i="is missing 'subDomains' property")}else i="spatialReference must match tileInfo.spatialReference";else i="is missing the required 'urlTemplate' property value";if(i)throw new R("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${i}`)});return this.addResolvingPromise(e),Promise.resolve(this)}get levelValues(){const t=[];if(!this.tileInfo)return null;for(const e of this.tileInfo.lods)t[e.level]=e.levelValue||e.level;return t}get loaded(){return super.loaded}readSpatialReference(t,e){return t||fe.fromJSON(e.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const t=[],{urlTemplate:e,subDomains:i}=this,r=new $s(e),s=r.scheme?r.scheme+"://":"//",n=s+r.authority+"/",o=r.authority;if(o?.includes("{subDomain}")){if(i&&i.length>0&&o.split(".").length>1)for(const a of i)t.push(s+o.replaceAll(/\{subDomain\}/gi,a)+"/")}else t.push(n);return t.map($ie)}get urlPath(){if(!this.urlTemplate)return null;const t=this.urlTemplate,e=new $s(t),i=(e.scheme?e.scheme+"://":"//")+e.authority+"/";return t.slice(i.length)}readUrlTemplate(t,e){return t||e.templateUrl}writeUrlTemplate(t,e){ma(t)&&(t="https:"+t),t&&(t=t.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),t=Gn(t)),e.templateUrl=t}fetchTile(t,e,i,r={}){const{signal:s}=r,n=this.getTileUrl(t,e,i),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return xe(n,o).then(a=>a.data)}async fetchImageBitmapTile(t,e,i,r={}){const{signal:s}=r;if(this.fetchTile!==fV.prototype.fetchTile){const l=await this.fetchTile(t,e,i,r);return n_(l,t,e,i,s)}const n=this.getTileUrl(t,e,i),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await xe(n,o);return n_(a,t,e,i,s)}getTileUrl(t,e,i){const{levelValues:r,tileServers:s,urlPath:n}=this;if(!r||!s||!n)return"";const o=r[t];return s[e%s.length]+Mh(n,{level:o,z:o,col:i,x:i,row:e,y:e})}};u([p({type:String,value:"",json:{write:!0}})],Gi.prototype,"copyright",void 0),u([p({type:Pe,json:{write:!0},nonNullable:!0})],Gi.prototype,"fullExtent",void 0),u([p({readOnly:!0,json:{read:!1,write:!1}})],Gi.prototype,"legendEnabled",void 0),u([p({type:["show","hide"]})],Gi.prototype,"listMode",void 0),u([p({json:{read:!0,write:!0}})],Gi.prototype,"blendMode",void 0),u([p()],Gi.prototype,"levelValues",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Gi.prototype,"isReference",void 0),u([p({type:["WebTiledLayer"],value:"WebTiledLayer"})],Gi.prototype,"operationalLayerType",void 0),u([p({readOnly:!0,json:{read:!1,write:!1}})],Gi.prototype,"popupEnabled",void 0),u([p({type:fe})],Gi.prototype,"spatialReference",void 0),u([Q("spatialReference",["spatialReference","fullExtent.spatialReference"])],Gi.prototype,"readSpatialReference",null),u([p({type:[String],json:{write:!0}})],Gi.prototype,"subDomains",void 0),u([p({type:Ti,json:{write:!0}})],Gi.prototype,"tileInfo",void 0),u([p({readOnly:!0})],Gi.prototype,"tileServers",null),u([p({json:{read:!1}})],Gi.prototype,"type",void 0),u([p()],Gi.prototype,"urlPath",null),u([p({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],Gi.prototype,"urlTemplate",void 0),u([Q("urlTemplate",["urlTemplate","templateUrl"])],Gi.prototype,"readUrlTemplate",null),u([oe("urlTemplate",{templateUrl:{type:String}})],Gi.prototype,"writeUrlTemplate",null),u([p({type:zd,json:{write:!0}})],Gi.prototype,"wmtsInfo",void 0),Gi=fV=u([M("esri.layers.WebTileLayer")],Gi);const Mxt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Gi}},Symbol.toStringTag,{value:"Module"}));let rge=class{constructor(e,i=0,r=e.lods[e.lods.length-1].level){this.tileInfo=e,this.minLOD=i,this.maxLOD=r,e.lodAt(i)||(this.minLOD=e.lods[0].level),e.lodAt(r)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,i,r){const s=this.tileInfo?.lodAt(e);return!s||e<this.minLOD||e>this.maxLOD?"unavailable":s.cols&&s.rows?r>=s.cols[0]&&r<=s.cols[1]&&i>=s.rows[0]&&i<=s.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,i,r,s){await kM(s);const n=this.getAvailability(e,i,r);if(n==="unavailable")throw new R("tile-map:tile-unavailable","Tile is not available",{level:e,row:i,col:r});return n}async fetchAvailabilityUpsample(e,i,r,s,n){await kM(n),s.level=e,s.row=i,s.col=r;const o=this.tileInfo;return o.updateTileInfo(s),this.fetchAvailability(e,i,r,n).catch(a=>{if(Yi(a))throw a;if(o.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,n);throw a})}};var mV;let Vb=mV=class extends Y{constructor(t){super(t),this.fullExtent=null,this.id=null,this.tileInfo=null}clone(){const t=new mV;return this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent?.clone()??null),this.hasOwnProperty("id")&&(t.id=this.id),this.hasOwnProperty("tileInfo")&&(t.tileInfo=this.tileInfo?.clone()??null),t}};u([p({type:Pe,json:{read:{source:"fullExtent"}}})],Vb.prototype,"fullExtent",void 0),u([p({type:String,json:{read:{source:"id"}}})],Vb.prototype,"id",void 0),u([p({type:Ti,json:{read:{source:"tileInfo"}}})],Vb.prototype,"tileInfo",void 0),Vb=mV=u([M("esri.layers.support.TileMatrixSet")],Vb);const cot=Vb;var yV;let $d=yV=class extends Y{constructor(t){super(t),this.id=null,this.title=null,this.description=null,this.legendUrl=null}clone(){const t=new yV;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("id")&&(t.id=this.id),this.hasOwnProperty("isDefault")&&(t.isDefault=this.isDefault),this.hasOwnProperty("keywords")&&(t.keywords=this.keywords&&this.keywords.slice()),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("title")&&(t.title=this.title),t}};u([p({json:{read:{source:"id"}}})],$d.prototype,"id",void 0),u([p({json:{read:{source:"title"}}})],$d.prototype,"title",void 0),u([p({json:{read:{source:"abstract"}}})],$d.prototype,"description",void 0),u([p({json:{read:{source:"legendUrl"}}})],$d.prototype,"legendUrl",void 0),u([p({json:{read:{source:"isDefault"}}})],$d.prototype,"isDefault",void 0),u([p({json:{read:{source:"keywords"}}})],$d.prototype,"keywords",void 0),$d=yV=u([M("esri.layers.support.WMTSStyle")],$d);const uot=$d;var gV;let er=gV=class extends Y{constructor(t){super(t),this.description=null,this.fullExtent=null,this.fullExtents=null,this.id=null,this.imageFormats=null,this.layer=null,this.parent=null,this.styles=null,this.title=null,this.tileMatrixSetId=null,this.tileMatrixSets=null}readFullExtent(t,e){return(t=e.fullExtent)?Pe.fromJSON(t):null}readFullExtents(t,e){return e.fullExtents?.length?e.fullExtents.map(i=>Pe.fromJSON(i)):e.tileMatrixSets?.map(i=>Pe.fromJSON(i.fullExtent)).filter(i=>i)??[]}get imageFormat(){let t=this._get("imageFormat");return t||(t=this.imageFormats?.length?this.imageFormats[0]:""),t}set imageFormat(t){const e=this.imageFormats;t&&(t.includes("image/")||e&&!e.includes(t))&&(t.includes("image/")||(t="image/"+t),e&&!e.includes(t))?console.error("The layer doesn't support the format of "+t):this._set("imageFormat",t)}get styleId(){let t=this._get("styleId");return t||(t=this.styles?.at(0)?.id??""),t}set styleId(t){this._set("styleId",t)}get tileMatrixSet(){return this.tileMatrixSets?.find(({id:t})=>t===this.tileMatrixSetId)??null}clone(){const t=new gV;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("imageFormats")&&(t.imageFormats=this.imageFormats?.slice()??null),this.hasOwnProperty("imageFormat")&&(t.imageFormat=this.imageFormat),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent?.clone()),this.hasOwnProperty("id")&&(t.id=this.id),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("styleId")&&(t.styleId=this.styleId),this.hasOwnProperty("styles")&&(t.styles=this.styles?.clone()),this.hasOwnProperty("tileMatrixSetId")&&(t.tileMatrixSetId=this.tileMatrixSetId),this.hasOwnProperty("tileMatrixSets")&&(t.tileMatrixSets=this.tileMatrixSets?.clone()),this.hasOwnProperty("title")&&(t.title=this.title),t}};u([p()],er.prototype,"description",void 0),u([p({type:Pe})],er.prototype,"fullExtent",void 0),u([Q("fullExtent",["fullExtent"])],er.prototype,"readFullExtent",null),u([p({readOnly:!0})],er.prototype,"fullExtents",void 0),u([Q("fullExtents",["fullExtents","tileMatrixSets"])],er.prototype,"readFullExtents",null),u([p()],er.prototype,"id",void 0),u([p()],er.prototype,"imageFormat",null),u([p({json:{read:{source:"formats"}}})],er.prototype,"imageFormats",void 0),u([p()],er.prototype,"layer",void 0),u([p()],er.prototype,"parent",void 0),u([p()],er.prototype,"styleId",null),u([p({type:ue.ofType(uot),json:{read:{source:"styles"}}})],er.prototype,"styles",void 0),u([p({json:{write:{ignoreOrigin:!0}}})],er.prototype,"title",void 0),u([p()],er.prototype,"tileMatrixSetId",void 0),u([p({readOnly:!0})],er.prototype,"tileMatrixSet",null),u([p({type:ue.ofType(cot),json:{read:{source:"tileMatrixSets"}}})],er.prototype,"tileMatrixSets",void 0),er=gV=u([M("esri.layers.support.WMTSSublayer")],er);function VP(t,e){if(t&&e){for(const i of t.children)if(i.localName in e){const r=e[i.localName];if(typeof r=="function"){const s=r(i);s&&VP(i,s)}else VP(i,r)}}}function*dot(t,e){for(const i of t.children)if(i.localName in e){const r=e[i.localName];typeof r=="function"?yield r(i):yield*dot(i,r)}}const sge=90.71428571428571;function ZX(t){const e=t.replaceAll(/ows:/gi,"");return new DOMParser().parseFromString(e,"text/xml")}function YX(t){if(!Ir("Contents",t.documentElement))throw new R("wmtslayer:wmts-capabilities-xml-is-not-valid","the wmts get capabilities response is not compliant")}function hot(t,e){const i=t.documentElement,r=new Map,s=new Map,n=Ir("Contents",i);if(!n)throw new R("wmtslayer:wmts-capabilities-xml-is-not-valid","Can't retrieve xml capabilities element");const o=Ir("OperationsMetadata",i),a=o?.querySelector("[name='GetTile']"),l=a?.getElementsByTagName("Get"),c=l&&Array.prototype.slice.call(l),d=e.url?.indexOf("https"),h=d!==void 0&&d>-1;let f,m,y=e.serviceMode,v=e?.url;c?.length&&c.some(L=>{const N=Ir("Constraint",L);return!N||Zx("AllowedValues","Value",y,N)?(v=L.attributes[0].nodeValue,!0):(!N||Zx("AllowedValues","Value","RESTful",N)||Zx("AllowedValues","Value","REST",N)?m=L.attributes[0].nodeValue:N&&!Zx("AllowedValues","Value","KVP",N)||(f=L.attributes[0].nodeValue),!1)}),!v&&(m?(v=m,y="RESTful"):f?(v=f,y="KVP"):v=Ir("ServiceMetadataURL",i)?.getAttribute("xlink:href"));const b=v.indexOf("1.0.0/");b===-1&&y==="RESTful"?v+="/":b>-1&&(v=v.slice(0,b)),y==="KVP"&&(v+=b>-1?"":"?"),h&&(v=v.replace(/^http:/i,"https:"));const w=Zi("ServiceIdentification>ServiceTypeVersion",i),x=Zi("ServiceIdentification>AccessConstraints",i),S=x&&/^none$/i.test(x)?null:x,$=Pf("Layer",n),T=Pf("TileMatrixSet",n),C=$.map(L=>{const N=Zi("Identifier",L);return r.set(N,L),fot(N,L,T,h,w)});return{copyright:S,dimensionMap:s,layerMap:r,layers:C,serviceMode:y,tileUrl:v}}function pot(t){for(const e of t.layers)for(const i of e.tileMatrixSets??[]){const{tileInfo:r}=i;if(r&&r.dpi!==96){for(const s of r.lods??[])s.scale=96*s.scale/r.dpi,s.resolution=age(r.spatialReference?.wkid,s.scale*sge/96,i.id);r.dpi=96}}}function l7(t){return t.nodeType===Node.ELEMENT_NODE}function Ir(t,e){for(let i=0;i<e.childNodes.length;i++){const r=e.childNodes[i];if(l7(r)&&r.nodeName===t)return r}return null}function Pf(t,e){const i=[];for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];l7(s)&&s.nodeName===t&&i.push(s)}return i}function fy(t,e){const i=[];for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];l7(s)&&s.nodeName===t&&i.push(s)}return i.map(r=>r.textContent).filter(Ei)}function Zi(t,e){return t.split(">").forEach(i=>{e&&(e=Ir(i,e))}),e&&e.textContent}function Zx(t,e,i,r){let s;return Array.prototype.slice.call(r.childNodes).some(n=>{if(n.nodeName.includes(t)){const o=Ir(e,n),a=o?.textContent;if(a===i||i.split(":")&&i.split(":")[1]===a)return s=n,!0}return!1}),s}function fot(t,e,i,r,s){const n=Zi("Abstract",e),o=fy("Format",e);return{id:t,fullExtent:vot(e),fullExtents:bot(e),description:n,formats:o,styles:wot(e,r),title:Zi("Title",e),tileMatrixSets:_ot(s,e,i)}}function nge(t,e){const i=[],r=t.layerMap?.get(e);if(!r)return null;const s=Pf("ResourceURL",r),n=Pf("Dimension",r);let o,a,l,c;return n.length&&(o=Zi("Identifier",n[0]),a=fy("Default",n[0])||fy("Value",n[0])),n.length>1&&(l=Zi("Identifier",n[1]),c=fy("Default",n[1])||fy("Value",n[1])),t.dimensionMap.set(e,{dimensions:a,dimensions2:c}),s.forEach(d=>{let h=d.getAttribute("template");if(d.getAttribute("resourceType")==="tile"){if(o&&a.length)if(h.includes("{"+o+"}"))h=h.replace("{"+o+"}","{dimensionValue}");else{const f=h.toLowerCase().indexOf("{"+o.toLowerCase()+"}");f>-1&&(h=h.slice(0,f)+"{dimensionValue}"+h.slice(f+o.length+2))}if(l&&c.length)if(h.includes("{"+l+"}"))h=h.replace("{"+l+"}","{dimensionValue2}");else{const f=h.toLowerCase().indexOf("{"+l.toLowerCase()+"}");f>-1&&(h=h.slice(0,f)+"{dimensionValue2}"+h.slice(f+l.length+2))}i.push({template:h,format:d.getAttribute("format"),resourceType:"tile"})}}),i}function mot(t,e,i,r,s,n,o,a){const l=yot(t,e,r);if(!(l?.length>0))return"";const{dimensionMap:c}=t,d=c.get(e).dimensions?.[0],h=c.get(e).dimensions2?.[0];return l[o%l.length].template.replaceAll(/\{Style\}/gi,s??"").replaceAll(/\{TileMatrixSet\}/gi,i??"").replaceAll(/\{TileMatrix\}/gi,n).replaceAll(/\{TileRow\}/gi,""+o).replaceAll(/\{TileCol\}/gi,""+a).replaceAll(/\{dimensionValue\}/gi,d).replaceAll(/\{dimensionValue2\}/gi,h)}function yot(t,e,i){const r=nge(t,e),s=r?.filter(n=>n.format===i);return(s?.length?s:r)??[]}function got(t,e,i,r){const{dimensionMap:s}=t,n=nge(t,e);let o="";if(n&&n.length>0){const a=s.get(e).dimensions?.[0],l=s.get(e).dimensions2?.[0];o=n[0].template,o.endsWith(".xxx")&&(o=o.slice(0,-4)),o=o.replaceAll(/\{Style\}/gi,r),o=o.replaceAll(/\{TileMatrixSet\}/gi,i),o=o.replaceAll(/\{TileMatrix\}/gi,"{level}"),o=o.replaceAll(/\{TileRow\}/gi,"{row}"),o=o.replaceAll(/\{TileCol\}/gi,"{col}"),o=o.replaceAll(/\{dimensionValue\}/gi,a),o=o.replaceAll(/\{dimensionValue2\}/gi,l)}return o}function vot(t){const e=Ir("WGS84BoundingBox",t),i=e?Zi("LowerCorner",e).split(" "):["-180","-90"],r=e?Zi("UpperCorner",e).split(" "):["180","90"];return{xmin:parseFloat(i[0]),ymin:parseFloat(i[1]),xmax:parseFloat(r[0]),ymax:parseFloat(r[1]),spatialReference:{wkid:4326}}}function bot(t){const e=[];return VP(t,{BoundingBox:i=>{if(!i.getAttribute("crs"))return;const r=i.getAttribute("crs").toLowerCase(),s=c7(r),n=r.includes("epsg")&&eI(s.wkid);let o,a,l,c;VP(i,{LowerCorner:d=>{[o,a]=d.textContent.split(" ").map(h=>Number.parseFloat(h)),n&&([o,a]=[a,o])},UpperCorner:d=>{[l,c]=d.textContent.split(" ").map(h=>Number.parseFloat(h)),n&&([l,c]=[c,l])}}),e.push({xmin:o,ymin:a,xmax:l,ymax:c,spatialReference:s})}}),e}function wot(t,e){return Pf("Style",t).map(i=>{const r=Ir("LegendURL",i),s=Ir("Keywords",i),n=s?fy("Keyword",s):[];let o=r?.getAttribute("xlink:href");return e&&(o=o?.replace(/^http:/i,"https:")),{abstract:Zi("Abstract",i),id:Zi("Identifier",i),isDefault:i.getAttribute("isDefault")==="true",keywords:n,legendUrl:o,title:Zi("Title",i)}})}function _ot(t,e,i){return Pf("TileMatrixSetLink",e).map(r=>xot(t,r,i))}function xot(t,e,i){const r=Ir("TileMatrixSet",e).textContent,s=fy("TileMatrix",e),n=i.find(w=>{const x=Ir("Identifier",w),S=x?.textContent;return!!(S===r||r.split(":")&&r.split(":")[1]===S)}),o=Ir("TileMatrixSetLimits",e),a=o&&Pf("TileMatrixLimits",o),l=new Map;if(a?.length)for(const w of a){const x=Ir("TileMatrix",w).textContent,S=+Ir("MinTileRow",w).textContent,$=+Ir("MaxTileRow",w).textContent,T=+Ir("MinTileCol",w).textContent,C=+Ir("MaxTileCol",w).textContent;l.set(x,{minCol:T,maxCol:C,minRow:S,maxRow:$})}const c=Zi("SupportedCRS",n).toLowerCase(),d=Sot(n,c),h=d.spatialReference,f=Ir("TileMatrix",n),m=[parseInt(Zi("TileWidth",f),10),parseInt(Zi("TileHeight",f),10)],y=[];s.length?s.forEach((w,x)=>{const S=Zx("TileMatrix","Identifier",w,n);y.push(KX(S,c,x,r,l))}):Pf("TileMatrix",n).forEach((w,x)=>{y.push(KX(w,c,x,r,l))});const v=$ot(t,n,d,m,y[0]).toJSON(),b=new Ti({dpi:96,spatialReference:h,size:m,origin:d,lods:y}).toJSON();return{id:r,fullExtent:v,tileInfo:b}}function c7(t){t=t.toLowerCase();let e=parseInt(t.split(":").pop(),10);e!==900913&&e!==3857||(e=102100);const i=kot(t);return i!=null&&(e=i),{wkid:e}}function Sot(t,e){return oge(Ir("TileMatrix",t),e)}function oge(t,e){const i=c7(e),[r,s]=Zi("TopLeftCorner",t).split(" ").map(o=>parseFloat(o)),n=e.includes("epsg")&&eI(i.wkid);return new Fe(n?{x:s,y:r,spatialReference:i}:{x:r,y:s,spatialReference:i})}function $ot(t,e,i,r,s){const n=Ir("BoundingBox",e);let o,a,l,c,d,h;if(n&&(o=Zi("LowerCorner",n).split(" "),a=Zi("UpperCorner",n).split(" ")),o&&o.length>1&&a&&a.length>1)l=parseFloat(o[0]),d=parseFloat(o[1]),c=parseFloat(a[0]),h=parseFloat(a[1]);else{const f=Ir("TileMatrix",e),m=parseInt(Zi("MatrixWidth",f),10),y=parseInt(Zi("MatrixHeight",f),10);l=i.x,h=i.y,c=l+m*r[0]*s.resolution,d=h-y*r[1]*s.resolution}return Iot(t,i.spatialReference,i)?new Pe(d,l,h,c,i.spatialReference):new Pe(l,d,c,h,i.spatialReference)}function Iot(t,e,i){return t==="1.0.0"&&eI(e.wkid)&&!(i.spatialReference.isGeographic&&i.x<-90&&i.y>=-90)}function kot(t){return t.includes("crs84")||t.includes("crs:84")?4326:t.includes("crs83")||t.includes("crs:83")?4269:t.includes("crs27")||t.includes("crs:27")?4267:null}function KX(t,e,i,r,s){const n=c7(e),o=Zi("Identifier",t);let a=parseFloat(Zi("ScaleDenominator",t));const l=age(n.wkid,a,r);a*=96/sge;const c=+Zi("MatrixWidth",t),d=+Zi("MatrixHeight",t),{maxCol:h=c-1,maxRow:f=d-1,minCol:m=0,minRow:y=0}=s.get(o)??{},{x:v,y:b}=oge(t,e);return new yt({cols:[m,h],level:i,levelValue:o,origin:[v,b],scale:a,resolution:l,rows:[y,f]})}function age(t,e,i){let r;return r=P.hasOwnProperty(""+t)?P.values[P[t]]:i==="default028mm"?6370997*Math.PI/180:m$e(t).metersPerDegree,7*e/25e3/r}var vV;const XX={"image/png":".png","image/png8":".png","image/png24":".png","image/png32":".png","image/jpg":".jpg","image/jpeg":".jpeg","image/gif":".gif","image/bmp":".bmp","image/tiff":".tif","image/jpgpng":"","image/jpegpng":"","image/unknown":""},Tot=new Set(["version","service","request","layer","style","format","tilematrixset","tilematrix","tilerow","tilecol"]);let oi=vV=class extends Dg(Bg(qg(Vg(Ug(oc(Bt)))))){constructor(...t){super(...t),this.activeLayer=null,this.copyright="",this.customParameters=null,this.customLayerParameters=null,this.fullExtent=null,this.operationalLayerType="WebTiledLayer",this.resourceInfo=null,this.serviceMode="RESTful",this.sublayers=null,this.type="wmts",this.version="1.0.0",this.addHandles([de(()=>this.activeLayer,(e,i)=>{i&&!this.sublayers?.includes(i)&&(i.layer=null,i.parent=null),e&&(e.layer=this,e.parent=this)},lr),ks(()=>this.sublayers,"after-add",({item:e})=>{e.layer=this,e.parent=this},lr),ks(()=>this.sublayers,"after-remove",({item:e})=>{e.layer=null,e.parent=null},lr),de(()=>this.sublayers,(e,i)=>{if(i)for(const r of i)r.layer=null,r.parent=null;if(e)for(const r of e)r.layer=this,r.parent=this},lr)])}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMTS"]},t).catch(Ss).then(()=>this._fetchService(t)).catch(e=>{throw Ss(e),new R("wmtslayer:unsupported-service-data","Invalid response from the WMTS service.",{error:e})})),Promise.resolve(this)}readActiveLayerFromService(t,e,i){this.activeLayer||(this.activeLayer=new er);let r=e.layers.find(s=>s.id===this.activeLayer.id);return r||(r=e.layers[0]),this.activeLayer.read(r,i),this.activeLayer}readActiveLayerFromItemOrWebDoc(t,e){const{templateUrl:i,wmtsInfo:r}=e,s=i?this._getLowerCasedUrlParams(i):null,n=r?.layerIdentifier;let o=null;const a=r?.tileMatrixSet;a&&(Array.isArray(a)?a.length&&(o=a[0]):o=a);const l=s?.format,c=s?.style;return new er({id:n,imageFormat:l,styleId:c,tileMatrixSetId:o})}writeActiveLayer(t,e,i,r){const s=this.activeLayer;e.templateUrl=this.getUrlTemplate(s.id,s.tileMatrixSetId,s.imageFormat,s.styleId);const n=wu("tileMatrixSet.tileInfo",s);e.tileInfo=n?n.toJSON(r):null,e.wmtsInfo={...e.wmtsInfo,layerIdentifier:s.id,tileMatrixSet:s.tileMatrixSetId}}readCustomParameters(t,e){const i=e.wmtsInfo;return i?this._mergeParams(i.customParameters,i.url):null}get fullExtents(){return this.activeLayer.fullExtents}readServiceMode(t,e){return e.templateUrl.includes("?")?"KVP":"RESTful"}readSublayersFromService(t,e,i){return Eot(e.layers,i)}get supportedSpatialReferences(){return this.activeLayer.tileMatrixSets?.map(t=>t.tileInfo?.spatialReference).toArray().filter(Ei)??[]}get tilemapCache(){const t=this.activeLayer?.tileMatrixSet?.tileInfo;return t?new rge(t):void 0}get title(){return this.activeLayer?.title??"Layer"}set title(t){this._overrideIfSome("title",t)}get url(){return this._get("url")}set url(t){t&&t.endsWith("/")?this._set("url",t.slice(0,-1)):this._set("url",t)}createWebTileLayer(t){const e=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId),i=this._getTileMatrixSetById(t.tileMatrixSetId),r=i?.tileInfo,s=t.fullExtent,n=new zd({layerIdentifier:t.id,tileMatrixSet:t.tileMatrixSetId,url:this.url});return this.customLayerParameters&&(n.customLayerParameters=this.customLayerParameters),this.customParameters&&(n.customParameters=this.customParameters),new Gi({fullExtent:s,urlTemplate:e,tileInfo:r,wmtsInfo:n})}async fetchTile(t,e,i,r={}){const{signal:s}=r,n=this.getTileUrl(t,e,i),{data:o}=await xe(n,{responseType:"image",signal:s});return o}async fetchImageBitmapTile(t,e,i,r={}){const{signal:s}=r;if(this.fetchTile!==vV.prototype.fetchTile){const a=await this.fetchTile(t,e,i,r);return n_(a,t,e,i,s)}const n=this.getTileUrl(t,e,i),{data:o}=await xe(n,{responseType:"blob",signal:s});return n_(o,t,e,i,s)}findSublayerById(t){return this.sublayers?.find(e=>e.id===t)}getTileUrl(t,e,i){const r=this._getTileMatrixSetById(this.activeLayer.tileMatrixSetId),s=r?.tileInfo?.lods[t],n=s?s.levelValue||`${s.level}`:`${t}`;let o=this.resourceInfo?"":mot({dimensionMap:this.dimensionMap,layerMap:this.layerMap},this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId,n,e,i);return o||(o=this.getUrlTemplate(this.activeLayer.id,this.activeLayer.tileMatrixSetId,this.activeLayer.imageFormat,this.activeLayer.styleId).replaceAll(/\{level\}/gi,n).replaceAll(/\{row\}/gi,`${e}`).replaceAll(/\{col\}/gi,`${i}`)),o=this._appendCustomLayerParameters(o),o}getUrlTemplate(t,e,i,r){if(!this.resourceInfo){const s=got({dimensionMap:this.dimensionMap,layerMap:this.layerMap},t,e,r);if(s)return s}if(this.serviceMode==="KVP")return this.url+"?SERVICE=WMTS&VERSION="+this.version+"&REQUEST=GetTile&LAYER="+t+"&STYLE="+r+"&FORMAT="+i+"&TILEMATRIXSET="+e+"&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}";if(this.serviceMode==="RESTful"){let s="";return XX[i.toLowerCase()]&&(s=XX[i.toLowerCase()]),this.url+t+"/"+r+"/"+e+"/{level}/{row}/{col}"+s}return""}async _fetchService(t){if(this.resourceInfo)return this.resourceInfo.serviceMode!=="KVP"||this.url.includes("?")||(this.url+="?"),pot(this.resourceInfo),void this.read(this.resourceInfo,{origin:"service"});let e=null;try{const{data:n}=await this._getCapabilities(this.serviceMode,t);e=ZX(n),YX(e)}catch{const n=this.serviceMode==="KVP"?"RESTful":"KVP";try{const{data:o}=await this._getCapabilities(n,t);e=ZX(o),YX(e),this.serviceMode=n}catch(o){throw new R("wmtslayer:unsupported-service-data","Services does not support RESTful or KVP service modes.",{error:o})}}const{serviceMode:i,url:r}=this,s=hot(e,{serviceMode:i,url:r});this.read(s,{origin:"service"})}async _getCapabilities(t,e){const i=this._getCapabilitiesUrl(t);return await xe(i,{...e,responseType:"text"})}_getTileMatrixSetById(t){return this.findSublayerById(this.activeLayer.id)?.tileMatrixSets?.find(({id:i})=>i===t)}_appendCustomParameters(t){return this._appendParameters(t,this.customParameters)}_appendCustomLayerParameters(t){return this._appendParameters(t,{...U(this.customParameters),...this.customLayerParameters})}_appendParameters(t,e){const i=$t(t),r={...i.query,...e},s=Ka(r);return s===""?i.path:`${i.path}?${s}`}_getCapabilitiesUrl(t){this.url=$t(this.url).path;let e=this.url;switch(t){case"KVP":e+=`?request=GetCapabilities&service=WMTS&version=${this.version}`;break;case"RESTful":{const i=`/${this.version}/WMTSCapabilities.xml`,r=new RegExp(i,"i");e=e.replace(r,""),e+=i;break}}return this._appendCustomParameters(e)}_getLowerCasedUrlParams(t){if(!t)return null;const e=$t(t).query;if(!e)return null;const i={};return Object.keys(e).forEach(r=>{i[r.toLowerCase()]=e[r]}),i}_mergeParams(t,e){const i=this._getLowerCasedUrlParams(e);if(i){const r=Object.keys(i);r.length&&(t=t?U(t):{},r.forEach(s=>{t.hasOwnProperty(s)||Tot.has(s)||(t[s]=i[s])}))}return t}};function Eot(t,e){return t.map(i=>{const r=new er;return r.read(i,e),r})}u([p()],oi.prototype,"dimensionMap",void 0),u([p()],oi.prototype,"layerMap",void 0),u([p({type:er,json:{origins:{"web-document":{write:{ignoreOrigin:!0}}}}})],oi.prototype,"activeLayer",void 0),u([Q("service","activeLayer",["layers"])],oi.prototype,"readActiveLayerFromService",null),u([Q(["web-document","portal-item"],"activeLayer",["wmtsInfo"])],oi.prototype,"readActiveLayerFromItemOrWebDoc",null),u([oe(["web-document","portal-item"],"activeLayer",{templateUrl:{type:String},tileInfo:{type:Ti},"wmtsInfo.layerIdentifier":{type:String},"wmtsInfo.tileMatrixSet":{type:String}})],oi.prototype,"writeActiveLayer",null),u([p({type:String,value:"",json:{write:!0}})],oi.prototype,"copyright",void 0),u([p({type:["show","hide"]})],oi.prototype,"listMode",void 0),u([p({json:{read:!0,write:!0}})],oi.prototype,"blendMode",void 0),u([p({json:{origins:{"web-document":{read:{source:["wmtsInfo.customParameters","wmtsInfo.url"]},write:{target:"wmtsInfo.customParameters"}},"portal-item":{read:{source:["wmtsInfo.customParameters","wmtsInfo.url"]},write:{target:"wmtsInfo.customParameters"}}}}})],oi.prototype,"customParameters",void 0),u([Q(["portal-item","web-document"],"customParameters")],oi.prototype,"readCustomParameters",null),u([p({json:{origins:{"web-document":{read:{source:"wmtsInfo.customLayerParameters"},write:{target:"wmtsInfo.customLayerParameters"}},"portal-item":{read:{source:"wmtsInfo.customLayerParameters"},write:{target:"wmtsInfo.customLayerParameters"}}}}})],oi.prototype,"customLayerParameters",void 0),u([p({type:Pe,json:{write:{ignoreOrigin:!0},origins:{"web-document":{read:{source:"fullExtent"}},"portal-item":{read:{source:"fullExtent"}}}}})],oi.prototype,"fullExtent",void 0),u([p({readOnly:!0})],oi.prototype,"fullExtents",null),u([p({type:["WebTiledLayer"]})],oi.prototype,"operationalLayerType",void 0),u([p()],oi.prototype,"resourceInfo",void 0),u([p()],oi.prototype,"serviceMode",void 0),u([Q(["portal-item","web-document"],"serviceMode",["templateUrl"])],oi.prototype,"readServiceMode",null),u([p({type:ue.ofType(er)})],oi.prototype,"sublayers",void 0),u([Q("service","sublayers",["layers"])],oi.prototype,"readSublayersFromService",null),u([p({readOnly:!0})],oi.prototype,"supportedSpatialReferences",null),u([p({readOnly:!0})],oi.prototype,"tilemapCache",null),u([p({json:{read:{source:"title"}}})],oi.prototype,"title",null),u([p({json:{read:!1},readOnly:!0,value:"wmts"})],oi.prototype,"type",void 0),u([p({json:{origins:{service:{read:{source:"tileUrl"}},"web-document":{read:{source:"wmtsInfo.url"},write:{target:"wmtsInfo.url"}},"portal-item":{read:{source:"wmtsInfo.url"},write:{target:"wmtsInfo.url"}}}}})],oi.prototype,"url",null),u([p()],oi.prototype,"version",void 0),oi=vV=u([M("esri.layers.WMTSLayer")],oi);const lge=oi,Pxt=Object.freeze(Object.defineProperty({__proto__:null,default:lge},Symbol.toStringTag,{value:"Module"}));function Mot(t,e=!1){return t<=aU?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}let QX=class bV{constructor(e){Pot(e);const{location:i,data:r}=e;this.location=Object.freeze(U(i));const s=this.location.width,n=this.location.height;let o=!0,a=!0;const l=Math.ceil(s*n/32),c=Mot(l);let d=0;for(let h=0;h<r.length;h++){const f=h%32;r[h]?(a=!1,c[d]|=1<<f):o=!1,f===31&&++d}a?(this._availability="unavailable",this.byteSize=40):o?(this._availability="available",this.byteSize=40):(this._availability=c,this.byteSize=40+tL(c))}getAvailability(e,i){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const r=(e-this.location.top)*this.location.width+(i-this.location.left),s=r%32,n=r>>5,o=this._availability;return n<0||n>o.length?"unknown":o[n]&1<<s?"available":"unavailable"}static fromDefinition(e,i){const r=e.service.request||xe,{row:s,col:n,width:o,height:a}=e,l={query:{f:"json"}};return i=i?{...l,...i}:l,r(Cot(e),i).then(c=>c.data).catch(c=>{if(c?.details?.httpStatus===422)return{location:{top:s,left:n,width:o,height:a},valid:!0,data:new Array(o*a).fill(0)};throw c}).then(c=>{if(c.location&&(c.location.top!==s||c.location.left!==n||c.location.width!==o||c.location.height!==a))throw new R("tilemap:location-mismatch","Tilemap response for different location than requested",{response:c,definition:{top:s,left:n,width:o,height:a}});return bV.fromJSON(c)})}static fromJSON(e){return Object.freeze(new bV(e))}};function eQ(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function Cot(t){let e;if(t.service.tileServers?.length){const r=t.service.tileServers;e=`${r&&r.length?r[t.row%r.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const i=t.service.query;return i&&(e=`${e}?${i}`),e}function Pot(t){if(!t?.location)throw new R("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new R("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new R("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new R("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new R("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}var Hm;function tQ(t,e,i){return new R("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i})}var vf;let Fc=(vf=class extends _e{constructor(e){super(e),this._pendingTilemapRequests={},this.request=xe,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new H8(2097152),this.addHandles(de(()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]},()=>this._initializeTilemapDefinition(),Fi))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,i,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const s=this._tilemapFromCache(e,i,r,this._tmpTilemapDefinition);return s?s.getAvailability(i,r):"unknown"}fetchAvailability(e,i,r,s){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(tQ(e,i,r)):this._fetchTilemap(e,i,r,s).catch(n=>n).then(n=>{if(n instanceof QX){const o=n.getAvailability(i,r);if(o==="unavailable")throw tQ(e,i,r);return o}if(Yi(n))throw n;return"unknown"})}fetchAvailabilityUpsample(e,i,r,s,n){s.level=e,s.row=i,s.col=r;const o=this.layer.tileInfo;o.updateTileInfo(s);const a=this.fetchAvailability(e,i,r,n).catch(l=>{if(Yi(l))throw l;if(o.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,n);throw l});return this._fetchAvailabilityUpsamplePrefetch(e,i,r,n,a),a}async _fetchAvailabilityUpsamplePrefetch(e,i,r,s,n){if(!this._prefetchingEnabled)return;const o=`prefetch-${e}-${i}-${r}`;if(this.hasHandles(o))return;const a=new AbortController;n.then(()=>a.abort(),()=>a.abort());let l=!1;const c=Et(()=>{l||(l=!0,a.abort())});if(this.addHandles(c,o),await kte(10,a.signal).catch(()=>{}),l||(l=!0,this.removeHandles(o)),Xr(a))return;const d=new Hne(e,i,r),h={...s,signal:a.signal},f=this.layer.tileInfo;for(let m=0;Hm._prefetches.length<Hm._maxPrefetch&&f.upsampleTile(d);++m){const y=this.fetchAvailability(d.level,d.row,d.col,h);Hm._prefetches.push(y);const v=()=>{Hm._prefetches.removeUnordered(y)};y.then(v,v)}}static cleanupTilemapCache(){this._prefetches.prune()}_fetchTilemap(e,i,r,s){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new R("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,i,r,n);if(o)return Promise.resolve(o);const a=s?.signal;return s={...s,signal:null},new Promise((l,c)=>{as(a,()=>c(jt()));const d=eQ(n);let h=this._pendingTilemapRequests[d];if(!h){h=QX.fromDefinition(n,s).then(m=>(this._tilemapCache.put(d,m,m.byteSize),m));const f=()=>{delete this._pendingTilemapRequests[d]};this._pendingTilemapRequests[d]=h,h.then(f,f)}h.then(l,c)})}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:i,customParameters:r}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:Ka({...e.query,...r,token:i??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,i,r,s){s.level=e,s.row=i-i%this.size,s.col=r-r%this.size;const n=eQ(s);return this._tilemapCache.get(n)}get test(){}},Hm=vf,vf._maxPrefetch=4,vf._prefetches=new mU({initialSize:Hm._maxPrefetch}),vf);u([p({constructOnly:!0})],Fc.prototype,"layer",void 0),u([p({constructOnly:!0})],Fc.prototype,"minLOD",void 0),u([p({constructOnly:!0})],Fc.prototype,"maxLOD",void 0),u([p({constructOnly:!0})],Fc.prototype,"request",void 0),u([p({constructOnly:!0})],Fc.prototype,"size",void 0),Fc=Hm=u([M("esri.layers.support.TilemapCache")],Fc);const cge=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(r,s){return s.minLOD!=null&&s.maxLOD!=null?r:0}readMaxScale(r,s){return s.minLOD!=null&&s.maxLOD!=null?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,s,n){const o=s.capabilities?.includes("Tilemap");let{minLOD:a,maxLOD:l,minScale:c,maxScale:d}=s;if(a==null&&l==null&&(c!==0||d!==0)){const h=f=>Math.round(1e4*f)/1e4;c=h(c||s.tileInfo.lods[0].scale),d=h(d||s.tileInfo.lods[s.tileInfo.lods.length-1].scale);for(const f of s.tileInfo.lods){const m=h(f.scale);a=m>=c?f.level:a,l=m>=d?f.level:l}}if(o)return new Fc({layer:this,minLOD:a,maxLOD:l});if(s.tileInfo){const h=new Ti;return h.read(s.tileInfo,n),new rge(h,a,l)}return null}};return u([p({json:{read:{source:"copyrightText"}}})],i.prototype,"copyright",void 0),u([p()],i.prototype,"minScale",void 0),u([Q("service","minScale")],i.prototype,"readMinScale",null),u([p()],i.prototype,"maxScale",void 0),u([Q("service","maxScale")],i.prototype,"readMaxScale",null),u([p({type:fe})],i.prototype,"spatialReference",void 0),u([p({readOnly:!0})],i.prototype,"supportsBlankTile",null),u([p({type:Ti})],i.prototype,"tileInfo",void 0),u([p()],i.prototype,"tilemapCache",void 0),u([Q("service","tilemapCache",["capabilities","tileInfo"])],i.prototype,"readTilemapCache",null),u([p()],i.prototype,"version",void 0),i=u([M("esri.layers.mixins.ArcGISCachedService")],i),i},uge=t=>{const e=t;let i=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(r,s){const n=s.capabilities&&s.capabilities.split(",").map($=>$.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const o=this.type,a=o!=="tile"&&!!s.supportsDynamicLayers,l=n.includes("query"),c=n.includes("map"),d=!!s.exportTilesAllowed,h=n.includes("tilemap"),f=n.includes("data"),m=o!=="tile"&&(!s.tileInfo||a),y=o!=="tile"&&(!s.tileInfo||a),v=o!=="tile",b=o!=="tile"&&a&&s.currentVersion>=11.1,w=s.cimVersion?b8.parse(s.cimVersion):null,x=w?.greaterEqual(1,4)??!1,S=w?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:c,supportsExportTiles:d,supportsIdentify:l,supportsQuery:f,supportsTileMap:h},exportMap:c?{supportsArcadeExpressionForLabeling:x,supportsCIMSymbols:S,supportsDynamicLayers:a,supportsSublayerOrderBy:b,supportsSublayerDefinitionExpression:y,supportsSublayerVisibility:m,supportsSublayersChanges:v}:null,exportTiles:d?{maxExportTilesCount:+s.maxExportTilesCount}:null}}readVersion(r,s){let n=s.currentVersion;return n||(n=s.hasOwnProperty("capabilities")||s.hasOwnProperty("tables")?10:s.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchRelatedService(r){const s=this.portalItem;if(!s||!rJ(s))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=s.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},r).then(o=>o.find(a=>a.type==="Feature Service")??null,()=>null));const n=await this._relatedFeatureServicePromise;return Gt(r),n?{itemId:n.id,url:n.url}:null}async fetchSublayerInfo(r,s){const{source:n}=r;if(this?.portalItem&&this.type==="tile"&&n?.type==="map-layer"&&rJ(this.portalItem)&&r.originIdOf("url")<2){const l=await this.fetchRelatedService(s);l&&(r.url=fa(l.url,n.mapLayerId.toString()),r.layerItemId=l.itemId)}const{url:o}=r;let a;if(n.type==="data-layer")a=(await xe(o,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...s})).data;else if(o&&r.originIdOf("url")>2)try{const l=await this._fetchAllLayersAndTablesFromService(o),c=ya(o)?.sublayer??n.mapLayerId;a=l.get(c)}catch{}else{let l=r.id;n?.type==="map-layer"&&(l=n.mapLayerId);try{a=(await this.fetchAllLayersAndTables(s)).get(l)}catch{}}return a}async fetchAllLayersAndTables(r){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,r)}async _fetchAllLayersAndTablesFromService(r,s){await this.load(s),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const n=ya(r),o=Ch(this._allLayersAndTablesMap,n?.url.path,()=>xe(fa(n?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(l=>{const c=new Map,{layers:d,tables:h}=l.data,f=[...d??[],...h??[]];for(const m of f)c.set(m.id,m);return{result:c}},l=>({error:l}))),a=await o;if(Gt(s),"result"in a)return a.result;throw a.error}};return u([p({readOnly:!0})],i.prototype,"capabilities",void 0),u([Q("service","capabilities",["capabilities","cimVersion","currentVersion","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],i.prototype,"readCapabilities",null),u([p({json:{read:{source:"copyrightText"}}})],i.prototype,"copyright",void 0),u([p({type:Pe})],i.prototype,"fullExtent",void 0),u([p(pde)],i.prototype,"id",void 0),u([p({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],i.prototype,"legendEnabled",void 0),u([p(j2)],i.prototype,"popupEnabled",void 0),u([p({type:fe})],i.prototype,"spatialReference",void 0),u([p({readOnly:!0})],i.prototype,"version",void 0),u([Q("service","version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],i.prototype,"readVersion",null),i=u([M("esri.layers.mixins.ArcGISMapService")],i),i},Aot=Symbol("isMapImageGraphicOriginSymbol");var iQ;let Lot=class extends wg{get[(iQ=Aot,I8)](){return this.layer}constructor(e,i){super(),this[iQ]=!0,this.type="map-image",this.layer=e,this.sublayer=i}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}};const Oot=Symbol("isTileGraphicOriginSymbol");var rQ;let Rot=class extends wg{get[(rQ=Oot,I8)](){return this.layer}constructor(e,i){super(),this[rQ]=!0,this.type="tile",this.layer=e,this.sublayer=i}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}};function dge(t){const e={};for(const i in t){if(i==="declaredClass")continue;const r=t[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){e[i]=[];for(let s=0;s<r.length;s++)e[i][s]=dge(r[s])}else typeof r=="object"?r.toJSON&&(e[i]=JSON.stringify(r)):e[i]=r}return e}const sQ=4294967296,Not=new TextDecoder("utf-8"),Dot=H("safari")||H("ios")?6:H("ff")?12:32;var vu;let Fot=(vu=class{constructor(e,i,r=0,s=e?e.byteLength:0){this._tag=0,this._dataType=99,this._init(e,i,r,s)}_init(e,i,r,s){this._data=e,this._dataView=i,this._pos=r,this._end=s}get usedMemory(){return 64+tL(this._data)}asUnsafe(){return this}clone(){return new vu(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getUint32(i+4,!0)*sQ;return this._skip(8),r}getSFixed64(){const e=this._dataView,i=this._pos,r=e.getUint32(i,!0)+e.getInt32(i+4,!0)*sQ;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+e);return this._skip(e),r}getBytes(){const e=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,r,s){const n=this.getMessage(),o=e(n,i,r,s);return n.release(),o}processMessage(e){const i=this.getMessage(),r=e(i);return i.release(),r}getMessage(){const e=this._getLength(),i=vu.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){vu.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=e[i++],r|=127&s,!(128&s)||(s=e[i++],r|=(127&s)<<7,!(128&s))||(s=e[i++],r|=(127&s)<<14,!(128&s))||(s=e[i++],r|=(127&s)<<21,!(128&s))||(s=e[i++],r+=268435456*(127&s),!(128&s))||(s=e[i++],r+=34359738368*(127&s),!(128&s))||(s=e[i++],r+=4398046511104*(127&s),!(128&s))||(s=e[i++],r+=562949953421312*(127&s),!(128&s))||(s=e[i++],r+=72057594037927940*(127&s),!(128&s))||(s=e[i++],r+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;i!==this._end&&(s=e[i],128&s);)++i,r+=(127&s)*n,n*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*n}return this._pos=i,r}_decodeSVarint(){const e=this._data;let i,r=0,s=0;const n=1&e[this._pos];if(s=e[this._pos++],r|=127&s,!(128&s)||(s=e[this._pos++],r|=(127&s)<<7,!(128&s))||(s=e[this._pos++],r|=(127&s)<<14,!(128&s))||(s=e[this._pos++],r|=(127&s)<<21,!(128&s))||(s=e[this._pos++],r+=268435456*(127&s),!(128&s))||(s=e[this._pos++],r+=34359738368*(127&s),!(128&s))||(s=e[this._pos++],r+=4398046511104*(127&s),!(128&s)))return n?-(r+1)/2:r/2;if(i=BigInt(r),s=e[this._pos++],i+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=e[this._pos++],i+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=e[this._pos++],i+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==2)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,r){if((r=Math.min(this._end,r))-i>Dot){const o=e.subarray(i,r);return Not.decode(o)}let s="",n="";for(let o=i;o<r;++o){const a=e[o];128&a?n+="%"+a.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(e,i,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,i,r-i)}},vu.pool=new Nf(()=>new vu(null,null),void 0,e=>{e._data=null,e._dataView=null}),vu);function u7(t,e){return t?e?4:3:e?3:2}function zot(t,e,i,r){if(!e?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,n=[],o=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:l}=e,c=u7(i,r);let d=0;for(const h of a){const f=jot(o,l,d,h,i,r);f&&n.push(f),d+=h*c}if(n.sort((h,f)=>{let m=h[2]-f[2];return m===0&&i&&(m=h[4]-f[4]),m}),n.length){let h=6*n[0][2];s[0]=n[0][0]/h,s[1]=n[0][1]/h,i&&(h=6*n[0][4],s[2]=h!==0?n[0][3]/h:0),(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||i&&(s[2]<o[4]||s[2]>o[5]))&&(s.length=0)}if(!s.length){const h=e.lengths[0]?Vot(l,0,a[0],i,r):null;if(!h)return null;s[0]=h[0],s[1]=h[1],i&&h.length>2&&(s[2]=h[2])}return t}function jot(t,e,i,r,s,n){const o=u7(s,n);let a=i,l=i+o,c=0,d=0,h=0,f=0,m=0;for(let v=0,b=r-1;v<b;v++,a+=o,l+=o){const w=e[a],x=e[a+1],S=e[a+2],$=e[l],T=e[l+1],C=e[l+2];let L=w*T-$*x;f+=L,c+=(w+$)*L,d+=(x+T)*L,s&&(L=w*C-$*S,h+=(S+C)*L,m+=L),w<t[0]&&(t[0]=w),w>t[1]&&(t[1]=w),x<t[2]&&(t[2]=x),x>t[3]&&(t[3]=x),s&&(S<t[4]&&(t[4]=S),S>t[5]&&(t[5]=S))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;const y=[c,d,.5*f];return s&&(y[3]=h,y[4]=.5*m),y}function Vot(t,e,i,r,s){const n=u7(r,s);let o=e,a=e+n,l=0,c=0,d=0,h=0;for(let f=0,m=i-1;f<m;f++,o+=n,a+=n){const y=t[o],v=t[o+1],b=t[o+2],w=t[a],x=t[a+1],S=t[a+2],$=r?Bot(y,v,b,w,x,S):Uot(y,v,w,x);if($)if(l+=$,r){const T=Got(y,v,b,w,x,S);c+=$*T[0],d+=$*T[1],h+=$*T[2]}else{const T=qot(y,v,w,x);c+=$*T[0],d+=$*T[1]}}return l>0?r?[c/l,d/l,h/l]:[c/l,d/l]:i>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function Uot(t,e,i,r){const s=i-t,n=r-e;return Math.sqrt(s*s+n*n)}function Bot(t,e,i,r,s,n){const o=r-t,a=s-e,l=n-i;return Math.sqrt(o*o+a*a+l*l)}function qot(t,e,i,r){return[t+.5*(i-t),e+.5*(r-e)]}function Got(t,e,i,r,s,n){return[t+.5*(r-t),e+.5*(s-e),i+.5*(n-i)]}let $g=class aM{constructor(e=null,i={},r,s,n=0){this.geometry=e,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=n}static fromJSON(e){const i=e.geometry?Vr.fromJSON(e.geometry):null,r=e.centroid?Vr.fromJSON(e.centroid):null,s=e.objectId;return new aM(i,e.attributes,r,s)}weakClone(){const e=new aM(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){const e=this.geometry?.clone(),i=new aM(e,{...this.attributes},this.centroid?.clone(),this.objectId);return i.displayId=this.displayId,i}ensureCentroid(e){return this.centroid??(this.centroid=zot(new Vr,this.geometry,e.hasZ,e.hasM)),this.centroid}get usedMemory(){return 128+CZe(this.attributes)+(this.geometry?.usedMemory??0)}};function Hot(t){return!!t.geometry?.coords?.length}let hge=class pge{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new pge;return e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const fge=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let Oxt=class{constructor(e){this._options=e,this.geometryTypes=fge,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new hge}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||Mr(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=Cw(this._options.sourceSpatialReference)/Cw(e.spatialReference);if(i!==1)for(const r of e.features){if(!Hot(r))continue;const s=r.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new $g(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new Vr}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Vr}};const nQ=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],oQ=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],aQ=["upperLeft","lowerLeft"];function lQ(t){return t>=nQ.length?null:nQ[t]}function Wot(t){return t>=oQ.length?null:oQ[t]}function cQ(t){return t>=aQ.length?null:aQ[t]}function uQ(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Jot(t,e,i){const s=t.asUnsafe(),n=e.createPointGeometry(i);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),a=s.pos()+o;let l=0;for(;s.pos()<a;)e.addCoordinatePoint(n,s.getSInt64(),l++);break}default:s.skip()}return n}function Zot(t,e,i){const n=t.asUnsafe(),o=e.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const l=n.getUInt32(),c=n.pos()+l;let d=0;for(;n.pos()<c;)e.addLength(o,n.getUInt32(),d++);break}case 3:{const l=n.getUInt32(),c=n.pos()+l;let d=0;for(e.allocateCoordinates(o);n.pos()<c;)e.addCoordinate(o,n.getSInt64(),d),d++,d===a&&(d=0);break}default:n.skip()}return o}function Yot(t){const s=t.asUnsafe(),n=new Vr;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.lengths.push(s.getUInt32());break}case 3:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.coords.push(s.getSInt64());break}case 1:o=fge[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function Kot(t){const d=t.asUnsafe();for(;d.next();)switch(d.tag()){case 1:return d.getString();case 2:return d.getFloat();case 3:return d.getDouble();case 4:return d.getSInt32();case 5:return d.getUInt32();case 6:return d.getInt64();case 7:return d.getUInt64();case 8:return d.getSInt64();case 9:return d.getBool();default:return d.skip(),null}return null}function Xot(t){const a=t.asUnsafe(),l={type:lQ(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=lQ(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=Wot(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function Qot(t){const r={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.name=s.getString();break;case 2:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function eat(t,e,i,r){const a=e.createFeature(i);let l=0;for(;t.next();)switch(t.tag()){case 1:{const c=r[l++].name;a.attributes[c]=t.processMessage(Kot);break}case 2:a.geometry=t.processMessageWithArgs(Zot,e,i);break;case 4:a.centroid=t.processMessageWithArgs(Jot,e,i);break;default:t.skip()}return a}function tat(t){const n=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function iat(t){const n=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function rat(t){const s={originPosition:cQ(0)},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=cQ(n.getEnum());break;case 2:s.scale=n.processMessage(tat);break;case 3:s.translate=n.processMessage(iat);break;default:n.skip()}return s}function sat(t){const s={},n=t.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function nat(t,e){const a=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:a.wkid=t.getUInt32();break;case 5:a.wkt=t.getString();break;case 2:a.latestWkid=t.getUInt32();break;case 3:a.vcsWkid=t.getUInt32();break;case 4:a.latestVcsWkid=t.getUInt32();break;default:t.skip()}return a}function oat(t,e){const v=e.createFeatureResult(),b=t.asUnsafe();v.geometryType=uQ(e,0);let w=!1;for(;b.next();)switch(b.tag()){case 1:v.objectIdFieldName=b.getString();break;case 3:v.globalIdFieldName=b.getString();break;case 4:v.geohashFieldName=b.getString();break;case 5:v.geometryProperties=b.processMessage(sat);break;case 7:v.geometryType=uQ(e,b.getEnum());break;case 8:v.spatialReference=b.processMessageWithArgs(nat,e);break;case 10:v.hasZ=b.getBool();break;case 11:v.hasM=b.getBool();break;case 12:v.transform=b.processMessage(rat);break;case 9:v.exceededTransferLimit=b.getBool();break;case 13:e.addField(v,b.processMessage(Xot));break;case 15:w||(e.prepareFeatures(v),w=!0),e.addFeature(v,b.processMessageWithArgs(eat,e,v,v.fields));break;case 2:v.uniqueIdField=b.processMessage(Qot);break;default:b.skip()}return e.finishFeatureResult(v),v}function aat(t,e){const s={};let n=null;for(;t.next();)switch(t.tag()){case 4:n=t.processMessageWithArgs(Yot);break;case 1:s.featureResult=t.processMessageWithArgs(oat,e);break;default:t.skip()}return n!=null&&s.featureResult&&e.addQueryGeometry(s,n),s}function lat(t,e){try{const r=new Fot(new Uint8Array(t),new DataView(t)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(aat,e):r.skip();return s}catch(i){throw new R("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function cat(t,e){const i=lat(t,e),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,n=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=s,r.queryGeometryType=n),r}function uat(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function dat(t,e,i){const{geometry:r}=t,s=t.compactGeometryEnabled??!1,n=t.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const o=n;let a,l,c;if(r&&(l=r.spatialReference,c=pg(l),o.geometryType=Cg(r),o.geometry=uat(r,s),o.inSR=c),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds)switch(i?.uniqueIdFields?.length){case void 0:o.objectIds=n.objectIds.join(",");break;case 1:o.uniqueIds=JSON.stringify(n.objectIds),delete o.objectIds;break;default:o.uniqueIds=JSON.stringify(n.objectIds.map(d=>JSON.parse(d))),delete o.objectIds}if(n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete o.outFields:n.outFields.includes("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?(o.outSR=pg(n.outSR),a=t.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR,a=l),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(o.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&l!=null&&t.quantizationParameters?.extent!=null&&l.equals(t.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(o.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(o.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(o.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const d=n.timeExtent,{start:h,end:f}=d;h==null&&f==null||(o.time=h===f?h:`${h??"null"},${f??"null"}`),delete n.timeExtent}return t.defaultSpatialReferenceEnabled&&l!=null&&a!=null&&l.equals(a)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}const dQ="Layer does not support extent calculation.";function hat(t,e,i){return dat(t,e,i)}async function pat(t,e,i,r,s){const n=e.timeExtent?.isEmpty?{data:{features:[]}}:await tI(t,e,"json",r,void 0,s);return s4(e,i,n.data),n}async function fat(t,e,i,r,s){if(e.timeExtent?.isEmpty)return{data:i.createFeatureResult()};const n=await mat(t,e,r,s),o=n;return o.data=cat(n.data,i),o}function mat(t,e,i,r){return tI(t,e,"pbf",i,void 0,r)}function yat(t,e,i,r){return e.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):tI(t,e,"json",i,{returnIdsOnly:!0},r)}function gat(t,e,i,r){return e.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):tI(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0},r)}async function vat(t,e,i){if(e.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const r=await tI(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(dQ);if(s.hasOwnProperty("count"))throw new Error(dQ);return r}function bat(t,e){if(!t.returnIdsOnly||!e.uniqueIdFields)return t;const i={...t,returnUniqueIdsOnly:!0};return delete i.returnIdsOnly,i}async function tI(t,e,i,r={},s={},n={}){const o=typeof t=="string"?$t(t):t,a=e.geometry?[e.geometry]:[],l=await qle(a,null,{signal:r.signal}),c=l?.[0];c!=null&&((e=e.clone()).geometry=c);const d=dge({...o.query,f:i,...bat(s,n),...hat(e,s,n)});return xe(fa(o.path,wat(e,s)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{...d,...r.query}})}function wat(t,e){return t.formatOf3DObjects!=null&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}async function _at(t,e,i,r){const s=Rh(t),{data:n}=await gat(s,Te.from(e),i,r);return n.count}async function xat(t,e,i){const r=Rh(t),s=await vat(r,Te.from(e),{...i}),n=s.data.extent;return!n||isNaN(n.xmin)||isNaN(n.ymin)||isNaN(n.xmax)||isNaN(n.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:Pe.fromJSON(n)}}async function Sat(t,e,i,r){const s=Rh(t),{data:n}=await yat(s,Te.from(e),i,r);return n.objectIds??Iat(n.uniqueIds)??[]}function $at(t){return!Array.isArray(t[0])}function Iat(t){if(t)return $at(t)?t:t.map(e=>JSON.stringify(e))}async function Nxt(t,e,i,r){const s=await mge(t,e,i,r);return Rr.fromJSON(s)}async function mge(t,e,i,r){const s=Rh(t),n={...i},o=Te.from(e),{data:a}=await pat(s,o,o.sourceSpatialReference,n,r);return a}function Es(t,e){return t?e?4:3:e?3:2}const bL=()=>X.getLogger("esri.layers.graphics.featureConversionUtils"),d7={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},kat=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n},hQ=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n,t[i+2]=e[r+2]},Tat=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n,t[i+2]=e[r+3]},Eat=(t,e,i,r,s,n)=>{t[i]=s,t[i+1]=n,t[i+2]=e[r+2],t[i+3]=e[r+3]};function h7(t,e,i,r){if(t){if(i)return e&&r?Eat:hQ;if(e&&r)return Tat}else if(e&&r)return hQ;return kat}function kN({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function TN({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function EN({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function MN({scale:t,translate:e},i){return Math.round((i-e[1])/t[1])}function CN({scale:t,translate:e},i,r){return i*t[r]+e[r]}function Dxt(t,e,i){return t?e?i?m7(t):p7(t):i?f7(t):wL(t):null}function wL(t){const e=t.coords;return{x:e[0],y:e[1]}}function yge(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function p7(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function Mat(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function f7(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function Cat(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function m7(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function Pat(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Aat(t,e,i,r){let s=wL;i&&r?s=m7:i?s=p7:r&&(s=f7);for(const n of e){const{geometry:o,attributes:a}=n,l=o!=null?s(o):null;t.push({attributes:a,geometry:l})}return t}function y7(t,e){return t&&e?Pat:t?Mat:e?Cat:yge}function Lat(t,e,i,r,s){const n=y7(i,r);for(const o of e){const a=o.geometry!=null?n(new Vr,o.geometry):null;t.push(new $g(a,o.attributes,null,M2(o,s)))}return t}function Oat(t,e,i=y7(e.z!=null,e.m!=null)){return i(t,e)}function Rat(t,e,i,r){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:s!=null?gge(s,i,r):null});return t}function gge(t,e,i){if(t==null)return null;const r=Es(e,i),s=[];for(let n=0;n<t.coords.length;n+=r){const o=[];for(let a=0;a<r;a++)o.push(t.coords[n+a]);s.push(o)}return e?i?{points:s,hasZ:e,hasM:i}:{points:s,hasZ:e}:i?{points:s,hasM:i}:{points:s}}function Nat(t,e,i,r,s){const n=Es(i,r);for(const o of e){const a=o.geometry!=null?vge(new Vr,o.geometry,n):null;t.push(new $g(a,o.attributes,null,M2(o,s)))}return t}function vge(t,e,i=Es(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let s=0;for(const n of e.points)for(let o=0;o<i;o++)r[s++]=n[o];return t}function Dat(t,e,i,r){for(const{geometry:s,attributes:n}of e)t.push({attributes:n,geometry:s!=null?bge(s,i,r):null});return t}function bge(t,e,i){if(!t)return null;const r=Es(e,i),{coords:s,lengths:n}=t,o=[];let a=0;for(const l of n){const c=[];for(let d=0;d<l;d++){const h=[];for(let f=0;f<r;f++)h.push(s[a++]);c.push(h)}o.push(c)}return e?i?{paths:o,hasZ:e,hasM:i}:{paths:o,hasZ:e}:i?{paths:o,hasM:i}:{paths:o}}function Fat(t,e,i,r,s){const n=Es(i,r);for(const o of e){const a=o.geometry!=null?wge(new Vr,o.geometry,n):null,l=o.centroid!=null?Oat(new Vr,o.centroid):null;t.push(new $g(a,o.attributes,l,M2(o,s)))}return t}function wge(t,e,i=Es(e.hasZ,e.hasM)){const{lengths:r,coords:s}=t;let n=0;for(const o of e.paths){for(const a of o)for(let l=0;l<i;l++)s[n++]=a[l];r.push(o.length)}return t}function zat(t,e,i,r){for(const{geometry:s,attributes:n,centroid:o}of e){const a=s!=null?_ge(s,i,r):null;if(o!=null){const l=wL(o);t.push({attributes:n,centroid:l,geometry:a})}else t.push({attributes:n,geometry:a})}return t}function _ge(t,e,i){if(!t)return null;const r=Es(e,i),{coords:s,lengths:n}=t,o=[];let a=0;for(const l of n){const c=[];for(let d=0;d<l;d++){const h=[];for(let f=0;f<r;f++)h.push(s[a++]);c.push(h)}o.push(c)}return e?i?{rings:o,hasZ:e,hasM:i}:{rings:o,hasZ:e}:i?{rings:o,hasM:i}:{rings:o}}function jat(t,e,i,r,s){for(const n of e){const o=n.geometry!=null?xge(new Vr,n.geometry,i,r):null,a=M2(n,s);n.centroid!=null?t.push(new $g(o,n.attributes,yge(new Vr,n.centroid),a)):t.push(new $g(o,n.attributes,null,a))}return t}function xge(t,e,i=e.hasZ,r=e.hasM){return Vat(t,e.rings,i,r)}function Vat(t,e,i,r){const s=Es(i,r),{lengths:n,coords:o}=t;let a=0;fh(t);for(const l of e){for(const c of l)for(let d=0;d<s;d++)o[a++]=c[d];n.push(l.length)}return t}const A0=[],WS=[];function Fxt(t,e,i,r,s){A0[0]=t;const[n]=Sge(WS,A0,e,i,r,s);return nc(A0),nc(WS),n}function Sge(t,e,i,r,s,n){if(nc(t),!i){for(const o of e){const a=M2(o,n);t.push(new $g(null,o.attributes,null,a))}return t}switch(i){case"esriGeometryPoint":return Lat(t,e,r,s,n);case"esriGeometryMultipoint":return Nat(t,e,r,s,n);case"esriGeometryPolyline":return Fat(t,e,r,s,n);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return jat(t,e,r,s,n);default:bL().error("convertToFeatureSet:unknown-geometry",new R("internal:geometry",`Unable to parse unknown geometry type '${i}'`)),nc(t)}return t}function zxt(t,e,i,r){WS[0]=t,Ige(A0,WS,e,i,r);const s=A0[0];return nc(A0),nc(WS),s}function jxt(t,e,i){if(t==null)return null;const r=new Vr;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),Rw(t)?y7(e??t.z!=null,i??t.m!=null)(r,t):or(t)?xge(r,t,e,i):xs(t)?wge(r,t,Es(e,i)):Sy(t)?vge(r,t,Es(e,i)):void bL().error("convertFromGeometry:unknown-geometry",new R("internal:geometry",`Unable to parse unknown geometry type '${t}'`))}function $ge(t,e,i,r){const s=t&&("coords"in t?t:t.geometry);if(s==null)return null;switch(e){case"esriGeometryPoint":{let n=wL;return i&&r?n=m7:i?n=p7:r&&(n=f7),n(s)}case"esriGeometryMultipoint":return gge(s,i,r);case"esriGeometryPolyline":return bge(s,i,r);case"esriGeometryPolygon":return _ge(s,i,r);default:return bL().error("convertToGeometry:unknown-geometry",new R("internal:geometry",`Unable to parse unknown geometry type '${e}'`)),null}}function Uat(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function Ige(t,e,i,r,s){if(nc(t),i==null)return Uat(t,e);switch(i){case"esriGeometryPoint":return Aat(t,e,r,s);case"esriGeometryMultipoint":return Rat(t,e,r,s);case"esriGeometryPolyline":return Dat(t,e,r,s);case"esriGeometryPolygon":return zat(t,e,r,s);default:bL().error("convertToFeatureSet:unknown-geometry",new R("internal:geometry",`Unable to parse unknown geometry type '${i}'`))}return t}function Vxt(t){const{spatialReference:e,transform:i,fields:r,hasM:s,hasZ:n,features:o,geometryType:a,exceededTransferLimit:l,queryGeometry:c,queryGeometryType:d}=t,h={features:Ige([],o,a,n,s),fields:r,geometryType:a,spatialReference:e,queryGeometry:$ge(c,d,!1,!1)};return i&&(h.transform=i),l&&(h.exceededTransferLimit=l),s&&(h.hasM=s),n&&(h.hasZ=n),h}function Uxt(t,e){const i=new hge,{hasM:r,hasZ:s,features:n,spatialReference:o,geometryType:a,exceededTransferLimit:l,transform:c,fields:d}=t;return d&&(i.fields=d),i.geometryType=a??null,i.spatialReference=o??null,n&&Sge(i.features,n,a,s,r,e),l&&(i.exceededTransferLimit=l),r&&(i.hasM=r),s&&(i.hasZ=s),c&&(i.transform=c),i}function Bxt(t){const{transform:e,features:i,hasM:r,hasZ:s}=t;if(!e)return t;for(const n of i)n.geometry!=null&&_V(n.geometry,n.geometry,r,s,e),n.centroid!=null&&_V(n.centroid,n.centroid,r,s,e);return t.transform=null,t}function qxt(t,e){const{geometryType:i,features:r,hasM:s,hasZ:n}=e;if(!t)return e;for(let o=0;o<r.length;o++){const a=r[o],l=a.weakClone();l.geometry=new Vr,pQ(l.geometry,a.geometry,s,n,i,t),a.centroid&&(l.centroid=new Vr,pQ(l.centroid,a.centroid,s,n,"esriGeometryPoint",t)),r[o]=l}return e.transform=t,e}function pQ(t,e,i,r,s,n,o=i,a=r){if(fh(t),!e?.coords.length)return null;const l=d7[s],{coords:c,lengths:d}=e,h=Es(i,r),f=Es(i&&o,r&&a),m=h7(i,r,o,a);if(!d.length)return m(t.coords,c,0,0,kN(n,c[0]),TN(n,c[1])),fh(t,h,0),t;let y,v,b,w,x=0,S=0,$=S;for(const T of d){if(T<l)continue;let C=0;S=$,b=y=kN(n,c[x]),w=v=TN(n,c[x+1]),m(t.coords,c,S,x,b,w),C++,x+=h,S+=f;for(let L=1;L<T;L++,x+=h)b=kN(n,c[x]),w=TN(n,c[x+1]),b===y&&w===v||(m(t.coords,c,S,x,b-y,w-v),S+=f,C++,y=b,v=w);C>=l&&(t.lengths.push(C),$=S)}return nc(t.coords,$),t.coords.length?t:null}function Gxt(t,e,i,r,s,n,o=i,a=r){if(fh(t),!e?.coords.length)return null;const l=d7[s],{coords:c,lengths:d}=e,h=Es(i,r),f=Es(i&&o,r&&a),m=h7(i,r,o,a);if(!d.length)return m(t.coords,c,0,0,c[0],c[1]),fh(t,h,0),t;let y=0;const v=n*n;for(const b of d){if(b<l){y+=b*h;continue}const w=t.coords.length/f,x=y,S=y+(b-1)*h;m(t.coords,c,t.coords.length,x,c[x],c[x+1]),wV(t.coords,c,h,v,m,x,S),m(t.coords,c,t.coords.length,S,c[S],c[S+1]);const $=t.coords.length/f-w;$>=l?t.lengths.push($):nc(t.coords,w*f),y+=b*h}return t.coords.length?t:null}function Bat(t,e,i,r){const s=t[e],n=t[e+1],o=t[i],a=t[i+1],l=t[r],c=t[r+1];let d=o,h=a,f=l-d,m=c-h;if(f!==0||m!==0){const y=((s-d)*f+(n-h)*m)/(f*f+m*m);y>1?(d=l,h=c):y>0&&(d+=f*y,h+=m*y)}return f=s-d,m=n-h,f*f+m*m}function wV(t,e,i,r,s,n,o){let a,l=r,c=0;for(let d=n+i;d<o;d+=i)a=Bat(e,d,n,o),a>l&&(c=d,l=a);l>r&&(c-n>i&&wV(t,e,i,r,s,n,c),s(t,e,t.length,c,e[c],e[c+1]),o-c>i&&wV(t,e,i,r,s,c,o))}function Hxt(t,e,i,r){if(!e?.coords?.length)return null;const s=Es(i,r);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const c=e.coords;for(let d=0;d<c.length;d+=s){const h=c[d],f=c[d+1];n=Math.min(n,h),a=Math.max(a,h),o=Math.min(o,f),l=Math.max(l,f)}}return m5(t)?COe(t,n,o,a,l):HA(n,o,a,l,t),t}function _V(t,e,i,r,s){const{coords:n,lengths:o}=e,a=Es(i,r);if(!n.length)return t!==e&&fh(t),t;Rf(s);const{originPosition:l,scale:c,translate:d}=s,h=Hat;h.originPosition=l;const f=h.scale;f[0]=c[0]??1,f[1]=-(c[1]??1),f[2]=c[2]??1,f[3]=c[3]??1;const m=h.translate;if(m[0]=d[0]??0,m[1]=d[1]??0,m[2]=d[2]??0,m[3]=d[3]??0,!o.length){for(let v=0;v<a;++v)t.coords[v]=CN(h,n[v],v);return t!==e&&fh(t,a,0),t}let y=0;for(let v=0;v<o.length;v++){const b=o[v];t.lengths[v]=b;for(let S=0;S<a;++S)t.coords[y+S]=CN(h,n[y+S],S);let w=t.coords[y],x=t.coords[y+1];y+=a;for(let S=1;S<b;S++,y+=a){w+=n[y]*f[0],x+=n[y+1]*f[1],t.coords[y]=w,t.coords[y+1]=x;for(let $=2;$<a;++$)t.coords[y+$]=CN(h,n[y+$],$)}}return t!==e&&fh(t,n.length,o.length),t}function Wxt(t,e,i,r,s,n){if(fh(t),t.lengths.push(...e.lengths),i===s&&r===n)for(let o=0;o<e.coords.length;o++)t.coords.push(e.coords[o]);else{const o=Es(i,r),a=h7(i,r,s,n),l=e.coords;for(let c=0;c<l.length;c+=o)a(t.coords,l,t.coords.length,c,l[c],l[c+1])}return t}function qat(t,e,i,r){let s=0,n=t[r*e],o=t[r*(e+1)];for(let a=1;a<i;a++){const l=n+t[r*(e+a)],c=o+t[r*(e+a)+1],d=(l-n)*(c+o);n=l,o=c,s+=d}return .5*s}function Jxt(t,e){const{coords:i,lengths:r}=t;let s=0,n=0;for(let o=0;o<r.length;o++){const a=r[o];n+=qat(i,s,a,e),s+=a}return Math.abs(n)}function Gat(t,e,i,r){return t*r-i*e===0&&t*i+e*r>0}function Zxt(t,e,i,r,s){const n=Es(r,s);if(!t.lengths.length){if(t.coords.length<2)return null;const[h,f]=t.coords,m=EN(e,h),y=MN(e,f);return new Vr([],[m,y])}const o=new Vr([],[0,0]),a=d7[i],l=i==="esriGeometryPolygon"||i==="esriGeometryPolyline";let c=0,d=0;for(let h=0;h<t.lengths.length;h++){const f=t.lengths[h],m=d;let y=EN(e,t.coords[n*c]),v=MN(e,t.coords[n*c+1]);o.coords[d++]=y,o.coords[d++]=v;let b=0,w=0,x=1;for(let S=1;S<f;S++){const $=EN(e,t.coords[n*(S+c)]),T=MN(e,t.coords[n*(S+c)+1]);if($!==y||T!==v){const C=$-y,L=T-v;l&&Gat(b,w,C,L)?(o.coords[d-2]+=C,o.coords[d-1]+=L,y+=C,v+=L):(o.coords[d++]=$,o.coords[d++]=T,y=$,v=T,b=C,w=L,x+=1)}}x<a?d=m:o.lengths.push(x),c+=f}return o.lengths.length===0?null:o}function fh(t,e=0,i=0){nc(t.lengths,i),nc(t.coords,e)}function nc(t,e=0){t.length!==e&&(t.length=e)}const Hat={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function Wat(t,e){return e}function g7(t,e,i,r){switch(i){case 0:return Z$(t,e+r,0);case 1:return t.originPosition==="lowerLeft"?Z$(t,e+r,1):Yat(t,e+r,1)}}function kge(t,e,i,r){return i===2?Z$(t,e,2):g7(t,e,i,r)}function Jat(t,e,i,r){return i===2?e===0?0:Z$(t,e,3):g7(t,e,i,r)}function Zat(t,e,i,r){return i===3?e===0?0:Z$(t,e,3):kge(t,e,i,r)}function Z$({translate:t,scale:e},i,r){return t[r]+i*e[r]}function Yat({translate:t,scale:e},i,r){return t[r]-i*e[r]}let Kat=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=Wat,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const i=_6(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(i!=null)for(const r of e.features)i(r.geometry)}createSpatialReference(){return{}}addField(e,i){const r=e.fields;Rf(r),r.push(i);const s=r.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(e,i){e.features.push(i)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,s)=>this.addCoordinatePoint(i,r,s),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,s)=>this._addCoordinatePolygon(i,r,s),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,s)=>this._addCoordinatePolyline(i,r,s),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,s)=>this._addCoordinateMultipoint(i,r,s),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(e,i){const{queryGeometry:r,queryGeometryType:s}=i,n=this._transform?_V(r.clone(),r,!1,!1,this._transform):r.clone(),o=$ge(n,s,!1,!1);e.queryGeometryType=s,e.queryGeometry={...o}}createPointGeometry(e){const i={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(i.z=0),e.hasM&&(i.m=0),i}addCoordinatePoint(e,i,r){const s=this._transform;switch(i=this._applyTransform(s,i,r,0),r){case 0:e.x=i;break;case 1:e.y=i;break;case 2:"z"in e?e.z=i:e.m=i;break;case 3:e.m=i}}_transformPathLikeValue(e,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=e);const s=this._transform;return this._mValueOffset!==null&&e===0&&i>0&&!(i%this._mValueOffset)?0:this._applyTransform(s,e,i,r)}_addCoordinatePolyline(e,i,r){this._dehydratedAddPointsCoordinate(e.paths,i,r)}_addCoordinatePolygon(e,i,r){this._dehydratedAddPointsCoordinate(e.rings,i,r)}_addCoordinateMultipoint(e,i,r){r===0&&e.points.push([]);const s=this._transformPathLikeValue(i,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,i,r){r===0&&this._toAddInCurrentPath--===0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(i,r),n=e[e.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),n.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:i,hasM:r}=e;return i&&r?Zat:i?kge:r?Jat:g7}};async function Xat(t,e,i,r){const s=Rh(t),n={...i},o=Te.from(e),a=!o.quantizationParameters,{data:l}=await fat(s,o,new Kat({sourceSpatialReference:o.sourceSpatialReference,applyTransform:a}),n,r);return l}let Jo=class extends _e{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return $t(this.url)}async execute(e,i){const r=await this.executeJSON(e,i);return this.featureSetFromJSON(e,r,i)}async executeJSON(e,i){const r=this._normalizeQuery(e),s=e.outStatistics?.[0]!=null,n=H("featurelayer-pbf-statistics"),o=(!s||n)&&e.returnTrueCurves!==!0;let a;if(this.pbfSupported&&o)try{a=await Xat(this.url,r,i,{uniqueIdFields:this.uniqueIdFields})}catch(l){if(l.name!=="query:parsing-pbf")throw l;this.pbfSupported=!1}return this.pbfSupported&&o||(a=await mge(this.url,r,i,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(a.fields),a}async featureSetFromJSON(e,i,r){if(!this._queryIs3DObjectFormat(e)||this.infoFor3D==null||!i.features)return Rr.fromJSON(i);const{meshFeatureSetFromJSON:s}=await Oa(K(()=>import("./meshFeatureSet-DxILNKkD.js"),__vite__mapDeps([296,297,275,76,77,298,299,35,274,300,40,301,105,32,82,83,31,39,36,37,38,41,28,42,272,302])),r);return s(e,this.infoFor3D,i)}executeForCount(e,i){return _at(this.url,this._normalizeQuery(e),i,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,i){return xat(this.url,this._normalizeQuery(e),i)}executeForIds(e,i){return Sat(this.url,this._normalizeQuery(e),i,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(e,i){const[{default:r},{executeRelationshipQuery:s}]=await Oa(Promise.all([K(()=>Promise.resolve().then(()=>XJ),void 0),K(()=>import("./executeRelationshipQuery-C8WPCuq8.js"),[])]),i);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,i)}async executeRelationshipQueryForCount(e,i){const[{default:r},{executeRelationshipQueryForCount:s}]=await Oa(Promise.all([K(()=>Promise.resolve().then(()=>XJ),void 0),K(()=>import("./executeRelationshipQuery-C8WPCuq8.js"),[])]),i);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,i)}async executeAttachmentQuery(e,i){const{executeAttachmentQuery:r,fetchAttachments:s,processAttachmentQueryResult:n}=await Oa(K(()=>import("./queryAttachments-Dn4p2BYd.js"),__vite__mapDeps([303,135])),i),o=Rh(this.url);return n(o,await(this.queryAttachmentsSupported?r(o,e,i):s(o,e,i)))}async executeAttributeBinsQuery(e,i){const{executeAttributeBinsQuery:r}=await Oa(K(()=>import("./executeAttributeBinsQuery-CofgsqBZ.js"),__vite__mapDeps([304,203,204,14,21])),i);return r(this.parsedUrl,e,i)}async executePivotQuery(e,i){const{executePivotQuery:r}=await Oa(K(()=>import("./executePivotQuery-BY-WrYqK.js"),__vite__mapDeps([305,306])),i);return r(this.parsedUrl,e,i)}async executeTopFeaturesQuery(e,i){const{executeTopFeaturesQuery:r}=await Oa(K(()=>import("./executeTopFeaturesQuery-B_aoI-Ha.js"),__vite__mapDeps([307,308,309])),i);return r(this.parsedUrl,e,this.sourceSpatialReference,i)}async executeForTopIds(e,i){const{executeForTopIds:r}=await Oa(K(()=>import("./executeForTopIds-B5X25V8R.js"),__vite__mapDeps([310,308,309])),i);return r(this.parsedUrl,e,i)}async executeForTopExtents(e,i){const{executeForTopExtents:r}=await Oa(K(()=>import("./executeForTopExtents-B7bde419.js"),__vite__mapDeps([311,308,309])),i);return r(this.parsedUrl,e,i)}async executeForTopCount(e,i){const{executeForTopCount:r}=await Oa(K(()=>import("./executeForTopCount-Dpewec_E.js"),__vite__mapDeps([312,308,309])),i);return r(this.parsedUrl,e,i)}_normalizeQuery(e){let i=Te.from(e);i.sourceSpatialReference=i.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(i=i===e?i.clone():i,i.gdbVersion=e.gdbVersion||this.gdbVersion,i.dynamicDataSource=e.dynamicDataSource?Dn.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(r!=null&&this._queryIs3DObjectFormat(e)){if(i=i===e?i.clone():i,i.formatOf3DObjects=Vde(r),!i.formatOf3DObjects)throw new R("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(i.outSpatialReference&&!Mr(i.outSpatialReference,this.sourceSpatialReference))throw new R("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(i.outFields==null||!i.outFields.includes("*")){i=i===e?i.clone():i,i.outFields==null&&(i.outFields=[]);const{originX:s,originY:n,originZ:o,translationX:a,translationY:l,translationZ:c,scaleX:d,scaleY:h,scaleZ:f,rotationX:m,rotationY:y,rotationZ:v,rotationDeg:b}=r.transformFieldRoles;i.outFields.push(s,n,o,a,l,c,d,h,f,m,y,v,b)}}return i}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(const i of e){const r=this.fieldsIndex.get(i.name);r&&Object.assign(i,r.toJSON())}}_queryIs3DObjectFormat(e){return this.infoFor3D!=null&&e.returnGeometry===!0&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};u([p({type:Dn})],Jo.prototype,"dynamicDataSource",void 0),u([p()],Jo.prototype,"fieldsIndex",void 0),u([p()],Jo.prototype,"gdbVersion",void 0),u([p()],Jo.prototype,"infoFor3D",void 0),u([p({readOnly:!0})],Jo.prototype,"parsedUrl",null),u([p()],Jo.prototype,"pbfSupported",void 0),u([p()],Jo.prototype,"queryAttachmentsSupported",void 0),u([p()],Jo.prototype,"sourceSpatialReference",void 0),u([p()],Jo.prototype,"uniqueIdFields",void 0),u([p({type:String})],Jo.prototype,"url",void 0),Jo=u([M("esri.layers.graphics.sources.support.QueryTask")],Jo);var lM;function PN(t){return t?.type==="esriSMS"}function v7(t,e,i){const r=i.minimumWritableOrigin||i.origin;return!!r&&t.originIdOf(e)>=_o(r)}function Yx(t,e,i){const r=v7(this,e,i);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&i.layer?.type==="map-image"&&(i.writeSublayerStructure||r)}}function xV(t,e,i){return{enabled:!!i&&i.layer?.type==="tile"&&(v7(this,e,i)||this._isOverridden(e))}}function Id(t,e,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function cM(t,e,i){return{ignoreOrigin:!0,enabled:!!i?.writeSublayerStructure&&this.originIdOf(e)>2}}function iT(t,e,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||v7(this,e,i))}}let Qat=0;const elt=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);var tg;let Oe=(tg=class extends oc(O_(zf)){constructor(e){super(e),this.attributeTableTemplate=null,this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise(this.reload(e)),this}readCapabilities(e,i){i=i.layerDefinition||i;const{attachment:r,operations:{supportsQuery:s,supportsQueryAttachments:n},query:{supportsFormatPBF:o,supportsOrderBy:a,supportsPagination:l},data:{supportsAttachment:c},queryRelated:d}=U8(i,this.url);return{attachment:{supportsOrderByFields:r?.supportsOrderByFields??!1,supportsResize:r?.supportsResize??!1,supportsTypeWildcard:r?.supportsTypeWildcard??!1},exportMap:{supportsModification:!!i.canModifyLayer},operations:{supportsQuery:s,supportsQueryAttachments:n},data:{supportsAttachment:c},query:{supportsFormatPBF:o,supportsOrderBy:a,supportsPagination:l},queryRelated:d}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:i}=this;return{minScale:e,maxScale:i}}readMaxScaleRange(e,i){return{minScale:(i=i.layerDefinition||i).minScale??0,maxScale:i.maxScale??0}}get fieldsIndex(){return new Ww(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,i){if((i=i.layerDefinition||i).globalIdField)return i.globalIdField;if(i.fields){for(const r of i.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}get graphicOrigin(){if(!this.layer)return null;switch(this.layer.type){case"tile":return new Rot(this.layer,this);case"map-image":return new Lot(this.layer,this)}}get id(){return this._get("id")??Qat++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,i){return i.type==="Table"}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,i,r,s){e&&e.length&&(i.layerDefinition={drawingInfo:{labelingInfo:e.map(n=>n.write({},s))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(i=>i.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,i){return i.minScale||i.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,i){return i.maxScale||i.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,i){return(i=i.layerDefinition||i).objectIdField?i.objectIdField:i.fields?.find(s=>s.type==="esriFieldTypeOID")?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,i){const{layerDefinition:r}=i;return 1-.01*(r?.transparency??r?.drawingInfo?.transparency??0)}writeOpacity(e,i,r,s){i.layerDefinition={drawingInfo:{transparency:100-100*e}}}set orderBy(e){this._setAndNotifyLayer("orderBy",e)}writeParent(e,i){this.parent&&this.parent!==this.layer?i.parentLayerId=OA(this.parent.id):i.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:i,layer:r,url:s}=this,{spatialReference:n}=r,o="gdbVersion"in r?r.gdbVersion:void 0,a=H("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new Jo({fieldsIndex:i,gdbVersion:o,pbfSupported:a,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:n,url:s})}set renderer(e){if(DF(e,this.fieldsIndex),e){for(const i of e.symbols)if(Qa(i)){X.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Yd({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Mi(ue.ofType(lM),e)}writeSublayers(e,i,r){this.sublayers?.length&&(i[r]=this.sublayers.map(s=>s.id).toArray().reverse())}readTitle(e,i){return i.layerDefinition?.name??i.name}readTypeIdField(e,i){let r=(i=i.layerDefinition||i).typeIdField;if(r&&i.fields){r=r.toLowerCase();const s=i.fields.find(n=>n.name.toLowerCase()===r);s&&(r=s.name)}return r}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,i=this.source;if(!e)return null;if(this._lastParsedUrl=e,i?.type==="map-layer")return`${e.path}/${i.mapLayerId}`;const r={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${Ka(r)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,i,r,s){i[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=cs(this),i=new lM;return cs(i).store=e.clone(elt),this.commitProperty("url"),i._lastParsedUrl=this._lastParsedUrl,i}createPopupTemplate(e){return Rhe(this,e)}createQuery(){return new Te({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=(await K(async()=>{const{default:n}=await Promise.resolve().then(()=>EBe);return{default:n}},void 0)).default,{layer:i,url:r}=this;let s;if(r&&this.originIdOf("url")>2)s=new e({url:r});else{if(!i?.parsedUrl)throw new R("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const n=i.parsedUrl;s=new e({url:n.path}),n&&this.source&&(this.source.type==="map-layer"?s.layerId=this.source.mapLayerId:s.dynamicDataSource=this.source)}}return i?.refreshInterval!=null&&(s.refreshInterval=i.refreshInterval),this.definitionExpression&&(s.definitionExpression=this.definitionExpression),this.floorInfo&&(s.floorInfo=U(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(s.labelingInfo=U(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(s.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(s.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(s.visible=this.visible),this.originIdOf("minScale")>0&&(s.minScale=this.minScale),this.originIdOf("maxScale")>0&&(s.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(s.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(s.popupTemplate=U(this.popupTemplate)),this.originIdOf("renderer")>2&&(s.renderer=U(this.renderer)),this.source?.type==="data-layer"&&(s.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(s.title=this.title),i?.type==="map-image"&&i.originIdOf("customParameters")>0&&(s.customParameters=i.customParameters),i?.type==="tile"&&i.originIdOf("customParameters")>0&&(s.customParameters=i.customParameters),s}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return z8(this.types,this.typeIdField,e)}getFieldDomain(e,i){const r=i?.feature,s=this.getFeatureType(r);if(s){const n=s.domains&&s.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}async queryAttachments(e,i){await this.load(),e=Gr.from(e);const r=this.capabilities;if(!r?.data?.supportsAttachment)throw new R("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:s,objectIds:n,globalIds:o,num:a,size:l,start:c,where:d}=e;if(!r?.operations?.supportsQueryAttachments&&(s?.length>0||o?.length>0||l?.length>0||a||c||d))throw new R("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(n?.length||o?.length||d))throw new R("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return!r?.attachment?.supportsOrderByFields&&e.orderByFields?.length&&((e=e.clone()).orderByFields=null),this.queryTask.executeAttachmentQuery(e,i)}async queryFeatureCount(e=this.createQuery(),i){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new R("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!this.url)throw new R("queryFeatureCount:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeForCount(e,{...i,query:{...this.layer?.customParameters,token:r}})}async queryFeatures(e=this.createQuery(),i){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new R("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new R("queryFeatures:not-supported","this layer has no url.");const r=await this.queryTask.execute(e,{...i,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(r?.features){const s=this.graphicOrigin;for(const n of r.features)n.sourceLayer=this,n.origin=s}return r}async queryObjectIds(e=this.createQuery(),i){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new R("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new R("queryObjectIds:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeForIds(e,{...i,query:{...this.layer?.customParameters,token:r}})}async queryRelatedFeatures(e,i){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new R("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new R("queryRelatedFeatures:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeRelationshipQuery(e,{...i,query:{...this.layer?.customParameters,token:r}})}async queryRelatedFeaturesCount(e,i){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new R("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new R("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new R("queryRelatedFeaturesCount:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeRelationshipQueryForCount(e,{...i,query:{...this.layer?.customParameters,token:r}})}async reload(e){if(this.loadStatus==="not-loaded")return this.load(e).then(()=>{});const{layer:i,url:r}=this;if(!i&&!r)throw new R("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const s=i?await i.fetchSublayerInfo(this,e):(await xe(r,{query:{f:"json"},...e})).data;if(this.loaded&&this.originIdOf("url")>2){const n=new Set(["drawingInfo","maxScale","minScale","name"]);if(s!=null)for(const o of Object.keys(s))n.has(o)&&delete s[o]}s&&(this.sourceJSON={...this.sourceJSON,...s},this.read({layerDefinition:s},{origin:"service",layer:i,url:Rh(r)}))}toExportImageJSON(e){const i={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},r=$0(e,this.definitionExpression);r!=null&&(i.definitionExpression=r);const s=["renderer","labelingInfo","opacity","labelsVisible"].reduce((o,a)=>(o[a]=this.originIdOf(a),o),{});if(Object.keys(s).some(o=>s[o]>2)){const o=i.drawingInfo={};if(s.renderer>2&&(o.renderer=this.renderer?this.renderer.toJSON():null),s.labelsVisible>2&&(o.showLabels=this.labelsVisible),this.labelsVisible&&s.labelingInfo>2)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(l=>!l.labelPlacement)&&X.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let a=this.labelingInfo;this.geometryType!=null&&(a=mBe(this.labelingInfo,tC.toJSON(this.geometryType))),o.showLabels=!0,o.labelingInfo=a.filter(l=>l.labelPlacement).map(l=>l.toJSON({origin:"service",layer:this.layer}))}else o.showLabels=!1;s.opacity>2&&(o.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(o.renderer)}return(this.layer?.capabilities?.exportMap?.supportsSublayerOrderBy??!1)&&this.originIdOf("orderBy")>2&&(i.orderBy=this.orderBy?.map(o=>o.toJSON())??null),i}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,i=>{i.color||i.style!=="esriSMSX"&&i.style!=="esriSMSCross"||(i.outline?.color?i.color=i.outline.color:i.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,i){if(e){const r=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const s of r)PN(s.symbol)&&i(s.symbol);"symbol"in e&&PN(e.symbol)&&i(e.symbol),"defaultSymbol"in e&&PN(e.defaultSymbol)&&i(e.defaultSymbol)}}_setAndNotifyLayer(e,i){const r=this.layer,s=this._get(e);let n,o;switch(e){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",o="supportsModification";break;case"orderBy":n="supportsSublayerOrderBy",o="supportsModification"}const a=cs(this).getDefaultOrigin();if(a!=="service"){if(n&&this.layer?.capabilities?.exportMap?.[n]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${n}'`);if(o&&this.capabilities?.exportMap[o]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${o}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,i),a!=="service"&&s!==i&&r?.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,i){i&&(i.forEach(r=>{r.parent=null,r.layer=null}),this.removeAllHandles()),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this.addHandles([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null}),e.on("before-changes",r=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(X.getLogger(this).error(new R("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),r.preventDefault())})]))}_logLockedError(e,i){const{layer:r,declaredClass:s}=this;X.getLogger(s).error(new R("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${r?.id}'`,{reason:i,sublayer:this,layer:r}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}},lM=tg,tg.test={isMapImageLayerOverridePolicy:e=>e===cM||e===Id||e===Yx,isTileImageLayerOverridePolicy:e=>e===xV},tg);u([p({type:ude,json:{name:"attributeTableInfo",write:{overridePolicy:Yx},origins:{"web-scene":{write:!1}}}})],Oe.prototype,"attributeTableTemplate",void 0),u([p({readOnly:!0})],Oe.prototype,"capabilities",void 0),u([Q("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Oe.prototype,"readCapabilities",null),u([p()],Oe.prototype,"defaultPopupTemplate",null),u([p({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:Yx}}})],Oe.prototype,"definitionExpression",null),u([p({readOnly:!0})],Oe.prototype,"effectiveScaleRange",null),u([Q("service","maxScaleRange",["minScale","maxScale"])],Oe.prototype,"readMaxScaleRange",null),u([p({type:[ss],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Oe.prototype,"fields",void 0),u([p({readOnly:!0})],Oe.prototype,"fieldsIndex",null),u([p({type:Km,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:Yx},origins:{"web-scene":{read:!1,write:!1}}}})],Oe.prototype,"floorInfo",null),u([p({type:Pe,json:{read:{source:"layerDefinition.extent"}}})],Oe.prototype,"fullExtent",void 0),u([p({type:tC.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:tC.read}}}}})],Oe.prototype,"geometryType",void 0),u([p({type:String})],Oe.prototype,"globalIdField",void 0),u([Q("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Oe.prototype,"readGlobalIdFieldFromService",null),u([p({readOnly:!0})],Oe.prototype,"graphicOrigin",null),u([p({type:Ke,json:{write:{ignoreOrigin:!0}}})],Oe.prototype,"id",null),u([p({readOnly:!0})],Oe.prototype,"isTable",void 0),u([Q("service","isTable",["type"])],Oe.prototype,"readIsTable",null),u([p({value:null,type:[gi],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:cM}}})],Oe.prototype,"labelingInfo",null),u([oe("labelingInfo")],Oe.prototype,"writeLabelingInfo",null),u([p({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Id}}})],Oe.prototype,"labelsVisible",null),u([p({value:null})],Oe.prototype,"layer",null),u([p({type:String,json:{write:{overridePolicy:xV}}})],Oe.prototype,"layerItemId",void 0),u([p({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:iT}}})],Oe.prototype,"legendEnabled",void 0),u([p({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Oe.prototype,"listMode",null),u([p({type:Number,value:0,json:{write:{overridePolicy:Id}}})],Oe.prototype,"minScale",null),u([Q("minScale",["minScale","layerDefinition.minScale"])],Oe.prototype,"readMinScale",null),u([p({type:Number,value:0,json:{write:{overridePolicy:Id}}})],Oe.prototype,"maxScale",null),u([Q("maxScale",["maxScale","layerDefinition.maxScale"])],Oe.prototype,"readMaxScale",null),u([p()],Oe.prototype,"objectIdField",void 0),u([Q("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Oe.prototype,"readObjectIdFieldFromService",null),u([p({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Id}}})],Oe.prototype,"opacity",null),u([Q("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Oe.prototype,"readOpacity",null),u([oe("opacity")],Oe.prototype,"writeOpacity",null),u([p({value:null,type:[Dp],json:{name:"layerDefinition.orderBy",read:{reader:Ahe},write:{overridePolicy:Yx},origins:{"web-scene":{read:!1,write:!1}}}})],Oe.prototype,"orderBy",null),u([p({json:{type:Ke,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:Id}}})],Oe.prototype,"parent",void 0),u([oe("parent")],Oe.prototype,"writeParent",null),u([p({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(t,e)=>!e.disablePopup},write:{target:"disablePopup",overridePolicy:iT,writer(t,e,i){e[i]=!t}}}})],Oe.prototype,"popupEnabled",void 0),u([p({type:Uf,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:iT}}})],Oe.prototype,"popupTemplate",void 0),u([p({readOnly:!0})],Oe.prototype,"queryTask",null),u([p({type:[lo],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],Oe.prototype,"relationships",void 0),u([p({types:j_,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:cM},origins:{"web-scene":{types:Phe,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:cM}}}}})],Oe.prototype,"renderer",null),u([p({types:{key:"type",base:null,typeMap:{"data-layer":Dn,"map-layer":Yd}},cast(t){if(t){if("mapLayerId"in t)return ag(Yd,t);if("dataSource"in t)return ag(Dn,t)}return t},json:{name:"layerDefinition.source",write:{overridePolicy:Id}}})],Oe.prototype,"source",null),u([p()],Oe.prototype,"sourceJSON",void 0),u([p({type:fe,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],Oe.prototype,"spatialReference",void 0),u([p({value:null,json:{type:[Ke],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Id}}})],Oe.prototype,"sublayers",null),u([Mt("sublayers")],Oe.prototype,"castSublayers",null),u([oe("sublayers")],Oe.prototype,"writeSublayers",null),u([p({type:String,json:{name:"name",write:{overridePolicy:iT}}})],Oe.prototype,"title",void 0),u([Q("service","title",["name","layerDefinition.name"])],Oe.prototype,"readTitle",null),u([p({type:String})],Oe.prototype,"typeIdField",void 0),u([p({json:{read:!1},readOnly:!0,value:"sublayer"})],Oe.prototype,"type",void 0),u([Q("typeIdField",["layerDefinition.typeIdField"])],Oe.prototype,"readTypeIdField",null),u([p({type:[Cl],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Oe.prototype,"types",void 0),u([p({type:String,json:{name:"layerUrl",write:{overridePolicy:xV}}})],Oe.prototype,"url",null),u([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Id}}})],Oe.prototype,"visible",null),u([oe("visible")],Oe.prototype,"writeVisible",null),Oe=lM=u([M("esri.layers.support.Sublayer")],Oe);function tlt(t,e){const i=[],r={};return t&&t.forEach(s=>{const n=new Oe;if(n.read(s,e),r[n.id]=n,s.parentLayerId!=null&&s.parentLayerId!==-1){const o=r[s.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(n)}else i.unshift(n)}),i}const rT=ue.ofType(Oe);function Tge(t,e){t&&t.forEach(i=>{e(i),i.sublayers&&i.sublayers.length&&Tge(i.sublayers,e)})}const Ege=t=>{const e=t;let i=class extends e{constructor(...r){super(...r),this.allSublayers=new ra({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{},6:{}},this.subtables=null,this.addHandles([de(()=>this.sublayers,(s,n)=>this._handleSublayersChange(s,n),lr),de(()=>this.subtables,(s,n)=>this._handleSublayersChange(s,n),lr)])}destroy(){this.allSublayers.destroy()}readSublayers(r,s){if(!s||!r)return;const{sublayersSourceJSON:n}=this,o=_o(s.origin);if(o<2||(n[o]={context:s,visibleLayers:r.visibleLayers||n[o].visibleLayers,layers:r.layers||n[o].layers},o>2))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:a,origin:l}=this.createSublayersForOrigin("web-document"),c=cs(this);c.setDefaultOrigin(l),this._set("sublayers",new rT(a)),c.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(s=>s.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){let s;const n=_o(r==="web-document"?"web-map":r);let o=2,a=this.sublayersSourceJSON[2].layers,l=this.sublayersSourceJSON[2].context,c=null;const d=[3,4,5].filter(b=>b<=n);for(const b of d){const w=this.sublayersSourceJSON[b];KWe(w.layers)&&(o=b,a=w.layers,l=w.context,w.visibleLayers&&(c={visibleLayers:w.visibleLayers,context:w.context}))}const h=[3,4,5].filter(b=>b>o&&b<=n);let f=null;for(const b of h){const{layers:w,visibleLayers:x,context:S}=this.sublayersSourceJSON[b];w&&(f={layers:w,context:S},s??(s=b)),x&&(c={visibleLayers:x,context:S})}const m=tlt(a,l),y=new Map,v=new Set;if(f)for(const b of f.layers)y.set(b.id,b);if(c?.visibleLayers)for(const b of c.visibleLayers)v.add(b);return Tge(m,b=>{f&&b.read(y.get(b.id),f.context),c&&b.read({defaultVisibility:v.has(b.id)},c.context)}),{origin:lg(o),originWithPartialOverrides:s?lg(s):null,sublayers:new rT({items:m})}}read(r,s){super.read(r,s),this.readSublayers(r,s)}_handleSublayersChange(r,s){s&&(s.forEach(n=>{n.parent=null,n.layer=null}),this.removeHandles("sublayers-owner")),r&&(r.forEach(n=>{n.parent=this,n.layer=this}),this.addHandles([r.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),r.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(r.on("before-changes",n=>{X.getLogger("esri.layers.TileLayer").error(new R("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return u([p({readOnly:!0})],i.prototype,"allSublayers",void 0),u([p({readOnly:!0,type:ue.ofType(Oe)})],i.prototype,"serviceSublayers",void 0),u([p({value:null,type:rT,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],i.prototype,"sublayers",void 0),u([p({readOnly:!0})],i.prototype,"sublayersSourceJSON",void 0),u([p({type:rT,json:{read:{source:"tables"}}})],i.prototype,"subtables",void 0),i=u([M("esri.layers.mixins.SublayersOwner")],i),i};var SV;const fQ=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let gr=SV=class extends Dg(qg(Ege(cge(uge(Vg(Ug(O3(oc(Bg(L3(N3(Bt)))))))))))){constructor(...t){super(...t),this.listMode="show",this.elevationInfo=new Ml({mode:"on-the-ground"}),this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}load(t){const e=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(Ss).then(()=>this._fetchService(e))),Promise.resolve(this)}get attributionDataUrl(){const t=this.parsedUrl?.path.toLowerCase();return t?this._getDefaultAttribution(this._getMapName(t)):null}get hasAttributionData(){return super.hasAttributionData}readSpatialReference(t,e){return(t=t||e.tileInfo?.spatialReference)&&fe.fromJSON(t)}writeSublayers(t,e,i,r){if(!this.loaded||!t)return;const s=t.slice().reverse().flatten(({sublayers:a})=>a&&a.toArray().reverse()).toArray(),n=[],o={writeSublayerStructure:!1,...r};s.forEach(a=>{const l=a.write({},o);n.push(l)}),n.some(a=>Object.keys(a).length>1)&&(e.layers=n)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(t){return Array.isArray(t)?t.map(e=>$t(e).path):null}fetchTile(t,e,i,r={}){const{signal:s}=r,n=this.getTileUrl(t,e,i),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return xe(n,o).then(a=>a.data)}async fetchImageBitmapTile(t,e,i,r={}){const{signal:s}=r;if(this.fetchTile!==SV.prototype.fetchTile){const l=await this.fetchTile(t,e,i,r);return n_(l,t,e,i,s)}const n=this.getTileUrl(t,e,i),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await xe(n,o);return n_(a,t,e,i,s)}getTileUrl(t,e,i){const r=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,s=Ka({...this.parsedUrl?.query,blankTile:!r&&null,...this.customParameters,token:this.apiKey}),n=this.tileServers;return`${n&&n.length?n[e%n.length]:this.parsedUrl?.path}/tile/${t}/${e}/${i}${s?"?"+s:""}`}loadAll(){return L_(this,t=>{t(this.allSublayers)})}_fetchService(t){return new Promise((e,i)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new R("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void e({data:this.sourceJSON})}if(!this.parsedUrl)throw new R("tile-layer:undefined-url","layer's url is not defined");const r=ya(this.parsedUrl.path);if(r!=null&&r.serverType==="ImageServer")throw new R("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");xe(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e,i)}).then(e=>{let i=this.url;if(e.ssl&&(i=this.url=i.replace(/^http:/i,"https:")),this.sourceJSON=e.data,this.read(e.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!u$(i))return this._fetchServerVersion(i,t).then(r=>{this.read({currentVersion:r})}).catch(()=>{})})}_fetchServerVersion(t,e){if(!_Se(t))return Promise.reject();const i=t.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return xe(i,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(r=>{if(r.data?.currentVersion)return r.data.currentVersion;throw new R("tile-layer:version-not-available","Server did not provide a version")})}_getMapName(t){const e=t.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/mapserver/i);return e?e[2]:void 0}_getDefaultAttribution(t){if(t==null)return null;let e;t=t.toLowerCase();for(let i=0,r=fQ.length;i<r;i++)if(e=fQ[i],e.toLowerCase().includes(t))return Us("//static.arcgis.com/attribution/"+e);return null}_getDefaultTileServers(t){if(t==null)return[];const e=t.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,i=t.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return e||i?[t,t.replace(e?/server\.arcgisonline/i:/services\.arcgisonline/i,e?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[Mge]}};u([p({readOnly:!0})],gr.prototype,"attributionDataUrl",null),u([p({type:["show","hide","hide-children"]})],gr.prototype,"listMode",void 0),u([p({json:{read:!0,write:!0}})],gr.prototype,"blendMode",void 0),u([p()],gr.prototype,"elevationInfo",void 0),u([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],gr.prototype,"isReference",void 0),u([p({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],gr.prototype,"operationalLayerType",void 0),u([p({type:Boolean})],gr.prototype,"resampling",void 0),u([p()],gr.prototype,"sourceJSON",void 0),u([p({type:fe})],gr.prototype,"spatialReference",void 0),u([Q("spatialReference",["spatialReference","tileInfo"])],gr.prototype,"readSpatialReference",null),u([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],gr.prototype,"path",void 0),u([p({readOnly:!0})],gr.prototype,"sublayers",void 0),u([oe("sublayers",{layers:{type:[Oe]}})],gr.prototype,"writeSublayers",null),u([p({json:{read:!1,write:!1}})],gr.prototype,"popupEnabled",void 0),u([p()],gr.prototype,"tileServers",null),u([Mt("tileServers")],gr.prototype,"castTileServers",null),u([p({readOnly:!0,json:{read:!1}})],gr.prototype,"type",void 0),u([p(V2)],gr.prototype,"url",void 0),gr=SV=u([M("esri.layers.TileLayer")],gr);const Mge=Symbol("default-fetch-tile");gr.prototype.fetchTile[Mge]=!0;const Cge=gr,Xxt=Object.freeze(Object.defineProperty({__proto__:null,default:Cge},Symbol.toStringTag,{value:"Module"}));let Vi=class extends Dg(K8(qg(Ege(uge(O3(Vg(Ug(oc(Bg(L3(N3(Bt)))))))))))){constructor(...e){super(...e),this._exportImageParameters=new Yo({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.elevationInfo=new Ml({mode:"on-the-ground"}),this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null,this._debouncedSaveOperations=m_(async(i,r,s)=>{const{save:n,saveAs:o}=await K(()=>import("./mapImageLayerUtils-DrBrcCgF.js"),__vite__mapDeps([313,270,263,267]));switch(i){case 0:return n(this,r);case 1:return o(this,s,r)}})}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){const i=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(Ss).then(()=>this._fetchService(i))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(e,i){const r=i.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}get loaded(){return super.loaded}set portalItem(e){super.portalItem=e}writeSublayers(e,i,r,s){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:f})=>f&&f.toArray().reverse()).toArray();let o=!1;const a=_o(s.origin);let l;if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(a===3){const f=this.createSublayersForOrigin("service").sublayers;o=uY(n,f,2)}else if(a>3){const f=this.createSublayersForOrigin("portal-item");o=uY(n,f.sublayers,_o(f.origin)),l=f.originWithPartialOverrides}}const c=[],d={writeSublayerStructure:o,...s,minimumWritableOrigin:l};let h=o||this.hasVisibleLayersForOrigin(a);n.forEach(f=>{const m=f.write({},d);c.push(m),h=h||f.originOf("visible")==="user"}),c.some(f=>Object.keys(f).length>1)&&(i.layers=c),h&&(i.visibleLayers=n.filter(f=>f.visible).map(f=>f.id))}createExportImageParameters(e,i,r,s){const n=s?.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian()),this._exportImageParameters.floors=s?.floors??null,this._exportImageParameters.scale=s?.scale||l4({extent:e,width:i})*n;const o=this._exportImageParameters.toJSON(),a=!s?.rotation||this.version<10.3?{}:{rotation:-s.rotation},l=e?.spatialReference,c=pg(l);if(s?.scale&&e){const h=e.width/i*(va(e?.spatialReference)*qU);o.dpi=s.scale/h}o.dpi*=n;const d={};if(s?.timeExtent){const{start:h,end:f}=s.timeExtent.toJSON();d.time=h&&f&&h===f?""+h:`${h??"null"},${f??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(d.time="null,null");return{bbox:e?e.xmin+","+e.ymin+","+e.xmax+","+e.ymax:void 0,bboxSR:c,imageSR:c,size:i+","+r,...o,...a,...d}}async fetchImage(e,i,r,s){const{data:n}=await this._fetchImage("image",e,i,r,s);return n}async fetchImageBitmap(e,i,r,s){const{data:n,url:o}=await this._fetchImage("blob",e,i,r,s);return Kye(n,o,s?.signal)}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await xe(this.url,i),{extent:s,fullExtent:n,timeExtent:o}=r,a=s||n;return{fullExtent:a&&Pe.fromJSON(a),timeExtent:o&&pt.fromJSON({start:o[0],end:o[1]})}}loadAll(){return L_(this,e=>{e(this.allSublayers),e(this.subtables)})}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,i){return this._debouncedSaveOperations(1,i,e)}serviceSupportsSpatialReference(e){return Ohe(this,e)}async _fetchImage(e,i,r,s,n){const o={responseType:e,signal:n?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(i,r,s,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},a=this.parsedUrl.path+"/export";if(o.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new R("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:l}=await xe(a,o);return{data:l,url:a}}catch(l){throw Yi(l)?l:new R("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:l})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:i,ssl:r}=await xe(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(e){return!(e==null||!this.sublayersSourceJSON[e]?.visibleLayers)}};u([p(Fw("dateFieldsTimeReference"))],Vi.prototype,"dateFieldsTimeZone",void 0),u([p({type:Boolean})],Vi.prototype,"datesInUnknownTimezone",void 0),u([p()],Vi.prototype,"dpi",void 0),u([p()],Vi.prototype,"elevationInfo",void 0),u([p()],Vi.prototype,"gdbVersion",void 0),u([p()],Vi.prototype,"imageFormat",void 0),u([Q("imageFormat",["supportedImageFormatTypes"])],Vi.prototype,"readImageFormat",null),u([p({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Vi.prototype,"imageMaxHeight",void 0),u([p({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Vi.prototype,"imageMaxWidth",void 0),u([p()],Vi.prototype,"imageTransparency",void 0),u([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Vi.prototype,"isReference",void 0),u([p({json:{read:!1,write:!1}})],Vi.prototype,"labelsVisible",void 0),u([p({type:["ArcGISMapServiceLayer"]})],Vi.prototype,"operationalLayerType",void 0),u([p({json:{read:!1,write:!1}})],Vi.prototype,"popupEnabled",void 0),u([p(Fw("preferredTimeReference"))],Vi.prototype,"preferredTimeZone",void 0),u([p()],Vi.prototype,"sourceJSON",void 0),u([p({json:{write:{ignoreOrigin:!0}}})],Vi.prototype,"sublayers",void 0),u([oe("sublayers",{layers:{type:[Oe]},visibleLayers:{type:[Ke]}})],Vi.prototype,"writeSublayers",null),u([p({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],Vi.prototype,"listMode",void 0),u([p({json:{read:!1},readOnly:!0,value:"map-image"})],Vi.prototype,"type",void 0),u([p(V2)],Vi.prototype,"url",void 0),Vi=u([M("esri.layers.MapImageLayer")],Vi);const Pge=Vi,eSt=Object.freeze(Object.defineProperty({__proto__:null,default:Pge},Symbol.toStringTag,{value:"Module"}));let sT=null;function ilt(t){if(sT)return sT;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return sT=new Promise(i=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,i(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,i(!1)},r.src="data:image/webp;base64,"+e[t]}),sT}const mQ=1.15;class yQ{constructor(e,i){this._spriteSource=e,this._maxTextureSize=i,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded",e.type==="url"&&e.spriteFormat&&(this._spriteImageFormat=e.spriteFormat),e.pixelRatio&&(this.devicePixelRatio=e.pixelRatio),this.baseURL=e.spriteUrl}get spriteNames(){const e=[];for(const i in this._spritesData)e.push(i);return e.sort(),e}getSpriteInfo(e){return this._spritesData?this._spritesData[e]:null}async load(e){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(e),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(e){this._isRetina=this.devicePixelRatio>mQ;const{width:i,height:r,data:s,json:n}=await this._getSpriteData(this._spriteSource,e),o=Object.keys(n);if(!o||o.length===0||!s)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=n,this.width=i,this.height=r;const a=Math.max(this._maxTextureSize,4096);if(i>a||r>a){const c=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${a} pixels}`;throw X.getLogger("esri.layers.support.SpriteSource").error(c),new R("SpriteSource",c)}let l;for(let c=0;c<s.length;c+=4)l=s[c+3]/255,s[c]=s[c]*l,s[c+1]=s[c+1]*l,s[c+2]=s[c+2]*l;this.image=s}async _getSpriteData(e,i){if(e.type==="image"){let d,h;if(this.devicePixelRatio<mQ){if(!e.spriteSource1x)throw new R("SpriteSource","no image data provided for low resolution sprites!");d=e.spriteSource1x.image,h=e.spriteSource1x.json}else{if(!e.spriteSource2x)throw new R("SpriteSource","no image data provided for high resolution sprites!");d=e.spriteSource2x.image,h=e.spriteSource2x.json}return"width"in d&&"height"in d&&"data"in d&&(a_e(d.data)||sU(d.data))?{width:d.width,height:d.height,data:new Uint8Array(d.data),json:h}:{...gQ(d),json:h}}const r=$t(this.baseURL),s=r.query?"?"+Ka(r.query):"",n=this._isRetina?"@2x":"",o=`${r.path}${n}.${this._spriteImageFormat}${s}`,a=`${r.path}${n}.json${s}`,[l,c]=await Promise.all([xe(a,i),xe(o,{responseType:"image",...i})]);return{...gQ(c.data),json:l.data}}}function gQ(t){const e=document.createElement("canvas"),i=e.getContext("2d");e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(r.data)}}let rlt=class{constructor(e){this.url=e}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=xe(this.url).then(e=>e.data.index)),this._tileIndexPromise}async dataKey(e,i){const r=await this.fetchTileIndex();return Gt(i),this._getIndexedDataKey(r,e)}_getIndexedDataKey(e,i){const r=[i];if(i.level<0||i.row<0||i.col<0||i.row>>i.level>0||i.col>>i.level>0)return null;let s=i;for(;s.level!==0;)s=new qf(s.level-1,s.row>>1,s.col>>1,s.world),r.push(s);let n,o,a=e,l=r.pop();if(a===1)return l;for(;r.length;)if(n=r.pop(),o=(1&n.col)+((1&n.row)<<1),a){if(a[o]===0){l=null;break}if(a[o]===1){l=n;break}l=n,a=a[o]}return l}},slt=class{constructor(e,i){this._tilemap=e,this._tileIndexUrl=i}destroy(){this._tilemap=bi(this._tilemap),this._tileIndexPromise=null}async fetchTileIndex(e){return this._tileIndexPromise||(this._tileIndexPromise=xe(this._tileIndexUrl,{query:{...e?.query}}).then(i=>i.data.index)),this._tileIndexPromise}dataKey(e,i){const{level:r,row:s,col:n}=e,o=new qf(e);return this._tilemap.fetchAvailabilityUpsample(r,s,n,o,i).then(()=>(o.world=e.world,o)).catch(a=>{if(Yi(a))throw a;return null})}},nlt=class{constructor(e){this._tileUrl=e,this._promise=null,this._abortController=null,this._abortOptions=[]}getData(e){(this._promise==null||Xr(this._abortController?.signal))&&(this._promise=this._makeRequest(this._tileUrl));const i=this._abortOptions;return i.push(e),as(e,()=>{i.every(r=>Xr(r))&&this._abortController.abort()}),this._promise.then(r=>U(r))}async _makeRequest(e){this._abortController=new AbortController;const{data:i}=await xe(e,{responseType:"array-buffer",signal:this._abortController.signal});return i}};const vQ=new Map;function olt(t,e,i,r,s){const n=$t(t),o=n.query;if(o)for(const[l,c]of Object.entries(o))switch(c){case"{x}":o[l]=r.toString();break;case"{y}":o[l]=i.toString();break;case"{z}":o[l]=e.toString()}const a=n.path;return alt(Io(a.replaceAll(/\{z\}/gi,e.toString()).replaceAll(/\{y\}/gi,i.toString()).replaceAll(/\{x\}/gi,r.toString()),{...n.query}),s)}function alt(t,e){return Ch(vQ,t,()=>new nlt(t)).getData(e).finally(()=>vQ.delete(t))}let llt=class{constructor(e,i,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.initialExtent=null,this.name=e,this.sourceUrl=i;const s=$t(this.sourceUrl),n=U(r),o=n.tiles;if(s)for(let f=0;f<o.length;f++){const m=$t(o[f]);m&&(gn(m.path)||(m.path=fa(s.path,m.path)),o[f]=Io(m.path,{...s.query,...m.query}))}this.tileServers=o;const a=r.capabilities&&r.capabilities.split(",").map(f=>f.toLowerCase().trim()),l=r?.exportTilesAllowed===!0,c=a?.includes("tilemap")===!0,d=l&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:l,supportsTileMap:c},exportTiles:l?{maxExportTilesCount:+d}:null},this.tileInfo=Ti.fromJSON(n.tileInfo);const h=r.tileMap?Io(fa(s.path,r.tileMap),s.query??{}):null;c?(this.type="vector-tile",this.tilemap=new slt(new Fc({layer:{parsedUrl:s,tileInfo:this.tileInfo},minLOD:n.minLOD??this.tileInfo.lods[0].level,maxLOD:n.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),h)):h&&(this.tilemap=new rlt(h)),this.fullExtent=Pe.fromJSON(r.fullExtent),this.initialExtent=Pe.fromJSON(r.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(e,i){return this.tilemap?this.tilemap.dataKey(e,i):e}requestTile(e,i,r,s){const n=this.tileServers[i%this.tileServers.length];return olt(n,e,i,r,s)}isCompatibleWith(e){const i=this.tileInfo,r=e.tileInfo;if(!i.spatialReference.equals(r.spatialReference)||!i.origin.equals(r.origin)||Math.round(i.dpi)!==Math.round(r.dpi))return!1;const s=i.lods,n=r.lods,o=Math.min(s.length,n.length);for(let a=0;a<o;a++){const l=s[a],c=n[a];if(l.level!==c.level||Math.round(l.scale)!==Math.round(c.scale))return!1}return!0}};async function clt(t,e){const i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[r,s]=typeof t=="string"?[t,null]:[null,t.jsonUrl];return await sf(i,"esri",t,s,e),{layerDefinition:i.validatedSource,url:r,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style&&i.style.sprite&&Cy(i.styleBase,i.style.sprite),spriteFormat:i.spriteFormat,glyphsUrl:i.style&&i.style.glyphs&&Cy(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName}}function Cy(...t){let e;for(const i of t)i!=null&&(ma(i)?e&&(e=e.split("://")[0]+":"+i.trim()):e=gn(i)?i:fa(e,i));return e?FA(e):void 0}async function sf(t,e,i,r,s){let n,o,a;if(Gt(s),typeof i=="string"){const c=Gn(i);a=await xe(c,{...s,responseType:"json",query:{f:"json",...s?.query}}),a.ssl&&(n&&(n=n.replace(/^http:/i,"https:")),o&&(o=o.replace(/^http:/i,"https:"))),n=c,o=c}else i!=null&&(a={data:i},n=i.jsonUrl||null,o=r);const l=a?.data;if(Age(l))return t.styleUrl=n||null,dlt(t,l,o,s);if(ult(l))return t.sourceUrl?bQ(t,l,o,!1,e,s):(t.sourceUrl=n||null,UP(l)&&t.style==null&&(e="tilejson"),bQ(t,l,o,!0,e,s));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function UP(t){return typeof t=="object"&&!!t&&"tilejson"in t&&t.tilejson!=null}function Age(t){return!!t&&"sources"in t&&!!t.sources}function ult(t){return!Age(t)}async function dlt(t,e,i,r){const s=i?DA(i):vie();t.styleBase=s,t.style=e,e["sprite-format"]&&e["sprite-format"].toLowerCase()==="webp"&&(t.spriteFormat="webp");const n=[];if(e.sources&&e.sources.esri){const o=e.sources.esri;o.url?await sf(t,"esri",Cy(s,o.url),void 0,r):n.push(sf(t,"esri",o,s,r))}for(const o of Object.keys(e.sources))o!=="esri"&&o!=="tilejson"&&e.sources[o].type==="vector"&&(e.sources[o].url?n.push(sf(t,o,Cy(s,e.sources[o].url),void 0,r)):e.sources[o].tiles&&n.push(sf(t,o,e.sources[o],s,r)));await Promise.all(n)}async function bQ(t,e,i,r,s,n){const o=i?FA(i)+"/":vie(),a=hlt(e,t),l=new llt(s,Io(o,n?.query??{}),a);if(!r&&t.primarySourceName in t.sourceNameToSource){const c=t.sourceNameToSource[t.primarySourceName];if(!c.isCompatibleWith(l))return;l.fullExtent!=null&&(c.fullExtent!=null?c.fullExtent.union(l.fullExtent):c.fullExtent=l.fullExtent.clone()),c.tileInfo&&l.tileInfo&&c.tileInfo.lods.length<l.tileInfo.lods.length&&(c.tileInfo=l.tileInfo)}if(r&&(t.sourceBase=o,t.source=e,t.validatedSource=a,t.primarySourceName=s),t.sourceNameToSource[s]=l,!UP(t)&&"defaultStyles"in e&&!t.style){if(e.defaultStyles==null)throw new Error;return typeof e.defaultStyles=="string"?sf(t,"",Cy(o,e.defaultStyles,"root.json"),void 0,n):sf(t,"",e.defaultStyles,Cy(o,"root.json"),n)}if(UP(e)&&t.style==null&&a.defaultStyles)return sf(t,"",a.defaultStyles,Cy(o,"root.json"),n)}function hlt(t,e){if(plt(t)){const f=t?.tileInfo;return f!=null&&(f.rows==null&&(f.rows=512),f.cols==null&&(f.cols=512)),t}const r={xmin:-20037507067161843e-9,ymin:-20037507067161843e-9,xmax:20037507067161843e-9,ymax:20037507067161843e-9,spatialReference:{wkid:102100,latestWkid:3857}};let s,n=null;if(UP(t)){const{bounds:f,vector_layers:m}=t;if(f){const y=$u({x:f[0],y:f[1],spatialReference:U(JM)}),v=$u({x:f[2],y:f[3],spatialReference:U(JM)});n={xmin:y.x,ymin:y.y,xmax:v.x,ymax:v.y,spatialReference:U(ZM)}}if(m&&m.length>0)s={version:8,sprite:"",glyphs:"",sources:{tilejson:{type:"vector",url:t.tilejson}},layers:flt(m)};else if(e.style==null)throw new Error("The TileJSON source does not contain any vector_layers. This VectorTileLayer cannot be loaded.")}n===null&&(n=r);let o=78271.51696400007,a=2958287637957775e-7;const l=[],c=t.hasOwnProperty("maxzoom")&&t.maxzoom!=null?Math.abs(+t.maxzoom):22,d=0,h=0;for(let f=0;f<=c;f++)l.push({level:f,scale:a,resolution:o}),o/=2,a/=2;return{capabilities:"TilesOnly",initialExtent:n,fullExtent:r,minScale:d,maxScale:h,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508342787e-6,y:20037508342787e-6},lods:l,spatialReference:U(ZM)},defaultStyles:s}}function plt(t){return t.hasOwnProperty("tileInfo")}function flt(t){const e=[];for(const i of t)i.geometry_type?e.push(nT(i.geometry_type.toLowerCase(),i,!1)):(e.push(nT("polygon",i,!0)),e.push(nT("line",i,!0)),e.push(nT("circle",i,!0)));return e}function nT(t,e,i){const{id:r,minzoom:s,maxzoom:n}=e,o={type:t==="polygon"||t==="polygons"?"fill":t==="line"||t==="lines"?"line":"circle",id:r,source:"tilejson","source-layer":r,minzoom:s,maxzoom:n};switch(t){case"fill":i&&(o.id+="_polygon",o.filter='(["==", "$type", "Polygon"])'),o.paint={"fill-color":"#808080"};break;case"line":i&&(o.id+="_line",o.filter='(["==", "$type", "LineString"])');break;case"circle":i&&(o.id+="_point",o.filter='(["==", "$type", "Point"])')}return o}const oT=1e-6;function mlt(t,e){if(t===e)return!0;if(t==null&&e!=null||t!=null&&e==null||t==null||e==null||!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const i=t.origin,r=e.origin;if(Math.abs(i.x-r.x)>=oT||Math.abs(i.y-r.y)>=oT)return!1;let s,n;t.lods[0].scale>e.lods[0].scale?(s=t,n=e):(n=t,s=e);for(let o=s.lods[0].scale;o>=n.lods[n.lods.length-1].scale-oT;o/=2)if(Math.abs(o-n.lods[0].scale)<oT)return!0;return!1}function ylt(t,e){if(t===e)return t;if(t==null&&e!=null)return e;if(t!=null&&e==null)return t;if(t==null||e==null)return null;const i=t.size[0],r=t.format,s=t.dpi,n=new Fe({x:t.origin.x,y:t.origin.y}),o=t.spatialReference,a=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],l=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],c=a.scale,d=a.resolution,h=l.scale,f=[];let m=c,y=d,v=0;for(;m>=h;)f.push(new yt({level:v,resolution:y,scale:m})),v++,m/=2,y/=2;return new Ti({size:[i,i],dpi:s,format:r||"pbf",origin:n,lods:f,spatialReference:o})}const nSt=512,oSt=4096,o_=8;let glt=class{constructor(e){this._array=[],this._stride=e}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(e,i){return 65535&e|i<<16}static i8888to32(e,i,r,s){return 255&e|(255&i)<<8|(255&r)<<16|s<<24}static i8816to32(e,i,r){return 255&e|(255&i)<<8|r<<16}};function vlt(t){let e=0;return new Map(t.map(({name:i,count:r})=>{const s=[i,e];return r===16?e+=4:r===9?e+=3:++e,s}))}function Lge(t){const e=new Map;let i=0;return t.forEach(r=>r.forEach(({name:s,count:n})=>{e.set(s,i),n===16?i+=4:n===9?i+=3:++i})),e}function lSt(t){return Lge(Array.from(t.values()).map(({layout:e})=>e))}let qs=class{constructor(e,i,r,s,n,o=!1,a=0){this.name=e,this.count=i,this.type=r,this.offset=s,this.stride=n,this.normalized=o,this.divisor=a}};const XS=class XS{constructor(e){this._key=e}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._geometryLayout||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return this._geometryLayout||this._buildAttributesInfo(),this._locations}get geometryLayout(){return this._geometryLayout||this._buildAttributesInfo(),this._geometryLayout}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(e,i,r,s,n){const o=this.getUniforms();for(const a of o){const{name:l,type:c,getValue:d}=a,h=d(r,i,s,n);if(h!==null)switch(c){case"float":e.setUniform1f(l,h);break;case"vec2":e.setUniform2fv(l,h);break;case"vec4":e.setUniform4fv(l,h)}}}encodeAttributes(e,i,r,s){const n=this.attributesInfo,o=this.getEncodingInfos(),a=[];let l=0,c=0;for(const d of Object.keys(o)){const h=o[d],{type:f,precisionFactor:m,isLayout:y}=n[d],v=y?r.getLayoutProperty(d):r.getPaintProperty(d),b=v.interpolator?.getInterpolationRange(i);let w=0;for(const x of h){const{offset:S,bufferElementsToAdd:$}=x;if($>0){for(let C=0;C<$;C++)a.push(0);l+=c,c=x.bufferElementsToAdd}const T=s??v.getValue(b?b[w]:i,e);switch(f){case 0:case 1:a[l]|=this._encodeByte(T*(m||1),8*S);break;case 2:case 3:a[l]|=this._encodeShort(T*(m||1),8*S);break;case 4:case 5:a[l]|=this._encodeByte(T*(m||1),8*S),a[l]|=this._encodeByte(T*(m||1),8*S+8);break;case 6:case 7:a[l]|=this._encodeShort(T*(m||1),8*S),a[l]|=this._encodeShort(T*(m||1),8*S+16);break;case 8:case 9:a[l]|=this._encodeByte(T*(m||1),8*S),a[l]|=this._encodeByte(T*(m||1),8*S+8),a[l]|=this._encodeByte(T*(m||1),8*S+16),a[l]|=this._encodeByte(T*(m||1),8*S+24);break;case 10:a[l]=this._encodeColor(T);break;case 11:case 12:this._encodePattern(l,a,T);break;default:throw new Error("Unsupported encoding type")}w++}}return a}getAtributeState(e){let i=0;const r=3+2*e;return i|=this._bit(r),i|=this._bit(r+1)<<1,i}_buildAttributesInfo(){const e=[],i={},{attributesInfo:r,attributes:s}=this,n={};let o=-1,a=-1;for(const l of s){a++;const c=this.getAtributeState(a);if(c===0||c===3)continue;const d=r[l],h=[];i[l]=h;const f=d.type;for(let m=0;m<c;m++){const{dataType:y,bytesPerElement:v,count:b,normalized:w}=XS._encodingInfo[f],x=v*b,S=`${y}-${w===!0}`;let $=n[S],T=0;if(!$||$.count+b>4)o++,$={dataIndex:o,count:0,offset:0},b!==4&&(n[S]=$),e.push({location:-1,name:"a_data_"+o,count:b,type:y,normalized:w}),T=Math.ceil(Math.max(x/4,1));else{const C=e[$.dataIndex];C.count+=b,T=Math.ceil(Math.max(C.count*v/4,1))-Math.ceil(Math.max($.offset/4,1))}h.push({dataIndex:$.dataIndex,offset:$.offset,bufferElementsToAdd:T}),$.offset+=x,$.count+=b}}for(const l of e)switch(l.type){case nt.BYTE:case nt.UNSIGNED_BYTE:l.count=4;break;case nt.SHORT:case nt.UNSIGNED_SHORT:l.count+=l.count%2}this._buildVertexBufferLayout(e),this._buildShaderInfo(e,i),this._propertyEncodingInfo=i}_buildVertexBufferLayout(e){const i=this.baseGeometryLayout;let r=i[0].stride;if(e.length===0)this._geometryLayout=i;else{const s=[];let n=r;for(const o of e)r+=wQ(o.type)*o.count;for(const o of i)s.push(new qs(o.name,o.count,o.type,o.offset,r,o.normalized));for(const o of e)s.push(new qs(o.name,o.count,o.type,n,r,o.normalized)),n+=wQ(o.type)*o.count;this._geometryLayout=s}this.opacityLayout?this._locations=Lge([this._geometryLayout,this.opacityLayout]):this._locations=vlt(this._geometryLayout),this._stride=r}_buildShaderInfo(e,i){let r=`
`,s=`
`;const n=[];for(const c of e)r+=`attribute ${this._getType(c.count)} ${c.name};
`;const{attributesInfo:o,attributes:a}=this;let l=-1;for(const c of a){l++;const{name:d,type:h,precisionFactor:f,isLayout:m}=o[c],y=f&&f!==1?" * "+1/f:"",{bytesPerElement:v,count:b}=XS._encodingInfo[h],w=x=>`a_data_${x.dataIndex}${blt(b,x.offset,v)}`;switch(this.getAtributeState(l)){case 0:{const x=this._getType(b),S=`u_${d}`;n.push({name:S,type:x,getValue:($,T,C,L)=>{const N=m?$.getLayoutValue(c,T):$.getPaintValue(c,T);if(h===11){const D=$.getDashKey(N,$.getLayoutValue("line-cap",T)),F=L.getMosaicItemPosition(D,!1);if(F==null)return null;const{tl:W,br:Z}=F;return[W[0],Z[1],Z[0],W[1]]}if(h===12){const D=L.getMosaicItemPosition(N,!c.includes("line-"));if(D==null)return null;const{tl:F,br:W}=D;return[F[0],W[1],W[0],F[1]]}if(h===10){const D=N[3];return[D*N[0],D*N[1],D*N[2],D]}return N}}),r+=`uniform ${x} ${S};
`,s+=`${x} ${d} = ${S};
`}break;case 1:{const x=w(i[c][0]);s+=`${this._getType(b)} ${d} = ${x}${y};
`}break;case 2:{const x=`u_t_${d}`;n.push({name:x,type:"float",getValue:(T,C,L,N)=>(m?T.getLayoutProperty(c):T.getPaintProperty(c)).interpolator.interpolationUniformValue(L,C)}),r+=`uniform float ${x};
`;const S=w(i[c][0]),$=w(i[c][1]);s+=`${this._getType(b)} ${d} = mix(${S}${y}, ${$}${y}, ${x});
`}}}this._shaderHeader=r,this._shaderMain=s,this._uniforms=n}_bit(e){return(this._key&1<<e)>>e}_getType(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(e){const i=255*e[3];return glt.i8888to32(e[0]*i,e[1]*i,e[2]*i,i)}_encodePattern(e,i,r){if(!r?.rect)return;const s=2,n=r.rect,o=r.width,a=r.height;i[e]=this._encodeShort(n.x+s,0),i[e]|=this._encodeShort(n.y+s+a,16),i[e+1]=this._encodeShort(n.x+s+o,0),i[e+1]|=this._encodeShort(n.y+s,16)}_encodeByte(e,i){return(255&e)<<i}_encodeShort(e,i){return(65535&e)<<i}};XS._encodingInfo={0:{dataType:nt.BYTE,bytesPerElement:1,count:1,normalized:!1},1:{dataType:nt.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},2:{dataType:nt.SHORT,bytesPerElement:2,count:1,normalized:!1},3:{dataType:nt.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},4:{dataType:nt.BYTE,bytesPerElement:1,count:2,normalized:!1},5:{dataType:nt.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},6:{dataType:nt.SHORT,bytesPerElement:2,count:2,normalized:!1},7:{dataType:nt.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},8:{dataType:nt.BYTE,bytesPerElement:1,count:4,normalized:!1},9:{dataType:nt.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},10:{dataType:nt.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},11:{dataType:nt.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},12:{dataType:nt.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};let Th=XS;const wQ=t=>{switch(t){case nt.FLOAT:case nt.INT:case nt.UNSIGNED_INT:return 4;case nt.SHORT:case nt.UNSIGNED_SHORT:case nt.HALF_FLOAT:return 2;case nt.BYTE:case nt.UNSIGNED_BYTE:return 1}},blt=(t,e,i)=>{const r=e/i;if(t===1)switch(r){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(t===2)switch(r){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(t===3)switch(r){case 0:return".xyz";case 1:return".yzw"}return""};var Ul;let AN=(Ul=class extends Th{constructor(e){super(e),this.baseGeometryLayout=Ul.GEOMETRY_LAYOUT,this.attributes=Ul.ATTRIBUTES,this.attributesInfo=Ul.ATTRIBUTES_INFO}},Ul.ATTRIBUTES=[],Ul.GEOMETRY_LAYOUT=[new qs("a_pos",2,nt.BYTE,0,2)],Ul.ATTRIBUTES_INFO={},Ul);var Bl;let LN=(Bl=class extends Th{constructor(e){super(e),this.baseGeometryLayout=Bl.GEOMETRY_LAYOUT,this.attributes=Bl.ATTRIBUTES,this.attributesInfo=Bl.ATTRIBUTES_INFO}},Bl.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],Bl.GEOMETRY_LAYOUT=[new qs("a_pos",2,nt.SHORT,0,4)],Bl.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:1},"circle-color":{name:"color",type:10},"circle-opacity":{name:"opacity",type:1,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:1,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:10},"circle-stroke-opacity":{name:"stroke_opacity",type:1,precisionFactor:100},"circle-blur":{name:"blur",type:1,precisionFactor:32}},Bl);var ql;let ON=(ql=class extends Th{constructor(e){super(e),this.baseGeometryLayout=ql.GEOMETRY_LAYOUT,this.attributes=ql.ATTRIBUTES,this.attributesInfo=ql.ATTRIBUTES_INFO}},ql.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],ql.GEOMETRY_LAYOUT=[new qs("a_pos",2,nt.SHORT,0,4)],ql.ATTRIBUTES_INFO={"fill-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100},"fill-pattern":{name:"tlbr",type:12,isOptional:!0}},ql);var Ln;let z1=(Ln=class extends Th{constructor(e,i){super(e),this.baseGeometryLayout=Ln.GEOMETRY_LAYOUT,this.attributes=i?Ln.ATTRIBUTES_FILL:Ln.ATTRIBUTES_OUTLINE,this.attributesInfo=i?Ln.ATTRIBUTES_INFO_FILL:Ln.ATTRIBUTES_INFO_OUTLINE}},Ln.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],Ln.ATTRIBUTES_FILL=["fill-color","fill-opacity"],Ln.GEOMETRY_LAYOUT=[new qs("a_pos",2,nt.SHORT,0,8),new qs("a_offset",2,nt.BYTE,4,8),new qs("a_xnormal",2,nt.BYTE,6,8)],Ln.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100}},Ln.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:10},"fill-opacity":{name:"opacity",type:1,precisionFactor:100}},Ln);var Gl;let RN=(Gl=class extends Th{constructor(e){super(e),this.baseGeometryLayout=Gl.GEOMETRY_LAYOUT,this.attributes=Gl.ATTRIBUTES,this.attributesInfo=Gl.ATTRIBUTES_INFO}},Gl.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],Gl.GEOMETRY_LAYOUT=[new qs("a_pos",2,nt.SHORT,0,16),new qs("a_extrude_offset",4,nt.BYTE,4,16),new qs("a_dir_normal",4,nt.BYTE,8,16),new qs("a_accumulatedDistance",2,nt.UNSIGNED_SHORT,12,16)],Gl.ATTRIBUTES_INFO={"line-width":{name:"width",type:1,precisionFactor:2},"line-gap-width":{name:"gap_width",type:1,precisionFactor:2},"line-offset":{name:"offset",type:0,precisionFactor:2},"line-color":{name:"color",type:10},"line-opacity":{name:"opacity",type:1,precisionFactor:100},"line-blur":{name:"blur",type:1,precisionFactor:4},"line-pattern":{name:"tlbr",type:12,isOptional:!0},"line-dasharray":{name:"tlbr",type:11,isOptional:!0}},Gl);const Oge=[new qs("a_pos",2,nt.SHORT,0,16),new qs("a_vertexOffset",2,nt.SHORT,4,16),new qs("a_texAngleRange",4,nt.UNSIGNED_BYTE,8,16),new qs("a_levelInfo",4,nt.UNSIGNED_BYTE,12,16)],Rge=[new qs("a_opacityInfo",1,nt.UNSIGNED_BYTE,0,1)];var sh;let NN=(sh=class extends Th{constructor(e){super(e),this.baseGeometryLayout=Oge,this.opacityLayout=Rge,this.attributes=sh.ATTRIBUTES,this.attributesInfo=sh.ATTRIBUTES_INFO}},sh.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],sh.ATTRIBUTES_INFO={"icon-color":{name:"color",type:10},"icon-opacity":{name:"opacity",type:1,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:10},"icon-halo-width":{name:"halo_width",type:1,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:1,precisionFactor:4},"icon-size":{name:"size",type:1,precisionFactor:32,isLayout:!0}},sh);var nh;let DN=(nh=class extends Th{constructor(e){super(e),this.baseGeometryLayout=Oge,this.opacityLayout=Rge,this.attributes=nh.ATTRIBUTES,this.attributesInfo=nh.ATTRIBUTES_INFO}},nh.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],nh.ATTRIBUTES_INFO={"text-color":{name:"color",type:10},"text-opacity":{name:"opacity",type:1,precisionFactor:100},"text-halo-color":{name:"halo_color",type:10},"text-halo-width":{name:"halo_width",type:1,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:1,precisionFactor:4},"text-size":{name:"size",type:1,isLayout:!0}},nh);const Nge={kind:"null"},cr={kind:"number"},ha={kind:"string"},Gs={kind:"boolean"},Eh={kind:"color"},_L={kind:"object"},mh={kind:"value"};function iI(t,e){return{kind:"array",itemType:t,n:e}}const wlt=[Nge,cr,ha,Gs,Eh,_L,iI(mh)];function a_(t){if(t.kind==="array"){const e=a_(t.itemType);return typeof t.n=="number"?`array<${e}, ${t.n}>`:t.itemType.kind==="value"?"array":`array<${e}>`}return t.kind}function xL(t){if(t===null)return Nge;if(typeof t=="string")return ha;if(typeof t=="boolean")return Gs;if(typeof t=="number")return cr;if(t instanceof ne)return Eh;if(Array.isArray(t)){let e;for(const i of t){const r=xL(i);if(e){if(e!==r){e=mh;break}}else e=r}return iI(e||mh,t.length)}return typeof t=="object"?_L:mh}function $V(t,e){if(e.kind==="array")return t.kind==="array"&&(t.n===0&&t.itemType.kind==="value"||$V(t.itemType,e.itemType))&&(typeof e.n!="number"||e.n===t.n);if(e.kind==="value"){for(const i of wlt)if($V(t,i))return!0}return e.kind===t.kind}function IV(t){if(t===null)return"";const e=typeof t;return e==="string"?t:e==="number"||e==="boolean"?String(t):t instanceof ne?t.toString():JSON.stringify(t)}class _lt{constructor(e){this._parent=e,this._vars={}}add(e,i){this._vars[e]=i}get(e){return this._vars[e]?this._vars[e]:this._parent?this._parent.get(e):null}}let xlt=class Dge{constructor(){this.type=mh}static parse(e){if(e.length>1)throw new Error('"id" does not expect arguments');return new Dge}evaluate(e,i){return e?.id}},Slt=class Fge{constructor(){this.type=ha}static parse(e){if(e.length>1)throw new Error('"geometry-type" does not expect arguments');return new Fge}evaluate(e,i){if(!e)return null;switch(e.type){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";default:return null}}};class b7{constructor(){this.type=_L}static parse(e){if(e.length>1)throw new Error('"properties" does not expect arguments');return new b7}evaluate(e,i){return e?.values}}let zge=class jge{constructor(){this.type=cr}static parse(e){if(e.length>1)throw new Error('"zoom" does not expect arguments');return new jge}evaluate(e,i){return i}},Xa=class Vge{constructor(e,i,r){this._lhs=e,this._rhs=i,this._compare=r,this.type=Gs}static parse(e,i,r){if(e.length!==3&&e.length!==4)throw new Error(`"${e[0]}" expects 2 or 3 arguments`);if(e.length===4)throw new Error(`"${e[0]}" collator not supported`);return new Vge(Xe(e[1],i),Xe(e[2],i),r)}evaluate(e,i){return this._compare(this._lhs.evaluate(e,i),this._rhs.evaluate(e,i))}};class $lt extends Xa{static parse(e,i){return Xa.parse(e,i,(r,s)=>r===s)}}class Ilt extends Xa{static parse(e,i){return Xa.parse(e,i,(r,s)=>r!==s)}}class klt extends Xa{static parse(e,i){return Xa.parse(e,i,(r,s)=>r<s)}}class Tlt extends Xa{static parse(e,i){return Xa.parse(e,i,(r,s)=>r<=s)}}let Elt=class extends Xa{static parse(e,i){return Xa.parse(e,i,(r,s)=>r>s)}};class Mlt extends Xa{static parse(e,i){return Xa.parse(e,i,(r,s)=>r>=s)}}class w7{constructor(e){this._arg=e,this.type=Gs}static parse(e,i){if(e.length!==2)throw new Error('"!" expects 1 argument');return new w7(Xe(e[1],i))}evaluate(e,i){return!this._arg.evaluate(e,i)}}class _7{constructor(e){this._args=e,this.type=Gs}static parse(e,i){const r=[];for(let s=1;s<e.length;s++)r.push(Xe(e[s],i));return new _7(r)}evaluate(e,i){for(const r of this._args)if(!r.evaluate(e,i))return!1;return!0}}class x7{constructor(e){this._args=e,this.type=Gs}static parse(e,i){const r=[];for(let s=1;s<e.length;s++)r.push(Xe(e[s],i));return new x7(r)}evaluate(e,i){for(const r of this._args)if(r.evaluate(e,i))return!0;return!1}}class S7{constructor(e){this._args=e,this.type=Gs}static parse(e,i){const r=[];for(let s=1;s<e.length;s++)r.push(Xe(e[s],i));return new S7(r)}evaluate(e,i){for(const r of this._args)if(r.evaluate(e,i))return!1;return!0}}let Clt=class Uge{constructor(e,i,r){this.type=e,this._args=i,this._fallback=r}static parse(e,i,r){if(e.length<4)throw new Error('"case" expects at least 3 arguments');if(e.length%2==1)throw new Error('"case" expects an odd number of arguments');let s;const n=[];for(let a=1;a<e.length-1;a+=2){const l=Xe(e[a],i),c=Xe(e[a+1],i,r);s||(s=c.type),n.push({condition:l,output:c})}const o=Xe(e[e.length-1],i,r);return s||(s=o.type),new Uge(s,n,o)}evaluate(e,i){for(const r of this._args)if(r.condition.evaluate(e,i))return r.output.evaluate(e,i);return this._fallback.evaluate(e,i)}};class $7{constructor(e,i){this.type=e,this._args=i}static parse(e,i){if(e.length<2)throw new Error('"coalesce" expects at least 1 argument');let r;const s=[];for(let n=1;n<e.length;n++){const o=Xe(e[n],i);r||(r=o.type),s.push(o)}return new $7(r,s)}evaluate(e,i){for(const r of this._args){const s=r.evaluate(e,i);if(s!==null)return s}return null}}let Plt=class Bge{constructor(e,i,r,s,n){this.type=e,this._input=i,this._labels=r,this._outputs=s,this._fallback=n}static parse(e,i){if(e.length<3)throw new Error('"match" expects at least 3 arguments');if(e.length%2==0)throw new Error('"case" expects an even number of arguments');let r;const s=Xe(e[1],i),n=[],o={};let a;for(let l=2;l<e.length-1;l+=2){let c=e[l];Array.isArray(c)||(c=[c]);for(const h of c){const f=typeof h;if(f!=="string"&&f!=="number")throw new Error('"match" requires string or number literal as labels');if(a){if(f!==a)throw new Error('"match" requires labels to have the same type')}else a=f;o[h]=n.length}const d=Xe(e[l+1],i);r||(r=d.type),n.push(d)}return new Bge(r,s,o,n,Xe(e[e.length-1],i))}evaluate(e,i){const r=this._input.evaluate(e,i);return(this._outputs[this._labels[r]]||this._fallback).evaluate(e,i)}};class Vl{constructor(e,i,r,s,n){this._operator=e,this.type=i,this.interpolation=r,this.input=s,this._stops=n}static parse(e,i,r){const s=e[0];if(e.length<5)throw new Error(`"${s}" expects at least 4 arguments`);const n=e[1];if(!Array.isArray(n)||n.length===0)throw new Error(`"${n}" is not a valid interpolation`);switch(n[0]){case"linear":if(n.length!==1)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(n.length!==2||typeof n[1]!="number")throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(n.length!==5)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let c=1;c<5;c++){const d=n[c];if(typeof d!="number"||d<0||d>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${e[0]}" unknown interpolation type "${n[0]}"`)}if(e.length%2!=1)throw new Error(`"${s}" expects an even number of arguments`);const o=Xe(e[2],i,cr);let a;s==="interpolate-hcl"||s==="interpolate-lab"?a=Eh:r&&r.kind!=="value"&&(a=r);const l=[];for(let c=3;c<e.length;c+=2){const d=e[c];if(typeof d!="number")throw new Error(`"${s}" requires stop inputs as literal numbers`);if(l.length&&l[l.length-1][0]>=d)throw new Error(`"${s}" requires strictly ascending stop inputs`);const h=Xe(e[c+1],i,a);a||(a=h.type),l.push([d,h])}if(a&&a!==Eh&&a!==cr&&(a.kind!=="array"||a.itemType!==cr))throw new Error(`"${s}" cannot interpolate type ${a_(a)}`);return new Vl(s,a,n,o,l)}evaluate(e,i){const r=this._stops;if(r.length===1)return r[0][1].evaluate(e,i);const s=this.input.evaluate(e,i);if(s<=r[0][0])return r[0][1].evaluate(e,i);if(s>=r[r.length-1][0])return r[r.length-1][1].evaluate(e,i);let n=0;for(;++n<r.length&&!(s<r[n][0]););const o=r[n-1][0],a=r[n][0],l=Vl.interpolationRatio(this.interpolation,s,o,a),c=r[n-1][1].evaluate(e,i),d=r[n][1].evaluate(e,i);if(this._operator==="interpolate"){if(this.type.kind==="array"&&Array.isArray(c)&&Array.isArray(d))return c.map((h,f)=>Mn(h,d[f],l));if(this.type.kind==="color"&&c instanceof ne&&d instanceof ne){const h=new ne(c),f=new ne(d);return new ne([Mn(h.r,f.r,l),Mn(h.g,f.g,l),Mn(h.b,f.b,l),Mn(h.a,f.a,l)])}if(this.type.kind==="number"&&typeof c=="number"&&typeof d=="number")return Mn(c,d,l);throw new Error(`"${this._operator}" cannot interpolate type ${a_(this.type)}`)}if(this._operator==="interpolate-hcl"){const h=KZ(c),f=KZ(d),m=f.h-h.h,y=xh({h:h.h+l*(m>180||m<-180?m-360*Math.round(m/360):m),c:Mn(h.c,f.c,l),l:Mn(h.l,f.l,l)});return new ne({a:Mn(c.a,d.a,l),...y})}if(this._operator==="interpolate-lab"){const h=cj(c),f=cj(d),m=xh({l:Mn(h.l,f.l,l),a:Mn(h.a,f.a,l),b:Mn(h.b,f.b,l)});return new ne({a:Mn(c.a,d.a,l),...m})}throw new Error(`Unexpected operator "${this._operator}"`)}interpolationUniformValue(e,i){const r=this._stops;if(r.length===1||e>=r[r.length-1][0])return 0;let s=0;for(;++s<r.length&&!(e<r[s][0]););const n=r[s-1][0],o=r[s][0];return Vl.interpolationRatio(this.interpolation,i,n,o)}getInterpolationRange(e){const i=this._stops;if(i.length===1){const n=i[0][0];return[n,n]}const r=i[i.length-1][0];if(e>=r)return[r,r];let s=0;for(;++s<i.length&&!(e<i[s][0]););return[i[s-1][0],i[s][0]]}static interpolationRatio(e,i,r,s){let n=0;return e[0]==="linear"?n=Vl._exponentialInterpolationRatio(i,1,r,s):e[0]==="exponential"?n=Vl._exponentialInterpolationRatio(i,e[1],r,s):e[0]==="cubic-bezier"&&(n=eb(e[1],e[2],e[3],e[4])(Vl._exponentialInterpolationRatio(i,1,r,s),1e-5)),n<0?n=0:n>1&&(n=1),n}static _exponentialInterpolationRatio(e,i,r,s){const n=s-r;if(n===0)return 0;const o=e-r;return i===1?o/n:(i**o-1)/(i**n-1)}}let Alt=class qge{constructor(e,i,r){this.type=e,this._input=i,this._stops=r}static parse(e,i){if(e.length<5)throw new Error('"step" expects at least 4 arguments');if(e.length%2!=1)throw new Error('"step" expects an even number of arguments');const r=Xe(e[1],i,cr);let s;const n=[];n.push([-1/0,Xe(e[2],i)]);for(let o=3;o<e.length;o+=2){const a=e[o];if(typeof a!="number")throw new Error('"step" requires stop inputs as literal numbers');if(n.length&&n[n.length-1][0]>=a)throw new Error('"step" requires strictly ascending stop inputs');const l=Xe(e[o+1],i);s||(s=l.type),n.push([a,l])}return new qge(s,r,n)}evaluate(e,i){const r=this._stops;if(r.length===1)return r[0][1].evaluate(e,i);const s=this._input.evaluate(e,i);let n=0;for(;++n<r.length&&!(s<r[n][0]););return this._stops[n-1][1].evaluate(e,i)}};class I7{constructor(e,i){this.type=e,this._output=i}static parse(e,i,r){if(e.length<4)throw new Error('"let" expects at least 3 arguments');if(e.length%2==1)throw new Error('"let" expects an odd number of arguments');const s=new _lt(i);for(let o=1;o<e.length-1;o+=2){const a=e[o];if(typeof a!="string")throw new Error(`"let" requires a string to define variable names - found ${a}`);s.add(a,Xe(e[o+1],i))}const n=Xe(e[e.length-1],s,r);return new I7(n.type,n)}evaluate(e,i){return this._output.evaluate(e,i)}}class k7{constructor(e,i){this.type=e,this.output=i}static parse(e,i,r){if(e.length!==2||typeof e[1]!="string")throw new Error('"var" requires just one literal string argument');const s=i.get(e[1]);if(!s)throw new Error(`${e[1]} must be defined before being used in a "var" expression`);return new k7(r||mh,s)}evaluate(e,i){return this.output.evaluate(e,i)}}class T7{constructor(e,i,r){this.type=e,this._index=i,this._array=r}static parse(e,i){if(e.length!==3)throw new Error('"at" expects 2 arguments');const r=Xe(e[1],i,cr),s=Xe(e[2],i);return new T7(s.type.itemType,r,s)}evaluate(e,i){const r=this._index.evaluate(e,i),s=this._array.evaluate(e,i);if(r<0||r>=s.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return s[r]}}let Llt=class kV{constructor(e,i){this._key=e,this._obj=i,this.type=mh}static parse(e,i){let r,s;switch(e.length){case 2:return r=Xe(e[1],i),new kV(r);case 3:return r=Xe(e[1],i),s=Xe(e[2],i),new kV(r,s);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(e,i){const r=this._key.evaluate(e,i);return this._obj?this._obj.evaluate(e,i)[r]:e?.values[r]}};class BP{constructor(e,i){this._key=e,this._obj=i,this.type=Gs}static parse(e,i){let r,s;switch(e.length){case 2:return r=Xe(e[1],i),new BP(r);case 3:return r=Xe(e[1],i),s=Xe(e[2],i),new BP(r,s);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(e,i){const r=this._key.evaluate(e,i);return this._obj?r in this._obj.evaluate(e,i):!!e?.values[r]}}class E7{constructor(e,i){this._key=e,this._vals=i,this.type=Gs}static parse(e,i){if(e.length!==3)throw new Error('"in" expects 2 arguments');return new E7(Xe(e[1],i),Xe(e[2],i))}evaluate(e,i){const r=this._key.evaluate(e,i);return this._vals.evaluate(e,i).includes(r)}}let Olt=class TV{constructor(e,i,r){this._item=e,this._array=i,this._from=r,this.type=cr}static parse(e,i){if(e.length<3||e.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const r=Xe(e[1],i),s=Xe(e[2],i);if(e.length===4){const n=Xe(e[3],i,cr);return new TV(r,s,n)}return new TV(r,s)}evaluate(e,i){const r=this._item.evaluate(e,i),s=this._array.evaluate(e,i);if(this._from){const n=this._from.evaluate(e,i);if(n!==Math.floor(n))throw new Error('"index-of" index must be an integer');return s.indexOf(r,n)}return s.indexOf(r)}},Rlt=class Gge{constructor(e){this._arg=e,this.type=cr}static parse(e,i){if(e.length!==2)throw new Error('"length" expects 2 arguments');const r=Xe(e[1],i);return new Gge(r)}evaluate(e,i){const r=this._arg.evaluate(e,i);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}};class qP{constructor(e,i,r,s){this.type=e,this._array=i,this._from=r,this._to=s}static parse(e,i){if(e.length<3||e.length>4)throw new Error('"slice" expects 2 or 3 arguments');const r=Xe(e[1],i),s=Xe(e[2],i,cr);if(s.type!==cr)throw new Error('"slice" index must return a number');if(e.length===4){const n=Xe(e[3],i,cr);if(n.type!==cr)throw new Error('"slice" index must return a number');return new qP(r.type,r,s,n)}return new qP(r.type,r,s)}evaluate(e,i){const r=this._array.evaluate(e,i);if(!Array.isArray(r)&&typeof r!="string")throw new Error('"slice" input must be an array or a string');const s=this._from.evaluate(e,i);if(s<0||s>=r.length)throw new Error('"slice" index out of bounds');if(s!==Math.floor(s))throw new Error('"slice" index must be an integer');if(this._to){const n=this._to.evaluate(e,i);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');return r.slice(s,n)}return r.slice(s)}}class M7{constructor(){this.type=Gs}static parse(e){if(e.length!==1)throw new Error('"has-id" expects no arguments');return new M7}evaluate(e,i){return e?.id!==void 0}}class Jn{constructor(e,i){this._args=e,this._calculate=i,this.type=cr}static parse(e,i,r){const s=e.slice(1).map(n=>Xe(n,i));return new Jn(s,r)}evaluate(e,i){let r;return this._args&&(r=this._args.map(s=>s.evaluate(e,i))),this._calculate(r)}}class Nlt extends Jn{static parse(e,i){switch(e.length){case 2:return Jn.parse(e,i,r=>-r[0]);case 3:return Jn.parse(e,i,r=>r[0]-r[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}}class Dlt extends Jn{static parse(e,i){return Jn.parse(e,i,r=>{let s=1;for(const n of r)s*=n;return s})}}class Flt extends Jn{static parse(e,i){if(e.length===3)return Jn.parse(e,i,r=>r[0]/r[1]);throw new Error('"/" expects 2 arguments')}}class zlt extends Jn{static parse(e,i){if(e.length===3)return Jn.parse(e,i,r=>r[0]%r[1]);throw new Error('"%" expects 2 arguments')}}class jlt extends Jn{static parse(e,i){if(e.length===3)return Jn.parse(e,i,r=>r[0]**r[1]);throw new Error('"^" expects 1 or 2 arguments')}}class Vlt extends Jn{static parse(e,i){return Jn.parse(e,i,r=>{let s=0;for(const n of r)s+=n;return s})}}const QS=class QS{constructor(e,i){this._args=e,this._calculate=i,this.type=cr}static parse(e,i){const r=e.slice(1).map(s=>Xe(s,i));return new QS(r,QS.ops[e[0]])}evaluate(e,i){let r;return this._args&&(r=this._args.map(s=>s.evaluate(e,i))),this._calculate(r)}};QS.ops={abs:e=>Math.abs(e[0]),acos:e=>Math.acos(e[0]),asin:e=>Math.asin(e[0]),atan:e=>Math.atan(e[0]),ceil:e=>Math.ceil(e[0]),cos:e=>Math.cos(e[0]),e:()=>Math.E,floor:e=>Math.floor(e[0]),ln:e=>Math.log(e[0]),ln2:()=>Math.LN2,log10:e=>Math.log(e[0])/Math.LN10,log2:e=>Math.log(e[0])/Math.LN2,max:e=>Math.max(...e),min:e=>Math.min(...e),pi:()=>Math.PI,round:e=>Math.round(e[0]),sin:e=>Math.sin(e[0]),sqrt:e=>Math.sqrt(e[0]),tan:e=>Math.tan(e[0])};let Or=QS;class C7{constructor(e){this._args=e,this.type=ha}static parse(e,i){return new C7(e.slice(1).map(r=>Xe(r,i)))}evaluate(e,i){return this._args.map(r=>r.evaluate(e,i)).join("")}}const e$=class e${constructor(e,i){this._arg=e,this._calculate=i,this.type=ha}static parse(e,i){if(e.length!==2)throw new Error(`${e[0]} expects 1 argument`);const r=Xe(e[1],i);return new e$(r,e$.ops[e[0]])}evaluate(e,i){return this._calculate(this._arg.evaluate(e,i))}};e$.ops={downcase:e=>e.toLowerCase(),upcase:e=>e.toUpperCase()};let GP=e$;class P7{constructor(e){this._args=e,this.type=Eh}static parse(e,i){if(e.length!==4)throw new Error('"rgb" expects 3 arguments');const r=e.slice(1).map(s=>Xe(s,i));return new P7(r)}evaluate(e,i){const r=this._validate(this._args[0].evaluate(e,i)),s=this._validate(this._args[1].evaluate(e,i)),n=this._validate(this._args[2].evaluate(e,i));return new ne({r,g:s,b:n})}_validate(e){if(typeof e!="number"||e<0||e>255)throw new Error(`${e}: invalid color component`);return Math.round(e)}}class A7{constructor(e){this._args=e,this.type=Eh}static parse(e,i){if(e.length!==5)throw new Error('"rgba" expects 4 arguments');const r=e.slice(1).map(s=>Xe(s,i));return new A7(r)}evaluate(e,i){const r=this._validate(this._args[0].evaluate(e,i)),s=this._validate(this._args[1].evaluate(e,i)),n=this._validate(this._args[2].evaluate(e,i)),o=this._validateAlpha(this._args[3].evaluate(e,i));return new ne({r,g:s,b:n,a:o})}_validate(e){if(typeof e!="number"||e<0||e>255)throw new Error(`${e}: invalid color component`);return Math.round(e)}_validateAlpha(e){if(typeof e!="number"||e<0||e>1)throw new Error(`${e}: invalid alpha color component`);return e}}class L7{constructor(e){this._color=e,this.type=iI(cr,4)}static parse(e,i){if(e.length!==2)throw new Error('"to-rgba" expects 1 argument');const r=Xe(e[1],i);return new L7(r)}evaluate(e,i){return new ne(this._color.evaluate(e,i)).toRgba()}}class ry{constructor(e,i){this.type=e,this._args=i}static parse(e,i){const r=e[0];if(e.length<2)throw new Error(`${r} expects at least one argument`);let s,n=1;if(r==="array"){if(e.length>2){switch(e[1]){case"string":s=ha;break;case"number":s=cr;break;case"boolean":s=Gs;break;default:throw new Error('"array" type argument must be string, number or boolean')}n++}else s=mh;let a;if(e.length>3){if(a=e[2],a!==null&&(typeof a!="number"||a<0||a!==Math.floor(a)))throw new Error('"array" length argument must be a positive integer literal');n++}s=iI(s,a)}else switch(r){case"string":s=ha;break;case"number":s=cr;break;case"boolean":s=Gs;break;case"object":s=_L}const o=[];for(;n<e.length;n++){const a=Xe(e[n],i);o.push(a)}return new ry(s,o)}evaluate(e,i){let r;for(const s of this._args){const n=s.evaluate(e,i);if(r=xL(n),$V(r,this.type))return n}throw new Error(`Expected ${a_(this.type)} but got ${a_(r)}`)}}const l0=class l0{constructor(e,i){this.type=e,this._args=i}static parse(e,i){const r=e[0],s=l0.types[r];if(s===Gs||s===ha){if(e.length!==2)throw new Error(`${r} expects one argument`)}else if(e.length<2)throw new Error(`${r} expects at least one argument`);const n=[];for(let o=1;o<e.length;o++){const a=Xe(e[o],i);n.push(a)}return new l0(s,n)}evaluate(e,i){if(this.type===Gs)return!!this._args[0].evaluate(e,i);if(this.type===ha)return IV(this._args[0].evaluate(e,i));if(this.type===cr){for(const r of this._args){const s=Number(r.evaluate(e,i));if(!isNaN(s))return s}return null}if(this.type===Eh){for(const r of this._args)try{const s=l0.toColor(r.evaluate(e,i));if(s instanceof ne)return s}catch{}return null}}static toBoolean(e){return!!e}static toString(e){return IV(e)}static toNumber(e){const i=Number(e);if(isNaN(i))throw new Error(`"${e}" is not a number`);return i}static toColor(e){if(e instanceof ne)return e;if(typeof e=="string"){const i=ne.fromString(e);if(i)return i;throw new Error(`"${e}" is not a color`)}if(Array.isArray(e))return ne.fromArray(e);throw new Error(`"${e}" is not a color`)}};l0.types={"to-boolean":Gs,"to-color":Eh,"to-number":cr,"to-string":ha};let rh=l0;class O7{constructor(e){this._val=e,this.type=xL(e)}static parse(e){if(e.length!==2)throw new Error('"literal" expects 1 argument');return new O7(e[1])}evaluate(e,i){return this._val}}class R7{constructor(e){this._arg=e,this.type=ha}static parse(e,i){if(e.length!==2)throw new Error('"typeof" expects 1 argument');return new R7(Xe(e[1],i))}evaluate(e,i){return a_(xL(this._arg.evaluate(e,i)))}}function Xe(t,e,i){const r=typeof t;if(r==="string"||r==="boolean"||r==="number"||t===null){if(i)switch(i.kind){case"string":r!=="string"&&(t=rh.toString(t));break;case"number":r!=="number"&&(t=rh.toNumber(t));break;case"color":t=rh.toColor(t)}t=["literal",t]}if(!Array.isArray(t)||t.length===0)throw new Error("Expression must be a non empty array");const s=t[0];if(typeof s!="string")throw new Error("First element of expression must be a string");const n=Hge[s];if(n===void 0)throw new Error(`Invalid expression operator "${s}"`);if(!n)throw new Error(`Unimplemented expression operator "${s}"`);return n.parse(t,e,i)}const Hge={array:ry,boolean:ry,collator:null,format:null,image:null,literal:O7,number:ry,"number-format":null,object:ry,string:ry,"to-boolean":rh,"to-color":rh,"to-number":rh,"to-string":rh,typeof:R7,accumulated:null,"feature-state":null,"geometry-type":Slt,id:xlt,"line-progress":null,properties:b7,at:T7,get:Llt,has:BP,in:E7,"index-of":Olt,length:Rlt,slice:qP,"!":w7,"!=":Ilt,"<":klt,"<=":Tlt,"==":$lt,">":Elt,">=":Mlt,all:_7,any:x7,case:Clt,coalesce:$7,match:Plt,within:null,interpolate:Vl,"interpolate-hcl":Vl,"interpolate-lab":Vl,step:Alt,let:I7,var:k7,concat:C7,downcase:GP,"is-supported-script":null,"resolved-locale":null,upcase:GP,rgb:P7,rgba:A7,"to-rgba":L7,"-":Nlt,"*":Dlt,"/":Flt,"%":zlt,"^":jlt,"+":Vlt,abs:Or,acos:Or,asin:Or,atan:Or,ceil:Or,cos:Or,e:Or,floor:Or,ln:Or,ln2:Or,log10:Or,log2:Or,max:Or,min:Or,pi:Or,round:Or,sin:Or,sqrt:Or,tan:Or,zoom:zge,"heatmap-density":null,"has-id":M7,none:S7};class co{constructor(e){this._expression=e}filter(e,i){if(!this._expression)return!0;try{return this._expression.evaluate(e,i)}catch(r){return console.log(r.message),!0}}static createFilter(e){if(!e)return null;this.isLegacyFilter(e)&&(e=this.convertLegacyFilter(e));try{const i=Xe(e,null,Gs);return new co(i)}catch(i){return console.log(i.message),null}}static isLegacyFilter(e){if(!Array.isArray(e)||e.length===0)return!0;switch(e[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return e.length===3&&typeof e[1]=="string"&&!Array.isArray(e[2]);case"in":return e.length>=3&&typeof e[1]=="string"&&!Array.isArray(e[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let i=1;i<e.length;i++)if(this.isLegacyFilter(e[i]))return!0;return!1;case"has":return e.length===2&&(e[1]==="$id"||e[1]==="$type");default:return!1}}static convertLegacyFilter(e){if(!Array.isArray(e)||e.length===0)return!0;const i=e[0];if(e.length===1)return i!=="any";switch(i){case"==":return co.convertComparison("==",e[1],e[2]);case"!=":return co.negate(co.convertComparison("==",e[1],e[2]));case">":case"<":case">=":case"<=":return co.convertComparison(i,e[1],e[2]);case"in":return co.convertIn(e[1],e.slice(2));case"!in":return co.negate(co.convertIn(e[1],e.slice(2)));case"any":case"all":case"none":return co.convertCombining(i,e.slice(1));case"has":return co.convertHas(e[1]);case"!has":return co.negate(co.convertHas(e[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(e,i,r){switch(i){case"$type":return[e,["geometry-type"],r];case"$id":return[e,["id"],r];default:return[e,["get",i],r]}}static convertIn(e,i){switch(e){case"$type":return["in",["geometry-type"],["literal",i]];case"$id":return["in",["id"],["literal",i]];default:return["in",["get",e],["literal",i]]}}static convertHas(e){switch(e){case"$type":return!0;case"$id":return["has-id"];default:return["has",e]}}static convertCombining(e,i){return[e].concat(i.map(this.convertLegacyFilter))}static negate(e){return["!",e]}}const Xo=class Xo{};Xo.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Xo.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Xo.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"line-cap":{type:"enum",values:["butt","round","square"],default:0},"line-join":{type:"enum",values:["bevel","round","miter"],default:2},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},Xo.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:0},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:0},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:2},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:2},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:0},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[0]}},Xo.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:0}},Xo.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},Xo.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},Xo.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"line-width":{type:"number",minimum:0,default:1}},Xo.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:0},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:0}},Xo.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},Xo.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:0}};let Ra=Xo;class HP{constructor(e,i){let r;switch(this.isDataDriven=!1,this.interpolator=null,e.type){case"number":case"color":r=!0;break;case"array":r=e.value==="number";break;default:r=!1}if((i==null||i===""&&e.type==="color")&&(i=e.default),Array.isArray(i)&&i.length>0&&Hge[i[0]]){const n={number:cr,color:Eh,string:ha,boolean:Gs,enum:ha};try{const o=e.type==="array"?iI(n[e.value]||mh,e.length):n[e.type],a=Xe(i,null,o);this.getValue=this._buildExpression(a,e),this.isDataDriven=!0,a instanceof Vl&&a.input instanceof zge&&(this.interpolator=a)}catch(o){console.log(o.message),this.getValue=this._buildSimple(e.default)}return}r&&i.type==="interval"&&(r=!1);const s=i?.stops&&i.stops.length>0;if(s)for(const n of i.stops)n[1]=this._validate(n[1],e);if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(i.default!==void 0&&(i.default=this._validate(i.default,e)),s)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,e);break;case"categorical":this.getValue=this._buildCategorical(i,e);break;default:this.getValue=r?this._buildInterpolate(i,e):this._buildInterval(i,e)}else this.getValue=this._buildIdentity(i,e);else s?this.getValue=r?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,e),this.getValue=this._buildSimple(i))}_validate(e,i){if(i.type==="number"){if(i.minimum!=null&&e<i.minimum)return i.minimum;if(i.maximum!=null&&e>i.maximum)return i.maximum}else i.type==="color"?e=HP._parseColor(e):i.type==="enum"?typeof e=="string"&&(e=i.values.indexOf(e)):i.type==="array"&&i.value==="enum"?e=e.map(r=>typeof r=="string"?i.values.indexOf(r):r):i.type==="string"&&(e=IV(e));return e}_buildSimple(e){return()=>e}_buildExpression(e,i){return(r,s)=>{try{const n=e.evaluate(s,r);return n===void 0?i.default:this._validate(n,i)}catch(n){return console.log(n.message),i.default}}}_buildIdentity(e,i){return(r,s)=>{let n;return s&&(n=s.values[e.property]),n!==void 0&&(n=this._validate(n,i)),n??(e.default!==void 0?e.default:i.default)}}_buildCategorical(e,i){return(r,s)=>{let n;return s&&(n=s.values[e.property]),n=this._categorical(n,e.stops),n!==void 0?n:e.default!==void 0?e.default:i.default}}_buildInterval(e,i){return(r,s)=>{let n;return s&&(n=s.values[e.property]),typeof n=="number"?this._interval(n,e.stops):e.default!==void 0?e.default:i.default}}_buildInterpolate(e,i){return(r,s)=>{let n;return s&&(n=s.values[e.property]),typeof n=="number"?this._interpolate(n,e.stops,e.base||1):e.default!==void 0?e.default:i.default}}_buildZoomInterpolate(e){return i=>this._interpolate(i,e.stops,e.base||1)}_buildZoomInterval(e){return i=>this._interval(i,e.stops)}_categorical(e,i){const r=i.length;for(let s=0;s<r;s++)if(i[s][0]===e)return i[s][1]}_interval(e,i){const r=i.length;let s=0;for(let n=0;n<r&&i[n][0]<=e;n++)s=n;return i[s][1]}_interpolate(e,i,r){let s,n;const o=i.length;for(let a=0;a<o;a++){const l=i[a];if(!(l[0]<=e)){n=l;break}s=l}if(s&&n){const a=n[0]-s[0],l=e-s[0],c=r===1?l/a:(r**l-1)/(r**a-1);if(Array.isArray(s[1])){const d=s[1],h=n[1],f=[];for(let m=0;m<d.length;m++)f.push(Mn(d[m],h[m],c));return f}return Mn(s[1],n[1],c)}return s?s[1]:n?n[1]:void 0}static _isEmpty(e){for(const i in e)if(e.hasOwnProperty(i))return!1;return!0}static _parseColor(e){return Array.isArray(e)?e:typeof e=="string"?uAe(e)??void 0:e instanceof ne&&!this._isEmpty(e)?ne.toUnitRGBA(e):void 0}}class dSt{constructor(e,i,r,s,n,o){this.layer=e,this.feature=i,this.bounds=r,this.normalizationRatio=s,this.normalizationOffsetX=n,this.normalizationOffsetY=o}}class rI{constructor(e,i,r,s){switch(this.type=e,this.typeName=i.type,this.id=i.id,this.source=i.source,this.sourceLayer=i["source-layer"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=r,this.uid=s,e){case 0:this._layoutDefinition=Ra.backgroundLayoutDefinition,this._paintDefinition=Ra.backgroundPaintDefinition;break;case 1:this._layoutDefinition=Ra.fillLayoutDefinition,this._paintDefinition=Ra.fillPaintDefinition;break;case 2:this._layoutDefinition=Ra.lineLayoutDefinition,this._paintDefinition=Ra.linePaintDefinition;break;case 3:this._layoutDefinition=Ra.symbolLayoutDefinition,this._paintDefinition=Ra.symbolPaintDefinition;break;case 4:this._layoutDefinition=Ra.circleLayoutDefinition,this._paintDefinition=Ra.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return this._featureFilter!==void 0?this._featureFilter:this._featureFilter=co.createFilter(this.filter)}getLayoutProperty(e){return this._layoutProperties[e]}getPaintProperty(e){return this._paintProperties[e]}getLayoutValue(e,i,r){let s;const n=this._layoutProperties[e];return n&&(s=n.getValue(i,r)),s===void 0&&(s=this._layoutDefinition[e].default),s}getPaintValue(e,i,r){let s;const n=this._paintProperties[e];return n&&(s=n.getValue(i,r)),s===void 0&&(s=this._paintDefinition[e].default),s}isPainterDataDriven(){const e=this._paintProperties;if(e){for(const i in e)if(e[i].isDataDriven)return!0}return!1}isIntersectingFeature(e,i,r,s,n,o,a){return!1}getFeatureInflatedBounds(e,i,r,s){return null}_parseLayout(e){const i={};for(const r in e){const s=this._layoutDefinition[r];s&&(i[r]=new HP(s,e[r]))}return i}_parsePaint(e){const i={};for(const r in e){const s=this._paintDefinition[r];s&&(i[r]=new HP(s,e[r]))}return i}computeAttributesKey(e,i,r,s){let n=0,o=0;for(const a of i){let l=3;if(!a||a!==s){const c=r[a],{isLayout:d,isOptional:h}=c,f=d?this.getLayoutProperty(a):this.getPaintProperty(a);l=f?.interpolator?2:f?.isDataDriven?1:h&&!f?3:0}o|=l<<n,n+=2}return o<<3|e}}class _Q extends rI{constructor(e,i,r,s){super(e,i,r,s),this.backgroundMaterial=new AN(this.computeAttributesKey(0,AN.ATTRIBUTES,AN.ATTRIBUTES_INFO))}}class xQ extends rI{constructor(e,i,r,s){super(e,i,r,s);const n=this.getPaintProperty("fill-color"),o=this.getPaintProperty("fill-opacity"),a=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=n?.isDataDriven,this.hasDataDrivenOpacity=o?.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||a?.isDataDriven;const l=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!l,this.hasDataDrivenOutlineColor=l?.isDataDriven,this.hasDataDrivenOutline=l?l.isDataDriven:!!n&&n.isDataDriven,this.hasDataDrivenOutline=(l?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new ON(this.computeAttributesKey(1,ON.ATTRIBUTES,ON.ATTRIBUTES_INFO)),this.outlineMaterial=new z1(this.computeAttributesKey(2,this.outlineUsesFillColor?z1.ATTRIBUTES_FILL:z1.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?z1.ATTRIBUTES_INFO_FILL:z1.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}getFeatureInflatedBounds(e,i,r,s){const n=N7(e);if(!n)return null;const o=this.getPaintValue("fill-translate",i,e),a=s*Math.max(o[0],o[1]);return n[0]-=a,n[2]-=a,n[1]+=a,n[3]+=a,n}isIntersectingFeature(e,i,r,s,n,o,a){const l=s.getGeometry();if(!l)return!1;const c=o_/a.normalizationRatio;e=e/a.normalizationRatio+a.normalizationOffsetX,i=i/a.normalizationRatio+a.normalizationOffsetY;const d=T9(this.getPaintValue("fill-translate",n,s),this.getPaintValue("fill-translate-anchor",n,s),o,o_);return e-=c*d.x,i-=c*d.y,!!HKe(e,i,l)||Rfe(e,i,l,c*r)}}class SQ extends rI{constructor(e,i,r,s){super(e,i,r,s);const n=this.getPaintProperty("line-pattern");if(this.lineMaterial=new RN(this.computeAttributesKey(3,RN.ATTRIBUTES,RN.ATTRIBUTES_INFO,n?"line-dasharray":"")),this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven,this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const o=this.getPaintProperty("line-width");if(!o||typeof o=="number"&&.5*o<hze){const a=this.getPaintProperty("line-offset");(!a||typeof a=="number"&&a===0)&&(this.canUseThinTessellation=!0)}}}getDashKey(e,i){let r;switch(i){case 0:default:r="Butt";break;case 1:r="Round";break;case 2:r="Square"}return`dasharray-[${e.toString()}]-${r}`}getFeatureInflatedBounds(e,i,r,s){const n=N7(e);if(!n)return null;const o=this.getPaintValue("line-translate",i,e),a=s*Math.max(o[0],o[1]);n[0]-=a,n[2]-=a,n[1]+=a,n[3]+=a;const l=s*Math.abs(this.getPaintValue("line-offset",i,e)||0),c=s*(this.getPaintValue("line-width",i,e)/2);return n[0]-=l+c,n[1]-=l+c,n[2]+=l+c,n[3]+=l+c,n}isIntersectingFeature(e,i,r,s,n,o,a){let l=s.getGeometry();if(!l)return!1;const c=o_/a.normalizationRatio;e=e/a.normalizationRatio+a.normalizationOffsetX,i=i/a.normalizationRatio+a.normalizationOffsetY;const d=T9(this.getPaintValue("line-translate",n,s),this.getPaintValue("line-translate-anchor",n,s),o,o_);e-=c*d.x,i-=c*d.y;const h=c*this.getPaintValue("line-offset",n,s)||0;h!==0&&(l=WKe(l,-h));const f=this.getPaintValue("line-width",n,s);return Rfe(e,i,l,c*(r+f/2))}}class $Q extends rI{constructor(e,i,r,s){super(e,i,r,s),this.iconMaterial=new NN(this.computeAttributesKey(4,NN.ATTRIBUTES,NN.ATTRIBUTES_INFO)),this.textMaterial=new DN(this.computeAttributesKey(6,DN.ATTRIBUTES,DN.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven,this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class IQ extends rI{constructor(e,i,r,s){super(e,i,r,s),this.circleMaterial=new LN(this.computeAttributesKey(5,LN.ATTRIBUTES,LN.ATTRIBUTES_INFO))}getFeatureInflatedBounds(e,i,r,s){const n=N7(e);if(!n)return null;const o=this.getPaintValue("circle-translate",i,e),a=Math.max(o[0],o[1]);n[0]-=a,n[2]-=a,n[1]+=a,n[3]+=a;const l=s*(o_*(this.getPaintValue("circle-radius",i,e)+this.getPaintValue("circle-stroke-width",i,e))/2);return n[0]-=l,n[1]-=l,n[2]+=l,n[3]+=l,n}isIntersectingFeature(e,i,r,s,n,o,a){const l=s.getGeometry();if(!l)return!1;const c=o_/a.normalizationRatio;e=e/a.normalizationRatio+a.normalizationOffsetX,i=i/a.normalizationRatio+a.normalizationOffsetY,r*=c;const d=T9(this.getPaintValue("circle-translate",n,s),this.getPaintValue("circle-translate-anchor",n,s),o,c),h=c*(this.getPaintValue("circle-radius",n,s)+this.getPaintValue("circle-stroke-width",n,s));let f,m;for(const y of l)if(y){for(const v of y)if(f=v.x+d.x,m=v.y+d.y,Math.sqrt((e-f)*(e-f)+(i-m)*(i-m))-r<=h)return!0}return!1}}class hSt{constructor(e,i,r){let s;this.allowOverlap=e.getLayoutValue("icon-allow-overlap",i),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",i),this.keepUpright=e.getLayoutValue("icon-keep-upright",i),this.optional=e.getLayoutValue("icon-optional",i),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",i),this.rotationAlignment===2&&(this.rotationAlignment=r?0:1),s=e.getLayoutProperty("icon-anchor"),s?.isDataDriven?this._anchorProp=s:this.anchor=e.getLayoutValue("icon-anchor",i),s=e.getLayoutProperty("icon-offset"),s?.isDataDriven?this._offsetProp=s:this.offset=e.getLayoutValue("icon-offset",i),s=e.getLayoutProperty("icon-padding"),s?.isDataDriven?this._paddingProp=s:this.padding=e.getLayoutValue("icon-padding",i),s=e.getLayoutProperty("icon-rotate"),s?.isDataDriven?this._rotateProp=s:this.rotate=e.getLayoutValue("icon-rotate",i),s=e.getLayoutProperty("icon-size"),s?.isDataDriven?this._sizeProp=s:this.size=e.getLayoutValue("icon-size",i)}update(e,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,i))}}class pSt{constructor(e,i,r){let s;this.allowOverlap=e.getLayoutValue("text-allow-overlap",i),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",i),this.keepUpright=e.getLayoutValue("text-keep-upright",i),this.optional=e.getLayoutValue("text-optional",i),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",i),this.rotationAlignment===2&&(this.rotationAlignment=r?0:1),s=e.getLayoutProperty("text-anchor"),s?.isDataDriven?this._anchorProp=s:this.anchor=e.getLayoutValue("text-anchor",i),s=e.getLayoutProperty("text-justify"),s?.isDataDriven?this._justifyProp=s:this.justify=e.getLayoutValue("text-justify",i),s=e.getLayoutProperty("text-letter-spacing"),s?.isDataDriven?this._letterSpacingProp=s:this.letterSpacing=e.getLayoutValue("text-letter-spacing",i),s=e.getLayoutProperty("text-line-height"),s?.isDataDriven?this._lineHeightProp=s:this.lineHeight=e.getLayoutValue("text-line-height",i),s=e.getLayoutProperty("text-max-angle"),s?.isDataDriven?this._maxAngleProp=s:this.maxAngle=e.getLayoutValue("text-max-angle",i),s=e.getLayoutProperty("text-max-width"),s?.isDataDriven?this._maxWidthProp=s:this.maxWidth=e.getLayoutValue("text-max-width",i),s=e.getLayoutProperty("text-offset"),s?.isDataDriven?this._offsetProp=s:this.offset=e.getLayoutValue("text-offset",i),s=e.getLayoutProperty("text-padding"),s?.isDataDriven?this._paddingProp=s:this.padding=e.getLayoutValue("text-padding",i),s=e.getLayoutProperty("text-rotate"),s?.isDataDriven?this._rotateProp=s:this.rotate=e.getLayoutValue("text-rotate",i),s=e.getLayoutProperty("text-size"),s?.isDataDriven?this._sizeProp=s:this.size=e.getLayoutValue("text-size",i),s=e.getLayoutProperty("text-writing-mode"),s?.isDataDriven?this._writingModeProp=s:this.writingMode=e.getLayoutValue("text-writing-mode",i)}update(e,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(e,i)),this._justifyProp&&(this.justify=this._justifyProp.getValue(e,i)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(e,i)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(e,i)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(e,i)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(e,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(e,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(e,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(e,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(e,i)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(e,i))}}function N7(t){const e=t?.getGeometry();if(e==null)return null;let i=1/0,r=1/0,s=-1/0,n=-1/0;for(const o of e)if(o)for(const a of o)i=Math.min(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.x),n=Math.max(n,a.y);return HA(i,r,s,n)}class a0{constructor(e,i=!0){if(this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,this._style=i?U(e):e,this._style.layers||(this._style.layers=[]),this.version=parseFloat(this._style.version),this.layers=this._style.layers.map((r,s,n)=>this._create(r,s,n)).filter(r=>!!r),this.layers)for(let r=0;r<this.layers.length;r++){const s=this.layers[r];this._layerByName[s.id]=s,this._uidToLayer.set(s.uid,s),s.type===0&&this.backgroundBucketIds.push(s.id)}this._identifyRefLayers()}getLayerStyleProperties(e,i){const r=this.getStyleLayerByUID(e),s=r?.getLayoutValue("symbol-placement",i)!==0;let n=r?.getLayoutValue("icon-rotation-alignment",i);n===2&&(n=s?0:1);let o=r?.getLayoutValue("text-rotation-alignment",i);o===2&&(o=s?0:1);const a=r?.getPaintValue("icon-translate",i),l=r?.getPaintValue("icon-translate-anchor",i),c=r?.getPaintValue("text-translate",i),d=r?.getPaintValue("text-translate-anchor",i);return{geometryType:null,iconAllowOverlap:r?.getLayoutValue("icon-allow-overlap",i),iconIgnorePlacement:r?.getLayoutValue("icon-ignore-placement",i),textAllowOverlap:r?.getLayoutValue("text-allow-overlap",i),textIgnorePlacement:r?.getLayoutValue("text-ignore-placement",i),iconRotationAlignment:n,textRotationAlignment:o,iconTranslateAnchor:l,iconTranslate:a,textTranslateAnchor:d,textTranslate:c}}isPainterDataDriven(e){const i=this._layerByName[e];return!!i&&i.isPainterDataDriven()}getStyleLayerId(e){return e>=this.layers.length?null:this.layers[e].id}getStyleLayerByUID(e){return this._uidToLayer.get(e)??null}getStyleLayerIndex(e){const i=this._layerByName[e];return i?this.layers.indexOf(i):-1}setStyleLayer(e,i){if(!e?.id)return;const r=this._style;i!=null&&i>=this.layers.length&&(i=this.layers.length-1);let s,n=!0;const o=this._layerByName[e.id];if(o){const a=this.layers.indexOf(o);i||(i=a),i===a?(n=!1,s=a0._recreateLayer(e,o),this.layers[i]=s,r.layers[i]=e):(this.layers.splice(a,1),r.layers.splice(a,1),s=this._create(e,i,this.layers),this.layers.splice(i,0,s),r.layers.splice(i,0,e))}else s=this._create(e,i,this.layers),!i||i>=this.layers.length?(this.layers.push(s),r.layers.push(e)):(this.layers.splice(i,0,s),r.layers.splice(i,0,e));this._layerByName[e.id]=s,this._uidToLayer.set(s.uid,s),n&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(e){const i=this._layerByName[e];return i?{type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:i.paint}:null}deleteStyleLayer(e){const i=this._layerByName[e];if(i){delete this._layerByName[e],this._uidToLayer.delete(i.uid);const r=this.layers.indexOf(i);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(e){return this._layerByName[e]}getLayoutProperties(e){const i=this._layerByName[e];return i?i.layout:null}getPaintProperties(e){const i=this._layerByName[e];return i?i.paint:null}setPaintProperties(e,i){const r=this._layerByName[e];if(!r)return;const s={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:i},n=a0._recreateLayer(s,r),o=this.layers.indexOf(r);this.layers[o]=n,this._style.layers[o].paint=i,this._layerByName[r.id]=n,this._uidToLayer.set(r.uid,n)}setLayoutProperties(e,i){const r=this._layerByName[e];if(!r)return;const s={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},n=a0._recreateLayer(s,r),o=this.layers.indexOf(r);this.layers[o]=n,this._style.layers[o].layout=i,this._layerByName[r.id]=n,this._uidToLayer.set(r.uid,n)}setStyleLayerVisibility(e,i){const r=this._layerByName[e];if(!r)return;const s=r.layout||{};s.visibility=i;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:s,paint:r.paint},o=a0._recreateLayer(n,r),a=this.layers.indexOf(r);this.layers[a]=o,this._style.layers[a].layout=s,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}getStyleLayerVisibility(e){const i=this._layerByName[e];return i?i.layout?.visibility??"visible":"none"}_recomputeZValues(){const e=this.layers,i=1/(e.length+1);for(let r=0;r<e.length;r++)e[r].z=1-(1+r)*i}_identifyRefLayers(){const e=[],i=[];let r=0;for(const s of this.layers){const n=s.layout;if(s.type===1){const o=s;let a=s.source+"|"+s.sourceLayer;a+="|"+(n?.visibility??""),a+="|"+s.minzoom,a+="|"+s.maxzoom,a+="|"+JSON.stringify(s.filter),(o.hasDataDrivenFill||o.hasDataDrivenOutline)&&(a+="|"+r),e.push({key:a,layer:s})}else if(s.type===2){const o=s,a=s.paint,l=a!=null&&(a["line-pattern"]!=null||a["line-dasharray"]!=null);let c=s.source+"|"+s.sourceLayer;c+="|"+(n?.visibility??""),c+="|"+s.minzoom,c+="|"+s.maxzoom,c+="|"+JSON.stringify(s.filter),c+="|"+(n!==void 0?n["line-cap"]:""),c+="|"+(n!==void 0?n["line-join"]:""),(o.hasDataDrivenLine||l)&&(c+="|"+r),i.push({key:c,layer:s})}++r}this._assignRefLayers(e),this._assignRefLayers(i)}_assignRefLayers(e){let i,r;e.sort((n,o)=>n.key<o.key?-1:n.key>o.key?1:0);const s=e.length;for(let n=0;n<s;n++){const o=e[n];if(o.key===i)o.layer.refLayerId=r;else if(i=o.key,r=o.layer.id,o.layer.type===1){if(!o.layer.getPaintProperty("fill-outline-color"))for(let a=n+1;a<s;a++){const l=e[a];if(l.key!==i)break;if(l.layer.getPaintProperty("fill-outline-color")){e[n]=l,e[a]=o,r=l.layer.id;break}}}else if(o.layer.type===2){let a=o.layer;for(let l=n+1;l<s;l++){const c=e[l];if(c.key!==i)break;const d=c.layer;(a.canUseThinTessellation&&!d.canUseThinTessellation||!a.canUseThinTessellation&&(d.getPaintProperty("line-pattern")||d.getPaintProperty("line-dasharray")))&&(a=d,e[n]=c,e[l]=o,r=c.layer.id)}}}}_create(e,i,r){const s=1-(1+i)*(1/(r.length+1)),n=this._runningId++;switch(e.type){case"background":return new _Q(0,e,s,n);case"fill":return new xQ(1,e,s,n);case"line":return new SQ(2,e,s,n);case"symbol":return new $Q(3,e,s,n);case"raster":return console.warn(`Unsupported vector tile raster layer ${e.id}`),null;case"circle":return new IQ(4,e,s,n)}return null}static _recreateLayer(e,i){switch(e.type){case"background":return new _Q(0,e,i.z,i.uid);case"fill":return new xQ(1,e,i.z,i.uid);case"line":return new SQ(2,e,i.z,i.uid);case"symbol":return new $Q(3,e,i.z,i.uid);case"raster":return console.warn(`Unsupported vector tile raster layer ${e.id}`),null;case"circle":return new IQ(4,e,i.z,i.uid)}return null}}let ei=class extends Dg(qg(Bg(cge(O3(Vg(Ug(N3(L3(oc(Bt)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.path=null,this.refreshInterval=0,this.style=null,this.tilemapCache=null,this.type="vector-tile"}normalizeCtorArgs(t,e){return typeof t=="string"?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this.primarySource?.destroy(),this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(globalThis.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(Ss).then(async()=>{if(!this.portalItem?.id)return;const i=`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;(await xe(i,{...t,query:{f:"json",...this.customParameters,token:this.apiKey},authMode:this.portalItem.portal.authMode})).data&&this.read({url:i},Fue(this.portalItem,"portal-item"))}).catch(Ss).then(()=>this._loadStyle(t));return this.addResolvingPromise(e),Promise.resolve(this)}get apiKey(){return super.apiKey}set apiKey(t){super.apiKey=t}set portalItem(t){super.portalItem=t}get attributionDataUrl(){const t=this.currentStyleInfo,e=t?.serviceUrl&&$t(t.serviceUrl);if(!e)return null;const i=this._getDefaultAttribution(e.path);return i?Io(i,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?$t(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo?.styleUrl||null}writeStyleUrl(t,e){t&&ma(t)&&(t=`https:${t}`);const i=xD(t);e.styleUrl=RU(t,i)}get tileInfo(){const t=[];for(const i in this.sourceNameToSource)t.push(this.sourceNameToSource[i]);let e=this.primarySource?.tileInfo||new Ti;if(t.length>1)for(let i=0;i<t.length;i++)mlt(e,t[i].tileInfo)&&(e=ylt(e,t[i].tileInfo));return e}readTilemapCache(t,e){return e.capabilities?.includes("Tilemap")?new Fc({layer:this}):null}set url(t){if(!t)return void this._set("url",t);const e=$t(t);this._set("url",e.path),e.query&&(this.customParameters={...this.customParameters,...e.query})}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const i=$z().maxTextureSize,r=this.currentStyleInfo?.spriteUrl?Io(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,s=new yQ({type:"url",spriteUrl:r,pixelRatio:t,spriteFormat:this.currentStyleInfo?.spriteFormat},i);await s.load(e),this._spriteSourceMap.set(t,s)}return this._spriteSourceMap.get(t)}async setSpriteSource(t,e){if(!t)return null;const i=$z().maxTextureSize,r=t.spriteUrl,s=r?Io(r,{...this.customParameters,token:this.apiKey}):null;if(!s&&t.type==="url")return null;const n=new yQ(t,i);try{await n.load(e);const o=t.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(o,n),s&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=s),this.emit("spriteSource-change",{spriteSource:n}),n}catch(o){Ss(o)}return null}async loadStyle(t,e){const i=t||this.style||this.url;return this._loadingTask&&typeof i=="string"&&this.url===i||(this._loadingTask?.abort(),this._loadingTask=A_(r=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(i,{signal:r})),e)),this._loadingTask.promise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return U(this.styleRepository?.getPaintProperties(t))}setPaintProperties(t,e){const i=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const r=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:i||r})}getStyleLayer(t){return U(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return U(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new R("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,i){return null}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const i=await clt(t,{...e,query:{...this.customParameters,token:this.apiKey}});i.spriteFormat==="webp"&&(await ilt("lossy")||(i.spriteFormat="png")),this._set("currentStyleInfo",{...i}),typeof t=="string"?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",i.sourceNameToSource),this._set("primarySource",i.sourceNameToSource[i.primarySourceName]),this._set("styleRepository",new a0(i.style,!1)),this.read(i.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^/]+)?\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/vectortileserver/i),i=["OpenBasemap_v2","OpenBasemap_GCS_v2","OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2","World_Hillshade_v2"];if(!e)return;const r=e[2]&&e[2].toLowerCase();if(!r)return;const s=e[1]||"";for(const n of i)if(n.toLowerCase().includes(r))return Gn(`//static.arcgis.com/attribution/Vector${s}/${n}`)}async _loadStyle(t){return this._loadingTask?.promise??this.loadStyle(null,t)}};u([p({readOnly:!0})],ei.prototype,"attributionDataUrl",null),u([p({type:["show","hide"]})],ei.prototype,"listMode",void 0),u([p({json:{read:!0,write:!0}})],ei.prototype,"blendMode",void 0),u([p({readOnly:!0,json:{read:!1}})],ei.prototype,"capabilities",null),u([p({readOnly:!0})],ei.prototype,"currentStyleInfo",void 0),u([p({json:{read:!1},readOnly:!0,type:Pe})],ei.prototype,"fullExtent",null),u([p({json:{read:!1},readOnly:!0,type:Pe})],ei.prototype,"initialExtent",null),u([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ei.prototype,"isReference",void 0),u([p({type:["VectorTileLayer"]})],ei.prototype,"operationalLayerType",void 0),u([p({readOnly:!0})],ei.prototype,"parsedUrl",null),u([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ei.prototype,"path",void 0),u([p({type:Number,json:{write:!1,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ei.prototype,"refreshInterval",void 0),u([p()],ei.prototype,"style",void 0),u([p({readOnly:!0})],ei.prototype,"serviceUrl",null),u([p({type:fe,readOnly:!0})],ei.prototype,"spatialReference",null),u([p({readOnly:!0})],ei.prototype,"styleRepository",void 0),u([p({readOnly:!0})],ei.prototype,"sourceNameToSource",void 0),u([p({readOnly:!0})],ei.prototype,"primarySource",void 0),u([p({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],ei.prototype,"styleUrl",null),u([oe(["portal-item","web-document"],"styleUrl")],ei.prototype,"writeStyleUrl",null),u([p({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:Ti})],ei.prototype,"tileInfo",null),u([p()],ei.prototype,"tilemapCache",void 0),u([Q("service","tilemapCache",["capabilities","tileInfo"])],ei.prototype,"readTilemapCache",null),u([p({json:{read:!1},readOnly:!0,value:"vector-tile"})],ei.prototype,"type",void 0),u([p({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}}),p(V2)],ei.prototype,"url",null),u([p({readOnly:!0})],ei.prototype,"version",void 0),u([Q("version",["version","currentVersion"])],ei.prototype,"readVersion",null),ei=u([M("esri.layers.VectorTileLayer")],ei);const Wge=ei,fSt=Object.freeze(Object.defineProperty({__proto__:null,default:Wge},Symbol.toStringTag,{value:"Module"})),Ig="https://snla.maps.arcgis.com/",EV="db46wbxZvOmUif1n",D7=`${Ig}sharing`;function Ult(t){return t==="localhost"||t==="127.0.0.1"}function MV(){return typeof window>"u"?!1:Ult(window.location.hostname)}function CV(){const t="/hemswx-map-editor/";return`${t.endsWith("/")?t:`${t}/`}wms-proxy`}function Blt(){MV()&&(lt.request.interceptors||(lt.request.interceptors=[]),lt.request.interceptors.push({before:t=>{const e=t.url;if(e.includes("wms-proxy")||e.includes("arcgis.com")||e.includes("arcgisonline.com")||!/[?&](service=wms|request=getmap|request=getcapabilities)/i.test(e))return;const r=CV();t.url=`${window.location.origin}${r}?target=${encodeURIComponent(e)}`}}))}function qlt(){const t="/hemswx-map-editor/",e=t.endsWith("/")?t:`${t}/`;return`${window.location.origin}${e}oauth-callback.html`}function Glt(){try{return Zg.findCredential(D7)?.userId||null}catch{return null}}const nr=Zn({initialized:!1,apiKeySet:!1,portalAuthenticated:!1,oauthClientId:void 0,signedInUserId:null,error:null});let uM=null;function Hlt(){return!0}function F7(){return uM||(uM=new dV({appId:EV,portalUrl:Ig,popup:!0,popupCallbackUrl:qlt()}),Zg.registerOAuthInfos([uM]),nr.value={...nr.value,oauthClientId:EV}),!0}async function Jge(){if(!F7()){nr.value={...nr.value,portalAuthenticated:!1,signedInUserId:null};return}try{await Zg.checkSignInStatus(D7),nr.value={...nr.value,portalAuthenticated:!0,signedInUserId:Glt()}}catch{nr.value={...nr.value,portalAuthenticated:!1,signedInUserId:null}}}async function Wlt(){if(!F7())throw new Error("OAuth is not configured. No OAuth Client ID available.");await Zg.getCredential(D7),await Jge()}async function Zge(t){try{nr.value={...nr.value,error:null},t.apiKey&&(lt.apiKey=t.apiKey,nr.value={...nr.value,apiKeySet:!0}),F7()&&await Jge(),Blt(),nr.value={...nr.value,initialized:!0}}catch(e){const i=e instanceof Error?e.message:"Failed to initialize ArcGIS";throw nr.value={...nr.value,error:i},e}}function kQ(){Zg.destroyCredentials(),lt.apiKey="",uM=null,nr.value={initialized:!1,apiKeySet:!1,portalAuthenticated:!1,oauthClientId:void 0,signedInUserId:null,error:null}}async function PV(t){let e;switch(t.type){case"wms":{const i=MV(),r=i?CV():t.source,s={};t.options&&Object.entries(t.options).forEach(([n,o])=>{n!=="layerNames"&&n!=="opacity"&&n!=="layerId"&&(s[n]=String(o))}),i&&(s.target=t.source),e=new ige({url:r,sublayers:t.options?.layerNames?.map(n=>({name:n}))||[],opacity:t.options?.opacity??1,customParameters:Object.keys(s).length>0?s:void 0,useViewTime:!0});break}case"tiled":e=new Cge({url:t.source,opacity:t.options?.opacity??1});break;case"mapImage":e=new Pge({url:t.source,opacity:t.options?.opacity??1});break;case"vectorTiled":e=new Wge({url:t.source,opacity:t.options?.opacity??1});break;case"feature":e=new Se({url:t.source,opacity:t.options?.opacity??1});break;case"portalItem":{const i=new Be({id:t.source,portal:{url:Ig}}),r=t.options?.layerId,s=r!==void 0?Number(r):void 0,n=await Bt.fromPortalItem({portalItem:i,layerId:Number.isFinite(s)?s:void 0});if(!n)return{success:!1,error:"Failed to create layer from portal item"};n.opacity=t.options?.opacity??1,e=n;break}case"wmts":{if(t.sourceKind==="portalItem"){const a=new Be({id:t.source,portal:{url:Ig}}),l=await Bt.fromPortalItem({portalItem:a});if(!l)return{success:!1,error:"Failed to create WMTS layer from portal item"};l.opacity=t.options?.opacity??1,e=l;break}const i=MV(),r=i?CV():t.source,s={};t.options&&Object.entries(t.options).forEach(([a,l])=>{a!=="layerNames"&&a!=="opacity"&&a!=="layerId"&&a!=="serviceMode"&&(s[a]=String(l))}),i&&(s.target=t.source);const n={url:r,opacity:t.options?.opacity??1,customParameters:Object.keys(s).length>0?s:void 0};t.options?.serviceMode&&(n.serviceMode=t.options.serviceMode);const o=t.options?.layerId??t.options?.layerNames?.[0];o&&(n.activeLayer={id:String(o)}),e=new lge(n);break}default:return{success:!1,error:`Unsupported layer type: ${t.type}`}}return{success:!0,layer:e}}const Fl={id:"gray-vector",name:"Light Gray"};function Jlt(t){if(!t)return;const e={};return Object.entries(t).filter(([i])=>i!=="opacity").sort(([i],[r])=>i.localeCompare(r)).forEach(([i,r])=>{e[i]=r}),e}function Zlt(t){const e=t.supportedDimensions?[...t.supportedDimensions].sort():void 0;return JSON.stringify({type:t.type,sourceKind:t.sourceKind??null,source:t.source,refreshInterval:t.refreshInterval??null,supportedDimensions:e??null,options:Jlt(t.options)??null,sceneProperties:t.sceneProperties??null})}function FN(t){const e=t?.destroy;typeof e=="function"&&e.call(t)}function zN(t){const e=new Map,i=t.map((r,s)=>{const n=Zlt(r),o=(e.get(n)??0)+1;return e.set(n,o),{key:o===1?n:`${n}::dup${o}`,config:r,opacity:r.options?.opacity??1,zIndex:r.zIndex??0,originalIndex:s}});return i.sort((r,s)=>r.zIndex-s.zIndex||r.originalIndex-s.originalIndex),i}function Ylt({layerConfigs:t,mapInstance:e,viewReady:i}){const r=De(!1),s=De(0),n=De(!1),o=De(null),a=kt(new Map),l=Eo(()=>{a.current.forEach(c=>FN(c)),a.current.clear()},[]);return tV(()=>{const c=t.value,d=nr.value.initialized,h=i.value,f=e.current;if(!f||!h||!d)return;const m=zN(c),y=new Set(m.map(w=>w.key));for(const[w,x]of Array.from(a.current.entries()))y.has(w)||(f.layers.remove(x),FN(x),a.current.delete(w));m.forEach(w=>{const x=a.current.get(w.key);x&&x.opacity!==w.opacity&&(x.opacity=w.opacity)});const v=m.filter(w=>!a.current.has(w.key));v.length>0?(dN(()=>{r.value=!0,o.value=null}),Promise.all(v.map(async w=>{try{const x=await PV(w.config);return x.success&&x.layer?(x.layer.opacity=w.opacity,{key:w.key,layer:x.layer}):(x.error&&console.warn(`Layer error ${w.key}:`,x.error),null)}catch(x){return console.warn(`Layer exception ${w.key}:`,x),null}})).then(w=>{if(!e.current)return;w.forEach(S=>{if(S){const $=t.value;zN($).some(C=>C.key===S.key)?(f.layers.add(S.layer),a.current.set(S.key,S.layer)):FN(S.layer)}}),zN(t.value).forEach((S,$)=>{const T=a.current.get(S.key);T&&f.layers.reorder(T,$)}),dN(()=>{r.value=!1,s.value=f.layers.length})})):(m.forEach((w,x)=>{const S=a.current.get(w.key);S&&f.layers.reorder(S,x)}),dN(()=>{r.value=!1,s.value=f.layers.length}));const b=m.filter(w=>w.config.type==="wms");n.value=b.length>0}),{isLoading:r,loadedLayerCount:s,hasTimeAwareLayers:n,error:o,cleanup:l}}function Klt({mapInstance:t,viewReady:e}){const i=kt(""),r=Eo(async s=>{const n=t.current;if(!n)return;let o=s,a=!1;if(!o)o=Fl.id;else if(o.startsWith("custom:")){a=!0;const l=o.replace("custom:","");Ne.value.baseMaps?.some(d=>d.id===l)||(o=Fl.id,a=!1,aV(Fl.id))}if(!a&&o===Fl.id&&i.current===""){i.current=o;return}if(o!==i.current)if(i.current=o,a){const l=o.replace("custom:",""),c=Ne.value.baseMaps?.find(y=>y.id===l);if(!c){n.basemap=Xd.fromId(Fl.id);return}const[d,h]=await Promise.all([Promise.all(c.baseLayers.map(y=>PV(y))),Promise.all(c.referenceLayers.map(y=>PV(y)))]),f=d.filter(y=>y.success&&y.layer).map(y=>y.layer),m=h.filter(y=>y.success&&y.layer).map(y=>y.layer);n.basemap=new Xd({baseLayers:f,referenceLayers:m,title:c.name})}else{const l=Xd.fromId(o);l?n.basemap=l:n.basemap=Xd.fromId(Fl.id)}},[t]);return tV(()=>{const s=e.value,n=oV.value;s&&r(n)}),tV(()=>{const s=oV.value;if(s.startsWith("custom:")){const n=s.replace("custom:","");Ne.value.baseMaps?.some(a=>a.id===n)||aV(Fl.id)}}),{applyBasemapToMap:r}}function Xlt({mode:t,layer:e,feature:i,basemap:r,featureItems:s,enabledSublayerIndices:n,enabledLayerIds:o,onClose:a}){const l=kt(null),c=kt(null),d=(v,b)=>{if(n.value===null){const w=new Set(Array.from({length:b},(x,S)=>S));w.delete(v),n.value=w}else{const w=new Set(n.value);w.has(v)?w.delete(v):w.add(v),n.value=w}},h=(v,b)=>{const w=v.layersIds||[];if(w.length!==0)if(b)o.value=new Set(w);else{const x=o.value;if(x===null){const S=new Set;s.forEach($=>$.layersIds?.forEach(T=>S.add(T))),w.forEach($=>S.delete($)),o.value=S}else{const S=new Set(x);w.every(T=>S.has(T))?w.forEach(T=>S.delete(T)):w.forEach(T=>S.add(T)),o.value=S}}},f=v=>{const b=v.layersIds||[];if(b.length===0)return!1;const w=o.value;return w===null?!0:b.some(x=>w.has(x))},m=i?.mutuallyExclusive??!1;Ot(()=>{const v=l.current;if(!v)return;const b=w=>{w.stopPropagation(),a()};return v.addEventListener("calcitePanelClose",b),()=>v.removeEventListener("calcitePanelClose",b)},[a]),Ot(()=>{const v=c.current;if(!v)return;const b=w=>{const x=w.target,S=x.getAttribute("data-idx"),$=x.getAttribute("data-type"),T=x.getAttribute("data-total-count");if($==="sublayer"&&S!==null&&T!==null)d(parseInt(S,10),parseInt(T,10));else if($==="feature-item"&&S!==null){const C=s[parseInt(S,10)];C&&h(C,m)}};return v.addEventListener("calciteListItemSelect",b),()=>v.removeEventListener("calciteListItemSelect",b)},[s,m,n,o]);const y=t==="layer"?e?.layers.length||0:t==="basemap"&&r?r.baseLayers.length+r.referenceLayers.length:0;return _("calcite-panel",{ref:l,heading:"Visibility",closable:!0,style:{position:"absolute",bottom:"8px",left:"8px",width:"280px",maxHeight:"calc(100% - 16px)",zIndex:20},children:_("calcite-list",{ref:c,"selection-mode":m?"single":"multiple",children:[t==="layer"&&e?.layers.map((v,b)=>_("calcite-list-item",{"data-idx":b,"data-type":"sublayer","data-total-count":y,label:`#${b+1} ${v.type}`,description:v.source,selected:n.value===null||n.value?.has(b)},b)),t==="feature"&&s.map((v,b)=>_("calcite-list-item",{"data-idx":b,"data-type":"feature-item",label:v.name||`Item ${b}`,selected:f(v)},b)),t==="basemap"&&r&&_(Dr,{children:[r.baseLayers.map((v,b)=>_("calcite-list-item",{"data-idx":b,"data-type":"sublayer","data-total-count":y,label:`Base #${b+1} ${v.type}`,description:v.source,selected:n.value===null||n.value?.has(b)},`base-${b}`)),r.referenceLayers.map((v,b)=>{const w=r.baseLayers.length+b;return _("calcite-list-item",{"data-idx":w,"data-type":"sublayer","data-total-count":y,label:`Ref #${b+1} ${v.type}`,description:v.source,selected:n.value===null||n.value?.has(w)},`ref-${b}`)})]})]})})}function Qlt({mode:t,customLegends:e,mapElementRef:i,viewReady:r,onClose:s}){return _("calcite-panel",{heading:"Legend",closable:!0,onCalcitePanelClose:n=>{n.stopPropagation(),s()},style:{position:"absolute",top:"8px",right:"8px",width:"280px",maxHeight:"calc(100% - 16px)",zIndex:20,overflow:"auto"},children:_("div",{style:{padding:"12px",display:"flex",flexDirection:"column",gap:"12px"},children:[t==="layer"&&_("arcgis-legend",{ref:n=>{n&&r&&(n.view=i.current?.view)}}),e.map((n,o)=>_("calcite-card",{children:[_("span",{slot:"title",children:n.name}),n.description&&_("span",{slot:"subtitle",children:n.description}),_("div",{style:{backgroundColor:"white",borderRadius:"4px",padding:"4px",marginTop:"8px"},children:_("img",{src:n.url,alt:`Legend for ${n.name}`,style:{maxWidth:"100%",height:"auto",display:"block"}})})]},o))]})})}function ect({currentBasemap:t,customBasemaps:e,onSelect:i}){const r=kt(null);return Ot(()=>{const s=r.current;if(!s)return;const n=o=>{const l=o.target?.getAttribute("data-basemap-id");l&&i(l)};return s.addEventListener("calciteDropdownItemSelect",n),()=>{s.removeEventListener("calciteDropdownItemSelect",n)}},[i]),_("calcite-dropdown",{ref:r,placement:"bottom-end",scale:"s",children:[_("calcite-button",{slot:"trigger",appearance:"outline-fill",scale:"s",kind:"neutral","icon-start":"basemap",children:"Basemap"}),_("calcite-dropdown-item",{"data-basemap-id":Fl.id,selected:t===Fl.id||void 0,children:[Fl.name," (Standard)"]}),e.length>0&&_("calcite-dropdown-group",{"group-title":"Custom Basemaps",children:e.map(s=>_("calcite-dropdown-item",{"data-basemap-id":`custom:${s.id}`,selected:t===`custom:${s.id}`||void 0,children:s.name},s.id))})]})}function AV(t){const e=De(t.layer),i=De(t.feature),r=De(t.basemap),s=De(t.mode??"layer");Ot(()=>{e.value=t.layer},[t.layer]),Ot(()=>{i.value=t.feature},[t.feature]),Ot(()=>{r.value=t.basemap},[t.basemap]),Ot(()=>{s.value=t.mode??"layer"},[t.mode]);const n=kt(null),o=kt(null),a=De(!1),l=De(!1),c=De(!1),d=De(!1),h=De(null),f=De(null),m=De(!1),y=Jt(()=>{const J=s.value,ee=i.value;return J==="feature"&&ee?ee.items?.filter(re=>re.showLegend&&re.legendUrl).map(re=>({name:re.name,url:re.legendUrl,description:re.legendDescription}))||[]:[]}),v=Jt(()=>{const J=i.value;if(!J)return null;const ee=Ne.value.weatherFeatures?.find(re=>re.id===J.id||re.name===J.name);return ee||(Ne.value.features?.find(re=>re.id===J.id||re.name===J.name)??J)}),b=Jt(()=>{const J=s.value,ee=v.value;if(J==="feature"&&ee){const re=ee.items||[];if(ee.presentation==="multiple"||re.length>1)return re}return[]}),w=Jt(()=>{const J=s.value,ee=e.value,re=v.value,me=r.value;if(J==="layer"&&ee){const ze=f.value;if(ze&&ze.size===0)return[];const Ce=Ne.value.layers.find(vt=>vt.id===ee.id);return(Ce?Ce.layers:ee.layers).filter((vt,Rt)=>ze===null||ze.has(Rt))}if(J==="feature"&&re){const ze=h.value;if(ze&&ze.size===0)return[];const Ce=[];re.items?.forEach(vt=>{vt.layersIds?.forEach(Rt=>{(ze===null||ze.has(Rt))&&(Ce.includes(Rt)||Ce.push(Rt))})});const at=[];return Ce.forEach(vt=>{const Rt=Ne.value.layers.find(Cs=>Cs.id===vt);Rt&&at.push(...Rt.layers)}),at}if(J==="basemap"&&me){const ze=f.value,Ce=Ne.value.baseMaps?.find(vt=>vt.id===me.id)||me,at=[...Ce.baseLayers,...Ce.referenceLayers];return ze&&ze.size===0?[]:at.filter((vt,Rt)=>ze===null||ze.has(Rt)).map(vt=>vt)}return[]}),x=Jt(()=>{const J=s.value;return J==="layer"?e.value?.id||"":J==="feature"?i.value?.name||i.value?.id||"Feature":J==="basemap"?r.value?.name||r.value?.id||"Basemap":""}),S=Jt(()=>{const J=s.value;return J==="layer"&&!!e.value||J==="feature"&&!!i.value||J==="basemap"&&!!r.value}),$=kt({id:null,presentation:null,mutuallyExclusive:null});Ot(()=>{const J=v.value;if(s.value==="feature"&&J){const ee=J.id||J.name||null,re=J.presentation||null,me=J.mutuallyExclusive??!1,ze=$.current;if(ee!==ze.id||re!==ze.presentation||me!==ze.mutuallyExclusive)if($.current={id:ee,presentation:re,mutuallyExclusive:me},me&&J.items&&J.items.length>0){const at=new Set;J.items[0].layersIds?.forEach(vt=>at.add(vt)),h.value=at}else h.value=null}else $.current={id:null,presentation:null,mutuallyExclusive:null}},[v.value,s.value]);const T=kt(null);Ot(()=>{const J=s.value,ee=J==="layer"?e.value?.id:J==="basemap"?r.value?.id:null;ee&&ee!==T.current&&(T.current=ee,f.value=null)},[e.value,r.value,s.value]);const{isLoading:C,loadedLayerCount:L,hasTimeAwareLayers:N,error:D,cleanup:F}=Ylt({layerConfigs:w,mapInstance:o,viewReady:m});Klt({mapInstance:o,viewReady:m}),Ot(()=>{(async()=>{const ee=Z_.value||{};if(!nr.value.initialized)try{await Zge(ee)}catch(re){console.error("Failed to initialize ArcGIS:",re)}})()},[]);const W=Eo(J=>{const ee=J.target;ee?.map&&(o.current!==ee.map&&F(),o.current=ee.map,m.value=!0)},[F]),Z=kt(W);Z.current=W,Ot(()=>{const J=n.current;if(!J)return;const ee=re=>Z.current(re);return J.addEventListener("arcgisViewReadyChange",ee),()=>{J.removeEventListener("arcgisViewReadyChange",ee),F(),o.current=null,m.value=!1}},[]);const V=async()=>{l.value=!0;try{await Wlt(),a.value=!1}catch(J){console.error("Sign-in failed:",J)}finally{l.value=!1}},A=Jt(()=>s.value==="layer"||s.value==="feature"&&y.value.length>0);Ot(()=>{!A.value&&c.value&&(c.value=!1)},[A.value]);const q=Jt(()=>{const J=s.value,ee=v.value;return!!(J==="layer"&&e.value&&e.value.layers.length>0||J==="feature"&&(b.value.length>1||ee?.mutuallyExclusive)||J==="basemap"&&r.value&&r.value.baseLayers.length+r.value.referenceLayers.length>0)});return S.value?_("div",{className:"flex flex-col h-full",children:[_("div",{className:"flex items-center justify-between gap-2 p-2 border-b border-slate-700 bg-slate-800/50 flex-shrink-0",children:[_("div",{className:"flex items-center gap-2",children:_("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${s.value==="layer"?"bg-blue-600":s.value==="feature"?"bg-purple-600":"bg-green-600"} text-white`,children:s.value==="layer"?"Layer":s.value==="feature"?"Feature":"Basemap"})}),_("div",{className:"flex items-center gap-1",children:[q.value&&_("calcite-button",{appearance:d.value?"solid":"outline-fill",scale:"s",kind:d.value?"brand":"neutral",onClick:()=>d.value=!d.value,title:"Toggle layer visibility",children:"Layers"}),A.value&&_("calcite-button",{appearance:c.value?"solid":"outline-fill",scale:"s",kind:c.value?"brand":"neutral",onClick:()=>c.value=!c.value,title:"Toggle legend",children:"Legend"}),s.value!=="basemap"&&_(ect,{currentBasemap:oV.value,customBasemaps:Ne.value.baseMaps||[],onSelect:aV})]})]}),_("div",{className:"flex-1 relative min-h-0","data-calcite-mode":"dark",children:[_("arcgis-map",{ref:n,basemap:Fl.id,center:"10.5,59.9",zoom:"5",style:{width:"100%",height:"100%"},children:[_("arcgis-zoom",{position:"top-left"}),N.value&&_("arcgis-time-slider",{position:"bottom-left"})]}),C.value&&_("div",{className:"absolute bottom-4 right-4 z-10 pointer-events-none bg-slate-800/80 p-2 rounded-full shadow-lg",children:_("calcite-loader",{scale:"s",inline:!0})}),a.value&&!nr.value.portalAuthenticated&&Hlt()&&_("div",{className:"absolute bottom-2 left-2 right-2 p-3 bg-amber-900/95 text-amber-100 text-sm rounded-lg z-20 border border-amber-700",children:_("div",{className:"flex items-center justify-between gap-3",children:[_("div",{children:[_("div",{className:"font-medium mb-0.5",children:"Portal authentication required"}),_("div",{className:"text-xs text-amber-200/80",children:["Sign in to access portal items from ",Ig]})]}),_("button",{className:"btn primary small whitespace-nowrap",onClick:V,disabled:l.value,children:l.value?"Signing in...":"Sign In"})]})}),D.value&&!(a.value&&!nr.value.portalAuthenticated)&&_("div",{className:"absolute bottom-2 left-2 right-2 z-10",children:_("calcite-notice",{kind:"danger",icon:"exclamation-mark-triangle",closable:!0,open:!0,onCalciteNoticeClose:()=>{D.value=null},children:[_("div",{slot:"title",children:"Error loading layers"}),_("div",{slot:"message",className:"text-xs max-h-24 overflow-auto whitespace-pre-wrap",children:D.value})]})}),c.value&&A.value&&_(Qlt,{mode:s.value,customLegends:y.value,mapElementRef:n,viewReady:m.value,onClose:()=>c.value=!1}),d.value&&_(Xlt,{mode:s.value,layer:e.value,feature:v.value,basemap:r.value,featureItems:b.value,enabledSublayerIndices:f,enabledLayerIds:h,onClose:()=>d.value=!1})]}),_("div",{className:"p-2 border-t border-slate-700 text-xs flex-shrink-0 bg-slate-800/50",children:_("div",{className:"flex items-center justify-between",children:[_("span",{className:"truncate max-w-[50%] text-slate-500",children:[x.value," (",w.value.length," layers)"]}),_("div",{className:"flex items-center gap-2",children:L.value>0&&_("span",{className:"text-green-400",children:[L.value," loaded"]})})]})})]}):_("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center bg-slate-900/50",children:_("div",{className:"text-slate-500",children:[_("svg",{className:"w-10 h-10 mx-auto mb-2 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),_("p",{className:"text-xs",children:"Select a layer or feature to preview"})]})})}function Yge({isOpen:t,title:e,message:i,confirmLabel:r="Confirm",cancelLabel:s="Cancel",variant:n="default",onConfirm:o,onCancel:a}){return t?_("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100]",onClick:a,children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[400px] max-w-[90vw] shadow-2xl",onClick:c=>c.stopPropagation(),children:[_("div",{className:"p-4 border-b border-slate-700",children:_("h3",{className:"text-lg font-medium text-white",children:e})}),_("div",{className:"p-4",children:_("p",{className:"text-slate-300",children:i})}),_("div",{className:"p-4 border-t border-slate-700 flex justify-end gap-2",children:[_("button",{className:"px-4 py-2 rounded bg-slate-700 hover:bg-slate-600 text-white text-sm transition-colors",onClick:a,children:s}),_("button",{className:`px-4 py-2 rounded text-white text-sm transition-colors ${{danger:"bg-red-600 hover:bg-red-700",warning:"bg-orange-600 hover:bg-orange-700",default:"bg-blue-600 hover:bg-blue-700"}[n]}`,onClick:o,children:r})]})]})}):null}function Kge(){const t=De(!1),e=De(null);return{isOpen:t,config:e,confirm:n=>{e.value=n,t.value=!0},handleConfirm:()=>{e.value?.onConfirm(),t.value=!1,e.value=null},handleCancel:()=>{t.value=!1,e.value=null}}}const Xge=200,tct=.4,ict=320,Qge="hemswx-nav-width",eve=250,rct=.4,sct=400,tve="hemswx-preview-width",ive="hemswx-preview-visible",nct=()=>{try{const t=localStorage.getItem(Qge);if(t){const e=parseInt(t,10);if(!isNaN(e)&&e>=Xge)return e}}catch{}return ict},oct=t=>{try{localStorage.setItem(Qge,String(Math.round(t)))}catch{}},act=()=>{try{const t=localStorage.getItem(tve);if(t){const e=parseInt(t,10);if(!isNaN(e)&&e>=eve)return e}}catch{}return sct},lct=t=>{try{localStorage.setItem(tve,String(Math.round(t)))}catch{}},cct=()=>{try{const t=localStorage.getItem(ive);if(t!==null)return t==="true"}catch{}return!0},uct=t=>{try{localStorage.setItem(ive,String(t))}catch{}};function dct(){const t=De("none"),e=De("form"),i=De(!1),r=De(null),s=De(null),n=De(null),o=De(null),a=De(null),l=De(nct()),c=De(!1),d=De(act()),h=De(!1),f=De(cct()),m=De(!1),y=De(void 0),v=kt(null),b=kt(""),w=De(null),x=De(null),S=Kge();Ot(()=>{if(!i.value){if(r.value?.type==="feature"){const{featureType:ae,index:Ie}=r.value,qe=Ne.value[ae]?.[Ie];if(qe){const Ge=JSON.stringify(qe);b.current!==Ge&&(s.value={feature:JSON.parse(Ge),featureType:ae})}}else if(r.value?.type==="layer"){const ae=Ne.value.layers?.[r.value.index];if(ae){const Ie=JSON.stringify(ae);b.current!==Ie&&(n.value=JSON.parse(Ie))}}}},[Ne.value]);const $=Eo(ae=>{ae.preventDefault(),c.value=!0;const Ie=Ge=>{if(!v.current)return;const Nt=v.current.getBoundingClientRect(),bt=Nt.width*tct,ni=Math.min(bt,Math.max(Xge,Ge.clientX-Nt.left));l.value=ni},qe=()=>{c.value=!1,oct(l.value),document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",qe)};document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",qe)},[]),T=Eo(ae=>{ae.preventDefault(),h.value=!0;const Ie=Ge=>{if(!v.current)return;const Nt=v.current.getBoundingClientRect(),bt=Nt.width*rct,ni=Math.min(bt,Math.max(eve,Nt.right-Ge.clientX));d.value=ni},qe=()=>{h.value=!1,lct(d.value),document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",qe)};document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",qe)},[]),C=Eo(()=>{const ae=!f.value;f.value=ae,ae||(m.value=!1),uct(ae)},[]),L=ae=>ae.name?.trim()?ae.name:ae.presentation==="single"&&ae.items?.[0]?.name?.trim()?ae.items[0].name:ae.id||"Unnamed",N=(ae,Ie,qe)=>{const Ge=Ne.value[ae]?.[Ie];Ge&&(r.value={type:"feature",featureType:ae,index:Ie,itemIndex:qe},jrt(ae,Ie),t.value="feature",y.value=void 0,i.value=!1,s.value={feature:JSON.parse(JSON.stringify(Ge)),featureType:ae},n.value=null)},D=ae=>{const Ie=Ne.value.layers?.[ae];Ie&&(r.value={type:"layer",index:ae},Vrt(ae),t.value="layer",y.value=void 0,i.value=!1,n.value=JSON.parse(JSON.stringify(Ie)),s.value=null)},F=(ae,Ie)=>{if(N(ae,Ie),s.value){const qe=[...s.value.feature.items||[]];qe.push({id:"",name:"New Item",showLegend:!1,layersIds:[]});const Ge={...s.value.feature,items:qe};s.value={...s.value,feature:Ge},V(Ge);const Nt=qe.length-1;r.value={type:"feature",featureType:ae,index:Ie,itemIndex:Nt}}},W=ae=>{a.value=ae},Z=(ae,Ie)=>{const qe=gX(Ne.value,ae),Ge=JSON.parse(JSON.stringify(qe));Ge[Ie].push(ae),os(Ge);const Nt=Ge[Ie].length-1;r.value={type:"feature",featureType:Ie,index:Nt},t.value="feature",i.value=!1,s.value={feature:JSON.parse(JSON.stringify(ae)),featureType:Ie},a.value=null},V=ae=>{if(i.value||r.value?.type!=="feature"||!n7(ae).valid)return;b.current=JSON.stringify(ae);const qe=gX(Ne.value,ae),Ge=JSON.parse(JSON.stringify(qe));Ge[r.value.featureType][r.value.index]=ae,os(Ge)},A=ae=>{if(i.value||r.value?.type!=="layer"||!nV(ae).valid)return;b.current=JSON.stringify(ae);const qe=QE(Ne.value,ae);os(qe)},q=()=>{if(!n.value||!i.value)return;const ae=nV(n.value);if(!ae.valid){xu(ae.errors[0]||"Invalid layer");return}const Ie=QE(Ne.value,n.value);os(Ie);const qe=Ie.layers.findIndex(Ge=>Ge.id===n.value.id);qe>=0&&(r.value={type:"layer",index:qe}),i.value=!1},J=()=>{if(i.value)t.value="none",s.value=null,n.value=null,r.value=null;else if(r.value?.type==="feature"){const{featureType:ae,index:Ie}=r.value,qe=Ne.value[ae]?.[Ie];qe&&(s.value={feature:JSON.parse(JSON.stringify(qe)),featureType:ae})}else if(r.value?.type==="layer"){const ae=Ne.value.layers?.[r.value.index];ae&&(n.value=JSON.parse(JSON.stringify(ae)))}},ee=()=>{if(r.value?.type!=="feature")return;const{featureType:ae,index:Ie}=r.value,qe=Ne.value[ae][Ie],Ge=L(qe),Nt=[];qe.id&&Nt.push(qe.id),qe.items?.forEach(zi=>{zi.id&&Nt.push(zi.id),zi.legendDescription&&Nt.push(zi.legendDescription)});const bt=[];qe.items?.forEach(zi=>{zi.layersIds?.forEach(Ps=>{bt.includes(Ps)||bt.push(Ps)})});const ni=bt.filter(zi=>{let Ps=0;return[...Ne.value.weatherFeatures,...Ne.value.features].forEach(lc=>{lc.items?.forEach(Y_=>{Y_.layersIds?.includes(zi)&&Ps++})}),Ps<=1});w.value={open:!0,featureType:ae,index:Ie,featureName:Ge,translationKeys:Nt,layerIds:bt,exclusiveLayerIds:ni,deleteTranslations:!1,deleteLayers:!1}},re=()=>{if(!w.value)return;const{featureType:ae,index:Ie,deleteTranslations:qe,deleteLayers:Ge,translationKeys:Nt,exclusiveLayerIds:bt}=w.value;let ni=JSON.parse(JSON.stringify(Ne.value));qe&&Nt.length>0&&["en","da","nb","sv"].forEach(Ps=>{ni.intl?.[Ps]&&Nt.forEach(lc=>{delete ni.intl[Ps][lc]})}),Ge&&bt.length>0&&(ni.layers=ni.layers.filter(zi=>!bt.includes(zi.id))),ni[ae]=ni[ae].filter((zi,Ps)=>Ps!==Ie),os(ni),w.value=null,r.value=null,t.value="none",s.value=null},me=(ae,Ie)=>{const qe=Ie.name||Ie.id||`Item #${ae+1}`,Ge=[];Ie.id&&Ge.push(Ie.id),Ie.legendDescription&&Ge.push(Ie.legendDescription);const Nt=Ie.layersIds||[],bt=Nt.filter(ni=>{let zi=0;return[...Ne.value.weatherFeatures,...Ne.value.features].forEach(Ps=>{Ps.items?.forEach(lc=>{lc.layersIds?.includes(ni)&&zi++})}),zi<=1});if(Ge.length===0&&bt.length===0){if(s.value){const ni=[...s.value.feature.items];ni.splice(ae,1);const zi={...s.value.feature,items:ni};s.value={...s.value,feature:zi},V(zi)}return}x.value={open:!0,itemIndex:ae,itemName:qe,translationKeys:Ge,layerIds:Nt,exclusiveLayerIds:bt,deleteTranslations:!1,deleteLayers:!1}},ze=()=>{if(!x.value||!s.value)return;const{itemIndex:ae,deleteTranslations:Ie,deleteLayers:qe,translationKeys:Ge,exclusiveLayerIds:Nt}=x.value;let bt=JSON.parse(JSON.stringify(Ne.value));Ie&&Ge.length>0&&["en","da","nb","sv"].forEach(lc=>{bt.intl?.[lc]&&Ge.forEach(Y_=>{delete bt.intl[lc][Y_]})}),qe&&Nt.length>0&&(bt.layers=bt.layers.filter(Ps=>!Nt.includes(Ps.id)));const ni=[...s.value.feature.items];ni.splice(ae,1);const zi={...s.value.feature,items:ni};s.value={...s.value,feature:zi},r.value?.type==="feature"&&!i.value&&(b.current=JSON.stringify(zi),bt[r.value.featureType][r.value.index]=zi),os(bt),x.value=null},Ce=()=>{if(t.value==="feature")if(r.value?.type==="feature"&&r.value.itemIndex!==void 0){const ae=Ne.value[r.value.featureType][r.value.index];if(ae&&ae.items&&ae.items[r.value.itemIndex]){const Ie=ae.items[r.value.itemIndex];me(r.value.itemIndex,Ie)}}else ee();else t.value==="layer"&&handleDeleteLayer()},at=ae=>{if(!s.value)return;const Ie={...s.value.feature,...ae};s.value={...s.value,feature:Ie},V(Ie)},vt=(ae,Ie)=>{if(!s.value)return;const qe=[...s.value.feature.items];qe[ae]={...qe[ae],...Ie};const Ge={...s.value.feature,items:qe};s.value={...s.value,feature:Ge},V(Ge)},Rt=ae=>{if(!n.value)return;const Ie={...n.value,...ae};n.value=Ie,A(Ie)},Cs=(ae,Ie)=>{if(!n.value)return;const qe=[...n.value.layers];qe[ae]={...qe[ae],...Ie};const Ge={...n.value,layers:qe};n.value=Ge,A(Ge)},ac=ae=>{const Ie=QE(Ne.value,ae);if(os(Ie),o.value!==null&&s.value){const qe=[...s.value.feature.items],Ge=qe[o.value];Ge.layersIds||(Ge.layersIds=[]),Ge.layersIds.includes(ae.id)||(Ge.layersIds=[...Ge.layersIds,ae.id]),s.value={...s.value,feature:{...s.value.feature,items:qe}}}o.value=null,xu(`Layer "${ae.id}" created`)};return _("div",{ref:v,className:"flex h-full",children:[_("div",{style:{width:l.value},className:"flex-shrink-0",children:_(Rnt,{selection:r.value,onSelectFeature:N,onSelectLayer:D,onNewFeature:W,onNewItem:F})}),_("div",{className:`w-1.5 cursor-col-resize flex-shrink-0 group hover:bg-blue-500/50 transition-colors ${c.value?"bg-blue-500/50":""}`,onMouseDown:$,children:_("div",{className:`w-0.5 h-full mx-auto ${c.value?"bg-blue-500":"bg-transparent group-hover:bg-blue-500"}`})}),_("div",{className:"flex-1 min-w-0 bg-slate-800 border border-slate-700 rounded-xl p-4 flex flex-col overflow-hidden ml-1.5",children:[_("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-slate-700",children:[_("div",{className:"flex items-center gap-4",children:[_("div",{children:[_("h2",{className:"text-lg font-medium text-white",children:t.value==="none"?"Select an item":i.value&&t.value==="layer"?"New Layer":t.value==="feature"?L(s.value.feature):t.value==="layer"?n.value.id||"Layer":"Select an item"}),t.value==="feature"&&s.value&&_("div",{className:"text-xs text-slate-400 mt-0.5",children:[s.value.featureType==="weatherFeatures"?"Weather Feature":"General Feature","  ",s.value.feature.presentation]}),t.value==="layer"&&n.value&&!i.value&&_("div",{className:"text-xs text-slate-400 mt-0.5",children:[n.value.layers?.length||0," sublayer(s)"]})]}),t.value!=="none"&&_("div",{className:"flex gap-1 border-l border-slate-600 pl-4",children:[_("button",{className:`px-3 py-1 rounded text-xs transition-colors ${e.value==="form"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-200"}`,onClick:()=>e.value="form",children:"Form"}),_("button",{className:`px-3 py-1 rounded text-xs transition-colors ${e.value==="json"?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-200"}`,onClick:()=>e.value="json",children:"JSON"})]}),(t.value==="layer"||t.value==="feature")&&_("div",{className:"flex items-center gap-1 border-l border-slate-600 ml-4 pl-4",children:[_("button",{className:`px-3 py-1 rounded text-xs transition-colors ${f.value?"bg-green-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-200"}`,onClick:C,title:f.value?"Hide map preview":"Show map preview",children:f.value?"Preview On":"Preview Off"}),f.value&&_("button",{className:`px-3 py-1 rounded text-xs transition-colors ${m.value?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:text-slate-200"}`,onClick:()=>m.value=!m.value,title:m.value?"Dock preview in side panel":"Open preview in modal",children:m.value?"Dock":"Modal"})]})]}),_("div",{className:"flex gap-2",children:[t.value==="feature"&&s.value&&_("button",{className:"btn danger small",onClick:Ce,children:"Delete"}),t.value==="layer"&&_(Dr,{children:i.value?_(Dr,{children:[_("button",{className:"btn success small",onClick:q,children:"Create"}),_("button",{className:"btn ghost small",onClick:J,children:"Cancel"})]}):_(Dr,{children:_("button",{className:"btn danger small",onClick:Ce,children:"Delete"})})})]})]}),_("div",{className:"flex-1 overflow-auto",children:[t.value==="none"&&_("div",{className:"flex items-center justify-center h-full text-slate-500",children:_("div",{className:"text-center",children:[_("p",{className:"mb-4",children:"Select a feature or layer from the navigator"}),_("div",{className:"flex gap-2 justify-center",children:[_("button",{className:"btn primary",onClick:()=>W("weatherFeatures"),children:"New Weather Feature"}),_("button",{className:"btn",onClick:()=>W("features"),children:"New General Feature"})]})]})}),e.value==="form"&&_(Dr,{children:[t.value==="feature"&&s.value&&_(znt,{feature:s.value.feature,featureType:s.value.featureType,selectedItemIndex:r.value?.type==="feature"?r.value.itemIndex:void 0,onUpdate:at,onUpdateItem:vt,onRemoveItem:me,onSelectItem:ae=>{r.value?.type==="feature"&&(r.value={...r.value,itemIndex:ae})},onOpenLayerCreator:ae=>o.value=ae}),t.value==="layer"&&n.value&&_(Dnt,{layer:n.value,onUpdate:Rt,onUpdateSublayer:Cs})]}),e.value==="json"&&t.value!=="none"&&_("div",{className:"h-full flex flex-col",children:[_("div",{className:"text-xs text-slate-400 mb-2",children:"Raw JSON view (read-only)."}),_("div",{className:"flex-1 border border-slate-600 rounded overflow-hidden",children:_(zye,{height:"100%",language:"json",theme:"vs-dark",value:t.value==="feature"&&s.value?(()=>{const ae=s.value.feature,Ie=new Set;ae.items?.forEach(bt=>{bt.layersIds?.forEach(ni=>Ie.add(ni))});const qe=Ne.value.layers.filter(bt=>Ie.has(bt.id)),Ge=new Set;ae.id&&Ge.add(ae.id),ae.items?.forEach(bt=>{bt.id&&Ge.add(bt.id),bt.legendDescription&&Ge.add(bt.legendDescription)});const Nt={};return["en","da","nb","sv"].forEach(bt=>{Nt[bt]={},Ge.forEach(ni=>{Ne.value.intl?.[bt]?.[ni]&&(Nt[bt][ni]=Ne.value.intl[bt][ni])})}),JSON.stringify({feature:ae,layers:qe,intl:Nt},null,2)})():t.value==="layer"&&n.value?JSON.stringify(n.value,null,2):"{}",options:{readOnly:!0,minimap:{enabled:!1},fontSize:12,lineNumbers:"on",folding:!0,wordWrap:"on",bracketPairColorization:{enabled:!0},scrollBeyondLastLine:!1},loading:_("div",{className:"flex items-center justify-center h-full text-slate-400",children:"Loading..."})})})]})]})]}),(t.value==="layer"||t.value==="feature")&&f.value&&!m.value&&_(Dr,{children:[_("div",{className:`w-1.5 cursor-col-resize flex-shrink-0 group hover:bg-blue-500/50 transition-colors ${h.value?"bg-blue-500/50":""}`,onMouseDown:T,children:_("div",{className:`w-0.5 h-full mx-auto ${h.value?"bg-blue-500":"bg-transparent group-hover:bg-blue-500"}`})}),_("div",{style:{width:d.value},className:"flex-shrink-0 h-full bg-slate-800 border border-slate-700 rounded-xl overflow-hidden ml-1.5",children:_(AV,{layer:t.value==="layer"?n.value:null,feature:t.value==="feature"?s.value?.feature:null,selectedSublayerIndex:y.value,mode:t.value==="layer"?"layer":"feature"})})]}),(t.value==="layer"||t.value==="feature")&&f.value&&m.value&&_("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>m.value=!1,children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[95vw] h-[90vh] max-w-[1400px] flex flex-col shadow-2xl overflow-hidden",onClick:ae=>ae.stopPropagation(),children:[_("div",{className:"p-2 border-b border-slate-700 flex items-center justify-between bg-slate-800/80 flex-shrink-0",children:[_("div",{className:"text-sm font-medium text-slate-200",children:"Map Preview"}),_("button",{className:"text-slate-400 hover:text-white text-xl leading-none",onClick:()=>m.value=!1,children:""})]}),_("div",{className:"flex-1 min-h-0",children:_(AV,{layer:t.value==="layer"?n.value:null,feature:t.value==="feature"?s.value?.feature:null,selectedSublayerIndex:y.value,mode:t.value==="layer"?"layer":"feature"})})]})}),_(Gye,{isOpen:o.value!==null,onClose:()=>o.value=null,onCreateLayer:ac}),_(jnt,{isOpen:a.value!==null,initialFeatureType:a.value||"weatherFeatures",onClose:()=>a.value=null,onCreate:Z}),x.value?.open&&_("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl p-6 max-w-md w-full mx-4 shadow-xl",children:[_("h3",{className:"text-lg font-medium text-white mb-4",children:['Remove "',x.value.itemName,'"?']}),_("div",{className:"space-y-3 mb-6",children:[x.value.translationKeys.length>0&&_("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[_("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:x.value.deleteTranslations,onChange:ae=>{x.value={...x.value,deleteTranslations:ae.target.checked}}}),_("div",{children:[_("div",{className:"text-sm text-white",children:"Also delete translations"}),_("div",{className:"text-xs text-slate-400 mt-1",children:[x.value.translationKeys.length," key(s): ",x.value.translationKeys.join(", ")]})]})]}),x.value.exclusiveLayerIds.length>0&&_("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[_("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:x.value.deleteLayers,onChange:ae=>{x.value={...x.value,deleteLayers:ae.target.checked}}}),_("div",{children:[_("div",{className:"text-sm text-white",children:"Also delete unused layers"}),_("div",{className:"text-xs text-slate-400 mt-1",children:[x.value.exclusiveLayerIds.length," layer(s) only used by this item: ",x.value.exclusiveLayerIds.slice(0,2).join(", "),x.value.exclusiveLayerIds.length>2&&` +${x.value.exclusiveLayerIds.length-2} more`]})]})]}),x.value.layerIds.length>0&&x.value.exclusiveLayerIds.length<x.value.layerIds.length&&_("div",{className:"text-xs text-slate-500 px-3",children:[x.value.layerIds.length-x.value.exclusiveLayerIds.length," layer(s) are used elsewhere and won't be deleted."]})]}),_("div",{className:"flex gap-2 justify-end",children:[_("button",{className:"btn ghost",onClick:()=>x.value=null,children:"Cancel"}),_("button",{className:"btn danger",onClick:ze,children:"Remove"})]})]})}),w.value?.open&&_("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl p-6 max-w-md w-full mx-4 shadow-xl",children:[_("h3",{className:"text-lg font-medium text-white mb-4",children:['Delete "',w.value.featureName,'"?']}),_("div",{className:"space-y-3 mb-6",children:[w.value.translationKeys.length>0&&_("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[_("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:w.value.deleteTranslations,onChange:ae=>{w.value={...w.value,deleteTranslations:ae.target.checked}}}),_("div",{children:[_("div",{className:"text-sm text-white",children:"Also delete translations"}),_("div",{className:"text-xs text-slate-400 mt-1",children:[w.value.translationKeys.length," key(s): ",w.value.translationKeys.slice(0,3).join(", "),w.value.translationKeys.length>3&&` +${w.value.translationKeys.length-3} more`]})]})]}),w.value.exclusiveLayerIds.length>0&&_("label",{className:"flex items-start gap-3 cursor-pointer p-3 rounded-lg bg-slate-700/50 hover:bg-slate-700 transition-colors",children:[_("input",{type:"checkbox",className:"form-checkbox mt-0.5",checked:w.value.deleteLayers,onChange:ae=>{w.value={...w.value,deleteLayers:ae.target.checked}}}),_("div",{children:[_("div",{className:"text-sm text-white",children:"Also delete unused layers"}),_("div",{className:"text-xs text-slate-400 mt-1",children:[w.value.exclusiveLayerIds.length," layer(s) only used by this feature: ",w.value.exclusiveLayerIds.slice(0,2).join(", "),w.value.exclusiveLayerIds.length>2&&` +${w.value.exclusiveLayerIds.length-2} more`]})]})]}),w.value.layerIds.length>0&&w.value.exclusiveLayerIds.length<w.value.layerIds.length&&_("div",{className:"text-xs text-slate-500 px-3",children:[w.value.layerIds.length-w.value.exclusiveLayerIds.length," layer(s) are used by other features and won't be deleted."]})]}),_("div",{className:"flex gap-2 justify-end",children:[_("button",{className:"btn ghost",onClick:()=>w.value=null,children:"Cancel"}),_("button",{className:"btn danger",onClick:re,children:"Delete"})]})]})}),_(Yge,{isOpen:S.isOpen.value,title:S.config.value?.title||"",message:S.config.value?.message||"",confirmLabel:S.config.value?.confirmLabel,cancelLabel:S.config.value?.cancelLabel,variant:S.config.value?.variant,onConfirm:S.handleConfirm,onCancel:S.handleCancel})]})}function jN(){return{type:"vectorTiled",source:"",sourceKind:"uri"}}function hct({isOpen:t,onClose:e,onSave:i,initialLayer:r,title:s="Add Layer",saveLabel:n="Add"}){const o=De(r||jN());if(Ot(()=>{t&&(o.value=r?{...r}:jN())},[t,r]),!t)return null;const a=()=>{o.value=r?{...r}:jN()},l=()=>{o.value.source?.trim()&&(i(o.value),a())},c=()=>{a(),e()},d=o.value;return _("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:c,children:_("div",{className:"bg-slate-800 border border-slate-600 rounded-xl w-[600px] max-w-[95vw] min-h-[400px] max-h-[85vh] flex flex-col shadow-2xl",onClick:h=>h.stopPropagation(),children:[_("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[_("h3",{className:"text-lg font-medium text-white",children:s}),_("button",{className:"text-slate-400 hover:text-white text-xl leading-none",onClick:c,children:""})]}),_("div",{className:"flex-1 overflow-auto p-4",children:_(Uye,{config:d,onChange:h=>{o.value={...o.value,...h}}})}),_("div",{className:"p-4 border-t border-slate-700 flex gap-2 justify-end",children:[_("button",{className:"btn ghost",onClick:c,children:"Cancel"}),_("button",{className:"btn primary",onClick:l,disabled:!d.source?.trim(),children:n})]})]})})}function VN(t){return t.thumbnailBase64?t.thumbnailBase64.startsWith("data:")?t.thumbnailBase64:`data:image/png;base64,${t.thumbnailBase64}`:t.thumbnailUrl?t.thumbnailUrl:null}const rve=200,pct=.35,fct=280,sve="hemswx-basemaps-nav-width",nve=250,mct=.4,yct=400,ove="hemswx-basemaps-preview-width",ave="hemswx-basemaps-preview-visible",gct=[{code:"world",label:"World"},{code:"no",label:"Norway"},{code:"se",label:"Sweden"},{code:"dk",label:"Denmark"},{code:"fi",label:"Finland"}],vct=[{value:"metric",label:"Metric"},{value:"aviation",label:"Aviation"},{value:"nautical",label:"Nautical"}],bct=()=>{try{const t=localStorage.getItem(sve);if(t){const e=parseInt(t,10);if(!isNaN(e)&&e>=rve)return e}}catch{}return fct},wct=t=>{try{localStorage.setItem(sve,String(Math.round(t)))}catch{}},_ct=()=>{try{const t=localStorage.getItem(ove);if(t){const e=parseInt(t,10);if(!isNaN(e)&&e>=nve)return e}}catch{}return yct},xct=t=>{try{localStorage.setItem(ove,String(Math.round(t)))}catch{}},Sct=()=>{try{const t=localStorage.getItem(ave);if(t!==null)return t==="true"}catch{}return!0},$ct=t=>{try{localStorage.setItem(ave,String(t))}catch{}};function Ict(){return{id:"",name:"",countries:[],unitType:void 0,baseLayers:[],referenceLayers:[]}}function TQ({layer:t,index:e,onEdit:i,onRemove:r,onMoveUp:s,onMoveDown:n}){return _("div",{className:"flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-all border-l border-slate-700 hover:bg-slate-700/50 text-slate-400 group",children:[_("div",{className:"w-3.5 h-3.5 border border-slate-500 flex items-center justify-center flex-shrink-0 rounded-sm bg-slate-800",children:_("span",{className:"text-[8px]",children:e+1})}),_("div",{className:"flex-1 min-w-0",children:_("div",{className:"text-sm truncate",children:[t.type.toUpperCase()," - ",t.source.substring(0,30),"..."]})}),_("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[_("button",{className:"text-xs px-1 hover:bg-slate-600 rounded",onClick:i,children:"Edit"}),_("button",{className:"text-xs px-1 hover:bg-red-900/50 text-red-400 rounded",onClick:r,children:""}),_("div",{className:"flex flex-col gap-0",children:[s&&_("button",{className:"text-[8px] leading-none hover:text-white",onClick:s,children:""}),n&&_("button",{className:"text-[8px] leading-none hover:text-white",onClick:n,children:""})]})]})]})}function kct(){const t=De(bct()),e=De(!1),i=De(_ct()),r=De(!1),s=De(Sct()),n=kt(null),o=Kge(),a=Jt(()=>Ne.value.baseMaps||[]),l=Jt(()=>pf.value.index),c=Jt(()=>{const A=l.value;return A<0||A>=a.value.length?null:a.value[A]}),d=De(!1),h=De(null),[f,m]=sc("general"),y=Jt(()=>d.value?h.value:c.value),v=De({open:!1,layerType:"base",editIndex:null}),b=Eo(A=>{A.preventDefault(),e.value=!0;const q=ee=>{if(!n.current)return;const re=n.current.getBoundingClientRect(),me=re.width*pct,ze=Math.min(me,Math.max(rve,ee.clientX-re.left));t.value=ze},J=()=>{e.value=!1,wct(t.value),document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",J)};document.addEventListener("mousemove",q),document.addEventListener("mouseup",J)},[]),w=Eo(A=>{A.preventDefault(),r.value=!0;const q=ee=>{if(!n.current)return;const re=n.current.getBoundingClientRect(),me=re.width*mct,ze=Math.min(me,Math.max(nve,re.right-ee.clientX));i.value=ze},J=()=>{r.value=!1,xct(i.value),document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",J)};document.addEventListener("mousemove",q),document.addEventListener("mouseup",J)},[]),x=Eo(()=>{const A=!s.value;s.value=A,$ct(A)},[]),S=A=>{Qk(A),d.value=!1,h.value=JSON.parse(JSON.stringify(a.value[A])),m("general")},$=()=>{Qk(-1),d.value=!0,h.value=Ict(),m("general")},T=()=>{if(h.value&&h.value.id.trim()&&h.value.name.trim()&&h.value.baseLayers.length!==0){if(d.value){if(a.value.find(q=>q.id===h.value.id)){xu(`Basemap with ID "${h.value.id}" already exists`);return}qrt(h.value),Qk(a.value.length),d.value=!1}else if(l.value>=0){const A={...Ne.value};A.baseMaps||(A.baseMaps=[]),A.baseMaps=A.baseMaps.map((q,J)=>J===l.value?h.value:q),os(A)}}},C=()=>{d.value?(Qk(-1),h.value=null,d.value=!1):l.value>=0&&(h.value=JSON.parse(JSON.stringify(a.value[l.value])))},L=()=>{l.value<0||!c.value||o.confirm({title:"Delete Basemap",message:`Are you sure you want to delete "${c.value.name||c.value.id}"?`,confirmLabel:"Delete",variant:"danger",onConfirm:()=>{Brt(l.value),h.value=null,d.value=!1}})},N=A=>{h.value&&(h.value={...h.value,...A})},D=A=>{v.value={open:!0,layerType:A,editIndex:null}},F=(A,q)=>{if(!h.value)return;const J=A==="base"?h.value.baseLayers:h.value.referenceLayers;v.value={open:!0,layerType:A,editIndex:q,layer:J[q]}},W=A=>{if(!h.value)return;const{layerType:q,editIndex:J}=v.value;if(q==="base"){const ee=[...h.value.baseLayers];J!==null?ee[J]=A:ee.push(A),h.value={...h.value,baseLayers:ee}}else{const ee=[...h.value.referenceLayers];J!==null?ee[J]=A:ee.push(A),h.value={...h.value,referenceLayers:ee}}v.value={open:!1,layerType:"base",editIndex:null}},Z=(A,q)=>{h.value&&(A==="base"?h.value={...h.value,baseLayers:h.value.baseLayers.filter((J,ee)=>ee!==q)}:h.value={...h.value,referenceLayers:h.value.referenceLayers.filter((J,ee)=>ee!==q)})},V=(A,q,J)=>{if(!h.value)return;const ee=A==="base"?[...h.value.baseLayers]:[...h.value.referenceLayers],[re]=ee.splice(q,1);ee.splice(J,0,re),A==="base"?h.value={...h.value,baseLayers:ee}:h.value={...h.value,referenceLayers:ee}};return _("div",{ref:n,className:"flex h-full",children:[_("div",{style:{width:t.value},className:"flex-shrink-0 bg-slate-900 border-r border-slate-800 flex flex-col",children:[_("div",{className:"flex flex-col gap-2 p-3 border-b border-slate-800 bg-slate-900/50 backdrop-blur",children:_("div",{className:"flex items-center justify-between",children:[_("h3",{className:"text-sm font-medium text-slate-300",children:"Basemap Manager"}),_("div",{className:"flex gap-1",children:_("button",{className:"w-6 h-6 flex items-center justify-center rounded hover:bg-slate-800 text-slate-400",onClick:$,title:"New Basemap",children:"+"})})]})}),_("div",{className:"flex-1 overflow-auto p-2 space-y-1",children:a.value.length===0?_("div",{className:"text-center text-slate-500 text-sm py-8",children:["No basemaps defined.",_("br",{}),_("button",{className:"text-blue-400 hover:text-blue-300 mt-2",onClick:$,children:"Add your first basemap"})]}):a.value.map((A,q)=>{const J=VN(A),ee=l.value===q&&!d.value;return _("div",{className:`w-full text-left px-2 py-2 rounded-lg transition-colors flex items-center gap-2 cursor-pointer ${ee?"bg-blue-600/20 text-blue-200 border border-blue-500/50":"hover:bg-slate-800 text-slate-300 border border-transparent"}`,onClick:()=>S(q),children:[J?_("img",{src:J,alt:"",className:"w-10 h-8 rounded object-cover flex-shrink-0"}):_("div",{className:"w-10 h-8 rounded bg-slate-700 flex items-center justify-center flex-shrink-0",children:_("span",{className:"text-xs text-slate-400",children:"Map"})}),_("div",{className:"flex-1 min-w-0",children:[_("div",{className:"font-medium text-sm truncate",children:A.name||A.id}),_("div",{className:"text-xs opacity-70 truncate",children:[A.baseLayers.length," layer",A.baseLayers.length!==1?"s":""]})]})]},A.id)})})]}),_("div",{className:`w-1 cursor-col-resize flex-shrink-0 group hover:bg-blue-500/50 transition-colors bg-slate-900 border-l border-r border-slate-800 ${e.value?"bg-blue-500/50":""}`,onMouseDown:b}),_("div",{className:"flex-1 min-w-0 bg-slate-900 flex flex-col overflow-hidden",children:h.value?_("div",{className:"flex flex-col h-full p-4",children:[_(zP,{title:d.value?"New Basemap":h.value.name||h.value.id||"Basemap",id:h.value.id,isNew:d.value,showPreview:s.value,onTogglePreview:x,onSave:T,onCancel:C,onDelete:d.value?void 0:L}),_(s_,{tabs:[{id:"general",label:"General"},{id:"layers",label:"Layers"},{id:"translations",label:"Translations"}],activeTab:f,onChange:A=>m(A)}),_("div",{className:"flex-1 overflow-auto space-y-4",children:[f==="general"&&_("div",{className:"space-y-4",children:[_("div",{className:"grid grid-cols-2 gap-3",children:[_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["ID ",_("span",{className:"text-red-400",children:"*"})]}),_("input",{type:"text",className:"form-input",value:y.value.id,onChange:A=>handleUpdate({id:A.target.value}),placeholder:"e.g. standard, nautical"})]}),_("div",{className:"form-group",children:[_("label",{className:"form-label",children:["Name ",_("span",{className:"text-red-400",children:"*"})]}),_("input",{type:"text",className:"form-input",value:h.value.name,onChange:A=>N({name:A.target.value}),placeholder:"Display name"})]})]}),_("div",{className:"form-group mt-3",children:[_("label",{className:"form-label",children:"Unit Type"}),_("div",{className:"flex flex-wrap gap-2",children:vct.map(A=>{const q=y.value.unitType===A.value;return _("button",{type:"button",className:`px-3 py-1 rounded-full text-xs font-medium transition-all border ${q?"bg-blue-600 text-white border-blue-500 shadow-sm":"bg-transparent text-slate-300 border-slate-600 hover:border-slate-500"}`,onClick:()=>{handleUpdate({unitType:q?void 0:A.value})},children:A.label},A.value)})})]}),_("div",{className:"form-group mt-3",children:[_("label",{className:"form-label",children:"Thumbnail"}),_("div",{className:"flex gap-4 items-start",children:[_("div",{className:"flex-shrink-0",children:VN(h.value)?_("img",{src:VN(h.value),alt:"Thumbnail preview",className:"w-28 h-20 rounded-lg object-cover border border-slate-600"}):_("div",{className:"w-28 h-20 rounded-lg bg-slate-700 border border-slate-600 flex items-center justify-center",children:_("span",{className:"text-xs text-slate-500",children:"No image"})})}),_("div",{className:"flex-1 space-y-2",children:[_("div",{className:"flex gap-2",children:[_("label",{className:"btn tiny cursor-pointer",children:["Upload Image",_("input",{type:"file",accept:"image/*",className:"hidden",onChange:A=>{const q=A.target.files?.[0];if(!q)return;const J=new FileReader;J.onload=()=>{const ee=J.result.split(",")[1];N({thumbnailBase64:ee,thumbnailUrl:void 0})},J.readAsDataURL(q)}})]}),(h.value.thumbnailBase64||h.value.thumbnailUrl)&&_("button",{className:"btn tiny danger",onClick:()=>N({thumbnailBase64:void 0,thumbnailUrl:void 0}),children:"Clear"})]}),_("div",{className:"text-xs text-slate-500",children:"Or enter URL:"}),_("input",{type:"text",className:"form-input text-sm",value:h.value.thumbnailUrl||"",onChange:A=>{const q=A.target.value;N({thumbnailUrl:q||void 0,thumbnailBase64:q?void 0:h.value.thumbnailBase64})},placeholder:"https://...",disabled:!!h.value.thumbnailBase64})]})]})]}),_("div",{className:"form-group mt-3",children:[_("label",{className:"form-label",children:"Countries"}),_("div",{className:"flex flex-wrap gap-2",children:gct.map(A=>{const q=(h.value?.countries||[]).includes(A.code);return _("button",{type:"button",className:`px-3 py-1 rounded-full text-xs font-medium transition-all border ${q?"bg-blue-600 text-white border-blue-500 shadow-sm":"bg-transparent text-slate-300 border-slate-600 hover:border-slate-500"}`,onClick:()=>{const J=h.value?.countries||[];N(q?{countries:J.filter(ee=>ee!==A.code)}:{countries:[...J,A.code]})},children:A.code.toUpperCase()},A.code)})}),_("div",{className:"text-xs text-slate-500 mt-1",children:"Select specific countries or leave empty for all."})]})]}),f==="layers"&&_("div",{className:"space-y-6",children:[_("div",{className:"space-y-2",children:[_("div",{className:"flex justify-between items-center",children:[_("h3",{className:"text-sm font-medium text-slate-300",children:"Base Layers"}),_("button",{className:"btn tiny",onClick:()=>D("base"),children:"+ Add Layer"})]}),h.value.baseLayers.length===0?_("div",{className:"text-center text-slate-500 text-sm py-4 border border-dashed border-slate-600 rounded",children:"No base layers. At least one is required."}):_("div",{className:"space-y-1",children:h.value.baseLayers.map((A,q)=>_(TQ,{layer:A,index:q,onEdit:()=>F("base",q),onRemove:()=>Z("base",q),onMoveUp:q>0?()=>V("base",q,q-1):void 0,onMoveDown:q<h.value.baseLayers.length-1?()=>V("base",q,q+1):void 0},q))})]}),_("div",{className:"space-y-2",children:[_("div",{className:"flex justify-between items-center",children:[_("h3",{className:"text-sm font-medium text-slate-300",children:"Reference Layers"}),_("button",{className:"btn tiny",onClick:()=>D("reference"),children:"+ Add Layer"})]}),h.value.referenceLayers.length===0?_("div",{className:"text-center text-slate-500 text-sm py-4 border border-dashed border-slate-600 rounded",children:"No reference layers (optional)."}):_("div",{className:"space-y-1",children:h.value.referenceLayers.map((A,q)=>_(TQ,{layer:A,index:q,onEdit:()=>F("reference",q),onRemove:()=>Z("reference",q),onMoveUp:q>0?()=>V("reference",q,q-1):void 0,onMoveDown:q<h.value.referenceLayers.length-1?()=>V("reference",q,q+1):void 0},q))})]})]}),f==="translations"&&_("div",{className:"space-y-6",children:_("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4",children:_(Wl,{translationKey:h.value.id,label:`Basemap Name Translations (ID: ${h.value.id||"none"})`,hint:"Ensure the Basemap ID is set in the General tab first."})})})]})]}):_("div",{className:"flex items-center justify-center h-full text-slate-500",children:_("div",{className:"text-center",children:[_("p",{className:"mb-4",children:"Select a basemap or create a new one"}),_("button",{className:"btn primary",onClick:$,children:"New Basemap"})]})})}),h.value&&s.value&&_(Dr,{children:[_("div",{className:`w-1 cursor-col-resize flex-shrink-0 group hover:bg-blue-500/50 transition-colors bg-slate-900 border-l border-r border-slate-800 ${r.value?"bg-blue-500/50":""}`,onMouseDown:w}),_("div",{style:{width:i.value},className:"flex-shrink-0 bg-slate-900 overflow-hidden",children:_(AV,{basemap:h.value,mode:"basemap"})})]}),_(hct,{isOpen:v.value.open,onClose:()=>v.value={open:!1,layerType:"base",editIndex:null},onSave:W,initialLayer:v.value.layer,title:v.value.editIndex!==null?`Edit ${v.value.layerType==="base"?"Base":"Reference"} Layer`:`Add ${v.value.layerType==="base"?"Base":"Reference"} Layer`,saveLabel:v.value.editIndex!==null?"Save":"Add"}),_(Yge,{isOpen:o.isOpen.value,title:o.config.value?.title||"",message:o.config.value?.message||"",confirmLabel:o.config.value?.confirmLabel,cancelLabel:o.config.value?.cancelLabel,variant:o.config.value?.variant,onConfirm:o.handleConfirm,onCancel:o.handleCancel})]})}function Tct(){const t=De(Z_.value?.apiKey||""),e=De(!1),i=De(null),r=async()=>{e.value=!0,i.value=null;try{const o={apiKey:t.value||void 0};qnt(o),kQ(),await Zge(o),i.value={success:!0,message:"Configuration saved"}}catch(o){i.value={success:!1,message:o instanceof Error?o.message:"Failed to save credentials"}}finally{e.value=!1}},s=()=>{Gnt(),kQ(),t.value="",i.value={success:!0,message:"Credentials cleared"}},n=(()=>{try{const o="/hemswx-map-editor/",a=o.endsWith("/")?o:`${o}/`;return`${window.location.origin}${a}oauth-callback.html`}catch{return""}})();return _("div",{className:"mb-8 pb-6 border-b border-slate-600",children:[_("div",{className:"flex items-center justify-between mb-3",children:[_("h4",{className:"font-medium",children:"ArcGIS Configuration"}),_("span",{className:`px-2 py-0.5 rounded text-xs ${RX.value?"bg-green-600/30 text-green-300 border border-green-600":"bg-orange-600/30 text-orange-300 border border-orange-600"}`,children:RX.value?"Configured":"Not Set"})]}),_("p",{className:"text-sm text-slate-400 mb-4",children:["Configure ArcGIS settings for map preview. Portal items from ",Ig," require OAuth sign-in."]}),_("div",{className:"space-y-6",children:[_("div",{children:[_("div",{className:"form-group mb-3",children:[_("label",{className:"form-label",children:"API Key"}),_("input",{type:"password",className:"form-input font-mono",value:t.value,onInput:o=>{t.value=o.target.value,i.value=null},placeholder:"Enter ArcGIS API Key"}),_("p",{className:"text-xs text-slate-500 mt-1",children:"For accessing ArcGIS basemaps and services. Get one at developers.arcgis.com"})]}),i.value&&_("div",{className:`mb-3 p-2 rounded text-sm ${i.value.success?"bg-green-900/30 text-green-300 border border-green-700":"bg-red-900/30 text-red-300 border border-red-700"}`,children:[i.value.success?" ":" ",i.value.message]}),_("div",{className:"flex gap-2",children:[_("button",{className:"btn primary small",onClick:r,disabled:e.value,children:e.value?"Saving...":"Save API Key"}),Hnt.value&&_("button",{className:"btn danger small",onClick:s,children:"Clear"})]})]}),_("div",{className:"p-4 bg-slate-700/50 rounded-lg space-y-3",children:[_("div",{children:[_("h5",{className:"text-sm font-medium text-slate-200 mb-1",children:"Portal Authentication"}),_("p",{className:"text-xs text-slate-400",children:"OAuth sign-in is available in the Map Preview panel when viewing portal items."})]}),_("div",{className:"text-xs text-slate-400 space-y-1",children:[_("div",{children:[_("span",{className:"text-slate-500",children:"Client ID:"})," ",_("span",{className:"font-mono text-slate-300",children:EV})]}),_("div",{children:[_("span",{className:"text-slate-500",children:"Portal:"})," ",_("span",{className:"font-mono text-slate-300",children:Ig})]}),_("div",{children:[_("span",{className:"text-slate-500",children:"Redirect URI:"})," ",_("span",{className:"font-mono text-slate-300",children:n||"(open in browser)"})]}),nr.value.portalAuthenticated&&_("div",{className:"mt-2 pt-2 border-t border-slate-600",children:_("span",{className:"text-green-400",children:["Signed in as ",nr.value.signedInUserId||"user"]})})]})]})]})]})}function Ect(){const t=Jt(()=>Ne.value.layers?.map(r=>r.id).filter(Boolean)||[]),e=Jt(()=>Ur.value.customLogicLayers),i=Jt(()=>Ur.value.nonTranslatableKeys);return _("div",{className:"max-h-[calc(100vh-180px)] overflow-auto",children:[_("div",{className:"mb-4",children:[_("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),_("p",{className:"text-sm text-slate-400 mb-4",children:"Configure layers with custom logic that are referenced in your application code."})]}),_("div",{className:"space-y-4",children:[_(Tct,{}),_("div",{children:[_("h4",{className:"font-medium mb-3",children:"Referenced Layers"}),_("p",{className:"text-sm text-slate-400 mb-3",children:'Layers marked as "referenced" are used in your application code (Dart) and should be handled differently during validation.'}),_("div",{className:"space-y-3",children:[_("div",{className:"p-3 bg-slate-700 rounded",children:[_("div",{className:"text-sm font-medium mb-2",children:"Current Referenced Layers:"}),e.value.size===0?_("div",{className:"text-slate-400 text-sm italic",children:"None"}):_("div",{className:"font-mono text-sm text-blue-300",children:Array.from(e.value).join(", ")})]}),_("div",{className:"p-3 bg-slate-700 rounded",children:[_("div",{className:"text-sm font-medium mb-2",children:"Available Layers:"}),t.value.length===0?_("div",{className:"text-slate-400 text-sm",children:"No layers found. Add some layers first."}):_("div",{className:"flex flex-wrap gap-2",children:t.value.map(r=>_("button",{onClick:()=>Lnt(r),className:`px-2 py-1 rounded text-xs font-mono transition-colors ${FP(r)?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-slate-300 hover:bg-slate-500"}`,children:[FP(r)?" ":"+ ",r]},r))})]})]})]}),_("div",{className:"mt-6 p-3 bg-slate-700 rounded text-sm",children:[_("h5",{className:"font-medium mb-2",children:'What does "Referenced" mean?'}),_("ul",{className:"text-slate-400 space-y-1 text-xs",children:[_("li",{children:" Layer is referenced/used in your Dart application code"}),_("li",{children:" Layer should be handled differently during validation"}),_("li",{children:" Layer appears with visual indicators throughout the UI"}),_("li",{children:" Settings are saved locally in your browser"})]})]}),e.value.size>0&&_("div",{className:"mt-4 p-3 bg-blue-900/20 border border-blue-700 rounded text-sm",children:[_("h5",{className:"font-medium mb-2 text-blue-300",children:["Referenced Layers (",e.value.size,")"]}),_("div",{className:"flex flex-wrap gap-1",children:Array.from(e.value).map(r=>_("span",{className:"font-mono text-xs bg-blue-600 text-white px-2 py-1 rounded",children:r},r))})]}),_("div",{className:"mt-8 pt-6 border-t border-slate-600",children:[_("h4",{className:"font-medium mb-3",children:"Locked Translations"}),_("p",{className:"text-sm text-slate-400 mb-3",children:`Translation keys marked as "locked" will not show warnings for missing translations. These are typically keys that don't need translation (e.g., proper nouns, technical terms).`}),_("div",{className:"p-3 bg-slate-700 rounded",children:i.value.size===0?_("div",{className:"text-slate-400 text-sm italic",children:"No locked translation keys"}):_("div",{className:"space-y-2",children:[_("div",{className:"text-sm font-medium mb-2",children:["Locked Keys (",i.value.size,"):"]}),_("div",{className:"flex flex-wrap gap-2",children:Array.from(i.value).sort().map(r=>_("div",{className:"flex items-center gap-1 px-2 py-1 bg-amber-900/30 border border-amber-700 rounded text-xs",children:[_("span",{className:"font-mono text-amber-300",children:r}),_("button",{onClick:()=>Vye(r),className:"ml-1 text-amber-400 hover:text-red-400 transition-colors",title:"Unlock this key",children:""})]},r))})]})}),_("div",{className:"mt-3 p-3 bg-slate-700 rounded text-sm",children:[_("h5",{className:"font-medium mb-2",children:"How to lock a translation key?"}),_("ul",{className:"text-slate-400 space-y-1 text-xs",children:[_("li",{children:" Go to the Translations tab"}),_("li",{children:" Select the key you want to lock"}),_("li",{children:' Click the "Lock" button in the editor panel'}),_("li",{children:" Locked keys won't trigger missing translation warnings"})]})]})]})]})]})}function Mct({onOpenClick:t}){return _("div",{className:"flex items-center justify-center min-h-[60vh]",onPaste:n=>{const o=n.clipboardData?.getData("text");if(o)try{const a=JSON.parse(o),l=iV(a);os(l);const c=a.map_layers!==void 0;xu(` JSON pasted from clipboard${c?" (extracted from map_layers)":""}`)}catch{}},children:_("div",{className:"w-full max-w-2xl text-center p-8 border border-dashed border-slate-600 rounded-xl bg-slate-900/40",onDrop:n=>{n.preventDefault();const a=Array.from(n.dataTransfer?.files||[]).find(l=>l.type==="application/json"||l.name.endsWith(".json"));if(a){const l=new FileReader;l.onload=c=>{const d=c.target?.result;if(d)try{const h=JSON.parse(d),f=iV(h);os(f);const m=h.map_layers!==void 0;xu(` JSON file loaded successfully${m?" (extracted from map_layers)":""}`)}catch{}},l.readAsText(a)}},onDragOver:n=>{n.preventDefault()},children:[_("h2",{className:"text-lg mb-2 text-slate-100",children:"Get Started"}),_("p",{className:"mb-4 text-slate-400",children:"Choose an option to begin"}),_("div",{className:"flex flex-col gap-2 items-center",children:[_("button",{className:"btn primary",onClick:()=>{os(i7())},children:"Start with Empty Structure"}),_("button",{className:"btn",onClick:t,children:"Open Existing JSON"})]}),_("div",{className:"mt-4 text-xs text-slate-500",children:"Tip: You can also drop JSON files here or paste JSON"})]})})}function Cct(){return _("div",{className:"w-16 flex flex-col items-center py-4 bg-slate-950 border-r border-slate-700 h-full flex-shrink-0 z-10",children:[_("div",{className:"mb-6",children:_("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-blue-500/20",children:"H"})}),_("div",{className:"flex flex-col gap-2 w-full px-2",children:[{id:"workspace",label:"Features",icon:_(Pct,{})},{id:"basemaps",label:"Basemaps",icon:_(Act,{})},{id:"json",label:"JSON",icon:_(Oct,{})},{id:"settings",label:"Settings",icon:_(Lct,{})}].map(e=>_("button",{onClick:()=>n0.value=e.id,className:`
              w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200 group relative
              ${n0.value===e.id?"bg-blue-500 text-white shadow-md shadow-blue-500/20":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}
            `,title:e.label,children:[e.icon,_("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-800 text-slate-200 text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 border border-slate-700 transition-opacity",children:e.label})]},e.id))})]})}function Pct(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_("path",{d:"m12 14 9-5-9-5-9 5 9 5z"}),_("path",{d:"m12 14 9-5-9-5-9 5 9 5z",transform:"translate(0 6)"}),_("path",{d:"m12 14 9-5-9-5-9 5 9 5z",transform:"translate(0 12)"})]})}function Act(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_("polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"}),_("line",{x1:"9",x2:"9",y1:"3",y2:"18"}),_("line",{x1:"15",x2:"15",y1:"6",y2:"21"})]})}function Lct(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),_("circle",{cx:"12",cy:"12",r:"3"})]})}function Oct(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_("polyline",{points:"16 18 22 12 16 6"}),_("polyline",{points:"8 6 2 12 8 18"})]})}function Rct(){const t=kt(null);Ot(()=>{jb.value||zrt()},[]),Ot(()=>{const i=r=>{(r.metaKey||r.ctrlKey)&&(r.key==="s"||r.key==="S")&&(r.preventDefault(),r.stopPropagation())};return window.addEventListener("keydown",i,!0),()=>window.removeEventListener("keydown",i,!0)},[]);const e=()=>{t.current?.click()};return _("div",{className:"flex h-screen w-screen overflow-hidden bg-slate-900 text-slate-200",children:[_("input",{ref:t,type:"file",accept:"application/json,.json",style:{display:"none"},onChange:i=>{const r=i.target.files?.[0];if(r){const s=new FileReader;s.onload=n=>{const o=n.target?.result;if(o)try{const a=JSON.parse(o),l=iV(a);os(l);const c=a.map_layers!==void 0;xu(` JSON file loaded successfully${c?" (extracted from map_layers)":""}`)}catch(a){xu(` Invalid JSON: ${a instanceof Error?a.message:"Parse error"}`)}},s.readAsText(r)}}}),jb.value&&_(Cct,{}),_("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden relative",children:[jb.value&&_("header",{className:"flex gap-3 items-center p-3 border-b border-slate-700 bg-slate-900/90 backdrop-blur z-[5] flex-shrink-0",children:[_("h1",{className:"text-base m-0 mr-2 opacity-95",children:"Map Layers JSON Editor"}),_("button",{className:"btn small",onClick:e,children:"Open JSON"}),_("div",{className:"ml-auto",children:jb.value&&_("span",{className:"text-slate-500 text-xs",children:Frt.value})})]}),_("div",{className:"flex-1 overflow-hidden relative",children:jb.value?_(Dr,{children:[n0.value==="workspace"&&_("div",{className:"h-full w-full",children:_(dct,{})}),n0.value==="basemaps"&&_("div",{className:"h-full w-full p-4 overflow-auto",children:_(kct,{})}),n0.value==="json"&&_("div",{className:"h-full w-full flex flex-col p-4",children:_("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-3 flex flex-col flex-1 overflow-hidden",children:[_("div",{className:"flex-1 min-h-0",children:_(knt,{title:"Complete JSON Configuration",value:Ne.value,onChange:i=>{os(i)},height:"100%"})}),_("div",{className:"flex gap-2 mt-3 pt-3 border-t border-slate-700 flex-shrink-0",children:[_("button",{className:"btn small",onClick:()=>{const i=Rrt(JSON.stringify(Ne.value));i.valid||xu(` Validation failed: ${i.errors.length} error(s), ${i.warnings.length} warning(s)`)},children:"Validate Structure"}),_("button",{className:"btn success small",onClick:()=>{try{const i=JSON.stringify(Ne.value,null,2),r=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-");Trt(`map-layers-${r}.json`,i),xu(" JSON file downloaded")}catch{}},children:"Download JSON"})]})]})}),n0.value==="settings"&&_("div",{className:"h-full w-full p-4 overflow-auto",children:_("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-3 max-w-4xl mx-auto",children:_(Ect,{})})})]}):_("div",{className:"p-6 h-full overflow-auto",children:_(Mct,{onOpenClick:e})})})]})]})}_w(_(Rct,{}),document.getElementById("app"));export{d_t as $,ag as A,Pe as B,oe as C,Rh as D,_8 as E,FNe as F,zNe as G,xe as H,$t as I,Bo as J,OZ as K,jBe as L,ce as M,Fhe as N,Hpt as O,gk as P,QHe as Q,zt as R,Hb as S,tSe as T,vGe as U,L$ as V,ne as W,$pe as X,NS as Y,tpe as Z,K as _,Mr as a,jI as a$,V_ as a0,Iht as a1,K1t as a2,X1t as a3,bGe as a4,VZe as a5,JOe as a6,ZSe as a7,Bie as a8,jdt as a9,Ww as aA,Nn as aB,Fgt as aC,mze as aD,vKe as aE,vfe as aF,I0 as aG,kw as aH,g$ as aI,_i as aJ,as as aK,hU as aL,Is as aM,jt as aN,y_ as aO,yn as aP,I_ as aQ,_r as aR,opt as aS,spt as aT,npt as aU,Ru as aV,rr as aW,vi as aX,ote as aY,Hn as aZ,c$ as a_,cS as aa,jv as ab,$S as ac,J5e as ad,cgt as ae,dt as af,dgt as ag,Et as ah,Yi as ai,qf as aj,kM as ak,X as al,DW as am,em as an,nt as ao,Yee as ap,Kee as aq,Xee as ar,H as as,out as at,tut as au,lSt as av,LZe as aw,Out as ax,pvt as ay,$vt as az,w8 as b,kxe as b$,Rw as b0,Sy as b1,or as b2,xs as b3,e6 as b4,Vle as b5,zr as b6,dy as b7,RIe as b8,kht as b9,ho as bA,Q as bB,qa as bC,DBe as bD,p_ as bE,Ue as bF,SEe as bG,zv as bH,xo as bI,xoe as bJ,BLe as bK,IJe as bL,DEe as bM,NEe as bN,Sf as bO,WLe as bP,JPe as bQ,VLe as bR,Mh as bS,S_t as bT,xae as bU,wh as bV,ss as bW,ke as bX,b9e as bY,eh as bZ,v9e as b_,KL as ba,XA as bb,KU as bc,XU as bd,Pre as be,Cre as bf,_Ie as bg,Vd as bh,FD as bi,yht as bj,qn as bk,QU as bl,Fv as bm,qut as bn,Lce as bo,_Ae as bp,$s as bq,Us as br,R_ as bs,Dut as bt,Gt as bu,pU as bv,Wpt as bw,fa as bx,Eie as by,FBe as bz,$je as c,ra as c$,k$e as c0,E$e as c1,T$e as c2,M$e as c3,Jdt as c4,Zdt as c5,bn as c6,LD as c7,O_ as c8,d3 as c9,va as cA,Fe as cB,Nv as cC,ar as cD,Jie as cE,LT as cF,yT as cG,KSe as cH,Re as cI,Fce as cJ,xz as cK,Pze as cL,Io as cM,ft as cN,lt as cO,U as cP,C2 as cQ,y5 as cR,Oht as cS,Kft as cT,ymt as cU,Rr as cV,D7e as cW,Uf as cX,Iu as cY,Ine as cZ,Fi as c_,Pg as ca,Iy as cb,bi as cc,ks as cd,Tle as ce,yft as cf,g3 as cg,mRe as ch,Le as ci,$Ee as cj,We as ck,Ee as cl,Nu as cm,k_ as cn,bl as co,yRe as cp,pt as cq,Mi as cr,cLe as cs,Ts as ct,Wi as cu,ue as cv,Ei as cw,eU as cx,Idt as cy,x_ as cz,h3 as d,Jpt as d$,Vs as d0,Qr as d1,mU as d2,rD as d3,tze as d4,Wee as d5,Dg as d6,qg as d7,Bt as d8,Ml as d9,yz as dA,She as dB,t7e as dC,$he as dD,xhe as dE,h7e as dF,o7e as dG,H9e as dH,Z9e as dI,Mg as dJ,ZA as dK,tc as dL,k2 as dM,x$ as dN,HDe as dO,wce as dP,JDe as dQ,gce as dR,bce as dS,d$e as dT,UU as dU,BU as dV,u$e as dW,UA as dX,BA as dY,qpt as dZ,Zpt as d_,nF as da,$U as db,$ut as dc,A_ as dd,Xr as de,ng as df,Sut as dg,eht as dh,S6 as di,ja as dj,Ff as dk,fce as dl,Df as dm,pce as dn,oFe as dp,lMe as dq,tdt as dr,idt as ds,d7e as dt,Wn as du,J9e as dv,_ce as dw,n7e as dx,P_ as dy,EFe as dz,Fdt as e,l$e as e$,ya as e0,Ss as e1,Xvt as e2,d2 as e3,kB as e4,zf as e5,m_ as e6,Jo as e7,a8e as e8,RVe as e9,cg as eA,d0t as eB,wft as eC,fg as eD,tie as eE,s3e as eF,hMe as eG,pMe as eH,fMe as eI,vFe as eJ,MBe as eK,ywt as eL,KPe as eM,xSe as eN,Rdt as eO,f9e as eP,ko as eQ,vut as eR,zut as eS,Ch as eT,smt as eU,vmt as eV,H8 as eW,oMe as eX,Fue as eY,bBe as eZ,kF as e_,Tbt as ea,u$ as eb,iU as ec,fU as ed,Tr as ee,Qpt as ef,f0t as eg,Te as eh,Nxt as ei,wFe as ej,v8e as ek,q3 as el,UMe as em,Ydt as en,Ddt as eo,m6e as ep,y6e as eq,g6e as er,uMe as es,Q6 as et,n3e as eu,joe as ev,b3e as ew,Ebt as ex,qle as ey,YPe as ez,fe as f,it as f$,Y1t as f0,X0t as f1,SF as f2,K0t as f3,tse as f4,fmt as f5,Hxt as f6,u2e as f7,$g as f8,gdt as f9,Nf as fA,lFe as fB,W3e as fC,pa as fD,hxe as fE,ddt as fF,Sie as fG,_s as fH,LU as fI,_Se as fJ,VP as fK,dot as fL,tC as fM,_7e as fN,Vf as fO,hFe as fP,YAe as fQ,WDe as fR,vce as fS,HA as fT,xFe as fU,_dt as fV,MA as fW,CA as fX,vte as fY,Bdt as fZ,Udt as f_,aU as fa,Qee as fb,Aoe as fc,JM as fd,r8 as fe,SLe as ff,bft as fg,Du as fh,jxt as fi,$ge as fj,Cg as fk,Sge as fl,zxt as fm,Fxt as fn,B6 as fo,Vr as fp,OLe as fq,xft as fr,oa as fs,_ft as ft,bae as fu,v3 as fv,Sdt as fw,Vxt as fx,qA as fy,hge as fz,Y as g,QDe as g$,wi as g0,xn as g1,ds as g2,ve as g3,Sw as g4,o$ as g5,Wwe as g6,XV as g7,Ft as g8,O as g9,p$ as gA,ur as gB,bre as gC,cn as gD,Zt as gE,Ni as gF,sr as gG,Nht as gH,Lw as gI,kq as gJ,$ht as gK,Lht as gL,NA as gM,M2e as gN,xNe as gO,Rne as gP,l8 as gQ,Sbt as gR,gFe as gS,O3 as gT,Vg as gU,Ug as gV,oc as gW,N3 as gX,L3 as gY,V2 as gZ,AUe as g_,ct as ga,Fr as gb,j as gc,Qe as gd,fi as ge,u0t as gf,Mt as gg,dge as gh,Qxe as gi,ySe as gj,s4 as gk,pg as gl,jC as gm,Ya as gn,J0e as go,wn as gp,Of as gq,wt as gr,ge as gs,_n as gt,Lo as gu,vxt as gv,bf as gw,_e as gx,uh as gy,g_e as gz,Se as h,hmt as h$,eFe as h0,SFe as h1,Pn as h2,Bg as h3,pde as h4,dde as h5,kr as h6,An as h7,Vn as h8,gh as h9,Ame as hA,J9 as hB,W9 as hC,Ux as hD,o2 as hE,vtt as hF,dP as hG,IA as hH,Kct as hI,Oa as hJ,$0 as hK,F_e as hL,sD as hM,u_t as hN,Tg as hO,WNe as hP,Li as hQ,hze as hR,vT as hS,cF as hT,Gb as hU,GA as hV,Rht as hW,Eg as hX,v9 as hY,tL as hZ,PZe as h_,lr as ha,Fpt as hb,IAe as hc,lg as hd,_o as he,ug as hf,gn as hg,Gi as hh,Ti as hi,yt as hj,nae as hk,nft as hl,T0t as hm,T2 as hn,ns as ho,oft as hp,M0t as hq,ME as hr,sft as hs,P0t as ht,Lh as hu,$f as hv,aft as hw,$u as hx,Lf as hy,SK as hz,Sje as i,Cw as i$,emt as i0,lht as i1,gD as i2,Ke as i3,fS as i4,Ibt as i5,n2e as i6,GC as i7,sq as i8,Yo as i9,Xie as iA,Qie as iB,dr as iC,xdt as iD,BAe as iE,zoe as iF,IOe as iG,sFe as iH,Voe as iI,o$e as iJ,gMe as iK,JAe as iL,yMe as iM,y3 as iN,_6 as iO,_V as iP,eut as iQ,pT as iR,cat as iS,a_e as iT,fFe as iU,rFe as iV,l7e as iW,jg as iX,Kae as iY,Xft as iZ,U6 as i_,xUe as ia,Pt as ib,oSt as ic,__ as id,ah as ie,ls as ig,fGe as ih,Jp as ii,Fd as ij,Cbt as ik,Xdt as il,P$e as im,g$e as io,ore as ip,VBe as iq,zn as ir,qs as is,vlt as it,pFe as iu,rht as iv,rIe as iw,$dt as ix,H2e as iy,bq as iz,g_ as j,Aie as j$,Gft as j0,qft as j1,kOe as j2,Yre as j3,Ii as j4,dat as j5,Fj as j6,Ume as j7,H9 as j8,yM as j9,ovt as jA,Dce as jB,hvt as jC,kC as jD,uvt as jE,ES as jF,dvt as jG,s6 as jH,kl as jI,oE as jJ,ivt as jK,dyt as jL,Ire as jM,m$ as jN,zD as jO,bg as jP,Z2e as jQ,Ere as jR,$_ as jS,wg as jT,I8 as jU,Un as jV,ldt as jW,yje as jX,sg as jY,ny as jZ,Ka as j_,ZV as ja,x7e as jb,E2e as jc,iH as jd,f_t as je,N6 as jf,f$ as jg,Pw as jh,Hne as ji,n_ as jj,udt as jk,m8e as jl,SSe as jm,DU as jn,y8e as jo,Ph as jp,V3e as jq,z3e as jr,D3e as js,NT as jt,L_ as ju,cs as jv,Une as jw,zIe as jx,A0t as jy,Sze as jz,Be as k,$gt as k$,oht as k0,zMe as k1,$r as k2,kre as k3,J2e as k4,h0 as k5,Qut as k6,Kle as k7,ZU as k8,P as k9,JA as kA,RD as kB,WA as kC,c2 as kD,Ktt as kE,Yct as kF,Xct as kG,art as kH,pIe as kI,Jbt as kJ,wpt as kK,mpt as kL,wc as kM,ii as kN,aht as kO,mht as kP,Tq as kQ,O_e as kR,Nne as kS,hut as kT,put as kU,dut as kV,rSe as kW,Ah as kX,u3 as kY,kgt as kZ,Igt as k_,C$e as ka,f$e as kb,Mu as kc,RNe as kd,o8 as ke,DIe as kf,zht as kg,TM as kh,H3 as ki,Ip as kj,cge as kk,Rut as kl,yIe as km,dMe as kn,cMe as ko,KDe as kp,TFe as kq,MFe as kr,tIe as ks,Ane as kt,a$e as ku,XDe as kv,mce as kw,Wft as kx,Hft as ky,sn as kz,de as l,Gut as l$,Sgt as l0,Egt as l1,Tgt as l2,xgt as l3,_gt as l4,Y2e as l5,NB as l6,wgt as l7,WU as l8,Q$e as l9,NUe as lA,Fw as lB,dBe as lC,F3 as lD,MZ as lE,gi as lF,f4 as lG,j2 as lH,Phe as lI,j_ as lJ,PUe as lK,Nc as lL,$Se as lM,w_t as lN,t3 as lO,p_e as lP,e8 as lQ,Qft as lR,Yft as lS,Rq as lT,Cl as lU,A$ as lV,F8 as lW,RUe as lX,OUe as lY,LUe as lZ,W_e as l_,Khe as la,xR as lb,xxe as lc,nU as ld,fut as le,oU as lf,mut as lg,R2 as lh,d0 as li,bNe as lj,CSe as lk,fvt as ll,E2 as lm,K6 as ln,dg as lo,zA as lp,Z7e as lq,vUe as lr,G7e as ls,$Ue as lt,K8 as lu,nBe as lv,DF as lw,uae as lx,Rhe as ly,f8e as lz,Rue as m,Tht as m$,p0t as m0,h0t as m1,jde as m2,Fde as m3,vDe as m4,bDe as m5,b8 as m6,QZ as m7,yce as m8,Kpt as m9,s1e as mA,hht as mB,gat as mC,uht as mD,r_e as mE,Ivt as mF,Ng as mG,F2 as mH,he as mI,zw as mJ,Tf as mK,Nvt as mL,pn as mM,FB as mN,h_t as mO,Op as mP,Bpt as mQ,_T as mR,Zre as mS,ght as mT,Bht as mU,qht as mV,Ght as mW,Cht as mX,Eht as mY,Sht as mZ,B2e as m_,wNe as ma,tvt as mb,Gxt as mc,gge as md,_ge as me,bge as mf,Dxt as mg,pQ as mh,Wxt as mi,Y$e as mj,r2e as mk,xge as ml,b2 as mm,nht as mn,cPe as mo,gU as mp,Kut as mq,Yut as mr,vat as ms,fAe as mt,fat as mu,Oxt as mv,Bxt as mw,pat as mx,Uxt as my,n1e as mz,Rje as n,Kbt as n$,bIe as n0,Xut as n1,Fht as n2,Rf as n3,Uht as n4,Umt as n5,xy as n6,Dp as n7,_1e as n8,xl as n9,H6e as nA,W6e as nB,s8e as nC,J6e as nD,Z6e as nE,Y6e as nF,K6e as nG,X6e as nH,Q6e as nI,vs as nJ,NW as nK,jIe as nL,Xre as nM,CZe as nN,A1t as nO,R1t as nP,IC as nQ,P1t as nR,hre as nS,H1t as nT,pze as nU,Lgt as nV,Ogt as nW,dze as nX,G1t as nY,Ba as nZ,Ybt as n_,D8e as na,_Ue as nb,q6e as nc,z8 as nd,e8e as ne,Ohe as nf,BM as ng,_ie as nh,Tt as ni,w_ as nj,Ar as nk,yi as nl,aa as nm,c_t as nn,l_t as no,kn as np,t8e as nq,n8e as nr,Tde as ns,U3 as nt,AC as nu,ude as nv,pi as nw,u8e as nx,U6e as ny,B6e as nz,sbt as o,ggt as o$,Zbt as o0,M9 as o1,sfe as o2,COe as o3,Zxt as o4,Sh as o5,$h as o6,ga as o7,vh as o8,zot as o9,m0t as oA,lUe as oB,LC as oC,cf as oD,Bze as oE,Gze as oF,Hze as oG,Xte as oH,Rc as oI,q1t as oJ,mDe as oK,Agt as oL,wu as oM,r0t as oN,eI as oO,gut as oP,KAe as oQ,SOe as oR,UAe as oS,qAe as oT,U1 as oU,jn as oV,Ed as oW,Rp as oX,Zr as oY,KOe as oZ,$De as o_,Yt as oa,QYe as ob,Jxt as oc,Hot as od,l4 as oe,YWe as of,cY as og,If as oh,URe as oi,c2e as oj,wae as ok,_ae as ol,Z1t as om,Gre as on,Vht as oo,LO as op,f2 as oq,Lge as or,YA as os,Mdt as ot,Edt as ou,vre as ov,yre as ow,x2e as ox,$2e as oy,zdt as oz,kp as p,Rce as p$,jx as p0,$o as p1,mS as p2,r8e as p3,cft as p4,h8e as p5,c0t as p6,Fne as p7,l0t as p8,LS as p9,Gmt as pA,_Ne as pB,Tre as pC,bdt as pD,O6 as pE,Kze as pF,Lie as pG,Odt as pH,MF as pI,T6 as pJ,v2 as pK,rOe as pL,R8 as pM,JUe as pN,g_t as pO,o6 as pP,Vdt as pQ,Fc as pR,z6 as pS,nv as pT,s_e as pU,Gr as pV,vF as pW,svt as pX,m4e as pY,nvt as pZ,rvt as p_,uf as pa,Km as pb,S$ as pc,rBe as pd,S0t as pe,Lg as pf,Uc as pg,l9e as ph,kdt as pi,jr as pj,Zft as pk,Jft as pl,DA as pm,PU as pn,o3e as po,r3e as pp,nFe as pq,i3e as pr,Pne as ps,L6 as pt,POe as pu,edt as pv,yoe as pw,DD as px,t_t as py,Hmt as pz,Hr as q,LPe as q$,kKe as q0,Fot as q1,_1t as q2,g8 as q3,nSt as q4,dSt as q5,o_ as q6,B1t as q7,a0 as q8,A6e as q9,B8e as qA,E9e as qB,F0t as qC,Ygt as qD,L0t as qE,VY as qF,nKe as qG,zZe as qH,QA as qI,IY as qJ,Ugt as qK,V1t as qL,hZ as qM,Oce as qN,mge as qO,k_t as qP,T_t as qQ,uy as qR,Yp as qS,I_t as qT,g6 as qU,Fut as qV,$_t as qW,x_t as qX,cut as qY,Yle as qZ,Fbt as q_,Qbt as qa,z1t as qb,k9 as qc,Nk as qd,Ofe as qe,j1t as qf,F1t as qg,glt as qh,Fn as qi,nZe as qj,hSt as qk,pSt as ql,U1t as qm,Mn as qn,NZe as qo,A_t as qp,K2e as qq,kN as qr,TN as qs,oze as qt,qU as qu,Oat as qv,Gg as qw,V6 as qx,_9e as qy,lft as qz,wE as r,m2e as r$,Zae as r0,zbt as r1,Zo as r2,Od as r3,Nw as r4,aUe as r5,bUe as r6,wUe as r7,SUe as r8,z7e as r9,kf as rA,z_ as rB,Ai as rC,qUe as rD,BUe as rE,Ct as rF,Mp as rG,zHe as rH,l6e as rI,jHe as rJ,$de as rK,Rl as rL,Ad as rM,jl as rN,Bmt as rO,ZO as rP,jpt as rQ,QM as rR,la as rS,_Fe as rT,P2e as rU,YM as rV,Kdt as rW,J3 as rX,cj as rY,KZ as rZ,xh as r_,J7e as ra,Mmt as rb,Cmt as rc,Pmt as rd,FA as re,Ga as rf,oKe as rg,g1t as rh,G0t as ri,bze as rj,vze as rk,Pce as rl,Tfe as rm,I1t as rn,k1t as ro,Ace as rp,ndt as rq,k3 as rr,dh as rs,Eu as rt,un as ru,YU as rv,pre as rw,w2 as rx,w9 as ry,N2 as rz,R as s,Dgt as s$,zpt as s0,ws as s1,So as s2,bs as s3,S7e as s4,DOe as s5,UOe as s6,gmt as s7,$7e as s8,MZe as s9,fyt as sA,RAe as sB,Upt as sC,Qdt as sD,Qd as sE,Rn as sF,Gpt as sG,_ut as sH,Y5e as sI,FIe as sJ,aut as sK,sut as sL,rte as sM,Wdt as sN,Hdt as sO,Xpt as sP,ate as sQ,zRe as sR,$Ne as sS,qc as sT,Gce as sU,yut as sV,Hgt as sW,Wgt as sX,Jgt as sY,Zgt as sZ,Rgt as s_,e1e as sa,Iut as sb,ofe as sc,Xot as sd,rat as se,mat as sf,jf as sg,lre as sh,vNe as si,A2e as sj,L2e as sk,wT as sl,jht as sm,Ate as sn,b2e as so,w2e as sp,oje as sq,us as sr,E3 as ss,UDe as st,Hut as su,Zle as sv,Xle as sw,QNe as sx,pyt as sy,lDe as sz,c4 as t,B9e as t$,_xe as t0,T$ as t1,Ngt as t2,Vat as t3,qze as t4,e$e as t5,Qht as t6,qmt as t7,Gdt as t8,qdt as t9,pft as tA,gft as tB,vn as tC,xvt as tD,n0t as tE,MB as tF,uft as tG,F$e as tH,D$e as tI,tht as tJ,I1e as tK,Kye as tL,Sat as tM,_at as tN,H0t as tO,W0t as tP,j0t as tQ,Er as tR,V9e as tS,ype as tT,D0t as tU,uhe as tV,G3 as tW,q0t as tX,v1t as tY,U0t as tZ,Je as t_,I$e as ta,E4e as tb,t1e as tc,M4e as td,$4e as te,fpt as tf,D3 as tg,oY as th,Y0t as ti,ygt as tj,_j as tk,$1t as tl,mBe as tm,$z as tn,Am as to,bwt as tp,fUe as tq,NF as tr,q3e as ts,s0t as tt,hOe as tu,vft as tv,dft as tw,fft as tx,hft as ty,mft as tz,Kvt as u,qxt as u$,F9e as u0,V0t as u1,Dfe as u2,DC as u3,AS as u4,NC as u5,phe as u6,hhe as u7,UZe as u8,R9e as u9,Mgt as uA,Qgt as uB,evt as uC,uze as uD,wze as uE,fze as uF,rue as uG,Tw as uH,Ggt as uI,eze as uJ,Ndt as uK,X2e as uL,wMe as uM,D2e as uN,fht as uO,Ymt as uP,h3e as uQ,gre as uR,Tne as uS,Tte as uT,TS as uU,rdt as uV,d3e as uW,Yht as uX,S9e as uY,pht as uZ,Bs as u_,O9e as ua,G4 as ub,Vgt as uc,D9e as ud,B2 as ue,gze as uf,b1t as ug,j9e as uh,w1t as ui,jgt as uj,x1t as uk,z0t as ul,xKe as um,_Ke as un,$fe as uo,Mze as up,nXe as uq,zgt as ur,vgt as us,bgt as ut,BZe as uu,EZe as uv,Bgt as uw,qgt as ux,Kgt as uy,Xgt as uz,IJ as v,hyt as v$,fke as v0,RW as v1,fY as v2,DJe as v3,qLe as v4,Avt as v5,Lvt as v6,w3 as v7,XLe as v8,oue as v9,qce as vA,Pgt as vB,Cgt as vC,Fze as vD,LR as vE,hKe as vF,mgt as vG,l_e as vH,kFe as vI,nut as vJ,umt as vK,dmt as vL,iIe as vM,x3e as vN,_3e as vO,kne as vP,khe as vQ,J3e as vR,WAe as vS,GAe as vT,HAe as vU,l3e as vV,w3e as vW,_he as vX,ypt as vY,yNe as vZ,QAe as v_,$$ as va,k$ as vb,Gw as vc,HLe as vd,but as ve,mde as vf,nOe as vg,oOe as vh,Y6 as vi,cje as vj,cue as vk,PQe as vl,b_t as vm,v_t as vn,sJe as vo,lvt as vp,cvt as vq,vdt as vr,avt as vs,y_t as vt,Svt as vu,wvt as vv,_vt as vw,bvt as vx,vvt as vy,Vze as vz,kJ as w,jft as w$,uyt as w0,I0t as w1,G2e as w2,vht as w3,_ht as w4,Pht as w5,bht as w6,xht as w7,Aht as w8,wIe as w9,Hw as wA,SPe as wB,IDe as wC,ace as wD,sdt as wE,nk as wF,DG as wG,Dft as wH,Al as wI,Xbt as wJ,js as wK,Gpe as wL,__t as wM,q4 as wN,syt as wO,t_e as wP,rut as wQ,iut as wR,gIe as wS,omt as wT,zAe as wU,THe as wV,N0t as wW,Zhe as wX,Yb as wY,EOe as wZ,Ypt as w_,CM as wa,k0t as wb,E0t as wc,w7e as wd,BMe as we,Dht as wf,OIe as wg,P2 as wh,A2 as wi,L2 as wj,Mbt as wk,rNe as wl,ryt as wm,a6e as wn,mmt as wo,rmt as wp,amt as wq,nmt as wr,wut as ws,Imt as wt,$mt as wu,uut as wv,nPe as ww,tmt as wx,cht as wy,pmt as wz,u as x,Pde as x0,Ape as x1,Lpe as x2,D6e as x3,imt as x4,wdt as x5,k2e as x6,TOe as x7,D_t as x8,a6 as x9,Q1t as xA,$Xe as xB,txt as xC,hxt as xD,W2 as xE,cet as xF,pxt as xG,_it as xH,fxt as xI,mxt as xJ,yxt as xK,gxt as xL,bxt as xM,Ext as xN,Mxt as xO,Pxt as xP,Xxt as xQ,eSt as xR,fSt as xS,r_t as xa,wne as xb,bpt as xc,s_t as xd,n_t as xe,lmt as xf,vpt as xg,gpt as xh,dht as xi,w6 as xj,xut as xk,cmt as xl,ZAe as xm,o_t as xn,i_t as xo,$Oe as xp,Z3 as xq,a_t as xr,a3e as xs,kee as xt,Qct as xu,apt as xv,cpt as xw,kvt as xx,Fg as xy,EBe as xz,p as y,M as z};
