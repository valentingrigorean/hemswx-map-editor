import{dr as h,ds as x}from"./index-LSfb4K_5.js";import{b as P,j as E,a as d,f as G,x as T}from"./Point2D-ByVU2sJE.js";import{w as v}from"./OperatorShapePreservingLength-6546pj6B.js";import{H as w,I as C,d as D,m as _,K as X,T as b,N as q,Z as I,Q as L,S as Y}from"./ProjectionTransformation-BNeGGerH.js";import"./Envelope2D-PYZ6irrd.js";import"./Transformation2D-HOoFpL6n.js";import"./SimpleGeometryCursor-B92kdZ15.js";import"./OperatorDefinitions-DP7_WWTp.js";class Z{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,u){return!1}canAccelerateGeometry(t){return!1}execute(t,r,u,s){if(u===4)return new v().execute(t,r,s);if(r.getCoordinateSystemType()===0&&P(""),E(t),t.isEmpty()||t.getDimension()<1)return 0;const a=r.getGCS(),n=w();a.querySpheroidData(n);const c=n.majorSemiAxis,m=n.e2,l=a.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===d.enumPolygon?e=t.getBoundary():o===d.enumEnvelope?e=C(t):G(o)?(e=new D({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new _().execute(e,0,r.getTolerance(0),0,s)),a!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=X(e,r),o===d.enumPolyline&&e===t&&(e=t.clone());const f=new T;r.getPannableExtent().queryIntervalX(f);for(let g=0,S=e.getPointCount();g<S;g++){const p=e.getXY(g);p.x=b(p.x,f),e.setXY(g,p)}}const y=e.createInstance();e=I(i,e,y,s)?y:new q().execute(e,i,s)}return this._ExecuteMultiPathGeodeticLength(e,u,c,m,l)}_ExecuteMultiPathGeodeticLength(t,r,u,s,a){const n={stack:[],error:void 0,hasError:!1};try{const c=h(n,new L,!1);let m=0;const l=t.querySegmentIterator();for(;l.nextPath();)for(;l.hasNextSegment();){const e=l.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(a),i.scale(a),Y.geodeticDistance(u,s,o.x,o.y,i.x,i.y,c,null,null,r),m+=c.val}return m}catch(c){n.error=c,n.hasError=!0}finally{x(n)}}}export{Z as OperatorGeodeticLength};
