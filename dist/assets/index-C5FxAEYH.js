(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var fe,y,et,tt,P,Ue,nt,at,rt,Le,be,we,ee={},it=[],Ft=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function $e(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Dt(t,e,n){var r,s,i,l={};for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?fe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)l[i]===void 0&&(l[i]=t.defaultProps[i]);return se(t,l,r,s,null)}function se(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++et,__i:-1,__u:0};return s==null&&y.vnode!=null&&y.vnode(i),i}function ne(t){return t.children}function Q(t,e){this.props=t,this.context=e}function G(t,e){if(e==null)return t.__?G(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?G(t):null}function st(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return st(t)}}function ze(t){(!t.__d&&(t.__d=!0)&&P.push(t)&&!oe.__r++||Ue!=y.debounceRendering)&&((Ue=y.debounceRendering)||nt)(oe)}function oe(){for(var t,e,n,r,s,i,l,d=1;P.length;)P.length>d&&P.sort(at),t=P.shift(),d=P.length,t.__d&&(n=void 0,s=(r=(e=t).__v).__e,i=[],l=[],e.__P&&((n=E({},r)).__v=r.__v+1,y.vnode&&y.vnode(n),Ie(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,i,s??G(r),!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,ct(i,n,l),n.__e!=s&&st(n)));oe.__r=0}function lt(t,e,n,r,s,i,l,d,u,c,f){var o,p,h,_,v,x,g=r&&r.__k||it,N=e.length;for(u=Et(n,e,g,u,N),o=0;o<N;o++)(h=n.__k[o])!=null&&(p=h.__i==-1?ee:g[h.__i]||ee,h.__i=o,x=Ie(t,h,p,s,i,l,d,u,c,f),_=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&ke(p.ref,null,h),f.push(h.ref,h.__c||_,h)),v==null&&_!=null&&(v=_),4&h.__u||p.__k===h.__k?u=ot(h,u,t):typeof h.type=="function"&&x!==void 0?u=x:_&&(u=_.nextSibling),h.__u&=-7);return n.__e=v,u}function Et(t,e,n,r,s){var i,l,d,u,c,f=n.length,o=f,p=0;for(t.__k=new Array(s),i=0;i<s;i++)(l=e[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(u=i+p,(l=t.__k[i]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?se(null,l,null,null,null):he(l)?se(ne,{children:l},null,null,null):l.constructor==null&&l.__b>0?se(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=t,l.__b=t.__b+1,d=null,(c=l.__i=Ot(l,n,u,o))!=-1&&(o--,(d=n[c])&&(d.__u|=2)),d==null||d.__v==null?(c==-1&&(s>f?p--:s<f&&p++),typeof l.type!="function"&&(l.__u|=4)):c!=u&&(c==u-1?p--:c==u+1?p++:(c>u?p--:p++,l.__u|=4))):t.__k[i]=null;if(o)for(i=0;i<f;i++)(d=n[i])!=null&&!(2&d.__u)&&(d.__e==r&&(r=G(d)),ut(d,d));return r}function ot(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=ot(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=G(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ot(t,e,n,r){var s,i,l,d=t.key,u=t.type,c=e[n],f=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||f&&d==c.key&&u==c.type)return n;if(r>(f?1:0)){for(s=n-1,i=n+1;s>=0||i<e.length;)if((c=e[l=s>=0?s--:i++])!=null&&!(2&c.__u)&&d==c.key&&u==c.type)return l}return-1}function Pe(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Ft.test(e)?n:n+"px"}function ie(t,e,n,r,s){var i,l;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Pe(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Pe(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(rt,"$1")),l=e.toLowerCase(),e=l in t||e=="onFocusOut"||e=="onFocusIn"?l.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=Le,t.addEventListener(e,i?we:be,i)):t.removeEventListener(e,i?we:be,i);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function je(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Le++;else if(e.t<n.u)return;return n(y.event?y.event(e):e)}}}function Ie(t,e,n,r,s,i,l,d,u,c){var f,o,p,h,_,v,x,g,N,Y,A,ae,K,Ae,re,Z,me,k=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),i=[d=e.__e=n.__e]),(f=y.__b)&&f(e);e:if(typeof k=="function")try{if(g=e.props,N="prototype"in k&&k.prototype.render,Y=(f=k.contextType)&&r[f.__c],A=f?Y?Y.props.value:f.__:r,n.__c?x=(o=e.__c=n.__c).__=o.__E:(N?e.__c=o=new k(g,A):(e.__c=o=new Q(g,A),o.constructor=k,o.render=At),Y&&Y.sub(o),o.props=g,o.state||(o.state={}),o.context=A,o.__n=r,p=o.__d=!0,o.__h=[],o._sb=[]),N&&o.__s==null&&(o.__s=o.state),N&&k.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=E({},o.__s)),E(o.__s,k.getDerivedStateFromProps(g,o.__s))),h=o.props,_=o.state,o.__v=e,p)N&&k.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),N&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(N&&k.getDerivedStateFromProps==null&&g!==h&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(g,A),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(g,o.__s,A)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(o.props=g,o.state=o.__s,o.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(W){W&&(W.__=e)}),ae=0;ae<o._sb.length;ae++)o.__h.push(o._sb[ae]);o._sb=[],o.__h.length&&l.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(g,o.__s,A),N&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(h,_,v)})}if(o.context=A,o.props=g,o.__P=t,o.__e=!1,K=y.__r,Ae=0,N){for(o.state=o.__s,o.__d=!1,K&&K(e),f=o.render(o.props,o.state,o.context),re=0;re<o._sb.length;re++)o.__h.push(o._sb[re]);o._sb=[]}else do o.__d=!1,K&&K(e),f=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++Ae<25);o.state=o.__s,o.getChildContext!=null&&(r=E(E({},r),o.getChildContext())),N&&!p&&o.getSnapshotBeforeUpdate!=null&&(v=o.getSnapshotBeforeUpdate(h,_)),Z=f,f!=null&&f.type===ne&&f.key==null&&(Z=dt(f.props.children)),d=lt(t,he(Z)?Z:[Z],e,n,r,s,i,l,d,u,c),o.base=e.__e,e.__u&=-161,o.__h.length&&l.push(o),x&&(o.__E=o.__=null)}catch(W){if(e.__v=null,u||i!=null)if(W.then){for(e.__u|=u?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;i[i.indexOf(d)]=null,e.__e=d}else{for(me=i.length;me--;)$e(i[me]);xe(e)}else e.__e=n.__e,e.__k=n.__k,W.then||xe(e);y.__e(W,e,n)}else i==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):d=e.__e=Tt(n.__e,e,n,r,s,i,l,u,c);return(f=y.diffed)&&f(e),128&e.__u?void 0:d}function xe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(xe)}function ct(t,e,n){for(var r=0;r<n.length;r++)ke(n[r],n[++r],n[++r]);y.__c&&y.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(i){i.call(s)})}catch(i){y.__e(i,s.__v)}})}function dt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:he(t)?t.map(dt):E({},t)}function Tt(t,e,n,r,s,i,l,d,u){var c,f,o,p,h,_,v,x=n.props,g=e.props,N=e.type;if(N=="svg"?s="http://www.w3.org/2000/svg":N=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((h=i[c])&&"setAttribute"in h==!!N&&(N?h.localName==N:h.nodeType==3)){t=h,i[c]=null;break}}if(t==null){if(N==null)return document.createTextNode(g);t=document.createElementNS(s,N,g.is&&g),d&&(y.__m&&y.__m(e,i),d=!1),i=null}if(N==null)x===g||d&&t.data==g||(t.data=g);else{if(i=i&&fe.call(t.childNodes),x=n.props||ee,!d&&i!=null)for(x={},c=0;c<t.attributes.length;c++)x[(h=t.attributes[c]).name]=h.value;for(c in x)if(h=x[c],c!="children"){if(c=="dangerouslySetInnerHTML")o=h;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;ie(t,c,null,h,s)}}for(c in g)h=g[c],c=="children"?p=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?_=h:c=="checked"?v=h:d&&typeof h!="function"||x[c]===h||ie(t,c,h,x[c],s);if(f)d||o&&(f.__html==o.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(o&&(t.innerHTML=""),lt(e.type=="template"?t.content:t,he(p)?p:[p],e,n,r,N=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,l,i?i[0]:n.__k&&G(n,0),d,u),i!=null)for(c=i.length;c--;)$e(i[c]);d||(c="value",N=="progress"&&_==null?t.removeAttribute("value"):_!=null&&(_!==t[c]||N=="progress"&&!_||N=="option"&&_!=x[c])&&ie(t,c,_,x[c],s),c="checked",v!=null&&v!=t[c]&&ie(t,c,v,x[c],s))}return t}function ke(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){y.__e(s,n)}}function ut(t,e,n){var r,s;if(y.unmount&&y.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ke(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){y.__e(i,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&ut(r[s],e,n||typeof t.type!="function");n||$e(t.__e),t.__c=t.__=t.__e=void 0}function At(t,e,n){return this.constructor(t,n)}function Ut(t,e,n){var r,s,i,l;e==document&&(e=document.documentElement),y.__&&y.__(t,e),s=(r=!1)?null:e.__k,i=[],l=[],Ie(e,t=e.__k=Dt(ne,null,[t]),s||ee,ee,e.namespaceURI,s?null:e.firstChild?fe.call(e.childNodes):null,i,s?s.__e:e.firstChild,r,l),ct(i,t,l)}fe=it.slice,y={__e:function(t,e,n,r){for(var s,i,l;e=e.__;)if((s=e.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(t)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),l=s.__d),l)return s.__E=s}catch(d){t=d}throw t}},et=0,tt=function(t){return t!=null&&t.constructor==null},Q.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ze(this))},Q.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ze(this))},Q.prototype.render=ne,P=[],nt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,at=function(t,e){return t.__v.__b-e.__v.__b},oe.__r=0,rt=/(PointerCapture)$|Capture$/i,Le=0,be=je(!1),we=je(!0);var zt=0;function a(t,e,n,r,s,i){e||(e={});var l,d,u=e;if("ref"in u)for(d in u={},e)d=="ref"?l=e[d]:u[d]=e[d];var c={type:t,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--zt,__i:-1,__u:0,__source:s,__self:i};if(typeof t=="function"&&(l=t.defaultProps))for(d in l)u[d]===void 0&&(u[d]=l[d]);return y.vnode&&y.vnode(c),c}var te,w,ye,Re,ce=0,ft=[],S=y,Je=S.__b,Me=S.__r,We=S.diffed,He=S.__c,Be=S.unmount,Ge=S.__;function Fe(t,e){S.__h&&S.__h(w,t,ce||e),ce=0;var n=w.__H||(w.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Ve(t){return ce=1,Pt(pt,t)}function Pt(t,e,n){var r=Fe(te++,2);if(r.t=t,!r.__c&&(r.__=[pt(void 0,e),function(d){var u=r.__N?r.__N[0]:r.__[0],c=r.t(u,d);u!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=w,!w.__f)){var s=function(d,u,c){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!i||i.call(this,d,u,c);var o=r.__c.props!==d;return f.forEach(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(o=!0)}}),i&&i.call(this,d,u,c)||o};w.__f=!0;var i=w.shouldComponentUpdate,l=w.componentWillUpdate;w.componentWillUpdate=function(d,u,c){if(this.__e){var f=i;i=void 0,s(d,u,c),i=f}l&&l.call(this,d,u,c)},w.shouldComponentUpdate=s}return r.__N||r.__}function jt(t,e){var n=Fe(te++,3);!S.__s&&ht(n.__H,e)&&(n.__=t,n.u=e,w.__H.__h.push(n))}function Rt(t){return ce=5,pe(function(){return{current:t}},[])}function pe(t,e){var n=Fe(te++,7);return ht(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Jt(){for(var t;t=ft.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(le),t.__H.__h.forEach(Se),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){w=null,Je&&Je(t)},S.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ge&&Ge(t,e)},S.__r=function(t){Me&&Me(t),te=0;var e=(w=t.__c).__H;e&&(ye===w?(e.__h=[],w.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(le),e.__h.forEach(Se),e.__h=[],te=0)),ye=w},S.diffed=function(t){We&&We(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ft.push(e)!==1&&Re===S.requestAnimationFrame||((Re=S.requestAnimationFrame)||Mt)(Jt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ye=w=null},S.__c=function(t,e){e.some(function(n){try{n.__h.forEach(le),n.__h=n.__h.filter(function(r){return!r.__||Se(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],S.__e(r,n.__v)}}),He&&He(t,e)},S.unmount=function(t){Be&&Be(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{le(r)}catch(s){e=s}}),n.__H=void 0,e&&S.__e(e,n.__v))};var qe=typeof requestAnimationFrame=="function";function Mt(t){var e,n=function(){clearTimeout(r),qe&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);qe&&(e=requestAnimationFrame(n))}function le(t){var e=w,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),w=e}function Se(t){var e=w;t.__c=t.__(),w=e}function ht(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function pt(t,e){return typeof e=="function"?e(t):e}var Wt=Symbol.for("preact-signals");function De(){if(H>1)H--;else{for(var t,e=!1;X!==void 0;){var n=X;for(X=void 0,Ce++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&mt(n))try{n.c()}catch(s){e||(t=s,e=!0)}n=r}}if(Ce=0,H--,e)throw t}}var m=void 0;function _t(t){var e=m;m=void 0;try{return t()}finally{m=e}}var X=void 0,H=0,Ce=0,de=0;function vt(t){if(m!==void 0){var e=t.n;if(e===void 0||e.t!==m)return e={i:0,S:t,p:m.s,n:void 0,t:m,e:void 0,x:void 0,r:e},m.s!==void 0&&(m.s.n=e),m.s=e,t.n=e,32&m.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=m.s,e.n=void 0,m.s.n=e,m.s=e),e}}function C(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched}C.prototype.brand=Wt;C.prototype.h=function(){return!0};C.prototype.S=function(t){var e=this,n=this.t;n!==t&&t.e===void 0&&(t.x=n,this.t=t,n!==void 0?n.e=t:_t(function(){var r;(r=e.W)==null||r.call(e)}))};C.prototype.U=function(t){var e=this;if(this.t!==void 0){var n=t.e,r=t.x;n!==void 0&&(n.x=r,t.e=void 0),r!==void 0&&(r.e=n,t.x=void 0),t===this.t&&(this.t=r,r===void 0&&_t(function(){var s;(s=e.Z)==null||s.call(e)}))}};C.prototype.subscribe=function(t){var e=this;return Oe(function(){var n=e.value,r=m;m=void 0;try{t(n)}finally{m=r}})};C.prototype.valueOf=function(){return this.value};C.prototype.toString=function(){return this.value+""};C.prototype.toJSON=function(){return this.value};C.prototype.peek=function(){var t=m;m=void 0;try{return this.value}finally{m=t}};Object.defineProperty(C.prototype,"value",{get:function(){var t=vt(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Ce>100)throw new Error("Cycle detected");this.v=t,this.i++,de++,H++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{De()}}}});function D(t,e){return new C(t,e)}function mt(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function yt(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function gt(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function R(t,e){C.call(this,void 0),this.x=t,this.s=void 0,this.g=de-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched}R.prototype=new C;R.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===de))return!0;if(this.g=de,this.f|=1,this.i>0&&!mt(this))return this.f&=-2,!0;var t=m;try{yt(this),m=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return m=t,gt(this),this.f&=-2,!0};R.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}C.prototype.S.call(this,t)};R.prototype.U=function(t){if(this.t!==void 0&&(C.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};R.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(R.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=vt(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function J(t,e){return new R(t,e)}function Nt(t){var e=t.u;if(t.u=void 0,typeof e=="function"){H++;var n=m;m=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,Ee(t),r}finally{m=n,De()}}}function Ee(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Nt(t)}function Ht(t){if(m!==this)throw new Error("Out-of-order effect");gt(this),m=t,this.f&=-2,8&this.f&&Ee(this),De()}function V(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}V.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};V.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Nt(this),yt(this),H++;var t=m;return m=this,Ht.bind(this,t)};V.prototype.N=function(){2&this.f||(this.f|=2,this.o=X,X=this)};V.prototype.d=function(){this.f|=8,1&this.f||Ee(this)};V.prototype.dispose=function(){this.d()};function Oe(t){var e=new V(t);try{e.c()}catch(r){throw e.d(),r}var n=e.d.bind(e);return n[Symbol.dispose]=n,n}var _e,ge;function q(t,e){y[t]=e.bind(null,y[t]||function(){})}function ue(t){ge&&ge(),ge=t&&t.S()}function bt(t){var e=this,n=t.data,r=F(n);r.value=n;var s=pe(function(){for(var i=e.__v;i=i.__;)if(i.__c){i.__c.__$f|=4;break}return e.__$u.c=function(){var l,d=e.__$u.S(),u=s.value;d(),tt(u)||((l=e.base)==null?void 0:l.nodeType)!==3?(e.__$f|=1,e.setState({})):e.base.data=u},J(function(){var l=r.value.value;return l===0?0:l===!0?"":l||""})},[]);return s.value}bt.displayName="_st";Object.defineProperties(C.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:bt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});q("__b",function(t,e){if(typeof e.type=="string"){var n,r=e.props;for(var s in r)if(s!=="children"){var i=r[s];i instanceof C&&(n||(e.__np=n={}),n[s]=i,r[s]=i.peek())}}t(e)});q("__r",function(t,e){ue();var n,r=e.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(s){var i;return Oe(function(){i=this}),i.c=function(){r.__$f|=1,r.setState({})},i}())),_e=r,ue(n),t(e)});q("__e",function(t,e,n,r){ue(),_e=void 0,t(e,n,r)});q("diffed",function(t,e){ue(),_e=void 0;var n;if(typeof e.type=="string"&&(n=e.__e)){var r=e.__np,s=e.props;if(r){var i=n.U;if(i)for(var l in i){var d=i[l];d!==void 0&&!(l in r)&&(d.d(),i[l]=void 0)}else n.U=i={};for(var u in r){var c=i[u],f=r[u];c===void 0?(c=Bt(n,u,f,s),i[u]=c):c.o(f,s)}}}t(e)});function Bt(t,e,n,r){var s=e in t&&t.ownerSVGElement===void 0,i=D(n);return{o:function(l,d){i.value=l,r=d},d:Oe(function(){var l=i.value.value;r[e]!==l&&(r[e]=l,s?t[e]=l:l?t.setAttribute(e,l):t.removeAttribute(e))})}}q("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var s in r){var i=r[s];i&&i.d()}}}}else{var l=e.__c;if(l){var d=l.__$u;d&&(l.__$u=void 0,d.d())}}t(e)});q("__h",function(t,e,n,r){(r<3||r===9)&&(e.__$f|=2),t(e,n,r)});Q.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u,r=n&&n.s!==void 0;for(var s in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(r||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var i in t)if(i!=="__source"&&t[i]!==this.props[i])return!0;for(var l in this.props)if(!(l in t))return!0;return!1};function F(t){return pe(function(){return D(t)},[])}function I(t){var e=Rt(t);return e.current=t,_e.__$f|=4,pe(function(){return J(function(){return e.current()})},[])}const Ye=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""),wt=t=>{try{return[JSON.parse(t),null]}catch(e){return[null,e instanceof Error?e.message:"Parse error"]}},Te=t=>{const e=new Set,n=s=>{s&&typeof s=="string"&&e.add(s)},r=s=>{for(const i of s||[]){i.id&&n(i.id);for(const l of i.items||[])l.id&&n(l.id),l.legendDescription&&n(l.legendDescription)}};return r(t.weatherFeatures),r(t.features),e},ve=t=>{const e=new Set,n=r=>{for(const s of r||[])for(const i of s.items||[])for(const l of i.layersIds||[])e.add(l)};return n(t.weatherFeatures),n(t.features),e},Gt=(t,e,n="application/json")=>{const r=new Blob([e],{type:n}),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)},Vt=(t,e)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t(...r),e)}},qt=()=>({weatherFeatures:[],features:[],layers:[],intl:{en:{},da:{},nb:{},sv:{}}}),xt=t=>{const[e,n]=wt(t);if(n)return{valid:!1,errors:[`JSON Parse Error: ${n}`],warnings:[]};const r=[],s=[];if(!e||typeof e!="object")return r.push("Root must be an object"),{valid:!1,errors:r,warnings:s};const i=["weatherFeatures","features","layers"];for(const l of i)Array.isArray(e[l])||r.push(`Missing or invalid '${l}' array`);if(!e.intl||typeof e.intl!="object")r.push("Missing or invalid 'intl' object");else{const l=["en","da","nb","sv"];for(const d of l)(!e.intl[d]||typeof e.intl[d]!="object")&&s.push(`Missing or invalid '${d}' translations`)}try{const l=ve(e),d=new Set((e.layers||[]).map(c=>c.id).filter(Boolean)),u=[...l].filter(c=>!d.has(c));u.length>0&&s.push(`Missing layer definitions: ${u.join(", ")}`)}catch{s.push("Could not validate layer references")}return{valid:r.length===0,errors:r,warnings:s}},Yt=t=>JSON.stringify(t,null,2),St=t=>{try{const e=ve(t),n=new Set((t.layers||[]).map(u=>u.id)),r=[...e].filter(u=>!n.has(u)),s=[...n].filter(u=>!e.has(u)),i=Te(t),l=Object.keys(t.intl||{}),d={};for(const u of l){const c=t.intl[u]||{};d[u]=[...i].filter(f=>!(f in c))}return{missingLayers:r,unusedLayers:s,missingIntl:d,weatherFeatureCount:t.weatherFeatures?.length||0,featureCount:t.features?.length||0,layerCount:t.layers?.length||0,languageCount:l.length}}catch(e){return console.warn("Error computing stats:",e),{missingLayers:[],unusedLayers:[],missingIntl:{},weatherFeatureCount:0,featureCount:0,layerCount:0,languageCount:0}}},Kt=t=>{const e=St(t);return`WF: ${e.weatherFeatureCount} • F: ${e.featureCount} • Layers: ${e.layerCount} • Langs: ${e.languageCount}`},Ct=["en","da","nb","sv"],Zt=t=>{const e={...t},n=e.intl?.en||{},r={},s=(d,u)=>{!r[d]&&u&&(r[d]=u)},i=d=>{for(const u of d||[]){u.id&&u.name&&s(u.id,u.name);for(const c of u.items||[])c.id&&c.name&&s(c.id,c.name),c.legendDescription&&s(c.legendDescription,n[c.legendDescription]||c.legendDescription)}};i(e.weatherFeatures),i(e.features);const l=new Set([...Te(e)]);return e.intl||(e.intl={en:{},da:{},nb:{},sv:{}}),Ct.forEach(d=>{const u=e.intl[d]||{},c={};l.forEach(f=>{u[f]?c[f]=u[f]:d==="en"&&r[f]?c[f]=r[f]:n[f]?c[f]=n[f]:c[f]=f}),e.intl[d]=c}),e},Qt=t=>{const e={...t},n=Te(e);return e.intl&&Ct.forEach(r=>{if(e.intl[r]){const s={};Object.keys(e.intl[r]).forEach(i=>{n.has(i)&&(s[i]=e.intl[r][i])}),e.intl[r]=s}}),e},Lt=["wms","tiled","mapImage","portalItem"],Ke=(t,e)=>{const n={id:e,type:t,opacity:1,zIndex:0};switch(t){case"wms":return{...n,source:"https://example.com/wms",layerNames:""};case"tiled":return{...n,source:"https://example.com/tiles/{z}/{y}/{x}.png"};case"mapImage":return{...n,source:"https://example.com/arcgis/rest/services/MapServer"};case"portalItem":return{...n,source:"portal-item-id",options:{layerId:"0"}};default:return n}},Xt=t=>{const e=[];return(!t.id||t.id.trim()==="")&&e.push("Layer ID is required"),Lt.includes(t.type)||e.push(`Invalid layer type: ${t.type}`),(!t.source||t.source.trim()==="")&&e.push("Layer source is required"),t.type==="wms"&&(!t.layerNames||t.layerNames.trim()==="")&&e.push("WMS layers require layerNames"),t.opacity!==void 0&&(t.opacity<0||t.opacity>1)&&e.push("Opacity must be between 0 and 1"),{valid:e.length===0,errors:e}},en=(t,e)=>{const n={...t},r=n.layers.findIndex(s=>s.id===e.id);return r>=0?(n.layers=[...n.layers],n.layers[r]=e):n.layers=[...n.layers,e],n},tn=t=>{const e=ve(t);return[...new Set(t.layers.map(r=>r.id))].filter(r=>!e.has(r))},nn=t=>{const e=new Set(tn(t)),n={...t};return n.layers=n.layers.filter(r=>!e.has(r.id)),n},$t=()=>({featureType:"weatherFeature",featureId:"",featureName:"",presentation:"single",mutuallyExclusive:!1,items:[]}),b=D(qt()),O=D({type:null,index:-1}),T=D({index:-1}),z=D("features"),j=D("json");D("en");const B=D("Ready"),$=D({mode:"create",currentStep:1,isOpen:!1,data:$t(),editingIndex:-1,editingType:"weatherFeature"}),Ne=J(()=>JSON.stringify(b.value,null,2)),an=J(()=>St(b.value)),rn=J(()=>Kt(b.value));J(()=>{const t=O.value;return t.type===null||t.index<0?null:b.value[t.type][t.index]||null});J(()=>{const t=T.value;return t.index<0?null:b.value.layers[t.index]||null});const M=t=>{b.value=t;const e=O.value;if(e.type&&e.index>=0){const r=t[e.type];e.index>=r.length&&(O.value={type:null,index:-1})}const n=T.value;n.index>=0&&n.index>=t.layers.length&&(T.value={index:-1})},L=t=>{B.value=t,setTimeout(()=>{B.value===t&&(B.value="Ready")},5e3)},sn=(t,e)=>{O.value={type:t,index:e},j.value="feature"},It=t=>{T.value={index:t},j.value="layer"},kt=(t="create",e="weatherFeature",n=-1)=>{const r={mode:t,currentStep:1,isOpen:!0,data:$t(),editingIndex:n,editingType:e};if(t==="edit"&&n>=0){const i=(e==="weatherFeature"?b.value.weatherFeatures:b.value.features)[n];i&&(r.data={featureType:e,featureId:i.id||"",featureName:i.name||"",presentation:i.presentation||"single",mutuallyExclusive:i.mutuallyExclusive||!1,items:(i.items||[]).map(l=>({id:l.id,name:l.name,showLegend:l.showLegend||!1,legendUrl:l.legendUrl||"",legendDescription:l.legendDescription||"",layersIds:[...l.layersIds||[]]}))})}$.value=r},Ze=()=>{$.value={...$.value,isOpen:!1}},U=t=>{$.value={...$.value,data:{...$.value.data,...t}}},Qe=t=>{$.value={...$.value,currentStep:t}},ln=()=>{const t=Zt(b.value);M(t),L("✅ Missing translations synchronized")},on=()=>{let t=Qt(b.value);t=nn(t),M(t),L("✅ Unused translations and layers removed")},cn=(t,e)=>{const n={...b.value};n[t]=n[t].filter((s,i)=>i!==e),M(n);const r=O.value;r.type===t&&r.index===e?O.value={type:null,index:-1}:r.type===t&&r.index>e&&(O.value={...r,index:r.index-1}),L("✅ Feature deleted")},dn=t=>{const e={...b.value};e.layers=e.layers.filter((r,s)=>s!==t),M(e);const n=T.value;n.index===t?T.value={index:-1}:n.index>t&&(T.value={index:n.index-1}),L("✅ Layer deleted")};function un(){const t=F(Ne.value),e=F([]),n=F(!1);jt(()=>{n.value||(t.value=Ne.value)},[Ne.value]);const r=Vt(c=>{const f=xt(c);if(e.value=f.errors,f.valid){const[o]=wt(c);o&&(M(o),L("✅ JSON updated"))}else L(`❌ JSON validation failed: ${f.errors[0]}`);n.value=!1},1e3),s=c=>{const o=c.target.value;t.value=o,n.value=!0,r(o)},i=c=>{c.preventDefault();const o=Array.from(c.dataTransfer?.files||[]).find(p=>p.type==="application/json"||p.name.endsWith(".json"));if(o){const p=new FileReader;p.onload=h=>{const _=h.target?.result;_&&(t.value=_,n.value=!0,r(_))},p.readAsText(o)}},l=c=>{c.preventDefault()},d=c=>{const f=c.clipboardData?.getData("text");if(f)try{JSON.parse(f),t.value=f,n.value=!0,r(f),L("✅ JSON pasted from clipboard")}catch{}},u=I(()=>e.value.length>0);return a("div",{children:[a("textarea",{className:`json-editor ${u.value?"error":""}`,value:t.value,onInput:s,onDrop:i,onDragOver:l,onPaste:d,placeholder:"Paste JSON or drop a file…",spellcheck:!1,style:{borderColor:u.value?"var(--bad)":void 0}}),e.value.length>0&&a("div",{style:{marginTop:"8px",padding:"8px",background:"var(--bad)",color:"white",borderRadius:"6px",fontSize:"12px"},children:[a("strong",{children:"Validation Errors:"}),a("ul",{style:{margin:"4px 0 0 16px",padding:0},children:e.value.map((c,f)=>a("li",{children:c},f))})]})]})}function fn(){return a("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a("button",{className:"btn",onClick:()=>{const i=xt(JSON.stringify(b.value));i.valid?L("✅ JSON is valid"):L(`❌ Validation failed: ${i.errors.length} error(s), ${i.warnings.length} warning(s)`)},children:"Validate"}),a("button",{className:"btn",onClick:()=>{try{const i=Yt(b.value);L("✅ JSON formatted")}catch{L("❌ Could not format JSON")}},children:"Format"}),a("button",{className:"btn",onClick:()=>{ln()},children:"Fix Missing Translations"}),a("button",{className:"btn",onClick:()=>{on()},children:"Remove Unused"}),a("button",{className:"btn success",onClick:()=>{try{const i=JSON.stringify(b.value,null,2),l=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-");Gt(`map-layers-${l}.json`,i),L("✅ JSON file downloaded")}catch{L("❌ Download failed")}},children:"Download JSON"})]})}function hn({feature:t,type:e,index:n}){const r=I(()=>O.value.type===e&&O.value.index===n),s=()=>{sn(e,n)},i=o=>{o.stopPropagation(),kt("edit",e==="weatherFeatures"?"weatherFeature":"feature",n)},l=o=>{o.stopPropagation(),confirm("Are you sure you want to delete this feature?")&&cn(e,n)},d=(t.items||[]).length,u=t.presentation||"single",c=t.name||u==="single"&&t.items?.[0]?.name||t.id||"Unnamed Feature",f=t.mutuallyExclusive?" • Exclusive":"";return a("div",{className:`feature-list-item ${r.value?"selected":""}`,onClick:s,children:[a("div",{className:"feature-info",children:[a("div",{className:"feature-name",children:c}),a("div",{className:"feature-details",children:[d," item(s) • ",u,f]})]}),a("div",{className:"feature-actions",children:[a("button",{className:"btn small",onClick:i,children:"Edit"}),a("button",{className:"btn danger small",onClick:l,children:"Delete"})]})]})}function Xe({title:t,type:e,features:n}){return a("details",{open:!0,className:"feature-category",children:[a("summary",{className:"feature-category-header",children:t}),a("div",{className:"feature-category-content",children:n.length===0?a("div",{style:{padding:"12px",color:"var(--muted)",textAlign:"center"},children:["No ",t.toLowerCase()," found"]}):n.map((r,s)=>a(hn,{feature:r,type:e,index:s},s))})]})}function pn(){const t=I(()=>b.value.weatherFeatures||[]),e=I(()=>b.value.features||[]);return a("div",{children:[a("div",{className:"dropzone",onDrop:i=>{i.preventDefault();const d=Array.from(i.dataTransfer?.files||[]).find(u=>u.type==="application/json"||u.name.endsWith(".json"));if(d){const u=new FileReader;u.onload=c=>{const f=c.target?.result;if(f)try{const o=JSON.parse(f);b.value=o}catch(o){console.error("Invalid JSON file:",o)}},u.readAsText(d)}},onDragOver:i=>{i.preventDefault()},children:[a("strong",{children:"Drop your JSON here"}),a("br",{}),"or click ",a("span",{className:"pill warn",children:"Open JSON…"})]}),a("div",{style:{marginBottom:"12px"},children:a("button",{className:"btn primary",onClick:()=>{kt("create","weatherFeature")},children:"🧙‍♂️ Create Feature"})}),a("div",{className:"feature-browser",children:[a(Xe,{title:"Weather Features",type:"weatherFeatures",features:t.value}),a(Xe,{title:"General Features",type:"features",features:e.value})]})]})}function _n({layer:t,index:e,isUsed:n}){const r=I(()=>T.value.index===e),s=()=>{It(e)},i=l=>{l.stopPropagation(),confirm(`Are you sure you want to delete layer "${t.id}"?`)&&dn(e)};return a("div",{className:`feature-list-item ${r.value?"selected":""}`,onClick:s,children:[a("div",{className:"feature-info",children:[a("div",{className:"feature-name",children:t.id||"(no id)"}),a("div",{className:"feature-details",children:[a("span",{className:`pill ${n?"ok":"warn"}`,children:n?"used":"unused"}),a("span",{style:{marginLeft:"8px",fontSize:"11px"},children:t.type})]})]}),a("div",{className:"feature-actions",children:a("button",{className:"btn danger small",onClick:i,children:"Delete"})})]})}function vn(){const t=I(()=>{const h=T.value;return h.index>=0?b.value.layers[h.index]:null}),[e,n]=Ve(null),[r,s]=Ve(!1),i=F([]),l=e||t.value,d=e!==null,u=()=>{const h=Ke("wms","");n(h),s(!0),i.value=[]},c=()=>{t.value&&(n({...t.value}),s(!1),i.value=[])},f=()=>{if(!e)return;const h=Xt(e);if(!h.valid){i.value=h.errors,L(`❌ Layer validation failed: ${h.errors[0]}`);return}const _=en(b.value,e);M(_);const v=_.layers.findIndex(x=>x.id===e.id);v>=0&&It(v),n(null),s(!1),i.value=[],L("✅ Layer saved successfully")},o=()=>{n(null),s(!1),i.value=[]},p=h=>{e&&n({...e,...h})};return l?a("div",{children:[a("div",{className:"toolbar",children:[a("span",{className:"muted",children:r?"New Layer":d?"Edit Layer":"Layer Details"}),a("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[!d&&t.value&&a("button",{className:"btn small",onClick:c,children:"Edit"}),!d&&a("button",{className:"btn primary small",onClick:u,children:"New Layer"}),d&&a(ne,{children:[a("button",{className:"btn success small",onClick:f,children:"Save"}),a("button",{className:"btn ghost small",onClick:o,children:"Cancel"})]})]})]}),i.value.length>0&&a("div",{style:{marginBottom:"12px",padding:"8px",background:"var(--bad)",color:"white",borderRadius:"6px",fontSize:"12px"},children:[a("strong",{children:"Validation Errors:"}),a("ul",{style:{margin:"4px 0 0 16px",padding:0},children:i.value.map((h,_)=>a("li",{children:h},_))})]}),a("div",{className:"layer-section",children:[a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Layer ID"}),a("input",{type:"text",className:"form-input",value:l.id,onChange:h=>p({id:h.target.value}),placeholder:"unique_layer_id",disabled:!d})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Layer Type"}),a("select",{className:"form-select",value:l.type,onChange:h=>{const _=h.target.value,v=Ke(_,l.id);p({type:_,source:v.source,layerNames:v.layerNames,options:v.options})},disabled:!d,children:Lt.map(h=>a("option",{value:h,children:h.toUpperCase()},h))})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Source URL/ID"}),a("input",{type:"text",className:"form-input",value:l.source||"",onChange:h=>p({source:h.target.value}),placeholder:l.type==="portalItem"?"portal-item-id":"https://example.com/service",disabled:!d})]}),l.type==="wms"&&a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"WMS Layer Names (CSV)"}),a("input",{type:"text",className:"form-input",value:l.layerNames||"",onChange:h=>p({layerNames:h.target.value}),placeholder:"layer1,layer2,layer3",disabled:!d})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Opacity"}),a("input",{type:"number",className:"form-input",min:"0",max:"1",step:"0.1",value:l.opacity||1,onChange:h=>p({opacity:parseFloat(h.target.value)}),disabled:!d})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Z-Index"}),a("input",{type:"number",className:"form-input",value:l.zIndex||0,onChange:h=>p({zIndex:parseInt(h.target.value)}),disabled:!d})]}),l.type==="portalItem"&&a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Portal Layer ID"}),a("input",{type:"text",className:"form-input",value:l.options?.layerId||"",onChange:h=>p({options:{...l.options,layerId:h.target.value}}),placeholder:"0",disabled:!d})]})]})]}):a("div",{style:{textAlign:"center",padding:"20px",color:"var(--muted)"},children:[a("p",{children:"Select a layer to edit or create a new one"}),a("button",{className:"btn primary",onClick:u,children:"New Layer"})]})}function mn(){const t=I(()=>b.value.layers||[]),e=I(()=>ve(b.value));return a("div",{children:[a("div",{className:"feature-category",children:[a("div",{className:"feature-category-header",children:"Layers"}),a("div",{className:"feature-category-content",children:t.value.length===0?a("div",{style:{padding:"12px",color:"var(--muted)",textAlign:"center"},children:"No layers found"}):t.value.map((n,r)=>a(_n,{layer:n,index:r,isUsed:e.value.has(n.id)},n.id||r))})]}),a(vn,{})]})}function yn(){const t=I(()=>an.value),e=t.value.missingLayers.length,n=t.value.unusedLayers.length,r=Object.entries(t.value.missingIntl).map(([s,i])=>({lang:s,count:i.length})).filter(s=>s.count>0);return!e&&!n&&r.length===0?null:a("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"var(--panel)",borderTop:"1px solid var(--border)",padding:"8px 12px",fontSize:"12px",display:"flex",gap:"12px",alignItems:"center",zIndex:10},children:[e>0&&a("span",{className:`pill ${e>0?"bad":"ok"}`,children:["Missing layers: ",e]}),n>0&&a("span",{className:`pill ${n>0?"warn":"ok"}`,children:["Unused layers: ",n]}),r.map(({lang:s,count:i})=>a("span",{className:`pill ${i>0?"warn":"ok"}`,children:[s," missing: ",i]},s)),t.value.missingLayers.length>0&&a("div",{className:"muted",style:{fontSize:"10px"},children:["Missing: ",t.value.missingLayers.join(", ")]}),t.value.unusedLayers.length>0&&a("div",{className:"muted",style:{fontSize:"10px"},children:["Unused: ",t.value.unusedLayers.join(", ")]})]})}function gn(){const e=$.value.data,n=r=>{U({featureType:r})};return a("div",{children:[a("h3",{children:"Choose Feature Type"}),a("div",{className:"form-group",children:[a("label",{className:"form-radio",children:[a("input",{type:"radio",name:"featureType",value:"weatherFeature",checked:e.featureType==="weatherFeature",onChange:()=>n("weatherFeature")}),a("strong",{children:"Weather Feature"}),a("div",{className:"form-help",children:"Weather-related layers (wind, precipitation, temperature, clouds, radar, etc.)"})]}),a("label",{className:"form-radio",children:[a("input",{type:"radio",name:"featureType",value:"feature",checked:e.featureType==="feature",onChange:()=>n("feature")}),a("strong",{children:"General Feature"}),a("div",{className:"form-help",children:"Non-weather features (terrain, obstacles, POI, navigation aids, etc.)"})]})]})]})}function Nn(){const e=$.value.data,n=(r,s)=>{U({[r]:s})};return a("div",{children:[a("h3",{children:"Feature Configuration"}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Feature ID (for internationalization)"}),a("input",{type:"text",className:"form-input",value:e.featureId,onChange:r=>n("featureId",r.target.value),placeholder:"e.g., 'wind', 'cloud', 'aviation_obstacle'"}),a("div",{className:"form-help",children:"Optional. Used as key for translations across languages (en, da, nb, sv)."})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Display Name"}),a("input",{type:"text",className:"form-input",value:e.featureName,onChange:r=>n("featureName",r.target.value),placeholder:"e.g., 'Wind (60 min)', 'Cloud Coverage'"}),a("div",{className:"form-help",children:"Optional. Visible name in UI."})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Presentation Style"}),a("select",{className:"form-select",value:e.presentation,onChange:r=>n("presentation",r.target.value),children:[a("option",{value:"single",children:"Single - Only one item can be active at a time"}),a("option",{value:"multiple",children:"Multiple - Multiple items can be active simultaneously"})]})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:[a("input",{type:"checkbox",className:"form-checkbox",checked:e.mutuallyExclusive,onChange:r=>n("mutuallyExclusive",r.target.checked)}),"Mutually Exclusive Items"]}),a("div",{className:"form-help",children:"When one item is selected, others are automatically deselected."})]})]})}function bn(){const e=$.value.data,n=F(""),r=F(!0),s=F(""),i=F(""),l=()=>{if(!n.value.trim())return;const c={id:Ye(n.value),name:n.value.trim(),showLegend:r.value,legendUrl:s.value.trim()||void 0,legendDescription:i.value.trim()||void 0,layersIds:[]},f=[...e.items,c];U({items:f}),n.value="",r.value=!0,s.value="",i.value=""},d=c=>{const f=e.items.filter((o,p)=>p!==c);U({items:f})},u=(c,f)=>{const o=e.items.map((p,h)=>h===c?{...p,...f}:p);U({items:o})};return a("div",{children:[a("h3",{children:"Add Items to Feature"}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Item Name"}),a("input",{type:"text",className:"form-input",value:n.value,onChange:c=>n.value=c.target.value,placeholder:"e.g., 'FL025', 'Low Clouds', 'Icing Index'"})]}),a("div",{className:"form-group",children:a("label",{className:"form-label",children:[a("input",{type:"checkbox",className:"form-checkbox",checked:r.value,onChange:c=>r.value=c.target.checked}),"Show Legend Button"]})}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Legend URL (optional)"}),a("input",{type:"text",className:"form-input",value:s.value,onChange:c=>s.value=c.target.value,placeholder:"https://hemswx.no/img/info-map/legend.png"})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Legend Description Key (optional)"}),a("input",{type:"text",className:"form-input",value:i.value,onChange:c=>i.value=c.target.value,placeholder:"e.g., 'cloud_low_legend'"})]}),a("div",{className:"form-group",children:a("button",{className:"btn primary",onClick:l,disabled:!n.value.trim(),children:"Add Item"})}),a("div",{className:"items-container",children:e.items.length===0?a("div",{style:{padding:"20px",textAlign:"center",color:"var(--muted)"},children:"No items added yet"}):e.items.map((c,f)=>a("div",{className:"item-row",children:[a("div",{className:"item-info",children:[a("div",{className:"item-name",children:c.name}),a("div",{className:"item-details",children:["ID: ",c.id,c.showLegend&&" • Legend enabled",c.legendUrl&&" • Has legend URL",c.legendDescription&&` • Description: ${c.legendDescription}`]}),a("div",{className:"item-layers",children:["Layers: ",c.layersIds.length>0?c.layersIds.join(", "):"None assigned"]})]}),a("div",{className:"item-actions",children:[a("button",{className:"btn small",onClick:()=>{const o=prompt("Edit item name:",c.name);o&&u(f,{name:o,id:Ye(o)})},children:"Edit"}),a("button",{className:"btn danger small",onClick:()=>d(f),children:"Remove"})]})]},f))})]})}function wn(){const e=$.value.data,n=I(()=>b.value.layers||[]),r=(i,l,d)=>{const u=e.items.map((c,f)=>{if(f===i){const o=c.layersIds||[],p=d?[...o,l]:o.filter(h=>h!==l);return{...c,layersIds:p}}return c});U({items:u})},s=(i,l)=>e.items[i]?.layersIds?.includes(l)||!1;return e.items.length===0?a("div",{children:[a("h3",{children:"Associate Layers with Items"}),a("p",{className:"muted",children:"No items to associate. Go back to add items first."})]}):n.value.length===0?a("div",{children:[a("h3",{children:"Associate Layers with Items"}),a("p",{className:"muted",children:"No layers found in the JSON data. You can create layers in the Layers tab after creating this feature."}),a("div",{className:"validation-results",children:a("div",{className:"validation-item warning",children:"⚠️ Items without layer associations will not function properly in the application."})})]}):a("div",{children:[a("h3",{children:"Associate Layers with Items"}),a("p",{className:"muted",children:"Select which layers each item should control. Items without layer associations will not function."}),a("div",{className:"layer-grid",children:e.items.map((i,l)=>a("div",{className:"layer-section",children:[a("h4",{children:i.name}),a("div",{className:"layer-options",children:n.value.map((d,u)=>a("div",{className:"layer-option",children:[a("input",{type:"checkbox",id:`layer-${l}-${u}`,checked:s(l,d.id),onChange:c=>r(l,d.id,c.target.checked)}),a("label",{htmlFor:`layer-${l}-${u}`,children:[d.id,a("div",{style:{fontSize:"10px",opacity:.7},children:d.type.toUpperCase()})]})]},u))}),i.layersIds.length===0&&a("div",{style:{marginTop:"8px",fontSize:"11px",color:"var(--warn)",fontStyle:"italic"},children:"⚠️ No layers assigned to this item"})]},l))}),e.items.some(i=>i.layersIds.length===0)&&a("div",{className:"validation-results",style:{marginTop:"16px"},children:a("div",{className:"validation-item warning",children:"⚠️ Some items don't have layer associations. These items will not function properly."})}),a("div",{style:{marginTop:"16px",padding:"12px",background:"var(--input-bg)",borderRadius:"8px"},children:[a("div",{className:"form-label",style:{marginBottom:"8px"},children:"Quick Actions:"}),a("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[a("button",{className:"btn small",onClick:()=>{const i=e.items.map(l=>({...l,layersIds:n.value.map(d=>d.id)}));U({items:i})},children:"Assign All Layers to All Items"}),a("button",{className:"btn small",onClick:()=>{const i=e.items.map(l=>({...l,layersIds:[]}));U({items:i})},children:"Clear All Assignments"})]})]})]})}function xn(){const t=$.value,e=t.data,n=I(()=>{const s=[],i=[],l=[];e.items.length===0?s.push("No items have been added to this feature"):l.push(`✅ ${e.items.length} item(s) configured`);const d=e.items.filter(_=>_.layersIds.length===0);d.length>0&&i.push(`⚠️ ${d.length} item(s) have no layer assignments: ${d.map(_=>_.name).join(", ")}`);const u=e.items.filter(_=>_.layersIds.length>0);u.length>0&&l.push(`✅ ${u.length} item(s) have layer assignments`);const c=new Set;e.items.forEach(_=>{_.layersIds.forEach(v=>c.add(v))});const f=new Set((b.value.layers||[]).map(_=>_.id)),o=[...c].filter(_=>!f.has(_));o.length>0&&s.push(`❌ Referenced layers not found in JSON: ${o.join(", ")}`);const p=e.items.map(_=>_.id),h=p.filter((_,v)=>p.indexOf(_)!==v);return h.length>0&&s.push(`❌ Duplicate item IDs found: ${[...new Set(h)].join(", ")}`),{errors:s,warnings:i,success:l}}),r=I(()=>{const s={id:e.featureId||void 0,name:e.featureName||void 0,presentation:e.presentation,mutuallyExclusive:e.mutuallyExclusive||void 0,items:e.items.map(l=>({id:l.id,name:l.name,showLegend:l.showLegend,legendUrl:l.legendUrl||void 0,legendDescription:l.legendDescription||void 0,layersIds:l.layersIds}))};return JSON.parse(JSON.stringify(s,(l,d)=>d===void 0?void 0:d))});return a("div",{children:[a("h3",{children:"Review Your Feature"}),a("div",{className:"validation-results",children:[n.value.errors.map((s,i)=>a("div",{className:"validation-item error",children:s},`error-${i}`)),n.value.warnings.map((s,i)=>a("div",{className:"validation-item warning",children:s},`warning-${i}`)),n.value.success.map((s,i)=>a("div",{className:"validation-item success",children:s},`success-${i}`)),n.value.errors.length===0&&n.value.warnings.length===0&&a("div",{className:"validation-item success",children:["🎉 Feature is ready to be ",t.mode==="edit"?"updated":"created","!"]})]}),a("div",{className:"form-group",children:[a("label",{className:"form-label",children:"Generated JSON Preview"}),a("textarea",{className:"form-textarea",value:JSON.stringify(r.value,null,2),readonly:!0,style:{height:"300px",fontSize:"11px"}})]}),a("div",{style:{marginTop:"16px",padding:"12px",background:"var(--input-bg)",borderRadius:"8px",fontSize:"12px"},children:[a("div",{className:"form-label",children:"Feature Summary:"}),a("ul",{style:{margin:"8px 0",paddingLeft:"20px",color:"var(--muted)"},children:[a("li",{children:[a("strong",{children:"Type:"})," ",e.featureType==="weatherFeature"?"Weather Feature":"General Feature"]}),e.featureId&&a("li",{children:[a("strong",{children:"ID:"})," ",e.featureId]}),e.featureName&&a("li",{children:[a("strong",{children:"Name:"})," ",e.featureName]}),a("li",{children:[a("strong",{children:"Presentation:"})," ",e.presentation]}),e.mutuallyExclusive&&a("li",{children:[a("strong",{children:"Mutually Exclusive:"})," Yes"]}),a("li",{children:[a("strong",{children:"Items:"})," ",e.items.length]}),a("li",{children:[a("strong",{children:"Total Layer Associations:"})," ",e.items.reduce((s,i)=>s+i.layersIds.length,0)]})]})]})]})}const Sn=[{id:1,title:"Feature Type"},{id:2,title:"Configuration"},{id:3,title:"Add Items"},{id:4,title:"Layer Association"},{id:5,title:"Review & Save"}];function Cn(){const t=$.value,e=t.currentStep,n=I(()=>{const o=t.data;switch(e){case 1:return!0;case 2:return!0;case 3:return o.items.length>0;case 4:return o.items.every(p=>p.layersIds.length>0);case 5:return!0;default:return!1}}),r=e>1,s=e===5,i=()=>{confirm("Are you sure you want to close the wizard? Unsaved changes will be lost.")&&Ze()},l=()=>{r&&Qe(e-1)},d=()=>{n.value&&Qe(e+1)},u=()=>{const o=t.data,p={id:o.featureId||void 0,name:o.featureName||void 0,presentation:o.presentation,mutuallyExclusive:o.mutuallyExclusive||void 0,items:o.items.map(v=>({id:v.id,name:v.name,showLegend:v.showLegend,legendUrl:v.legendUrl||void 0,legendDescription:v.legendDescription||void 0,layersIds:v.layersIds}))};Object.keys(p).forEach(v=>{p[v]===void 0&&delete p[v]});const h={...b.value},_=o.featureType==="weatherFeature"?h.weatherFeatures:h.features;t.mode==="edit"&&t.editingIndex>=0?_[t.editingIndex]=p:_.push(p),M(h),Ze()},c=()=>{switch(e){case 1:return a(gn,{});case 2:return a(Nn,{});case 3:return a(bn,{});case 4:return a(wn,{});case 5:return a(xn,{});default:return null}},f=o=>o<e?"completed":o===e?"active":"pending";return a("div",{className:"wizard-modal active",children:a("div",{className:"wizard-content",children:[a("div",{className:"wizard-header",children:a("h2",{children:[t.mode==="edit"?"Edit Feature":"Create New Feature"," - Multi-Step Wizard"]})}),a("div",{className:"wizard-body",children:a("div",{className:"wizard-layout",children:[a("div",{className:"wizard-sidebar",children:a("div",{className:"stepper",children:Sn.map(o=>a("div",{className:`stepper-item ${f(o.id)}`,children:[a("div",{className:"stepper-number",children:a("span",{children:o.id})}),a("div",{className:"stepper-label",children:o.title})]},o.id))})}),a("div",{className:"wizard-main",children:a("div",{className:"step-content active",children:c()})})]})}),a("div",{className:"wizard-footer",children:[a("button",{className:"btn",onClick:l,disabled:!r,children:"← Previous"}),s?a("button",{className:"btn success",onClick:u,children:["✨ ",t.mode==="edit"?"Update Feature":"Create Feature"]}):a("button",{className:"btn primary",onClick:d,disabled:!n.value,children:"Next →"}),a("button",{className:"btn ghost",onClick:i,children:"Cancel"})]})]})})}const Ln=[{id:"features",label:"Features"},{id:"layers",label:"Layers"},{id:"tools",label:"Tools"},{id:"internationalization",label:"i18n"},{id:"stats",label:"Stats"}],$n=[{id:"json",label:"JSON"},{id:"feature",label:"Feature"},{id:"layer",label:"Layer"}];function In(){const t=F(null);return a("div",{className:"app",children:[a("header",{className:"header",children:[a("h1",{children:"Map Layers JSON Editor"}),a("button",{className:"btn",onClick:()=>{t.value?.click()},children:"Open JSON…"}),a("input",{ref:t,type:"file",accept:"application/json,.json",style:{display:"none"},onChange:n=>{const r=n.target.files?.[0];if(r){const s=new FileReader;s.onload=i=>{const l=i.target?.result;if(l)try{const d=JSON.parse(l);b.value=d,B.value="✅ JSON file loaded successfully"}catch(d){B.value=`❌ Invalid JSON: ${d instanceof Error?d.message:"Parse error"}`}},s.readAsText(r)}}}),a(fn,{}),a("div",{className:"quick-summary",children:[a("span",{className:"muted",children:rn.value}),a("div",{className:"status muted",children:B.value})]})]}),a("div",{className:"main-layout",children:[a("div",{className:"main-column left",children:a("div",{className:"tabs",children:[a("div",{className:"tab-buttons",children:Ln.map(n=>a("button",{className:`tab-btn ${z.value===n.id?"active":""}`,onClick:()=>z.value=n.id,children:n.label},n.id))}),a("div",{className:`tab-content ${z.value==="features"?"active":""}`,children:a(pn,{})}),a("div",{className:`tab-content ${z.value==="layers"?"active":""}`,children:a(mn,{})}),a("div",{className:`tab-content ${z.value==="tools"?"active":""}`,children:a("div",{className:"tools-section",children:[a("h3",{children:"Validation & Cleanup"}),a("div",{className:"tools-grid",children:[a("button",{className:"btn tool-btn",children:"Validate"}),a("button",{className:"btn tool-btn",children:"Fix Missing Translations"}),a("button",{className:"btn tool-btn",children:"Remove Unused"}),a("button",{className:"btn tool-btn",children:"Format"})]})]})}),a("div",{className:`tab-content ${z.value==="internationalization"?"active":""}`,children:a("div",{className:"text-center muted p-4",children:"Internationalization panel coming soon"})}),a("div",{className:`tab-content ${z.value==="stats"?"active":""}`,children:a("div",{className:"text-center muted p-4",children:"Stats panel coming soon"})})]})}),a("div",{className:"main-column right",children:[a("div",{className:"right-tab-buttons",children:$n.map(n=>a("button",{className:`right-tab-btn ${j.value===n.id?"active":""}`,onClick:()=>j.value=n.id,children:n.label},n.id))}),a("div",{className:`tab-content ${j.value==="json"?"active":""}`,children:[a("div",{className:"toolbar",children:a("span",{className:"muted",children:"JSON (editable)"})}),a(un,{})]}),a("div",{className:`tab-content ${j.value==="feature"?"active":""}`,children:[a("div",{className:"toolbar",children:a("span",{className:"muted",children:"Selected Feature"})}),a("div",{className:"text-center muted p-4",children:"Select a feature to preview its JSON"})]}),a("div",{className:`tab-content ${j.value==="layer"?"active":""}`,children:[a("div",{className:"toolbar",children:a("span",{className:"muted",children:"Selected Layer"})}),a("div",{className:"text-center muted p-4",children:"Select a layer to preview its JSON"})]})]})]}),a(yn,{}),$.value.isOpen&&a(Cn,{})]})}Ut(a(In,{}),document.getElementById("app"));
